var rne=Object.defineProperty;var ine=(t,e,n)=>e in t?rne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Wv=(t,e,n)=>ine(t,typeof e!="symbol"?e+"":e,n);function ane(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var RP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Au(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function GH(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var HH={exports:{}},w_={},VH={exports:{}},En={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1=Symbol.for("react.element"),sne=Symbol.for("react.portal"),one=Symbol.for("react.fragment"),une=Symbol.for("react.strict_mode"),lne=Symbol.for("react.profiler"),cne=Symbol.for("react.provider"),fne=Symbol.for("react.context"),pne=Symbol.for("react.forward_ref"),dne=Symbol.for("react.suspense"),hne=Symbol.for("react.memo"),mne=Symbol.for("react.lazy"),qB=Symbol.iterator;function vne(t){return t===null||typeof t!="object"?null:(t=qB&&t[qB]||t["@@iterator"],typeof t=="function"?t:null)}var WH={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$H=Object.assign,jH={};function Vm(t,e,n){this.props=t,this.context=e,this.refs=jH,this.updater=n||WH}Vm.prototype.isReactComponent={};Vm.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XH(){}XH.prototype=Vm.prototype;function FL(t,e,n){this.props=t,this.context=e,this.refs=jH,this.updater=n||WH}var BL=FL.prototype=new XH;BL.constructor=FL;$H(BL,Vm.prototype);BL.isPureReactComponent=!0;var GB=Array.isArray,YH=Object.prototype.hasOwnProperty,zL={current:null},QH={key:!0,ref:!0,__self:!0,__source:!0};function ZH(t,e,n){var r,a={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)YH.call(e,r)&&!QH.hasOwnProperty(r)&&(a[r]=e[r]);var u=arguments.length-2;if(u===1)a.children=n;else if(1<u){for(var l=Array(u),f=0;f<u;f++)l[f]=arguments[f+2];a.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)a[r]===void 0&&(a[r]=u[r]);return{$$typeof:v1,type:t,key:s,ref:o,props:a,_owner:zL.current}}function gne(t,e){return{$$typeof:v1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qL(t){return typeof t=="object"&&t!==null&&t.$$typeof===v1}function yne(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var HB=/\/+/g;function zR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yne(""+t.key):e.toString(36)}function jS(t,e,n,r,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case v1:case sne:o=!0}}if(o)return o=t,a=a(o),t=r===""?"."+zR(o,0):r,GB(a)?(n="",t!=null&&(n=t.replace(HB,"$&/")+"/"),jS(a,e,n,"",function(f){return f})):a!=null&&(qL(a)&&(a=gne(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(HB,"$&/")+"/")+t)),e.push(a)),1;if(o=0,r=r===""?".":r+":",GB(t))for(var u=0;u<t.length;u++){s=t[u];var l=r+zR(s,u);o+=jS(s,e,n,l,a)}else if(l=vne(t),typeof l=="function")for(t=l.call(t),u=0;!(s=t.next()).done;)s=s.value,l=r+zR(s,u++),o+=jS(s,e,n,l,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xb(t,e,n){if(t==null)return t;var r=[],a=0;return jS(t,r,"","",function(s){return e.call(n,s,a++)}),r}function xne(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cs={current:null},XS={transition:null},bne={ReactCurrentDispatcher:cs,ReactCurrentBatchConfig:XS,ReactCurrentOwner:zL};function JH(){throw Error("act(...) is not supported in production builds of React.")}En.Children={map:xb,forEach:function(t,e,n){xb(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xb(t,function(){e++}),e},toArray:function(t){return xb(t,function(e){return e})||[]},only:function(t){if(!qL(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};En.Component=Vm;En.Fragment=one;En.Profiler=lne;En.PureComponent=FL;En.StrictMode=une;En.Suspense=dne;En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bne;En.act=JH;En.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$H({},t.props),a=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=zL.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(l in e)YH.call(e,l)&&!QH.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&u!==void 0?u[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){u=Array(l);for(var f=0;f<l;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:v1,type:t.type,key:a,ref:s,props:r,_owner:o}};En.createContext=function(t){return t={$$typeof:fne,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cne,_context:t},t.Consumer=t};En.createElement=ZH;En.createFactory=function(t){var e=ZH.bind(null,t);return e.type=t,e};En.createRef=function(){return{current:null}};En.forwardRef=function(t){return{$$typeof:pne,render:t}};En.isValidElement=qL;En.lazy=function(t){return{$$typeof:mne,_payload:{_status:-1,_result:t},_init:xne}};En.memo=function(t,e){return{$$typeof:hne,type:t,compare:e===void 0?null:e}};En.startTransition=function(t){var e=XS.transition;XS.transition={};try{t()}finally{XS.transition=e}};En.unstable_act=JH;En.useCallback=function(t,e){return cs.current.useCallback(t,e)};En.useContext=function(t){return cs.current.useContext(t)};En.useDebugValue=function(){};En.useDeferredValue=function(t){return cs.current.useDeferredValue(t)};En.useEffect=function(t,e){return cs.current.useEffect(t,e)};En.useId=function(){return cs.current.useId()};En.useImperativeHandle=function(t,e,n){return cs.current.useImperativeHandle(t,e,n)};En.useInsertionEffect=function(t,e){return cs.current.useInsertionEffect(t,e)};En.useLayoutEffect=function(t,e){return cs.current.useLayoutEffect(t,e)};En.useMemo=function(t,e){return cs.current.useMemo(t,e)};En.useReducer=function(t,e,n){return cs.current.useReducer(t,e,n)};En.useRef=function(t){return cs.current.useRef(t)};En.useState=function(t){return cs.current.useState(t)};En.useSyncExternalStore=function(t,e,n){return cs.current.useSyncExternalStore(t,e,n)};En.useTransition=function(){return cs.current.useTransition()};En.version="18.3.1";VH.exports=En;var Ge=VH.exports;const _n=Au(Ge),VB=ane({__proto__:null,default:_n},[Ge]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sne=Ge,wne=Symbol.for("react.element"),_ne=Symbol.for("react.fragment"),Mne=Object.prototype.hasOwnProperty,Ene=Sne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tne={key:!0,ref:!0,__self:!0,__source:!0};function KH(t,e,n){var r,a={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Mne.call(e,r)&&!Tne.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:wne,type:t,key:s,ref:o,props:a,_owner:Ene.current}}w_.Fragment=_ne;w_.jsx=KH;w_.jsxs=KH;HH.exports=w_;var Mt=HH.exports,e9={exports:{}},lo={},t9={exports:{}},n9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,O){var W=k.length;k.push(O);e:for(;0<W;){var X=W-1>>>1,ee=k[X];if(0<a(ee,O))k[X]=O,k[W]=ee,W=X;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var O=k[0],W=k.pop();if(W!==O){k[0]=W;e:for(var X=0,ee=k.length,J=ee>>>1;X<J;){var Y=2*(X+1)-1,ie=k[Y],K=Y+1,re=k[K];if(0>a(ie,W))K<ee&&0>a(re,ie)?(k[X]=re,k[K]=W,X=K):(k[X]=ie,k[Y]=W,X=Y);else if(K<ee&&0>a(re,W))k[X]=re,k[K]=W,X=K;else break e}}return O}function a(k,O){var W=k.sortIndex-O.sortIndex;return W!==0?W:k.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var l=[],f=[],c=1,p=null,d=3,h=!1,m=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(k){for(var O=n(f);O!==null;){if(O.callback===null)r(f);else if(O.startTime<=k)r(f),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(f)}}function M(k){if(v=!1,x(k),!m)if(n(l)!==null)m=!0,G(A);else{var O=n(f);O!==null&&F(M,O.startTime-k)}}function A(k,O){m=!1,v&&(v=!1,y(D),D=-1),h=!0;var W=d;try{for(x(O),p=n(l);p!==null&&(!(p.expirationTime>O)||k&&!P());){var X=p.callback;if(typeof X=="function"){p.callback=null,d=p.priorityLevel;var ee=X(p.expirationTime<=O);O=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(l)&&r(l),x(O)}else r(l);p=n(l)}if(p!==null)var J=!0;else{var Y=n(f);Y!==null&&F(M,Y.startTime-O),J=!1}return J}finally{p=null,d=W,h=!1}}var E=!1,N=null,D=-1,C=5,T=-1;function P(){return!(t.unstable_now()-T<C)}function I(){if(N!==null){var k=t.unstable_now();T=k;var O=!0;try{O=N(!0,k)}finally{O?U():(E=!1,N=null)}}else E=!1}var U;if(typeof _=="function")U=function(){_(I)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,z=q.port2;q.port1.onmessage=I,U=function(){z.postMessage(null)}}else U=function(){g(I,0)};function G(k){N=k,E||(E=!0,U())}function F(k,O){D=g(function(){k(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,G(A))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(k){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var W=d;d=O;try{return k()}finally{d=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,O){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var W=d;d=k;try{return O()}finally{d=W}},t.unstable_scheduleCallback=function(k,O,W){var X=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?X+W:X):W=X,k){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=W+ee,k={id:c++,callback:O,priorityLevel:k,startTime:W,expirationTime:ee,sortIndex:-1},W>X?(k.sortIndex=W,e(f,k),n(l)===null&&k===n(f)&&(v?(y(D),D=-1):v=!0,F(M,W-X))):(k.sortIndex=ee,e(l,k),m||h||(m=!0,G(A))),k},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(k){var O=d;return function(){var W=d;d=O;try{return k.apply(this,arguments)}finally{d=W}}}})(n9);t9.exports=n9;var Ane=t9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nne=Ge,ro=Ane;function ut(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r9=new Set,py={};function ph(t,e){mm(t,e),mm(t+"Capture",e)}function mm(t,e){for(py[t]=e,t=0;t<e.length;t++)r9.add(e[t])}var pc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),IP=Object.prototype.hasOwnProperty,Cne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,WB={},$B={};function Dne(t){return IP.call($B,t)?!0:IP.call(WB,t)?!1:Cne.test(t)?$B[t]=!0:(WB[t]=!0,!1)}function Rne(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ine(t,e,n,r){if(e===null||typeof e>"u"||Rne(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fs(t,e,n,r,a,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pa[t]=new fs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pa[e]=new fs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pa[t]=new fs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pa[t]=new fs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pa[t]=new fs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pa[t]=new fs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pa[t]=new fs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pa[t]=new fs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pa[t]=new fs(t,5,!1,t.toLowerCase(),null,!1,!1)});var GL=/[\-:]([a-z])/g;function HL(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(GL,HL);pa[e]=new fs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(GL,HL);pa[e]=new fs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(GL,HL);pa[e]=new fs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pa[t]=new fs(t,1,!1,t.toLowerCase(),null,!1,!1)});pa.xlinkHref=new fs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pa[t]=new fs(t,1,!1,t.toLowerCase(),null,!0,!0)});function VL(t,e,n,r){var a=pa.hasOwnProperty(e)?pa[e]:null;(a!==null?a.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ine(e,n,a,r)&&(n=null),r||a===null?Dne(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Oc=Nne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bb=Symbol.for("react.element"),U0=Symbol.for("react.portal"),F0=Symbol.for("react.fragment"),WL=Symbol.for("react.strict_mode"),PP=Symbol.for("react.profiler"),i9=Symbol.for("react.provider"),a9=Symbol.for("react.context"),$L=Symbol.for("react.forward_ref"),OP=Symbol.for("react.suspense"),LP=Symbol.for("react.suspense_list"),jL=Symbol.for("react.memo"),Tf=Symbol.for("react.lazy"),s9=Symbol.for("react.offscreen"),jB=Symbol.iterator;function $v(t){return t===null||typeof t!="object"?null:(t=jB&&t[jB]||t["@@iterator"],typeof t=="function"?t:null)}var jr=Object.assign,qR;function Sg(t){if(qR===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qR=e&&e[1]||""}return`
`+qR+t}var GR=!1;function HR(t,e){if(!t||GR)return"";GR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var a=f.stack.split(`
`),s=r.stack.split(`
`),o=a.length-1,u=s.length-1;1<=o&&0<=u&&a[o]!==s[u];)u--;for(;1<=o&&0<=u;o--,u--)if(a[o]!==s[u]){if(o!==1||u!==1)do if(o--,u--,0>u||a[o]!==s[u]){var l=`
`+a[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=u);break}}}finally{GR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sg(t):""}function Pne(t){switch(t.tag){case 5:return Sg(t.type);case 16:return Sg("Lazy");case 13:return Sg("Suspense");case 19:return Sg("SuspenseList");case 0:case 2:case 15:return t=HR(t.type,!1),t;case 11:return t=HR(t.type.render,!1),t;case 1:return t=HR(t.type,!0),t;default:return""}}function kP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F0:return"Fragment";case U0:return"Portal";case PP:return"Profiler";case WL:return"StrictMode";case OP:return"Suspense";case LP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case a9:return(t.displayName||"Context")+".Consumer";case i9:return(t._context.displayName||"Context")+".Provider";case $L:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jL:return e=t.displayName||null,e!==null?e:kP(t.type)||"Memo";case Tf:e=t._payload,t=t._init;try{return kP(t(e))}catch{}}return null}function One(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kP(e);case 8:return e===WL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o9(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lne(t){var e=o9(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sb(t){t._valueTracker||(t._valueTracker=Lne(t))}function u9(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=o9(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function E2(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function UP(t,e){var n=e.checked;return jr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function XB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l9(t,e){e=e.checked,e!=null&&VL(t,"checked",e,!1)}function FP(t,e){l9(t,e);var n=Zf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?BP(t,e.type,n):e.hasOwnProperty("defaultValue")&&BP(t,e.type,Zf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function YB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function BP(t,e,n){(e!=="number"||E2(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wg=Array.isArray;function rm(t,e,n,r){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zf(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function zP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ut(91));return jr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function QB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ut(92));if(wg(n)){if(1<n.length)throw Error(ut(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zf(n)}}function c9(t,e){var n=Zf(e.value),r=Zf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ZB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function f9(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?f9(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wb,p9=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wb=wb||document.createElement("div"),wb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kne=["Webkit","ms","Moz","O"];Object.keys(Pg).forEach(function(t){kne.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pg[e]=Pg[t]})});function d9(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pg.hasOwnProperty(t)&&Pg[t]?(""+e).trim():e+"px"}function h9(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=d9(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var Une=jr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function GP(t,e){if(e){if(Une[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ut(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ut(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ut(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ut(62))}}function HP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VP=null;function XL(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var WP=null,im=null,am=null;function JB(t){if(t=x1(t)){if(typeof WP!="function")throw Error(ut(280));var e=t.stateNode;e&&(e=A_(e),WP(t.stateNode,t.type,e))}}function m9(t){im?am?am.push(t):am=[t]:im=t}function v9(){if(im){var t=im,e=am;if(am=im=null,JB(t),e)for(t=0;t<e.length;t++)JB(e[t])}}function g9(t,e){return t(e)}function y9(){}var VR=!1;function x9(t,e,n){if(VR)return t(e,n);VR=!0;try{return g9(t,e,n)}finally{VR=!1,(im!==null||am!==null)&&(y9(),v9())}}function hy(t,e){var n=t.stateNode;if(n===null)return null;var r=A_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ut(231,e,typeof n));return n}var $P=!1;if(pc)try{var jv={};Object.defineProperty(jv,"passive",{get:function(){$P=!0}}),window.addEventListener("test",jv,jv),window.removeEventListener("test",jv,jv)}catch{$P=!1}function Fne(t,e,n,r,a,s,o,u,l){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(c){this.onError(c)}}var Og=!1,T2=null,A2=!1,jP=null,Bne={onError:function(t){Og=!0,T2=t}};function zne(t,e,n,r,a,s,o,u,l){Og=!1,T2=null,Fne.apply(Bne,arguments)}function qne(t,e,n,r,a,s,o,u,l){if(zne.apply(this,arguments),Og){if(Og){var f=T2;Og=!1,T2=null}else throw Error(ut(198));A2||(A2=!0,jP=f)}}function dh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function b9(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function KB(t){if(dh(t)!==t)throw Error(ut(188))}function Gne(t){var e=t.alternate;if(!e){if(e=dh(t),e===null)throw Error(ut(188));return e!==t?null:t}for(var n=t,r=e;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return KB(a),t;if(s===r)return KB(a),e;s=s.sibling}throw Error(ut(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,u=a.child;u;){if(u===n){o=!0,n=a,r=s;break}if(u===r){o=!0,r=a,n=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===n){o=!0,n=s,r=a;break}if(u===r){o=!0,r=s,n=a;break}u=u.sibling}if(!o)throw Error(ut(189))}}if(n.alternate!==r)throw Error(ut(190))}if(n.tag!==3)throw Error(ut(188));return n.stateNode.current===n?t:e}function S9(t){return t=Gne(t),t!==null?w9(t):null}function w9(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=w9(t);if(e!==null)return e;t=t.sibling}return null}var _9=ro.unstable_scheduleCallback,e5=ro.unstable_cancelCallback,Hne=ro.unstable_shouldYield,Vne=ro.unstable_requestPaint,ci=ro.unstable_now,Wne=ro.unstable_getCurrentPriorityLevel,YL=ro.unstable_ImmediatePriority,M9=ro.unstable_UserBlockingPriority,N2=ro.unstable_NormalPriority,$ne=ro.unstable_LowPriority,E9=ro.unstable_IdlePriority,__=null,rl=null;function jne(t){if(rl&&typeof rl.onCommitFiberRoot=="function")try{rl.onCommitFiberRoot(__,t,void 0,(t.current.flags&128)===128)}catch{}}var mu=Math.clz32?Math.clz32:Qne,Xne=Math.log,Yne=Math.LN2;function Qne(t){return t>>>=0,t===0?32:31-(Xne(t)/Yne|0)|0}var _b=64,Mb=4194304;function _g(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function C2(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~a;u!==0?r=_g(u):(s&=o,s!==0&&(r=_g(s)))}else o=n&~a,o!==0?r=_g(o):s!==0&&(r=_g(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&a)&&(a=r&-r,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mu(e),a=1<<n,r|=t[n],e&=~a;return r}function Zne(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jne(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-mu(s),u=1<<o,l=a[o];l===-1?(!(u&n)||u&r)&&(a[o]=Zne(u,e)):l<=e&&(t.expiredLanes|=u),s&=~u}}function XP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function T9(){var t=_b;return _b<<=1,!(_b&4194240)&&(_b=64),t}function WR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function g1(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mu(e),t[e]=n}function Kne(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-mu(n),s=1<<a;e[a]=0,r[a]=-1,t[a]=-1,n&=~s}}function QL(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mu(n),a=1<<r;a&e|t[r]&e&&(t[r]|=e),n&=~a}}var rr=0;function A9(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var N9,ZL,C9,D9,R9,YP=!1,Eb=[],zf=null,qf=null,Gf=null,my=new Map,vy=new Map,Rf=[],ere="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t5(t,e){switch(t){case"focusin":case"focusout":zf=null;break;case"dragenter":case"dragleave":qf=null;break;case"mouseover":case"mouseout":Gf=null;break;case"pointerover":case"pointerout":my.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vy.delete(e.pointerId)}}function Xv(t,e,n,r,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},e!==null&&(e=x1(e),e!==null&&ZL(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function tre(t,e,n,r,a){switch(e){case"focusin":return zf=Xv(zf,t,e,n,r,a),!0;case"dragenter":return qf=Xv(qf,t,e,n,r,a),!0;case"mouseover":return Gf=Xv(Gf,t,e,n,r,a),!0;case"pointerover":var s=a.pointerId;return my.set(s,Xv(my.get(s)||null,t,e,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,vy.set(s,Xv(vy.get(s)||null,t,e,n,r,a)),!0}return!1}function I9(t){var e=wd(t.target);if(e!==null){var n=dh(e);if(n!==null){if(e=n.tag,e===13){if(e=b9(n),e!==null){t.blockedOn=e,R9(t.priority,function(){C9(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function YS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=QP(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);VP=r,n.target.dispatchEvent(r),VP=null}else return e=x1(n),e!==null&&ZL(e),t.blockedOn=n,!1;e.shift()}return!0}function n5(t,e,n){YS(t)&&n.delete(e)}function nre(){YP=!1,zf!==null&&YS(zf)&&(zf=null),qf!==null&&YS(qf)&&(qf=null),Gf!==null&&YS(Gf)&&(Gf=null),my.forEach(n5),vy.forEach(n5)}function Yv(t,e){t.blockedOn===e&&(t.blockedOn=null,YP||(YP=!0,ro.unstable_scheduleCallback(ro.unstable_NormalPriority,nre)))}function gy(t){function e(a){return Yv(a,t)}if(0<Eb.length){Yv(Eb[0],t);for(var n=1;n<Eb.length;n++){var r=Eb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zf!==null&&Yv(zf,t),qf!==null&&Yv(qf,t),Gf!==null&&Yv(Gf,t),my.forEach(e),vy.forEach(e),n=0;n<Rf.length;n++)r=Rf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rf.length&&(n=Rf[0],n.blockedOn===null);)I9(n),n.blockedOn===null&&Rf.shift()}var sm=Oc.ReactCurrentBatchConfig,D2=!0;function rre(t,e,n,r){var a=rr,s=sm.transition;sm.transition=null;try{rr=1,JL(t,e,n,r)}finally{rr=a,sm.transition=s}}function ire(t,e,n,r){var a=rr,s=sm.transition;sm.transition=null;try{rr=4,JL(t,e,n,r)}finally{rr=a,sm.transition=s}}function JL(t,e,n,r){if(D2){var a=QP(t,e,n,r);if(a===null)tI(t,e,r,R2,n),t5(t,r);else if(tre(a,t,e,n,r))r.stopPropagation();else if(t5(t,r),e&4&&-1<ere.indexOf(t)){for(;a!==null;){var s=x1(a);if(s!==null&&N9(s),s=QP(t,e,n,r),s===null&&tI(t,e,r,R2,n),s===a)break;a=s}a!==null&&r.stopPropagation()}else tI(t,e,r,null,n)}}var R2=null;function QP(t,e,n,r){if(R2=null,t=XL(r),t=wd(t),t!==null)if(e=dh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=b9(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return R2=t,null}function P9(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wne()){case YL:return 1;case M9:return 4;case N2:case $ne:return 16;case E9:return 536870912;default:return 16}default:return 16}}var Lf=null,KL=null,QS=null;function O9(){if(QS)return QS;var t,e=KL,n=e.length,r,a="value"in Lf?Lf.value:Lf.textContent,s=a.length;for(t=0;t<n&&e[t]===a[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===a[s-r];r++);return QS=a.slice(t,1<r?1-r:void 0)}function ZS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Tb(){return!0}function r5(){return!1}function co(t){function e(n,r,a,s,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tb:r5,this.isPropagationStopped=r5,this}return jr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tb)},persist:function(){},isPersistent:Tb}),e}var Wm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ek=co(Wm),y1=jr({},Wm,{view:0,detail:0}),are=co(y1),$R,jR,Qv,M_=jr({},y1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qv&&(Qv&&t.type==="mousemove"?($R=t.screenX-Qv.screenX,jR=t.screenY-Qv.screenY):jR=$R=0,Qv=t),$R)},movementY:function(t){return"movementY"in t?t.movementY:jR}}),i5=co(M_),sre=jr({},M_,{dataTransfer:0}),ore=co(sre),ure=jr({},y1,{relatedTarget:0}),XR=co(ure),lre=jr({},Wm,{animationName:0,elapsedTime:0,pseudoElement:0}),cre=co(lre),fre=jr({},Wm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pre=co(fre),dre=jr({},Wm,{data:0}),a5=co(dre),hre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gre(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vre[t])?!!e[t]:!1}function tk(){return gre}var yre=jr({},y1,{key:function(t){if(t.key){var e=hre[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ZS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mre[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tk,charCode:function(t){return t.type==="keypress"?ZS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ZS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xre=co(yre),bre=jr({},M_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s5=co(bre),Sre=jr({},y1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tk}),wre=co(Sre),_re=jr({},Wm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mre=co(_re),Ere=jr({},M_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tre=co(Ere),Are=[9,13,27,32],nk=pc&&"CompositionEvent"in window,Lg=null;pc&&"documentMode"in document&&(Lg=document.documentMode);var Nre=pc&&"TextEvent"in window&&!Lg,L9=pc&&(!nk||Lg&&8<Lg&&11>=Lg),o5=" ",u5=!1;function k9(t,e){switch(t){case"keyup":return Are.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U9(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var B0=!1;function Cre(t,e){switch(t){case"compositionend":return U9(e);case"keypress":return e.which!==32?null:(u5=!0,o5);case"textInput":return t=e.data,t===o5&&u5?null:t;default:return null}}function Dre(t,e){if(B0)return t==="compositionend"||!nk&&k9(t,e)?(t=O9(),QS=KL=Lf=null,B0=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L9&&e.locale!=="ko"?null:e.data;default:return null}}var Rre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Rre[t.type]:e==="textarea"}function F9(t,e,n,r){m9(r),e=I2(e,"onChange"),0<e.length&&(n=new ek("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var kg=null,yy=null;function Ire(t){Y9(t,0)}function E_(t){var e=G0(t);if(u9(e))return t}function Pre(t,e){if(t==="change")return e}var B9=!1;if(pc){var YR;if(pc){var QR="oninput"in document;if(!QR){var c5=document.createElement("div");c5.setAttribute("oninput","return;"),QR=typeof c5.oninput=="function"}YR=QR}else YR=!1;B9=YR&&(!document.documentMode||9<document.documentMode)}function f5(){kg&&(kg.detachEvent("onpropertychange",z9),yy=kg=null)}function z9(t){if(t.propertyName==="value"&&E_(yy)){var e=[];F9(e,yy,t,XL(t)),x9(Ire,e)}}function Ore(t,e,n){t==="focusin"?(f5(),kg=e,yy=n,kg.attachEvent("onpropertychange",z9)):t==="focusout"&&f5()}function Lre(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return E_(yy)}function kre(t,e){if(t==="click")return E_(e)}function Ure(t,e){if(t==="input"||t==="change")return E_(e)}function Fre(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xu=typeof Object.is=="function"?Object.is:Fre;function xy(t,e){if(xu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!IP.call(e,a)||!xu(t[a],e[a]))return!1}return!0}function p5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d5(t,e){var n=p5(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p5(n)}}function q9(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?q9(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function G9(){for(var t=window,e=E2();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=E2(t.document)}return e}function rk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bre(t){var e=G9(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&q9(n.ownerDocument.documentElement,n)){if(r!==null&&rk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=r.end===void 0?s:Math.min(r.end,a),!t.extend&&s>r&&(a=r,r=s,s=a),a=d5(n,s);var o=d5(n,r);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zre=pc&&"documentMode"in document&&11>=document.documentMode,z0=null,ZP=null,Ug=null,JP=!1;function h5(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;JP||z0==null||z0!==E2(r)||(r=z0,"selectionStart"in r&&rk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ug&&xy(Ug,r)||(Ug=r,r=I2(ZP,"onSelect"),0<r.length&&(e=new ek("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=z0)))}function Ab(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var q0={animationend:Ab("Animation","AnimationEnd"),animationiteration:Ab("Animation","AnimationIteration"),animationstart:Ab("Animation","AnimationStart"),transitionend:Ab("Transition","TransitionEnd")},ZR={},H9={};pc&&(H9=document.createElement("div").style,"AnimationEvent"in window||(delete q0.animationend.animation,delete q0.animationiteration.animation,delete q0.animationstart.animation),"TransitionEvent"in window||delete q0.transitionend.transition);function T_(t){if(ZR[t])return ZR[t];if(!q0[t])return t;var e=q0[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in H9)return ZR[t]=e[n];return t}var V9=T_("animationend"),W9=T_("animationiteration"),$9=T_("animationstart"),j9=T_("transitionend"),X9=new Map,m5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dp(t,e){X9.set(t,e),ph(e,[t])}for(var JR=0;JR<m5.length;JR++){var KR=m5[JR],qre=KR.toLowerCase(),Gre=KR[0].toUpperCase()+KR.slice(1);dp(qre,"on"+Gre)}dp(V9,"onAnimationEnd");dp(W9,"onAnimationIteration");dp($9,"onAnimationStart");dp("dblclick","onDoubleClick");dp("focusin","onFocus");dp("focusout","onBlur");dp(j9,"onTransitionEnd");mm("onMouseEnter",["mouseout","mouseover"]);mm("onMouseLeave",["mouseout","mouseover"]);mm("onPointerEnter",["pointerout","pointerover"]);mm("onPointerLeave",["pointerout","pointerover"]);ph("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ph("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ph("onBeforeInput",["compositionend","keypress","textInput","paste"]);ph("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ph("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ph("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hre=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mg));function v5(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qne(r,e,void 0,t),t.currentTarget=null}function Y9(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],l=u.instance,f=u.currentTarget;if(u=u.listener,l!==s&&a.isPropagationStopped())break e;v5(a,u,f),s=l}else for(o=0;o<r.length;o++){if(u=r[o],l=u.instance,f=u.currentTarget,u=u.listener,l!==s&&a.isPropagationStopped())break e;v5(a,u,f),s=l}}}if(A2)throw t=jP,A2=!1,jP=null,t}function Nr(t,e){var n=e[rO];n===void 0&&(n=e[rO]=new Set);var r=t+"__bubble";n.has(r)||(Q9(e,t,2,!1),n.add(r))}function eI(t,e,n){var r=0;e&&(r|=4),Q9(n,t,r,e)}var Nb="_reactListening"+Math.random().toString(36).slice(2);function by(t){if(!t[Nb]){t[Nb]=!0,r9.forEach(function(n){n!=="selectionchange"&&(Hre.has(n)||eI(n,!1,t),eI(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nb]||(e[Nb]=!0,eI("selectionchange",!1,e))}}function Q9(t,e,n,r){switch(P9(e)){case 1:var a=rre;break;case 4:a=ire;break;default:a=JL}n=a.bind(null,e,n,t),a=void 0,!$P||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function tI(t,e,n,r,a){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;u!==null;){if(o=wd(u),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}u=u.parentNode}}r=r.return}x9(function(){var f=s,c=XL(n),p=[];e:{var d=X9.get(t);if(d!==void 0){var h=ek,m=t;switch(t){case"keypress":if(ZS(n)===0)break e;case"keydown":case"keyup":h=xre;break;case"focusin":m="focus",h=XR;break;case"focusout":m="blur",h=XR;break;case"beforeblur":case"afterblur":h=XR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=i5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=ore;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=wre;break;case V9:case W9:case $9:h=cre;break;case j9:h=Mre;break;case"scroll":h=are;break;case"wheel":h=Tre;break;case"copy":case"cut":case"paste":h=pre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=s5}var v=(e&4)!==0,g=!v&&t==="scroll",y=v?d!==null?d+"Capture":null:d;v=[];for(var _=f,x;_!==null;){x=_;var M=x.stateNode;if(x.tag===5&&M!==null&&(x=M,y!==null&&(M=hy(_,y),M!=null&&v.push(Sy(_,M,x)))),g)break;_=_.return}0<v.length&&(d=new h(d,m,null,n,c),p.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==VP&&(m=n.relatedTarget||n.fromElement)&&(wd(m)||m[dc]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=f,m=m?wd(m):null,m!==null&&(g=dh(m),m!==g||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=f),h!==m)){if(v=i5,M="onMouseLeave",y="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=s5,M="onPointerLeave",y="onPointerEnter",_="pointer"),g=h==null?d:G0(h),x=m==null?d:G0(m),d=new v(M,_+"leave",h,n,c),d.target=g,d.relatedTarget=x,M=null,wd(c)===f&&(v=new v(y,_+"enter",m,n,c),v.target=x,v.relatedTarget=g,M=v),g=M,h&&m)t:{for(v=h,y=m,_=0,x=v;x;x=Jh(x))_++;for(x=0,M=y;M;M=Jh(M))x++;for(;0<_-x;)v=Jh(v),_--;for(;0<x-_;)y=Jh(y),x--;for(;_--;){if(v===y||y!==null&&v===y.alternate)break t;v=Jh(v),y=Jh(y)}v=null}else v=null;h!==null&&g5(p,d,h,v,!1),m!==null&&g!==null&&g5(p,g,m,v,!0)}}e:{if(d=f?G0(f):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var A=Pre;else if(l5(d))if(B9)A=Ure;else{A=Lre;var E=Ore}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(A=kre);if(A&&(A=A(t,f))){F9(p,A,n,c);break e}E&&E(t,d,f),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&BP(d,"number",d.value)}switch(E=f?G0(f):window,t){case"focusin":(l5(E)||E.contentEditable==="true")&&(z0=E,ZP=f,Ug=null);break;case"focusout":Ug=ZP=z0=null;break;case"mousedown":JP=!0;break;case"contextmenu":case"mouseup":case"dragend":JP=!1,h5(p,n,c);break;case"selectionchange":if(zre)break;case"keydown":case"keyup":h5(p,n,c)}var N;if(nk)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else B0?k9(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(L9&&n.locale!=="ko"&&(B0||D!=="onCompositionStart"?D==="onCompositionEnd"&&B0&&(N=O9()):(Lf=c,KL="value"in Lf?Lf.value:Lf.textContent,B0=!0)),E=I2(f,D),0<E.length&&(D=new a5(D,t,null,n,c),p.push({event:D,listeners:E}),N?D.data=N:(N=U9(n),N!==null&&(D.data=N)))),(N=Nre?Cre(t,n):Dre(t,n))&&(f=I2(f,"onBeforeInput"),0<f.length&&(c=new a5("onBeforeInput","beforeinput",null,n,c),p.push({event:c,listeners:f}),c.data=N))}Y9(p,e)})}function Sy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function I2(t,e){for(var n=e+"Capture",r=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=hy(t,n),s!=null&&r.unshift(Sy(t,s,a)),s=hy(t,e),s!=null&&r.push(Sy(t,s,a))),t=t.return}return r}function Jh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g5(t,e,n,r,a){for(var s=e._reactName,o=[];n!==null&&n!==r;){var u=n,l=u.alternate,f=u.stateNode;if(l!==null&&l===r)break;u.tag===5&&f!==null&&(u=f,a?(l=hy(n,s),l!=null&&o.unshift(Sy(n,l,u))):a||(l=hy(n,s),l!=null&&o.push(Sy(n,l,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Vre=/\r\n?/g,Wre=/\u0000|\uFFFD/g;function y5(t){return(typeof t=="string"?t:""+t).replace(Vre,`
`).replace(Wre,"")}function Cb(t,e,n){if(e=y5(e),y5(t)!==e&&n)throw Error(ut(425))}function P2(){}var KP=null,eO=null;function tO(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nO=typeof setTimeout=="function"?setTimeout:void 0,$re=typeof clearTimeout=="function"?clearTimeout:void 0,x5=typeof Promise=="function"?Promise:void 0,jre=typeof queueMicrotask=="function"?queueMicrotask:typeof x5<"u"?function(t){return x5.resolve(null).then(t).catch(Xre)}:nO;function Xre(t){setTimeout(function(){throw t})}function nI(t,e){var n=e,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),gy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);gy(e)}function Hf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function b5(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $m=Math.random().toString(36).slice(2),Ku="__reactFiber$"+$m,wy="__reactProps$"+$m,dc="__reactContainer$"+$m,rO="__reactEvents$"+$m,Yre="__reactListeners$"+$m,Qre="__reactHandles$"+$m;function wd(t){var e=t[Ku];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dc]||n[Ku]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=b5(t);t!==null;){if(n=t[Ku])return n;t=b5(t)}return e}t=n,n=t.parentNode}return null}function x1(t){return t=t[Ku]||t[dc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function G0(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ut(33))}function A_(t){return t[wy]||null}var iO=[],H0=-1;function hp(t){return{current:t}}function Dr(t){0>H0||(t.current=iO[H0],iO[H0]=null,H0--)}function Er(t,e){H0++,iO[H0]=t.current,t.current=e}var Jf={},ka=hp(Jf),Ns=hp(!1),Vd=Jf;function vm(t,e){var n=t.type.contextTypes;if(!n)return Jf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in n)a[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Cs(t){return t=t.childContextTypes,t!=null}function O2(){Dr(Ns),Dr(ka)}function S5(t,e,n){if(ka.current!==Jf)throw Error(ut(168));Er(ka,e),Er(Ns,n)}function Z9(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in e))throw Error(ut(108,One(t)||"Unknown",a));return jr({},n,r)}function L2(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jf,Vd=ka.current,Er(ka,t),Er(Ns,Ns.current),!0}function w5(t,e,n){var r=t.stateNode;if(!r)throw Error(ut(169));n?(t=Z9(t,e,Vd),r.__reactInternalMemoizedMergedChildContext=t,Dr(Ns),Dr(ka),Er(ka,t)):Dr(Ns),Er(Ns,n)}var Zl=null,N_=!1,rI=!1;function J9(t){Zl===null?Zl=[t]:Zl.push(t)}function Zre(t){N_=!0,J9(t)}function mp(){if(!rI&&Zl!==null){rI=!0;var t=0,e=rr;try{var n=Zl;for(rr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Zl=null,N_=!1}catch(a){throw Zl!==null&&(Zl=Zl.slice(t+1)),_9(YL,mp),a}finally{rr=e,rI=!1}}return null}var V0=[],W0=0,k2=null,U2=0,Io=[],Po=0,Wd=null,ic=1,ac="";function dd(t,e){V0[W0++]=U2,V0[W0++]=k2,k2=t,U2=e}function K9(t,e,n){Io[Po++]=ic,Io[Po++]=ac,Io[Po++]=Wd,Wd=t;var r=ic;t=ac;var a=32-mu(r)-1;r&=~(1<<a),n+=1;var s=32-mu(e)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,ic=1<<32-mu(e)+a|n<<a|r,ac=s+t}else ic=1<<s|n<<a|r,ac=t}function ik(t){t.return!==null&&(dd(t,1),K9(t,1,0))}function ak(t){for(;t===k2;)k2=V0[--W0],V0[W0]=null,U2=V0[--W0],V0[W0]=null;for(;t===Wd;)Wd=Io[--Po],Io[Po]=null,ac=Io[--Po],Io[Po]=null,ic=Io[--Po],Io[Po]=null}var Ks=null,Qs=null,kr=!1,pu=null;function eV(t,e){var n=Uo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _5(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ks=t,Qs=Hf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ks=t,Qs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wd!==null?{id:ic,overflow:ac}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Uo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ks=t,Qs=null,!0):!1;default:return!1}}function aO(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sO(t){if(kr){var e=Qs;if(e){var n=e;if(!_5(t,e)){if(aO(t))throw Error(ut(418));e=Hf(n.nextSibling);var r=Ks;e&&_5(t,e)?eV(r,n):(t.flags=t.flags&-4097|2,kr=!1,Ks=t)}}else{if(aO(t))throw Error(ut(418));t.flags=t.flags&-4097|2,kr=!1,Ks=t}}}function M5(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ks=t}function Db(t){if(t!==Ks)return!1;if(!kr)return M5(t),kr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tO(t.type,t.memoizedProps)),e&&(e=Qs)){if(aO(t))throw tV(),Error(ut(418));for(;e;)eV(t,e),e=Hf(e.nextSibling)}if(M5(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ut(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qs=Hf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qs=null}}else Qs=Ks?Hf(t.stateNode.nextSibling):null;return!0}function tV(){for(var t=Qs;t;)t=Hf(t.nextSibling)}function gm(){Qs=Ks=null,kr=!1}function sk(t){pu===null?pu=[t]:pu.push(t)}var Jre=Oc.ReactCurrentBatchConfig;function Zv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ut(309));var r=n.stateNode}if(!r)throw Error(ut(147,t));var a=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var u=a.refs;o===null?delete u[s]:u[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ut(284));if(!n._owner)throw Error(ut(290,t))}return t}function Rb(t,e){throw t=Object.prototype.toString.call(e),Error(ut(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E5(t){var e=t._init;return e(t._payload)}function nV(t){function e(y,_){if(t){var x=y.deletions;x===null?(y.deletions=[_],y.flags|=16):x.push(_)}}function n(y,_){if(!t)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function a(y,_){return y=jf(y,_),y.index=0,y.sibling=null,y}function s(y,_,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<_?(y.flags|=2,_):x):(y.flags|=2,_)):(y.flags|=1048576,_)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function u(y,_,x,M){return _===null||_.tag!==6?(_=cI(x,y.mode,M),_.return=y,_):(_=a(_,x),_.return=y,_)}function l(y,_,x,M){var A=x.type;return A===F0?c(y,_,x.props.children,M,x.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Tf&&E5(A)===_.type)?(M=a(_,x.props),M.ref=Zv(y,_,x),M.return=y,M):(M=i2(x.type,x.key,x.props,null,y.mode,M),M.ref=Zv(y,_,x),M.return=y,M)}function f(y,_,x,M){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=fI(x,y.mode,M),_.return=y,_):(_=a(_,x.children||[]),_.return=y,_)}function c(y,_,x,M,A){return _===null||_.tag!==7?(_=Id(x,y.mode,M,A),_.return=y,_):(_=a(_,x),_.return=y,_)}function p(y,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=cI(""+_,y.mode,x),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bb:return x=i2(_.type,_.key,_.props,null,y.mode,x),x.ref=Zv(y,null,_),x.return=y,x;case U0:return _=fI(_,y.mode,x),_.return=y,_;case Tf:var M=_._init;return p(y,M(_._payload),x)}if(wg(_)||$v(_))return _=Id(_,y.mode,x,null),_.return=y,_;Rb(y,_)}return null}function d(y,_,x,M){var A=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return A!==null?null:u(y,_,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bb:return x.key===A?l(y,_,x,M):null;case U0:return x.key===A?f(y,_,x,M):null;case Tf:return A=x._init,d(y,_,A(x._payload),M)}if(wg(x)||$v(x))return A!==null?null:c(y,_,x,M,null);Rb(y,x)}return null}function h(y,_,x,M,A){if(typeof M=="string"&&M!==""||typeof M=="number")return y=y.get(x)||null,u(_,y,""+M,A);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case bb:return y=y.get(M.key===null?x:M.key)||null,l(_,y,M,A);case U0:return y=y.get(M.key===null?x:M.key)||null,f(_,y,M,A);case Tf:var E=M._init;return h(y,_,x,E(M._payload),A)}if(wg(M)||$v(M))return y=y.get(x)||null,c(_,y,M,A,null);Rb(_,M)}return null}function m(y,_,x,M){for(var A=null,E=null,N=_,D=_=0,C=null;N!==null&&D<x.length;D++){N.index>D?(C=N,N=null):C=N.sibling;var T=d(y,N,x[D],M);if(T===null){N===null&&(N=C);break}t&&N&&T.alternate===null&&e(y,N),_=s(T,_,D),E===null?A=T:E.sibling=T,E=T,N=C}if(D===x.length)return n(y,N),kr&&dd(y,D),A;if(N===null){for(;D<x.length;D++)N=p(y,x[D],M),N!==null&&(_=s(N,_,D),E===null?A=N:E.sibling=N,E=N);return kr&&dd(y,D),A}for(N=r(y,N);D<x.length;D++)C=h(N,y,D,x[D],M),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?D:C.key),_=s(C,_,D),E===null?A=C:E.sibling=C,E=C);return t&&N.forEach(function(P){return e(y,P)}),kr&&dd(y,D),A}function v(y,_,x,M){var A=$v(x);if(typeof A!="function")throw Error(ut(150));if(x=A.call(x),x==null)throw Error(ut(151));for(var E=A=null,N=_,D=_=0,C=null,T=x.next();N!==null&&!T.done;D++,T=x.next()){N.index>D?(C=N,N=null):C=N.sibling;var P=d(y,N,T.value,M);if(P===null){N===null&&(N=C);break}t&&N&&P.alternate===null&&e(y,N),_=s(P,_,D),E===null?A=P:E.sibling=P,E=P,N=C}if(T.done)return n(y,N),kr&&dd(y,D),A;if(N===null){for(;!T.done;D++,T=x.next())T=p(y,T.value,M),T!==null&&(_=s(T,_,D),E===null?A=T:E.sibling=T,E=T);return kr&&dd(y,D),A}for(N=r(y,N);!T.done;D++,T=x.next())T=h(N,y,D,T.value,M),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?D:T.key),_=s(T,_,D),E===null?A=T:E.sibling=T,E=T);return t&&N.forEach(function(I){return e(y,I)}),kr&&dd(y,D),A}function g(y,_,x,M){if(typeof x=="object"&&x!==null&&x.type===F0&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case bb:e:{for(var A=x.key,E=_;E!==null;){if(E.key===A){if(A=x.type,A===F0){if(E.tag===7){n(y,E.sibling),_=a(E,x.props.children),_.return=y,y=_;break e}}else if(E.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Tf&&E5(A)===E.type){n(y,E.sibling),_=a(E,x.props),_.ref=Zv(y,E,x),_.return=y,y=_;break e}n(y,E);break}else e(y,E);E=E.sibling}x.type===F0?(_=Id(x.props.children,y.mode,M,x.key),_.return=y,y=_):(M=i2(x.type,x.key,x.props,null,y.mode,M),M.ref=Zv(y,_,x),M.return=y,y=M)}return o(y);case U0:e:{for(E=x.key;_!==null;){if(_.key===E)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){n(y,_.sibling),_=a(_,x.children||[]),_.return=y,y=_;break e}else{n(y,_);break}else e(y,_);_=_.sibling}_=fI(x,y.mode,M),_.return=y,y=_}return o(y);case Tf:return E=x._init,g(y,_,E(x._payload),M)}if(wg(x))return m(y,_,x,M);if($v(x))return v(y,_,x,M);Rb(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(n(y,_.sibling),_=a(_,x),_.return=y,y=_):(n(y,_),_=cI(x,y.mode,M),_.return=y,y=_),o(y)):n(y,_)}return g}var ym=nV(!0),rV=nV(!1),F2=hp(null),B2=null,$0=null,ok=null;function uk(){ok=$0=B2=null}function lk(t){var e=F2.current;Dr(F2),t._currentValue=e}function oO(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function om(t,e){B2=t,ok=$0=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ts=!0),t.firstContext=null)}function Go(t){var e=t._currentValue;if(ok!==t)if(t={context:t,memoizedValue:e,next:null},$0===null){if(B2===null)throw Error(ut(308));$0=t,B2.dependencies={lanes:0,firstContext:t}}else $0=$0.next=t;return e}var _d=null;function ck(t){_d===null?_d=[t]:_d.push(t)}function iV(t,e,n,r){var a=e.interleaved;return a===null?(n.next=n,ck(e)):(n.next=a.next,a.next=n),e.interleaved=n,hc(t,r)}function hc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Af=!1;function fk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aV(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qn&2){var a=r.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),r.pending=e,hc(t,n)}return a=r.interleaved,a===null?(e.next=e,ck(r)):(e.next=a.next,a.next=e),r.interleaved=e,hc(t,n)}function JS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,QL(t,n)}}function T5(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?a=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?a=s=e:s=s.next=e}else a=s=e;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function z2(t,e,n,r){var a=t.updateQueue;Af=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var l=u,f=l.next;l.next=null,o===null?s=f:o.next=f,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,u=c.lastBaseUpdate,u!==o&&(u===null?c.firstBaseUpdate=f:u.next=f,c.lastBaseUpdate=l))}if(s!==null){var p=a.baseState;o=0,c=f=l=null,u=s;do{var d=u.lane,h=u.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var m=t,v=u;switch(d=e,h=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){p=m.call(h,p,d);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(h,p,d):m,d==null)break e;p=jr({},p,d);break e;case 2:Af=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,d=a.effects,d===null?a.effects=[u]:d.push(u))}else h={eventTime:h,lane:d,tag:u.tag,payload:u.payload,callback:u.callback,next:null},c===null?(f=c=h,l=p):c=c.next=h,o|=d;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;d=u,u=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(!0);if(c===null&&(l=p),a.baseState=l,a.firstBaseUpdate=f,a.lastBaseUpdate=c,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);jd|=o,t.lanes=o,t.memoizedState=p}}function A5(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(ut(191,a));a.call(r)}}}var b1={},il=hp(b1),_y=hp(b1),My=hp(b1);function Md(t){if(t===b1)throw Error(ut(174));return t}function pk(t,e){switch(Er(My,e),Er(_y,t),Er(il,b1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qP(e,t)}Dr(il),Er(il,e)}function xm(){Dr(il),Dr(_y),Dr(My)}function sV(t){Md(My.current);var e=Md(il.current),n=qP(e,t.type);e!==n&&(Er(_y,t),Er(il,n))}function dk(t){_y.current===t&&(Dr(il),Dr(_y))}var Hr=hp(0);function q2(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var iI=[];function hk(){for(var t=0;t<iI.length;t++)iI[t]._workInProgressVersionPrimary=null;iI.length=0}var KS=Oc.ReactCurrentDispatcher,aI=Oc.ReactCurrentBatchConfig,$d=0,$r=null,Ci=null,qi=null,G2=!1,Fg=!1,Ey=0,Kre=0;function Sa(){throw Error(ut(321))}function mk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xu(t[n],e[n]))return!1;return!0}function vk(t,e,n,r,a,s){if($d=s,$r=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,KS.current=t===null||t.memoizedState===null?rie:iie,t=n(r,a),Fg){s=0;do{if(Fg=!1,Ey=0,25<=s)throw Error(ut(301));s+=1,qi=Ci=null,e.updateQueue=null,KS.current=aie,t=n(r,a)}while(Fg)}if(KS.current=H2,e=Ci!==null&&Ci.next!==null,$d=0,qi=Ci=$r=null,G2=!1,e)throw Error(ut(300));return t}function gk(){var t=Ey!==0;return Ey=0,t}function Xu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?$r.memoizedState=qi=t:qi=qi.next=t,qi}function Ho(){if(Ci===null){var t=$r.alternate;t=t!==null?t.memoizedState:null}else t=Ci.next;var e=qi===null?$r.memoizedState:qi.next;if(e!==null)qi=e,Ci=t;else{if(t===null)throw Error(ut(310));Ci=t,t={memoizedState:Ci.memoizedState,baseState:Ci.baseState,baseQueue:Ci.baseQueue,queue:Ci.queue,next:null},qi===null?$r.memoizedState=qi=t:qi=qi.next=t}return qi}function Ty(t,e){return typeof e=="function"?e(t):e}function sI(t){var e=Ho(),n=e.queue;if(n===null)throw Error(ut(311));n.lastRenderedReducer=t;var r=Ci,a=r.baseQueue,s=n.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(a!==null){s=a.next,r=r.baseState;var u=o=null,l=null,f=s;do{var c=f.lane;if(($d&c)===c)l!==null&&(l=l.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:c,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};l===null?(u=l=p,o=r):l=l.next=p,$r.lanes|=c,jd|=c}f=f.next}while(f!==null&&f!==s);l===null?o=r:l.next=u,xu(r,e.memoizedState)||(Ts=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do s=a.lane,$r.lanes|=s,jd|=s,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function oI(t){var e=Ho(),n=e.queue;if(n===null)throw Error(ut(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,s=e.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do s=t(s,o.action),o=o.next;while(o!==a);xu(s,e.memoizedState)||(Ts=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function oV(){}function uV(t,e){var n=$r,r=Ho(),a=e(),s=!xu(r.memoizedState,a);if(s&&(r.memoizedState=a,Ts=!0),r=r.queue,yk(fV.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||qi!==null&&qi.memoizedState.tag&1){if(n.flags|=2048,Ay(9,cV.bind(null,n,r,a,e),void 0,null),Wi===null)throw Error(ut(349));$d&30||lV(n,e,a)}return a}function lV(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$r.updateQueue,e===null?(e={lastEffect:null,stores:null},$r.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cV(t,e,n,r){e.value=n,e.getSnapshot=r,pV(e)&&dV(t)}function fV(t,e,n){return n(function(){pV(e)&&dV(t)})}function pV(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xu(t,n)}catch{return!0}}function dV(t){var e=hc(t,1);e!==null&&vu(e,t,1,-1)}function N5(t){var e=Xu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ty,lastRenderedState:t},e.queue=t,t=t.dispatch=nie.bind(null,$r,t),[e.memoizedState,t]}function Ay(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$r.updateQueue,e===null?(e={lastEffect:null,stores:null},$r.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hV(){return Ho().memoizedState}function e2(t,e,n,r){var a=Xu();$r.flags|=t,a.memoizedState=Ay(1|e,n,void 0,r===void 0?null:r)}function C_(t,e,n,r){var a=Ho();r=r===void 0?null:r;var s=void 0;if(Ci!==null){var o=Ci.memoizedState;if(s=o.destroy,r!==null&&mk(r,o.deps)){a.memoizedState=Ay(e,n,s,r);return}}$r.flags|=t,a.memoizedState=Ay(1|e,n,s,r)}function C5(t,e){return e2(8390656,8,t,e)}function yk(t,e){return C_(2048,8,t,e)}function mV(t,e){return C_(4,2,t,e)}function vV(t,e){return C_(4,4,t,e)}function gV(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yV(t,e,n){return n=n!=null?n.concat([t]):null,C_(4,4,gV.bind(null,e,t),n)}function xk(){}function xV(t,e){var n=Ho();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bV(t,e){var n=Ho();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function SV(t,e,n){return $d&21?(xu(n,e)||(n=T9(),$r.lanes|=n,jd|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ts=!0),t.memoizedState=n)}function eie(t,e){var n=rr;rr=n!==0&&4>n?n:4,t(!0);var r=aI.transition;aI.transition={};try{t(!1),e()}finally{rr=n,aI.transition=r}}function wV(){return Ho().memoizedState}function tie(t,e,n){var r=$f(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_V(t))MV(e,n);else if(n=iV(t,e,n,r),n!==null){var a=as();vu(n,t,r,a),EV(n,e,r)}}function nie(t,e,n){var r=$f(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_V(t))MV(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,u=s(o,n);if(a.hasEagerState=!0,a.eagerState=u,xu(u,o)){var l=e.interleaved;l===null?(a.next=a,ck(e)):(a.next=l.next,l.next=a),e.interleaved=a;return}}catch{}finally{}n=iV(t,e,a,r),n!==null&&(a=as(),vu(n,t,r,a),EV(n,e,r))}}function _V(t){var e=t.alternate;return t===$r||e!==null&&e===$r}function MV(t,e){Fg=G2=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EV(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,QL(t,n)}}var H2={readContext:Go,useCallback:Sa,useContext:Sa,useEffect:Sa,useImperativeHandle:Sa,useInsertionEffect:Sa,useLayoutEffect:Sa,useMemo:Sa,useReducer:Sa,useRef:Sa,useState:Sa,useDebugValue:Sa,useDeferredValue:Sa,useTransition:Sa,useMutableSource:Sa,useSyncExternalStore:Sa,useId:Sa,unstable_isNewReconciler:!1},rie={readContext:Go,useCallback:function(t,e){return Xu().memoizedState=[t,e===void 0?null:e],t},useContext:Go,useEffect:C5,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,e2(4194308,4,gV.bind(null,e,t),n)},useLayoutEffect:function(t,e){return e2(4194308,4,t,e)},useInsertionEffect:function(t,e){return e2(4,2,t,e)},useMemo:function(t,e){var n=Xu();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xu();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tie.bind(null,$r,t),[r.memoizedState,t]},useRef:function(t){var e=Xu();return t={current:t},e.memoizedState=t},useState:N5,useDebugValue:xk,useDeferredValue:function(t){return Xu().memoizedState=t},useTransition:function(){var t=N5(!1),e=t[0];return t=eie.bind(null,t[1]),Xu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$r,a=Xu();if(kr){if(n===void 0)throw Error(ut(407));n=n()}else{if(n=e(),Wi===null)throw Error(ut(349));$d&30||lV(r,e,n)}a.memoizedState=n;var s={value:n,getSnapshot:e};return a.queue=s,C5(fV.bind(null,r,s,t),[t]),r.flags|=2048,Ay(9,cV.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Xu(),e=Wi.identifierPrefix;if(kr){var n=ac,r=ic;n=(r&~(1<<32-mu(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ey++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Kre++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iie={readContext:Go,useCallback:xV,useContext:Go,useEffect:yk,useImperativeHandle:yV,useInsertionEffect:mV,useLayoutEffect:vV,useMemo:bV,useReducer:sI,useRef:hV,useState:function(){return sI(Ty)},useDebugValue:xk,useDeferredValue:function(t){var e=Ho();return SV(e,Ci.memoizedState,t)},useTransition:function(){var t=sI(Ty)[0],e=Ho().memoizedState;return[t,e]},useMutableSource:oV,useSyncExternalStore:uV,useId:wV,unstable_isNewReconciler:!1},aie={readContext:Go,useCallback:xV,useContext:Go,useEffect:yk,useImperativeHandle:yV,useInsertionEffect:mV,useLayoutEffect:vV,useMemo:bV,useReducer:oI,useRef:hV,useState:function(){return oI(Ty)},useDebugValue:xk,useDeferredValue:function(t){var e=Ho();return Ci===null?e.memoizedState=t:SV(e,Ci.memoizedState,t)},useTransition:function(){var t=oI(Ty)[0],e=Ho().memoizedState;return[t,e]},useMutableSource:oV,useSyncExternalStore:uV,useId:wV,unstable_isNewReconciler:!1};function lu(t,e){if(t&&t.defaultProps){e=jr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uO(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:jr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var D_={isMounted:function(t){return(t=t._reactInternals)?dh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=as(),a=$f(t),s=cc(r,a);s.payload=e,n!=null&&(s.callback=n),e=Vf(t,s,a),e!==null&&(vu(e,t,a,r),JS(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=as(),a=$f(t),s=cc(r,a);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vf(t,s,a),e!==null&&(vu(e,t,a,r),JS(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=as(),r=$f(t),a=cc(n,r);a.tag=2,e!=null&&(a.callback=e),e=Vf(t,a,r),e!==null&&(vu(e,t,r,n),JS(e,t,r))}};function D5(t,e,n,r,a,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!xy(n,r)||!xy(a,s):!0}function TV(t,e,n){var r=!1,a=Jf,s=e.contextType;return typeof s=="object"&&s!==null?s=Go(s):(a=Cs(e)?Vd:ka.current,r=e.contextTypes,s=(r=r!=null)?vm(t,a):Jf),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=D_,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function R5(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&D_.enqueueReplaceState(e,e.state,null)}function lO(t,e,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},fk(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=Go(s):(s=Cs(e)?Vd:ka.current,a.context=vm(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uO(t,e,s,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&D_.enqueueReplaceState(a,a.state,null),z2(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function bm(t,e){try{var n="",r=e;do n+=Pne(r),r=r.return;while(r);var a=n}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function uI(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cO(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sie=typeof WeakMap=="function"?WeakMap:Map;function AV(t,e,n){n=cc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){W2||(W2=!0,bO=r),cO(t,e)},n}function NV(t,e,n){n=cc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=e.value;n.payload=function(){return r(a)},n.callback=function(){cO(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cO(t,e),typeof r!="function"&&(Wf===null?Wf=new Set([this]):Wf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function I5(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sie;var a=new Set;r.set(e,a)}else a=r.get(e),a===void 0&&(a=new Set,r.set(e,a));a.has(n)||(a.add(n),t=bie.bind(null,t,e,n),e.then(t,t))}function P5(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function O5(t,e,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cc(-1,1),e.tag=2,Vf(n,e,1))),n.lanes|=1),t)}var oie=Oc.ReactCurrentOwner,Ts=!1;function ts(t,e,n,r){e.child=t===null?rV(e,null,n,r):ym(e,t.child,n,r)}function L5(t,e,n,r,a){n=n.render;var s=e.ref;return om(e,a),r=vk(t,e,n,r,s,a),n=gk(),t!==null&&!Ts?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,mc(t,e,a)):(kr&&n&&ik(e),e.flags|=1,ts(t,e,r,a),e.child)}function k5(t,e,n,r,a){if(t===null){var s=n.type;return typeof s=="function"&&!Ak(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,CV(t,e,s,r,a)):(t=i2(n.type,null,r,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xy,n(o,r)&&t.ref===e.ref)return mc(t,e,a)}return e.flags|=1,t=jf(s,r),t.ref=e.ref,t.return=e,e.child=t}function CV(t,e,n,r,a){if(t!==null){var s=t.memoizedProps;if(xy(s,r)&&t.ref===e.ref)if(Ts=!1,e.pendingProps=r=s,(t.lanes&a)!==0)t.flags&131072&&(Ts=!0);else return e.lanes=t.lanes,mc(t,e,a)}return fO(t,e,n,r,a)}function DV(t,e,n){var r=e.pendingProps,a=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(X0,js),js|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Er(X0,js),js|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Er(X0,js),js|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Er(X0,js),js|=r;return ts(t,e,a,n),e.child}function RV(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fO(t,e,n,r,a){var s=Cs(n)?Vd:ka.current;return s=vm(e,s),om(e,a),n=vk(t,e,n,r,s,a),r=gk(),t!==null&&!Ts?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,mc(t,e,a)):(kr&&r&&ik(e),e.flags|=1,ts(t,e,n,a),e.child)}function U5(t,e,n,r,a){if(Cs(n)){var s=!0;L2(e)}else s=!1;if(om(e,a),e.stateNode===null)t2(t,e),TV(e,n,r),lO(e,n,r,a),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var l=o.context,f=n.contextType;typeof f=="object"&&f!==null?f=Go(f):(f=Cs(n)?Vd:ka.current,f=vm(e,f));var c=n.getDerivedStateFromProps,p=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||l!==f)&&R5(e,o,r,f),Af=!1;var d=e.memoizedState;o.state=d,z2(e,r,o,a),l=e.memoizedState,u!==r||d!==l||Ns.current||Af?(typeof c=="function"&&(uO(e,n,c,r),l=e.memoizedState),(u=Af||D5(e,n,u,r,d,l,f))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=f,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,aV(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:lu(e.type,u),o.props=f,p=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Go(l):(l=Cs(n)?Vd:ka.current,l=vm(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||d!==l)&&R5(e,o,r,l),Af=!1,d=e.memoizedState,o.state=d,z2(e,r,o,a);var m=e.memoizedState;u!==p||d!==m||Ns.current||Af?(typeof h=="function"&&(uO(e,n,h,r),m=e.memoizedState),(f=Af||D5(e,n,f,r,d,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=f):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return pO(t,e,n,r,s,a)}function pO(t,e,n,r,a,s){RV(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return a&&w5(e,n,!1),mc(t,e,s);r=e.stateNode,oie.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ym(e,t.child,null,s),e.child=ym(e,null,u,s)):ts(t,e,u,s),e.memoizedState=r.state,a&&w5(e,n,!0),e.child}function IV(t){var e=t.stateNode;e.pendingContext?S5(t,e.pendingContext,e.pendingContext!==e.context):e.context&&S5(t,e.context,!1),pk(t,e.containerInfo)}function F5(t,e,n,r,a){return gm(),sk(a),e.flags|=256,ts(t,e,n,r),e.child}var dO={dehydrated:null,treeContext:null,retryLane:0};function hO(t){return{baseLanes:t,cachePool:null,transitions:null}}function PV(t,e,n){var r=e.pendingProps,a=Hr.current,s=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(a&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Er(Hr,a&1),t===null)return sO(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=P_(o,r,0,null),t=Id(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hO(n),e.memoizedState=dO,t):bk(e,o));if(a=t.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return uie(t,e,o,r,u,a,n);if(s){s=r.fallback,o=e.mode,a=t.child,u=a.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=jf(a,l),r.subtreeFlags=a.subtreeFlags&14680064),u!==null?s=jf(u,s):(s=Id(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?hO(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=dO,r}return s=t.child,t=s.sibling,r=jf(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bk(t,e){return e=P_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ib(t,e,n,r){return r!==null&&sk(r),ym(e,t.child,null,n),t=bk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uie(t,e,n,r,a,s,o){if(n)return e.flags&256?(e.flags&=-257,r=uI(Error(ut(422))),Ib(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,a=e.mode,r=P_({mode:"visible",children:r.children},a,0,null),s=Id(s,a,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ym(e,t.child,null,o),e.child.memoizedState=hO(o),e.memoizedState=dO,s);if(!(e.mode&1))return Ib(t,e,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(ut(419)),r=uI(s,r,void 0),Ib(t,e,o,r)}if(u=(o&t.childLanes)!==0,Ts||u){if(r=Wi,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,hc(t,a),vu(r,t,a,-1))}return Tk(),r=uI(Error(ut(421))),Ib(t,e,o,r)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=Sie.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,Qs=Hf(a.nextSibling),Ks=e,kr=!0,pu=null,t!==null&&(Io[Po++]=ic,Io[Po++]=ac,Io[Po++]=Wd,ic=t.id,ac=t.overflow,Wd=e),e=bk(e,r.children),e.flags|=4096,e)}function B5(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oO(t.return,e,n)}function lI(t,e,n,r,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function OV(t,e,n){var r=e.pendingProps,a=r.revealOrder,s=r.tail;if(ts(t,e,r.children,n),r=Hr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B5(t,n,e);else if(t.tag===19)B5(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Er(Hr,r),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&q2(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),lI(e,!1,a,n,s);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&q2(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}lI(e,!0,n,null,s);break;case"together":lI(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function t2(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jd|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ut(153));if(e.child!==null){for(t=e.child,n=jf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lie(t,e,n){switch(e.tag){case 3:IV(e),gm();break;case 5:sV(e);break;case 1:Cs(e.type)&&L2(e);break;case 4:pk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,a=e.memoizedProps.value;Er(F2,r._currentValue),r._currentValue=a;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Er(Hr,Hr.current&1),e.flags|=128,null):n&e.child.childLanes?PV(t,e,n):(Er(Hr,Hr.current&1),t=mc(t,e,n),t!==null?t.sibling:null);Er(Hr,Hr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OV(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Er(Hr,Hr.current),r)break;return null;case 22:case 23:return e.lanes=0,DV(t,e,n)}return mc(t,e,n)}var LV,mO,kV,UV;LV=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mO=function(){};kV=function(t,e,n,r){var a=t.memoizedProps;if(a!==r){t=e.stateNode,Md(il.current);var s=null;switch(n){case"input":a=UP(t,a),r=UP(t,r),s=[];break;case"select":a=jr({},a,{value:void 0}),r=jr({},r,{value:void 0}),s=[];break;case"textarea":a=zP(t,a),r=zP(t,r),s=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=P2)}GP(n,r);var o;n=null;for(f in a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&a[f]!=null)if(f==="style"){var u=a[f];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(py.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(u=a!=null?a[f]:void 0,r.hasOwnProperty(f)&&l!==u&&(l!=null||u!=null))if(f==="style")if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else f==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(s=s||[]).push(f,l)):f==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(f,""+l):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(py.hasOwnProperty(f)?(l!=null&&f==="onScroll"&&Nr("scroll",t),s||u===l||(s=[])):(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};UV=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jv(t,e){if(!kr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wa(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cie(t,e,n){var r=e.pendingProps;switch(ak(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wa(e),null;case 1:return Cs(e.type)&&O2(),wa(e),null;case 3:return r=e.stateNode,xm(),Dr(Ns),Dr(ka),hk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Db(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pu!==null&&(_O(pu),pu=null))),mO(t,e),wa(e),null;case 5:dk(e);var a=Md(My.current);if(n=e.type,t!==null&&e.stateNode!=null)kV(t,e,n,r,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ut(166));return wa(e),null}if(t=Md(il.current),Db(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ku]=e,r[wy]=s,t=(e.mode&1)!==0,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(a=0;a<Mg.length;a++)Nr(Mg[a],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":XB(r,s),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Nr("invalid",r);break;case"textarea":QB(r,s),Nr("invalid",r)}GP(n,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Cb(r.textContent,u,t),a=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Cb(r.textContent,u,t),a=["children",""+u]):py.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Nr("scroll",r)}switch(n){case"input":Sb(r),YB(r,s,!0);break;case"textarea":Sb(r),ZB(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=P2)}r=a,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=f9(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ku]=e,t[wy]=r,LV(t,e,!1,!1),e.stateNode=t;e:{switch(o=HP(n,r),n){case"dialog":Nr("cancel",t),Nr("close",t),a=r;break;case"iframe":case"object":case"embed":Nr("load",t),a=r;break;case"video":case"audio":for(a=0;a<Mg.length;a++)Nr(Mg[a],t);a=r;break;case"source":Nr("error",t),a=r;break;case"img":case"image":case"link":Nr("error",t),Nr("load",t),a=r;break;case"details":Nr("toggle",t),a=r;break;case"input":XB(t,r),a=UP(t,r),Nr("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=jr({},r,{value:void 0}),Nr("invalid",t);break;case"textarea":QB(t,r),a=zP(t,r),Nr("invalid",t);break;default:a=r}GP(n,a),u=a;for(s in u)if(u.hasOwnProperty(s)){var l=u[s];s==="style"?h9(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&p9(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&dy(t,l):typeof l=="number"&&dy(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(py.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Nr("scroll",t):l!=null&&VL(t,s,l,o))}switch(n){case"input":Sb(t),YB(t,r,!1);break;case"textarea":Sb(t),ZB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zf(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?rm(t,!!r.multiple,s,!1):r.defaultValue!=null&&rm(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=P2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wa(e),null;case 6:if(t&&e.stateNode!=null)UV(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ut(166));if(n=Md(My.current),Md(il.current),Db(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ku]=e,(s=r.nodeValue!==n)&&(t=Ks,t!==null))switch(t.tag){case 3:Cb(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cb(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ku]=e,e.stateNode=r}return wa(e),null;case 13:if(Dr(Hr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kr&&Qs!==null&&e.mode&1&&!(e.flags&128))tV(),gm(),e.flags|=98560,s=!1;else if(s=Db(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ut(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ut(317));s[Ku]=e}else gm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wa(e),s=!1}else pu!==null&&(_O(pu),pu=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Hr.current&1?Ri===0&&(Ri=3):Tk())),e.updateQueue!==null&&(e.flags|=4),wa(e),null);case 4:return xm(),mO(t,e),t===null&&by(e.stateNode.containerInfo),wa(e),null;case 10:return lk(e.type._context),wa(e),null;case 17:return Cs(e.type)&&O2(),wa(e),null;case 19:if(Dr(Hr),s=e.memoizedState,s===null)return wa(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Jv(s,!1);else{if(Ri!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=q2(t),o!==null){for(e.flags|=128,Jv(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Er(Hr,Hr.current&1|2),e.child}t=t.sibling}s.tail!==null&&ci()>Sm&&(e.flags|=128,r=!0,Jv(s,!1),e.lanes=4194304)}else{if(!r)if(t=q2(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jv(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!kr)return wa(e),null}else 2*ci()-s.renderingStartTime>Sm&&n!==1073741824&&(e.flags|=128,r=!0,Jv(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ci(),e.sibling=null,n=Hr.current,Er(Hr,r?n&1|2:n&1),e):(wa(e),null);case 22:case 23:return Ek(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?js&1073741824&&(wa(e),e.subtreeFlags&6&&(e.flags|=8192)):wa(e),null;case 24:return null;case 25:return null}throw Error(ut(156,e.tag))}function fie(t,e){switch(ak(e),e.tag){case 1:return Cs(e.type)&&O2(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xm(),Dr(Ns),Dr(ka),hk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dk(e),null;case 13:if(Dr(Hr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ut(340));gm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dr(Hr),null;case 4:return xm(),null;case 10:return lk(e.type._context),null;case 22:case 23:return Ek(),null;case 24:return null;default:return null}}var Pb=!1,Na=!1,pie=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function j0(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ei(t,e,r)}else n.current=null}function vO(t,e,n){try{n()}catch(r){ei(t,e,r)}}var z5=!1;function die(t,e){if(KP=D2,t=G9(),rk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,u=-1,l=-1,f=0,c=0,p=t,d=null;t:for(;;){for(var h;p!==n||a!==0&&p.nodeType!==3||(u=o+a),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===t)break t;if(d===n&&++f===a&&(u=o),d===s&&++c===r&&(l=o),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}n=u===-1||l===-1?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(eO={focusedElem:t,selectionRange:n},D2=!1,Tt=e;Tt!==null;)if(e=Tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Tt=t;else for(;Tt!==null;){e=Tt;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,g=m.memoizedState,y=e.stateNode,_=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:lu(e.type,v),g);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(M){ei(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Tt=t;break}Tt=e.return}return m=z5,z5=!1,m}function Bg(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&vO(e,n,s)}a=a.next}while(a!==r)}}function R_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gO(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function FV(t){var e=t.alternate;e!==null&&(t.alternate=null,FV(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ku],delete e[wy],delete e[rO],delete e[Yre],delete e[Qre])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BV(t){return t.tag===5||t.tag===3||t.tag===4}function q5(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yO(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=P2));else if(r!==4&&(t=t.child,t!==null))for(yO(t,e,n),t=t.sibling;t!==null;)yO(t,e,n),t=t.sibling}function xO(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xO(t,e,n),t=t.sibling;t!==null;)xO(t,e,n),t=t.sibling}var ra=null,fu=!1;function pf(t,e,n){for(n=n.child;n!==null;)zV(t,e,n),n=n.sibling}function zV(t,e,n){if(rl&&typeof rl.onCommitFiberUnmount=="function")try{rl.onCommitFiberUnmount(__,n)}catch{}switch(n.tag){case 5:Na||j0(n,e);case 6:var r=ra,a=fu;ra=null,pf(t,e,n),ra=r,fu=a,ra!==null&&(fu?(t=ra,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ra.removeChild(n.stateNode));break;case 18:ra!==null&&(fu?(t=ra,n=n.stateNode,t.nodeType===8?nI(t.parentNode,n):t.nodeType===1&&nI(t,n),gy(t)):nI(ra,n.stateNode));break;case 4:r=ra,a=fu,ra=n.stateNode.containerInfo,fu=!0,pf(t,e,n),ra=r,fu=a;break;case 0:case 11:case 14:case 15:if(!Na&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vO(n,e,o),a=a.next}while(a!==r)}pf(t,e,n);break;case 1:if(!Na&&(j0(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ei(n,e,u)}pf(t,e,n);break;case 21:pf(t,e,n);break;case 22:n.mode&1?(Na=(r=Na)||n.memoizedState!==null,pf(t,e,n),Na=r):pf(t,e,n);break;default:pf(t,e,n)}}function G5(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pie),e.forEach(function(r){var a=wie.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function au(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var s=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:ra=u.stateNode,fu=!1;break e;case 3:ra=u.stateNode.containerInfo,fu=!0;break e;case 4:ra=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(ra===null)throw Error(ut(160));zV(s,o,a),ra=null,fu=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(f){ei(a,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qV(e,t),e=e.sibling}function qV(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(au(e,t),Wu(t),r&4){try{Bg(3,t,t.return),R_(3,t)}catch(v){ei(t,t.return,v)}try{Bg(5,t,t.return)}catch(v){ei(t,t.return,v)}}break;case 1:au(e,t),Wu(t),r&512&&n!==null&&j0(n,n.return);break;case 5:if(au(e,t),Wu(t),r&512&&n!==null&&j0(n,n.return),t.flags&32){var a=t.stateNode;try{dy(a,"")}catch(v){ei(t,t.return,v)}}if(r&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,u=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&l9(a,s),HP(u,o);var f=HP(u,s);for(o=0;o<l.length;o+=2){var c=l[o],p=l[o+1];c==="style"?h9(a,p):c==="dangerouslySetInnerHTML"?p9(a,p):c==="children"?dy(a,p):VL(a,c,p,f)}switch(u){case"input":FP(a,s);break;case"textarea":c9(a,s);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?rm(a,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?rm(a,!!s.multiple,s.defaultValue,!0):rm(a,!!s.multiple,s.multiple?[]:"",!1))}a[wy]=s}catch(v){ei(t,t.return,v)}}break;case 6:if(au(e,t),Wu(t),r&4){if(t.stateNode===null)throw Error(ut(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(v){ei(t,t.return,v)}}break;case 3:if(au(e,t),Wu(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gy(e.containerInfo)}catch(v){ei(t,t.return,v)}break;case 4:au(e,t),Wu(t);break;case 13:au(e,t),Wu(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(_k=ci())),r&4&&G5(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Na=(f=Na)||c,au(e,t),Na=f):au(e,t),Wu(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!c&&t.mode&1)for(Tt=t,c=t.child;c!==null;){for(p=Tt=c;Tt!==null;){switch(d=Tt,h=d.child,d.tag){case 0:case 11:case 14:case 15:Bg(4,d,d.return);break;case 1:j0(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){ei(r,n,v)}}break;case 5:j0(d,d.return);break;case 22:if(d.memoizedState!==null){V5(p);continue}}h!==null?(h.return=d,Tt=h):V5(p)}c=c.sibling}e:for(c=null,p=t;;){if(p.tag===5){if(c===null){c=p;try{a=p.stateNode,f?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=d9("display",o))}catch(v){ei(t,t.return,v)}}}else if(p.tag===6){if(c===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(v){ei(t,t.return,v)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;c===p&&(c=null),p=p.return}c===p&&(c=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:au(e,t),Wu(t),r&4&&G5(t);break;case 21:break;default:au(e,t),Wu(t)}}function Wu(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BV(n)){var r=n;break e}n=n.return}throw Error(ut(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(dy(a,""),r.flags&=-33);var s=q5(t);xO(t,s,a);break;case 3:case 4:var o=r.stateNode.containerInfo,u=q5(t);yO(t,u,o);break;default:throw Error(ut(161))}}catch(l){ei(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hie(t,e,n){Tt=t,GV(t)}function GV(t,e,n){for(var r=(t.mode&1)!==0;Tt!==null;){var a=Tt,s=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Pb;if(!o){var u=a.alternate,l=u!==null&&u.memoizedState!==null||Na;u=Pb;var f=Na;if(Pb=o,(Na=l)&&!f)for(Tt=a;Tt!==null;)o=Tt,l=o.child,o.tag===22&&o.memoizedState!==null?W5(a):l!==null?(l.return=o,Tt=l):W5(a);for(;s!==null;)Tt=s,GV(s),s=s.sibling;Tt=a,Pb=u,Na=f}H5(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,Tt=s):H5(t)}}function H5(t){for(;Tt!==null;){var e=Tt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Na||R_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Na)if(n===null)r.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:lu(e.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&A5(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}A5(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var c=f.memoizedState;if(c!==null){var p=c.dehydrated;p!==null&&gy(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}Na||e.flags&512&&gO(e)}catch(d){ei(e,e.return,d)}}if(e===t){Tt=null;break}if(n=e.sibling,n!==null){n.return=e.return,Tt=n;break}Tt=e.return}}function V5(t){for(;Tt!==null;){var e=Tt;if(e===t){Tt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Tt=n;break}Tt=e.return}}function W5(t){for(;Tt!==null;){var e=Tt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{R_(4,e)}catch(l){ei(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var a=e.return;try{r.componentDidMount()}catch(l){ei(e,a,l)}}var s=e.return;try{gO(e)}catch(l){ei(e,s,l)}break;case 5:var o=e.return;try{gO(e)}catch(l){ei(e,o,l)}}}catch(l){ei(e,e.return,l)}if(e===t){Tt=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Tt=u;break}Tt=e.return}}var mie=Math.ceil,V2=Oc.ReactCurrentDispatcher,Sk=Oc.ReactCurrentOwner,zo=Oc.ReactCurrentBatchConfig,qn=0,Wi=null,wi=null,ca=0,js=0,X0=hp(0),Ri=0,Ny=null,jd=0,I_=0,wk=0,zg=null,Ms=null,_k=0,Sm=1/0,Ql=null,W2=!1,bO=null,Wf=null,Ob=!1,kf=null,$2=0,qg=0,SO=null,n2=-1,r2=0;function as(){return qn&6?ci():n2!==-1?n2:n2=ci()}function $f(t){return t.mode&1?qn&2&&ca!==0?ca&-ca:Jre.transition!==null?(r2===0&&(r2=T9()),r2):(t=rr,t!==0||(t=window.event,t=t===void 0?16:P9(t.type)),t):1}function vu(t,e,n,r){if(50<qg)throw qg=0,SO=null,Error(ut(185));g1(t,n,r),(!(qn&2)||t!==Wi)&&(t===Wi&&(!(qn&2)&&(I_|=n),Ri===4&&If(t,ca)),Ds(t,r),n===1&&qn===0&&!(e.mode&1)&&(Sm=ci()+500,N_&&mp()))}function Ds(t,e){var n=t.callbackNode;Jne(t,e);var r=C2(t,t===Wi?ca:0);if(r===0)n!==null&&e5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&e5(n),e===1)t.tag===0?Zre($5.bind(null,t)):J9($5.bind(null,t)),jre(function(){!(qn&6)&&mp()}),n=null;else{switch(A9(r)){case 1:n=YL;break;case 4:n=M9;break;case 16:n=N2;break;case 536870912:n=E9;break;default:n=N2}n=QV(n,HV.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function HV(t,e){if(n2=-1,r2=0,qn&6)throw Error(ut(327));var n=t.callbackNode;if(um()&&t.callbackNode!==n)return null;var r=C2(t,t===Wi?ca:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=j2(t,r);else{e=r;var a=qn;qn|=2;var s=WV();(Wi!==t||ca!==e)&&(Ql=null,Sm=ci()+500,Rd(t,e));do try{yie();break}catch(u){VV(t,u)}while(!0);uk(),V2.current=s,qn=a,wi!==null?e=0:(Wi=null,ca=0,e=Ri)}if(e!==0){if(e===2&&(a=XP(t),a!==0&&(r=a,e=wO(t,a))),e===1)throw n=Ny,Rd(t,0),If(t,r),Ds(t,ci()),n;if(e===6)If(t,r);else{if(a=t.current.alternate,!(r&30)&&!vie(a)&&(e=j2(t,r),e===2&&(s=XP(t),s!==0&&(r=s,e=wO(t,s))),e===1))throw n=Ny,Rd(t,0),If(t,r),Ds(t,ci()),n;switch(t.finishedWork=a,t.finishedLanes=r,e){case 0:case 1:throw Error(ut(345));case 2:hd(t,Ms,Ql);break;case 3:if(If(t,r),(r&130023424)===r&&(e=_k+500-ci(),10<e)){if(C2(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){as(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=nO(hd.bind(null,t,Ms,Ql),e);break}hd(t,Ms,Ql);break;case 4:if(If(t,r),(r&4194240)===r)break;for(e=t.eventTimes,a=-1;0<r;){var o=31-mu(r);s=1<<o,o=e[o],o>a&&(a=o),r&=~s}if(r=a,r=ci()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mie(r/1960))-r,10<r){t.timeoutHandle=nO(hd.bind(null,t,Ms,Ql),r);break}hd(t,Ms,Ql);break;case 5:hd(t,Ms,Ql);break;default:throw Error(ut(329))}}}return Ds(t,ci()),t.callbackNode===n?HV.bind(null,t):null}function wO(t,e){var n=zg;return t.current.memoizedState.isDehydrated&&(Rd(t,e).flags|=256),t=j2(t,e),t!==2&&(e=Ms,Ms=n,e!==null&&_O(e)),t}function _O(t){Ms===null?Ms=t:Ms.push.apply(Ms,t)}function vie(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!xu(s(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function If(t,e){for(e&=~wk,e&=~I_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mu(e),r=1<<n;t[n]=-1,e&=~r}}function $5(t){if(qn&6)throw Error(ut(327));um();var e=C2(t,0);if(!(e&1))return Ds(t,ci()),null;var n=j2(t,e);if(t.tag!==0&&n===2){var r=XP(t);r!==0&&(e=r,n=wO(t,r))}if(n===1)throw n=Ny,Rd(t,0),If(t,e),Ds(t,ci()),n;if(n===6)throw Error(ut(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hd(t,Ms,Ql),Ds(t,ci()),null}function Mk(t,e){var n=qn;qn|=1;try{return t(e)}finally{qn=n,qn===0&&(Sm=ci()+500,N_&&mp())}}function Xd(t){kf!==null&&kf.tag===0&&!(qn&6)&&um();var e=qn;qn|=1;var n=zo.transition,r=rr;try{if(zo.transition=null,rr=1,t)return t()}finally{rr=r,zo.transition=n,qn=e,!(qn&6)&&mp()}}function Ek(){js=X0.current,Dr(X0)}function Rd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$re(n)),wi!==null)for(n=wi.return;n!==null;){var r=n;switch(ak(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&O2();break;case 3:xm(),Dr(Ns),Dr(ka),hk();break;case 5:dk(r);break;case 4:xm();break;case 13:Dr(Hr);break;case 19:Dr(Hr);break;case 10:lk(r.type._context);break;case 22:case 23:Ek()}n=n.return}if(Wi=t,wi=t=jf(t.current,null),ca=js=e,Ri=0,Ny=null,wk=I_=jd=0,Ms=zg=null,_d!==null){for(e=0;e<_d.length;e++)if(n=_d[e],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=a,r.next=o}n.pending=r}_d=null}return t}function VV(t,e){do{var n=wi;try{if(uk(),KS.current=H2,G2){for(var r=$r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}G2=!1}if($d=0,qi=Ci=$r=null,Fg=!1,Ey=0,Sk.current=null,n===null||n.return===null){Ri=1,Ny=e,wi=null;break}e:{var s=t,o=n.return,u=n,l=e;if(e=ca,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=l,c=u,p=c.tag;if(!(c.mode&1)&&(p===0||p===11||p===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=P5(o);if(h!==null){h.flags&=-257,O5(h,o,u,s,e),h.mode&1&&I5(s,f,e),e=h,l=f;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){I5(s,f,e),Tk();break e}l=Error(ut(426))}}else if(kr&&u.mode&1){var g=P5(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),O5(g,o,u,s,e),sk(bm(l,u));break e}}s=l=bm(l,u),Ri!==4&&(Ri=2),zg===null?zg=[s]:zg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=AV(s,l,e);T5(s,y);break e;case 1:u=l;var _=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Wf===null||!Wf.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=NV(s,u,e);T5(s,M);break e}}s=s.return}while(s!==null)}jV(n)}catch(A){e=A,wi===n&&n!==null&&(wi=n=n.return);continue}break}while(!0)}function WV(){var t=V2.current;return V2.current=H2,t===null?H2:t}function Tk(){(Ri===0||Ri===3||Ri===2)&&(Ri=4),Wi===null||!(jd&268435455)&&!(I_&268435455)||If(Wi,ca)}function j2(t,e){var n=qn;qn|=2;var r=WV();(Wi!==t||ca!==e)&&(Ql=null,Rd(t,e));do try{gie();break}catch(a){VV(t,a)}while(!0);if(uk(),qn=n,V2.current=r,wi!==null)throw Error(ut(261));return Wi=null,ca=0,Ri}function gie(){for(;wi!==null;)$V(wi)}function yie(){for(;wi!==null&&!Hne();)$V(wi)}function $V(t){var e=YV(t.alternate,t,js);t.memoizedProps=t.pendingProps,e===null?jV(t):wi=e,Sk.current=null}function jV(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fie(n,e),n!==null){n.flags&=32767,wi=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ri=6,wi=null;return}}else if(n=cie(n,e,js),n!==null){wi=n;return}if(e=e.sibling,e!==null){wi=e;return}wi=e=t}while(e!==null);Ri===0&&(Ri=5)}function hd(t,e,n){var r=rr,a=zo.transition;try{zo.transition=null,rr=1,xie(t,e,n,r)}finally{zo.transition=a,rr=r}return null}function xie(t,e,n,r){do um();while(kf!==null);if(qn&6)throw Error(ut(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ut(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Kne(t,s),t===Wi&&(wi=Wi=null,ca=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ob||(Ob=!0,QV(N2,function(){return um(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=zo.transition,zo.transition=null;var o=rr;rr=1;var u=qn;qn|=4,Sk.current=null,die(t,n),qV(n,t),Bre(eO),D2=!!KP,eO=KP=null,t.current=n,hie(n),Vne(),qn=u,rr=o,zo.transition=s}else t.current=n;if(Ob&&(Ob=!1,kf=t,$2=a),s=t.pendingLanes,s===0&&(Wf=null),jne(n.stateNode),Ds(t,ci()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(W2)throw W2=!1,t=bO,bO=null,t;return $2&1&&t.tag!==0&&um(),s=t.pendingLanes,s&1?t===SO?qg++:(qg=0,SO=t):qg=0,mp(),null}function um(){if(kf!==null){var t=A9($2),e=zo.transition,n=rr;try{if(zo.transition=null,rr=16>t?16:t,kf===null)var r=!1;else{if(t=kf,kf=null,$2=0,qn&6)throw Error(ut(331));var a=qn;for(qn|=4,Tt=t.current;Tt!==null;){var s=Tt,o=s.child;if(Tt.flags&16){var u=s.deletions;if(u!==null){for(var l=0;l<u.length;l++){var f=u[l];for(Tt=f;Tt!==null;){var c=Tt;switch(c.tag){case 0:case 11:case 15:Bg(8,c,s)}var p=c.child;if(p!==null)p.return=c,Tt=p;else for(;Tt!==null;){c=Tt;var d=c.sibling,h=c.return;if(FV(c),c===f){Tt=null;break}if(d!==null){d.return=h,Tt=d;break}Tt=h}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}Tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Tt=o;else e:for(;Tt!==null;){if(s=Tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bg(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Tt=y;break e}Tt=s.return}}var _=t.current;for(Tt=_;Tt!==null;){o=Tt;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Tt=x;else e:for(o=_;Tt!==null;){if(u=Tt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:R_(9,u)}}catch(A){ei(u,u.return,A)}if(u===o){Tt=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,Tt=M;break e}Tt=u.return}}if(qn=a,mp(),rl&&typeof rl.onPostCommitFiberRoot=="function")try{rl.onPostCommitFiberRoot(__,t)}catch{}r=!0}return r}finally{rr=n,zo.transition=e}}return!1}function j5(t,e,n){e=bm(n,e),e=AV(t,e,1),t=Vf(t,e,1),e=as(),t!==null&&(g1(t,1,e),Ds(t,e))}function ei(t,e,n){if(t.tag===3)j5(t,t,n);else for(;e!==null;){if(e.tag===3){j5(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wf===null||!Wf.has(r))){t=bm(n,t),t=NV(e,t,1),e=Vf(e,t,1),t=as(),e!==null&&(g1(e,1,t),Ds(e,t));break}}e=e.return}}function bie(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=as(),t.pingedLanes|=t.suspendedLanes&n,Wi===t&&(ca&n)===n&&(Ri===4||Ri===3&&(ca&130023424)===ca&&500>ci()-_k?Rd(t,0):wk|=n),Ds(t,e)}function XV(t,e){e===0&&(t.mode&1?(e=Mb,Mb<<=1,!(Mb&130023424)&&(Mb=4194304)):e=1);var n=as();t=hc(t,e),t!==null&&(g1(t,e,n),Ds(t,n))}function Sie(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),XV(t,n)}function wie(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ut(314))}r!==null&&r.delete(e),XV(t,n)}var YV;YV=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ns.current)Ts=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ts=!1,lie(t,e,n);Ts=!!(t.flags&131072)}else Ts=!1,kr&&e.flags&1048576&&K9(e,U2,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;t2(t,e),t=e.pendingProps;var a=vm(e,ka.current);om(e,n),a=vk(null,e,r,t,a,n);var s=gk();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cs(r)?(s=!0,L2(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,fk(e),a.updater=D_,e.stateNode=a,a._reactInternals=e,lO(e,r,t,n),e=pO(null,e,r,!0,s,n)):(e.tag=0,kr&&s&&ik(e),ts(null,e,a,n),e=e.child),e;case 16:r=e.elementType;e:{switch(t2(t,e),t=e.pendingProps,a=r._init,r=a(r._payload),e.type=r,a=e.tag=Mie(r),t=lu(r,t),a){case 0:e=fO(null,e,r,t,n);break e;case 1:e=U5(null,e,r,t,n);break e;case 11:e=L5(null,e,r,t,n);break e;case 14:e=k5(null,e,r,lu(r.type,t),n);break e}throw Error(ut(306,r,""))}return e;case 0:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:lu(r,a),fO(t,e,r,a,n);case 1:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:lu(r,a),U5(t,e,r,a,n);case 3:e:{if(IV(e),t===null)throw Error(ut(387));r=e.pendingProps,s=e.memoizedState,a=s.element,aV(t,e),z2(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=bm(Error(ut(423)),e),e=F5(t,e,r,n,a);break e}else if(r!==a){a=bm(Error(ut(424)),e),e=F5(t,e,r,n,a);break e}else for(Qs=Hf(e.stateNode.containerInfo.firstChild),Ks=e,kr=!0,pu=null,n=rV(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gm(),r===a){e=mc(t,e,n);break e}ts(t,e,r,n)}e=e.child}return e;case 5:return sV(e),t===null&&sO(e),r=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,o=a.children,tO(r,a)?o=null:s!==null&&tO(r,s)&&(e.flags|=32),RV(t,e),ts(t,e,o,n),e.child;case 6:return t===null&&sO(e),null;case 13:return PV(t,e,n);case 4:return pk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ym(e,null,r,n):ts(t,e,r,n),e.child;case 11:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:lu(r,a),L5(t,e,r,a,n);case 7:return ts(t,e,e.pendingProps,n),e.child;case 8:return ts(t,e,e.pendingProps.children,n),e.child;case 12:return ts(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,a=e.pendingProps,s=e.memoizedProps,o=a.value,Er(F2,r._currentValue),r._currentValue=o,s!==null)if(xu(s.value,o)){if(s.children===a.children&&!Ns.current){e=mc(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){o=s.child;for(var l=u.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=cc(-1,n&-n),l.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var c=f.pending;c===null?l.next=l:(l.next=c.next,c.next=l),f.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),oO(s.return,n,e),u.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ut(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),oO(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ts(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,r=e.pendingProps.children,om(e,n),a=Go(a),r=r(a),e.flags|=1,ts(t,e,r,n),e.child;case 14:return r=e.type,a=lu(r,e.pendingProps),a=lu(r.type,a),k5(t,e,r,a,n);case 15:return CV(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,a=e.pendingProps,a=e.elementType===r?a:lu(r,a),t2(t,e),e.tag=1,Cs(r)?(t=!0,L2(e)):t=!1,om(e,n),TV(e,r,a),lO(e,r,a,n),pO(null,e,r,!0,t,n);case 19:return OV(t,e,n);case 22:return DV(t,e,n)}throw Error(ut(156,e.tag))};function QV(t,e){return _9(t,e)}function _ie(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uo(t,e,n,r){return new _ie(t,e,n,r)}function Ak(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mie(t){if(typeof t=="function")return Ak(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$L)return 11;if(t===jL)return 14}return 2}function jf(t,e){var n=t.alternate;return n===null?(n=Uo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function i2(t,e,n,r,a,s){var o=2;if(r=t,typeof t=="function")Ak(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case F0:return Id(n.children,a,s,e);case WL:o=8,a|=8;break;case PP:return t=Uo(12,n,e,a|2),t.elementType=PP,t.lanes=s,t;case OP:return t=Uo(13,n,e,a),t.elementType=OP,t.lanes=s,t;case LP:return t=Uo(19,n,e,a),t.elementType=LP,t.lanes=s,t;case s9:return P_(n,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i9:o=10;break e;case a9:o=9;break e;case $L:o=11;break e;case jL:o=14;break e;case Tf:o=16,r=null;break e}throw Error(ut(130,t==null?t:typeof t,""))}return e=Uo(o,n,e,a),e.elementType=t,e.type=r,e.lanes=s,e}function Id(t,e,n,r){return t=Uo(7,t,r,e),t.lanes=n,t}function P_(t,e,n,r){return t=Uo(22,t,r,e),t.elementType=s9,t.lanes=n,t.stateNode={isHidden:!1},t}function cI(t,e,n){return t=Uo(6,t,null,e),t.lanes=n,t}function fI(t,e,n){return e=Uo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Eie(t,e,n,r,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=WR(0),this.expirationTimes=WR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=WR(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Nk(t,e,n,r,a,s,o,u,l){return t=new Eie(t,e,n,u,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Uo(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fk(s),t}function Tie(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U0,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ZV(t){if(!t)return Jf;t=t._reactInternals;e:{if(dh(t)!==t||t.tag!==1)throw Error(ut(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ut(171))}if(t.tag===1){var n=t.type;if(Cs(n))return Z9(t,n,e)}return e}function JV(t,e,n,r,a,s,o,u,l){return t=Nk(n,r,!0,t,a,s,o,u,l),t.context=ZV(null),n=t.current,r=as(),a=$f(n),s=cc(r,a),s.callback=e??null,Vf(n,s,a),t.current.lanes=a,g1(t,a,r),Ds(t,r),t}function O_(t,e,n,r){var a=e.current,s=as(),o=$f(a);return n=ZV(n),e.context===null?e.context=n:e.pendingContext=n,e=cc(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vf(a,e,o),t!==null&&(vu(t,a,o,s),JS(t,a,o)),o}function X2(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function X5(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ck(t,e){X5(t,e),(t=t.alternate)&&X5(t,e)}function Aie(){return null}var KV=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dk(t){this._internalRoot=t}L_.prototype.render=Dk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ut(409));O_(t,e,null,null)};L_.prototype.unmount=Dk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xd(function(){O_(null,t,null,null)}),e[dc]=null}};function L_(t){this._internalRoot=t}L_.prototype.unstable_scheduleHydration=function(t){if(t){var e=D9();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rf.length&&e!==0&&e<Rf[n].priority;n++);Rf.splice(n,0,t),n===0&&I9(t)}};function Rk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function k_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y5(){}function Nie(t,e,n,r,a){if(a){if(typeof r=="function"){var s=r;r=function(){var f=X2(o);s.call(f)}}var o=JV(e,r,t,0,null,!1,!1,"",Y5);return t._reactRootContainer=o,t[dc]=o.current,by(t.nodeType===8?t.parentNode:t),Xd(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var u=r;r=function(){var f=X2(l);u.call(f)}}var l=Nk(t,0,!1,null,null,!1,!1,"",Y5);return t._reactRootContainer=l,t[dc]=l.current,by(t.nodeType===8?t.parentNode:t),Xd(function(){O_(e,l,n,r)}),l}function U_(t,e,n,r,a){var s=n._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var u=a;a=function(){var l=X2(o);u.call(l)}}O_(e,o,t,a)}else o=Nie(n,e,t,a,r);return X2(o)}N9=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_g(e.pendingLanes);n!==0&&(QL(e,n|1),Ds(e,ci()),!(qn&6)&&(Sm=ci()+500,mp()))}break;case 13:Xd(function(){var r=hc(t,1);if(r!==null){var a=as();vu(r,t,1,a)}}),Ck(t,1)}};ZL=function(t){if(t.tag===13){var e=hc(t,134217728);if(e!==null){var n=as();vu(e,t,134217728,n)}Ck(t,134217728)}};C9=function(t){if(t.tag===13){var e=$f(t),n=hc(t,e);if(n!==null){var r=as();vu(n,t,e,r)}Ck(t,e)}};D9=function(){return rr};R9=function(t,e){var n=rr;try{return rr=t,e()}finally{rr=n}};WP=function(t,e,n){switch(e){case"input":if(FP(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var a=A_(r);if(!a)throw Error(ut(90));u9(r),FP(r,a)}}}break;case"textarea":c9(t,n);break;case"select":e=n.value,e!=null&&rm(t,!!n.multiple,e,!1)}};g9=Mk;y9=Xd;var Cie={usingClientEntryPoint:!1,Events:[x1,G0,A_,m9,v9,Mk]},Kv={findFiberByHostInstance:wd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Die={bundleType:Kv.bundleType,version:Kv.version,rendererPackageName:Kv.rendererPackageName,rendererConfig:Kv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S9(t),t===null?null:t.stateNode},findFiberByHostInstance:Kv.findFiberByHostInstance||Aie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lb.isDisabled&&Lb.supportsFiber)try{__=Lb.inject(Die),rl=Lb}catch{}}lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cie;lo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rk(e))throw Error(ut(200));return Tie(t,e,null,n)};lo.createRoot=function(t,e){if(!Rk(t))throw Error(ut(299));var n=!1,r="",a=KV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Nk(t,1,!1,null,null,n,!1,r,a),t[dc]=e.current,by(t.nodeType===8?t.parentNode:t),new Dk(e)};lo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ut(188)):(t=Object.keys(t).join(","),Error(ut(268,t)));return t=S9(e),t=t===null?null:t.stateNode,t};lo.flushSync=function(t){return Xd(t)};lo.hydrate=function(t,e,n){if(!k_(e))throw Error(ut(200));return U_(null,t,e,!0,n)};lo.hydrateRoot=function(t,e,n){if(!Rk(t))throw Error(ut(405));var r=n!=null&&n.hydratedSources||null,a=!1,s="",o=KV;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JV(e,null,t,1,n??null,a,!1,s,o),t[dc]=e.current,by(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new L_(e)};lo.render=function(t,e,n){if(!k_(e))throw Error(ut(200));return U_(null,t,e,!1,n)};lo.unmountComponentAtNode=function(t){if(!k_(t))throw Error(ut(40));return t._reactRootContainer?(Xd(function(){U_(null,null,t,!1,function(){t._reactRootContainer=null,t[dc]=null})}),!0):!1};lo.unstable_batchedUpdates=Mk;lo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!k_(n))throw Error(ut(200));if(t==null||t._reactInternals===void 0)throw Error(ut(38));return U_(t,e,n,!1,r)};lo.version="18.3.1-next-f1338f8080-20240426";function eW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eW)}catch(t){console.error(t)}}eW(),e9.exports=lo;var tW=e9.exports;const kb=Au(tW);var nW,Q5=tW;nW=Q5.createRoot,Q5.hydrateRoot;const Cy={black:"#000",white:"#fff"},Kh={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},e0={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},t0={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},n0={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},r0={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},eg={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Rie={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Yd(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const Ik="$$material";function wm(){return wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wm.apply(null,arguments)}function rW(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Iie=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Pie=rW(function(t){return Iie.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Oie=!1;function Lie(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function kie(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Uie=function(){function t(n){var r=this;this._insertTag=function(a){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,s),r.tags.push(a)},this.isSpeedy=n.speedy===void 0?!Oie:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(kie(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Lie(a);try{s.insertRule(r,s.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var a;return(a=r.parentNode)==null?void 0:a.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Aa="-ms-",Y2="-moz-",Qn="-webkit-",iW="comm",Pk="rule",Ok="decl",Fie="@import",aW="@keyframes",Bie="@layer",zie=Math.abs,F_=String.fromCharCode,qie=Object.assign;function Gie(t,e){return aa(t,0)^45?(((e<<2^aa(t,0))<<2^aa(t,1))<<2^aa(t,2))<<2^aa(t,3):0}function sW(t){return t.trim()}function Hie(t,e){return(t=e.exec(t))?t[0]:t}function Zn(t,e,n){return t.replace(e,n)}function MO(t,e){return t.indexOf(e)}function aa(t,e){return t.charCodeAt(e)|0}function Dy(t,e,n){return t.slice(e,n)}function Yu(t){return t.length}function Lk(t){return t.length}function Ub(t,e){return e.push(t),t}function Vie(t,e){return t.map(e).join("")}var B_=1,_m=1,oW=0,Rs=0,bi=0,jm="";function z_(t,e,n,r,a,s,o){return{value:t,root:e,parent:n,type:r,props:a,children:s,line:B_,column:_m,length:o,return:""}}function tg(t,e){return qie(z_("",null,null,"",null,null,0),t,{length:-t.length},e)}function Wie(){return bi}function $ie(){return bi=Rs>0?aa(jm,--Rs):0,_m--,bi===10&&(_m=1,B_--),bi}function eo(){return bi=Rs<oW?aa(jm,Rs++):0,_m++,bi===10&&(_m=1,B_++),bi}function al(){return aa(jm,Rs)}function a2(){return Rs}function S1(t,e){return Dy(jm,t,e)}function Ry(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function uW(t){return B_=_m=1,oW=Yu(jm=t),Rs=0,[]}function lW(t){return jm="",t}function s2(t){return sW(S1(Rs-1,EO(t===91?t+2:t===40?t+1:t)))}function jie(t){for(;(bi=al())&&bi<33;)eo();return Ry(t)>2||Ry(bi)>3?"":" "}function Xie(t,e){for(;--e&&eo()&&!(bi<48||bi>102||bi>57&&bi<65||bi>70&&bi<97););return S1(t,a2()+(e<6&&al()==32&&eo()==32))}function EO(t){for(;eo();)switch(bi){case t:return Rs;case 34:case 39:t!==34&&t!==39&&EO(bi);break;case 40:t===41&&EO(t);break;case 92:eo();break}return Rs}function Yie(t,e){for(;eo()&&t+bi!==57;)if(t+bi===84&&al()===47)break;return"/*"+S1(e,Rs-1)+"*"+F_(t===47?t:eo())}function Qie(t){for(;!Ry(al());)eo();return S1(t,Rs)}function Zie(t){return lW(o2("",null,null,null,[""],t=uW(t),0,[0],t))}function o2(t,e,n,r,a,s,o,u,l){for(var f=0,c=0,p=o,d=0,h=0,m=0,v=1,g=1,y=1,_=0,x="",M=a,A=s,E=r,N=x;g;)switch(m=_,_=eo()){case 40:if(m!=108&&aa(N,p-1)==58){MO(N+=Zn(s2(_),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:N+=s2(_);break;case 9:case 10:case 13:case 32:N+=jie(m);break;case 92:N+=Xie(a2()-1,7);continue;case 47:switch(al()){case 42:case 47:Ub(Jie(Yie(eo(),a2()),e,n),l);break;default:N+="/"}break;case 123*v:u[f++]=Yu(N)*y;case 125*v:case 59:case 0:switch(_){case 0:case 125:g=0;case 59+c:y==-1&&(N=Zn(N,/\f/g,"")),h>0&&Yu(N)-p&&Ub(h>32?J5(N+";",r,n,p-1):J5(Zn(N," ","")+";",r,n,p-2),l);break;case 59:N+=";";default:if(Ub(E=Z5(N,e,n,f,c,a,u,x,M=[],A=[],p),s),_===123)if(c===0)o2(N,e,E,E,M,s,p,u,A);else switch(d===99&&aa(N,3)===110?100:d){case 100:case 108:case 109:case 115:o2(t,E,E,r&&Ub(Z5(t,E,E,0,0,a,u,x,a,M=[],p),A),a,A,p,u,r?M:A);break;default:o2(N,E,E,E,[""],A,0,u,A)}}f=c=h=0,v=y=1,x=N="",p=o;break;case 58:p=1+Yu(N),h=m;default:if(v<1){if(_==123)--v;else if(_==125&&v++==0&&$ie()==125)continue}switch(N+=F_(_),_*v){case 38:y=c>0?1:(N+="\f",-1);break;case 44:u[f++]=(Yu(N)-1)*y,y=1;break;case 64:al()===45&&(N+=s2(eo())),d=al(),c=p=Yu(x=N+=Qie(a2())),_++;break;case 45:m===45&&Yu(N)==2&&(v=0)}}return s}function Z5(t,e,n,r,a,s,o,u,l,f,c){for(var p=a-1,d=a===0?s:[""],h=Lk(d),m=0,v=0,g=0;m<r;++m)for(var y=0,_=Dy(t,p+1,p=zie(v=o[m])),x=t;y<h;++y)(x=sW(v>0?d[y]+" "+_:Zn(_,/&\f/g,d[y])))&&(l[g++]=x);return z_(t,e,n,a===0?Pk:u,l,f,c)}function Jie(t,e,n){return z_(t,e,n,iW,F_(Wie()),Dy(t,2,-2),0)}function J5(t,e,n,r){return z_(t,e,n,Ok,Dy(t,0,r),Dy(t,r+1,-1),r)}function lm(t,e){for(var n="",r=Lk(t),a=0;a<r;a++)n+=e(t[a],a,t,e)||"";return n}function Kie(t,e,n,r){switch(t.type){case Bie:if(t.children.length)break;case Fie:case Ok:return t.return=t.return||t.value;case iW:return"";case aW:return t.return=t.value+"{"+lm(t.children,r)+"}";case Pk:t.value=t.props.join(",")}return Yu(n=lm(t.children,r))?t.return=t.value+"{"+n+"}":""}function eae(t){var e=Lk(t);return function(n,r,a,s){for(var o="",u=0;u<e;u++)o+=t[u](n,r,a,s)||"";return o}}function tae(t){return function(e){e.root||(e=e.return)&&t(e)}}var nae=function(e,n,r){for(var a=0,s=0;a=s,s=al(),a===38&&s===12&&(n[r]=1),!Ry(s);)eo();return S1(e,Rs)},rae=function(e,n){var r=-1,a=44;do switch(Ry(a)){case 0:a===38&&al()===12&&(n[r]=1),e[r]+=nae(Rs-1,n,r);break;case 2:e[r]+=s2(a);break;case 4:if(a===44){e[++r]=al()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=F_(a)}while(a=eo());return e},iae=function(e,n){return lW(rae(uW(e),n))},K5=new WeakMap,aae=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,a=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!K5.get(r))&&!a){K5.set(e,!0);for(var s=[],o=iae(n,s),u=r.props,l=0,f=0;l<o.length;l++)for(var c=0;c<u.length;c++,f++)e.props[f]=s[l]?o[l].replace(/&\f/g,u[c]):u[c]+" "+o[l]}}},sae=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function cW(t,e){switch(Gie(t,e)){case 5103:return Qn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Qn+t+Y2+t+Aa+t+t;case 6828:case 4268:return Qn+t+Aa+t+t;case 6165:return Qn+t+Aa+"flex-"+t+t;case 5187:return Qn+t+Zn(t,/(\w+).+(:[^]+)/,Qn+"box-$1$2"+Aa+"flex-$1$2")+t;case 5443:return Qn+t+Aa+"flex-item-"+Zn(t,/flex-|-self/,"")+t;case 4675:return Qn+t+Aa+"flex-line-pack"+Zn(t,/align-content|flex-|-self/,"")+t;case 5548:return Qn+t+Aa+Zn(t,"shrink","negative")+t;case 5292:return Qn+t+Aa+Zn(t,"basis","preferred-size")+t;case 6060:return Qn+"box-"+Zn(t,"-grow","")+Qn+t+Aa+Zn(t,"grow","positive")+t;case 4554:return Qn+Zn(t,/([^-])(transform)/g,"$1"+Qn+"$2")+t;case 6187:return Zn(Zn(Zn(t,/(zoom-|grab)/,Qn+"$1"),/(image-set)/,Qn+"$1"),t,"")+t;case 5495:case 3959:return Zn(t,/(image-set\([^]*)/,Qn+"$1$`$1");case 4968:return Zn(Zn(t,/(.+:)(flex-)?(.*)/,Qn+"box-pack:$3"+Aa+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qn+t+t;case 4095:case 3583:case 4068:case 2532:return Zn(t,/(.+)-inline(.+)/,Qn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Yu(t)-1-e>6)switch(aa(t,e+1)){case 109:if(aa(t,e+4)!==45)break;case 102:return Zn(t,/(.+:)(.+)-([^]+)/,"$1"+Qn+"$2-$3$1"+Y2+(aa(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~MO(t,"stretch")?cW(Zn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(aa(t,e+1)!==115)break;case 6444:switch(aa(t,Yu(t)-3-(~MO(t,"!important")&&10))){case 107:return Zn(t,":",":"+Qn)+t;case 101:return Zn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Qn+(aa(t,14)===45?"inline-":"")+"box$3$1"+Qn+"$2$3$1"+Aa+"$2box$3")+t}break;case 5936:switch(aa(t,e+11)){case 114:return Qn+t+Aa+Zn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Qn+t+Aa+Zn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Qn+t+Aa+Zn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Qn+t+Aa+t+t}return t}var oae=function(e,n,r,a){if(e.length>-1&&!e.return)switch(e.type){case Ok:e.return=cW(e.value,e.length);break;case aW:return lm([tg(e,{value:Zn(e.value,"@","@"+Qn)})],a);case Pk:if(e.length)return Vie(e.props,function(s){switch(Hie(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return lm([tg(e,{props:[Zn(s,/:(read-\w+)/,":"+Y2+"$1")]})],a);case"::placeholder":return lm([tg(e,{props:[Zn(s,/:(plac\w+)/,":"+Qn+"input-$1")]}),tg(e,{props:[Zn(s,/:(plac\w+)/,":"+Y2+"$1")]}),tg(e,{props:[Zn(s,/:(plac\w+)/,Aa+"input-$1")]})],a)}return""})}},uae=[oae],lae=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var g=v.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var a=e.stylisPlugins||uae,s={},o,u=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var g=v.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;u.push(v)});var l,f=[aae,sae];{var c,p=[Kie,tae(function(v){c.insert(v)})],d=eae(f.concat(a,p)),h=function(g){return lm(Zie(g),d)};l=function(g,y,_,x){c=_,h(g?g+"{"+y.styles+"}":y.styles),x&&(m.inserted[y.name]=!0)}}var m={key:n,sheet:new Uie({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return m.sheet.hydrate(u),m},fW={exports:{}},ir={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qi=typeof Symbol=="function"&&Symbol.for,kk=Qi?Symbol.for("react.element"):60103,Uk=Qi?Symbol.for("react.portal"):60106,q_=Qi?Symbol.for("react.fragment"):60107,G_=Qi?Symbol.for("react.strict_mode"):60108,H_=Qi?Symbol.for("react.profiler"):60114,V_=Qi?Symbol.for("react.provider"):60109,W_=Qi?Symbol.for("react.context"):60110,Fk=Qi?Symbol.for("react.async_mode"):60111,$_=Qi?Symbol.for("react.concurrent_mode"):60111,j_=Qi?Symbol.for("react.forward_ref"):60112,X_=Qi?Symbol.for("react.suspense"):60113,cae=Qi?Symbol.for("react.suspense_list"):60120,Y_=Qi?Symbol.for("react.memo"):60115,Q_=Qi?Symbol.for("react.lazy"):60116,fae=Qi?Symbol.for("react.block"):60121,pae=Qi?Symbol.for("react.fundamental"):60117,dae=Qi?Symbol.for("react.responder"):60118,hae=Qi?Symbol.for("react.scope"):60119;function fo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case kk:switch(t=t.type,t){case Fk:case $_:case q_:case H_:case G_:case X_:return t;default:switch(t=t&&t.$$typeof,t){case W_:case j_:case Q_:case Y_:case V_:return t;default:return e}}case Uk:return e}}}function pW(t){return fo(t)===$_}ir.AsyncMode=Fk;ir.ConcurrentMode=$_;ir.ContextConsumer=W_;ir.ContextProvider=V_;ir.Element=kk;ir.ForwardRef=j_;ir.Fragment=q_;ir.Lazy=Q_;ir.Memo=Y_;ir.Portal=Uk;ir.Profiler=H_;ir.StrictMode=G_;ir.Suspense=X_;ir.isAsyncMode=function(t){return pW(t)||fo(t)===Fk};ir.isConcurrentMode=pW;ir.isContextConsumer=function(t){return fo(t)===W_};ir.isContextProvider=function(t){return fo(t)===V_};ir.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===kk};ir.isForwardRef=function(t){return fo(t)===j_};ir.isFragment=function(t){return fo(t)===q_};ir.isLazy=function(t){return fo(t)===Q_};ir.isMemo=function(t){return fo(t)===Y_};ir.isPortal=function(t){return fo(t)===Uk};ir.isProfiler=function(t){return fo(t)===H_};ir.isStrictMode=function(t){return fo(t)===G_};ir.isSuspense=function(t){return fo(t)===X_};ir.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===q_||t===$_||t===H_||t===G_||t===X_||t===cae||typeof t=="object"&&t!==null&&(t.$$typeof===Q_||t.$$typeof===Y_||t.$$typeof===V_||t.$$typeof===W_||t.$$typeof===j_||t.$$typeof===pae||t.$$typeof===dae||t.$$typeof===hae||t.$$typeof===fae)};ir.typeOf=fo;fW.exports=ir;var mae=fW.exports,dW=mae,vae={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},gae={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},hW={};hW[dW.ForwardRef]=vae;hW[dW.Memo]=gae;var yae=!0;function xae(t,e,n){var r="";return n.split(" ").forEach(function(a){t[a]!==void 0?e.push(t[a]+";"):a&&(r+=a+" ")}),r}var mW=function(e,n,r){var a=e.key+"-"+n.name;(r===!1||yae===!1)&&e.registered[a]===void 0&&(e.registered[a]=n.styles)},bae=function(e,n,r){mW(e,n,r);var a=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+a:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Sae(t){for(var e=0,n,r=0,a=t.length;a>=4;++r,a-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var wae={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_ae=!1,Mae=/[A-Z]|^ms/g,Eae=/_EMO_([^_]+?)_([^]*?)_EMO_/g,vW=function(e){return e.charCodeAt(1)===45},ez=function(e){return e!=null&&typeof e!="boolean"},pI=rW(function(t){return vW(t)?t:t.replace(Mae,"-$&").toLowerCase()}),tz=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Eae,function(r,a,s){return Qu={name:a,styles:s,next:Qu},a})}return wae[e]!==1&&!vW(e)&&typeof n=="number"&&n!==0?n+"px":n},Tae="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Iy(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return Qu={name:a.name,styles:a.styles,next:Qu},a.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Qu={name:o.name,styles:o.styles,next:Qu},o=o.next;var u=s.styles+";";return u}return Aae(t,e,n)}case"function":{if(t!==void 0){var l=Qu,f=n(t);return Qu=l,Iy(t,e,f)}break}}var c=n;if(e==null)return c;var p=e[c];return p!==void 0?p:c}function Aae(t,e,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=Iy(t,e,n[a])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var u=o;e!=null&&e[u]!==void 0?r+=s+"{"+e[u]+"}":ez(u)&&(r+=pI(s)+":"+tz(s,u)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&_ae)throw new Error(Tae);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)ez(o[l])&&(r+=pI(s)+":"+tz(s,o[l])+";");else{var f=Iy(t,e,o);switch(s){case"animation":case"animationName":{r+=pI(s)+":"+f+";";break}default:r+=s+"{"+f+"}"}}}}return r}var nz=/label:\s*([^\s;{]+)\s*(;|$)/g,Qu;function gW(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,a="";Qu=void 0;var s=t[0];if(s==null||s.raw===void 0)r=!1,a+=Iy(n,e,s);else{var o=s;a+=o[0]}for(var u=1;u<t.length;u++)if(a+=Iy(n,e,t[u]),r){var l=s;a+=l[u]}nz.lastIndex=0;for(var f="",c;(c=nz.exec(a))!==null;)f+="-"+c[1];var p=Sae(a)+f;return{name:p,styles:a,next:Qu}}var Nae=function(e){return e()},Cae=VB.useInsertionEffect?VB.useInsertionEffect:!1,Dae=Cae||Nae,yW=Ge.createContext(typeof HTMLElement<"u"?lae({key:"css"}):null);yW.Provider;var Rae=function(e){return Ge.forwardRef(function(n,r){var a=Ge.useContext(yW);return e(n,a,r)})},xW=Ge.createContext({});function Bk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return gW(e)}var w1=function(){var e=Bk.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Iae=Pie,Pae=function(e){return e!=="theme"},rz=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Iae:Pae},iz=function(e,n,r){var a;if(n){var s=n.shouldForwardProp;a=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof a!="function"&&r&&(a=e.__emotion_forwardProp),a},Oae=!1,Lae=function(e){var n=e.cache,r=e.serialized,a=e.isStringTag;return mW(n,r,a),Dae(function(){return bae(n,r,a)}),null},kae=function t(e,n){var r=e.__emotion_real===e,a=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var u=iz(e,n,r),l=u||rz(a),f=!l("as");return function(){var c=arguments,p=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&p.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)p.push.apply(p,c);else{p.push(c[0][0]);for(var d=c.length,h=1;h<d;h++)p.push(c[h],c[0][h])}var m=Rae(function(v,g,y){var _=f&&v.as||a,x="",M=[],A=v;if(v.theme==null){A={};for(var E in v)A[E]=v[E];A.theme=Ge.useContext(xW)}typeof v.className=="string"?x=xae(g.registered,M,v.className):v.className!=null&&(x=v.className+" ");var N=gW(p.concat(M),g.registered,A);x+=g.key+"-"+N.name,o!==void 0&&(x+=" "+o);var D=f&&u===void 0?rz(_):l,C={};for(var T in v)f&&T==="as"||D(T)&&(C[T]=v[T]);return C.className=x,y&&(C.ref=y),Ge.createElement(Ge.Fragment,null,Ge.createElement(Lae,{cache:g,serialized:N,isStringTag:typeof _=="string"}),Ge.createElement(_,C))});return m.displayName=s!==void 0?s:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=a,m.__emotion_styles=p,m.__emotion_forwardProp=u,Object.defineProperty(m,"toString",{value:function(){return o===void 0&&Oae?"NO_COMPONENT_SELECTOR":"."+o}}),m.withComponent=function(v,g){return t(v,wm({},n,g,{shouldForwardProp:iz(m,g,!0)})).apply(void 0,p)},m}},Uae=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],TO=kae.bind();Uae.forEach(function(t){TO[t]=TO(t)});/**
 * @mui/styled-engine v6.1.1
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function bW(t,e){return TO(t,e)}const Fae=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function el(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function SW(t){if(!el(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=SW(t[n])}),e}function to(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return el(t)&&el(e)&&Object.keys(e).forEach(a=>{el(e[a])&&Object.prototype.hasOwnProperty.call(t,a)&&el(t[a])?r[a]=to(t[a],e[a],n):n.clone?r[a]=el(e[a])?SW(e[a]):e[a]:r[a]=e[a]}),r}const Bae=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function zae(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...a}=t,s=Bae(e),o=Object.keys(s);function u(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-r/100}${n})`}function f(d,h){const m=o.indexOf(h);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${n}) and (max-width:${(m!==-1&&typeof e[o[m]]=="number"?e[o[m]]:h)-r/100}${n})`}function c(d){return o.indexOf(d)+1<o.length?f(d,o[o.indexOf(d)+1]):u(d)}function p(d){const h=o.indexOf(d);return h===0?u(o[1]):h===o.length-1?l(o[h]):f(d,o[o.indexOf(d)+1]).replace("@media","@media not all and")}return{keys:o,values:s,up:u,down:l,between:f,only:c,not:p,unit:n,...a}}function qae(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,a)=>{var o,u;const s=/min-width:\s*([0-9.]+)/;return+(((o=r.match(s))==null?void 0:o[1])||0)-+(((u=a.match(s))==null?void 0:u[1])||0)});return n.length?n.reduce((r,a)=>{const s=e[a];return delete r[a],r[a]=s,r},{...e}):e}function Gae(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function Hae(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,a]=n,s=Number.isNaN(+r)?r||0:+r;return t.containerQueries(a).up(s)}function Vae(t){const e=(s,o)=>s.replace("@media",o?`@container ${o}`:"@container");function n(s,o){s.up=(...u)=>e(t.breakpoints.up(...u),o),s.down=(...u)=>e(t.breakpoints.down(...u),o),s.between=(...u)=>e(t.breakpoints.between(...u),o),s.only=(...u)=>e(t.breakpoints.only(...u),o),s.not=(...u)=>{const l=e(t.breakpoints.not(...u),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},a=s=>(n(r,s),r);return n(a),{...t,containerQueries:a}}const Wae={borderRadius:4};function Gg(t,e){return e?to(t,e,{clone:!1}):t}const Z_={xs:0,sm:600,md:900,lg:1200,xl:1536},az={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Z_[t]}px)`},$ae={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:Z_[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function vc(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||az;return e.reduce((o,u,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||az;return Object.keys(e).reduce((o,u)=>{if(Gae(s.keys,u)){const l=Hae(r.containerQueries?r:$ae,u);l&&(o[l]=n(e[u],u))}else if(Object.keys(s.values||Z_).includes(u)){const l=s.up(u);o[l]=n(e[u],u)}else{const l=u;o[l]=e[l]}return o},{})}return n(e)}function jae(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,a)=>{const s=t.up(a);return r[s]={},r},{}))||{}}function Xae(t,e){return t.reduce((n,r)=>{const a=n[r];return(!a||Object.keys(a).length===0)&&delete n[r],n},e)}function Si(t){if(typeof t!="string")throw new Error(Yd(7));return t.charAt(0).toUpperCase()+t.slice(1)}function J_(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((a,s)=>a&&a[s]?a[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,a)=>r&&r[a]!=null?r[a]:null,t)}function Q2(t,e,n,r=n){let a;return typeof t=="function"?a=t(n):Array.isArray(t)?a=t[n]||r:a=J_(t,n)||r,e&&(a=e(a,r,t)),a}function di(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:a}=t,s=o=>{if(o[e]==null)return null;const u=o[e],l=o.theme,f=J_(l,r)||{};return vc(o,u,p=>{let d=Q2(f,a,p);return p===d&&typeof p=="string"&&(d=Q2(f,a,`${e}${p==="default"?"":Si(p)}`,p)),n===!1?d:{[n]:d}})};return s.propTypes={},s.filterProps=[e],s}function Yae(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Qae={m:"margin",p:"padding"},Zae={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},sz={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Jae=Yae(t=>{if(t.length>2)if(sz[t])t=sz[t];else return[t];const[e,n]=t.split(""),r=Qae[e],a=Zae[n]||"";return Array.isArray(a)?a.map(s=>r+s):[r+a]}),zk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],qk=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...zk,...qk];function _1(t,e,n,r){const a=J_(t,e,!0)??n;return typeof a=="number"||typeof a=="string"?s=>typeof s=="string"?s:typeof a=="string"?`calc(${s} * ${a})`:a*s:Array.isArray(a)?s=>{if(typeof s=="string")return s;const o=Math.abs(s),u=a[o];return s>=0?u:typeof u=="number"?-u:`-${u}`}:typeof a=="function"?a:()=>{}}function Gk(t){return _1(t,"spacing",8)}function M1(t,e){return typeof e=="string"||e==null?e:t(e)}function Kae(t,e){return n=>t.reduce((r,a)=>(r[a]=M1(e,n),r),{})}function ese(t,e,n,r){if(!e.includes(n))return null;const a=Jae(n),s=Kae(a,r),o=t[n];return vc(t,o,s)}function wW(t,e){const n=Gk(t.theme);return Object.keys(t).map(r=>ese(t,e,r,n)).reduce(Gg,{})}function Jr(t){return wW(t,zk)}Jr.propTypes={};Jr.filterProps=zk;function Kr(t){return wW(t,qk)}Kr.propTypes={};Kr.filterProps=qk;function _W(t=8,e=Gk({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function K_(...t){const e=t.reduce((r,a)=>(a.filterProps.forEach(s=>{r[s]=a}),r),{}),n=r=>Object.keys(r).reduce((a,s)=>e[s]?Gg(a,e[s](r)):a,{});return n.propTypes={},n.filterProps=t.reduce((r,a)=>r.concat(a.filterProps),[]),n}function Oo(t){return typeof t!="number"?t:`${t}px solid`}function Jo(t,e){return di({prop:t,themeKey:"borders",transform:e})}const tse=Jo("border",Oo),nse=Jo("borderTop",Oo),rse=Jo("borderRight",Oo),ise=Jo("borderBottom",Oo),ase=Jo("borderLeft",Oo),sse=Jo("borderColor"),ose=Jo("borderTopColor"),use=Jo("borderRightColor"),lse=Jo("borderBottomColor"),cse=Jo("borderLeftColor"),fse=Jo("outline",Oo),pse=Jo("outlineColor"),eM=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=_1(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:M1(e,r)});return vc(t,t.borderRadius,n)}return null};eM.propTypes={};eM.filterProps=["borderRadius"];K_(tse,nse,rse,ise,ase,sse,ose,use,lse,cse,eM,fse,pse);const tM=t=>{if(t.gap!==void 0&&t.gap!==null){const e=_1(t.theme,"spacing",8),n=r=>({gap:M1(e,r)});return vc(t,t.gap,n)}return null};tM.propTypes={};tM.filterProps=["gap"];const nM=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=_1(t.theme,"spacing",8),n=r=>({columnGap:M1(e,r)});return vc(t,t.columnGap,n)}return null};nM.propTypes={};nM.filterProps=["columnGap"];const rM=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=_1(t.theme,"spacing",8),n=r=>({rowGap:M1(e,r)});return vc(t,t.rowGap,n)}return null};rM.propTypes={};rM.filterProps=["rowGap"];const dse=di({prop:"gridColumn"}),hse=di({prop:"gridRow"}),mse=di({prop:"gridAutoFlow"}),vse=di({prop:"gridAutoColumns"}),gse=di({prop:"gridAutoRows"}),yse=di({prop:"gridTemplateColumns"}),xse=di({prop:"gridTemplateRows"}),bse=di({prop:"gridTemplateAreas"}),Sse=di({prop:"gridArea"});K_(tM,nM,rM,dse,hse,mse,vse,gse,yse,xse,bse,Sse);function cm(t,e){return e==="grey"?e:t}const wse=di({prop:"color",themeKey:"palette",transform:cm}),_se=di({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:cm}),Mse=di({prop:"backgroundColor",themeKey:"palette",transform:cm});K_(wse,_se,Mse);function Ys(t){return t<=1&&t!==0?`${t*100}%`:t}const Ese=di({prop:"width",transform:Ys}),Hk=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var a,s,o,u,l;const r=((o=(s=(a=t.theme)==null?void 0:a.breakpoints)==null?void 0:s.values)==null?void 0:o[n])||Z_[n];return r?((l=(u=t.theme)==null?void 0:u.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Ys(n)}};return vc(t,t.maxWidth,e)}return null};Hk.filterProps=["maxWidth"];const Tse=di({prop:"minWidth",transform:Ys}),Ase=di({prop:"height",transform:Ys}),Nse=di({prop:"maxHeight",transform:Ys}),Cse=di({prop:"minHeight",transform:Ys});di({prop:"size",cssProperty:"width",transform:Ys});di({prop:"size",cssProperty:"height",transform:Ys});const Dse=di({prop:"boxSizing"});K_(Ese,Hk,Tse,Ase,Nse,Cse,Dse);const E1={border:{themeKey:"borders",transform:Oo},borderTop:{themeKey:"borders",transform:Oo},borderRight:{themeKey:"borders",transform:Oo},borderBottom:{themeKey:"borders",transform:Oo},borderLeft:{themeKey:"borders",transform:Oo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Oo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:eM},color:{themeKey:"palette",transform:cm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:cm},backgroundColor:{themeKey:"palette",transform:cm},p:{style:Kr},pt:{style:Kr},pr:{style:Kr},pb:{style:Kr},pl:{style:Kr},px:{style:Kr},py:{style:Kr},padding:{style:Kr},paddingTop:{style:Kr},paddingRight:{style:Kr},paddingBottom:{style:Kr},paddingLeft:{style:Kr},paddingX:{style:Kr},paddingY:{style:Kr},paddingInline:{style:Kr},paddingInlineStart:{style:Kr},paddingInlineEnd:{style:Kr},paddingBlock:{style:Kr},paddingBlockStart:{style:Kr},paddingBlockEnd:{style:Kr},m:{style:Jr},mt:{style:Jr},mr:{style:Jr},mb:{style:Jr},ml:{style:Jr},mx:{style:Jr},my:{style:Jr},margin:{style:Jr},marginTop:{style:Jr},marginRight:{style:Jr},marginBottom:{style:Jr},marginLeft:{style:Jr},marginX:{style:Jr},marginY:{style:Jr},marginInline:{style:Jr},marginInlineStart:{style:Jr},marginInlineEnd:{style:Jr},marginBlock:{style:Jr},marginBlockStart:{style:Jr},marginBlockEnd:{style:Jr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:tM},rowGap:{style:rM},columnGap:{style:nM},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ys},maxWidth:{style:Hk},minWidth:{transform:Ys},height:{transform:Ys},maxHeight:{transform:Ys},minHeight:{transform:Ys},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Rse(...t){const e=t.reduce((r,a)=>r.concat(Object.keys(a)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Ise(t,e){return typeof t=="function"?t(e):t}function Pse(){function t(n,r,a,s){const o={[n]:r,theme:a},u=s[n];if(!u)return{[n]:r};const{cssProperty:l=n,themeKey:f,transform:c,style:p}=u;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[n]:r};const d=J_(a,f)||{};return p?p(o):vc(o,r,m=>{let v=Q2(d,c,m);return m===v&&typeof m=="string"&&(v=Q2(d,c,`${n}${m==="default"?"":Si(m)}`,m)),l===!1?v:{[l]:v}})}function e(n){const{sx:r,theme:a={}}=n||{};if(!r)return null;const s=a.unstable_sxConfig??E1;function o(u){let l=u;if(typeof u=="function")l=u(a);else if(typeof u!="object")return u;if(!l)return null;const f=jae(a.breakpoints),c=Object.keys(f);let p=f;return Object.keys(l).forEach(d=>{const h=Ise(l[d],a);if(h!=null)if(typeof h=="object")if(s[d])p=Gg(p,t(d,h,a,s));else{const m=vc({theme:a},h,v=>({[d]:v}));Rse(m,h)?p[d]=e({sx:h,theme:a}):p=Gg(p,m)}else p=Gg(p,t(d,h,a,s))}),qae(a,Xae(c,p))}return Array.isArray(r)?r.map(o):o(r)}return e}const Xm=Pse();Xm.filterProps=["sx"];function Ose(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let a=n.getColorSchemeSelector(t);return a==="&"?e:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:e})}return n.palette.mode===t?e:{}}function Vk(t={},...e){const{breakpoints:n={},palette:r={},spacing:a,shape:s={},...o}=t,u=zae(n),l=_W(a);let f=to({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...Wae,...s}},o);return f=Vae(f),f.applyStyles=Ose,f=e.reduce((c,p)=>to(c,p),f),f.unstable_sxConfig={...E1,...o==null?void 0:o.unstable_sxConfig},f.unstable_sx=function(p){return Xm({sx:p,theme:this})},f}function Lse(t){return Object.keys(t).length===0}function kse(t=null){const e=Ge.useContext(xW);return!e||Lse(e)?t:e}const Use=Vk();function MW(t=Use){return kse(t)}const Fse=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??E1;return Object.keys(t).forEach(a=>{n[a]?e.systemProps[a]=t[a]:e.otherProps[a]=t[a]}),e};function EW(t){const{sx:e,...n}=t,{systemProps:r,otherProps:a}=Fse(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const u=e(...o);return el(u)?{...r,...u}:r}:s={...r,...e},{...a,sx:s}}const oz=t=>t,Bse=()=>{let t=oz;return{configure(e){t=e},generate(e){return t(e)},reset(){t=oz}}},TW=Bse();function AW(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=AW(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Mr(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=AW(t))&&(r&&(r+=" "),r+=e);return r}function zse(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:a}=t,s=bW("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(Xm);return Ge.forwardRef(function(l,f){const c=MW(n),{className:p,component:d="div",...h}=EW(l);return Mt.jsx(s,{as:d,ref:f,className:Mr(p,a?a(r):r),theme:e&&c[e]||c,...h})})}const qse={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ym(t,e,n="Mui"){const r=qse[e];return r?`${n}-${r}`:`${TW.generate(t)}-${e}`}function hh(t,e,n="Mui"){const r={};return e.forEach(a=>{r[a]=Ym(t,a,n)}),r}const Gse=Vk();function dI(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function AO(t,e,n){return Wse(e)?n:e[t]||e}const Fb=Symbol("mui.processed_props");function Bb(t,e,n){if(Fb in t)return t[Fb];const r={...t,theme:AO(e,t.theme,n)};return t[Fb]=r,r[Fb]=r,r}function Hse(t){return t?(e,n)=>n[t]:null}function u2(t,e){var r;const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(a=>u2(a,e));if(Array.isArray(n==null?void 0:n.variants)){const{variants:a,...s}=n;let o=s,u;e:for(let l=0;l<a.length;l+=1){const f=a[l];if(typeof f.props=="function"){if(u??(u={...e,...e.ownerState,ownerState:e.ownerState}),!f.props(u))continue}else for(const c in f.props)if(e[c]!==f.props[c]&&((r=e.ownerState)==null?void 0:r[c])!==f.props[c])continue e;Array.isArray(o)||(o=[o]),typeof f.style=="function"?(u??(u={...e,...e.ownerState,ownerState:e.ownerState}),o.push(f.style(u))):o.push(f.style)}return o}return n}function Vse(t={}){const{themeId:e,defaultTheme:n=Gse,rootShouldForwardProp:r=dI,slotShouldForwardProp:a=dI}=t,s=u=>Xm(Bb(u,e,n));return s.__mui_systemSx=!0,(u,l={})=>{Fae(u,E=>E.filter(N=>!(N!=null&&N.__mui_systemSx)));const{name:f,slot:c,skipVariantsResolver:p,skipSx:d,overridesResolver:h=Hse(jse(c)),...m}=l,v=p!==void 0?p:c&&c!=="Root"&&c!=="root"||!1,g=d||!1;let y,_=dI;c==="Root"||c==="root"?_=r:c?_=a:$se(u)&&(_=void 0);const x=bW(u,{shouldForwardProp:_,label:y,...m}),M=E=>typeof E=="function"&&E.__emotion_real!==E||el(E)?N=>u2(E,Bb(N,e,n)):E,A=(E,...N)=>{let D=M(E);const C=N?N.map(M):[];f&&h&&C.push(I=>{const U=AO(e,I.theme,n);if(!U.components||!U.components[f]||!U.components[f].styleOverrides)return null;const q=U.components[f].styleOverrides,z={},G=Bb(I,e,n);for(const F in q)z[F]=u2(q[F],G);return h(I,z)}),f&&!v&&C.push(I=>{var z,G;const U=AO(e,I.theme,n),q=(G=(z=U==null?void 0:U.components)==null?void 0:z[f])==null?void 0:G.variants;return q?u2({variants:q},Bb(I,e,n)):null}),g||C.push(s);const T=C.length-N.length;if(Array.isArray(E)&&T>0){const I=new Array(T).fill("");D=[...E,...I],D.raw=[...E.raw,...I]}const P=x(D,...C);return u.muiName&&(P.muiName=u.muiName),P};return x.withConfig&&(A.withConfig=x.withConfig),A}}function Wse(t){for(const e in t)return!1;return!0}function $se(t){return typeof t=="string"&&t.charCodeAt(0)>96}function jse(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function Z2(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const a=r;if(a==="components"||a==="slots")n[a]={...t[a],...n[a]};else if(a==="componentsProps"||a==="slotProps"){const s=t[a],o=e[a];if(!o)n[a]=s||{};else if(!s)n[a]=o;else{n[a]={...o};for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const l=u;n[a][l]=Z2(s[l],o[l])}}}else n[a]===void 0&&(n[a]=t[a])}return n}const Xse=typeof window<"u"?Ge.useLayoutEffect:Ge.useEffect;function Yse(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function Wk(t,e=0,n=1){return Yse(t,e,n)}function Qse(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,a)=>a<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Kf(t){if(t.type)return t;if(t.charAt(0)==="#")return Kf(Qse(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Yd(9,t));let r=t.substring(e+1,t.length-1),a;if(n==="color"){if(r=r.split(" "),a=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(Yd(10,a))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:a}}const Zse=t=>{const e=Kf(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Eg=(t,e)=>{try{return Zse(t)}catch{return t}};function iM(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((a,s)=>s<3?parseInt(a,10):a):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function NW(t){t=Kf(t);const{values:e}=t,n=e[0],r=e[1]/100,a=e[2]/100,s=r*Math.min(a,1-a),o=(f,c=(f+n/30)%12)=>a-s*Math.max(Math.min(c-3,9-c,1),-1);let u="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(u+="a",l.push(e[3])),iM({type:u,values:l})}function NO(t){t=Kf(t);let e=t.type==="hsl"||t.type==="hsla"?Kf(NW(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Jse(t,e){const n=NO(t),r=NO(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function R0(t,e){return t=Kf(t),e=Wk(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,iM(t)}function zb(t,e,n){try{return R0(t,e)}catch{return t}}function $k(t,e){if(t=Kf(t),e=Wk(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return iM(t)}function hr(t,e,n){try{return $k(t,e)}catch{return t}}function jk(t,e){if(t=Kf(t),e=Wk(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return iM(t)}function mr(t,e,n){try{return jk(t,e)}catch{return t}}function Kse(t,e=.15){return NO(t)>.5?$k(t,e):jk(t,e)}function qb(t,e,n){try{return Kse(t,e)}catch{return t}}function eoe(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Gb(t){const e=Ge.useRef(t);return Xse(()=>{e.current=t}),Ge.useRef((...n)=>(0,e.current)(...n)).current}function J2(...t){return Ge.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{eoe(n,e)})},t)}const uz={};function CW(t,e){const n=Ge.useRef(uz);return n.current===uz&&(n.current=t(e)),n}const toe=[];function noe(t){Ge.useEffect(t,toe)}class Xk{constructor(){Wv(this,"currentId",null);Wv(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Wv(this,"disposeEffect",()=>this.clear)}static create(){return new Xk}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function roe(){const t=CW(Xk.create).current;return noe(t.disposeEffect),t}function lz(t){try{return t.matches(":focus-visible")}catch{}return!1}function T1(t,e,n=void 0){const r={};for(const a in t){const s=t[a];let o="",u=!0;for(let l=0;l<s.length;l+=1){const f=s[l];f&&(o+=(u===!0?"":" ")+e(f),u=!1,n&&n[f]&&(o+=" "+n[f]))}r[a]=o}return r}function ioe(t){return typeof t=="string"}function aoe(t,e,n){return t===void 0||ioe(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function soe(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function cz(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function ooe(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:a,className:s}=t;if(!e){const h=Mr(n==null?void 0:n.className,s,a==null?void 0:a.className,r==null?void 0:r.className),m={...n==null?void 0:n.style,...a==null?void 0:a.style,...r==null?void 0:r.style},v={...n,...a,...r};return h.length>0&&(v.className=h),Object.keys(m).length>0&&(v.style=m),{props:v,internalRef:void 0}}const o=soe({...a,...r}),u=cz(r),l=cz(a),f=e(o),c=Mr(f==null?void 0:f.className,n==null?void 0:n.className,s,a==null?void 0:a.className,r==null?void 0:r.className),p={...f==null?void 0:f.style,...n==null?void 0:n.style,...a==null?void 0:a.style,...r==null?void 0:r.style},d={...f,...n,...l,...u};return c.length>0&&(d.className=c),Object.keys(p).length>0&&(d.style=p),{props:d,internalRef:f.ref}}function uoe(t,e,n){return typeof t=="function"?t(e,n):t}function loe(t){return!t||!Ge.isValidElement(t)?null:t.props.propertyIsEnumerable("ref")?t.props.ref:t.ref}const coe=Ge.createContext(void 0);function foe(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const a=e.components[n];return a.defaultProps?Z2(a.defaultProps,r):!a.styleOverrides&&!a.variants?Z2(a,r):r}function poe({props:t,name:e}){const n=Ge.useContext(coe);return foe({props:t,name:e,theme:{components:n}})}function doe(t=""){function e(...r){if(!r.length)return"";const a=r[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${a}${e(...r.slice(1))})`:`, ${a}`}return(r,...a)=>`var(--${t?`${t}-`:""}${r}${e(...a)})`}const fz=(t,e,n,r=[])=>{let a=t;e.forEach((s,o)=>{o===e.length-1?Array.isArray(a)?a[Number(s)]=n:a&&typeof a=="object"&&(a[s]=n):a&&typeof a=="object"&&(a[s]||(a[s]=r.includes(s)?[]:{}),a=a[s])})},hoe=(t,e,n)=>{function r(a,s=[],o=[]){Object.entries(a).forEach(([u,l])=>{(!n||n&&!n([...s,u]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...s,u],Array.isArray(l)?[...o,u]:o):e([...s,u],l,o))})}r(t)},moe=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function hI(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},a={},s={},o={};return hoe(t,(u,l,f)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(u,l))){const c=`--${n?`${n}-`:""}${u.join("-")}`,p=moe(u,l);Object.assign(a,{[c]:p}),fz(s,u,`var(${c})`,f),fz(o,u,`var(${c}, ${p})`,f)}},u=>u[0]==="vars"),{css:a,vars:s,varsWithDefaults:o}}function voe(t,e={}){const{getSelector:n=g,disableCssColorScheme:r,colorSchemeSelector:a}=e,{colorSchemes:s={},components:o,defaultColorScheme:u="light",...l}=t,{vars:f,css:c,varsWithDefaults:p}=hI(l,e);let d=p;const h={},{[u]:m,...v}=s;if(Object.entries(v||{}).forEach(([x,M])=>{const{vars:A,css:E,varsWithDefaults:N}=hI(M,e);d=to(d,N),h[x]={css:E,vars:A}}),m){const{css:x,vars:M,varsWithDefaults:A}=hI(m,e);d=to(d,A),h[u]={css:x,vars:M}}function g(x,M){var E,N;let A=a;if(a==="class"&&(A=".%s"),a==="data"&&(A="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(A=`[${a}="%s"]`),x){if(A==="media")return t.defaultColorScheme===x?":root":{[`@media (prefers-color-scheme: ${((N=(E=s[x])==null?void 0:E.palette)==null?void 0:N.mode)||x})`]:{":root":M}};if(A)return t.defaultColorScheme===x?`:root, ${A.replace("%s",String(x))}`:A.replace("%s",String(x))}return":root"}return{vars:d,generateThemeVars:()=>{let x={...f};return Object.entries(h).forEach(([,{vars:M}])=>{x=to(x,M)}),x},generateStyleSheets:()=>{var D,C;const x=[],M=t.defaultColorScheme||"light";function A(T,P){Object.keys(P).length&&x.push(typeof T=="string"?{[T]:{...P}}:T)}A(n(void 0,{...c}),c);const{[M]:E,...N}=h;if(E){const{css:T}=E,P=(C=(D=s[M])==null?void 0:D.palette)==null?void 0:C.mode,I=!r&&P?{colorScheme:P,...T}:{...T};A(n(M,{...I}),I)}return Object.entries(N).forEach(([T,{css:P}])=>{var q,z;const I=(z=(q=s[T])==null?void 0:q.palette)==null?void 0:z.mode,U=!r&&I?{colorScheme:I,...P}:{...P};A(n(T,{...U}),U)}),x}}}function goe(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const pz={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Cy.white,default:Cy.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},mI={text:{primary:Cy.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Cy.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function dz(t,e,n,r){const a=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=jk(t.main,a):e==="dark"&&(t.dark=$k(t.main,s)))}function yoe(t="light"){return t==="dark"?{main:t0[200],light:t0[50],dark:t0[400]}:{main:t0[700],light:t0[400],dark:t0[800]}}function xoe(t="light"){return t==="dark"?{main:e0[200],light:e0[50],dark:e0[400]}:{main:e0[500],light:e0[300],dark:e0[700]}}function boe(t="light"){return t==="dark"?{main:Kh[500],light:Kh[300],dark:Kh[700]}:{main:Kh[700],light:Kh[400],dark:Kh[800]}}function Soe(t="light"){return t==="dark"?{main:n0[400],light:n0[300],dark:n0[700]}:{main:n0[700],light:n0[500],dark:n0[900]}}function woe(t="light"){return t==="dark"?{main:r0[400],light:r0[300],dark:r0[700]}:{main:r0[800],light:r0[500],dark:r0[900]}}function _oe(t="light"){return t==="dark"?{main:eg[400],light:eg[300],dark:eg[700]}:{main:"#ed6c02",light:eg[500],dark:eg[900]}}function Yk(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...a}=t,s=t.primary||yoe(e),o=t.secondary||xoe(e),u=t.error||boe(e),l=t.info||Soe(e),f=t.success||woe(e),c=t.warning||_oe(e);function p(v){return Jse(v,mI.text.primary)>=n?mI.text.primary:pz.text.primary}const d=({color:v,name:g,mainShade:y=500,lightShade:_=300,darkShade:x=700})=>{if(v={...v},!v.main&&v[y]&&(v.main=v[y]),!v.hasOwnProperty("main"))throw new Error(Yd(11,g?` (${g})`:"",y));if(typeof v.main!="string")throw new Error(Yd(12,g?` (${g})`:"",JSON.stringify(v.main)));return dz(v,"light",_,r),dz(v,"dark",x,r),v.contrastText||(v.contrastText=p(v.main)),v},h={dark:mI,light:pz};return to({common:{...Cy},mode:e,primary:d({color:s,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:u,name:"error"}),warning:d({color:c,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:f,name:"success"}),grey:Rie,contrastThreshold:n,getContrastText:p,augmentColor:d,tonalOffset:r,...h[e]},a)}function Moe(t){const e={};return Object.entries(t).forEach(r=>{const[a,s]=r;typeof s=="object"&&(e[a]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function Eoe(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function Toe(t){return Math.round(t*1e5)/1e5}const hz={textTransform:"uppercase"},mz='"Roboto", "Helvetica", "Arial", sans-serif';function Aoe(t,e){const{fontFamily:n=mz,fontSize:r=14,fontWeightLight:a=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:u=700,htmlFontSize:l=16,allVariants:f,pxToRem:c,...p}=typeof e=="function"?e(t):e,d=r/14,h=c||(g=>`${g/l*d}rem`),m=(g,y,_,x,M)=>({fontFamily:n,fontWeight:g,fontSize:h(y),lineHeight:_,...n===mz?{letterSpacing:`${Toe(x/y)}em`}:{},...M,...f}),v={h1:m(a,96,1.167,-1.5),h2:m(a,60,1.2,-.5),h3:m(s,48,1.167,0),h4:m(s,34,1.235,.25),h5:m(s,24,1.334,0),h6:m(o,20,1.6,.15),subtitle1:m(s,16,1.75,.15),subtitle2:m(o,14,1.57,.1),body1:m(s,16,1.5,.15),body2:m(s,14,1.43,.15),button:m(o,14,1.75,.4,hz),caption:m(s,12,1.66,.4),overline:m(s,12,2.66,1,hz),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return to({htmlFontSize:l,pxToRem:h,fontFamily:n,fontSize:r,fontWeightLight:a,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:u,...v},p,{clone:!1})}const Noe=.2,Coe=.14,Doe=.12;function Lr(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Noe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Coe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Doe})`].join(",")}const Roe=["none",Lr(0,2,1,-1,0,1,1,0,0,1,3,0),Lr(0,3,1,-2,0,2,2,0,0,1,5,0),Lr(0,3,3,-2,0,3,4,0,0,1,8,0),Lr(0,2,4,-1,0,4,5,0,0,1,10,0),Lr(0,3,5,-1,0,5,8,0,0,1,14,0),Lr(0,3,5,-1,0,6,10,0,0,1,18,0),Lr(0,4,5,-2,0,7,10,1,0,2,16,1),Lr(0,5,5,-3,0,8,10,1,0,3,14,2),Lr(0,5,6,-3,0,9,12,1,0,3,16,2),Lr(0,6,6,-3,0,10,14,1,0,4,18,3),Lr(0,6,7,-4,0,11,15,1,0,4,20,3),Lr(0,7,8,-4,0,12,17,2,0,5,22,4),Lr(0,7,8,-4,0,13,19,2,0,5,24,4),Lr(0,7,9,-4,0,14,21,2,0,5,26,4),Lr(0,8,9,-5,0,15,22,2,0,6,28,5),Lr(0,8,10,-5,0,16,24,2,0,6,30,5),Lr(0,8,11,-5,0,17,26,2,0,6,32,5),Lr(0,9,11,-5,0,18,28,2,0,7,34,6),Lr(0,9,12,-6,0,19,29,2,0,7,36,6),Lr(0,10,13,-6,0,20,31,3,0,8,38,7),Lr(0,10,13,-6,0,21,33,3,0,8,40,7),Lr(0,10,14,-6,0,22,35,3,0,8,42,7),Lr(0,11,14,-7,0,23,36,3,0,9,44,8),Lr(0,11,15,-7,0,24,38,3,0,9,46,8)],Ioe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Poe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function vz(t){return`${Math.round(t)}ms`}function Ooe(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function Loe(t){const e={...Ioe,...t.easing},n={...Poe,...t.duration};return{getAutoHeightDuration:Ooe,create:(a=["all"],s={})=>{const{duration:o=n.standard,easing:u=e.easeInOut,delay:l=0,...f}=s;return(Array.isArray(a)?a:[a]).map(c=>`${c} ${typeof o=="string"?o:vz(o)} ${u} ${typeof l=="string"?l:vz(l)}`).join(",")},...t,easing:e,duration:n}}const koe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function CO(t={},...e){const{breakpoints:n,mixins:r={},spacing:a,palette:s={},transitions:o={},typography:u={},shape:l,...f}=t;if(t.vars)throw new Error(Yd(20));const c=Yk(s),p=Vk(t);let d=to(p,{mixins:Eoe(p.breakpoints,r),palette:c,shadows:Roe.slice(),typography:Aoe(c,u),transitions:Loe(o),zIndex:{...koe}});return d=to(d,f),d=e.reduce((h,m)=>to(h,m),d),d.unstable_sxConfig={...E1,...f==null?void 0:f.unstable_sxConfig},d.unstable_sx=function(m){return Xm({sx:m,theme:this})},d}function Uoe(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const Foe=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=Uoe(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function DW(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function RW(t){return t==="dark"?Foe:[]}function Boe(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...a}=t,s=Yk(e);return{palette:s,opacity:{...DW(s.mode),...n},overlays:r||RW(s.mode),...a}}function zoe(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const qoe=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],Goe=t=>(e,n)=>{const r=t.colorSchemeSelector;let a=r;if(r==="class"&&(a=".%s"),r==="data"&&(a="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(a=`[${r}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const s={};return qoe(t.cssVarPrefix).forEach(o=>{s[o]=n[o],delete n[o]}),a==="media"?{":root":n,"@media (prefers-color-scheme: dark)":{":root":s}}:a?{[a.replace("%s",e)]:s,[`:root, ${a.replace("%s",e)}`]:n}:{":root":{...n,...s}}}if(a&&a!=="media")return`:root, ${a.replace("%s",String(e))}`}else if(e){if(a==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{":root":n}};if(a)return a.replace("%s",String(e))}return":root"};function Hoe(t){return el(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function Voe(t={}){const e={...t};function n(r){const a=Object.entries(r);for(let s=0;s<a.length;s++){const[o,u]=a[s];!Hoe(u)||o.startsWith("unstable_")?delete r[o]:el(u)&&(r[o]={...u},n(r[o]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Woe(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function Ke(t,e,n){!t[e]&&n&&(t[e]=n)}function Tg(t){return!t||!t.startsWith("hsl")?t:NW(t)}function zl(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Eg(Tg(t[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function $oe(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const $u=t=>{try{return t()}catch{}},joe=(t="mui")=>doe(t);function vI(t,e,n,r){if(!e)return;e=e===!0?{}:e;const a=r==="dark"?"dark":"light";if(!n){t[r]=Boe({...e,palette:{mode:a,...e==null?void 0:e.palette}});return}const{palette:s,...o}=CO({...n,palette:{mode:a,...e==null?void 0:e.palette}});return t[r]={...e,palette:s,opacity:{...DW(a),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||RW(a)},o}function Xoe(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:a=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:o=zoe,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,...l}=t,f=Object.keys(n)[0],c=r||(n.light&&f!=="light"?"light":f),p=joe(s),{[c]:d,light:h,dark:m,...v}=n,g={...v};let y=d;if((c==="dark"&&!("dark"in n)||c==="light"&&!("light"in n))&&(y=!0),!y)throw new Error(Yd(21,c));const _=vI(g,y,l,c);h&&!g.light&&vI(g,h,void 0,"light"),m&&!g.dark&&vI(g,m,void 0,"dark");let x={defaultColorScheme:c,..._,cssVarPrefix:s,colorSchemeSelector:u,getCssVar:p,colorSchemes:g,font:{...Moe(_.typography),..._.font},spacing:$oe(l.spacing)};Object.keys(x.colorSchemes).forEach(D=>{const C=x.colorSchemes[D].palette,T=P=>{const I=P.split("-"),U=I[1],q=I[2];return p(P,C[U][q])};if(C.mode==="light"&&(Ke(C.common,"background","#fff"),Ke(C.common,"onBackground","#000")),C.mode==="dark"&&(Ke(C.common,"background","#000"),Ke(C.common,"onBackground","#fff")),Woe(C,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),C.mode==="light"){Ke(C.Alert,"errorColor",hr(C.error.light,.6)),Ke(C.Alert,"infoColor",hr(C.info.light,.6)),Ke(C.Alert,"successColor",hr(C.success.light,.6)),Ke(C.Alert,"warningColor",hr(C.warning.light,.6)),Ke(C.Alert,"errorFilledBg",T("palette-error-main")),Ke(C.Alert,"infoFilledBg",T("palette-info-main")),Ke(C.Alert,"successFilledBg",T("palette-success-main")),Ke(C.Alert,"warningFilledBg",T("palette-warning-main")),Ke(C.Alert,"errorFilledColor",$u(()=>C.getContrastText(C.error.main))),Ke(C.Alert,"infoFilledColor",$u(()=>C.getContrastText(C.info.main))),Ke(C.Alert,"successFilledColor",$u(()=>C.getContrastText(C.success.main))),Ke(C.Alert,"warningFilledColor",$u(()=>C.getContrastText(C.warning.main))),Ke(C.Alert,"errorStandardBg",mr(C.error.light,.9)),Ke(C.Alert,"infoStandardBg",mr(C.info.light,.9)),Ke(C.Alert,"successStandardBg",mr(C.success.light,.9)),Ke(C.Alert,"warningStandardBg",mr(C.warning.light,.9)),Ke(C.Alert,"errorIconColor",T("palette-error-main")),Ke(C.Alert,"infoIconColor",T("palette-info-main")),Ke(C.Alert,"successIconColor",T("palette-success-main")),Ke(C.Alert,"warningIconColor",T("palette-warning-main")),Ke(C.AppBar,"defaultBg",T("palette-grey-100")),Ke(C.Avatar,"defaultBg",T("palette-grey-400")),Ke(C.Button,"inheritContainedBg",T("palette-grey-300")),Ke(C.Button,"inheritContainedHoverBg",T("palette-grey-A100")),Ke(C.Chip,"defaultBorder",T("palette-grey-400")),Ke(C.Chip,"defaultAvatarColor",T("palette-grey-700")),Ke(C.Chip,"defaultIconColor",T("palette-grey-700")),Ke(C.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ke(C.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ke(C.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ke(C.LinearProgress,"primaryBg",mr(C.primary.main,.62)),Ke(C.LinearProgress,"secondaryBg",mr(C.secondary.main,.62)),Ke(C.LinearProgress,"errorBg",mr(C.error.main,.62)),Ke(C.LinearProgress,"infoBg",mr(C.info.main,.62)),Ke(C.LinearProgress,"successBg",mr(C.success.main,.62)),Ke(C.LinearProgress,"warningBg",mr(C.warning.main,.62)),Ke(C.Skeleton,"bg",`rgba(${T("palette-text-primaryChannel")} / 0.11)`),Ke(C.Slider,"primaryTrack",mr(C.primary.main,.62)),Ke(C.Slider,"secondaryTrack",mr(C.secondary.main,.62)),Ke(C.Slider,"errorTrack",mr(C.error.main,.62)),Ke(C.Slider,"infoTrack",mr(C.info.main,.62)),Ke(C.Slider,"successTrack",mr(C.success.main,.62)),Ke(C.Slider,"warningTrack",mr(C.warning.main,.62));const P=qb(C.background.default,.8);Ke(C.SnackbarContent,"bg",P),Ke(C.SnackbarContent,"color",$u(()=>C.getContrastText(P))),Ke(C.SpeedDialAction,"fabHoverBg",qb(C.background.paper,.15)),Ke(C.StepConnector,"border",T("palette-grey-400")),Ke(C.StepContent,"border",T("palette-grey-400")),Ke(C.Switch,"defaultColor",T("palette-common-white")),Ke(C.Switch,"defaultDisabledColor",T("palette-grey-100")),Ke(C.Switch,"primaryDisabledColor",mr(C.primary.main,.62)),Ke(C.Switch,"secondaryDisabledColor",mr(C.secondary.main,.62)),Ke(C.Switch,"errorDisabledColor",mr(C.error.main,.62)),Ke(C.Switch,"infoDisabledColor",mr(C.info.main,.62)),Ke(C.Switch,"successDisabledColor",mr(C.success.main,.62)),Ke(C.Switch,"warningDisabledColor",mr(C.warning.main,.62)),Ke(C.TableCell,"border",mr(zb(C.divider,1),.88)),Ke(C.Tooltip,"bg",zb(C.grey[700],.92))}if(C.mode==="dark"){Ke(C.Alert,"errorColor",mr(C.error.light,.6)),Ke(C.Alert,"infoColor",mr(C.info.light,.6)),Ke(C.Alert,"successColor",mr(C.success.light,.6)),Ke(C.Alert,"warningColor",mr(C.warning.light,.6)),Ke(C.Alert,"errorFilledBg",T("palette-error-dark")),Ke(C.Alert,"infoFilledBg",T("palette-info-dark")),Ke(C.Alert,"successFilledBg",T("palette-success-dark")),Ke(C.Alert,"warningFilledBg",T("palette-warning-dark")),Ke(C.Alert,"errorFilledColor",$u(()=>C.getContrastText(C.error.dark))),Ke(C.Alert,"infoFilledColor",$u(()=>C.getContrastText(C.info.dark))),Ke(C.Alert,"successFilledColor",$u(()=>C.getContrastText(C.success.dark))),Ke(C.Alert,"warningFilledColor",$u(()=>C.getContrastText(C.warning.dark))),Ke(C.Alert,"errorStandardBg",hr(C.error.light,.9)),Ke(C.Alert,"infoStandardBg",hr(C.info.light,.9)),Ke(C.Alert,"successStandardBg",hr(C.success.light,.9)),Ke(C.Alert,"warningStandardBg",hr(C.warning.light,.9)),Ke(C.Alert,"errorIconColor",T("palette-error-main")),Ke(C.Alert,"infoIconColor",T("palette-info-main")),Ke(C.Alert,"successIconColor",T("palette-success-main")),Ke(C.Alert,"warningIconColor",T("palette-warning-main")),Ke(C.AppBar,"defaultBg",T("palette-grey-900")),Ke(C.AppBar,"darkBg",T("palette-background-paper")),Ke(C.AppBar,"darkColor",T("palette-text-primary")),Ke(C.Avatar,"defaultBg",T("palette-grey-600")),Ke(C.Button,"inheritContainedBg",T("palette-grey-800")),Ke(C.Button,"inheritContainedHoverBg",T("palette-grey-700")),Ke(C.Chip,"defaultBorder",T("palette-grey-700")),Ke(C.Chip,"defaultAvatarColor",T("palette-grey-300")),Ke(C.Chip,"defaultIconColor",T("palette-grey-300")),Ke(C.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ke(C.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ke(C.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ke(C.LinearProgress,"primaryBg",hr(C.primary.main,.5)),Ke(C.LinearProgress,"secondaryBg",hr(C.secondary.main,.5)),Ke(C.LinearProgress,"errorBg",hr(C.error.main,.5)),Ke(C.LinearProgress,"infoBg",hr(C.info.main,.5)),Ke(C.LinearProgress,"successBg",hr(C.success.main,.5)),Ke(C.LinearProgress,"warningBg",hr(C.warning.main,.5)),Ke(C.Skeleton,"bg",`rgba(${T("palette-text-primaryChannel")} / 0.13)`),Ke(C.Slider,"primaryTrack",hr(C.primary.main,.5)),Ke(C.Slider,"secondaryTrack",hr(C.secondary.main,.5)),Ke(C.Slider,"errorTrack",hr(C.error.main,.5)),Ke(C.Slider,"infoTrack",hr(C.info.main,.5)),Ke(C.Slider,"successTrack",hr(C.success.main,.5)),Ke(C.Slider,"warningTrack",hr(C.warning.main,.5));const P=qb(C.background.default,.98);Ke(C.SnackbarContent,"bg",P),Ke(C.SnackbarContent,"color",$u(()=>C.getContrastText(P))),Ke(C.SpeedDialAction,"fabHoverBg",qb(C.background.paper,.15)),Ke(C.StepConnector,"border",T("palette-grey-600")),Ke(C.StepContent,"border",T("palette-grey-600")),Ke(C.Switch,"defaultColor",T("palette-grey-300")),Ke(C.Switch,"defaultDisabledColor",T("palette-grey-600")),Ke(C.Switch,"primaryDisabledColor",hr(C.primary.main,.55)),Ke(C.Switch,"secondaryDisabledColor",hr(C.secondary.main,.55)),Ke(C.Switch,"errorDisabledColor",hr(C.error.main,.55)),Ke(C.Switch,"infoDisabledColor",hr(C.info.main,.55)),Ke(C.Switch,"successDisabledColor",hr(C.success.main,.55)),Ke(C.Switch,"warningDisabledColor",hr(C.warning.main,.55)),Ke(C.TableCell,"border",hr(zb(C.divider,1),.68)),Ke(C.Tooltip,"bg",zb(C.grey[700],.92))}zl(C.background,"default"),zl(C.background,"paper"),zl(C.common,"background"),zl(C.common,"onBackground"),zl(C,"divider"),Object.keys(C).forEach(P=>{const I=C[P];I&&typeof I=="object"&&(I.main&&Ke(C[P],"mainChannel",Eg(Tg(I.main))),I.light&&Ke(C[P],"lightChannel",Eg(Tg(I.light))),I.dark&&Ke(C[P],"darkChannel",Eg(Tg(I.dark))),I.contrastText&&Ke(C[P],"contrastTextChannel",Eg(Tg(I.contrastText))),P==="text"&&(zl(C[P],"primary"),zl(C[P],"secondary")),P==="action"&&(I.active&&zl(C[P],"active"),I.selected&&zl(C[P],"selected")))})}),x=e.reduce((D,C)=>to(D,C),x);const M={prefix:s,disableCssColorScheme:a,shouldSkipGeneratingVar:o,getSelector:Goe(x)},{vars:A,generateThemeVars:E,generateStyleSheets:N}=voe(x,M);return x.vars=A,Object.entries(x.colorSchemes[x.defaultColorScheme]).forEach(([D,C])=>{x[D]=C}),x.generateThemeVars=E,x.generateStyleSheets=N,x.generateSpacing=function(){return _W(l.spacing,Gk(this))},x.getColorSchemeSelector=goe(u),x.spacing=x.generateSpacing(),x.shouldSkipGeneratingVar=o,x.unstable_sxConfig={...E1,...l==null?void 0:l.unstable_sxConfig},x.unstable_sx=function(C){return Xm({sx:C,theme:this})},x.toRuntimeSource=Voe,x}function gz(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:Yk({...n===!0?{}:n.palette,mode:e})})}function IW(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:a=n?void 0:{light:!0},defaultColorScheme:s=n==null?void 0:n.mode,...o}=t,u=s||"light",l=a==null?void 0:a[u],f={...a,...n?{[u]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return CO(t,...e);let c=n;"palette"in t||f[u]&&(f[u]!==!0?c=f[u].palette:u==="dark"&&(c={mode:"dark"}));const p=CO({...t,palette:c},...e);return p.defaultColorScheme=u,p.colorSchemes=f,p.palette.mode==="light"&&(p.colorSchemes.light={...f.light!==!0&&f.light,palette:p.palette},gz(p,"dark",f.dark)),p.palette.mode==="dark"&&(p.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:p.palette},gz(p,"light",f.light)),p}return!n&&!("light"in f)&&u==="light"&&(f.light=!0),Xoe({...o,colorSchemes:f,defaultColorScheme:u,...typeof r!="boolean"&&r},...e)}const PW=IW();function Yoe(){const t=MW(PW);return t[Ik]||t}function Qoe(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const OW=t=>Qoe(t)&&t!=="classes",Nu=Vse({themeId:Ik,defaultTheme:PW,rootShouldForwardProp:OW});function Zoe(){return EW}const yz={theme:void 0};function aM(t){let e,n;return r=>{let a=e;return(a===void 0||r.theme!==n)&&(yz.theme=r.theme,a=t(yz),e=a,n=r.theme),a}}function Qm(t){return poe(t)}function LW(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function DO(t,e){return DO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},DO(t,e)}function kW(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,DO(t,e)}const xz={disabled:!1},K2=_n.createContext(null);var Joe=function(e){return e.scrollTop},Ag="unmounted",md="exited",vd="entering",I0="entered",RO="exiting",Lc=function(t){kW(e,t);function e(r,a){var s;s=t.call(this,r,a)||this;var o=a,u=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?u?(l=md,s.appearStatus=vd):l=I0:r.unmountOnExit||r.mountOnEnter?l=Ag:l=md,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(a,s){var o=a.in;return o&&s.status===Ag?{status:md}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var s=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==vd&&o!==I0&&(s=vd):(o===vd||o===I0)&&(s=RO)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,s,o,u;return s=o=u=a,a!=null&&typeof a!="number"&&(s=a.exit,o=a.enter,u=a.appear!==void 0?a.appear:o),{exit:s,enter:o,appear:u}},n.updateStatus=function(a,s){if(a===void 0&&(a=!1),s!==null)if(this.cancelNextCallback(),s===vd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:kb.findDOMNode(this);o&&Joe(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===md&&this.setState({status:Ag})},n.performEnter=function(a){var s=this,o=this.props.enter,u=this.context?this.context.isMounting:a,l=this.props.nodeRef?[u]:[kb.findDOMNode(this),u],f=l[0],c=l[1],p=this.getTimeouts(),d=u?p.appear:p.enter;if(!a&&!o||xz.disabled){this.safeSetState({status:I0},function(){s.props.onEntered(f)});return}this.props.onEnter(f,c),this.safeSetState({status:vd},function(){s.props.onEntering(f,c),s.onTransitionEnd(d,function(){s.safeSetState({status:I0},function(){s.props.onEntered(f,c)})})})},n.performExit=function(){var a=this,s=this.props.exit,o=this.getTimeouts(),u=this.props.nodeRef?void 0:kb.findDOMNode(this);if(!s||xz.disabled){this.safeSetState({status:md},function(){a.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:RO},function(){a.props.onExiting(u),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:md},function(){a.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,s){s=this.setNextCallback(s),this.setState(a,s)},n.setNextCallback=function(a){var s=this,o=!0;return this.nextCallback=function(u){o&&(o=!1,s.nextCallback=null,a(u))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(a,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:kb.findDOMNode(this),u=a==null&&!this.props.addEndListener;if(!o||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],f=l[0],c=l[1];this.props.addEndListener(f,c)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===Ag)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var u=LW(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return _n.createElement(K2.Provider,{value:null},typeof o=="function"?o(a,u):_n.cloneElement(_n.Children.only(o),u))},e}(_n.Component);Lc.contextType=K2;Lc.propTypes={};function i0(){}Lc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:i0,onEntering:i0,onEntered:i0,onExit:i0,onExiting:i0,onExited:i0};Lc.UNMOUNTED=Ag;Lc.EXITED=md;Lc.ENTERING=vd;Lc.ENTERED=I0;Lc.EXITING=RO;function Koe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qk(t,e){var n=function(s){return e&&Ge.isValidElement(s)?e(s):s},r=Object.create(null);return t&&Ge.Children.map(t,function(a){return a}).forEach(function(a){r[a.key]=n(a)}),r}function eue(t,e){t=t||{},e=e||{};function n(c){return c in e?e[c]:t[c]}var r=Object.create(null),a=[];for(var s in t)s in e?a.length&&(r[s]=a,a=[]):a.push(s);var o,u={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var f=r[l][o];u[r[l][o]]=n(f)}u[l]=n(l)}for(o=0;o<a.length;o++)u[a[o]]=n(a[o]);return u}function Ed(t,e,n){return n[e]!=null?n[e]:t.props[e]}function tue(t,e){return Qk(t.children,function(n){return Ge.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Ed(n,"appear",t),enter:Ed(n,"enter",t),exit:Ed(n,"exit",t)})})}function nue(t,e,n){var r=Qk(t.children),a=eue(e,r);return Object.keys(a).forEach(function(s){var o=a[s];if(Ge.isValidElement(o)){var u=s in e,l=s in r,f=e[s],c=Ge.isValidElement(f)&&!f.props.in;l&&(!u||c)?a[s]=Ge.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Ed(o,"exit",t),enter:Ed(o,"enter",t)}):!l&&u&&!c?a[s]=Ge.cloneElement(o,{in:!1}):l&&u&&Ge.isValidElement(f)&&(a[s]=Ge.cloneElement(o,{onExited:n.bind(null,o),in:f.props.in,exit:Ed(o,"exit",t),enter:Ed(o,"enter",t)}))}}),a}var rue=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},iue={component:"div",childFactory:function(e){return e}},Zk=function(t){kW(e,t);function e(r,a){var s;s=t.call(this,r,a)||this;var o=s.handleExited.bind(Koe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(a,s){var o=s.children,u=s.handleExited,l=s.firstRender;return{children:l?tue(a,u):nue(a,o,u),firstRender:!1}},n.handleExited=function(a,s){var o=Qk(this.props.children);a.key in o||(a.props.onExited&&a.props.onExited(s),this.mounted&&this.setState(function(u){var l=wm({},u.children);return delete l[a.key],{children:l}}))},n.render=function(){var a=this.props,s=a.component,o=a.childFactory,u=LW(a,["component","childFactory"]),l=this.state.contextValue,f=rue(this.state.children).map(o);return delete u.appear,delete u.enter,delete u.exit,s===null?_n.createElement(K2.Provider,{value:l},f):_n.createElement(K2.Provider,{value:l},_n.createElement(s,u,f))},e}(_n.Component);Zk.propTypes={};Zk.defaultProps=iue;const aue=t=>t.scrollTop;function bz(t,e){const{timeout:n,easing:r,style:a={}}=t;return{duration:a.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:a.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:a.transitionDelay}}function Sz(t,e){const{className:n,elementType:r,ownerState:a,externalForwardedProps:s,getSlotOwnerState:o,internalForwardedProps:u,...l}=e,{component:f,slots:c={[t]:void 0},slotProps:p={[t]:void 0},...d}=s,h=c[t]||r,m=uoe(p[t],a),{props:{component:v,...g},internalRef:y}=ooe({className:n,...l,externalForwardedProps:t==="root"?d:void 0,externalSlotProps:m}),_=J2(y,m==null?void 0:m.ref,e.ref),x=o?o(g):{},M={...a,...x},A=t==="root"?v||f:v,E=aoe(h,{...t==="root"&&!f&&!c[t]&&u,...t!=="root"&&!c[t]&&u,...g,...A&&{as:A},ref:_},M);return Object.keys(x).forEach(N=>{delete E[N]}),[h,E]}class ew{constructor(){Wv(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new ew}static use(){const e=CW(ew.create).current,[n,r]=Ge.useState(!1);return e.shouldMount=n,e.setShouldMount=r,Ge.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=oue(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function sue(){return ew.use()}function oue(){let t,e;const n=new Promise((r,a)=>{t=r,e=a});return n.resolve=t,n.reject=e,n}function uue(t){const{className:e,classes:n,pulsate:r=!1,rippleX:a,rippleY:s,rippleSize:o,in:u,onExited:l,timeout:f}=t,[c,p]=Ge.useState(!1),d=Mr(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),h={width:o,height:o,top:-(o/2)+s,left:-(o/2)+a},m=Mr(n.child,c&&n.childLeaving,r&&n.childPulsate);return!u&&!c&&p(!0),Ge.useEffect(()=>{if(!u&&l!=null){const v=setTimeout(l,f);return()=>{clearTimeout(v)}}},[l,u,f]),Mt.jsx("span",{className:d,style:h,children:Mt.jsx("span",{className:m})})}const Do=hh("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),IO=550,lue=80,cue=w1`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,fue=w1`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pue=w1`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,due=Nu("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),hue=Nu(uue,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Do.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${cue};
    animation-duration: ${IO}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${Do.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${Do.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Do.childLeaving} {
    opacity: 0;
    animation-name: ${fue};
    animation-duration: ${IO}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${Do.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pue};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,mue=Ge.forwardRef(function(e,n){const r=Qm({props:e,name:"MuiTouchRipple"}),{center:a=!1,classes:s={},className:o,...u}=r,[l,f]=Ge.useState([]),c=Ge.useRef(0),p=Ge.useRef(null);Ge.useEffect(()=>{p.current&&(p.current(),p.current=null)},[l]);const d=Ge.useRef(!1),h=roe(),m=Ge.useRef(null),v=Ge.useRef(null),g=Ge.useCallback(M=>{const{pulsate:A,rippleX:E,rippleY:N,rippleSize:D,cb:C}=M;f(T=>[...T,Mt.jsx(hue,{classes:{ripple:Mr(s.ripple,Do.ripple),rippleVisible:Mr(s.rippleVisible,Do.rippleVisible),ripplePulsate:Mr(s.ripplePulsate,Do.ripplePulsate),child:Mr(s.child,Do.child),childLeaving:Mr(s.childLeaving,Do.childLeaving),childPulsate:Mr(s.childPulsate,Do.childPulsate)},timeout:IO,pulsate:A,rippleX:E,rippleY:N,rippleSize:D},c.current)]),c.current+=1,p.current=C},[s]),y=Ge.useCallback((M={},A={},E=()=>{})=>{const{pulsate:N=!1,center:D=a||A.pulsate,fakeElement:C=!1}=A;if((M==null?void 0:M.type)==="mousedown"&&d.current){d.current=!1;return}(M==null?void 0:M.type)==="touchstart"&&(d.current=!0);const T=C?null:v.current,P=T?T.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,U,q;if(D||M===void 0||M.clientX===0&&M.clientY===0||!M.clientX&&!M.touches)I=Math.round(P.width/2),U=Math.round(P.height/2);else{const{clientX:z,clientY:G}=M.touches&&M.touches.length>0?M.touches[0]:M;I=Math.round(z-P.left),U=Math.round(G-P.top)}if(D)q=Math.sqrt((2*P.width**2+P.height**2)/3),q%2===0&&(q+=1);else{const z=Math.max(Math.abs((T?T.clientWidth:0)-I),I)*2+2,G=Math.max(Math.abs((T?T.clientHeight:0)-U),U)*2+2;q=Math.sqrt(z**2+G**2)}M!=null&&M.touches?m.current===null&&(m.current=()=>{g({pulsate:N,rippleX:I,rippleY:U,rippleSize:q,cb:E})},h.start(lue,()=>{m.current&&(m.current(),m.current=null)})):g({pulsate:N,rippleX:I,rippleY:U,rippleSize:q,cb:E})},[a,g,h]),_=Ge.useCallback(()=>{y({},{pulsate:!0})},[y]),x=Ge.useCallback((M,A)=>{if(h.clear(),(M==null?void 0:M.type)==="touchend"&&m.current){m.current(),m.current=null,h.start(0,()=>{x(M,A)});return}m.current=null,f(E=>E.length>0?E.slice(1):E),p.current=A},[h]);return Ge.useImperativeHandle(n,()=>({pulsate:_,start:y,stop:x}),[_,y,x]),Mt.jsx(due,{className:Mr(Do.root,s.root,o),ref:v,...u,children:Mt.jsx(Zk,{component:null,exit:!0,children:l})})});function vue(t){return Ym("MuiButtonBase",t)}const gue=hh("MuiButtonBase",["root","disabled","focusVisible"]),yue=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:a}=t,o=T1({root:["root",e&&"disabled",n&&"focusVisible"]},vue,a);return n&&r&&(o.root+=` ${r}`),o},xue=Nu("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${gue.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),bue=Ge.forwardRef(function(e,n){const r=Qm({props:e,name:"MuiButtonBase"}),{action:a,centerRipple:s=!1,children:o,className:u,component:l="button",disabled:f=!1,disableRipple:c=!1,disableTouchRipple:p=!1,focusRipple:d=!1,focusVisibleClassName:h,LinkComponent:m="a",onBlur:v,onClick:g,onContextMenu:y,onDragLeave:_,onFocus:x,onFocusVisible:M,onKeyDown:A,onKeyUp:E,onMouseDown:N,onMouseLeave:D,onMouseUp:C,onTouchEnd:T,onTouchMove:P,onTouchStart:I,tabIndex:U=0,TouchRippleProps:q,touchRippleRef:z,type:G,...F}=r,k=Ge.useRef(null),O=sue(),W=J2(O.ref,z),[X,ee]=Ge.useState(!1);f&&X&&ee(!1),Ge.useImperativeHandle(a,()=>({focusVisible:()=>{ee(!0),k.current.focus()}}),[]);const J=O.shouldMount&&!c&&!f;Ge.useEffect(()=>{X&&d&&!c&&O.pulsate()},[c,d,X,O]);function Y(ue,_e,be=p){return Gb(Pe=>(_e&&_e(Pe),be||O[ue](Pe),!0))}const ie=Y("start",N),K=Y("stop",y),re=Y("stop",_),oe=Y("stop",C),ce=Y("stop",ue=>{X&&ue.preventDefault(),D&&D(ue)}),me=Y("start",I),Se=Y("stop",T),le=Y("stop",P),Q=Y("stop",ue=>{lz(ue.target)||ee(!1),v&&v(ue)},!1),Ee=Gb(ue=>{k.current||(k.current=ue.currentTarget),lz(ue.target)&&(ee(!0),M&&M(ue)),x&&x(ue)}),ne=()=>{const ue=k.current;return l&&l!=="button"&&!(ue.tagName==="A"&&ue.href)},se=Gb(ue=>{d&&!ue.repeat&&X&&ue.key===" "&&O.stop(ue,()=>{O.start(ue)}),ue.target===ue.currentTarget&&ne()&&ue.key===" "&&ue.preventDefault(),A&&A(ue),ue.target===ue.currentTarget&&ne()&&ue.key==="Enter"&&!f&&(ue.preventDefault(),g&&g(ue))}),xe=Gb(ue=>{d&&ue.key===" "&&X&&!ue.defaultPrevented&&O.stop(ue,()=>{O.pulsate(ue)}),E&&E(ue),g&&ue.target===ue.currentTarget&&ne()&&ue.key===" "&&!ue.defaultPrevented&&g(ue)});let ve=l;ve==="button"&&(F.href||F.to)&&(ve=m);const te={};ve==="button"?(te.type=G===void 0?"button":G,te.disabled=f):(!F.href&&!F.to&&(te.role="button"),f&&(te["aria-disabled"]=f));const $=J2(n,k),B={...r,centerRipple:s,component:l,disabled:f,disableRipple:c,disableTouchRipple:p,focusRipple:d,tabIndex:U,focusVisible:X},ae=yue(B);return Mt.jsxs(xue,{as:ve,className:Mr(ae.root,u),ownerState:B,onBlur:Q,onClick:g,onContextMenu:K,onFocus:Ee,onKeyDown:se,onKeyUp:xe,onMouseDown:ie,onMouseLeave:ce,onMouseUp:oe,onDragLeave:re,onTouchEnd:Se,onTouchMove:le,onTouchStart:me,ref:$,tabIndex:f?-1:U,type:G,...te,...F,children:[o,J?Mt.jsx(mue,{ref:W,center:s,...q}):null]})});function Sue(t){return typeof t.main=="string"}function wue(t,e=[]){if(!Sue(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Jk(t=[]){return([,e])=>e&&wue(e,t)}function _ue(t){return Ym("MuiTypography",t)}hh("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Mue={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Eue=Zoe(),Tue=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:a,variant:s,classes:o}=t,u={root:["root",s,t.align!=="inherit"&&`align${Si(e)}`,n&&"gutterBottom",r&&"noWrap",a&&"paragraph"]};return T1(u,_ue,o)},Aue=Nu("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Si(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(aM(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(Jk()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Si(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),wz={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},gI=Ge.forwardRef(function(e,n){const{color:r,...a}=Qm({props:e,name:"MuiTypography"}),s=!Mue[r],o=Eue({...a,...s&&{color:r}}),{align:u="inherit",className:l,component:f,gutterBottom:c=!1,noWrap:p=!1,paragraph:d=!1,variant:h="body1",variantMapping:m=wz,...v}=o,g={...o,align:u,color:r,className:l,component:f,gutterBottom:c,noWrap:p,paragraph:d,variant:h,variantMapping:m},y=f||(d?"p":m[h]||wz[h])||"span",_=Tue(g);return Mt.jsx(Aue,{as:y,ref:n,className:Mr(_.root,l),...v,ownerState:g,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...v.style}})}),Nue={entering:{opacity:1},entered:{opacity:1}},Cue=Ge.forwardRef(function(e,n){const r=Yoe(),a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:u,easing:l,in:f,onEnter:c,onEntered:p,onEntering:d,onExit:h,onExited:m,onExiting:v,style:g,timeout:y=a,TransitionComponent:_=Lc,...x}=e,M=Ge.useRef(null),A=J2(M,loe(u),n),E=q=>z=>{if(q){const G=M.current;z===void 0?q(G):q(G,z)}},N=E(d),D=E((q,z)=>{aue(q);const G=bz({style:g,timeout:y,easing:l},{mode:"enter"});q.style.webkitTransition=r.transitions.create("opacity",G),q.style.transition=r.transitions.create("opacity",G),c&&c(q,z)}),C=E(p),T=E(v),P=E(q=>{const z=bz({style:g,timeout:y,easing:l},{mode:"exit"});q.style.webkitTransition=r.transitions.create("opacity",z),q.style.transition=r.transitions.create("opacity",z),h&&h(q)}),I=E(m),U=q=>{s&&s(M.current,q)};return Mt.jsx(_,{appear:o,in:f,nodeRef:M,onEnter:D,onEntered:C,onEntering:N,onExit:P,onExited:I,onExiting:T,addEndListener:U,timeout:y,...x,children:(q,z)=>Ge.cloneElement(u,{style:{opacity:0,visibility:q==="exited"&&!f?"hidden":void 0,...Nue[q],...g,...u.props.style},ref:A,...z})})});function Due(t){return Ym("MuiBackdrop",t)}hh("MuiBackdrop",["root","invisible"]);const Rue=t=>{const{ownerState:e,...n}=t;return n},Iue=t=>{const{classes:e,invisible:n}=t;return T1({root:["root",n&&"invisible"]},Due,e)},Pue=Nu("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Oue=Ge.forwardRef(function(e,n){const r=Qm({props:e,name:"MuiBackdrop"}),{children:a,className:s,component:o="div",invisible:u=!1,open:l,components:f={},componentsProps:c={},slotProps:p={},slots:d={},TransitionComponent:h,transitionDuration:m,...v}=r,g={...r,component:o,invisible:u},y=Iue(g),_={transition:h,root:f.Root,...d},x={...c,...p},M={slots:_,slotProps:x},[A,E]=Sz("root",{elementType:Pue,externalForwardedProps:M,className:Mr(y.root,s),ownerState:g}),[N,D]=Sz("transition",{elementType:Cue,externalForwardedProps:M,ownerState:g}),C=Rue(D);return Mt.jsx(N,{in:l,timeout:m,...v,...C,children:Mt.jsx(A,{"aria-hidden":!0,...E,classes:y,ref:n,children:a})})}),Lue=hh("MuiBox",["root"]),kue=IW(),Uue=zse({themeId:Ik,defaultTheme:kue,defaultClassName:Lue.root,generateClassName:TW.generate});function Fue(t){return Ym("MuiButton",t)}const a0=hh("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Bue=Ge.createContext({}),zue=Ge.createContext(void 0),que=t=>{const{color:e,disableElevation:n,fullWidth:r,size:a,variant:s,classes:o}=t,u={root:["root",s,`${s}${Si(e)}`,`size${Si(a)}`,`${s}Size${Si(a)}`,`color${Si(e)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${Si(a)}`],endIcon:["icon","endIcon",`iconSize${Si(a)}`]},l=T1(u,Fue,o);return{...o,...l}},UW=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Gue=Nu(bue,{shouldForwardProp:t=>OW(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Si(n.color)}`],e[`size${Si(n.size)}`],e[`${n.variant}Size${Si(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(aM(({theme:t})=>{var r,a;const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${a0.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${a0.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${a0.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${a0.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Jk(["dark","contrastText"])).map(([s])=>({props:{color:s},style:{"--variant-textColor":(t.vars||t).palette[s].main,"--variant-outlinedColor":(t.vars||t).palette[s].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[s].mainChannel} / 0.5)`:R0(t.palette[s].main,.5),"--variant-containedColor":(t.vars||t).palette[s].contrastText,"--variant-containedBg":(t.vars||t).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[s].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[s].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:R0(t.palette[s].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[s].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[s].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:R0(t.palette[s].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{"--variant-containedColor":t.vars?t.vars.palette.text.primary:(a=(r=t.palette).getContrastText)==null?void 0:a.call(r,e),"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:R0(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:R0(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${a0.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${a0.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),Hue=Nu("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${Si(n.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...UW]}),Vue=Nu("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${Si(n.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...UW]}),PO=Ge.forwardRef(function(e,n){const r=Ge.useContext(Bue),a=Ge.useContext(zue),s=Z2(r,e),o=Qm({props:s,name:"MuiButton"}),{children:u,color:l="primary",component:f="button",className:c,disabled:p=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:m,focusVisibleClassName:v,fullWidth:g=!1,size:y="medium",startIcon:_,type:x,variant:M="text",...A}=o,E={...o,color:l,component:f,disabled:p,disableElevation:d,disableFocusRipple:h,fullWidth:g,size:y,type:x,variant:M},N=que(E),D=_&&Mt.jsx(Hue,{className:N.startIcon,ownerState:E,children:_}),C=m&&Mt.jsx(Vue,{className:N.endIcon,ownerState:E,children:m}),T=a||"";return Mt.jsxs(Gue,{ownerState:E,className:Mr(r.className,N.root,c,T),component:f,disabled:p,focusRipple:!h,focusVisibleClassName:Mr(N.focusVisible,v),ref:n,type:x,...A,classes:N,children:[D,u,C]})});function Wue(t){return Ym("MuiCircularProgress",t)}hh("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const df=44,OO=w1`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,LO=w1`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,$ue=typeof OO!="string"?Bk`
        animation: ${OO} 1.4s linear infinite;
      `:null,jue=typeof LO!="string"?Bk`
        animation: ${LO} 1.4s ease-in-out infinite;
      `:null,Xue=t=>{const{classes:e,variant:n,color:r,disableShrink:a}=t,s={root:["root",n,`color${Si(r)}`],svg:["svg"],circle:["circle",`circle${Si(n)}`,a&&"circleDisableShrink"]};return T1(s,Wue,e)},Yue=Nu("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${Si(n.color)}`]]}})(aM(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:$ue||{animation:`${OO} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Jk()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),Que=Nu("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),Zue=Nu("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${Si(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(aM(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:jue||{animation:`${LO} 1.4s ease-in-out infinite`}}]}))),Jue=Ge.forwardRef(function(e,n){const r=Qm({props:e,name:"MuiCircularProgress"}),{className:a,color:s="primary",disableShrink:o=!1,size:u=40,style:l,thickness:f=3.6,value:c=0,variant:p="indeterminate",...d}=r,h={...r,color:s,disableShrink:o,size:u,thickness:f,value:c,variant:p},m=Xue(h),v={},g={},y={};if(p==="determinate"){const _=2*Math.PI*((df-f)/2);v.strokeDasharray=_.toFixed(3),y["aria-valuenow"]=Math.round(c),v.strokeDashoffset=`${((100-c)/100*_).toFixed(3)}px`,g.transform="rotate(-90deg)"}return Mt.jsx(Yue,{className:Mr(m.root,a),style:{width:u,height:u,...g,...l},ownerState:h,ref:n,role:"progressbar",...y,...d,children:Mt.jsx(Que,{className:m.svg,ownerState:h,viewBox:`${df/2} ${df/2} ${df} ${df}`,children:Mt.jsx(Zue,{className:m.circle,style:v,ownerState:h,cx:df,cy:df,r:(df-f)/2,fill:"none",strokeWidth:f})})})}),Py=t=>typeof t=="number"&&!isNaN(t),Pd=t=>typeof t=="string",Zs=t=>typeof t=="function",l2=t=>Pd(t)||Zs(t)?t:null,kO=t=>Ge.isValidElement(t)||Pd(t)||Zs(t)||Py(t);function Kue(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:a}=t;requestAnimationFrame(()=>{a.minHeight="initial",a.height=r+"px",a.transition=`all ${n}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(e,n)})})}function sM(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:a=!0,collapseDuration:s=300}=t;return function(o){let{children:u,position:l,preventExitTransition:f,done:c,nodeRef:p,isIn:d,playToast:h}=o;const m=r?`${e}--${l}`:e,v=r?`${n}--${l}`:n,g=Ge.useRef(0);return Ge.useLayoutEffect(()=>{const y=p.current,_=m.split(" "),x=M=>{M.target===p.current&&(h(),y.removeEventListener("animationend",x),y.removeEventListener("animationcancel",x),g.current===0&&M.type!=="animationcancel"&&y.classList.remove(..._))};y.classList.add(..._),y.addEventListener("animationend",x),y.addEventListener("animationcancel",x)},[]),Ge.useEffect(()=>{const y=p.current,_=()=>{y.removeEventListener("animationend",_),a?Kue(y,c,s):c()};d||(f?_():(g.current=1,y.className+=` ${v}`,y.addEventListener("animationend",_)))},[d]),_n.createElement(_n.Fragment,null,u)}}function _z(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const ns=new Map;let Oy=[];const UO=new Set,ele=t=>UO.forEach(e=>e(t)),FW=()=>ns.size>0;function BW(t,e){var n;if(e)return!((n=ns.get(e))==null||!n.isToastActive(t));let r=!1;return ns.forEach(a=>{a.isToastActive(t)&&(r=!0)}),r}function zW(t,e){kO(t)&&(FW()||Oy.push({content:t,options:e}),ns.forEach(n=>{n.buildToast(t,e)}))}function Mz(t,e){ns.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function tle(t){const{subscribe:e,getSnapshot:n,setProps:r}=Ge.useRef(function(s){const o=s.containerId||1;return{subscribe(u){const l=function(c,p,d){let h=1,m=0,v=[],g=[],y=[],_=p;const x=new Map,M=new Set,A=()=>{y=Array.from(x.values()),M.forEach(D=>D())},E=D=>{g=D==null?[]:g.filter(C=>C!==D),A()},N=D=>{const{toastId:C,onOpen:T,updateId:P,children:I}=D.props,U=P==null;D.staleId&&x.delete(D.staleId),x.set(C,D),g=[...g,D.props.toastId].filter(q=>q!==D.staleId),A(),d(_z(D,U?"added":"updated")),U&&Zs(T)&&T(Ge.isValidElement(I)&&I.props)};return{id:c,props:_,observe:D=>(M.add(D),()=>M.delete(D)),toggle:(D,C)=>{x.forEach(T=>{C!=null&&C!==T.props.toastId||Zs(T.toggle)&&T.toggle(D)})},removeToast:E,toasts:x,clearQueue:()=>{m-=v.length,v=[]},buildToast:(D,C)=>{if((ee=>{let{containerId:J,toastId:Y,updateId:ie}=ee;const K=J?J!==c:c!==1,re=x.has(Y)&&ie==null;return K||re})(C))return;const{toastId:T,updateId:P,data:I,staleId:U,delay:q}=C,z=()=>{E(T)},G=P==null;G&&m++;const F={..._,style:_.toastStyle,key:h++,...Object.fromEntries(Object.entries(C).filter(ee=>{let[J,Y]=ee;return Y!=null})),toastId:T,updateId:P,data:I,closeToast:z,isIn:!1,className:l2(C.className||_.toastClassName),bodyClassName:l2(C.bodyClassName||_.bodyClassName),progressClassName:l2(C.progressClassName||_.progressClassName),autoClose:!C.isLoading&&(k=C.autoClose,O=_.autoClose,k===!1||Py(k)&&k>0?k:O),deleteToast(){const ee=x.get(T),{onClose:J,children:Y}=ee.props;Zs(J)&&J(Ge.isValidElement(Y)&&Y.props),d(_z(ee,"removed")),x.delete(T),m--,m<0&&(m=0),v.length>0?N(v.shift()):A()}};var k,O;F.closeButton=_.closeButton,C.closeButton===!1||kO(C.closeButton)?F.closeButton=C.closeButton:C.closeButton===!0&&(F.closeButton=!kO(_.closeButton)||_.closeButton);let W=D;Ge.isValidElement(D)&&!Pd(D.type)?W=Ge.cloneElement(D,{closeToast:z,toastProps:F,data:I}):Zs(D)&&(W=D({closeToast:z,toastProps:F,data:I}));const X={content:W,props:F,staleId:U};_.limit&&_.limit>0&&m>_.limit&&G?v.push(X):Py(q)?setTimeout(()=>{N(X)},q):N(X)},setProps(D){_=D},setToggle:(D,C)=>{x.get(D).toggle=C},isToastActive:D=>g.some(C=>C===D),getSnapshot:()=>_.newestOnTop?y.reverse():y}}(o,s,ele);ns.set(o,l);const f=l.observe(u);return Oy.forEach(c=>zW(c.content,c.options)),Oy=[],()=>{f(),ns.delete(o)}},setProps(u){var l;(l=ns.get(o))==null||l.setProps(u)},getSnapshot(){var u;return(u=ns.get(o))==null?void 0:u.getSnapshot()}}}(t)).current;r(t);const a=Ge.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!a)return[];const o=new Map;return a.forEach(u=>{const{position:l}=u.props;o.has(l)||o.set(l,[]),o.get(l).push(u)}),Array.from(o,u=>s(u[0],u[1]))},isToastActive:BW,count:a==null?void 0:a.length}}function nle(t){const[e,n]=Ge.useState(!1),[r,a]=Ge.useState(!1),s=Ge.useRef(null),o=Ge.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:l,closeToast:f,onClick:c,closeOnClick:p}=t;var d,h;function m(){n(!0)}function v(){n(!1)}function g(x){const M=s.current;o.canDrag&&M&&(o.didMove=!0,e&&v(),o.delta=t.draggableDirection==="x"?x.clientX-o.start:x.clientY-o.start,o.start!==x.clientX&&(o.canCloseOnClick=!1),M.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,M.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function y(){document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y);const x=s.current;if(o.canDrag&&o.didMove&&x){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return a(!0),t.closeToast(),void t.collapseAll();x.style.transition="transform 0.2s, opacity 0.2s",x.style.removeProperty("transform"),x.style.removeProperty("opacity")}}(h=ns.get((d={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||h.setToggle(d.id,d.fn),Ge.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||v(),window.addEventListener("focus",m),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",v)}},[t.pauseOnFocusLoss]);const _={onPointerDown:function(x){if(t.draggable===!0||t.draggable===x.pointerType){o.didMove=!1,document.addEventListener("pointermove",g),document.addEventListener("pointerup",y);const M=s.current;o.canCloseOnClick=!0,o.canDrag=!0,M.style.transition="none",t.draggableDirection==="x"?(o.start=x.clientX,o.removalDistance=M.offsetWidth*(t.draggablePercent/100)):(o.start=x.clientY,o.removalDistance=M.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(x){const{top:M,bottom:A,left:E,right:N}=s.current.getBoundingClientRect();x.nativeEvent.type!=="touchend"&&t.pauseOnHover&&x.clientX>=E&&x.clientX<=N&&x.clientY>=M&&x.clientY<=A?v():m()}};return u&&l&&(_.onMouseEnter=v,t.stacked||(_.onMouseLeave=m)),p&&(_.onClick=x=>{c&&c(x),o.canCloseOnClick&&f()}),{playToast:m,pauseToast:v,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:_}}function rle(t){let{delay:e,isRunning:n,closeToast:r,type:a="default",hide:s,className:o,style:u,controlledProgress:l,progress:f,rtl:c,isIn:p,theme:d}=t;const h=s||l&&f===0,m={...u,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(m.transform=`scaleX(${f})`);const v=Mr("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":c}),g=Zs(o)?o({rtl:c,type:a,defaultClassName:v}):Mr(v,o),y={[l&&f>=1?"onTransitionEnd":"onAnimationEnd"]:l&&f<1?null:()=>{p&&r()}};return _n.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},_n.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${a}`}),_n.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:g,style:m,...y}))}let ile=1;const qW=()=>""+ile++;function ale(t){return t&&(Pd(t.toastId)||Py(t.toastId))?t.toastId:qW()}function Hg(t,e){return zW(t,e),e.toastId}function tw(t,e){return{...e,type:e&&e.type||t,toastId:ale(e)}}function Hb(t){return(e,n)=>Hg(e,tw(t,n))}function vr(t,e){return Hg(t,tw("default",e))}vr.loading=(t,e)=>Hg(t,tw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),vr.promise=function(t,e,n){let r,{pending:a,error:s,success:o}=e;a&&(r=Pd(a)?vr.loading(a,n):vr.loading(a.render,{...n,...a}));const u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(c,p,d)=>{if(p==null)return void vr.dismiss(r);const h={type:c,...u,...n,data:d},m=Pd(p)?{render:p}:p;return r?vr.update(r,{...h,...m}):vr(m.render,{...h,...m}),d},f=Zs(t)?t():t;return f.then(c=>l("success",o,c)).catch(c=>l("error",s,c)),f},vr.success=Hb("success"),vr.info=Hb("info"),vr.error=Hb("error"),vr.warning=Hb("warning"),vr.warn=vr.warning,vr.dark=(t,e)=>Hg(t,tw("default",{theme:"dark",...e})),vr.dismiss=function(t){(function(e){var n;if(FW()){if(e==null||Pd(n=e)||Py(n))ns.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=ns.get(e.containerId);r?r.removeToast(e.id):ns.forEach(a=>{a.removeToast(e.id)})}}else Oy=Oy.filter(r=>e!=null&&r.options.toastId!==e)})(t)},vr.clearWaitingQueue=function(t){t===void 0&&(t={}),ns.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},vr.isActive=BW,vr.update=function(t,e){e===void 0&&(e={});const n=((r,a)=>{var s;let{containerId:o}=a;return(s=ns.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:a}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:qW()};s.toastId!==t&&(s.staleId=t);const o=s.render||a;delete s.render,Hg(o,s)}},vr.done=t=>{vr.update(t,{progress:1})},vr.onChange=function(t){return UO.add(t),()=>{UO.delete(t)}},vr.play=t=>Mz(!0,t),vr.pause=t=>Mz(!1,t);const sle=typeof window<"u"?Ge.useLayoutEffect:Ge.useEffect,Vb=t=>{let{theme:e,type:n,isLoading:r,...a}=t;return _n.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...a})},yI={info:function(t){return _n.createElement(Vb,{...t},_n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return _n.createElement(Vb,{...t},_n.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return _n.createElement(Vb,{...t},_n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return _n.createElement(Vb,{...t},_n.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return _n.createElement("div",{className:"Toastify__spinner"})}},ole=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:a,playToast:s}=nle(t),{closeButton:o,children:u,autoClose:l,onClick:f,type:c,hideProgressBar:p,closeToast:d,transition:h,position:m,className:v,style:g,bodyClassName:y,bodyStyle:_,progressClassName:x,progressStyle:M,updateId:A,role:E,progress:N,rtl:D,toastId:C,deleteToast:T,isIn:P,isLoading:I,closeOnClick:U,theme:q}=t,z=Mr("Toastify__toast",`Toastify__toast-theme--${q}`,`Toastify__toast--${c}`,{"Toastify__toast--rtl":D},{"Toastify__toast--close-on-click":U}),G=Zs(v)?v({rtl:D,position:m,type:c,defaultClassName:z}):Mr(z,v),F=function(X){let{theme:ee,type:J,isLoading:Y,icon:ie}=X,K=null;const re={theme:ee,type:J};return ie===!1||(Zs(ie)?K=ie({...re,isLoading:Y}):Ge.isValidElement(ie)?K=Ge.cloneElement(ie,re):Y?K=yI.spinner():(oe=>oe in yI)(J)&&(K=yI[J](re))),K}(t),k=!!N||!l,O={closeToast:d,type:c,theme:q};let W=null;return o===!1||(W=Zs(o)?o(O):Ge.isValidElement(o)?Ge.cloneElement(o,O):function(X){let{closeToast:ee,theme:J,ariaLabel:Y="close"}=X;return _n.createElement("button",{className:`Toastify__close-button Toastify__close-button--${J}`,type:"button",onClick:ie=>{ie.stopPropagation(),ee(ie)},"aria-label":Y},_n.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},_n.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(O)),_n.createElement(h,{isIn:P,done:T,position:m,preventExitTransition:n,nodeRef:r,playToast:s},_n.createElement("div",{id:C,onClick:f,"data-in":P,className:G,...a,style:g,ref:r},_n.createElement("div",{...P&&{role:E},className:Zs(y)?y({type:c}):Mr("Toastify__toast-body",y),style:_},F!=null&&_n.createElement("div",{className:Mr("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},F),_n.createElement("div",null,u)),W,_n.createElement(rle,{...A&&!k?{key:`pb-${A}`}:{},rtl:D,theme:q,delay:l,isRunning:e,isIn:P,closeToast:d,hide:p,type:c,style:M,className:x,controlledProgress:k,progress:N||0})))},oM=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},ule=sM(oM("bounce",!0));sM(oM("slide",!0));sM(oM("zoom"));sM(oM("flip"));const lle={position:"top-right",transition:ule,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function cle(t){let e={...lle,...t};const n=t.stacked,[r,a]=Ge.useState(!0),s=Ge.useRef(null),{getToastToRender:o,isToastActive:u,count:l}=tle(e),{className:f,style:c,rtl:p,containerId:d}=e;function h(v){const g=Mr("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":p});return Zs(f)?f({position:v,rtl:p,defaultClassName:g}):Mr(g,l2(f))}function m(){n&&(a(!0),vr.play())}return sle(()=>{if(n){var v;const g=s.current.querySelectorAll('[data-in="true"]'),y=12,_=(v=e.position)==null?void 0:v.includes("top");let x=0,M=0;Array.from(g).reverse().forEach((A,E)=>{const N=A;N.classList.add("Toastify__toast--stacked"),E>0&&(N.dataset.collapsed=`${r}`),N.dataset.pos||(N.dataset.pos=_?"top":"bot");const D=x*(r?.2:1)+(r?0:y*E);N.style.setProperty("--y",`${_?D:-1*D}px`),N.style.setProperty("--g",`${y}`),N.style.setProperty("--s",""+(1-(r?M:0))),x+=N.offsetHeight,M+=.025})}},[r,l,n]),_n.createElement("div",{ref:s,className:"Toastify",id:d,onMouseEnter:()=>{n&&(a(!1),vr.pause())},onMouseLeave:m},o((v,g)=>{const y=g.length?{...c}:{...c,pointerEvents:"none"};return _n.createElement("div",{className:h(v),style:y,key:`container-${v}`},g.map(_=>{let{content:x,props:M}=_;return _n.createElement(ole,{...M,stacked:n,collapseAll:m,isIn:u(M.toastId,M.containerId),style:M.style,key:`toast-${M.key}`},x)}))}))}var uM={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Od(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Od=function(n){return typeof n}:Od=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Od(t)}function pn(t){return typeof t=="number"}function Jt(t){return t&&t.constructor.prototype.isBigNumber===!0||!1}function qo(t){return t&&Od(t)==="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function kc(t){return t&&Od(t)==="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Uc(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Ca(t){return typeof t=="string"}var zn=Array.isArray;function Dn(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Cu(t){return Array.isArray(t)||Dn(t)}function Qd(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function sc(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function mh(t){return t&&t.constructor.prototype.isRange===!0||!1}function vp(t){return t&&t.constructor.prototype.isIndex===!0||!1}function lM(t){return typeof t=="boolean"}function A1(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function Zm(t){return t&&t.constructor.prototype.isHelp===!0||!1}function cM(t){return typeof t=="function"}function fM(t){return t instanceof Date}function pM(t){return t instanceof RegExp}function dM(t){return!!(t&&Od(t)==="object"&&t.constructor===Object&&!qo(t)&&!kc(t))}function hM(t){return t===null}function mM(t){return t===void 0}function gc(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function N1(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function vM(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function gM(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function yM(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function tr(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function gp(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function yp(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function vh(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Cn(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function C1(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Gi(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function sl(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function D1(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function ri(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Jm(t){return t&&t.constructor.prototype.isChain===!0||!1}function ur(t){var e=Od(t);return e==="object"?t===null?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":Jt(t)?"BigNumber":qo(t)?"Complex":kc(t)?"Fraction":Dn(t)?"Matrix":Uc(t)?"Unit":vp(t)?"Index":mh(t)?"Range":A1(t)?"ResultSet":Cn(t)?t.type:Jm(t)?"Chain":Zm(t)?"Help":"Object":e==="function"?"Function":e}function Vg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vg=function(n){return typeof n}:Vg=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vg(t)}function Ut(t){var e=Vg(t);if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return Ut(n)});if(t instanceof Date)return new Date(t.valueOf());if(Jt(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return Td(t,Ut)}function Td(t,e){var n={};for(var r in t)Et(t,r)&&(n[r]=e(t[r]));return n}function xM(t,e){for(var n in e)Et(e,n)&&(t[n]=e[n]);return t}function GW(t,e){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(var n in e)if(Et(e,n))if(e[n]&&e[n].constructor===Object)t[n]===void 0&&(t[n]={}),t[n]&&t[n].constructor===Object?GW(t[n],e[n]):t[n]=e[n];else{if(Array.isArray(e[n]))throw new TypeError("Arrays are not supported by deepExtend");t[n]=e[n]}return t}function fm(t,e){var n,r,a;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,a=t.length;r<a;r++)if(!fm(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!fm(t[n],e[n]))return!1;for(n in e)if(!(n in t)||!fm(t[n],e[n]))return!1;return!0}else return t===e}}function fle(t){var e={};return HW(t,e),e}function HW(t,e){for(var n in t)if(Et(t,n)){var r=t[n];Vg(r)==="object"&&r!==null?HW(r,e):e[n]=r}}function tc(t,e,n){var r=!0,a;Object.defineProperty(t,e,{get:function(){return r&&(a=n(),r=!1),a},set:function(o){a=o,r=!1},configurable:!0,enumerable:!0})}function Kk(t,e){if(e&&typeof e=="string")return Kk(t,e.split("."));var n=t;if(e)for(var r=0;r<e.length;r++){var a=e[r];a in n||(n[a]={}),n=n[a]}return n}function Et(t,e){return t&&Object.hasOwnProperty.call(t,e)}function VW(t){return t&&typeof t.factory=="function"}function ple(t,e){for(var n={},r=0;r<e.length;r++){var a=e[r],s=t[a];s!==void 0&&(n[a]=s)}return n}function Ez(t){return Object.keys(t).map(function(e){return t[e]})}var FO=["Matrix","Array"],BO=["number","BigNumber","Fraction"];function dle(t,e){function n(r){if(r){var a=Td(t,Ut);Tz(r,"matrix",FO),Tz(r,"number",BO),GW(t,r);var s=Td(t,Ut),o=Td(r,Ut);return e("config",s,a,o),s}else return Td(t,Ut)}return n.MATRIX_OPTIONS=FO,n.NUMBER_OPTIONS=BO,Object.keys(uM).forEach(function(r){Object.defineProperty(n,r,{get:function(){return t[r]},enumerable:!0,configurable:!0})}),n}function hle(t,e){return t.indexOf(e)!==-1}function mle(t,e){return t.map(function(n){return n.toLowerCase()}).indexOf(e.toLowerCase())}function Tz(t,e,n){if(t[e]!==void 0&&!hle(n,t[e])){var r=mle(n,t[e]);r!==-1?(console.warn('Warning: Wrong casing for configuration option "'+e+'", should be "'+n[r]+'" instead of "'+t[e]+'".'),t[e]=n[r]):console.warn('Warning: Unknown value "'+t[e]+'" for configuration option "'+e+'". Available options: '+n.map(JSON.stringify).join(", ")+".")}}function zO(){return zO=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zO.apply(this,arguments)}var at=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(uM)};zO(at,uM,{MATRIX_OPTIONS:FO,NUMBER_OPTIONS:BO});var WW={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(RP,function(){function n(){return!0}function r(){return!1}function a(){}function s(){var o=[{name:"number",test:function(te){return typeof te=="number"}},{name:"string",test:function(te){return typeof te=="string"}},{name:"boolean",test:function(te){return typeof te=="boolean"}},{name:"Function",test:function(te){return typeof te=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(te){return te instanceof Date}},{name:"RegExp",test:function(te){return te instanceof RegExp}},{name:"Object",test:function(te){return typeof te=="object"&&te!==null&&te.constructor===Object}},{name:"null",test:function(te){return te===null}},{name:"undefined",test:function(te){return te===void 0}}],u={name:"any",test:n},l=[],f=[],c={types:o,conversions:f,ignore:l};function p(te){var $=Ee(c.types,function(ae){return ae.name===te});if($)return $;if(te==="any")return u;var B=Ee(c.types,function(ae){return ae.name.toLowerCase()===te.toLowerCase()});throw new TypeError('Unknown type "'+te+'"'+(B?'. Did you mean "'+B.name+'"?':""))}function d(te){return te===u?999:c.types.indexOf(te)}function h(te){var $=Ee(c.types,function(B){return B.test(te)});if($)return $.name;throw new TypeError("Value has unknown type. Value: "+te)}function m(te,$){if(!te.signatures)throw new TypeError("Function is no typed-function");var B;if(typeof $=="string"){B=$.split(",");for(var ae=0;ae<B.length;ae++)B[ae]=B[ae].trim()}else if(Array.isArray($))B=$;else throw new TypeError("String array or a comma separated string expected");var ue=B.join(","),_e=te.signatures[ue];if(_e)return _e;throw new TypeError("Signature not found (signature: "+(te.name||"unnamed")+"("+B.join(", ")+"))")}function v(te,$){var B=h(te);if($===B)return te;for(var ae=0;ae<c.conversions.length;ae++){var ue=c.conversions[ae];if(ue.from===B&&ue.to===$)return ue.convert(te)}throw new Error("Cannot convert from "+B+" to "+$)}function g(te){return te.map(function($){var B=$.types.map(C);return($.restParam?"...":"")+B.join("|")}).join(",")}function y(te,$){var B=te.indexOf("...")===0,ae=B?te.length>3?te.slice(3):"any":te,ue=ae.split("|").map(ie).filter(K).filter(Y),_e=F($,ue),be=ue.map(function(Te){var Ie=p(Te);return{name:Te,typeIndex:d(Ie),test:Ie.test,conversion:null,conversionIndex:-1}}),Pe=_e.map(function(Te){var Ie=p(Te.from);return{name:Te.from,typeIndex:d(Ie),test:Ie.test,conversion:Te,conversionIndex:$.indexOf(Te)}});return{types:be.concat(Pe),restParam:B}}function _(te,$,B){var ae=[];return te.trim()!==""&&(ae=te.split(",").map(ie).map(function(ue,_e,be){var Pe=y(ue,B);if(Pe.restParam&&_e!==be.length-1)throw new SyntaxError('Unexpected rest parameter "'+ue+'": only allowed for the last parameter');return Pe})),ae.some(oe)?null:{params:ae,fn:$}}function x(te){var $=me(te);return $?$.restParam:!1}function M(te){return te.types.some(function($){return $.conversion!=null})}function A(te){if(!te||te.types.length===0)return n;if(te.types.length===1)return p(te.types[0].name).test;if(te.types.length===2){var $=p(te.types[0].name).test,B=p(te.types[1].name).test;return function(_e){return $(_e)||B(_e)}}else{var ae=te.types.map(function(ue){return p(ue.name).test});return function(_e){for(var be=0;be<ae.length;be++)if(ae[be](_e))return!0;return!1}}}function E(te){var $,B,ae;if(x(te)){$=ce(te).map(A);var ue=$.length,_e=A(me(te)),be=function(Pe){for(var Te=ue;Te<Pe.length;Te++)if(!_e(Pe[Te]))return!1;return!0};return function(Te){for(var Ie=0;Ie<$.length;Ie++)if(!$[Ie](Te[Ie]))return!1;return be(Te)&&Te.length>=ue+1}}else return te.length===0?function(Te){return Te.length===0}:te.length===1?(B=A(te[0]),function(Te){return B(Te[0])&&Te.length===1}):te.length===2?(B=A(te[0]),ae=A(te[1]),function(Te){return B(Te[0])&&ae(Te[1])&&Te.length===2}):($=te.map(A),function(Te){for(var Ie=0;Ie<$.length;Ie++)if(!$[Ie](Te[Ie]))return!1;return Te.length===$.length})}function N(te,$){return $<te.params.length?te.params[$]:x(te.params)?me(te.params):null}function D(te,$,B){var ae=N(te,$),ue=ae?B?ae.types.filter(T):ae.types:[];return ue.map(C)}function C(te){return te.name}function T(te){return te.conversion===null||te.conversion===void 0}function P(te,$){var B=ne(se(te,function(ae){return D(ae,$,!1)}));return B.indexOf("any")!==-1?["any"]:B}function I(te,$,B){var ae,ue,_e=te||"unnamed",be=B,Pe;for(Pe=0;Pe<$.length;Pe++){var Te=be.filter(function(He){var Qe=A(N(He,Pe));return(Pe<He.params.length||x(He.params))&&Qe($[Pe])});if(Te.length===0){if(ue=P(be,Pe),ue.length>0){var Ie=h($[Pe]);return ae=new TypeError("Unexpected type of argument in function "+_e+" (expected: "+ue.join(" or ")+", actual: "+Ie+", index: "+Pe+")"),ae.data={category:"wrongType",fn:_e,index:Pe,actual:Ie,expected:ue},ae}}else be=Te}var Oe=be.map(function(He){return x(He.params)?1/0:He.params.length});if($.length<Math.min.apply(null,Oe))return ue=P(be,Pe),ae=new TypeError("Too few arguments in function "+_e+" (expected: "+ue.join(" or ")+", index: "+$.length+")"),ae.data={category:"tooFewArgs",fn:_e,index:$.length,expected:ue},ae;var Be=Math.max.apply(null,Oe);return $.length>Be?(ae=new TypeError("Too many arguments in function "+_e+" (expected: "+Be+", actual: "+$.length+")"),ae.data={category:"tooManyArgs",fn:_e,index:$.length,expectedLength:Be},ae):(ae=new TypeError('Arguments of type "'+$.join(", ")+'" do not match any of the defined signatures of function '+_e+"."),ae.data={category:"mismatch",actual:$.map(h)},ae)}function U(te){for(var $=999,B=0;B<te.types.length;B++)T(te.types[B])&&($=Math.min($,te.types[B].typeIndex));return $}function q(te){for(var $=999,B=0;B<te.types.length;B++)T(te.types[B])||($=Math.min($,te.types[B].conversionIndex));return $}function z(te,$){var B;return B=te.restParam-$.restParam,B!==0||(B=M(te)-M($),B!==0)||(B=U(te)-U($),B!==0)?B:q(te)-q($)}function G(te,$){var B=Math.min(te.params.length,$.params.length),ae,ue;if(ue=te.params.some(M)-$.params.some(M),ue!==0)return ue;for(ae=0;ae<B;ae++)if(ue=M(te.params[ae])-M($.params[ae]),ue!==0)return ue;for(ae=0;ae<B;ae++)if(ue=z(te.params[ae],$.params[ae]),ue!==0)return ue;return te.params.length-$.params.length}function F(te,$){var B={};return te.forEach(function(ae){$.indexOf(ae.from)===-1&&$.indexOf(ae.to)!==-1&&!B[ae.from]&&(B[ae.from]=ae)}),Object.keys(B).map(function(ae){return B[ae]})}function k(te,$){var B=$;if(te.some(M)){var ae=x(te),ue=te.map(O);B=function(){for(var Te=[],Ie=ae?arguments.length-1:arguments.length,Oe=0;Oe<Ie;Oe++)Te[Oe]=ue[Oe](arguments[Oe]);return ae&&(Te[Ie]=arguments[Ie].map(ue[Ie])),$.apply(null,Te)}}var _e=B;if(x(te)){var be=te.length-1;_e=function(){return B.apply(null,Se(arguments,0,be).concat([Se(arguments,be)]))}}return _e}function O(te){var $,B,ae,ue,_e=[],be=[];switch(te.types.forEach(function(Pe){Pe.conversion&&(_e.push(p(Pe.conversion.from).test),be.push(Pe.conversion.convert))}),be.length){case 0:return function(Te){return Te};case 1:return $=_e[0],ae=be[0],function(Te){return $(Te)?ae(Te):Te};case 2:return $=_e[0],B=_e[1],ae=be[0],ue=be[1],function(Te){return $(Te)?ae(Te):B(Te)?ue(Te):Te};default:return function(Te){for(var Ie=0;Ie<be.length;Ie++)if(_e[Ie](Te))return be[Ie](Te);return Te}}}function W(te){var $={};return te.forEach(function(B){B.params.some(M)||X(B.params,!0).forEach(function(ae){$[g(ae)]=B.fn})}),$}function X(te,$){function B(ae,ue,_e){if(ue<ae.length){var be=ae[ue],Pe=$?be.types.filter(T):be.types,Te;if(be.restParam){var Ie=Pe.filter(T);Te=Ie.length<Pe.length?[Ie,Pe]:[Pe]}else Te=Pe.map(function(Be){return[Be]});return se(Te,function(Be){return B(ae,ue+1,_e.concat([Be]))})}else{var Oe=_e.map(function(Be,He){return{types:Be,restParam:He===ae.length-1&&x(ae)}});return[Oe]}}return B(te,0,[])}function ee(te,$){for(var B=Math.max(te.params.length,$.params.length),ae=0;ae<B;ae++){var ue=D(te,ae,!0),_e=D($,ae,!0);if(!Q(ue,_e))return!1}var be=te.params.length,Pe=$.params.length,Te=x(te.params),Ie=x($.params);return Te?Ie?be===Pe:Pe>=be:Ie?be>=Pe:be===Pe}function J(te,$){if(Object.keys($).length===0)throw new SyntaxError("No signatures provided");var B=[];Object.keys($).map(function(Sn){return _(Sn,$[Sn],c.conversions)}).filter(re).forEach(function(Sn){var er=Ee(B,function(Pr){return ee(Pr,Sn)});if(er)throw new TypeError('Conflicting signatures "'+g(er.params)+'" and "'+g(Sn.params)+'".');B.push(Sn)});var ae=se(B,function(Sn){var er=Sn?X(Sn.params,!1):[];return er.map(function(Pr){return{params:Pr,fn:Sn.fn}})}).filter(re);ae.sort(G);var ue=ae[0]&&ae[0].params.length<=2&&!x(ae[0].params),_e=ae[1]&&ae[1].params.length<=2&&!x(ae[1].params),be=ae[2]&&ae[2].params.length<=2&&!x(ae[2].params),Pe=ae[3]&&ae[3].params.length<=2&&!x(ae[3].params),Te=ae[4]&&ae[4].params.length<=2&&!x(ae[4].params),Ie=ae[5]&&ae[5].params.length<=2&&!x(ae[5].params),Oe=ue&&_e&&be&&Pe&&Te&&Ie,Be=ae.map(function(Sn){return E(Sn.params)}),He=ue?A(ae[0].params[0]):r,Qe=_e?A(ae[1].params[0]):r,et=be?A(ae[2].params[0]):r,Xe=Pe?A(ae[3].params[0]):r,je=Te?A(ae[4].params[0]):r,we=Ie?A(ae[5].params[0]):r,V=ue?A(ae[0].params[1]):r,j=_e?A(ae[1].params[1]):r,pe=be?A(ae[2].params[1]):r,he=Pe?A(ae[3].params[1]):r,Ae=Te?A(ae[4].params[1]):r,Fe=Ie?A(ae[5].params[1]):r,qe=ae.map(function(Sn){return k(Sn.params,Sn.fn)}),Ze=ue?qe[0]:a,it=_e?qe[1]:a,ot=be?qe[2]:a,tt=Pe?qe[3]:a,Nt=Te?qe[4]:a,Xt=Ie?qe[5]:a,Ln=ue?ae[0].params.length:-1,Hn=_e?ae[1].params.length:-1,br=be?ae[2].params.length:-1,Un=Pe?ae[3].params.length:-1,Rr=Te?ae[4].params.length:-1,ar=Ie?ae[5].params.length:-1,Xr=Oe?6:0,Fn=ae.length,sr=function(){for(var er=Xr;er<Fn;er++)if(Be[er](arguments))return qe[er].apply(null,arguments);throw I(te,arguments,ae)},Ir=function(er,Pr){return arguments.length===Ln&&He(er)&&V(Pr)?Ze.apply(null,arguments):arguments.length===Hn&&Qe(er)&&j(Pr)?it.apply(null,arguments):arguments.length===br&&et(er)&&pe(Pr)?ot.apply(null,arguments):arguments.length===Un&&Xe(er)&&he(Pr)?tt.apply(null,arguments):arguments.length===Rr&&je(er)&&Ae(Pr)?Nt.apply(null,arguments):arguments.length===ar&&we(er)&&Fe(Pr)?Xt.apply(null,arguments):sr.apply(null,arguments)};try{Object.defineProperty(Ir,"name",{value:te})}catch{}return Ir.signatures=W(ae),Ir}function Y(te){return c.ignore.indexOf(te)===-1}function ie(te){return te.trim()}function K(te){return!!te}function re(te){return te!==null}function oe(te){return te.types.length===0}function ce(te){return te.slice(0,te.length-1)}function me(te){return te[te.length-1]}function Se(te,$,B){return Array.prototype.slice.call(te,$,B)}function le(te,$){return te.indexOf($)!==-1}function Q(te,$){for(var B=0;B<te.length;B++)if(le($,te[B]))return!0;return!1}function Ee(te,$){for(var B=0;B<te.length;B++)if($(te[B]))return te[B]}function ne(te){for(var $={},B=0;B<te.length;B++)$[te[B]]=!0;return Object.keys($)}function se(te,$){return Array.prototype.concat.apply([],te.map($))}function xe(te){for(var $="",B=0;B<te.length;B++){var ae=te[B];if((typeof ae.signatures=="object"||typeof ae.signature=="string")&&ae.name!==""){if($==="")$=ae.name;else if($!==ae.name){var ue=new Error("Function names do not match (expected: "+$+", actual: "+ae.name+")");throw ue.data={actual:ae.name,expected:$},ue}}}return $}function ve(te){var $,B={};function ae(Pe,Te){if(B.hasOwnProperty(Pe)&&Te!==B[Pe])throw $=new Error('Signature "'+Pe+'" is defined twice'),$.data={signature:Pe},$}for(var ue=0;ue<te.length;ue++){var _e=te[ue];if(typeof _e.signatures=="object")for(var be in _e.signatures)_e.signatures.hasOwnProperty(be)&&(ae(be,_e.signatures[be]),B[be]=_e.signatures[be]);else if(typeof _e.signature=="string")ae(_e.signature,_e),B[_e.signature]=_e;else throw $=new TypeError("Function is no typed-function (index: "+ue+")"),$.data={index:ue},$}return B}return c=J("typed",{"string, Object":J,Object:function(te){var $=[];for(var B in te)te.hasOwnProperty(B)&&$.push(te[B]);var ae=xe($);return J(ae,te)},"...Function":function(te){return J(xe(te),ve(te))},"string, ...Function":function(te,$){return J(te,ve($))}}),c.create=s,c.types=o,c.conversions=f,c.ignore=l,c.convert=v,c.find=m,c.addType=function(te,$){if(!te||typeof te.name!="string"||typeof te.test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");if($!==!1){for(var B=0;B<c.types.length;B++)if(c.types[B].name==="Object"){c.types.splice(B,0,te);return}}c.types.push(te)},c.addConversion=function(te){if(!te||typeof te.from!="string"||typeof te.to!="string"||typeof te.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");c.conversions.push(te)},c}return s()})})(WW);var vle=WW.exports;const Az=Au(vle);function Ot(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}var Uf=Math.sign||function(t){return t>0?1:t<0?-1:0},gle=Math.log2||function(e){return Math.log(e)/Math.LN2},yle=Math.log10||function(e){return Math.log(e)/Math.LN10},xle=Math.log1p||function(t){return Math.log(t+1)},ble=Math.cbrt||function(e){if(e===0)return e;var n=e<0,r;return n&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,n?-r:r},Sle=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Ld(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var n="auto",r;switch(e&&(e.notation&&(n=e.notation),pn(e)?r=e:pn(e.precision)&&(r=e.precision)),n){case"fixed":return $W(t,r);case"exponential":return jW(t,r);case"engineering":return wle(t,r);case"auto":if(e&&e.exponential&&(e.exponential.lower!==void 0||e.exponential.upper!==void 0)){var a=Td(e,function(s){return s});return a.exponential=void 0,e.exponential.lower!==void 0&&(a.lowerExp=Math.round(Math.log(e.exponential.lower)/Math.LN10)),e.exponential.upper!==void 0&&(a.upperExp=Math.round(Math.log(e.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(e)+" with "+JSON.stringify(a)),Nz(t,r,a)}return Nz(t,r,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", or "fixed".')}}function bM(t){var e=String(t).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],a=parseFloat(e[4]||"0"),s=r.indexOf(".");a+=s!==-1?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(u){return a-=u.length,""}).replace(/0*$/,"").split("").map(function(u){return parseInt(u)});return o.length===0&&(o.push(0),a++),{sign:n,coefficients:o,exponent:a}}function wle(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=bM(t),r=SM(n,e),a=r.exponent,s=r.coefficients,o=a%3===0?a:a<0?a-3-a%3:a-a%3;if(pn(e))for(;e>s.length||a-o+1>s.length;)s.push(0);else for(var u=Math.abs(a-o)-(s.length-1),l=0;l<u;l++)s.push(0);for(var f=Math.abs(a-o),c=1;f>0;)c++,f--;var p=s.slice(c).join(""),d=pn(e)&&p.length||p.match(/[1-9]/)?"."+p:"",h=s.slice(0,c).join("")+d+"e"+(a>=0?"+":"")+o.toString();return r.sign+h}function $W(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=bM(t),r=typeof e=="number"?SM(n,n.exponent+1+e):n,a=r.coefficients,s=r.exponent+1,o=s+(e||0);return a.length<o&&(a=a.concat(pm(o-a.length))),s<0&&(a=pm(-s+1).concat(a),s=1),s<a.length&&a.splice(s,0,s===0?"0.":"."),r.sign+a.join("")}function jW(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=bM(t),r=e?SM(n,e):n,a=r.coefficients,s=r.exponent;a.length<e&&(a=a.concat(pm(e-a.length)));var o=a.shift();return r.sign+o+(a.length>0?"."+a.join(""):"")+"e"+(s>=0?"+":"")+s}function Nz(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=n&&n.lowerExp!==void 0?n.lowerExp:-3,a=n&&n.upperExp!==void 0?n.upperExp:5,s=bM(t),o=e?SM(s,e):s;if(o.exponent<r||o.exponent>=a)return jW(t,e);var u=o.coefficients,l=o.exponent;u.length<e&&(u=u.concat(pm(e-u.length))),u=u.concat(pm(l-u.length+1+(u.length<e?e-u.length:0))),u=pm(-l).concat(u);var f=l>0?l:0;return f<u.length-1&&u.splice(f+1,0,"."),o.sign+u.join("")}function SM(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var a=r.splice(e,r.length-e);if(a[0]>=5){var s=e-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function pm(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function _le(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Mle=Number.EPSILON||2220446049250313e-31;function bu(t,e,n){if(n==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var r=Math.abs(t-e);return r<Mle?!0:r<=Math.max(Math.abs(t),Math.abs(e))*n}return!1}var Ele=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},Tle=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},Ale=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},Nle=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},Cle=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},Dle=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function XW(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var n="auto",r;switch(e!==void 0&&(e.notation&&(n=e.notation),typeof e=="number"?r=e:e.precision&&(r=e.precision)),n){case"fixed":return Ile(t,r);case"exponential":return Cz(t,r);case"engineering":return Rle(t,r);case"auto":{if(e&&e.exponential&&(e.exponential.lower!==void 0||e.exponential.upper!==void 0)){var a=Td(e,function(c){return c});return a.exponential=void 0,e.exponential.lower!==void 0&&(a.lowerExp=Math.round(Math.log(e.exponential.lower)/Math.LN10)),e.exponential.upper!==void 0&&(a.upperExp=Math.round(Math.log(e.exponential.upper)/Math.LN10)),console.warn("Deprecation warning: Formatting options exponential.lower and exponential.upper (minimum and maximum value) are replaced with exponential.lowerExp and exponential.upperExp (minimum and maximum exponent) since version 4.0.0. Replace "+JSON.stringify(e)+" with "+JSON.stringify(a)),XW(t,a)}var s=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var u,l=t.toSignificantDigits(r),f=l.e;return f>=s&&f<o?u=l.toFixed():u=Cz(t,r),u.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],p=arguments[4];return c!=="."?c+p:p})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", or "fixed".')}}function Rle(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,a=t.mul(Math.pow(10,-r)),s=a.toPrecision(e);return s.indexOf("e")!==-1&&(s=a.toString()),s+"e"+(n>=0?"+":"")+r.toString()}function Cz(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Ile(t,e){return t.toFixed(e)}function Wg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wg=function(n){return typeof n}:Wg=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wg(t)}function Ple(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e}function mn(t,e){if(typeof t=="number")return Ld(t,e);if(Jt(t))return XW(t,e);if(Ole(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return YW(t,e);if(Ca(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&Wg(t)==="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(function(r){return'"'+r+'": '+mn(t[r],e)});return"{"+n.join(", ")+"}"}return String(t)}function Wb(t){for(var e=String(t),n="",r=0;r<e.length;){var a=e.charAt(r);a==="\\"?(n+=a,r++,a=e.charAt(r),(a===""||'"\\/bfnrtu'.indexOf(a)===-1)&&(n+="\\"),n+=a):a==='"'?n+='\\"':n+=a,r++}return'"'+n+'"'}function Lo(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function YW(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,a=0;a<r;a++)a!==0&&(n+=", "),n+=YW(t[a],e);return n+="]",n}else return mn(t,e)}function Ole(t){return t&&Wg(t)==="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function s0(t,e){if(!Ca(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+ur(t)+", index: 0)");if(!Ca(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+ur(e)+", index: 1)");return t===e?0:t>e?1:-1}function nn(t,e,n){if(!(this instanceof nn))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}nn.prototype=new RangeError;nn.prototype.constructor=RangeError;nn.prototype.name="DimensionError";nn.prototype.isDimensionError=!0;function po(t,e,n){if(!(this instanceof po))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}po.prototype=new RangeError;po.prototype.constructor=RangeError;po.prototype.name="IndexError";po.prototype.isIndexError=!0;function yn(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function QW(t,e,n){var r,a=t.length;if(a!==e[n])throw new nn(a,e[n]);if(n<e.length-1){var s=n+1;for(r=0;r<a;r++){var o=t[r];if(!Array.isArray(o))throw new nn(e.length-1,e.length,"<");QW(t[r],e,s)}}else for(r=0;r<a;r++)if(Array.isArray(t[r]))throw new nn(e.length+1,e.length,">")}function Dz(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new nn(t.length,0)}else QW(t,e,0)}function _r(t,e){if(!pn(t)||!Ot(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new po(t,e)}function Mm(t,e,n){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(a){if(!pn(a)||!Ot(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+mn(e)+")")});var r=n!==void 0?n:0;return qO(t,e,0,r),t}function qO(t,e,n,r){var a,s,o=t.length,u=e[n],l=Math.min(o,u);if(t.length=u,n<e.length-1){var f=n+1;for(a=0;a<l;a++)s=t[a],Array.isArray(s)||(s=[s],t[a]=s),qO(s,e,f,r);for(a=l;a<u;a++)s=[],t[a]=s,qO(s,e,f,r)}else{for(a=0;a<l;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=l;a<u;a++)t[a]=r}}function GO(t,e){var n=kn(t),r;function a(u){return u.reduce(function(l,f){return l*f})}if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new nn(0,a(yn(t)),"!=");for(var s=1,o=0;o<e.length;o++)s*=e[o];if(n.length!==s)throw new nn(a(e),a(yn(t)),"!=");try{r=Lle(n,e)}catch(u){throw u instanceof nn?new nn(a(e),a(yn(t)),"!="):u}return r}function Lle(t,e){for(var n=t,r,a=e.length-1;a>0;a--){var s=e[a];r=[];for(var o=n.length/s,u=0;u<o;u++)r.push(n.slice(u*s,(u+1)*s));n=r}return n}function nw(t,e){for(var n=yn(t);Array.isArray(t)&&t.length===1;)t=t[0],n.shift();for(var r=n.length;n[r-1]===1;)r--;return r<n.length&&(t=ZW(t,r,0),n.length=r),t}function ZW(t,e,n){var r,a;if(n<e){var s=n+1;for(r=0,a=t.length;r<a;r++)t[r]=ZW(t[r],e,s)}else for(;Array.isArray(t);)t=t[0];return t}function JW(t,e,n,r){var a=r||yn(t);if(n)for(var s=0;s<n;s++)t=[t],a.unshift(1);for(t=KW(t,e,0);a.length<e;)a.push(1);return t}function KW(t,e,n){var r,a;if(Array.isArray(t)){var s=n+1;for(r=0,a=t.length;r<a;r++)t[r]=KW(t[r],e,s)}else for(var o=n;o<e;o++)t=[t];return t}function kn(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function n(r){Array.isArray(r)?r.forEach(n):e.push(r)}),e}function Js(t,e){return Array.prototype.map.call(t,e)}function wM(t,e){Array.prototype.forEach.call(t,e)}function e$(t,e){if(yn(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function rw(t,e){if(yn(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,function(n){return e.test(n)})}function Rz(t,e){return Array.prototype.join.call(t,e)}function Em(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e}function iw(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e}function Ly(t,e){for(var n,r=0,a=0;a<t.length;a++){var s=t[a],o=Array.isArray(s);if(a===0&&o&&(r=s.length),o&&s.length!==r)return;var u=o?Ly(s,e):e(s);if(n===void 0)n=u;else if(n!==u)return"mixed"}return n}function kle(t){return t[t.length-1]}function Ule(t){return t.slice(0,t.length-1)}function Iz(t,e){return t.indexOf(e)!==-1}function ye(t,e,n,r){function a(s){var o=ple(s,e.map(t$));return Fle(t,e,s),n(o)}return a.isFactory=!0,a.fn=t,a.dependencies=e.slice().sort(),r&&(a.meta=r),a}function $g(t){return typeof t=="function"&&typeof t.fn=="string"&&Array.isArray(t.dependencies)}function Fle(t,e,n){var r=e.filter(function(s){return!Ble(s)}).every(function(s){return n[s]!==void 0});if(!r){var a=e.filter(function(s){return n[s]===void 0});throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(a.map(function(s){return'"'.concat(s,'"')}).join(", "),"."))}}function Ble(t){return t&&t[0]==="?"}function t$(t){return t&&t[0]==="?"?t.slice(1):t}var n$=function(){return n$=Az.create,Az},zle=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],_M=ye("typed",zle,function(e){var n=e.BigNumber,r=e.Complex,a=e.DenseMatrix,s=e.Fraction,o=n$();return o.types=[{name:"number",test:pn},{name:"Complex",test:qo},{name:"BigNumber",test:Jt},{name:"Fraction",test:kc},{name:"Unit",test:Uc},{name:"string",test:Ca},{name:"Chain",test:Jm},{name:"Array",test:zn},{name:"Matrix",test:Dn},{name:"DenseMatrix",test:Qd},{name:"SparseMatrix",test:sc},{name:"Range",test:mh},{name:"Index",test:vp},{name:"boolean",test:lM},{name:"ResultSet",test:A1},{name:"Help",test:Zm},{name:"function",test:cM},{name:"Date",test:fM},{name:"RegExp",test:pM},{name:"null",test:hM},{name:"undefined",test:mM},{name:"AccessorNode",test:gc},{name:"ArrayNode",test:N1},{name:"AssignmentNode",test:vM},{name:"BlockNode",test:gM},{name:"ConditionalNode",test:yM},{name:"ConstantNode",test:tr},{name:"FunctionNode",test:yp},{name:"FunctionAssignmentNode",test:gp},{name:"IndexNode",test:vh},{name:"Node",test:Cn},{name:"ObjectNode",test:C1},{name:"OperatorNode",test:Gi},{name:"ParenthesisNode",test:sl},{name:"RangeNode",test:D1},{name:"SymbolNode",test:ri},{name:"Object",test:dM}],o.conversions=[{from:"number",to:"BigNumber",convert:function(l){if(n||xI(l),_le(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new n(l)}},{from:"number",to:"Complex",convert:function(l){return r||$b(l),new r(l,0)}},{from:"number",to:"string",convert:function(l){return l+""}},{from:"BigNumber",to:"Complex",convert:function(l){return r||$b(l),new r(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return r||$b(l),new r(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){s||bI(l);var f=new s(l);if(f.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return f}},{from:"string",to:"number",convert:function(l){var f=Number(l);if(isNaN(f))throw new Error('Cannot convert "'+l+'" to a number');return f}},{from:"string",to:"BigNumber",convert:function(l){n||xI(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){s||bI(l);try{return new s(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){r||$b(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return n||xI(l),new n(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return s||bI(l),new s(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return a||qle(),new a(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}],o});function xI(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function $b(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function qle(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function bI(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var Gle="ResultSet",Hle=[],MM=ye(Gle,Hle,function(){function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Y0=9e15,xp=1e9,HO="0123456789abcdef",aw="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",sw="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",VO={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Y0,maxE:Y0,crypto:!1},r$,oc,en=!0,EM="[DecimalError] ",ep=EM+"Invalid argument: ",i$=EM+"Precision limit exceeded",a$=EM+"crypto unavailable",s$="[object Decimal]",Ua=Math.floor,Di=Math.pow,Vle=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Wle=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$le=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,o$=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,gu=1e7,Wt=7,jle=9007199254740991,Xle=aw.length-1,WO=sw.length-1,st={toStringTag:s$};st.absoluteValue=st.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ft(t)};st.ceil=function(){return Ft(new this.constructor(this),this.e+1,2)};st.clampedTo=st.clamp=function(t,e){var n,r=this,a=r.constructor;if(t=new a(t),e=new a(e),!t.s||!e.s)return new a(NaN);if(t.gt(e))throw Error(ep+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new a(r)};st.comparedTo=st.cmp=function(t){var e,n,r,a,s=this,o=s.d,u=(t=new s.constructor(t)).d,l=s.s,f=t.s;if(!o||!u)return!l||!f?NaN:l!==f?l:o===u?0:!o^l<0?1:-1;if(!o[0]||!u[0])return o[0]?l:u[0]?-f:0;if(l!==f)return l;if(s.e!==t.e)return s.e>t.e^l<0?1:-1;for(r=o.length,a=u.length,e=0,n=r<a?r:a;e<n;++e)if(o[e]!==u[e])return o[e]>u[e]^l<0?1:-1;return r===a?0:r>a^l<0?1:-1};st.cosine=st.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Wt,r.rounding=1,n=Yle(r,p$(r,n)),r.precision=t,r.rounding=e,Ft(oc==2||oc==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};st.cubeRoot=st.cbrt=function(){var t,e,n,r,a,s,o,u,l,f,c=this,p=c.constructor;if(!c.isFinite()||c.isZero())return new p(c);for(en=!1,s=c.s*Di(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=oa(c.d),t=c.e,(s=(t-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=Di(n,1/3),t=Ua((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?n="5e"+t:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new p(n),r.s=c.s):r=new p(s.toString()),o=(t=p.precision)+3;;)if(u=r,l=u.times(u).times(u),f=l.plus(c),r=yr(f.plus(c).times(u),f.plus(l),o+2,1),oa(u.d).slice(0,o)===(n=oa(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!a&&n=="4999"){if(!a&&(Ft(u,t+1,0),u.times(u).times(u).eq(c))){r=u;break}o+=4,a=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Ft(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return en=!0,Ft(r,t,p.rounding,e)};st.decimalPlaces=st.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Ua(this.e/Wt))*Wt,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};st.dividedBy=st.div=function(t){return yr(this,new this.constructor(t))};st.dividedToIntegerBy=st.divToInt=function(t){var e=this,n=e.constructor;return Ft(yr(e,new n(t),0,1,1),n.precision,n.rounding)};st.equals=st.eq=function(t){return this.cmp(t)===0};st.floor=function(){return Ft(new this.constructor(this),this.e+1,3)};st.greaterThan=st.gt=function(t){return this.cmp(t)>0};st.greaterThanOrEqualTo=st.gte=function(t){var e=this.cmp(t);return e==1||e===0};st.hyperbolicCosine=st.cosh=function(){var t,e,n,r,a,s=this,o=s.constructor,u=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return u;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,a=s.d.length,a<32?(t=Math.ceil(a/3),e=(1/AM(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),s=Tm(o,1,s.times(e),new o(1),!0);for(var l,f=t,c=new o(8);f--;)l=s.times(s),s=u.minus(l.times(c.minus(l.times(c))));return Ft(s,o.precision=n,o.rounding=r,!0)};st.hyperbolicSine=st.sinh=function(){var t,e,n,r,a=this,s=a.constructor;if(!a.isFinite()||a.isZero())return new s(a);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(a.e,a.sd())+4,s.rounding=1,r=a.d.length,r<3)a=Tm(s,2,a,a,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,a=a.times(1/AM(5,t)),a=Tm(s,2,a,a,!0);for(var o,u=new s(5),l=new s(16),f=new s(20);t--;)o=a.times(a),a=a.times(u.plus(o.times(l.times(o).plus(f))))}return s.precision=e,s.rounding=n,Ft(a,e,n,!0)};st.hyperbolicTangent=st.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,yr(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};st.inverseCosine=st.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),a=n.precision,s=n.rounding;return r!==-1?r===0?e.isNeg()?hu(n,a,s):new n(0):new n(NaN):e.isZero()?hu(n,a+4,s).times(.5):(n.precision=a+6,n.rounding=1,e=e.asin(),t=hu(n,a+4,s).times(.5),n.precision=a,n.rounding=s,t.minus(e))};st.inverseHyperbolicCosine=st.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,en=!1,n=n.times(n).minus(1).sqrt().plus(n),en=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};st.inverseHyperbolicSine=st.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,en=!1,n=n.times(n).plus(1).sqrt().plus(n),en=!0,r.precision=t,r.rounding=e,n.ln())};st.inverseHyperbolicTangent=st.atanh=function(){var t,e,n,r,a=this,s=a.constructor;return a.isFinite()?a.e>=0?new s(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(t=s.precision,e=s.rounding,r=a.sd(),Math.max(r,t)<2*-a.e-1?Ft(new s(a),t,e,!0):(s.precision=n=r-a.e,a=yr(a.plus(1),new s(1).minus(a),n+t,1),s.precision=t+4,s.rounding=1,a=a.ln(),s.precision=t,s.rounding=e,a.times(.5))):new s(NaN)};st.inverseSine=st.asin=function(){var t,e,n,r,a=this,s=a.constructor;return a.isZero()?new s(a):(e=a.abs().cmp(1),n=s.precision,r=s.rounding,e!==-1?e===0?(t=hu(s,n+4,r).times(.5),t.s=a.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,a=a.div(new s(1).minus(a.times(a)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,a.times(2)))};st.inverseTangent=st.atan=function(){var t,e,n,r,a,s,o,u,l,f=this,c=f.constructor,p=c.precision,d=c.rounding;if(f.isFinite()){if(f.isZero())return new c(f);if(f.abs().eq(1)&&p+4<=WO)return o=hu(c,p+4,d).times(.25),o.s=f.s,o}else{if(!f.s)return new c(NaN);if(p+4<=WO)return o=hu(c,p+4,d).times(.5),o.s=f.s,o}for(c.precision=u=p+10,c.rounding=1,n=Math.min(28,u/Wt+2|0),t=n;t;--t)f=f.div(f.times(f).plus(1).sqrt().plus(1));for(en=!1,e=Math.ceil(u/Wt),r=1,l=f.times(f),o=new c(f),a=f;t!==-1;)if(a=a.times(l),s=o.minus(a.div(r+=2)),a=a.times(l),o=s.plus(a.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===s.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),en=!0,Ft(o,c.precision=p,c.rounding=d,!0)};st.isFinite=function(){return!!this.d};st.isInteger=st.isInt=function(){return!!this.d&&Ua(this.e/Wt)>this.d.length-2};st.isNaN=function(){return!this.s};st.isNegative=st.isNeg=function(){return this.s<0};st.isPositive=st.isPos=function(){return this.s>0};st.isZero=function(){return!!this.d&&this.d[0]===0};st.lessThan=st.lt=function(t){return this.cmp(t)<0};st.lessThanOrEqualTo=st.lte=function(t){return this.cmp(t)<1};st.logarithm=st.log=function(t){var e,n,r,a,s,o,u,l,f=this,c=f.constructor,p=c.precision,d=c.rounding,h=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=f.d,f.s<0||!n||!n[0]||f.eq(1))return new c(n&&!n[0]?-1/0:f.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(a=n[0];a%10===0;)a/=10;s=a!==1}if(en=!1,u=p+h,o=Ff(f,u),r=e?ow(c,u+10):Ff(t,u),l=yr(o,r,u,1),ky(l.d,a=p,d))do if(u+=10,o=Ff(f,u),r=e?ow(c,u+10):Ff(t,u),l=yr(o,r,u,1),!s){+oa(l.d).slice(a+1,a+15)+1==1e14&&(l=Ft(l,p+1,0));break}while(ky(l.d,a+=10,d));return en=!0,Ft(l,p,d)};st.minus=st.sub=function(t){var e,n,r,a,s,o,u,l,f,c,p,d,h=this,m=h.constructor;if(t=new m(t),!h.d||!t.d)return!h.s||!t.s?t=new m(NaN):h.d?t.s=-t.s:t=new m(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(f=h.d,d=t.d,u=m.precision,l=m.rounding,!f[0]||!d[0]){if(d[0])t.s=-t.s;else if(f[0])t=new m(h);else return new m(l===3?-0:0);return en?Ft(t,u,l):t}if(n=Ua(t.e/Wt),c=Ua(h.e/Wt),f=f.slice(),s=c-n,s){for(p=s<0,p?(e=f,s=-s,o=d.length):(e=d,n=c,o=f.length),r=Math.max(Math.ceil(u/Wt),o)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=f.length,o=d.length,p=r<o,p&&(o=r),r=0;r<o;r++)if(f[r]!=d[r]){p=f[r]<d[r];break}s=0}for(p&&(e=f,f=d,d=e,t.s=-t.s),o=f.length,r=d.length-o;r>0;--r)f[o++]=0;for(r=d.length;r>s;){if(f[--r]<d[r]){for(a=r;a&&f[--a]===0;)f[a]=gu-1;--f[a],f[r]+=gu}f[r]-=d[r]}for(;f[--o]===0;)f.pop();for(;f[0]===0;f.shift())--n;return f[0]?(t.d=f,t.e=TM(f,n),en?Ft(t,u,l):t):new m(l===3?-0:0)};st.modulo=st.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Ft(new r(n),r.precision,r.rounding):(en=!1,r.modulo==9?(e=yr(n,t.abs(),0,3,1),e.s*=t.s):e=yr(n,t,0,r.modulo,1),e=e.times(t),en=!0,n.minus(e))};st.naturalExponential=st.exp=function(){return $O(this)};st.naturalLogarithm=st.ln=function(){return Ff(this)};st.negated=st.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ft(t)};st.plus=st.add=function(t){var e,n,r,a,s,o,u,l,f,c,p=this,d=p.constructor;if(t=new d(t),!p.d||!t.d)return!p.s||!t.s?t=new d(NaN):p.d||(t=new d(t.d||p.s===t.s?p:NaN)),t;if(p.s!=t.s)return t.s=-t.s,p.minus(t);if(f=p.d,c=t.d,u=d.precision,l=d.rounding,!f[0]||!c[0])return c[0]||(t=new d(p)),en?Ft(t,u,l):t;if(s=Ua(p.e/Wt),r=Ua(t.e/Wt),f=f.slice(),a=s-r,a){for(a<0?(n=f,a=-a,o=c.length):(n=c,r=s,o=f.length),s=Math.ceil(u/Wt),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=f.length,a=c.length,o-a<0&&(a=o,n=c,c=f,f=n),e=0;a;)e=(f[--a]=f[a]+c[a]+e)/gu|0,f[a]%=gu;for(e&&(f.unshift(e),++r),o=f.length;f[--o]==0;)f.pop();return t.d=f,t.e=TM(f,r),en?Ft(t,u,l):t};st.precision=st.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ep+t);return n.d?(e=u$(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};st.round=function(){var t=this,e=t.constructor;return Ft(new e(t),t.e+1,e.rounding)};st.sine=st.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Wt,r.rounding=1,n=Zle(r,p$(r,n)),r.precision=t,r.rounding=e,Ft(oc>2?n.neg():n,t,e,!0)):new r(NaN)};st.squareRoot=st.sqrt=function(){var t,e,n,r,a,s,o=this,u=o.d,l=o.e,f=o.s,c=o.constructor;if(f!==1||!u||!u[0])return new c(!f||f<0&&(!u||u[0])?NaN:u?o:1/0);for(en=!1,f=Math.sqrt(+o),f==0||f==1/0?(e=oa(u),(e.length+l)%2==0&&(e+="0"),f=Math.sqrt(e),l=Ua((l+1)/2)-(l<0||l%2),f==1/0?e="5e"+l:(e=f.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new c(e)):r=new c(f.toString()),n=(l=c.precision)+3;;)if(s=r,r=s.plus(yr(o,s,n+2,1)).times(.5),oa(s.d).slice(0,n)===(e=oa(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!a&&e=="4999"){if(!a&&(Ft(s,l+1,0),s.times(s).eq(o))){r=s;break}n+=4,a=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ft(r,l+1,1),t=!r.times(r).eq(o));break}return en=!0,Ft(r,l,c.rounding,t)};st.tangent=st.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=yr(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Ft(oc==2||oc==4?n.neg():n,t,e,!0)):new r(NaN)};st.times=st.mul=function(t){var e,n,r,a,s,o,u,l,f,c=this,p=c.constructor,d=c.d,h=(t=new p(t)).d;if(t.s*=c.s,!d||!d[0]||!h||!h[0])return new p(!t.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?t.s/0:t.s*0);for(n=Ua(c.e/Wt)+Ua(t.e/Wt),l=d.length,f=h.length,l<f&&(s=d,d=h,h=s,o=l,l=f,f=o),s=[],o=l+f,r=o;r--;)s.push(0);for(r=f;--r>=0;){for(e=0,a=l+r;a>r;)u=s[a]+h[r]*d[a-r-1]+e,s[a--]=u%gu|0,e=u/gu|0;s[a]=(s[a]+e)%gu|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=TM(s,n),en?Ft(t,p.precision,p.rounding):t};st.toBinary=function(t,e){return eU(this,2,t,e)};st.toDecimalPlaces=st.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Is(t,0,xp),e===void 0?e=r.rounding:Is(e,0,8),Ft(n,t+n.e+1,e))};st.toExponential=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=cl(r,!0):(Is(t,0,xp),e===void 0?e=a.rounding:Is(e,0,8),r=Ft(new a(r),t+1,e),n=cl(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};st.toFixed=function(t,e){var n,r,a=this,s=a.constructor;return t===void 0?n=cl(a):(Is(t,0,xp),e===void 0?e=s.rounding:Is(e,0,8),r=Ft(new s(a),t+a.e+1,e),n=cl(r,!1,t+r.e+1)),a.isNeg()&&!a.isZero()?"-"+n:n};st.toFraction=function(t){var e,n,r,a,s,o,u,l,f,c,p,d,h=this,m=h.d,v=h.constructor;if(!m)return new v(h);if(f=n=new v(1),r=l=new v(0),e=new v(r),s=e.e=u$(m)-h.e-1,o=s%Wt,e.d[0]=Di(10,o<0?Wt+o:o),t==null)t=s>0?e:f;else{if(u=new v(t),!u.isInt()||u.lt(f))throw Error(ep+u);t=u.gt(e)?s>0?e:f:u}for(en=!1,u=new v(oa(m)),c=v.precision,v.precision=s=m.length*Wt*2;p=yr(u,e,0,1,1),a=n.plus(p.times(r)),a.cmp(t)!=1;)n=r,r=a,a=f,f=l.plus(p.times(a)),l=a,a=e,e=u.minus(p.times(a)),u=a;return a=yr(t.minus(n),r,0,1,1),l=l.plus(a.times(f)),n=n.plus(a.times(r)),l.s=f.s=h.s,d=yr(f,r,s,1).minus(h).abs().cmp(yr(l,n,s,1).minus(h).abs())<1?[f,r]:[l,n],v.precision=c,en=!0,d};st.toHexadecimal=st.toHex=function(t,e){return eU(this,16,t,e)};st.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Is(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(en=!1,n=yr(n,t,0,e,1).times(t),en=!0,Ft(n)):(t.s=n.s,n=t),n};st.toNumber=function(){return+this};st.toOctal=function(t,e){return eU(this,8,t,e)};st.toPower=st.pow=function(t){var e,n,r,a,s,o,u=this,l=u.constructor,f=+(t=new l(t));if(!u.d||!t.d||!u.d[0]||!t.d[0])return new l(Di(+u,f));if(u=new l(u),u.eq(1))return u;if(r=l.precision,s=l.rounding,t.eq(1))return Ft(u,r,s);if(e=Ua(t.e/Wt),e>=t.d.length-1&&(n=f<0?-f:f)<=jle)return a=l$(l,u,n,r),t.s<0?new l(1).div(a):Ft(a,r,s);if(o=u.s,o<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(o=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=o,u}return n=Di(+u,f),e=n==0||!isFinite(n)?Ua(f*(Math.log("0."+oa(u.d))/Math.LN10+u.e+1)):new l(n+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(en=!1,l.rounding=u.s=1,n=Math.min(12,(e+"").length),a=$O(t.times(Ff(u,r+n)),r),a.d&&(a=Ft(a,r+5,1),ky(a.d,r,s)&&(e=r+10,a=Ft($O(t.times(Ff(u,e+n)),e),e+5,1),+oa(a.d).slice(r+1,r+15)+1==1e14&&(a=Ft(a,r+1,0)))),a.s=o,en=!0,l.rounding=s,Ft(a,r,s))};st.toPrecision=function(t,e){var n,r=this,a=r.constructor;return t===void 0?n=cl(r,r.e<=a.toExpNeg||r.e>=a.toExpPos):(Is(t,1,xp),e===void 0?e=a.rounding:Is(e,0,8),r=Ft(new a(r),t,e),n=cl(r,t<=r.e||r.e<=a.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};st.toSignificantDigits=st.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Is(t,1,xp),e===void 0?e=r.rounding:Is(e,0,8)),Ft(new r(n),t,e)};st.toString=function(){var t=this,e=t.constructor,n=cl(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};st.truncated=st.trunc=function(){return Ft(new this.constructor(this),this.e+1,1)};st.valueOf=st.toJSON=function(){var t=this,e=t.constructor,n=cl(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function oa(t){var e,n,r,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)r=t[e]+"",n=Wt-r.length,n&&(s+=Nf(n)),s+=r;o=t[e],r=o+"",n=Wt-r.length,n&&(s+=Nf(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Is(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ep+t)}function ky(t,e,n,r){var a,s,o,u;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=Wt,a=0):(a=Math.ceil((e+1)/Wt),e%=Wt),s=Di(10,Wt-e),u=t[a]%s|0,r==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),o=n<4&&u==99999||n>3&&u==49999||u==5e4||u==0):o=(n<4&&u+1==s||n>3&&u+1==s/2)&&(t[a+1]/s/100|0)==Di(10,e-2)-1||(u==s/2||u==0)&&(t[a+1]/s/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),o=(r||n<4)&&u==9999||!r&&n>3&&u==4999):o=((r||n<4)&&u+1==s||!r&&n>3&&u+1==s/2)&&(t[a+1]/s/1e3|0)==Di(10,e-3)-1,o}function c2(t,e,n){for(var r,a=[0],s,o=0,u=t.length;o<u;){for(s=a.length;s--;)a[s]*=e;for(a[0]+=HO.indexOf(t.charAt(o++)),r=0;r<a.length;r++)a[r]>n-1&&(a[r+1]===void 0&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}function Yle(t,e){var n,r,a;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),a=(1/AM(4,n)).toString()):(n=16,a="2.3283064365386962890625e-10"),t.precision+=n,e=Tm(t,1,e.times(a),new t(1));for(var s=n;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var yr=function(){function t(r,a,s){var o,u=0,l=r.length;for(r=r.slice();l--;)o=r[l]*a+u,r[l]=o%s|0,u=o/s|0;return u&&r.unshift(u),r}function e(r,a,s,o){var u,l;if(s!=o)l=s>o?1:-1;else for(u=l=0;u<s;u++)if(r[u]!=a[u]){l=r[u]>a[u]?1:-1;break}return l}function n(r,a,s,o){for(var u=0;s--;)r[s]-=u,u=r[s]<a[s]?1:0,r[s]=u*o+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,o,u,l){var f,c,p,d,h,m,v,g,y,_,x,M,A,E,N,D,C,T,P,I,U=r.constructor,q=r.s==a.s?1:-1,z=r.d,G=a.d;if(!z||!z[0]||!G||!G[0])return new U(!r.s||!a.s||(z?G&&z[0]==G[0]:!G)?NaN:z&&z[0]==0||!G?q*0:q/0);for(l?(h=1,c=r.e-a.e):(l=gu,h=Wt,c=Ua(r.e/h)-Ua(a.e/h)),P=G.length,C=z.length,y=new U(q),_=y.d=[],p=0;G[p]==(z[p]||0);p++);if(G[p]>(z[p]||0)&&c--,s==null?(E=s=U.precision,o=U.rounding):u?E=s+(r.e-a.e)+1:E=s,E<0)_.push(1),m=!0;else{if(E=E/h+2|0,p=0,P==1){for(d=0,G=G[0],E++;(p<C||d)&&E--;p++)N=d*l+(z[p]||0),_[p]=N/G|0,d=N%G|0;m=d||p<C}else{for(d=l/(G[0]+1)|0,d>1&&(G=t(G,d,l),z=t(z,d,l),P=G.length,C=z.length),D=P,x=z.slice(0,P),M=x.length;M<P;)x[M++]=0;I=G.slice(),I.unshift(0),T=G[0],G[1]>=l/2&&++T;do d=0,f=e(G,x,P,M),f<0?(A=x[0],P!=M&&(A=A*l+(x[1]||0)),d=A/T|0,d>1?(d>=l&&(d=l-1),v=t(G,d,l),g=v.length,M=x.length,f=e(v,x,g,M),f==1&&(d--,n(v,P<g?I:G,g,l))):(d==0&&(f=d=1),v=G.slice()),g=v.length,g<M&&v.unshift(0),n(x,v,M,l),f==-1&&(M=x.length,f=e(G,x,P,M),f<1&&(d++,n(x,P<M?I:G,M,l))),M=x.length):f===0&&(d++,x=[0]),_[p++]=d,f&&x[0]?x[M++]=z[D]||0:(x=[z[D]],M=1);while((D++<C||x[0]!==void 0)&&E--);m=x[0]!==void 0}_[0]||_.shift()}if(h==1)y.e=c,r$=m;else{for(p=1,d=_[0];d>=10;d/=10)p++;y.e=p+c*h-1,Ft(y,u?s+y.e+1:s,o,m)}return y}}();function Ft(t,e,n,r){var a,s,o,u,l,f,c,p,d,h=t.constructor;e:if(e!=null){if(p=t.d,!p)return t;for(a=1,u=p[0];u>=10;u/=10)a++;if(s=e-a,s<0)s+=Wt,o=e,c=p[d=0],l=c/Di(10,a-o-1)%10|0;else if(d=Math.ceil((s+1)/Wt),u=p.length,d>=u)if(r){for(;u++<=d;)p.push(0);c=l=0,a=1,s%=Wt,o=s-Wt+1}else break e;else{for(c=u=p[d],a=1;u>=10;u/=10)a++;s%=Wt,o=s-Wt+a,l=o<0?0:c/Di(10,a-o-1)%10|0}if(r=r||e<0||p[d+1]!==void 0||(o<0?c:c%Di(10,a-o-1)),f=n<4?(l||r)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||r||n==6&&(s>0?o>0?c/Di(10,a-o):0:p[d-1])%10&1||n==(t.s<0?8:7)),e<1||!p[0])return p.length=0,f?(e-=t.e+1,p[0]=Di(10,(Wt-e%Wt)%Wt),t.e=-e||0):p[0]=t.e=0,t;if(s==0?(p.length=d,u=1,d--):(p.length=d+1,u=Di(10,Wt-s),p[d]=o>0?(c/Di(10,a-o)%Di(10,o)|0)*u:0),f)for(;;)if(d==0){for(s=1,o=p[0];o>=10;o/=10)s++;for(o=p[0]+=u,u=1;o>=10;o/=10)u++;s!=u&&(t.e++,p[0]==gu&&(p[0]=1));break}else{if(p[d]+=u,p[d]!=gu)break;p[d--]=0,u=1}for(s=p.length;p[--s]===0;)p.pop()}return en&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function cl(t,e,n){if(!t.isFinite())return f$(t);var r,a=t.e,s=oa(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Nf(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):a<0?(s="0."+Nf(-a-1)+s,n&&(r=n-o)>0&&(s+=Nf(r))):a>=o?(s+=Nf(a+1-o),n&&(r=n-a-1)>0&&(s=s+"."+Nf(r))):((r=a+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(s+="."),s+=Nf(r))),s}function TM(t,e){var n=t[0];for(e*=Wt;n>=10;n/=10)e++;return e}function ow(t,e,n){if(e>Xle)throw en=!0,n&&(t.precision=n),Error(i$);return Ft(new t(aw),e,1,!0)}function hu(t,e,n){if(e>WO)throw Error(i$);return Ft(new t(sw),e,n,!0)}function u$(t){var e=t.length-1,n=e*Wt+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Nf(t){for(var e="";t--;)e+="0";return e}function l$(t,e,n,r){var a,s=new t(1),o=Math.ceil(r/Wt+4);for(en=!1;;){if(n%2&&(s=s.times(e),Oz(s.d,o)&&(a=!0)),n=Ua(n/2),n===0){n=s.d.length-1,a&&s.d[n]===0&&++s.d[n];break}e=e.times(e),Oz(e.d,o)}return en=!0,s}function Pz(t){return t.d[t.d.length-1]&1}function c$(t,e,n){for(var r,a=new t(e[0]),s=0;++s<e.length;)if(r=new t(e[s]),r.s)a[n](r)&&(a=r);else{a=r;break}return a}function $O(t,e){var n,r,a,s,o,u,l,f=0,c=0,p=0,d=t.constructor,h=d.rounding,m=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(en=!1,l=m):l=e,u=new d(.03125);t.e>-2;)t=t.times(u),p+=5;for(r=Math.log(Di(2,p))/Math.LN10*2+5|0,l+=r,n=s=o=new d(1),d.precision=l;;){if(s=Ft(s.times(t),l,1),n=n.times(++c),u=o.plus(yr(s,n,l,1)),oa(u.d).slice(0,l)===oa(o.d).slice(0,l)){for(a=p;a--;)o=Ft(o.times(o),l,1);if(e==null)if(f<3&&ky(o.d,l-r,h,f))d.precision=l+=10,n=s=u=new d(1),c=0,f++;else return Ft(o,d.precision=m,h,en=!0);else return d.precision=m,o}o=u}}function Ff(t,e){var n,r,a,s,o,u,l,f,c,p,d,h=1,m=10,v=t,g=v.d,y=v.constructor,_=y.rounding,x=y.precision;if(v.s<0||!g||!g[0]||!v.e&&g[0]==1&&g.length==1)return new y(g&&!g[0]?-1/0:v.s!=1?NaN:g?0:v);if(e==null?(en=!1,c=x):c=e,y.precision=c+=m,n=oa(g),r=n.charAt(0),Math.abs(s=v.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=oa(v.d),r=n.charAt(0),h++;s=v.e,r>1?(v=new y("0."+n),s++):v=new y(r+"."+n.slice(1))}else return f=ow(y,c+2,x).times(s+""),v=Ff(new y(r+"."+n.slice(1)),c-m).plus(f),y.precision=x,e==null?Ft(v,x,_,en=!0):v;for(p=v,l=o=v=yr(v.minus(1),v.plus(1),c,1),d=Ft(v.times(v),c,1),a=3;;){if(o=Ft(o.times(d),c,1),f=l.plus(yr(o,new y(a),c,1)),oa(f.d).slice(0,c)===oa(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(ow(y,c+2,x).times(s+""))),l=yr(l,new y(h),c,1),e==null)if(ky(l.d,c-m,_,u))y.precision=c+=m,f=o=v=yr(p.minus(1),p.plus(1),c,1),d=Ft(v.times(v),c,1),a=u=1;else return Ft(l,y.precision=x,_,en=!0);else return y.precision=x,l;l=f,a+=2}}function f$(t){return String(t.s*t.s/0)}function jO(t,e){var n,r,a;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(a=e.length;e.charCodeAt(a-1)===48;--a);if(e=e.slice(r,a),e){if(a-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Wt,n<0&&(r+=Wt),r<a){for(r&&t.d.push(+e.slice(0,r)),a-=Wt;r<a;)t.d.push(+e.slice(r,r+=Wt));e=e.slice(r),r=Wt-e.length}else r-=a;for(;r--;)e+="0";t.d.push(+e),en&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Qle(t,e){var n,r,a,s,o,u,l,f,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),o$.test(e))return jO(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Wle.test(e))n=16,e=e.toLowerCase();else if(Vle.test(e))n=2;else if($le.test(e))n=8;else throw Error(ep+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,r=t.constructor,o&&(e=e.replace(".",""),u=e.length,s=u-s,a=l$(r,new r(n),s,s*2)),f=c2(e,n,gu),c=f.length-1,s=c;f[s]===0;--s)f.pop();return s<0?new r(t.s*0):(t.e=TM(f,c),t.d=f,en=!1,o&&(t=yr(t,a,u*4)),l&&(t=t.times(Math.abs(l)<54?Di(2,l):R1.pow(2,l))),en=!0,t)}function Zle(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Tm(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/AM(5,n)),e=Tm(t,2,e,e);for(var a,s=new t(5),o=new t(16),u=new t(20);n--;)a=e.times(e),e=e.times(s.plus(a.times(o.times(a).minus(u))));return e}function Tm(t,e,n,r,a){var s,o,u,l,f=t.precision,c=Math.ceil(f/Wt);for(en=!1,l=n.times(n),u=new t(r);;){if(o=yr(u.times(l),new t(e++*e++),f,1),u=a?r.plus(o):r.minus(o),r=yr(o.times(l),new t(e++*e++),f,1),o=u.plus(r),o.d[c]!==void 0){for(s=c;o.d[s]===u.d[s]&&s--;);if(s==-1)break}s=u,u=r,r=o,o=s}return en=!0,o.d.length=c+1,o}function AM(t,e){for(var n=t;--e;)n*=t;return n}function p$(t,e){var n,r=e.s<0,a=hu(t,t.precision,1),s=a.times(.5);if(e=e.abs(),e.lte(s))return oc=r?4:1,e;if(n=e.divToInt(a),n.isZero())oc=r?3:2;else{if(e=e.minus(n.times(a)),e.lte(s))return oc=Pz(n)?r?2:3:r?4:1,e;oc=Pz(n)?r?1:4:r?3:2}return e.minus(a).abs()}function eU(t,e,n,r){var a,s,o,u,l,f,c,p,d,h=t.constructor,m=n!==void 0;if(m?(Is(n,1,xp),r===void 0?r=h.rounding:Is(r,0,8)):(n=h.precision,r=h.rounding),!t.isFinite())c=f$(t);else{for(c=cl(t),o=c.indexOf("."),m?(a=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):a=e,o>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-o,d.d=c2(cl(d),10,a),d.e=d.d.length),p=c2(c,10,a),s=l=p.length;p[--l]==0;)p.pop();if(!p[0])c=m?"0p+0":"0";else{if(o<0?s--:(t=new h(t),t.d=p,t.e=s,t=yr(t,d,n,r,0,a),p=t.d,s=t.e,f=r$),o=p[n],u=a/2,f=f||p[n+1]!==void 0,f=r<4?(o!==void 0||f)&&(r===0||r===(t.s<0?3:2)):o>u||o===u&&(r===4||f||r===6&&p[n-1]&1||r===(t.s<0?8:7)),p.length=n,f)for(;++p[--n]>a-1;)p[n]=0,n||(++s,p.unshift(1));for(l=p.length;!p[l-1];--l);for(o=0,c="";o<l;o++)c+=HO.charAt(p[o]);if(m){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(p=c2(c,a,e),l=p.length;!p[l-1];--l);for(o=1,c="1.";o<l;o++)c+=HO.charAt(p[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function Oz(t,e){if(t.length>e)return t.length=e,!0}function Jle(t){return new this(t).abs()}function Kle(t){return new this(t).acos()}function ece(t){return new this(t).acosh()}function tce(t,e){return new this(t).plus(e)}function nce(t){return new this(t).asin()}function rce(t){return new this(t).asinh()}function ice(t){return new this(t).atan()}function ace(t){return new this(t).atanh()}function sce(t,e){t=new this(t),e=new this(e);var n,r=this.precision,a=this.rounding,s=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=hu(this,s,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?hu(this,r,a):new this(0),n.s=t.s):!t.d||e.isZero()?(n=hu(this,s,1).times(.5),n.s=t.s):e.s<0?(this.precision=s,this.rounding=1,n=this.atan(yr(t,e,s,1)),e=hu(this,s,1),this.precision=r,this.rounding=a,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(yr(t,e,s,1)),n}function oce(t){return new this(t).cbrt()}function uce(t){return Ft(t=new this(t),t.e+1,2)}function lce(t,e,n){return new this(t).clamp(e,n)}function cce(t){if(!t||typeof t!="object")throw Error(EM+"Object expected");var e,n,r,a=t.defaults===!0,s=["precision",1,xp,"rounding",0,8,"toExpNeg",-Y0,0,"toExpPos",0,Y0,"maxE",0,Y0,"minE",-Y0,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],a&&(this[n]=VO[n]),(r=t[n])!==void 0)if(Ua(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(ep+n+": "+r);if(n="crypto",a&&(this[n]=VO[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(a$);else this[n]=!1;else throw Error(ep+n+": "+r);return this}function fce(t){return new this(t).cos()}function pce(t){return new this(t).cosh()}function d$(t){var e,n,r;function a(s){var o,u,l,f=this;if(!(f instanceof a))return new a(s);if(f.constructor=a,Lz(s)){f.s=s.s,en?!s.d||s.e>a.maxE?(f.e=NaN,f.d=null):s.e<a.minE?(f.e=0,f.d=[0]):(f.e=s.e,f.d=s.d.slice()):(f.e=s.e,f.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){f.s=1/s<0?-1:1,f.e=0,f.d=[0];return}if(s<0?(s=-s,f.s=-1):f.s=1,s===~~s&&s<1e7){for(o=0,u=s;u>=10;u/=10)o++;en?o>a.maxE?(f.e=NaN,f.d=null):o<a.minE?(f.e=0,f.d=[0]):(f.e=o,f.d=[s]):(f.e=o,f.d=[s]);return}else if(s*0!==0){s||(f.s=NaN),f.e=NaN,f.d=null;return}return jO(f,s.toString())}else if(l!=="string")throw Error(ep+s);return(u=s.charCodeAt(0))===45?(s=s.slice(1),f.s=-1):(u===43&&(s=s.slice(1)),f.s=1),o$.test(s)?jO(f,s):Qle(f,s)}if(a.prototype=st,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=cce,a.clone=d$,a.isDecimal=Lz,a.abs=Jle,a.acos=Kle,a.acosh=ece,a.add=tce,a.asin=nce,a.asinh=rce,a.atan=ice,a.atanh=ace,a.atan2=sce,a.cbrt=oce,a.ceil=uce,a.clamp=lce,a.cos=fce,a.cosh=pce,a.div=dce,a.exp=hce,a.floor=mce,a.hypot=vce,a.ln=gce,a.log=yce,a.log10=bce,a.log2=xce,a.max=Sce,a.min=wce,a.mod=_ce,a.mul=Mce,a.pow=Ece,a.random=Tce,a.round=Ace,a.sign=Nce,a.sin=Cce,a.sinh=Dce,a.sqrt=Rce,a.sub=Ice,a.sum=Pce,a.tan=Oce,a.tanh=Lce,a.trunc=kce,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return a.config(t),a}function dce(t,e){return new this(t).div(e)}function hce(t){return new this(t).exp()}function mce(t){return Ft(t=new this(t),t.e+1,3)}function vce(){var t,e,n=new this(0);for(en=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return en=!0,new this(1/0);n=e}return en=!0,n.sqrt()}function Lz(t){return t instanceof R1||t&&t.toStringTag===s$||!1}function gce(t){return new this(t).ln()}function yce(t,e){return new this(t).log(e)}function xce(t){return new this(t).log(2)}function bce(t){return new this(t).log(10)}function Sce(){return c$(this,arguments,"lt")}function wce(){return c$(this,arguments,"gt")}function _ce(t,e){return new this(t).mod(e)}function Mce(t,e){return new this(t).mul(e)}function Ece(t,e){return new this(t).pow(e)}function Tce(t){var e,n,r,a,s=0,o=new this(1),u=[];if(t===void 0?t=this.precision:Is(t,1,xp),r=Math.ceil(t/Wt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)a=e[s],a>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:u[s++]=a%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)a=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(e,s):(u.push(a%1e7),s+=4);s=r/4}else throw Error(a$);else for(;s<r;)u[s++]=Math.random()*1e7|0;for(r=u[--s],t%=Wt,r&&t&&(a=Di(10,Wt-t),u[s]=(r/a|0)*a);u[s]===0;s--)u.pop();if(s<0)n=0,u=[0];else{for(n=-1;u[0]===0;n-=Wt)u.shift();for(r=1,a=u[0];a>=10;a/=10)r++;r<Wt&&(n-=Wt-r)}return o.e=n,o.d=u,o}function Ace(t){return Ft(t=new this(t),t.e+1,this.rounding)}function Nce(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function Cce(t){return new this(t).sin()}function Dce(t){return new this(t).sinh()}function Rce(t){return new this(t).sqrt()}function Ice(t,e){return new this(t).sub(e)}function Pce(){var t=0,e=arguments,n=new this(e[t]);for(en=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return en=!0,Ft(n,this.precision,this.rounding)}function Oce(t){return new this(t).tan()}function Lce(t){return new this(t).tanh()}function kce(t){return Ft(t=new this(t),t.e+1,1)}st[Symbol.for("nodejs.util.inspect.custom")]=st.toString;st[Symbol.toStringTag]="Decimal";var R1=st.constructor=d$(VO);aw=new R1(aw);sw=new R1(sw);var Uce="BigNumber",Fce=["?on","config"],NM=ye(Uce,Fce,function(t){var e=t.on,n=t.config,r=R1.clone({precision:n.precision});return r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(a){return new r(a.value)},e&&e("config",function(a,s){a.precision!==s.precision&&r.config({precision:a.precision})}),r},{isClass:!0}),h$={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(n){var r=Math.cosh||function(p){return Math.abs(p)<1e-9?1-p:(Math.exp(p)+Math.exp(-p))*.5},a=Math.sinh||function(p){return Math.abs(p)<1e-9?p:(Math.exp(p)-Math.exp(-p))*.5},s=function(p){var d=Math.PI/4;if(-d>p||p>d)return Math.cos(p)-1;var h=p*p;return h*(h*(h*(h*(h*(h*(h*(h/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(p,d){var h=Math.abs(p),m=Math.abs(d);return h<3e3&&m<3e3?Math.sqrt(h*h+m*m):(h<m?(h=m,m=p/d):m=d/p,h*Math.sqrt(1+m*m))},u=function(){throw SyntaxError("Invalid Param")};function l(p,d){var h=Math.abs(p),m=Math.abs(d);return p===0?Math.log(m):d===0?Math.log(h):h<3e3&&m<3e3?Math.log(p*p+d*d)*.5:(p=p/2,d=d/2,.5*Math.log(p*p+d*d)+Math.LN2)}var f=function(p,d){var h={re:0,im:0};if(p==null)h.re=h.im=0;else if(d!==void 0)h.re=p,h.im=d;else switch(typeof p){case"object":if("im"in p&&"re"in p)h.re=p.re,h.im=p.im;else if("abs"in p&&"arg"in p){if(!Number.isFinite(p.abs)&&Number.isFinite(p.arg))return c.INFINITY;h.re=p.abs*Math.cos(p.arg),h.im=p.abs*Math.sin(p.arg)}else if("r"in p&&"phi"in p){if(!Number.isFinite(p.r)&&Number.isFinite(p.phi))return c.INFINITY;h.re=p.r*Math.cos(p.phi),h.im=p.r*Math.sin(p.phi)}else p.length===2?(h.re=p[0],h.im=p[1]):u();break;case"string":h.im=h.re=0;var m=p.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,g=0;m===null&&u();for(var y=0;y<m.length;y++){var _=m[y];_===" "||_==="	"||_===`
`||(_==="+"?v++:_==="-"?g++:_==="i"||_==="I"?(v+g===0&&u(),m[y+1]!==" "&&!isNaN(m[y+1])?(h.im+=parseFloat((g%2?"-":"")+m[y+1]),y++):h.im+=parseFloat((g%2?"-":"")+"1"),v=g=0):((v+g===0||isNaN(_))&&u(),m[y+1]==="i"||m[y+1]==="I"?(h.im+=parseFloat((g%2?"-":"")+_),y++):h.re+=parseFloat((g%2?"-":"")+_),v=g=0))}v+g>0&&u();break;case"number":h.im=0,h.re=p;break;default:u()}return isNaN(h.re)||isNaN(h.im),h};function c(p,d){if(!(this instanceof c))return new c(p,d);var h=f(p,d);this.re=h.re,this.im=h.im}c.prototype={re:0,im:0,sign:function(){var p=this.abs();return new c(this.re/p,this.im/p)},add:function(p,d){var h=new c(p,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re+h.re,this.im+h.im)},sub:function(p,d){var h=new c(p,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re-h.re,this.im-h.im)},mul:function(p,d){var h=new c(p,d);return this.isInfinite()&&h.isZero()||this.isZero()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:h.im===0&&this.im===0?new c(this.re*h.re,0):new c(this.re*h.re-this.im*h.im,this.re*h.im+this.im*h.re)},div:function(p,d){var h=new c(p,d);if(this.isZero()&&h.isZero()||this.isInfinite()&&h.isInfinite())return c.NAN;if(this.isInfinite()||h.isZero())return c.INFINITY;if(this.isZero()||h.isInfinite())return c.ZERO;p=this.re,d=this.im;var m=h.re,v=h.im,g,y;return v===0?new c(p/m,d/m):Math.abs(m)<Math.abs(v)?(y=m/v,g=m*y+v,new c((p*y+d)/g,(d*y-p)/g)):(y=v/m,g=v*y+m,new c((p+d*y)/g,(d-p*y)/g))},pow:function(p,d){var h=new c(p,d);if(p=this.re,d=this.im,h.isZero())return c.ONE;if(h.im===0){if(d===0&&p>0)return new c(Math.pow(p,h.re),0);if(p===0)switch((h.re%4+4)%4){case 0:return new c(Math.pow(d,h.re),0);case 1:return new c(0,Math.pow(d,h.re));case 2:return new c(-Math.pow(d,h.re),0);case 3:return new c(0,-Math.pow(d,h.re))}}if(p===0&&d===0&&h.re>0&&h.im>=0)return c.ZERO;var m=Math.atan2(d,p),v=l(p,d);return p=Math.exp(h.re*v-h.im*m),d=h.im*v+h.re*m,new c(p*Math.cos(d),p*Math.sin(d))},sqrt:function(){var p=this.re,d=this.im,h=this.abs(),m,v;if(p>=0){if(d===0)return new c(Math.sqrt(p),0);m=.5*Math.sqrt(2*(h+p))}else m=Math.abs(d)/Math.sqrt(2*(h-p));return p<=0?v=.5*Math.sqrt(2*(h-p)):v=Math.abs(d)/Math.sqrt(2*(h+p)),new c(m,d<0?-v:v)},exp:function(){var p=Math.exp(this.re);return this.im,new c(p*Math.cos(this.im),p*Math.sin(this.im))},expm1:function(){var p=this.re,d=this.im;return new c(Math.expm1(p)*Math.cos(d)+s(d),Math.exp(p)*Math.sin(d))},log:function(){var p=this.re,d=this.im;return new c(l(p,d),Math.atan2(d,p))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var p=this.re,d=this.im;return new c(Math.sin(p)*r(d),Math.cos(p)*a(d))},cos:function(){var p=this.re,d=this.im;return new c(Math.cos(p)*r(d),-Math.sin(p)*a(d))},tan:function(){var p=2*this.re,d=2*this.im,h=Math.cos(p)+r(d);return new c(Math.sin(p)/h,a(d)/h)},cot:function(){var p=2*this.re,d=2*this.im,h=Math.cos(p)-r(d);return new c(-Math.sin(p)/h,a(d)/h)},sec:function(){var p=this.re,d=this.im,h=.5*r(2*d)+.5*Math.cos(2*p);return new c(Math.cos(p)*r(d)/h,Math.sin(p)*a(d)/h)},csc:function(){var p=this.re,d=this.im,h=.5*r(2*d)-.5*Math.cos(2*p);return new c(Math.sin(p)*r(d)/h,-Math.cos(p)*a(d)/h)},asin:function(){var p=this.re,d=this.im,h=new c(d*d-p*p+1,-2*p*d).sqrt(),m=new c(h.re-d,h.im+p).log();return new c(m.im,-m.re)},acos:function(){var p=this.re,d=this.im,h=new c(d*d-p*p+1,-2*p*d).sqrt(),m=new c(h.re-d,h.im+p).log();return new c(Math.PI/2-m.im,m.re)},atan:function(){var p=this.re,d=this.im;if(p===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var h=p*p+(1-d)*(1-d),m=new c((1-d*d-p*p)/h,-2*p/h).log();return new c(-.5*m.im,.5*m.re)},acot:function(){var p=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,p),0);var h=p*p+d*d;return h!==0?new c(p/h,-d/h).atan():new c(p!==0?p/0:0,d!==0?-d/0:0).atan()},asec:function(){var p=this.re,d=this.im;if(p===0&&d===0)return new c(0,1/0);var h=p*p+d*d;return h!==0?new c(p/h,-d/h).acos():new c(p!==0?p/0:0,d!==0?-d/0:0).acos()},acsc:function(){var p=this.re,d=this.im;if(p===0&&d===0)return new c(Math.PI/2,1/0);var h=p*p+d*d;return h!==0?new c(p/h,-d/h).asin():new c(p!==0?p/0:0,d!==0?-d/0:0).asin()},sinh:function(){var p=this.re,d=this.im;return new c(a(p)*Math.cos(d),r(p)*Math.sin(d))},cosh:function(){var p=this.re,d=this.im;return new c(r(p)*Math.cos(d),a(p)*Math.sin(d))},tanh:function(){var p=2*this.re,d=2*this.im,h=r(p)+Math.cos(d);return new c(a(p)/h,Math.sin(d)/h)},coth:function(){var p=2*this.re,d=2*this.im,h=r(p)-Math.cos(d);return new c(a(p)/h,-Math.sin(d)/h)},csch:function(){var p=this.re,d=this.im,h=Math.cos(2*d)-r(2*p);return new c(-2*a(p)*Math.cos(d)/h,2*r(p)*Math.sin(d)/h)},sech:function(){var p=this.re,d=this.im,h=Math.cos(2*d)+r(2*p);return new c(2*r(p)*Math.cos(d)/h,-2*a(p)*Math.sin(d)/h)},asinh:function(){var p=this.im;this.im=-this.re,this.re=p;var d=this.asin();return this.re=-this.im,this.im=p,p=d.re,d.re=-d.im,d.im=p,d},acosh:function(){var p=this.acos();if(p.im<=0){var d=p.re;p.re=-p.im,p.im=d}else{var d=p.im;p.im=-p.re,p.re=d}return p},atanh:function(){var p=this.re,d=this.im,h=p>1&&d===0,m=1-p,v=1+p,g=m*m+d*d,y=g!==0?new c((v*m-d*d)/g,(d*m+v*d)/g):new c(p!==-1?p/0:0,d!==0?d/0:0),_=y.re;return y.re=l(y.re,y.im)/2,y.im=Math.atan2(y.im,_)/2,h&&(y.im=-y.im),y},acoth:function(){var p=this.re,d=this.im;if(p===0&&d===0)return new c(0,Math.PI/2);var h=p*p+d*d;return h!==0?new c(p/h,-d/h).atanh():new c(p!==0?p/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var p=this.re,d=this.im;if(d===0)return new c(p!==0?Math.log(p+Math.sqrt(p*p+1)):1/0,0);var h=p*p+d*d;return h!==0?new c(p/h,-d/h).asinh():new c(p!==0?p/0:0,d!==0?-d/0:0).asinh()},asech:function(){var p=this.re,d=this.im;if(this.isZero())return c.INFINITY;var h=p*p+d*d;return h!==0?new c(p/h,-d/h).acosh():new c(p!==0?p/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var p=this.re,d=this.im,h=p*p+d*d;return new c(p/h,-d/h)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(p){return p=Math.pow(10,p||0),new c(Math.ceil(this.re*p)/p,Math.ceil(this.im*p)/p)},floor:function(p){return p=Math.pow(10,p||0),new c(Math.floor(this.re*p)/p,Math.floor(this.im*p)/p)},round:function(p){return p=Math.pow(10,p||0),new c(Math.round(this.re*p)/p,Math.round(this.im*p)/p)},equals:function(p,d){var h=new c(p,d);return Math.abs(h.re-this.re)<=c.EPSILON&&Math.abs(h.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var p=this.re,d=this.im,h="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(p)<c.EPSILON&&(p=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?h+p:(p!==0?(h+=p,h+=" ",d<0?(d=-d,h+="-"):h+="+",h+=" "):d<0&&(d=-d,h+="-"),d!==1&&(h+=d),h+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(h$);var Bce=h$.exports;const ws=Au(Bce);function f2(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f2=function(n){return typeof n}:f2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},f2(t)}var zce="Complex",qce=[],CM=ye(zce,qce,function(){return ws.prototype.type="Complex",ws.prototype.isComplex=!0,ws.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ws.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ws.prototype.format=function(t){var e="",n=this.im,r=this.re,a=Ld(this.re,t),s=Ld(this.im,t),o=pn(t)?t:t?t.precision:null;if(o!==null){var u=Math.pow(10,-o);Math.abs(r/n)<u&&(r=0),Math.abs(n/r)<u&&(n=0)}return n===0?e=a:r===0?n===1?e="i":n===-1?e="-i":e=s+"i":n<0?n===-1?e=a+" - i":e=a+" - "+s.substring(1)+"i":n===1?e=a+" + i":e=a+" + "+s+"i",e},ws.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(f2(e)==="object")return ws(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(pn(n)){if(Uc(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),pn(r))return new ws({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},ws.prototype.valueOf=ws.prototype.toString,ws.fromJSON=function(t){return new ws(t)},ws.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},ws},{isClass:!0});/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var Gce=2e3,Dt={s:1,n:0,d:1};function ql(t,e){if(isNaN(t=parseInt(t,10)))throw p2();return t*e}function Gr(t,e){if(e===0)throw tU();var n=Object.create(Xs.prototype);n.s=t<0?-1:1,t=t<0?-t:t;var r=Q0(t,e);return n.n=t/r,n.d=e/r,n}function kz(t){for(var e={},n=t,r=2,a=4;a<=n;){for(;n%r===0;)n/=r,e[r]=(e[r]||0)+1;a+=1+2*r++}return n!==t?n>1&&(e[n]=(e[n]||0)+1):e[t]=(e[t]||0)+1,e}var $s=function(t,e){var n=0,r=1,a=1,s=0,o=0,u=0,l=1,f=1,c=0,p=1,d=1,h=1,m=1e7,v;if(t!=null)if(e!==void 0){if(n=t,r=e,a=n*r,n%1!==0||r%1!==0)throw $ce()}else switch(typeof t){case"object":{if("d"in t&&"n"in t)n=t.n,r=t.d,"s"in t&&(n*=t.s);else if(0 in t)n=t[0],1 in t&&(r=t[1]);else throw p2();a=n*r;break}case"number":{if(t<0&&(a=t,t=-t),t%1===0)n=t;else if(t>0){for(t>=1&&(f=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=f);p<=m&&h<=m;)if(v=(c+d)/(p+h),t===v){p+h<=m?(n=c+d,r=p+h):h>p?(n=d,r=h):(n=c,r=p);break}else t>v?(c+=d,p+=h):(d+=c,h+=p),p>m?(n=d,r=h):(n=c,r=p);n*=f}else(isNaN(t)||isNaN(e))&&(r=n=NaN);break}case"string":{if(p=t.match(/\d+|./g),p===null)throw p2();if(p[c]==="-"?(a=-1,c++):p[c]==="+"&&c++,p.length===c+1?o=ql(p[c++],a):p[c+1]==="."||p[c]==="."?(p[c]!=="."&&(s=ql(p[c++],a)),c++,(c+1===p.length||p[c+1]==="("&&p[c+3]===")"||p[c+1]==="'"&&p[c+3]==="'")&&(o=ql(p[c],a),l=Math.pow(10,p[c].length),c++),(p[c]==="("&&p[c+2]===")"||p[c]==="'"&&p[c+2]==="'")&&(u=ql(p[c+1],a),f=Math.pow(10,p[c+1].length)-1,c+=3)):p[c+1]==="/"||p[c+1]===":"?(o=ql(p[c],a),l=ql(p[c+2],1),c+=3):p[c+3]==="/"&&p[c+1]===" "&&(s=ql(p[c],a),o=ql(p[c+2],a),l=ql(p[c+4],1),c+=5),p.length<=c){r=l*f,a=n=u+r*s+f*o;break}}default:throw p2()}if(r===0)throw tU();Dt.s=a<0?-1:1,Dt.n=Math.abs(n),Dt.d=Math.abs(r)};function Hce(t,e,n){for(var r=1;e>0;t=t*t%n,e>>=1)e&1&&(r=r*t%n);return r}function Vce(t,e){for(;e%2===0;e/=2);for(;e%5===0;e/=5);if(e===1)return 0;for(var n=10%e,r=1;n!==1;r++)if(n=n*10%e,r>Gce)return 0;return r}function Wce(t,e,n){for(var r=1,a=Hce(10,n,e),s=0;s<300;s++){if(r===a)return s;r=r*10%e,a=a*10%e}return 0}function Q0(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Xs(t,e){if($s(t,e),this instanceof Xs)t=Q0(Dt.d,Dt.n),this.s=Dt.s,this.n=Dt.n/t,this.d=Dt.d/t;else return Gr(Dt.s*Dt.n,Dt.d)}var tU=function(){return new Error("Division by Zero")},p2=function(){return new Error("Invalid argument")},$ce=function(){return new Error("Parameters must be integer")};Xs.prototype={s:1,n:0,d:1,abs:function(){return Gr(this.n,this.d)},neg:function(){return Gr(-this.s*this.n,this.d)},add:function(t,e){return $s(t,e),Gr(this.s*this.n*Dt.d+Dt.s*this.d*Dt.n,this.d*Dt.d)},sub:function(t,e){return $s(t,e),Gr(this.s*this.n*Dt.d-Dt.s*this.d*Dt.n,this.d*Dt.d)},mul:function(t,e){return $s(t,e),Gr(this.s*Dt.s*this.n*Dt.n,this.d*Dt.d)},div:function(t,e){return $s(t,e),Gr(this.s*Dt.s*this.n*Dt.d,this.d*Dt.n)},clone:function(){return Gr(this.s*this.n,this.d)},mod:function(t,e){if(isNaN(this.n)||isNaN(this.d))return new Xs(NaN);if(t===void 0)return Gr(this.s*this.n%this.d,1);if($s(t,e),Dt.n===0&&this.d===0)throw tU();return Gr(this.s*(Dt.d*this.n)%(Dt.n*this.d),Dt.d*this.d)},gcd:function(t,e){return $s(t,e),Gr(Q0(Dt.n,this.n)*Q0(Dt.d,this.d),Dt.d*this.d)},lcm:function(t,e){return $s(t,e),Dt.n===0&&this.n===0?Gr(0,1):Gr(Dt.n*this.n,Q0(Dt.n,this.n)*Q0(Dt.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new Xs(NaN):Gr(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new Xs(NaN):Gr(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new Xs(NaN):Gr(Math.round(t*this.s*this.n/this.d),t)},roundTo:function(t,e){return $s(t,e),Gr(this.s*Math.round(this.n*Dt.d/(this.d*Dt.n))*Dt.n,Dt.d)},inverse:function(){return Gr(this.s*this.d,this.n)},pow:function(t,e){if($s(t,e),Dt.d===1)return Dt.s<0?Gr(Math.pow(this.s*this.d,Dt.n),Math.pow(this.n,Dt.n)):Gr(Math.pow(this.s*this.n,Dt.n),Math.pow(this.d,Dt.n));if(this.s<0)return null;var n=kz(this.n),r=kz(this.d),a=1,s=1;for(var o in n)if(o!=="1"){if(o==="0"){a=0;break}if(n[o]*=Dt.n,n[o]%Dt.d===0)n[o]/=Dt.d;else return null;a*=Math.pow(o,n[o])}for(var o in r)if(o!=="1"){if(r[o]*=Dt.n,r[o]%Dt.d===0)r[o]/=Dt.d;else return null;s*=Math.pow(o,r[o])}return Dt.s<0?Gr(s,a):Gr(a,s)},equals:function(t,e){return $s(t,e),this.s*this.n*Dt.d===Dt.s*Dt.n*this.d},compare:function(t,e){$s(t,e);var n=this.s*this.n*Dt.d-Dt.s*Dt.n*this.d;return(0<n)-(n<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var e=this.abs(),n=e.toContinued(),r=1;r<n.length;r++){for(var a=Gr(n[r-1],1),s=r-2;s>=0;s--)a=a.inverse().add(n[s]);if(Math.abs(a.sub(e).valueOf())<t)return a.mul(this.s)}return this},divisible:function(t,e){return $s(t,e),!(!(Dt.n*this.d)||this.n*Dt.d%(Dt.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",r=this.n,a=this.d;return this.s<0&&(n+="-"),a===1?n+=r:(t&&(e=Math.floor(r/a))>0&&(n+=e,n+=" ",r%=a),n+=r,n+="/",n+=a),n},toLatex:function(t){var e,n="",r=this.n,a=this.d;return this.s<0&&(n+="-"),a===1?n+=r:(t&&(e=Math.floor(r/a))>0&&(n+=e,r%=a),n+="\\frac{",n+=r,n+="}{",n+=a,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,r=[];if(isNaN(e)||isNaN(n))return r;do r.push(Math.floor(e/n)),t=e%n,e=n,n=t;while(e!==1);return r},toString:function(t){var e=this.n,n=this.d;if(isNaN(e)||isNaN(n))return"NaN";t=t||15;var r=Vce(e,n),a=Wce(e,n,r),s=this.s<0?"-":"";if(s+=e/n|0,e%=n,e*=10,e&&(s+="."),r){for(var o=a;o--;)s+=e/n|0,e%=n,e*=10;s+="(";for(var o=r;o--;)s+=e/n|0,e%=n,e*=10;s+=")"}else for(var o=t;e&&o--;)s+=e/n|0,e%=n,e*=10;return s}};var jce="Fraction",Xce=[],DM=ye(jce,Xce,function(){return Xs.prototype.type="Fraction",Xs.prototype.isFraction=!0,Xs.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Xs.fromJSON=function(t){return new Xs(t)},Xs},{isClass:!0}),Yce="Range",Qce=[],RM=ye(Yce,Qce,function(){function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var a=e!=null,s=n!=null,o=r!=null;if(a){if(Jt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(s){if(Jt(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter end must be a number")}if(o){if(Jt(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter step must be a number")}this.start=a?parseFloat(e):0,this.end=s?parseFloat(n):0,this.step=o?parseFloat(r):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var n=e.split(":"),r=n.map(function(s){return parseFloat(s)}),a=r.some(function(s){return isNaN(s)});if(a)return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,n=this.start,r=this.step,a=this.end,s=a-n;return Uf(r)===Uf(s)?e=Math.ceil(s/r):s===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var n=this.start,r=this.step,a=this.end,s=0;if(r>0)for(;n<a;)e(n,[s],this),n+=r,s++;else if(r<0)for(;n>a;)e(n,[s],this),n+=r,s++},t.prototype.map=function(e){var n=[];return this.forEach(function(r,a,s){n[a[0]]=e(r,a,s)}),n},t.prototype.toArray=function(){var e=[];return this.forEach(function(n,r){e[r[0]]=n}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var n=Ld(this.start,e);return this.step!==1&&(n+=":"+Ld(this.step,e)),n+=":"+Ld(this.end,e),n},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),Zce="Matrix",Jce=[],IM=ye(Zce,Jce,function(){function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.storage=function(e){throw new Error("Matrix.storage is deprecated since v6.0.0. Use the factory function math.matrix instead.")},t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0}),Kce="DenseMatrix",efe=["Matrix"],PM=ye(Kce,efe,function(t){var e=t.Matrix;function n(c,p){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(p&&!Ca(p))throw new Error("Invalid datatype: "+p);if(Dn(c))c.type==="DenseMatrix"?(this._data=Ut(c._data),this._size=Ut(c._size),this._datatype=p||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=p||c._datatype);else if(c&&zn(c.data)&&zn(c.size))this._data=c.data,this._size=c.size,Dz(this._data,this._size),this._datatype=p||c.datatype;else if(zn(c))this._data=f(c),this._size=yn(this._data),Dz(this._data,this._size),this._datatype=p;else{if(c)throw new TypeError("Unsupported type of data ("+ur(c)+")");this._data=[],this._size=[0],this._datatype=p}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,p){return new n(c,p)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Ly(this._data,ur)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,p){return new n(c,p)},n.prototype.subset=function(c,p,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,p,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){if(!zn(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new nn(c.length,this._size.length);for(var p=0;p<c.length;p++)_r(c[p],this._size[p]);for(var d=this._data,h=0,m=c.length;h<m;h++){var v=c[h];_r(v,d.length),d=d[v]}return d},n.prototype.set=function(c,p,d){if(!zn(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new nn(c.length,this._size.length,"<");var h,m,v,g=c.map(function(_){return _+1});l(this,g,d);var y=this._data;for(h=0,m=c.length-1;h<m;h++)v=c[h],_r(v,y.length),y=y[v];return v=c[c.length-1],_r(v,y.length),y[v]=p,this};function r(c,p){if(!vp(p))throw new TypeError("Invalid index");var d=p.isScalar();if(d)return c.get(p.min());var h=p.size();if(h.length!==c._size.length)throw new nn(h.length,c._size.length);for(var m=p.min(),v=p.max(),g=0,y=c._size.length;g<y;g++)_r(m[g],c._size[g]),_r(v[g],c._size[g]);return new n(a(c._data,p,h.length,0),c._datatype)}function a(c,p,d,h){var m=h===d-1,v=p.dimension(h);return m?v.map(function(g){return _r(g,c.length),c[g]}).valueOf():v.map(function(g){_r(g,c.length);var y=c[g];return a(y,p,d,h+1)}).valueOf()}function s(c,p,d,h){if(!p||p.isIndex!==!0)throw new TypeError("Invalid index");var m=p.size(),v=p.isScalar(),g;if(Dn(d)?(g=d.size(),d=d.valueOf()):g=yn(d),v){if(g.length!==0)throw new TypeError("Scalar expected");c.set(p.min(),d,h)}else{if(m.length<c._size.length)throw new nn(m.length,c._size.length,"<");if(g.length<m.length){for(var y=0,_=0;m[y]===1&&g[y]===1;)y++;for(;m[y]===1;)_++,y++;d=JW(d,m.length,_,g)}if(!fm(m,g))throw new nn(m,g,">");var x=p.max().map(function(E){return E+1});l(c,x,h);var M=m.length,A=0;o(c._data,p,d,M,A)}return c}function o(c,p,d,h,m){var v=m===h-1,g=p.dimension(m);v?g.forEach(function(y,_){_r(y),c[y]=d[_[0]]}):g.forEach(function(y,_){_r(y),o(c[y],p,d[_[0]],h,m+1)})}n.prototype.resize=function(c,p,d){if(!zn(c))throw new TypeError("Array expected");var h=d?this.clone():this;return u(h,c,p)};function u(c,p,d){if(p.length===0){for(var h=c._data;zn(h);)h=h[0];return h}return c._size=p.slice(0),c._data=Mm(c._data,c._size,d),c}n.prototype.reshape=function(c,p){var d=p?this.clone():this;return d._data=GO(d._data,c),d._size=c.slice(0),d};function l(c,p,d){for(var h=c._size.slice(0),m=!1;h.length<p.length;)h.push(0),m=!0;for(var v=0,g=p.length;v<g;v++)p[v]>h[v]&&(h[v]=p[v],m=!0);m&&u(c,h,d)}n.prototype.clone=function(){var c=new n({data:Ut(this._data),size:Ut(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var p=this,d=function v(g,y){return zn(g)?g.map(function(_,x){return v(_,y.concat(x))}):c(g,y,p)},h=d(this._data,[]),m=this._datatype!==void 0?Ly(h,ur):void 0;return new n(h,m)},n.prototype.forEach=function(c){var p=this,d=function h(m,v){zn(m)?m.forEach(function(g,y){h(g,v.concat(y))}):c(m,v,p)};d(this._data,[])},n.prototype.toArray=function(){return Ut(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return mn(this._data,c)},n.prototype.toString=function(){return mn(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Jt(c)&&(c=c.toNumber()),!pn(c)||!Ot(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var p=c>0?c:0,d=c<0?-c:0,h=this._size[0],m=this._size[1],v=Math.min(h-d,m-p),g=[],y=0;y<v;y++)g[y]=this._data[y+d][y+p];return new n({data:g,size:[v],datatype:this._datatype})},n.diagonal=function(c,p,d,h){if(!zn(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(N){if(Jt(N)&&(N=N.toNumber()),!pn(N)||!Ot(N)||N<1)throw new Error("Size values must be positive integers");return N}),d){if(Jt(d)&&(d=d.toNumber()),!pn(d)||!Ot(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,v=d<0?-d:0,g=c[0],y=c[1],_=Math.min(g-v,y-m),x;if(zn(p)){if(p.length!==_)throw new Error("Invalid value array length");x=function(D){return p[D]}}else if(Dn(p)){var M=p.size();if(M.length!==1||M[0]!==_)throw new Error("Invalid matrix length");x=function(D){return p.get([D])}}else x=function(){return p};h||(h=Jt(x(0))?x(0).mul(0):0);var A=[];if(c.length>0){A=Mm(A,c,h);for(var E=0;E<_;E++)A[E+v][E+m]=x(E)}return new n({data:A,size:[g,y]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,p){if(!pn(c)||!Ot(c)||!pn(p)||!Ot(p))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return _r(c,this._size[0]),_r(p,this._size[0]),n._swapRows(c,p,this._data),this},n._swapRows=function(c,p,d){var h=d[c];d[c]=d[p],d[p]=h};function f(c){for(var p=0,d=c.length;p<d;p++){var h=c[p];zn(h)?c[p]=f(h):h&&h.isMatrix===!0&&(c[p]=f(h.valueOf()))}return c}return n},{isClass:!0}),Uz="clone",tfe=["typed"],OM=ye(Uz,tfe,function(t){var e=t.typed;return e(Uz,{any:Ut})});function I1(t){for(var e=0;e<t.length;e++)if(Cu(t[e]))return!0;return!1}function yc(t,e){Dn(t)&&(t=t.valueOf());for(var n=0,r=t.length;n<r;n++){var a=t[n];Array.isArray(a)?yc(a,e):e(a)}}function wt(t,e,n){return t&&typeof t.map=="function"?t.map(function(r){return wt(r,e)}):e(t)}function LM(t,e,n){var r=Array.isArray(t)?yn(t):t.size();if(e<0||e>=r.length)throw new po(e,r.length);return Dn(t)?t.create(uw(t.valueOf(),e,n)):uw(t,e,n)}function uw(t,e,n){var r,a,s,o;if(e<=0)if(Array.isArray(t[0])){for(o=nfe(t),a=[],r=0;r<o.length;r++)a[r]=uw(o[r],e-1,n);return a}else{for(s=t[0],r=1;r<t.length;r++)s=n(s,t[r]);return s}else{for(a=[],r=0;r<t.length;r++)a[r]=uw(t[r],e-1,n);return a}}function nfe(t){var e=t.length,n=t[0].length,r,a,s=[];for(a=0;a<n;a++){var o=[];for(r=0;r<e;r++)o.push(t[r][a]);s.push(o)}return s}function Fz(t,e,n,r,a,s,o,u,l,f,c){var p=t._values,d=t._index,h=t._ptr,m,v,g,y;if(r)for(v=h[e],g=h[e+1],m=v;m<g;m++)y=d[m],n[y]!==s?(n[y]=s,o.push(y),r[y]=p[m]):(r[y]=u(r[y],p[m]),a[y]=s);else for(v=h[e],g=h[e+1],m=v;m<g;m++)y=d[m],n[y]!==s?(n[y]=s,o.push(y)):a[y]=s}var Bz="isInteger",rfe=["typed"],kM=ye(Bz,rfe,function(t){var e=t.typed,n=e(Bz,{number:Ot,BigNumber:function(a){return a.isInt()},Fraction:function(a){return a.d===1&&isFinite(a.n)},"Array | Matrix":function(a){return wt(a,n)}});return n}),ho="number",Fc="number, number";function m$(t){return Math.abs(t)}m$.signature=ho;function v$(t,e){return t+e}v$.signature=Fc;function g$(t,e){return t*e}g$.signature=Fc;function y$(t){return-t}y$.signature=ho;function x$(t){return t}x$.signature=ho;function Ng(t){return ble(t)}Ng.signature=ho;function b$(t){return Math.ceil(t)}b$.signature=ho;function S$(t){return t*t*t}S$.signature=ho;function w$(t){return Math.exp(t)}w$.signature=ho;function _$(t){return Sle(t)}_$.signature=ho;function M$(t,e){if(!Ot(t)||!Ot(e))throw new Error("Parameters in function gcd must be integer numbers");for(var n;e!==0;)n=t%e,t=e,e=n;return t<0?-t:t}M$.signature=Fc;function E$(t,e){if(!Ot(t)||!Ot(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var n,r=t*e;e!==0;)n=e,e=t%n,t=n;return Math.abs(r/t)}E$.signature=Fc;function T$(t){return Math.log(t)}T$.signature=ho;function A$(t){return yle(t)}A$.signature=ho;function N$(t){return gle(t)}N$.signature=ho;function C$(t,e){if(e>0)return t-e*Math.floor(t/e);if(e===0)return t;throw new Error("Cannot calculate mod for a negative divisor")}C$.signature=Fc;function XO(t,e){var n=e<0;if(n&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}XO.signature=Fc;function YO(t){return Uf(t)}YO.signature=ho;function D$(t){return t*t}D$.signature=ho;function R$(t,e){var n,r,a,s=0,o=1,u=1,l=0;if(!Ot(t)||!Ot(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(t/e),a=t-r*e,n=s,s=o-r*s,o=n,n=u,u=l-r*u,l=n,t=e,e=a;var f;return t<0?f=[-t,-o,-l]:f=[t,t?o:0,l],f}R$.signature=Fc;function I$(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}I$.signature=Fc;function QO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return parseFloat($W(t,e))}QO.signature=Fc;var ife="number",Km="number, number";function P$(t,e){if(!Ot(t)||!Ot(e))throw new Error("Integers expected in function bitAnd");return t&e}P$.signature=Km;function O$(t){if(!Ot(t))throw new Error("Integer expected in function bitNot");return~t}O$.signature=ife;function L$(t,e){if(!Ot(t)||!Ot(e))throw new Error("Integers expected in function bitOr");return t|e}L$.signature=Km;function k$(t,e){if(!Ot(t)||!Ot(e))throw new Error("Integers expected in function bitXor");return t^e}k$.signature=Km;function U$(t,e){if(!Ot(t)||!Ot(e))throw new Error("Integers expected in function leftShift");return t<<e}U$.signature=Km;function F$(t,e){if(!Ot(t)||!Ot(e))throw new Error("Integers expected in function rightArithShift");return t>>e}F$.signature=Km;function B$(t,e){if(!Ot(t)||!Ot(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}B$.signature=Km;function Fo(t,e){if(e<t)return 1;if(e===t)return e;var n=e+t>>1;return Fo(t,n)*Fo(n+1,e)}function z$(t,e){if(!Ot(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!Ot(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");var n=t-e,r;return e<n?(r=Fo(n+1,t),r/Fo(1,e)):(r=Fo(e+1,t),r/Fo(1,n))}z$.signature="number, number";var afe=Math.PI,sfe=2*Math.PI,ofe=Math.E,ufe=1.618033988749895,lfe="number",nU="number, number";function q$(t){return!t}q$.signature=lfe;function G$(t,e){return!!(t||e)}G$.signature=nU;function H$(t,e){return!!t!=!!e}H$.signature=nU;function V$(t,e){return!!(t&&e)}V$.signature=nU;function rU(t){var e;if(Ot(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:Fo(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*rU(1-t));if(t>=171.35)return 1/0;if(t>85){var n=t*t,r=n*t,a=r*t,s=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*n)-139/(51840*r)-571/(2488320*a)+163879/(209018880*s)+5246819/(75246796800*s*t))}--t,e=Pf[0];for(var o=1;o<Pf.length;++o)e+=Pf[o]/(t+o);var u=t+W$+.5;return Math.sqrt(2*Math.PI)*Math.pow(u,t+.5)*Math.exp(-u)*e}rU.signature="number";var W$=4.7421875,Pf=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Fa="number";function $$(t){return Ele(t)}$$.signature=Fa;function j$(t){return Math.atan(1/t)}j$.signature=Fa;function X$(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}X$.signature=Fa;function Y$(t){return Math.asin(1/t)}Y$.signature=Fa;function Q$(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}Q$.signature=Fa;function Z$(t){return Math.acos(1/t)}Z$.signature=Fa;function J$(t){var e=1/t,n=Math.sqrt(e*e-1);return Math.log(n+e)}J$.signature=Fa;function K$(t){return Tle(t)}K$.signature=Fa;function ej(t){return Ale(t)}ej.signature=Fa;function tj(t){return 1/Math.tan(t)}tj.signature=Fa;function nj(t){var e=Math.exp(2*t);return(e+1)/(e-1)}nj.signature=Fa;function rj(t){return 1/Math.sin(t)}rj.signature=Fa;function ij(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*Uf(t)}ij.signature=Fa;function aj(t){return 1/Math.cos(t)}aj.signature=Fa;function sj(t){return 2/(Math.exp(t)+Math.exp(-t))}sj.signature=Fa;function oj(t){return Cle(t)}oj.signature=Fa;var UM="number";function uj(t){return t<0}uj.signature=UM;function lj(t){return t>0}lj.signature=UM;function cj(t){return t===0}cj.signature=UM;function fj(t){return Number.isNaN(t)}fj.signature=UM;var zz="isNegative",cfe=["typed"],FM=ye(zz,cfe,function(t){var e=t.typed,n=e(zz,{number:uj,BigNumber:function(a){return a.isNeg()&&!a.isZero()&&!a.isNaN()},Fraction:function(a){return a.s<0},Unit:function(a){return n(a.value)},"Array | Matrix":function(a){return wt(a,n)}});return n}),qz="isNumeric",ffe=["typed"],BM=ye(qz,ffe,function(t){var e=t.typed,n=e(qz,{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(a){return wt(a,n)}});return n}),Gz="hasNumericValue",pfe=["typed","isNumeric"],zM=ye(Gz,pfe,function(t){var e=t.typed,n=t.isNumeric;return e(Gz,{string:function(a){return a.trim().length>0&&!isNaN(Number(a))},any:function(a){return n(a)}})}),Hz="isPositive",dfe=["typed"],qM=ye(Hz,dfe,function(t){var e=t.typed,n=e(Hz,{number:lj,BigNumber:function(a){return!a.isNeg()&&!a.isZero()&&!a.isNaN()},Fraction:function(a){return a.s>0&&a.n>0},Unit:function(a){return n(a.value)},"Array | Matrix":function(a){return wt(a,n)}});return n}),Vz="isZero",hfe=["typed"],GM=ye(Vz,hfe,function(t){var e=t.typed,n=e(Vz,{number:cj,BigNumber:function(a){return a.isZero()},Complex:function(a){return a.re===0&&a.im===0},Fraction:function(a){return a.d===1&&a.n===0},Unit:function(a){return n(a.value)},"Array | Matrix":function(a){return wt(a,n)}});return n}),Wz="isNaN",mfe=["typed"],HM=ye(Wz,mfe,function(t){var e=t.typed;return e(Wz,{number:fj,BigNumber:function(r){return r.isNaN()},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":function(r){return wt(r,Number.isNaN)}})}),xc=function(){var t={};return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=r.join(", ");if(!t[s]){var o;t[s]=!0,(o=console).warn.apply(o,["Warning:"].concat(r))}}}(),$z="typeOf",vfe=["typed"],VM=ye($z,vfe,function(t){var e=t.typed;return e($z,{any:ur})}),WM=ye("typeof",[],function(){return function(){xc('Function "typeof" has been renamed to "typeOf" in v6.0.0, please use the new function instead.');for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ur.apply(ur,e)}});function bp(t,e,n){if(n==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var a=t.constructor.max(t.abs(),e.abs());return r.lte(a.times(n))}return!1}function gfe(t,e,n){return bu(t.re,e.re,n)&&bu(t.im,e.im,n)}var lw="equalScalar",yfe=["typed","config"],$M=ye(lw,yfe,function(t){var e=t.typed,n=t.config,r=e(lw,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return bu(s,o,n.epsilon)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||bp(s,o,n.epsilon)},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return gfe(s,o,n.epsilon)},"Unit, Unit":function(s,o){if(!s.equalBase(o))throw new Error("Cannot compare units with different base");return r(s.value,o.value)}});return r});ye(lw,["typed","config"],function(t){var e=t.typed,n=t.config;return e(lw,{"number, number":function(a,s){return bu(a,s,n.epsilon)}})});var xfe="SparseMatrix",bfe=["typed","equalScalar","Matrix"],jM=ye(xfe,bfe,function(t){var e=t.typed,n=t.equalScalar,r=t.Matrix;function a(v,g){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!Ca(g))throw new Error("Invalid datatype: "+g);if(Dn(v))s(this,v,g);else if(v&&zn(v.index)&&zn(v.ptr)&&zn(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=g||v.datatype;else if(zn(v))o(this,v,g);else{if(v)throw new TypeError("Unsupported type of data ("+ur(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function s(v,g,y){g.type==="SparseMatrix"?(v._values=g._values?Ut(g._values):void 0,v._index=Ut(g._index),v._ptr=Ut(g._ptr),v._size=Ut(g._size),v._datatype=y||g._datatype):o(v,g.valueOf(),y||g._datatype)}function o(v,g,y){v._values=[],v._index=[],v._ptr=[],v._datatype=y;var _=g.length,x=0,M=n,A=0;if(Ca(y)&&(M=e.find(n,[y,y])||n,A=e.convert(0,y)),_>0){var E=0;do{v._ptr.push(v._index.length);for(var N=0;N<_;N++){var D=g[N];if(zn(D)){if(E===0&&x<D.length&&(x=D.length),E<D.length){var C=D[E];M(C,A)||(v._values.push(C),v._index.push(N))}}else E===0&&x<1&&(x=1),M(D,A)||(v._values.push(D),v._index.push(N))}E++}while(E<x)}v._ptr.push(v._index.length),v._size=[_,x]}a.prototype=new r,a.prototype.createSparseMatrix=function(v,g){return new a(v,g)},a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return Ly(this._values,ur)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(v,g){return new a(v,g)},a.prototype.density=function(){var v=this._size[0],g=this._size[1];return v!==0&&g!==0?this._index.length/(v*g):0},a.prototype.subset=function(v,g,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,v);case 2:case 3:return l(this,v,g,y);default:throw new SyntaxError("Wrong number of arguments")}};function u(v,g){if(!vp(g))throw new TypeError("Invalid index");var y=g.isScalar();if(y)return v.get(g.min());var _=g.size();if(_.length!==v._size.length)throw new nn(_.length,v._size.length);var x,M,A,E,N=g.min(),D=g.max();for(x=0,M=v._size.length;x<M;x++)_r(N[x],v._size[x]),_r(D[x],v._size[x]);var C=v._values,T=v._index,P=v._ptr,I=g.dimension(0),U=g.dimension(1),q=[],z=[];I.forEach(function(O,W){z[O]=W[0],q[O]=!0});var G=C?[]:void 0,F=[],k=[];return U.forEach(function(O){for(k.push(F.length),A=P[O],E=P[O+1];A<E;A++)x=T[A],q[x]===!0&&(F.push(z[x]),G&&G.push(C[A]))}),k.push(F.length),new a({values:G,index:F,ptr:k,size:_,datatype:v._datatype})}function l(v,g,y,_){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var x=g.size(),M=g.isScalar(),A;if(Dn(y)?(A=y.size(),y=y.toArray()):A=yn(y),M){if(A.length!==0)throw new TypeError("Scalar expected");v.set(g.min(),y,_)}else{if(x.length!==1&&x.length!==2)throw new nn(x.length,v._size.length,"<");if(A.length<x.length){for(var E=0,N=0;x[E]===1&&A[E]===1;)E++;for(;x[E]===1;)N++,E++;y=JW(y,x.length,N,A)}if(!fm(x,A))throw new nn(x,A,">");for(var D=g.min()[0],C=g.min()[1],T=A[0],P=A[1],I=0;I<T;I++)for(var U=0;U<P;U++){var q=y[I][U];v.set([I+D,U+C],q,_)}}return v}a.prototype.get=function(v){if(!zn(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new nn(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=v[0],y=v[1];_r(g,this._size[0]),_r(y,this._size[1]);var _=f(g,this._ptr[y],this._ptr[y+1],this._index);return _<this._ptr[y+1]&&this._index[_]===g?this._values[_]:0},a.prototype.set=function(v,g,y){if(!zn(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new nn(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var _=v[0],x=v[1],M=this._size[0],A=this._size[1],E=n,N=0;Ca(this._datatype)&&(E=e.find(n,[this._datatype,this._datatype])||n,N=e.convert(0,this._datatype)),(_>M-1||x>A-1)&&(d(this,Math.max(_+1,M),Math.max(x+1,A),y),M=this._size[0],A=this._size[1]),_r(_,M),_r(x,A);var D=f(_,this._ptr[x],this._ptr[x+1],this._index);return D<this._ptr[x+1]&&this._index[D]===_?E(g,N)?c(D,x,this._values,this._index,this._ptr):this._values[D]=g:p(D,_,x,g,this._values,this._index,this._ptr),this};function f(v,g,y,_){if(y-g===0)return y;for(var x=g;x<y;x++)if(_[x]===v)return x;return g}function c(v,g,y,_,x){y.splice(v,1),_.splice(v,1);for(var M=g+1;M<x.length;M++)x[M]--}function p(v,g,y,_,x,M,A){x.splice(v,0,_),M.splice(v,0,g);for(var E=y+1;E<A.length;E++)A[E]++}a.prototype.resize=function(v,g,y){if(!zn(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");v.forEach(function(x){if(!pn(x)||!Ot(x)||x<0)throw new TypeError("Invalid size, must contain positive integers (size: "+mn(v)+")")});var _=y?this.clone():this;return d(_,v[0],v[1],g)};function d(v,g,y,_){var x=_||0,M=n,A=0;Ca(v._datatype)&&(M=e.find(n,[v._datatype,v._datatype])||n,A=e.convert(0,v._datatype),x=e.convert(x,v._datatype));var E=!M(x,A),N=v._size[0],D=v._size[1],C,T,P;if(y>D){for(T=D;T<y;T++)if(v._ptr[T]=v._values.length,E)for(C=0;C<N;C++)v._values.push(x),v._index.push(C);v._ptr[y]=v._values.length}else y<D&&(v._ptr.splice(y+1,D-y),v._values.splice(v._ptr[y],v._values.length),v._index.splice(v._ptr[y],v._index.length));if(D=y,g>N){if(E){var I=0;for(T=0;T<D;T++){v._ptr[T]=v._ptr[T]+I,P=v._ptr[T+1]+I;var U=0;for(C=N;C<g;C++,U++)v._values.splice(P+U,0,x),v._index.splice(P+U,0,C),I++}v._ptr[D]=v._values.length}}else if(g<N){var q=0;for(T=0;T<D;T++){v._ptr[T]=v._ptr[T]-q;var z=v._ptr[T],G=v._ptr[T+1]-q;for(P=z;P<G;P++)C=v._index[P],C>g-1&&(v._values.splice(P,1),v._index.splice(P,1),q++)}v._ptr[T]=v._values.length}return v._size[0]=g,v._size[1]=y,v}a.prototype.reshape=function(v,g){if(!zn(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(v.forEach(function(F){if(!pn(F)||!Ot(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+mn(v)+")")}),this._size[0]*this._size[1]!==v[0]*v[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=g?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return y;for(var _=[],x=0;x<y._ptr.length;x++)for(var M=0;M<y._ptr[x+1]-y._ptr[x];M++)_.push(x);for(var A=y._values.slice(),E=y._index.slice(),N=0;N<y._index.length;N++){var D=E[N],C=_[N],T=D*y._size[1]+C;_[N]=T%v[1],E[N]=Math.floor(T/v[1])}y._values.length=0,y._index.length=0,y._ptr.length=v[1]+1,y._size=v.slice();for(var P=0;P<y._ptr.length;P++)y._ptr[P]=0;for(var I=0;I<A.length;I++){var U=E[I],q=_[I],z=A[I],G=f(U,y._ptr[q],y._ptr[q+1],y._index);p(G,U,q,z,y._values,y._index,y._ptr)}return y},a.prototype.clone=function(){var v=new a({values:this._values?Ut(this._values):void 0,index:Ut(this._index),ptr:Ut(this._ptr),size:Ut(this._size),datatype:this._datatype});return v},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(v,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,_=this._size[0],x=this._size[1],M=function(E,N,D){return v(E,[N,D],y)};return h(this,0,_-1,0,x-1,M,g)};function h(v,g,y,_,x,M,A){var E=[],N=[],D=[],C=n,T=0;Ca(v._datatype)&&(C=e.find(n,[v._datatype,v._datatype])||n,T=e.convert(0,v._datatype));for(var P=function(J,Y,ie){J=M(J,Y,ie),C(J,T)||(E.push(J),N.push(Y))},I=_;I<=x;I++){D.push(E.length);var U=v._ptr[I],q=v._ptr[I+1];if(A)for(var z=U;z<q;z++){var G=v._index[z];G>=g&&G<=y&&P(v._values[z],G-g,I-_)}else{for(var F={},k=U;k<q;k++){var O=v._index[k];F[O]=v._values[k]}for(var W=g;W<=y;W++){var X=W in F?F[W]:0;P(X,W-g,I-_)}}}return D.push(E.length),new a({values:E,index:N,ptr:D,size:[y-g+1,x-_+1]})}a.prototype.forEach=function(v,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,_=this._size[0],x=this._size[1],M=0;M<x;M++){var A=this._ptr[M],E=this._ptr[M+1];if(g)for(var N=A;N<E;N++){var D=this._index[N];v(this._values[N],[D,M],y)}else{for(var C={},T=A;T<E;T++){var P=this._index[T];C[P]=this._values[T]}for(var I=0;I<_;I++){var U=I in C?C[I]:0;v(U,[I,M],y)}}}},a.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(v,g,y,_,x){var M=_[0],A=_[1],E=[],N,D;for(N=0;N<M;N++)for(E[N]=[],D=0;D<A;D++)E[N][D]=0;for(D=0;D<A;D++)for(var C=y[D],T=y[D+1],P=C;P<T;P++)N=g[P],E[N][D]=v?x?Ut(v[P]):v[P]:1;return E}return a.prototype.format=function(v){for(var g=this._size[0],y=this._size[1],_=this.density(),x="Sparse Matrix ["+mn(g,v)+" x "+mn(y,v)+"] density: "+mn(_,v)+`
`,M=0;M<y;M++)for(var A=this._ptr[M],E=this._ptr[M+1],N=A;N<E;N++){var D=this._index[N];x+=`
    (`+mn(D,v)+", "+mn(M,v)+") ==> "+(this._values?mn(this._values[N],v):"X")}return x},a.prototype.toString=function(){return mn(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(v){if(v){if(Jt(v)&&(v=v.toNumber()),!pn(v)||!Ot(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var g=v>0?v:0,y=v<0?-v:0,_=this._size[0],x=this._size[1],M=Math.min(_-y,x-g),A=[],E=[],N=[];N[0]=0;for(var D=g;D<x&&A.length<M;D++)for(var C=this._ptr[D],T=this._ptr[D+1],P=C;P<T;P++){var I=this._index[P];if(I===D-g+y){A.push(this._values[P]),E[A.length-1]=I-y;break}}return N.push(A.length),new a({values:A,index:E,ptr:N,size:[M,1]})},a.fromJSON=function(v){return new a(v)},a.diagonal=function(v,g,y,_,x){if(!zn(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(O){if(Jt(O)&&(O=O.toNumber()),!pn(O)||!Ot(O)||O<1)throw new Error("Size values must be positive integers");return O}),y){if(Jt(y)&&(y=y.toNumber()),!pn(y)||!Ot(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var M=n,A=0;Ca(x)&&(M=e.find(n,[x,x])||n,A=e.convert(0,x));var E=y>0?y:0,N=y<0?-y:0,D=v[0],C=v[1],T=Math.min(D-N,C-E),P;if(zn(g)){if(g.length!==T)throw new Error("Invalid value array length");P=function(W){return g[W]}}else if(Dn(g)){var I=g.size();if(I.length!==1||I[0]!==T)throw new Error("Invalid matrix length");P=function(W){return g.get([W])}}else P=function(){return g};for(var U=[],q=[],z=[],G=0;G<C;G++){z.push(U.length);var F=G-E;if(F>=0&&F<T){var k=P(F);M(k,A)||(q.push(F+N),U.push(k))}}return z.push(U.length),new a({values:U,index:q,ptr:z,size:[D,C]})},a.prototype.swapRows=function(v,g){if(!pn(v)||!Ot(v)||!pn(g)||!Ot(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return _r(v,this._size[0]),_r(g,this._size[0]),a._swapRows(v,g,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(v,g,y,_,x){for(var M=_[v],A=_[v+1],E=M;E<A;E++)x(y[E],g[E])},a._swapRows=function(v,g,y,_,x,M){for(var A=0;A<y;A++){var E=M[A],N=M[A+1],D=f(v,E,N,x),C=f(g,E,N,x);if(D<N&&C<N&&x[D]===v&&x[C]===g){if(_){var T=_[D];_[D]=_[C],_[C]=T}continue}if(D<N&&x[D]===v&&(C>=N||x[C]!==g)){var P=_?_[D]:void 0;x.splice(C,0,g),_&&_.splice(C,0,P),x.splice(C<=D?D+1:D,1),_&&_.splice(C<=D?D+1:D,1);continue}if(C<N&&x[C]===g&&(D>=N||x[D]!==v)){var I=_?_[C]:void 0;x.splice(D,0,v),_&&_.splice(D,0,I),x.splice(D<=C?C+1:C,1),_&&_.splice(D<=C?C+1:C,1)}}},a},{isClass:!0}),Sfe="number",wfe=["typed"],XM=ye(Sfe,wfe,function(t){var e=t.typed,n=e("number",{"":function(){return 0},number:function(a){return a},string:function(a){if(a==="NaN")return NaN;var s=Number(a);if(isNaN(s))throw new SyntaxError('String "'+a+'" is no valid number');return s},BigNumber:function(a){return a.toNumber()},Fraction:function(a){return a.valueOf()},Unit:function(a){throw new Error("Second argument with valueless unit expected")},null:function(a){return 0},"Unit, string | Unit":function(a,s){return a.toNumber(s)},"Array | Matrix":function(a){return wt(a,n)}});return n.fromJSON=function(r){return parseFloat(r.value)},n}),jz="string",_fe=["typed"],YM=ye(jz,_fe,function(t){var e=t.typed,n=e(jz,{"":function(){return""},number:Ld,null:function(a){return"null"},boolean:function(a){return a+""},string:function(a){return a},"Array | Matrix":function(a){return wt(a,n)},any:function(a){return String(a)}});return n}),Xz="boolean",Mfe=["typed"],QM=ye(Xz,Mfe,function(t){var e=t.typed,n=e(Xz,{"":function(){return!1},boolean:function(a){return a},number:function(a){return!!a},null:function(a){return!1},BigNumber:function(a){return!a.isZero()},string:function(a){var s=a.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;var o=Number(a);if(a!==""&&!isNaN(o))return!!o;throw new Error('Cannot convert "'+a+'" to a boolean')},"Array | Matrix":function(a){return wt(a,n)}});return n}),Efe="bignumber",Tfe=["typed","BigNumber"],ZM=ye(Efe,Tfe,function(t){var e=t.typed,n=t.BigNumber,r=e("bignumber",{"":function(){return new n(0)},number:function(s){return new n(s+"")},string:function(s){return new n(s)},BigNumber:function(s){return s},Fraction:function(s){return new n(s.n).div(s.d).times(s.s)},null:function(s){return new n(0)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Afe="complex",Nfe=["typed","Complex"],JM=ye(Afe,Nfe,function(t){var e=t.typed,n=t.Complex,r=e("complex",{"":function(){return n.ZERO},number:function(s){return new n(s,0)},"number, number":function(s,o){return new n(s,o)},"BigNumber, BigNumber":function(s,o){return new n(s.toNumber(),o.toNumber())},Fraction:function(s){return new n(s.valueOf(),0)},Complex:function(s){return s.clone()},string:function(s){return n(s)},null:function(s){return n(0)},Object:function(s){if("re"in s&&"im"in s)return new n(s.re,s.im);if("r"in s&&"phi"in s||"abs"in s&&"arg"in s)return new n(s);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(s){return wt(s,r)}});return r}),Cfe="fraction",Dfe=["typed","Fraction"],KM=ye(Cfe,Dfe,function(t){var e=t.typed,n=t.Fraction,r=e("fraction",{number:function(s){if(!isFinite(s)||isNaN(s))throw new Error(s+" cannot be represented as a fraction");return new n(s)},string:function(s){return new n(s)},"number, number":function(s,o){return new n(s,o)},null:function(s){return new n(0)},BigNumber:function(s){return new n(s.toString())},Fraction:function(s){return s},Object:function(s){return new n(s)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Yz="matrix",Rfe=["typed","Matrix","DenseMatrix","SparseMatrix"],eE=ye(Yz,Rfe,function(t){var e=t.typed;t.Matrix;var n=t.DenseMatrix,r=t.SparseMatrix;return e(Yz,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,u){return a([],o,u)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,o,u){if(o==="dense"||o==="default"||o===void 0)return new n(s,u);if(o==="sparse")return new r(s,u);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),Qz="splitUnit",Ife=["typed"],tE=ye(Qz,Ife,function(t){var e=t.typed;return e(Qz,{"Unit, Array":function(r,a){return r.splitUnit(a)}})}),Zz="unaryMinus",Pfe=["typed"],nE=ye(Zz,Pfe,function(t){var e=t.typed,n=e(Zz,{number:y$,Complex:function(a){return a.neg()},BigNumber:function(a){return a.neg()},Fraction:function(a){return a.neg()},Unit:function(a){var s=a.clone();return s.value=n(a.value),s},"Array | Matrix":function(a){return wt(a,n)}});return n}),Jz="unaryPlus",Ofe=["typed","config","BigNumber"],rE=ye(Jz,Ofe,function(t){var e=t.typed,n=t.config,r=t.BigNumber,a=e(Jz,{number:x$,Complex:function(o){return o},BigNumber:function(o){return o},Fraction:function(o){return o},Unit:function(o){return o.clone()},"Array | Matrix":function(o){return wt(o,a)},"boolean | string":function(o){return n.number==="BigNumber"?new r(+o):+o}});return a}),Kz="abs",Lfe=["typed"],iE=ye(Kz,Lfe,function(t){var e=t.typed,n=e(Kz,{number:m$,Complex:function(a){return a.abs()},BigNumber:function(a){return a.abs()},Fraction:function(a){return a.abs()},"Array | Matrix":function(a){return wt(a,n)},Unit:function(a){return a.abs()}});return n}),e6="apply",kfe=["typed","isInteger"],P1=ye(e6,kfe,function(t){var e=t.typed,n=t.isInteger,r=e(e6,{"Array | Matrix, number | BigNumber, function":function(s,o,u){if(!n(o))throw new TypeError("Integer number expected for dimension");var l=Array.isArray(s)?yn(s):s.size();if(o<0||o>=l.length)throw new po(o,l.length);return Dn(s)?s.create(cw(s.valueOf(),o,u)):cw(s,o,u)}});return r});function cw(t,e,n){var r,a,s;if(e<=0)if(Array.isArray(t[0])){for(s=Ufe(t),a=[],r=0;r<s.length;r++)a[r]=cw(s[r],e-1,n);return a}else return n(t);else{for(a=[],r=0;r<t.length;r++)a[r]=cw(t[r],e-1,n);return a}}function Ufe(t){var e=t.length,n=t[0].length,r,a,s=[];for(a=0;a<n;a++){var o=[];for(r=0;r<e;r++)o.push(t[r][a]);s.push(o)}return s}var t6="addScalar",Ffe=["typed"],aE=ye(t6,Ffe,function(t){var e=t.typed,n=e(t6,{"number, number":v$,"Complex, Complex":function(a,s){return a.add(s)},"BigNumber, BigNumber":function(a,s){return a.plus(s)},"Fraction, Fraction":function(a,s){return a.add(s)},"Unit, Unit":function(a,s){if(a.value===null||a.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(s.value===null||s.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!a.equalBase(s))throw new Error("Units do not match");var o=a.clone();return o.value=n(o.value,s.value),o.fixPrefix=!1,o}});return n}),n6="cbrt",Bfe=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],sE=ye(n6,Bfe,function(t){var e=t.config,n=t.typed,r=t.isNegative,a=t.unaryMinus,s=t.matrix,o=t.Complex,u=t.BigNumber,l=t.Fraction,f=n(n6,{number:Ng,Complex:c,"Complex, boolean":c,BigNumber:function(h){return h.cbrt()},Unit:p,"Array | Matrix":function(h){return wt(h,f)}});function c(d,h){var m=d.arg()/3,v=d.abs(),g=new o(Ng(v),0).mul(new o(0,m).exp());if(h){var y=[g,new o(Ng(v),0).mul(new o(0,m+Math.PI*2/3).exp()),new o(Ng(v),0).mul(new o(0,m-Math.PI*2/3).exp())];return e.matrix==="Array"?y:s(y)}else return g}function p(d){if(d.value&&qo(d.value)){var h=d.clone();return h.value=1,h=h.pow(1/3),h.value=c(d.value),h}else{var m=r(d.value);m&&(d.value=a(d.value));var v;Jt(d.value)?v=new u(1).div(3):kc(d.value)?v=new l(1,3):v=1/3;var g=d.pow(v);return m&&(g.value=a(g.value)),g}}return f}),zfe="ceil",qfe=["typed","config","round"],oE=ye(zfe,qfe,function(t){var e=t.typed,n=t.config,r=t.round,a=e("ceil",{number:function(o){return bu(o,r(o),n.epsilon)?r(o):b$(o)},Complex:function(o){return o.ceil()},BigNumber:function(o){return bp(o,r(o),n.epsilon)?r(o):o.ceil()},Fraction:function(o){return o.ceil()},"Array | Matrix":function(o){return wt(o,a)}});return a}),r6="cube",Gfe=["typed"],uE=ye(r6,Gfe,function(t){var e=t.typed,n=e(r6,{number:S$,Complex:function(a){return a.mul(a).mul(a)},BigNumber:function(a){return a.times(a).times(a)},Fraction:function(a){return a.pow(3)},"Array | Matrix":function(a){return wt(a,n)},Unit:function(a){return a.pow(3)}});return n}),i6="exp",Hfe=["typed"],lE=ye(i6,Hfe,function(t){var e=t.typed,n=e(i6,{number:w$,Complex:function(a){return a.exp()},BigNumber:function(a){return a.exp()},"Array | Matrix":function(a){return wt(a,n)}});return n}),a6="expm1",Vfe=["typed","Complex"],cE=ye(a6,Vfe,function(t){var e=t.typed,n=t.Complex,r=e(a6,{number:_$,Complex:function(s){var o=Math.exp(s.re);return new n(o*Math.cos(s.im)-1,o*Math.sin(s.im))},BigNumber:function(s){return s.exp().minus(1)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Wfe="fix",$fe=["typed","Complex","ceil","floor"],fE=ye(Wfe,$fe,function(t){var e=t.typed,n=t.Complex,r=t.ceil,a=t.floor,s=e("fix",{number:function(u){return u>0?a(u):r(u)},Complex:function(u){return new n(u.re>0?Math.floor(u.re):Math.ceil(u.re),u.im>0?Math.floor(u.im):Math.ceil(u.im))},BigNumber:function(u){return u.isNegative()?r(u):a(u)},Fraction:function(u){return u.s<0?u.ceil():u.floor()},"Array | Matrix":function(u){return wt(u,s)}});return s}),jfe="floor",Xfe=["typed","config","round"],pE=ye(jfe,Xfe,function(t){var e=t.typed,n=t.config,r=t.round,a=e("floor",{number:function(o){return bu(o,r(o),n.epsilon)?r(o):Math.floor(o)},Complex:function(o){return o.floor()},BigNumber:function(o){return bp(o,r(o),n.epsilon)?r(o):o.floor()},Fraction:function(o){return o.floor()},"Array | Matrix":function(o){return wt(o,a)}});return a}),Yfe="algorithm01",Qfe=["typed"],Sp=ye(Yfe,Qfe,function(t){var e=t.typed;return function(r,a,s,o){var u=r._data,l=r._size,f=r._datatype,c=a._values,p=a._index,d=a._ptr,h=a._size,m=a._datatype;if(l.length!==h.length)throw new nn(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],g=l[1],y=typeof f=="string"&&f===m?f:void 0,_=y?e.find(s,[y,y]):s,x,M,A=[];for(x=0;x<v;x++)A[x]=[];var E=[],N=[];for(M=0;M<g;M++){for(var D=M+1,C=d[M],T=d[M+1],P=C;P<T;P++)x=p[P],E[x]=o?_(c[P],u[x][M]):_(u[x][M],c[P]),N[x]=D;for(x=0;x<v;x++)N[x]===D?A[x][M]=E[x]:A[x][M]=u[x][M]}return r.createDenseMatrix({data:A,size:[v,g],datatype:y})}}),Zfe="algorithm04",Jfe=["typed","equalScalar"],iU=ye(Zfe,Jfe,function(t){var e=t.typed,n=t.equalScalar;return function(a,s,o){var u=a._values,l=a._index,f=a._ptr,c=a._size,p=a._datatype,d=s._values,h=s._index,m=s._ptr,v=s._size,g=s._datatype;if(c.length!==v.length)throw new nn(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var y=c[0],_=c[1],x,M=n,A=0,E=o;typeof p=="string"&&p===g&&(x=p,M=e.find(n,[x,x]),A=e.convert(0,x),E=e.find(o,[x,x]));var N=u&&d?[]:void 0,D=[],C=[],T=u&&d?[]:void 0,P=u&&d?[]:void 0,I=[],U=[],q,z,G,F,k;for(z=0;z<_;z++){C[z]=D.length;var O=z+1;for(F=f[z],k=f[z+1],G=F;G<k;G++)q=l[G],D.push(q),I[q]=O,T&&(T[q]=u[G]);for(F=m[z],k=m[z+1],G=F;G<k;G++)if(q=h[G],I[q]===O){if(T){var W=E(T[q],d[G]);M(W,A)?I[q]=null:T[q]=W}}else D.push(q),U[q]=O,P&&(P[q]=d[G]);if(T&&P)for(G=C[z];G<D.length;)q=D[G],I[q]===O?(N[G]=T[q],G++):U[q]===O?(N[G]=P[q],G++):D.splice(G,1)}return C[_]=D.length,a.createSparseMatrix({values:N,index:D,ptr:C,size:[y,_],datatype:x})}}),Kfe="algorithm10",epe=["typed","DenseMatrix"],gh=ye(Kfe,epe,function(t){var e=t.typed,n=t.DenseMatrix;return function(a,s,o,u){var l=a._values,f=a._index,c=a._ptr,p=a._size,d=a._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=p[0],m=p[1],v,g=o;typeof d=="string"&&(v=d,s=e.convert(s,v),g=e.find(o,[v,v]));for(var y=[],_=[],x=[],M=0;M<m;M++){for(var A=M+1,E=c[M],N=c[M+1],D=E;D<N;D++){var C=f[D];_[C]=l[D],x[C]=A}for(var T=0;T<h;T++)M===0&&(y[T]=[]),x[T]===A?y[T][M]=u?g(s,_[T]):g(_[T],s):y[T][M]=s}return new n({data:y,size:[h,m],datatype:v})}}),tpe="algorithm13",npe=["typed"],pr=ye(tpe,npe,function(t){var e=t.typed;return function(a,s,o){var u=a._data,l=a._size,f=a._datatype,c=s._data,p=s._size,d=s._datatype,h=[];if(l.length!==p.length)throw new nn(l.length,p.length);for(var m=0;m<l.length;m++){if(l[m]!==p[m])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");h[m]=l[m]}var v,g=o;typeof f=="string"&&f===d&&(v=f,g=e.find(o,[v,v]));var y=h.length>0?n(g,0,h,h[0],u,c):[];return a.createDenseMatrix({data:y,size:h,datatype:v})};function n(r,a,s,o,u,l){var f=[];if(a===s.length-1)for(var c=0;c<o;c++)f[c]=r(u[c],l[c]);else for(var p=0;p<o;p++)f[p]=n(r,a+1,s,s[a+1],u[p],l[p]);return f}}),rpe="algorithm14",ipe=["typed"],Jn=ye(rpe,ipe,function(t){var e=t.typed;return function(a,s,o,u){var l=a._data,f=a._size,c=a._datatype,p,d=o;typeof c=="string"&&(p=c,s=e.convert(s,p),d=e.find(o,[p,p]));var h=f.length>0?n(d,0,f,f[0],l,s,u):[];return a.createDenseMatrix({data:h,size:Ut(f),datatype:p})};function n(r,a,s,o,u,l,f){var c=[];if(a===s.length-1)for(var p=0;p<o;p++)c[p]=f?r(l,u[p]):r(u[p],l);else for(var d=0;d<o;d++)c[d]=n(r,a+1,s,s[a+1],u[d],l,f);return c}}),s6="gcd",ape=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],dE=ye(s6,ape,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.BigNumber,s=t.DenseMatrix,o=Sp({typed:e}),u=iU({typed:e,equalScalar:r}),l=gh({typed:e,DenseMatrix:s}),f=pr({typed:e}),c=Jn({typed:e}),p=e(s6,{"number, number":M$,"BigNumber, BigNumber":d,"Fraction, Fraction":function(m,v){return m.gcd(v)},"SparseMatrix, SparseMatrix":function(m,v){return u(m,v,p)},"SparseMatrix, DenseMatrix":function(m,v){return o(v,m,p,!0)},"DenseMatrix, SparseMatrix":function(m,v){return o(m,v,p,!1)},"DenseMatrix, DenseMatrix":function(m,v){return f(m,v,p)},"Array, Array":function(m,v){return p(n(m),n(v)).valueOf()},"Array, Matrix":function(m,v){return p(n(m),v)},"Matrix, Array":function(m,v){return p(m,n(v))},"SparseMatrix, number | BigNumber":function(m,v){return l(m,v,p,!1)},"DenseMatrix, number | BigNumber":function(m,v){return c(m,v,p,!1)},"number | BigNumber, SparseMatrix":function(m,v){return l(v,m,p,!0)},"number | BigNumber, DenseMatrix":function(m,v){return c(v,m,p,!0)},"Array, number | BigNumber":function(m,v){return c(n(m),v,p,!1).valueOf()},"number | BigNumber, Array":function(m,v){return c(n(v),m,p,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(m,v,g){for(var y=p(m,v),_=0;_<g.length;_++)y=p(y,g[_]);return y}});return p;function d(h,m){if(!h.isInt()||!m.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var v=new a(0);!m.isZero();){var g=h.mod(m);h=m,m=g}return h.lt(v)?h.neg():h}}),spe="algorithm02",ope=["typed","equalScalar"],Du=ye(spe,ope,function(t){var e=t.typed,n=t.equalScalar;return function(a,s,o,u){var l=a._data,f=a._size,c=a._datatype,p=s._values,d=s._index,h=s._ptr,m=s._size,v=s._datatype;if(f.length!==m.length)throw new nn(f.length,m.length);if(f[0]!==m[0]||f[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+m+")");if(!p)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=f[0],y=f[1],_,x=n,M=0,A=o;typeof c=="string"&&c===v&&(_=c,x=e.find(n,[_,_]),M=e.convert(0,_),A=e.find(o,[_,_]));for(var E=[],N=[],D=[],C=0;C<y;C++){D[C]=N.length;for(var T=h[C],P=h[C+1],I=T;I<P;I++){var U=d[I],q=u?A(p[I],l[U][C]):A(l[U][C],p[I]);x(q,M)||(N.push(U),E.push(q))}}return D[y]=N.length,s.createSparseMatrix({values:E,index:N,ptr:D,size:[g,y],datatype:_})}}),upe="algorithm06",lpe=["typed","equalScalar"],hE=ye(upe,lpe,function(t){var e=t.typed,n=t.equalScalar;return function(a,s,o){var u=a._values,l=a._size,f=a._datatype,c=s._values,p=s._size,d=s._datatype;if(l.length!==p.length)throw new nn(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");var h=l[0],m=l[1],v,g=n,y=0,_=o;typeof f=="string"&&f===d&&(v=f,g=e.find(n,[v,v]),y=e.convert(0,v),_=e.find(o,[v,v]));for(var x=u&&c?[]:void 0,M=[],A=[],E=x?[]:void 0,N=[],D=[],C=0;C<m;C++){A[C]=M.length;var T=C+1;if(Fz(a,C,N,E,D,T,M,_),Fz(s,C,N,E,D,T,M,_),E)for(var P=A[C];P<M.length;){var I=M[P];if(D[I]===T){var U=E[I];g(U,y)?M.splice(P,1):(x.push(U),P++)}else M.splice(P,1)}else for(var q=A[C];q<M.length;){var z=M[q];D[z]!==T?M.splice(q,1):q++}}return A[m]=M.length,a.createSparseMatrix({values:x,index:M,ptr:A,size:[h,m],datatype:v})}}),cpe="algorithm11",fpe=["typed","equalScalar"],ps=ye(cpe,fpe,function(t){var e=t.typed,n=t.equalScalar;return function(a,s,o,u){var l=a._values,f=a._index,c=a._ptr,p=a._size,d=a._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=p[0],m=p[1],v,g=n,y=0,_=o;typeof d=="string"&&(v=d,g=e.find(n,[v,v]),y=e.convert(0,v),s=e.convert(s,v),_=e.find(o,[v,v]));for(var x=[],M=[],A=[],E=0;E<m;E++){A[E]=M.length;for(var N=c[E],D=c[E+1],C=N;C<D;C++){var T=f[C],P=u?_(s,l[C]):_(l[C],s);g(P,y)||(M.push(T),x.push(P))}}return A[m]=M.length,a.createSparseMatrix({values:x,index:M,ptr:A,size:[h,m],datatype:v})}}),o6="lcm",ppe=["typed","matrix","equalScalar"],mE=ye(o6,ppe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=Du({typed:e,equalScalar:r}),s=hE({typed:e,equalScalar:r}),o=ps({typed:e,equalScalar:r}),u=pr({typed:e}),l=Jn({typed:e}),f=e(o6,{"number, number":E$,"BigNumber, BigNumber":c,"Fraction, Fraction":function(d,h){return d.lcm(h)},"SparseMatrix, SparseMatrix":function(d,h){return s(d,h,f)},"SparseMatrix, DenseMatrix":function(d,h){return a(h,d,f,!0)},"DenseMatrix, SparseMatrix":function(d,h){return a(d,h,f,!1)},"DenseMatrix, DenseMatrix":function(d,h){return u(d,h,f)},"Array, Array":function(d,h){return f(n(d),n(h)).valueOf()},"Array, Matrix":function(d,h){return f(n(d),h)},"Matrix, Array":function(d,h){return f(d,n(h))},"SparseMatrix, number | BigNumber":function(d,h){return o(d,h,f,!1)},"DenseMatrix, number | BigNumber":function(d,h){return l(d,h,f,!1)},"number | BigNumber, SparseMatrix":function(d,h){return o(h,d,f,!0)},"number | BigNumber, DenseMatrix":function(d,h){return l(h,d,f,!0)},"Array, number | BigNumber":function(d,h){return l(n(d),h,f,!1).valueOf()},"number | BigNumber, Array":function(d,h){return l(n(h),d,f,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(d,h,m){for(var v=f(d,h),g=0;g<m.length;g++)v=f(v,m[g]);return v}});return f;function c(p,d){if(!p.isInt()||!d.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(p.isZero())return p;if(d.isZero())return d;for(var h=p.times(d);!d.isZero();){var m=d;d=p.mod(m),p=m}return h.div(p).abs()}}),u6="log10",dpe=["typed","config","Complex"],vE=ye(u6,dpe,function(t){var e=t.typed,n=t.config,r=t.Complex,a=e(u6,{number:function(o){return o>=0||n.predictable?A$(o):new r(o,0).log().div(Math.LN10)},Complex:function(o){return new r(o).log().div(Math.LN10)},BigNumber:function(o){return!o.isNegative()||n.predictable?o.log():new r(o.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":function(o){return wt(o,a)}});return a}),l6="log2",hpe=["typed","config","Complex"],gE=ye(l6,hpe,function(t){var e=t.typed,n=t.config,r=t.Complex,a=e(l6,{number:function(u){return u>=0||n.predictable?N$(u):s(new r(u,0))},Complex:s,BigNumber:function(u){return!u.isNegative()||n.predictable?u.log(2):s(new r(u.toNumber(),0))},"Array | Matrix":function(u){return wt(u,a)}});function s(o){var u=Math.sqrt(o.re*o.re+o.im*o.im);return new r(Math.log2?Math.log2(u):Math.log(u)/Math.LN2,Math.atan2(o.im,o.re)/Math.LN2)}return a}),mpe="algorithm03",vpe=["typed"],ds=ye(mpe,vpe,function(t){var e=t.typed;return function(r,a,s,o){var u=r._data,l=r._size,f=r._datatype,c=a._values,p=a._index,d=a._ptr,h=a._size,m=a._datatype;if(l.length!==h.length)throw new nn(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],g=l[1],y,_=0,x=s;typeof f=="string"&&f===m&&(y=f,_=e.convert(0,y),x=e.find(s,[y,y]));for(var M=[],A=0;A<v;A++)M[A]=[];for(var E=[],N=[],D=0;D<g;D++){for(var C=D+1,T=d[D],P=d[D+1],I=T;I<P;I++){var U=p[I];E[U]=o?x(c[I],u[U][D]):x(u[U][D],c[I]),N[U]=C}for(var q=0;q<v;q++)N[q]===C?M[q][D]=E[q]:M[q][D]=o?x(_,u[q][D]):x(u[q][D],_)}return r.createDenseMatrix({data:M,size:[v,g],datatype:y})}}),gpe="algorithm05",ype=["typed","equalScalar"],yE=ye(gpe,ype,function(t){var e=t.typed,n=t.equalScalar;return function(a,s,o){var u=a._values,l=a._index,f=a._ptr,c=a._size,p=a._datatype,d=s._values,h=s._index,m=s._ptr,v=s._size,g=s._datatype;if(c.length!==v.length)throw new nn(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var y=c[0],_=c[1],x,M=n,A=0,E=o;typeof p=="string"&&p===g&&(x=p,M=e.find(n,[x,x]),A=e.convert(0,x),E=e.find(o,[x,x]));var N=u&&d?[]:void 0,D=[],C=[],T=N?[]:void 0,P=N?[]:void 0,I=[],U=[],q,z,G,F;for(z=0;z<_;z++){C[z]=D.length;var k=z+1;for(G=f[z],F=f[z+1];G<F;G++)q=l[G],D.push(q),I[q]=k,T&&(T[q]=u[G]);for(G=m[z],F=m[z+1];G<F;G++)q=h[G],I[q]!==k&&D.push(q),U[q]=k,P&&(P[q]=d[G]);if(N)for(G=C[z];G<D.length;){q=D[G];var O=I[q],W=U[q];if(O===k||W===k){var X=O===k?T[q]:A,ee=W===k?P[q]:A,J=E(X,ee);M(J,A)?D.splice(G,1):(N.push(J),G++)}}}return C[_]=D.length,a.createSparseMatrix({values:N,index:D,ptr:C,size:[y,_],datatype:x})}}),xpe="algorithm12",bpe=["typed","DenseMatrix"],hs=ye(xpe,bpe,function(t){var e=t.typed,n=t.DenseMatrix;return function(a,s,o,u){var l=a._values,f=a._index,c=a._ptr,p=a._size,d=a._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=p[0],m=p[1],v,g=o;typeof d=="string"&&(v=d,s=e.convert(s,v),g=e.find(o,[v,v]));for(var y=[],_=[],x=[],M=0;M<m;M++){for(var A=M+1,E=c[M],N=c[M+1],D=E;D<N;D++){var C=f[D];_[C]=l[D],x[C]=A}for(var T=0;T<h;T++)M===0&&(y[T]=[]),x[T]===A?y[T][M]=u?g(s,_[T]):g(_[T],s):y[T][M]=u?g(s,0):g(0,s)}return new n({data:y,size:[h,m],datatype:v})}}),c6="mod",Spe=["typed","matrix","equalScalar","DenseMatrix"],xE=ye(c6,Spe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.DenseMatrix,s=Du({typed:e,equalScalar:r}),o=ds({typed:e}),u=yE({typed:e,equalScalar:r}),l=ps({typed:e,equalScalar:r}),f=hs({typed:e,DenseMatrix:a}),c=pr({typed:e}),p=Jn({typed:e}),d=e(c6,{"number, number":C$,"BigNumber, BigNumber":function(m,v){return v.isZero()?m:m.mod(v)},"Fraction, Fraction":function(m,v){return m.mod(v)},"SparseMatrix, SparseMatrix":function(m,v){return u(m,v,d,!1)},"SparseMatrix, DenseMatrix":function(m,v){return s(v,m,d,!0)},"DenseMatrix, SparseMatrix":function(m,v){return o(m,v,d,!1)},"DenseMatrix, DenseMatrix":function(m,v){return c(m,v,d)},"Array, Array":function(m,v){return d(n(m),n(v)).valueOf()},"Array, Matrix":function(m,v){return d(n(m),v)},"Matrix, Array":function(m,v){return d(m,n(v))},"SparseMatrix, any":function(m,v){return l(m,v,d,!1)},"DenseMatrix, any":function(m,v){return p(m,v,d,!1)},"any, SparseMatrix":function(m,v){return f(v,m,d,!0)},"any, DenseMatrix":function(m,v){return p(v,m,d,!0)},"Array, any":function(m,v){return p(n(m),v,d,!1).valueOf()},"any, Array":function(m,v){return p(n(v),m,d,!0).valueOf()}});return d}),wpe="multiplyScalar",_pe=["typed"],bE=ye(wpe,_pe,function(t){var e=t.typed,n=e("multiplyScalar",{"number, number":g$,"Complex, Complex":function(a,s){return a.mul(s)},"BigNumber, BigNumber":function(a,s){return a.times(s)},"Fraction, Fraction":function(a,s){return a.mul(s)},"number | Fraction | BigNumber | Complex, Unit":function(a,s){var o=s.clone();return o.value=o.value===null?o._normalize(a):n(o.value,a),o},"Unit, number | Fraction | BigNumber | Complex":function(a,s){var o=a.clone();return o.value=o.value===null?o._normalize(s):n(o.value,s),o},"Unit, Unit":function(a,s){return a.multiply(s)}});return n}),f6="multiply",Mpe=["typed","matrix","addScalar","multiplyScalar","equalScalar"],SE=ye(f6,Mpe,function(t){var e=t.typed,n=t.matrix,r=t.addScalar,a=t.multiplyScalar,s=t.equalScalar,o=ps({typed:e,equalScalar:s}),u=Jn({typed:e}),l=e(f6,xM({"Array, Array":function(E,N){f(yn(E),yn(N));var D=l(n(E),n(N));return Dn(D)?D.valueOf():D},"Matrix, Matrix":function(E,N){var D=E.size(),C=N.size();return f(D,C),D.length===1?C.length===1?c(E,N,D[0]):p(E,N):C.length===1?h(E,N):m(E,N)},"Matrix, Array":function(E,N){return l(E,n(N))},"Array, Matrix":function(E,N){return l(n(E,N.storage()),N)},"SparseMatrix, any":function(E,N){return o(E,N,a,!1)},"DenseMatrix, any":function(E,N){return u(E,N,a,!1)},"any, SparseMatrix":function(E,N){return o(N,E,a,!0)},"any, DenseMatrix":function(E,N){return u(N,E,a,!0)},"Array, any":function(E,N){return u(n(E),N,a,!1).valueOf()},"any, Array":function(E,N){return u(n(N),E,a,!0).valueOf()},"any, any":a,"any, any, ...any":function(E,N,D){for(var C=l(E,N),T=0;T<D.length;T++)C=l(C,D[T]);return C}},a.signatures));function f(A,E){switch(A.length){case 1:switch(E.length){case 1:if(A[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(A[0]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+A[0]+") must match Matrix rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;case 2:switch(E.length){case 1:if(A[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+A[1]+") must match Vector length ("+E[0]+")");break;case 2:if(A[1]!==E[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+A[1]+") must match Matrix B rows ("+E[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+E.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+A.length+" dimensions)")}}function c(A,E,N){if(N===0)throw new Error("Cannot multiply two empty vectors");var D=A._data,C=A._datatype,T=E._data,P=E._datatype,I,U=r,q=a;C&&P&&C===P&&typeof C=="string"&&(I=C,U=e.find(r,[I,I]),q=e.find(a,[I,I]));for(var z=q(D[0],T[0]),G=1;G<N;G++)z=U(z,q(D[G],T[G]));return z}function p(A,E){if(E.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(A,E)}function d(A,E){var N=A._data,D=A._size,C=A._datatype,T=E._data,P=E._size,I=E._datatype,U=D[0],q=P[1],z,G=r,F=a;C&&I&&C===I&&typeof C=="string"&&(z=C,G=e.find(r,[z,z]),F=e.find(a,[z,z]));for(var k=[],O=0;O<q;O++){for(var W=F(N[0],T[0][O]),X=1;X<U;X++)W=G(W,F(N[X],T[X][O]));k[O]=W}return A.createDenseMatrix({data:k,size:[q],datatype:z})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":_}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":x,"SparseMatrix, SparseMatrix":M});function v(A,E){var N=A._data,D=A._size,C=A._datatype,T=E._data,P=E._datatype,I=D[0],U=D[1],q,z=r,G=a;C&&P&&C===P&&typeof C=="string"&&(q=C,z=e.find(r,[q,q]),G=e.find(a,[q,q]));for(var F=[],k=0;k<I;k++){for(var O=N[k],W=G(O[0],T[0]),X=1;X<U;X++)W=z(W,G(O[X],T[X]));F[k]=W}return A.createDenseMatrix({data:F,size:[I],datatype:q})}function g(A,E){var N=A._data,D=A._size,C=A._datatype,T=E._data,P=E._size,I=E._datatype,U=D[0],q=D[1],z=P[1],G,F=r,k=a;C&&I&&C===I&&typeof C=="string"&&(G=C,F=e.find(r,[G,G]),k=e.find(a,[G,G]));for(var O=[],W=0;W<U;W++){var X=N[W];O[W]=[];for(var ee=0;ee<z;ee++){for(var J=k(X[0],T[0][ee]),Y=1;Y<q;Y++)J=F(J,k(X[Y],T[Y][ee]));O[W][ee]=J}}return A.createDenseMatrix({data:O,size:[U,z],datatype:G})}function y(A,E){var N=A._data,D=A._size,C=A._datatype,T=E._values,P=E._index,I=E._ptr,U=E._size,q=E._datatype;if(!T)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=D[0],G=U[1],F,k=r,O=a,W=s,X=0;C&&q&&C===q&&typeof C=="string"&&(F=C,k=e.find(r,[F,F]),O=e.find(a,[F,F]),W=e.find(s,[F,F]),X=e.convert(0,F));for(var ee=[],J=[],Y=[],ie=E.createSparseMatrix({values:ee,index:J,ptr:Y,size:[z,G],datatype:F}),K=0;K<G;K++){Y[K]=J.length;var re=I[K],oe=I[K+1];if(oe>re)for(var ce=0,me=0;me<z;me++){for(var Se=me+1,le=void 0,Q=re;Q<oe;Q++){var Ee=P[Q];ce!==Se?(le=O(N[me][Ee],T[Q]),ce=Se):le=k(le,O(N[me][Ee],T[Q]))}ce===Se&&!W(le,X)&&(J.push(me),ee.push(le))}}return Y[G]=J.length,ie}function _(A,E){var N=A._values,D=A._index,C=A._ptr,T=A._datatype;if(!N)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var P=E._data,I=E._datatype,U=A._size[0],q=E._size[0],z=[],G=[],F=[],k,O=r,W=a,X=s,ee=0;T&&I&&T===I&&typeof T=="string"&&(k=T,O=e.find(r,[k,k]),W=e.find(a,[k,k]),X=e.find(s,[k,k]),ee=e.convert(0,k));var J=[],Y=[];F[0]=0;for(var ie=0;ie<q;ie++){var K=P[ie];if(!X(K,ee))for(var re=C[ie],oe=C[ie+1],ce=re;ce<oe;ce++){var me=D[ce];Y[me]?J[me]=O(J[me],W(K,N[ce])):(Y[me]=!0,G.push(me),J[me]=W(K,N[ce]))}}for(var Se=G.length,le=0;le<Se;le++){var Q=G[le];z[le]=J[Q]}return F[1]=G.length,A.createSparseMatrix({values:z,index:G,ptr:F,size:[U,1],datatype:k})}function x(A,E){var N=A._values,D=A._index,C=A._ptr,T=A._datatype;if(!N)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var P=E._data,I=E._datatype,U=A._size[0],q=E._size[0],z=E._size[1],G,F=r,k=a,O=s,W=0;T&&I&&T===I&&typeof T=="string"&&(G=T,F=e.find(r,[G,G]),k=e.find(a,[G,G]),O=e.find(s,[G,G]),W=e.convert(0,G));for(var X=[],ee=[],J=[],Y=A.createSparseMatrix({values:X,index:ee,ptr:J,size:[U,z],datatype:G}),ie=[],K=[],re=0;re<z;re++){J[re]=ee.length;for(var oe=re+1,ce=0;ce<q;ce++){var me=P[ce][re];if(!O(me,W))for(var Se=C[ce],le=C[ce+1],Q=Se;Q<le;Q++){var Ee=D[Q];K[Ee]!==oe?(K[Ee]=oe,ee.push(Ee),ie[Ee]=k(me,N[Q])):ie[Ee]=F(ie[Ee],k(me,N[Q]))}}for(var ne=J[re],se=ee.length,xe=ne;xe<se;xe++){var ve=ee[xe];X[xe]=ie[ve]}}return J[z]=ee.length,Y}function M(A,E){var N=A._values,D=A._index,C=A._ptr,T=A._datatype,P=E._values,I=E._index,U=E._ptr,q=E._datatype,z=A._size[0],G=E._size[1],F=N&&P,k,O=r,W=a;T&&q&&T===q&&typeof T=="string"&&(k=T,O=e.find(r,[k,k]),W=e.find(a,[k,k]));for(var X=F?[]:void 0,ee=[],J=[],Y=A.createSparseMatrix({values:X,index:ee,ptr:J,size:[z,G],datatype:k}),ie=F?[]:void 0,K=[],re,oe,ce,me,Se,le,Q,Ee,ne=0;ne<G;ne++){J[ne]=ee.length;var se=ne+1;for(Se=U[ne],le=U[ne+1],me=Se;me<le;me++)if(Ee=I[me],F)for(oe=C[Ee],ce=C[Ee+1],re=oe;re<ce;re++)Q=D[re],K[Q]!==se?(K[Q]=se,ee.push(Q),ie[Q]=W(P[me],N[re])):ie[Q]=O(ie[Q],W(P[me],N[re]));else for(oe=C[Ee],ce=C[Ee+1],re=oe;re<ce;re++)Q=D[re],K[Q]!==se&&(K[Q]=se,ee.push(Q));if(F)for(var xe=J[ne],ve=ee.length,te=xe;te<ve;te++){var $=ee[te];X[te]=ie[$]}}return J[G]=ee.length,Y}return l}),p6="nthRoot",Epe=["typed","matrix","equalScalar","BigNumber"],wE=ye(p6,Epe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.BigNumber,s=Sp({typed:e}),o=Du({typed:e,equalScalar:r}),u=hE({typed:e,equalScalar:r}),l=ps({typed:e,equalScalar:r}),f=pr({typed:e}),c=Jn({typed:e}),p="Complex number not supported in function nthRoot. Use nthRoots instead.",d=e(p6,{number:function(v){return XO(v,2)},"number, number":XO,BigNumber:function(v){return h(v,new a(2))},Complex:function(v){throw new Error(p)},"Complex, number":function(v,g){throw new Error(p)},"BigNumber, BigNumber":h,"Array | Matrix":function(v){return d(v,2)},"SparseMatrix, SparseMatrix":function(v,g){if(g.density()===1)return u(v,g,d);throw new Error("Root must be non-zero")},"SparseMatrix, DenseMatrix":function(v,g){return o(g,v,d,!0)},"DenseMatrix, SparseMatrix":function(v,g){if(g.density()===1)return s(v,g,d,!1);throw new Error("Root must be non-zero")},"DenseMatrix, DenseMatrix":function(v,g){return f(v,g,d)},"Array, Array":function(v,g){return d(n(v),n(g)).valueOf()},"Array, Matrix":function(v,g){return d(n(v),g)},"Matrix, Array":function(v,g){return d(v,n(g))},"SparseMatrix, number | BigNumber":function(v,g){return l(v,g,d,!1)},"DenseMatrix, number | BigNumber":function(v,g){return c(v,g,d,!1)},"number | BigNumber, SparseMatrix":function(v,g){if(g.density()===1)return l(g,v,d,!0);throw new Error("Root must be non-zero")},"number | BigNumber, DenseMatrix":function(v,g){return c(g,v,d,!0)},"Array, number | BigNumber":function(v,g){return d(n(v),g).valueOf()},"number | BigNumber, Array":function(v,g){return d(v,n(g)).valueOf()}});return d;function h(m,v){var g=a.precision,y=a.clone({precision:g+2}),_=new a(0),x=new y(1),M=v.isNegative();if(M&&(v=v.neg()),v.isZero())throw new Error("Root must be non-zero");if(m.isNegative()&&!v.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(m.isZero())return M?new y(1/0):0;if(!m.isFinite())return M?_:m;var A=m.abs().pow(x.div(v));return A=m.isNeg()?A.neg():A,new a((M?x.div(A):A).toPrecision(g))}}),d6="sign",Tpe=["typed","BigNumber","Fraction","complex"],_E=ye(d6,Tpe,function(t){var e=t.typed,n=t.BigNumber,r=t.complex,a=t.Fraction,s=e(d6,{number:YO,Complex:function(u){return u.im===0?r(YO(u.re)):u.sign()},BigNumber:function(u){return new n(u.cmp(0))},Fraction:function(u){return new a(u.s,1)},"Array | Matrix":function(u){return wt(u,s)},Unit:function(u){return s(u.value)}});return s}),Ape="sqrt",Npe=["config","typed","Complex"],ME=ye(Ape,Npe,function(t){var e=t.config,n=t.typed,r=t.Complex,a=n("sqrt",{number:s,Complex:function(u){return u.sqrt()},BigNumber:function(u){return!u.isNegative()||e.predictable?u.sqrt():s(u.toNumber())},"Array | Matrix":function(u){return wt(u,a)},Unit:function(u){return u.pow(.5)}});function s(o){return isNaN(o)?NaN:o>=0||e.predictable?Math.sqrt(o):new r(o,0).sqrt()}return a}),h6="square",Cpe=["typed"],EE=ye(h6,Cpe,function(t){var e=t.typed,n=e(h6,{number:D$,Complex:function(a){return a.mul(a)},BigNumber:function(a){return a.times(a)},Fraction:function(a){return a.mul(a)},"Array | Matrix":function(a){return wt(a,n)},Unit:function(a){return a.pow(2)}});return n}),m6="subtract",Dpe=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],TE=ye(m6,Dpe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.addScalar,s=t.unaryMinus,o=t.DenseMatrix,u=Sp({typed:e}),l=ds({typed:e}),f=yE({typed:e,equalScalar:r}),c=gh({typed:e,DenseMatrix:o}),p=pr({typed:e}),d=Jn({typed:e}),h=e(m6,{"number, number":function(v,g){return v-g},"Complex, Complex":function(v,g){return v.sub(g)},"BigNumber, BigNumber":function(v,g){return v.minus(g)},"Fraction, Fraction":function(v,g){return v.sub(g)},"Unit, Unit":function(v,g){if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(g.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(g))throw new Error("Units do not match");var y=v.clone();return y.value=h(y.value,g.value),y.fixPrefix=!1,y},"SparseMatrix, SparseMatrix":function(v,g){return jb(v,g),f(v,g,h)},"SparseMatrix, DenseMatrix":function(v,g){return jb(v,g),l(g,v,h,!0)},"DenseMatrix, SparseMatrix":function(v,g){return jb(v,g),u(v,g,h,!1)},"DenseMatrix, DenseMatrix":function(v,g){return jb(v,g),p(v,g,h)},"Array, Array":function(v,g){return h(n(v),n(g)).valueOf()},"Array, Matrix":function(v,g){return h(n(v),g)},"Matrix, Array":function(v,g){return h(v,n(g))},"SparseMatrix, any":function(v,g){return c(v,s(g),a)},"DenseMatrix, any":function(v,g){return d(v,g,h)},"any, SparseMatrix":function(v,g){return c(g,v,h,!0)},"any, DenseMatrix":function(v,g){return d(g,v,h,!0)},"Array, any":function(v,g){return d(n(v),g,h,!1).valueOf()},"any, Array":function(v,g){return d(n(g),v,h,!0).valueOf()}});return h});function jb(t,e){var n=t.size(),r=e.size();if(n.length!==r.length)throw new nn(n.length,r.length)}var v6="xgcd",Rpe=["typed","config","matrix","BigNumber"],AE=ye(v6,Rpe,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.BigNumber;return e(v6,{"number, number":function(u,l){var f=R$(u,l);return n.matrix==="Array"?f:r(f)},"BigNumber, BigNumber":s});function s(o,u){var l,f,c,p=new a(0),d=new a(1),h=p,m=d,v=d,g=p;if(!o.isInt()||!u.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!u.isZero();)f=o.div(u).floor(),c=o.mod(u),l=h,h=m.minus(f.times(h)),m=l,l=v,v=g.minus(f.times(v)),g=l,o=u,u=c;var y;return o.lt(p)?y=[o.neg(),m.neg(),g.neg()]:y=[o,o.isZero()?0:m,g],n.matrix==="Array"?y:r(y)}}),Ipe="algorithm09",Ppe=["typed","equalScalar"],pj=ye(Ipe,Ppe,function(t){var e=t.typed,n=t.equalScalar;return function(a,s,o){var u=a._values,l=a._index,f=a._ptr,c=a._size,p=a._datatype,d=s._values,h=s._index,m=s._ptr,v=s._size,g=s._datatype;if(c.length!==v.length)throw new nn(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var y=c[0],_=c[1],x,M=n,A=0,E=o;typeof p=="string"&&p===g&&(x=p,M=e.find(n,[x,x]),A=e.convert(0,x),E=e.find(o,[x,x]));var N=u&&d?[]:void 0,D=[],C=[],T=N?[]:void 0,P=[],I,U,q,z,G;for(U=0;U<_;U++){C[U]=D.length;var F=U+1;if(T)for(z=m[U],G=m[U+1],q=z;q<G;q++)I=h[q],P[I]=F,T[I]=d[q];for(z=f[U],G=f[U+1],q=z;q<G;q++)if(I=l[q],T){var k=P[I]===F?T[I]:A,O=E(u[q],k);M(O,A)||(D.push(I),N.push(O))}else D.push(I)}return C[_]=D.length,a.createSparseMatrix({values:N,index:D,ptr:C,size:[y,_],datatype:x})}}),g6="dotMultiply",Ope=["typed","matrix","equalScalar","multiplyScalar"],NE=ye(g6,Ope,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.multiplyScalar,s=Du({typed:e,equalScalar:r}),o=pj({typed:e,equalScalar:r}),u=ps({typed:e,equalScalar:r}),l=pr({typed:e}),f=Jn({typed:e}),c=e(g6,{"any, any":a,"SparseMatrix, SparseMatrix":function(d,h){return o(d,h,a,!1)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,a,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,a,!1)},"DenseMatrix, DenseMatrix":function(d,h){return l(d,h,a)},"Array, Array":function(d,h){return c(n(d),n(h)).valueOf()},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Array":function(d,h){return c(d,n(h))},"SparseMatrix, any":function(d,h){return u(d,h,a,!1)},"DenseMatrix, any":function(d,h){return f(d,h,a,!1)},"any, SparseMatrix":function(d,h){return u(h,d,a,!0)},"any, DenseMatrix":function(d,h){return f(h,d,a,!0)},"Array, any":function(d,h){return f(n(d),h,a,!1).valueOf()},"any, Array":function(d,h){return f(n(h),d,a,!0).valueOf()}});return c});function Lpe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return aU(t,e,function(r,a){return r&a})}function Uy(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;e.config({precision:1e9});var r=t.plus(new e(1));return r.s=-r.s||null,e.config({precision:n}),r}function kpe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var r=new n(-1);return t.isZero()||e.eq(r)||t.eq(e)?e:e.isZero()||t.eq(r)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?r:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:aU(t,e,function(a,s){return a|s})}function aU(t,e,n){var r=t.constructor,a,s,o=+(t.s<0),u=+(e.s<0);if(o){a=Xb(Uy(t));for(var l=0;l<a.length;++l)a[l]^=1}else a=Xb(t);if(u){s=Xb(Uy(e));for(var f=0;f<s.length;++f)s[f]^=1}else s=Xb(e);var c,p,d;a.length<=s.length?(c=a,p=s,d=o):(c=s,p=a,d=u);var h=c.length,m=p.length,v=n(o,u)^1,g=new r(v^1),y=new r(1),_=new r(2),x=r.precision;for(r.config({precision:1e9});h>0;)n(c[--h],p[--m])===v&&(g=g.plus(y)),y=y.times(_);for(;m>0;)n(d,p[--m])===v&&(g=g.plus(y)),y=y.times(_);return r.config({precision:x}),v===0&&(g.s=-g.s),g}function Xb(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var a=e[r]+"",s=7-a.length;s--;)a="0"+a;n+=a}for(var o=n.length;n.charAt(o)==="0";)o--;var u=t.e,l=n.slice(0,o+1||1),f=l.length;if(u>0)if(++u>f)for(u-=f;u--;)l+="0";else u<f&&(l=l.slice(0,u)+"."+l.slice(u));for(var c=[0],p=0;p<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(p++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function Upe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var r=new n(-1);return t.eq(r)?Uy(e):e.eq(r)?Uy(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?r:new n(t.isNegative()===e.isNegative()?1/0:-1/0):aU(t,e,function(a,s){return a^s})}function Fpe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new n(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e))}function Bpe(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}var y6="bitAnd",zpe=["typed","matrix","equalScalar"],CE=ye(y6,zpe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=Du({typed:e,equalScalar:r}),s=hE({typed:e,equalScalar:r}),o=ps({typed:e,equalScalar:r}),u=pr({typed:e}),l=Jn({typed:e}),f=e(y6,{"number, number":P$,"BigNumber, BigNumber":Lpe,"SparseMatrix, SparseMatrix":function(p,d){return s(p,d,f,!1)},"SparseMatrix, DenseMatrix":function(p,d){return a(d,p,f,!0)},"DenseMatrix, SparseMatrix":function(p,d){return a(p,d,f,!1)},"DenseMatrix, DenseMatrix":function(p,d){return u(p,d,f)},"Array, Array":function(p,d){return f(n(p),n(d)).valueOf()},"Array, Matrix":function(p,d){return f(n(p),d)},"Matrix, Array":function(p,d){return f(p,n(d))},"SparseMatrix, any":function(p,d){return o(p,d,f,!1)},"DenseMatrix, any":function(p,d){return l(p,d,f,!1)},"any, SparseMatrix":function(p,d){return o(d,p,f,!0)},"any, DenseMatrix":function(p,d){return l(d,p,f,!0)},"Array, any":function(p,d){return l(n(p),d,f,!1).valueOf()},"any, Array":function(p,d){return l(n(d),p,f,!0).valueOf()}});return f}),x6="bitNot",qpe=["typed"],DE=ye(x6,qpe,function(t){var e=t.typed,n=e(x6,{number:O$,BigNumber:Uy,"Array | Matrix":function(a){return wt(a,n)}});return n}),b6="bitOr",Gpe=["typed","matrix","equalScalar","DenseMatrix"],RE=ye(b6,Gpe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.DenseMatrix,s=Sp({typed:e}),o=iU({typed:e,equalScalar:r}),u=gh({typed:e,DenseMatrix:a}),l=pr({typed:e}),f=Jn({typed:e}),c=e(b6,{"number, number":L$,"BigNumber, BigNumber":kpe,"SparseMatrix, SparseMatrix":function(d,h){return o(d,h,c)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,c,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,c,!1)},"DenseMatrix, DenseMatrix":function(d,h){return l(d,h,c)},"Array, Array":function(d,h){return c(n(d),n(h)).valueOf()},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Array":function(d,h){return c(d,n(h))},"SparseMatrix, any":function(d,h){return u(d,h,c,!1)},"DenseMatrix, any":function(d,h){return f(d,h,c,!1)},"any, SparseMatrix":function(d,h){return u(h,d,c,!0)},"any, DenseMatrix":function(d,h){return f(h,d,c,!0)},"Array, any":function(d,h){return f(n(d),h,c,!1).valueOf()},"any, Array":function(d,h){return f(n(h),d,c,!0).valueOf()}});return c}),Hpe="algorithm07",Vpe=["typed","DenseMatrix"],wl=ye(Hpe,Vpe,function(t){var e=t.typed,n=t.DenseMatrix;return function(s,o,u){var l=s._size,f=s._datatype,c=o._size,p=o._datatype;if(l.length!==c.length)throw new nn(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var d=l[0],h=l[1],m,v=0,g=u;typeof f=="string"&&f===p&&(m=f,v=e.convert(0,m),g=e.find(u,[m,m]));var y,_,x=[];for(y=0;y<d;y++)x[y]=[];var M=[],A=[],E=[],N=[];for(_=0;_<h;_++){var D=_+1;for(r(s,_,E,M,D),r(o,_,N,A,D),y=0;y<d;y++){var C=E[y]===D?M[y]:v,T=N[y]===D?A[y]:v;x[y][_]=g(C,T)}}return new n({data:x,size:[d,h],datatype:m})};function r(a,s,o,u,l){for(var f=a._values,c=a._index,p=a._ptr,d=p[s],h=p[s+1];d<h;d++){var m=c[d];o[m]=l,u[m]=f[d]}}}),S6="bitXor",Wpe=["typed","matrix","DenseMatrix"],IE=ye(S6,Wpe,function(t){var e=t.typed,n=t.matrix,r=t.DenseMatrix,a=ds({typed:e}),s=wl({typed:e,DenseMatrix:r}),o=hs({typed:e,DenseMatrix:r}),u=pr({typed:e}),l=Jn({typed:e}),f=e(S6,{"number, number":k$,"BigNumber, BigNumber":Upe,"SparseMatrix, SparseMatrix":function(p,d){return s(p,d,f)},"SparseMatrix, DenseMatrix":function(p,d){return a(d,p,f,!0)},"DenseMatrix, SparseMatrix":function(p,d){return a(p,d,f,!1)},"DenseMatrix, DenseMatrix":function(p,d){return u(p,d,f)},"Array, Array":function(p,d){return f(n(p),n(d)).valueOf()},"Array, Matrix":function(p,d){return f(n(p),d)},"Matrix, Array":function(p,d){return f(p,n(d))},"SparseMatrix, any":function(p,d){return o(p,d,f,!1)},"DenseMatrix, any":function(p,d){return l(p,d,f,!1)},"any, SparseMatrix":function(p,d){return o(d,p,f,!0)},"any, DenseMatrix":function(p,d){return l(d,p,f,!0)},"Array, any":function(p,d){return l(n(p),d,f,!1).valueOf()},"any, Array":function(p,d){return l(n(d),p,f,!0).valueOf()}});return f}),w6="arg",$pe=["typed"],PE=ye(w6,$pe,function(t){var e=t.typed,n=e(w6,{number:function(a){return Math.atan2(0,a)},BigNumber:function(a){return a.constructor.atan2(0,a)},Complex:function(a){return a.arg()},"Array | Matrix":function(a){return wt(a,n)}});return n}),_6="conj",jpe=["typed"],OE=ye(_6,jpe,function(t){var e=t.typed,n=e(_6,{number:function(a){return a},BigNumber:function(a){return a},Complex:function(a){return a.conjugate()},"Array | Matrix":function(a){return wt(a,n)}});return n}),M6="im",Xpe=["typed"],LE=ye(M6,Xpe,function(t){var e=t.typed,n=e(M6,{number:function(a){return 0},BigNumber:function(a){return a.mul(0)},Complex:function(a){return a.im},"Array | Matrix":function(a){return wt(a,n)}});return n}),E6="re",Ype=["typed"],kE=ye(E6,Ype,function(t){var e=t.typed,n=e(E6,{number:function(a){return a},BigNumber:function(a){return a},Complex:function(a){return a.re},"Array | Matrix":function(a){return wt(a,n)}});return n}),T6="not",Qpe=["typed"],UE=ye(T6,Qpe,function(t){var e=t.typed,n=e(T6,{number:q$,Complex:function(a){return a.re===0&&a.im===0},BigNumber:function(a){return a.isZero()||a.isNaN()},Unit:function(a){return a.value!==null?n(a.value):!0},"Array | Matrix":function(a){return wt(a,n)}});return n}),A6="or",Zpe=["typed","matrix","equalScalar","DenseMatrix"],FE=ye(A6,Zpe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.DenseMatrix,s=ds({typed:e}),o=yE({typed:e,equalScalar:r}),u=hs({typed:e,DenseMatrix:a}),l=pr({typed:e}),f=Jn({typed:e}),c=e(A6,{"number, number":G$,"Complex, Complex":function(d,h){return d.re!==0||d.im!==0||h.re!==0||h.im!==0},"BigNumber, BigNumber":function(d,h){return!d.isZero()&&!d.isNaN()||!h.isZero()&&!h.isNaN()},"Unit, Unit":function(d,h){return c(d.value||0,h.value||0)},"SparseMatrix, SparseMatrix":function(d,h){return o(d,h,c)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,c,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,c,!1)},"DenseMatrix, DenseMatrix":function(d,h){return l(d,h,c)},"Array, Array":function(d,h){return c(n(d),n(h)).valueOf()},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Array":function(d,h){return c(d,n(h))},"SparseMatrix, any":function(d,h){return u(d,h,c,!1)},"DenseMatrix, any":function(d,h){return f(d,h,c,!1)},"any, SparseMatrix":function(d,h){return u(h,d,c,!0)},"any, DenseMatrix":function(d,h){return f(h,d,c,!0)},"Array, any":function(d,h){return f(n(d),h,c,!1).valueOf()},"any, Array":function(d,h){return f(n(h),d,c,!0).valueOf()}});return c}),N6="xor",Jpe=["typed","matrix","DenseMatrix"],BE=ye(N6,Jpe,function(t){var e=t.typed,n=t.matrix,r=t.DenseMatrix,a=ds({typed:e}),s=wl({typed:e,DenseMatrix:r}),o=hs({typed:e,DenseMatrix:r}),u=pr({typed:e}),l=Jn({typed:e}),f=e(N6,{"number, number":H$,"Complex, Complex":function(p,d){return(p.re!==0||p.im!==0)!=(d.re!==0||d.im!==0)},"BigNumber, BigNumber":function(p,d){return(!p.isZero()&&!p.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":function(p,d){return f(p.value||0,d.value||0)},"SparseMatrix, SparseMatrix":function(p,d){return s(p,d,f)},"SparseMatrix, DenseMatrix":function(p,d){return a(d,p,f,!0)},"DenseMatrix, SparseMatrix":function(p,d){return a(p,d,f,!1)},"DenseMatrix, DenseMatrix":function(p,d){return u(p,d,f)},"Array, Array":function(p,d){return f(n(p),n(d)).valueOf()},"Array, Matrix":function(p,d){return f(n(p),d)},"Matrix, Array":function(p,d){return f(p,n(d))},"SparseMatrix, any":function(p,d){return o(p,d,f,!1)},"DenseMatrix, any":function(p,d){return l(p,d,f,!1)},"any, SparseMatrix":function(p,d){return o(d,p,f,!0)},"any, DenseMatrix":function(p,d){return l(d,p,f,!0)},"Array, any":function(p,d){return l(n(p),d,f,!1).valueOf()},"any, Array":function(p,d){return l(n(d),p,f,!0).valueOf()}});return f}),C6="concat",Kpe=["typed","matrix","isInteger"],O1=ye(C6,Kpe,function(t){var e=t.typed,n=t.matrix,r=t.isInteger;return e(C6,{"...Array | Matrix | number | BigNumber":function(s){var o,u=s.length,l=-1,f,c=!1,p=[];for(o=0;o<u;o++){var d=s[o];if(Dn(d)&&(c=!0),pn(d)||Jt(d)){if(o!==u-1)throw new Error("Dimension must be specified as last argument");if(f=l,l=d.valueOf(),!r(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>f)throw new po(l,f+1)}else{var h=Ut(d).valueOf(),m=yn(h);if(p[o]=h,f=l,l=m.length-1,o>0&&l!==f)throw new nn(f+1,l+1)}}if(p.length===0)throw new SyntaxError("At least one matrix expected");for(var v=p.shift();p.length;)v=dj(v,p.shift(),l,0);return c?n(v):v},"...string":function(s){return s.join("")}})});function dj(t,e,n,r){if(r<n){if(t.length!==e.length)throw new nn(t.length,e.length);for(var a=[],s=0;s<t.length;s++)a[s]=dj(t[s],e[s],n,r+1);return a}else return t.concat(e)}var D6="column",ede=["typed","Index","matrix","range"],L1=ye(D6,ede,function(t){var e=t.typed,n=t.Index,r=t.matrix,a=t.range,s=e(D6,{"Matrix, number":o,"Array, number":function(l,f){return o(r(Ut(l)),f).valueOf()}});return s;function o(u,l){if(u.size().length!==2)throw new Error("Only two dimensional matrix is supported");_r(l,u.size()[1]);var f=a(0,u.size()[0]),c=new n(f,l);return u.subset(c)}}),R6="cross",tde=["typed","matrix","subtract","multiply"],zE=ye(R6,tde,function(t){var e=t.typed,n=t.matrix,r=t.subtract,a=t.multiply;return e(R6,{"Matrix, Matrix":function(u,l){return n(s(u.toArray(),l.toArray()))},"Matrix, Array":function(u,l){return n(s(u.toArray(),l))},"Array, Matrix":function(u,l){return n(s(u,l.toArray()))},"Array, Array":s});function s(o,u){var l=Math.max(yn(o).length,yn(u).length);o=nw(o),u=nw(u);var f=yn(o),c=yn(u);if(f.length!==1||c.length!==1||f[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+f.join(", ")+"], B = ["+c.join(", ")+"])");var p=[r(a(o[1],u[2]),a(o[2],u[1])),r(a(o[2],u[0]),a(o[0],u[2])),r(a(o[0],u[1]),a(o[1],u[0]))];return l>1?[p]:p}}),I6="diag",nde=["typed","matrix","DenseMatrix","SparseMatrix"],qE=ye(I6,nde,function(t){var e=t.typed,n=t.matrix,r=t.DenseMatrix,a=t.SparseMatrix;return e(I6,{Array:function(f){return s(f,0,yn(f),null)},"Array, number":function(f,c){return s(f,c,yn(f),null)},"Array, BigNumber":function(f,c){return s(f,c.toNumber(),yn(f),null)},"Array, string":function(f,c){return s(f,0,yn(f),c)},"Array, number, string":function(f,c,p){return s(f,c,yn(f),p)},"Array, BigNumber, string":function(f,c,p){return s(f,c.toNumber(),yn(f),p)},Matrix:function(f){return s(f,0,f.size(),f.storage())},"Matrix, number":function(f,c){return s(f,c,f.size(),f.storage())},"Matrix, BigNumber":function(f,c){return s(f,c.toNumber(),f.size(),f.storage())},"Matrix, string":function(f,c){return s(f,0,f.size(),c)},"Matrix, number, string":function(f,c,p){return s(f,c,f.size(),p)},"Matrix, BigNumber, string":function(f,c,p){return s(f,c.toNumber(),f.size(),p)}});function s(l,f,c,p){if(!Ot(f))throw new TypeError("Second parameter in function diag must be an integer");var d=f>0?f:0,h=f<0?-f:0;switch(c.length){case 1:return o(l,f,p,c[0],h,d);case 2:return u(l,f,p,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function o(l,f,c,p,d,h){var m=[p+d,p+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?a.diagonal(m,l,f):r.diagonal(m,l,f);return c!==null?v:v.valueOf()}function u(l,f,c,p,d,h){if(Dn(l)){var m=l.diagonal(f);return c!==null?c!==m.storage()?n(m,c):m:m.valueOf()}for(var v=Math.min(p[0]-d,p[1]-h),g=[],y=0;y<v;y++)g[y]=l[y+d][y+h];return c!==null?n(g):g}}),GE=ye("eye",[],function(){return function(){throw new Error('Function "eye" is renamed to "identity" since mathjs version 5.0.0. To keep eye working, create an alias for it using "math.import({eye: math.identity}, {override: true})"')}});function d2(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d2=function(n){return typeof n}:d2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},d2(t)}function HE(t,e){return function n(){d2(n.cache)!=="object"&&(n.cache={});for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var s=e?e(r):JSON.stringify(r);return s in n.cache||(n.cache[s]=t.apply(t,r)),n.cache[s]}}function ev(t){return Object.keys(t.signatures||{}).reduce(function(e,n){var r=(n.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var rde="filter",ide=["typed"],VE=ye(rde,ide,function(t){var e=t.typed;return e("filter",{"Array, function":P6,"Matrix, function":function(r,a){return r.create(P6(r.toArray(),a))},"Array, RegExp":rw,"Matrix, RegExp":function(r,a){return r.create(rw(r.toArray(),a))}})});function P6(t,e){var n=ev(e);return e$(t,function(r,a,s){return n===1?e(r):n===2?e(r,[a]):e(r,[a],s)})}var O6="flatten",ade=["typed","matrix"],WE=ye(O6,ade,function(t){var e=t.typed,n=t.matrix;return e(O6,{Array:function(a){return kn(Ut(a))},Matrix:function(a){var s=kn(Ut(a.toArray()));return n(s)}})}),L6="forEach",sde=["typed"],$E=ye(L6,sde,function(t){var e=t.typed;return e(L6,{"Array, function":ode,"Matrix, function":function(r,a){return r.forEach(a)}})});function ode(t,e){var n=ev(e),r=function a(s,o){Array.isArray(s)?wM(s,function(u,l){a(u,o.concat(l))}):n===1?e(s):n===2?e(s,o):e(s,o,t)};r(t,[])}var k6="getMatrixDataType",ude=["typed"],jE=ye(k6,ude,function(t){var e=t.typed;return e(k6,{Array:function(r){return Ly(r,ur)},Matrix:function(r){return r.getDataType()}})}),U6="identity",lde=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],XE=ye(U6,lde,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.BigNumber,s=t.DenseMatrix,o=t.SparseMatrix;return e(U6,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return l(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,p){return l(c,c,p)},"number | BigNumber, number | BigNumber":function(c,p){return l(c,p,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,p,d){return l(c,p,d)},Array:function(c){return u(c)},"Array, string":function(c,p){return u(c,p)},Matrix:function(c){return u(c.valueOf(),c.storage())},"Matrix, string":function(c,p){return u(c.valueOf(),p)}});function u(f,c){switch(f.length){case 0:return c?r(c):[];case 1:return l(f[0],f[0],c);case 2:return l(f[0],f[1],c);default:throw new Error("Vector containing two values expected")}}function l(f,c,p){var d=Jt(f)||Jt(c)?a:null;if(Jt(f)&&(f=f.toNumber()),Jt(c)&&(c=c.toNumber()),!Ot(f)||f<1)throw new Error("Parameters in function identity must be positive integers");if(!Ot(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new a(1):1,m=d?new d(0):0,v=[f,c];if(p){if(p==="sparse")return o.diagonal(v,h,0,m);if(p==="dense")return s.diagonal(v,h,0,m);throw new TypeError('Unknown matrix type "'.concat(p,'"'))}for(var g=Mm([],v,m),y=f<c?f:c,_=0;_<y;_++)g[_][_]=h;return g}}),F6="kron",cde=["typed","matrix","multiplyScalar"],YE=ye(F6,cde,function(t){var e=t.typed,n=t.matrix,r=t.multiplyScalar;return e(F6,{"Matrix, Matrix":function(o,u){return n(a(o.toArray(),u.toArray()))},"Matrix, Array":function(o,u){return n(a(o.toArray(),u))},"Array, Matrix":function(o,u){return n(a(o,u.toArray()))},"Array, Array":a});function a(s,o){if(yn(s).length===1&&(s=[s]),yn(o).length===1&&(o=[o]),yn(s).length>2||yn(o).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(s.length)+", y = "+JSON.stringify(o.length)+")");var u=[],l=[];return s.map(function(f){return o.map(function(c){return l=[],u.push(l),f.map(function(p){return c.map(function(d){return l.push(r(p,d))})})})})&&u}}),B6="map",fde=["typed"],QE=ye(B6,fde,function(t){var e=t.typed;return e(B6,{"Array, function":pde,"Matrix, function":function(r,a){return r.map(a)}})});function pde(t,e){var n=ev(e),r=function a(s,o){return Array.isArray(s)?s.map(function(u,l){return a(u,o.concat(l))}):n===1?e(s):n===2?e(s,o):e(s,o,t)};return r(t,[])}var dde="ones",hde=["typed","config","matrix","BigNumber"],ZE=ye(dde,hde,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.BigNumber;return e("ones",{"":function(){return n.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(f){var c=f[f.length-1];if(typeof c=="string"){var p=f.pop();return s(f,p)}else return n.matrix==="Array"?s(f):s(f,"default")},Array:s,Matrix:function(f){var c=f.storage();return s(f.valueOf(),c)},"Array | Matrix, string":function(f,c){return s(f.valueOf(),c)}});function s(l,f){var c=o(l),p=c?new a(1):1;if(u(l),f){var d=r(f);return l.length>0?d.resize(l,p):d}else{var h=[];return l.length>0?Mm(h,l,p):h}}function o(l){var f=!1;return l.forEach(function(c,p,d){Jt(c)&&(f=!0,d[p]=c.toNumber())}),f}function u(l){l.forEach(function(f){if(typeof f!="number"||!Ot(f)||f<0)throw new Error("Parameters in function ones must be positive integers")})}});function JE(){throw new Error('No "bignumber" implementation available')}function sU(){throw new Error('No "fraction" implementation available')}function hj(){throw new Error('No "matrix" implementation available')}var z6="range",mde=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],k1=ye(z6,mde,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.bignumber,s=t.smaller,o=t.smallerEq,u=t.larger,l=t.largerEq;return e(z6,{string:c,"string, boolean":c,"number, number":function(y,_){return f(p(y,_,1))},"number, number, number":function(y,_,x){return f(p(y,_,x))},"number, number, boolean":function(y,_,x){return f(x?d(y,_,1):p(y,_,1))},"number, number, number, boolean":function(y,_,x,M){return f(M?d(y,_,x):p(y,_,x))},"BigNumber, BigNumber":function(y,_){var x=y.constructor;return f(h(y,_,new x(1)))},"BigNumber, BigNumber, BigNumber":function(y,_,x){return f(h(y,_,x))},"BigNumber, BigNumber, boolean":function(y,_,x){var M=y.constructor;return f(x?m(y,_,new M(1)):h(y,_,new M(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(y,_,x,M){return f(M?m(y,_,x):h(y,_,x))}});function f(g){return n.matrix==="Matrix"?r?r(g):hj():g}function c(g,y){var _=v(g);if(!_)throw new SyntaxError('String "'+g+'" is no valid range');var x;return n.number==="BigNumber"?(a===void 0&&JE(),x=y?m:h,f(x(a(_.start),a(_.end),a(_.step)))):(x=y?d:p,f(x(_.start,_.end,_.step)))}function p(g,y,_){var x=[],M=g;if(_>0)for(;s(M,y);)x.push(M),M+=_;else if(_<0)for(;u(M,y);)x.push(M),M+=_;return x}function d(g,y,_){var x=[],M=g;if(_>0)for(;o(M,y);)x.push(M),M+=_;else if(_<0)for(;l(M,y);)x.push(M),M+=_;return x}function h(g,y,_){var x=a(0),M=[],A=g;if(_.gt(x))for(;s(A,y);)M.push(A),A=A.plus(_);else if(_.lt(x))for(;u(A,y);)M.push(A),A=A.plus(_);return M}function m(g,y,_){var x=a(0),M=[],A=g;if(_.gt(x))for(;o(A,y);)M.push(A),A=A.plus(_);else if(_.lt(x))for(;l(A,y);)M.push(A),A=A.plus(_);return M}function v(g){var y=g.split(":"),_=y.map(function(M){return Number(M)}),x=_.some(function(M){return isNaN(M)});if(x)return null;switch(_.length){case 2:return{start:_[0],end:_[1],step:1};case 3:return{start:_[0],end:_[2],step:_[1]};default:return null}}}),q6="reshape",vde=["typed","isInteger","matrix"],KE=ye(q6,vde,function(t){var e=t.typed,n=t.isInteger,r=t.matrix;return e(q6,{"Matrix, Array":function(s,o){return s.reshape?s.reshape(o):r(GO(s.valueOf(),o))},"Array, Array":function(s,o){return o.forEach(function(u){if(!n(u))throw new TypeError("Invalid size for dimension: "+u)}),GO(s,o)}})});function _l(t,e,n,r){if(!(this instanceof _l))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}_l.prototype=new Error;_l.prototype.constructor=Error;_l.prototype.name="ArgumentsError";_l.prototype.isArgumentsError=!0;var gde="resize",yde=["config","matrix"],eT=ye(gde,yde,function(t){var e=t.config,n=t.matrix;return function(s,o,u){if(arguments.length!==2&&arguments.length!==3)throw new _l("resize",arguments.length,2,3);if(Dn(o)&&(o=o.valueOf()),Jt(o[0])&&(o=o.map(function(c){return Jt(c)?c.toNumber():c})),Dn(s))return s.resize(o,u,!0);if(typeof s=="string")return r(s,o,u);var l=Array.isArray(s)?!1:e.matrix!=="Array";if(o.length===0){for(;Array.isArray(s);)s=s[0];return Ut(s)}else{Array.isArray(s)||(s=[s]),s=Ut(s);var f=Mm(s,o,u);return l?n(f):f}};function r(a,s,o){if(o!==void 0){if(typeof o!="string"||o.length!==1)throw new TypeError("Single character expected as defaultValue")}else o=" ";if(s.length!==1)throw new nn(s.length,1);var u=s[0];if(typeof u!="number"||!Ot(u))throw new TypeError("Invalid size, must contain positive integers (size: "+mn(s)+")");if(a.length>u)return a.substring(0,u);if(a.length<u){for(var l=a,f=0,c=u-a.length;f<c;f++)l+=o;return l}else return a}}),G6="row",xde=["typed","Index","matrix","range"],U1=ye(G6,xde,function(t){var e=t.typed,n=t.Index,r=t.matrix,a=t.range,s=e(G6,{"Matrix, number":o,"Array, number":function(l,f){return o(r(Ut(l)),f).valueOf()}});return s;function o(u,l){if(u.size().length!==2)throw new Error("Only two dimensional matrix is supported");_r(l,u.size()[0]);var f=a(0,u.size()[1]),c=new n(l,f);return u.subset(c)}}),H6="size",bde=["typed","config","?matrix"],tT=ye(H6,bde,function(t){var e=t.typed,n=t.config,r=t.matrix;return e(H6,{Matrix:function(s){return s.create(s.size())},Array:yn,string:function(s){return n.matrix==="Array"?[s.length]:r([s.length])},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:r?r([]):hj()}})}),V6="squeeze",Sde=["typed","matrix"],nT=ye(V6,Sde,function(t){var e=t.typed,n=t.matrix;return e(V6,{Array:function(a){return nw(Ut(a))},Matrix:function(a){var s=nw(a.toArray());return Array.isArray(s)?n(s):s},any:function(a){return Ut(a)}})});function jg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jg=function(n){return typeof n}:jg=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jg(t)}function sa(t,e){if(mj(t)&&oU(t,e))return t[e];throw typeof t[e]=="function"&&uU(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Bf(t,e,n){if(mj(t)&&oU(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function oU(t,e){return!t||jg(t)!=="object"?!1:Et(_de,e)?!0:!(e in Object.prototype||e in Function.prototype)}function wde(t,e){if(!uU(t,e))throw new Error('No access to method "'+e+'"')}function uU(t,e){return t==null||typeof t[e]!="function"||Et(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Et(Mde,e)?!0:!(e in Object.prototype||e in Function.prototype)}function mj(t){return jg(t)==="object"&&t&&t.constructor===Object}var _de={length:!0,name:!0},Mde={toString:!0,valueOf:!0,toLocaleString:!0},W6="subset",Ede=["typed","matrix"],F1=ye(W6,Ede,function(t){var e=t.typed,n=t.matrix;return e(W6,{"Array, Index":function(a,s){var o=n(a),u=o.subset(s);return s.isScalar()?u:u.valueOf()},"Matrix, Index":function(a,s){return a.subset(s)},"Object, Index":Ade,"string, Index":Tde,"Array, Index, any":function(a,s,o){return n(Ut(a)).subset(s,o,void 0).valueOf()},"Array, Index, any, any":function(a,s,o,u){return n(Ut(a)).subset(s,o,u).valueOf()},"Matrix, Index, any":function(a,s,o){return a.clone().subset(s,o)},"Matrix, Index, any, any":function(a,s,o,u){return a.clone().subset(s,o,u)},"string, Index, string":$6,"string, Index, string, string":$6,"Object, Index, any":Nde})});function Tde(t,e){if(!vp(e))throw new TypeError("Index expected");if(e.size().length!==1)throw new nn(e.size().length,1);var n=t.length;_r(e.min()[0],n),_r(e.max()[0],n);var r=e.dimension(0),a="";return r.forEach(function(s){a+=t.charAt(s)}),a}function $6(t,e,n,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(e.size().length!==1)throw new nn(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var a=e.dimension(0),s=a.size()[0];if(s!==n.length)throw new nn(a.size()[0],n.length);var o=t.length;_r(e.min()[0]),_r(e.max()[0]);for(var u=[],l=0;l<o;l++)u[l]=t.charAt(l);if(a.forEach(function(p,d){u[p]=n.charAt(d[0])}),u.length>o)for(var f=o-1,c=u.length;f<c;f++)u[f]||(u[f]=r);return u.join("")}function Ade(t,e){if(e.size().length!==1)throw new nn(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");return sa(t,n)}function Nde(t,e,n){if(e.size().length!==1)throw new nn(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var a=Ut(t);return Bf(a,r,n),a}var Cde="transpose",Dde=["typed","matrix"],rT=ye(Cde,Dde,function(t){var e=t.typed,n=t.matrix,r=e("transpose",{Array:function(u){return r(n(u)).valueOf()},Matrix:function(u){var l=u.size(),f;switch(l.length){case 1:f=u.clone();break;case 2:{var c=l[0],p=l[1];if(p===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+mn(l)+")");switch(u.storage()){case"dense":f=a(u,c,p);break;case"sparse":f=s(u,c,p);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+mn(this._size)+")")}return f},any:function(u){return Ut(u)}});function a(o,u,l){for(var f=o._data,c=[],p,d=0;d<l;d++){p=c[d]=[];for(var h=0;h<u;h++)p[h]=Ut(f[h][d])}return o.createDenseMatrix({data:c,size:[l,u],datatype:o._datatype})}function s(o,u,l){for(var f=o._values,c=o._index,p=o._ptr,d=f?[]:void 0,h=[],m=[],v=[],g=0;g<u;g++)v[g]=0;var y,_,x;for(y=0,_=c.length;y<_;y++)v[c[y]]++;for(var M=0,A=0;A<u;A++)m.push(M),M+=v[A],v[A]=m[A];for(m.push(M),x=0;x<l;x++)for(var E=p[x],N=p[x+1],D=E;D<N;D++){var C=v[c[D]]++;h[C]=x,f&&(d[C]=Ut(f[D]))}return o.createSparseMatrix({values:d,index:h,ptr:m,size:[l,u],datatype:o._datatype})}return r}),j6="ctranspose",Rde=["typed","transpose","conj"],iT=ye(j6,Rde,function(t){var e=t.typed,n=t.transpose,r=t.conj;return e(j6,{any:function(s){return r(n(s))}})}),X6="zeros",Ide=["typed","config","matrix","BigNumber"],aT=ye(X6,Ide,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.BigNumber;return e(X6,{"":function(){return n.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(f){var c=f[f.length-1];if(typeof c=="string"){var p=f.pop();return s(f,p)}else return n.matrix==="Array"?s(f):s(f,"default")},Array:s,Matrix:function(f){var c=f.storage();return s(f.valueOf(),c)},"Array | Matrix, string":function(f,c){return s(f.valueOf(),c)}});function s(l,f){var c=o(l),p=c?new a(0):0;if(u(l),f){var d=r(f);return l.length>0?d.resize(l,p):d}else{var h=[];return l.length>0?Mm(h,l,p):h}}function o(l){var f=!1;return l.forEach(function(c,p,d){Jt(c)&&(f=!0,d[p]=c.toNumber())}),f}function u(l){l.forEach(function(f){if(typeof f!="number"||!Ot(f)||f<0)throw new Error("Parameters in function zeros must be positive integers")})}}),Pde="erf",Ode=["typed"],sT=ye(Pde,Ode,function(t){var e=t.typed,n=e("name",{number:function(u){var l=Math.abs(u);return l>=Ude?Uf(u):l<=Lde?Uf(u)*r(l):l<=4?Uf(u)*(1-a(l)):Uf(u)*(1-s(l))},"Array | Matrix":function(u){return wt(u,n)}});function r(o){var u=o*o,l=Gl[0][4]*u,f=u,c;for(c=0;c<3;c+=1)l=(l+Gl[0][c])*u,f=(f+o0[0][c])*u;return o*(l+Gl[0][3])/(f+o0[0][3])}function a(o){var u=Gl[1][8]*o,l=o,f;for(f=0;f<7;f+=1)u=(u+Gl[1][f])*o,l=(l+o0[1][f])*o;var c=(u+Gl[1][7])/(l+o0[1][7]),p=parseInt(o*16)/16,d=(o-p)*(o+p);return Math.exp(-p*p)*Math.exp(-d)*c}function s(o){var u=1/(o*o),l=Gl[2][5]*u,f=u,c;for(c=0;c<4;c+=1)l=(l+Gl[2][c])*u,f=(f+o0[2][c])*u;var p=u*(l+Gl[2][4])/(f+o0[2][4]);p=(kde-p)/o,u=parseInt(o*16)/16;var d=(o-u)*(o+u);return Math.exp(-u*u)*Math.exp(-d)*p}return n}),Lde=.46875,kde=.5641895835477563,Gl=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],o0=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Ude=Math.pow(2,53),Y6="mode",Fde=["typed","isNaN","isNumeric"],oT=ye(Y6,Fde,function(t){var e=t.typed,n=t.isNaN,r=t.isNumeric;return e(Y6,{"Array | Matrix":a,"...":function(o){return a(o)}});function a(s){s=kn(s.valueOf());var o=s.length;if(o===0)throw new Error("Cannot calculate mode of an empty array");for(var u={},l=[],f=0,c=0;c<s.length;c++){var p=s[c];if(r(p)&&n(p))throw new Error("Cannot calculate mode of an array containing NaN values");p in u||(u[p]=0),u[p]++,u[p]===f?l.push(p):u[p]>f&&(f=u[p],l=[p])}return l}});function io(t,e,n){var r;return String(t).indexOf("Unexpected type")!==-1?(r=arguments.length>2?" (type: "+ur(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).indexOf("complex numbers")!==-1?(r=arguments.length>2?" (type: "+ur(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var Q6="prod",Bde=["typed","multiply"],uT=ye(Q6,Bde,function(t){var e=t.typed,n=t.multiply;return e(Q6,{"Array | Matrix":r,"Array | Matrix, number | BigNumber":function(s,o){throw new Error("prod(A, dim) is not yet supported")},"...":function(s){return r(s)}});function r(a){var s;if(yc(a,function(o){try{s=s===void 0?o:n(s,o)}catch(u){throw io(u,"prod",o)}}),s===void 0)throw new Error("Cannot calculate prod of an empty array");return s}}),Z6="format",zde=["typed"],lT=ye(Z6,zde,function(t){var e=t.typed;return e(Z6,{any:mn,"any, Object | function | number":mn})}),J6="print",qde=["typed"],cT=ye(J6,qde,function(t){var e=t.typed;return e(J6,{"string, Object | Array":K6,"string, Object | Array, number | Object":K6})});function K6(t,e,n){return t.replace(/\$([\w.]+)/g,function(r,a){for(var s=a.split("."),o=e[s.shift()];s.length&&o!==void 0;){var u=s.shift();o=u?o[u]:o+"."}return o!==void 0?Ca(o)?o:mn(o,n):r})}var eq="to",Gde=["typed","matrix"],fT=ye(eq,Gde,function(t){var e=t.typed,n=t.matrix,r=pr({typed:e}),a=Jn({typed:e}),s=e(eq,{"Unit, Unit | string":function(u,l){return u.to(l)},"Matrix, Matrix":function(u,l){return r(u,l,s)},"Array, Array":function(u,l){return s(n(u),n(l)).valueOf()},"Array, Matrix":function(u,l){return s(n(u),l)},"Matrix, Array":function(u,l){return s(u,n(l))},"Matrix, any":function(u,l){return a(u,l,s,!1)},"any, Matrix":function(u,l){return a(l,u,s,!0)},"Array, any":function(u,l){return a(n(u),l,s,!1).valueOf()},"any, Array":function(u,l){return a(n(l),u,s,!0).valueOf()}});return s}),tq="isPrime",Hde=["typed"],pT=ye(tq,Hde,function(t){var e=t.typed,n=e(tq,{number:function(a){if(a*0!==0)return!1;if(a<=3)return a>1;if(a%2===0||a%3===0)return!1;for(var s=5;s*s<=a;s+=6)if(a%s===0||a%(s+2)===0)return!1;return!0},BigNumber:function(a){if(a.toNumber()*0!==0)return!1;if(a.lte(3))return a.gt(1);if(a.mod(2).eq(0)||a.mod(3).eq(0))return!1;for(var s=5;a.gte(s*s);s+=6)if(a.mod(s).eq(0)||a.mod(s+2).eq(0))return!1;return!0},"Array | Matrix":function(a){return wt(a,n)}});return n}),Vde="numeric",Wde=["number","?bignumber","?fraction"],dT=ye(Vde,Wde,function(t){var e=t.number,n=t.bignumber,r=t.fraction,a={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:function(u){return e(u)},BigNumber:n?function(o){return n(o)}:JE,Fraction:r?function(o){return r(o)}:sU};return function(u,l){var f=ur(u);if(!(f in a))throw new TypeError("Cannot convert "+u+' of type "'+f+'"; valid input types are '+Object.keys(a).join(", "));if(!(l in s))throw new TypeError("Cannot convert "+u+' to type "'+l+'"; valid output types are '+Object.keys(s).join(", "));return l===f?u:s[l](u)}}),nq="divideScalar",$de=["typed","numeric"],hT=ye(nq,$de,function(t){var e=t.typed,n=t.numeric,r=e(nq,{"number, number":function(s,o){return s/o},"Complex, Complex":function(s,o){return s.div(o)},"BigNumber, BigNumber":function(s,o){return s.div(o)},"Fraction, Fraction":function(s,o){return s.div(o)},"Unit, number | Fraction | BigNumber":function(s,o){var u=s.clone(),l=n(1,ur(o));return u.value=r(u.value===null?u._normalize(l):u.value,o),u},"number | Fraction | BigNumber, Unit":function(s,o){var u=o.clone();u=u.pow(-1);var l=n(1,ur(s));return u.value=r(s,o.value===null?o._normalize(l):o.value),u},"Unit, Unit":function(s,o){return s.divide(o)}});return r}),rq="pow",jde=["typed","config","identity","multiply","matrix","fraction","number","Complex"],mT=ye(rq,jde,function(t){var e=t.typed,n=t.config,r=t.identity,a=t.multiply,s=t.matrix,o=t.number,u=t.fraction,l=t.Complex;return e(rq,{"number, number":f,"Complex, Complex":function(h,m){return h.pow(m)},"BigNumber, BigNumber":function(h,m){return m.isInteger()||h>=0||n.predictable?h.pow(m):new l(h.toNumber(),0).pow(m.toNumber(),0)},"Fraction, Fraction":function(h,m){if(m.d!==1){if(n.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return f(h.valueOf(),m.valueOf())}else return h.pow(m)},"Array, number":c,"Array, BigNumber":function(h,m){return c(h,m.toNumber())},"Matrix, number":p,"Matrix, BigNumber":function(h,m){return p(h,m.toNumber())},"Unit, number | BigNumber":function(h,m){return h.pow(m)}});function f(d,h){if(n.predictable&&!Ot(h)&&d<0)try{var m=u(h),v=o(m);if((h===v||Math.abs((h-v)/h)<1e-14)&&m.d%2===1)return(m.n%2===0?1:-1)*Math.pow(-d,h)}catch{}return n.predictable&&(d<-1&&h===1/0||d>-1&&d<0&&h===-1/0)?NaN:Ot(h)||d>=0||n.predictable?I$(d,h):d*d<1&&h===1/0||d*d>1&&h===-1/0?0:new l(d,0).pow(h,0)}function c(d,h){if(!Ot(h)||h<0)throw new TypeError("For A^b, b must be a positive integer (value is "+h+")");var m=yn(d);if(m.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+m.length+" dimensions)");if(m[0]!==m[1])throw new Error("For A^b, A must be square (size is "+m[0]+"x"+m[1]+")");for(var v=r(m[0]).valueOf(),g=d;h>=1;)(h&1)===1&&(v=a(g,v)),h>>=1,g=a(g,g);return v}function p(d,h){return s(c(d.valueOf(),h))}});function iq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function aq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iq(Object(n),!0).forEach(function(r){Xde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xde(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P0="Number of decimals in function round must be an integer",sq="round",Yde=["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],vT=ye(sq,Yde,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.zeros,s=t.BigNumber,o=t.DenseMatrix,u=ps({typed:e,equalScalar:r}),l=hs({typed:e,DenseMatrix:o}),f=Jn({typed:e}),c=e(sq,aq(aq({},Qde),{},{Complex:function(d){return d.round()},"Complex, number":function(d,h){if(h%1)throw new TypeError(P0);return d.round(h)},"Complex, BigNumber":function(d,h){if(!h.isInteger())throw new TypeError(P0);var m=h.toNumber();return d.round(m)},"number, BigNumber":function(d,h){if(!h.isInteger())throw new TypeError(P0);return new s(d).toDecimalPlaces(h.toNumber())},BigNumber:function(d){return d.toDecimalPlaces(0)},"BigNumber, BigNumber":function(d,h){if(!h.isInteger())throw new TypeError(P0);return d.toDecimalPlaces(h.toNumber())},Fraction:function(d){return d.round()},"Fraction, number":function(d,h){if(h%1)throw new TypeError(P0);return d.round(h)},"Array | Matrix":function(d){return wt(d,c)},"SparseMatrix, number | BigNumber":function(d,h){return u(d,h,c,!1)},"DenseMatrix, number | BigNumber":function(d,h){return f(d,h,c,!1)},"number | Complex | BigNumber, SparseMatrix":function(d,h){return r(d,0)?a(h.size(),h.storage()):l(h,d,c,!0)},"number | Complex | BigNumber, DenseMatrix":function(d,h){return r(d,0)?a(h.size(),h.storage()):f(h,d,c,!0)},"Array, number | BigNumber":function(d,h){return f(n(d),h,c,!1).valueOf()},"number | Complex | BigNumber, Array":function(d,h){return f(n(h),d,c,!0).valueOf()}}));return c}),Qde={number:QO,"number, number":function(e,n){if(!Ot(n))throw new TypeError(P0);if(n<0||n>15)throw new Error("Number of decimals in function round must be in te range of 0-15");return QO(e,n)}},oq="log",Zde=["config","typed","divideScalar","Complex"],gT=ye(oq,Zde,function(t){var e=t.typed,n=t.config,r=t.divideScalar,a=t.Complex,s=e(oq,{number:function(u){return u>=0||n.predictable?T$(u):new a(u,0).log()},Complex:function(u){return u.log()},BigNumber:function(u){return!u.isNegative()||n.predictable?u.ln():new a(u.toNumber(),0).log()},"Array | Matrix":function(u){return wt(u,s)},"any, any":function(u,l){return r(s(u),s(l))}});return s}),uq="log1p",Jde=["typed","config","divideScalar","log","Complex"],yT=ye(uq,Jde,function(t){var e=t.typed,n=t.config,r=t.divideScalar,a=t.log,s=t.Complex,o=e(uq,{number:function(f){return f>=-1||n.predictable?xle(f):u(new s(f,0))},Complex:u,BigNumber:function(f){var c=f.plus(1);return!c.isNegative()||n.predictable?c.ln():u(new s(f.toNumber(),0))},"Array | Matrix":function(f){return wt(f,o)},"any, any":function(f,c){return r(o(f),a(c))}});function u(l){var f=l.re+1;return new s(Math.log(Math.sqrt(f*f+l.im*l.im)),Math.atan2(l.im,f))}return o}),lq="nthRoots",Kde=["config","typed","divideScalar","Complex"],xT=ye(lq,Kde,function(t){var e=t.typed;t.config,t.divideScalar;var n=t.Complex,r=e(lq,{Complex:function(u){return s(u,2)},"Complex, number":s}),a=[function(u){return new n(u,0)},function(u){return new n(0,u)},function(u){return new n(-u,0)},function(u){return new n(0,-u)}];function s(o,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new n(0,0)];var l=typeof o=="number",f;(l||o.re===0||o.im===0)&&(l?f=2*+(o<0):o.im===0?f=2*+(o.re<0):f=2*+(o.im<0)+1);for(var c=o.arg(),p=o.abs(),d=[],h=Math.pow(p,1/u),m=0;m<u;m++){var v=(f+4*m)/u;if(v===Math.round(v)){d.push(a[v%4](h));continue}d.push(new n({r:h,phi:(c+2*Math.PI*m)/u}))}return d}return r}),cq="dotPow",ehe=["typed","equalScalar","matrix","pow","DenseMatrix"],bT=ye(cq,ehe,function(t){var e=t.typed,n=t.equalScalar,r=t.matrix,a=t.pow,s=t.DenseMatrix,o=ds({typed:e}),u=wl({typed:e,DenseMatrix:s}),l=ps({typed:e,equalScalar:n}),f=hs({typed:e,DenseMatrix:s}),c=pr({typed:e}),p=Jn({typed:e}),d=e(cq,{"any, any":a,"SparseMatrix, SparseMatrix":function(m,v){return u(m,v,a,!1)},"SparseMatrix, DenseMatrix":function(m,v){return o(v,m,a,!0)},"DenseMatrix, SparseMatrix":function(m,v){return o(m,v,a,!1)},"DenseMatrix, DenseMatrix":function(m,v){return c(m,v,a)},"Array, Array":function(m,v){return d(r(m),r(v)).valueOf()},"Array, Matrix":function(m,v){return d(r(m),v)},"Matrix, Array":function(m,v){return d(m,r(v))},"SparseMatrix, any":function(m,v){return l(m,v,d,!1)},"DenseMatrix, any":function(m,v){return p(m,v,d,!1)},"any, SparseMatrix":function(m,v){return f(v,m,d,!0)},"any, DenseMatrix":function(m,v){return p(v,m,d,!0)},"Array, any":function(m,v){return p(r(m),v,d,!1).valueOf()},"any, Array":function(m,v){return p(r(v),m,d,!0).valueOf()}});return d}),fq="dotDivide",the=["typed","matrix","equalScalar","divideScalar","DenseMatrix"],ST=ye(fq,the,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.divideScalar,s=t.DenseMatrix,o=Du({typed:e,equalScalar:r}),u=ds({typed:e}),l=wl({typed:e,DenseMatrix:s}),f=ps({typed:e,equalScalar:r}),c=hs({typed:e,DenseMatrix:s}),p=pr({typed:e}),d=Jn({typed:e}),h=e(fq,{"any, any":a,"SparseMatrix, SparseMatrix":function(v,g){return l(v,g,a,!1)},"SparseMatrix, DenseMatrix":function(v,g){return o(g,v,a,!0)},"DenseMatrix, SparseMatrix":function(v,g){return u(v,g,a,!1)},"DenseMatrix, DenseMatrix":function(v,g){return p(v,g,a)},"Array, Array":function(v,g){return h(n(v),n(g)).valueOf()},"Array, Matrix":function(v,g){return h(n(v),g)},"Matrix, Array":function(v,g){return h(v,n(g))},"SparseMatrix, any":function(v,g){return f(v,g,a,!1)},"DenseMatrix, any":function(v,g){return d(v,g,a,!1)},"any, SparseMatrix":function(v,g){return c(g,v,a,!0)},"any, DenseMatrix":function(v,g){return d(g,v,a,!0)},"Array, any":function(v,g){return d(n(v),g,a,!1).valueOf()},"any, Array":function(v,g){return d(n(g),v,a,!0).valueOf()}});return h});function lU(t){var e=t.DenseMatrix;return function(r,a,s){var o=r.size();if(o.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+mn(o)+")");var u=o[0],l=o[1];if(u!==l)throw new RangeError("Matrix must be square (size: "+mn(o)+")");var f,c,p;if(Dn(a)){var d=a.size();if(d.length===1){if(d[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(f=[],p=a._data,c=0;c<u;c++)f[c]=[p[c]];return new e({data:f,size:[u,1],datatype:a._datatype})}if(d.length===2){if(d[0]!==u||d[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Qd(a)){if(s){for(f=[],p=a._data,c=0;c<u;c++)f[c]=[p[c][0]];return new e({data:f,size:[u,1],datatype:a._datatype})}return a}for(f=[],c=0;c<u;c++)f[c]=[0];for(var h=a._values,m=a._index,v=a._ptr,g=v[1],y=v[0];y<g;y++)c=m[y],f[c][0]=h[y];return new e({data:f,size:[u,1],datatype:a._datatype})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}if(zn(a)){var _=yn(a);if(_.length===1){if(_[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(f=[],c=0;c<u;c++)f[c]=[a[c]];return new e({data:f,size:[u,1]})}if(_.length===2){if(_[0]!==u||_[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(f=[],c=0;c<u;c++)f[c]=[a[c][0]];return new e({data:f,size:[u,1]})}throw new RangeError("Dimension mismatch. Matrix columns must match vector length.")}}}var pq="lsolve",nhe=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],wT=ye(pq,nhe,function(t){var e=t.typed,n=t.matrix,r=t.divideScalar,a=t.multiplyScalar,s=t.subtract,o=t.equalScalar,u=t.DenseMatrix,l=lU({DenseMatrix:u});return e(pq,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return f(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=f(m,h);return v.valueOf()}});function f(p,d){d=l(p,d,!0);for(var h=d._data,m=p._size[0],v=p._size[1],g=[],y=p._data,_=0;_<v;_++){var x=h[_][0]||0,M=void 0;if(o(x,0))M=0;else{var A=y[_][_];if(o(A,0))throw new Error("Linear system cannot be solved since matrix is singular");M=r(x,A);for(var E=_+1;E<m;E++)h[E]=[s(h[E][0]||0,a(M,y[E][_]))]}g[_]=[M]}return new u({data:g,size:[m,1]})}function c(p,d){d=l(p,d,!0);for(var h=d._data,m=p._size[0],v=p._size[1],g=p._values,y=p._index,_=p._ptr,x,M,A=[],E=0;E<v;E++){var N=h[E][0]||0;if(o(N,0))A[E]=[0];else{var D=0,C=[],T=[],P=_[E+1];for(M=_[E];M<P;M++)x=y[M],x===E?D=g[M]:x>E&&(C.push(g[M]),T.push(x));if(o(D,0))throw new Error("Linear system cannot be solved since matrix is singular");var I=r(N,D);for(M=0,P=T.length;M<P;M++)x=T[M],h[x]=[s(h[x][0]||0,a(I,C[M]))];A[E]=[I]}}return new u({data:A,size:[m,1]})}}),dq="usolve",rhe=["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],_T=ye(dq,rhe,function(t){var e=t.typed,n=t.matrix,r=t.divideScalar,a=t.multiplyScalar,s=t.subtract,o=t.equalScalar,u=t.DenseMatrix,l=lU({DenseMatrix:u});return e(dq,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return f(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=f(m,h);return v.valueOf()}});function f(p,d){d=l(p,d,!0);for(var h=d._data,m=p._size[0],v=p._size[1],g=[],y=p._data,_=v-1;_>=0;_--){var x=h[_][0]||0,M=void 0;if(o(x,0))M=0;else{var A=y[_][_];if(o(A,0))throw new Error("Linear system cannot be solved since matrix is singular");M=r(x,A);for(var E=_-1;E>=0;E--)h[E]=[s(h[E][0]||0,a(M,y[E][_]))]}g[_]=[M]}return new u({data:g,size:[m,1]})}function c(p,d){d=l(p,d,!0);for(var h=d._data,m=p._size[0],v=p._size[1],g=p._values,y=p._index,_=p._ptr,x,M,A=[],E=v-1;E>=0;E--){var N=h[E][0]||0;if(o(N,0))A[E]=[0];else{var D=0,C=[],T=[],P=_[E],I=_[E+1];for(M=I-1;M>=P;M--)x=y[M],x===E?D=g[M]:x<E&&(C.push(g[M]),T.push(x));if(o(D,0))throw new Error("Linear system cannot be solved since matrix is singular");var U=r(N,D);for(M=0,I=T.length;M<I;M++)x=T[M],h[x]=[s(h[x][0],a(U,C[M]))];A[E]=[U]}}return new u({data:A,size:[m,1]})}}),ihe="algorithm08",ahe=["typed","equalScalar"],cU=ye(ihe,ahe,function(t){var e=t.typed,n=t.equalScalar;return function(a,s,o){var u=a._values,l=a._index,f=a._ptr,c=a._size,p=a._datatype,d=s._values,h=s._index,m=s._ptr,v=s._size,g=s._datatype;if(c.length!==v.length)throw new nn(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!u||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var y=c[0],_=c[1],x,M=n,A=0,E=o;typeof p=="string"&&p===g&&(x=p,M=e.find(n,[x,x]),A=e.convert(0,x),E=e.find(o,[x,x]));for(var N=[],D=[],C=[],T=[],P=[],I,U,q,z,G=0;G<_;G++){C[G]=D.length;var F=G+1;for(U=f[G],q=f[G+1],I=U;I<q;I++)z=l[I],P[z]=F,T[z]=u[I],D.push(z);for(U=m[G],q=m[G+1],I=U;I<q;I++)z=h[I],P[z]===F&&(T[z]=E(T[z],d[I]));for(I=C[G];I<D.length;){z=D[I];var k=T[z];M(k,A)?D.splice(I,1):(N.push(k),I++)}}return C[_]=D.length,a.createSparseMatrix({values:N,index:D,ptr:C,size:[y,_],datatype:x})}}),hq="leftShift",she=["typed","matrix","equalScalar","zeros","DenseMatrix"],MT=ye(hq,she,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.zeros,s=t.DenseMatrix,o=Sp({typed:e}),u=Du({typed:e,equalScalar:r}),l=cU({typed:e,equalScalar:r}),f=gh({typed:e,DenseMatrix:s}),c=ps({typed:e,equalScalar:r}),p=pr({typed:e}),d=Jn({typed:e}),h=e(hq,{"number, number":U$,"BigNumber, BigNumber":Fpe,"SparseMatrix, SparseMatrix":function(v,g){return l(v,g,h,!1)},"SparseMatrix, DenseMatrix":function(v,g){return u(g,v,h,!0)},"DenseMatrix, SparseMatrix":function(v,g){return o(v,g,h,!1)},"DenseMatrix, DenseMatrix":function(v,g){return p(v,g,h)},"Array, Array":function(v,g){return h(n(v),n(g)).valueOf()},"Array, Matrix":function(v,g){return h(n(v),g)},"Matrix, Array":function(v,g){return h(v,n(g))},"SparseMatrix, number | BigNumber":function(v,g){return r(g,0)?v.clone():c(v,g,h,!1)},"DenseMatrix, number | BigNumber":function(v,g){return r(g,0)?v.clone():d(v,g,h,!1)},"number | BigNumber, SparseMatrix":function(v,g){return r(v,0)?a(g.size(),g.storage()):f(g,v,h,!0)},"number | BigNumber, DenseMatrix":function(v,g){return r(v,0)?a(g.size(),g.storage()):d(g,v,h,!0)},"Array, number | BigNumber":function(v,g){return h(n(v),g).valueOf()},"number | BigNumber, Array":function(v,g){return h(v,n(g)).valueOf()}});return h}),mq="rightArithShift",ohe=["typed","matrix","equalScalar","zeros","DenseMatrix"],ET=ye(mq,ohe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.zeros,s=t.DenseMatrix,o=Sp({typed:e}),u=Du({typed:e,equalScalar:r}),l=cU({typed:e,equalScalar:r}),f=gh({typed:e,DenseMatrix:s}),c=ps({typed:e,equalScalar:r}),p=pr({typed:e}),d=Jn({typed:e}),h=e(mq,{"number, number":F$,"BigNumber, BigNumber":Bpe,"SparseMatrix, SparseMatrix":function(v,g){return l(v,g,h,!1)},"SparseMatrix, DenseMatrix":function(v,g){return u(g,v,h,!0)},"DenseMatrix, SparseMatrix":function(v,g){return o(v,g,h,!1)},"DenseMatrix, DenseMatrix":function(v,g){return p(v,g,h)},"Array, Array":function(v,g){return h(n(v),n(g)).valueOf()},"Array, Matrix":function(v,g){return h(n(v),g)},"Matrix, Array":function(v,g){return h(v,n(g))},"SparseMatrix, number | BigNumber":function(v,g){return r(g,0)?v.clone():c(v,g,h,!1)},"DenseMatrix, number | BigNumber":function(v,g){return r(g,0)?v.clone():d(v,g,h,!1)},"number | BigNumber, SparseMatrix":function(v,g){return r(v,0)?a(g.size(),g.storage()):f(g,v,h,!0)},"number | BigNumber, DenseMatrix":function(v,g){return r(v,0)?a(g.size(),g.storage()):d(g,v,h,!0)},"Array, number | BigNumber":function(v,g){return h(n(v),g).valueOf()},"number | BigNumber, Array":function(v,g){return h(v,n(g)).valueOf()}});return h}),vq="rightLogShift",uhe=["typed","matrix","equalScalar","zeros","DenseMatrix"],TT=ye(vq,uhe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.zeros,s=t.DenseMatrix,o=Sp({typed:e}),u=Du({typed:e,equalScalar:r}),l=cU({typed:e,equalScalar:r}),f=gh({typed:e,DenseMatrix:s}),c=ps({typed:e,equalScalar:r}),p=pr({typed:e}),d=Jn({typed:e}),h=e(vq,{"number, number":B$,"SparseMatrix, SparseMatrix":function(v,g){return l(v,g,h,!1)},"SparseMatrix, DenseMatrix":function(v,g){return u(g,v,h,!0)},"DenseMatrix, SparseMatrix":function(v,g){return o(v,g,h,!1)},"DenseMatrix, DenseMatrix":function(v,g){return p(v,g,h)},"Array, Array":function(v,g){return h(n(v),n(g)).valueOf()},"Array, Matrix":function(v,g){return h(n(v),g)},"Matrix, Array":function(v,g){return h(v,n(g))},"SparseMatrix, number | BigNumber":function(v,g){return r(g,0)?v.clone():c(v,g,h,!1)},"DenseMatrix, number | BigNumber":function(v,g){return r(g,0)?v.clone():d(v,g,h,!1)},"number | BigNumber, SparseMatrix":function(v,g){return r(v,0)?a(g.size(),g.storage()):f(g,v,h,!0)},"number | BigNumber, DenseMatrix":function(v,g){return r(v,0)?a(g.size(),g.storage()):d(g,v,h,!0)},"Array, number | BigNumber":function(v,g){return h(n(v),g).valueOf()},"number | BigNumber, Array":function(v,g){return h(v,n(g)).valueOf()}});return h}),gq="and",lhe=["typed","matrix","equalScalar","zeros","not"],AT=ye(gq,lhe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.zeros,s=t.not,o=Du({typed:e,equalScalar:r}),u=hE({typed:e,equalScalar:r}),l=ps({typed:e,equalScalar:r}),f=pr({typed:e}),c=Jn({typed:e}),p=e(gq,{"number, number":V$,"Complex, Complex":function(h,m){return(h.re!==0||h.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(h,m){return!h.isZero()&&!m.isZero()&&!h.isNaN()&&!m.isNaN()},"Unit, Unit":function(h,m){return p(h.value||0,m.value||0)},"SparseMatrix, SparseMatrix":function(h,m){return u(h,m,p,!1)},"SparseMatrix, DenseMatrix":function(h,m){return o(m,h,p,!0)},"DenseMatrix, SparseMatrix":function(h,m){return o(h,m,p,!1)},"DenseMatrix, DenseMatrix":function(h,m){return f(h,m,p)},"Array, Array":function(h,m){return p(n(h),n(m)).valueOf()},"Array, Matrix":function(h,m){return p(n(h),m)},"Matrix, Array":function(h,m){return p(h,n(m))},"SparseMatrix, any":function(h,m){return s(m)?a(h.size(),h.storage()):l(h,m,p,!1)},"DenseMatrix, any":function(h,m){return s(m)?a(h.size(),h.storage()):c(h,m,p,!1)},"any, SparseMatrix":function(h,m){return s(h)?a(h.size(),h.storage()):l(m,h,p,!0)},"any, DenseMatrix":function(h,m){return s(h)?a(h.size(),h.storage()):c(m,h,p,!0)},"Array, any":function(h,m){return p(n(h),m).valueOf()},"any, Array":function(h,m){return p(h,n(m)).valueOf()}});return p}),yq="compare",che=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],NT=ye(yq,che,function(t){var e=t.typed,n=t.config,r=t.equalScalar,a=t.matrix,s=t.BigNumber,o=t.Fraction,u=t.DenseMatrix,l=ds({typed:e}),f=yE({typed:e,equalScalar:r}),c=hs({typed:e,DenseMatrix:u}),p=pr({typed:e}),d=Jn({typed:e}),h=e(yq,{"boolean, boolean":function(v,g){return v===g?0:v>g?1:-1},"number, number":function(v,g){return bu(v,g,n.epsilon)?0:v>g?1:-1},"BigNumber, BigNumber":function(v,g){return bp(v,g,n.epsilon)?new s(0):new s(v.cmp(g))},"Fraction, Fraction":function(v,g){return new o(v.compare(g))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(v,g){if(!v.equalBase(g))throw new Error("Cannot compare units with different base");return h(v.value,g.value)},"SparseMatrix, SparseMatrix":function(v,g){return f(v,g,h)},"SparseMatrix, DenseMatrix":function(v,g){return l(g,v,h,!0)},"DenseMatrix, SparseMatrix":function(v,g){return l(v,g,h,!1)},"DenseMatrix, DenseMatrix":function(v,g){return p(v,g,h)},"Array, Array":function(v,g){return h(a(v),a(g)).valueOf()},"Array, Matrix":function(v,g){return h(a(v),g)},"Matrix, Array":function(v,g){return h(v,a(g))},"SparseMatrix, any":function(v,g){return c(v,g,h,!1)},"DenseMatrix, any":function(v,g){return d(v,g,h,!1)},"any, SparseMatrix":function(v,g){return c(g,v,h,!0)},"any, DenseMatrix":function(v,g){return d(g,v,h,!0)},"Array, any":function(v,g){return d(a(v),g,h,!1).valueOf()},"any, Array":function(v,g){return d(a(g),v,h,!0).valueOf()}});return h}),fhe=function t(e,n){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,o=/^0x[0-9a-f]+$/i,u=/^0/,l=function(x){return t.insensitive&&(""+x).toLowerCase()||""+x},f=l(e).replace(a,"")||"",c=l(n).replace(a,"")||"",p=f.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(f.match(o),16)||p.length!==1&&f.match(s)&&Date.parse(f),m=parseInt(c.match(o),16)||h&&c.match(s)&&Date.parse(c)||null,v,g;if(m){if(h<m)return-1;if(h>m)return 1}for(var y=0,_=Math.max(p.length,d.length);y<_;y++){if(v=!(p[y]||"").match(u)&&parseFloat(p[y])||p[y]||0,g=!(d[y]||"").match(u)&&parseFloat(d[y])||d[y]||0,isNaN(v)!==isNaN(g))return isNaN(v)?1:-1;if(typeof v!=typeof g&&(v+="",g+=""),v<g)return-1;if(v>g)return 1}return 0};const u0=Au(fhe);var xq="compareNatural",phe=["typed","compare"],CT=ye(xq,phe,function(t){var e=t.typed,n=t.compare,r=n.signatures["boolean,boolean"],a=e(xq,{"any, any":function(f,c){var p=ur(f),d=ur(c),h;if((p==="number"||p==="BigNumber"||p==="Fraction")&&(d==="number"||d==="BigNumber"||d==="Fraction"))return h=n(f,c),h.toString()!=="0"?h>0?1:-1:u0(p,d);if(p==="Array"||p==="Matrix"||d==="Array"||d==="Matrix")return h=s(f,c),h!==0?h:u0(p,d);if(p!==d)return u0(p,d);if(p==="Complex")return dhe(f,c);if(p==="Unit")return f.equalBase(c)?a(f.value,c.value):o(f.formatUnits(),c.formatUnits());if(p==="boolean")return r(f,c);if(p==="string")return u0(f,c);if(p==="Object")return u(f,c);if(p==="null"||p==="undefined")return 0;throw new TypeError('Unsupported type of value "'+p+'"')}});function s(l,f){return sc(l)&&sc(f)?o(l.toJSON().values,f.toJSON().values):sc(l)?s(l.toArray(),f):sc(f)?s(l,f.toArray()):Qd(l)?s(l.toJSON().data,f):Qd(f)?s(l,f.toJSON().data):Array.isArray(l)?Array.isArray(f)?o(l,f):s(l,[f]):s([l],f)}function o(l,f){for(var c=0,p=Math.min(l.length,f.length);c<p;c++){var d=a(l[c],f[c]);if(d!==0)return d}return l.length>f.length?1:l.length<f.length?-1:0}function u(l,f){var c=Object.keys(l),p=Object.keys(f);c.sort(u0),p.sort(u0);var d=o(c,p);if(d!==0)return d;for(var h=0;h<c.length;h++){var m=a(l[c[h]],f[p[h]]);if(m!==0)return m}return 0}return a});function dhe(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var bq="compareText",hhe=["typed","matrix"],DT=ye(bq,hhe,function(t){var e=t.typed,n=t.matrix,r=pr({typed:e}),a=Jn({typed:e}),s=e(bq,{"any, any":s0,"DenseMatrix, DenseMatrix":function(u,l){return r(u,l,s0)},"Array, Array":function(u,l){return s(n(u),n(l)).valueOf()},"Array, Matrix":function(u,l){return s(n(u),l)},"Matrix, Array":function(u,l){return s(u,n(l))},"DenseMatrix, any":function(u,l){return a(u,l,s0,!1)},"any, DenseMatrix":function(u,l){return a(l,u,s0,!0)},"Array, any":function(u,l){return a(n(u),l,s0,!1).valueOf()},"any, Array":function(u,l){return a(n(l),u,s0,!0).valueOf()}});return s}),fw="equal",mhe=["typed","matrix","equalScalar","DenseMatrix"],RT=ye(fw,mhe,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.DenseMatrix,s=ds({typed:e}),o=wl({typed:e,DenseMatrix:a}),u=hs({typed:e,DenseMatrix:a}),l=pr({typed:e}),f=Jn({typed:e}),c=e(fw,{"any, any":function(d,h){return d===null?h===null:h===null?d===null:d===void 0?h===void 0:h===void 0?d===void 0:r(d,h)},"SparseMatrix, SparseMatrix":function(d,h){return o(d,h,r)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,r,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,r,!1)},"DenseMatrix, DenseMatrix":function(d,h){return l(d,h,r)},"Array, Array":function(d,h){return c(n(d),n(h)).valueOf()},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Array":function(d,h){return c(d,n(h))},"SparseMatrix, any":function(d,h){return u(d,h,r,!1)},"DenseMatrix, any":function(d,h){return f(d,h,r,!1)},"any, SparseMatrix":function(d,h){return u(h,d,r,!0)},"any, DenseMatrix":function(d,h){return f(h,d,r,!0)},"Array, any":function(d,h){return f(n(d),h,r,!1).valueOf()},"any, Array":function(d,h){return f(n(h),d,r,!0).valueOf()}});return c});ye(fw,["typed","equalScalar"],function(t){var e=t.typed,n=t.equalScalar;return e(fw,{"any, any":function(a,s){return a===null?s===null:s===null?a===null:a===void 0?s===void 0:s===void 0?a===void 0:n(a,s)}})});var Sq="equalText",vhe=["typed","compareText","isZero"],IT=ye(Sq,vhe,function(t){var e=t.typed,n=t.compareText,r=t.isZero;return e(Sq,{"any, any":function(s,o){return r(n(s,o))}})}),wq="smaller",ghe=["typed","config","matrix","DenseMatrix"],PT=ye(wq,ghe,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.DenseMatrix,s=ds({typed:e}),o=wl({typed:e,DenseMatrix:a}),u=hs({typed:e,DenseMatrix:a}),l=pr({typed:e}),f=Jn({typed:e}),c=e(wq,{"boolean, boolean":function(d,h){return d<h},"number, number":function(d,h){return d<h&&!bu(d,h,n.epsilon)},"BigNumber, BigNumber":function(d,h){return d.lt(h)&&!bp(d,h,n.epsilon)},"Fraction, Fraction":function(d,h){return d.compare(h)===-1},"Complex, Complex":function(d,h){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(d,h){if(!d.equalBase(h))throw new Error("Cannot compare units with different base");return c(d.value,h.value)},"SparseMatrix, SparseMatrix":function(d,h){return o(d,h,c)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,c,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,c,!1)},"DenseMatrix, DenseMatrix":function(d,h){return l(d,h,c)},"Array, Array":function(d,h){return c(r(d),r(h)).valueOf()},"Array, Matrix":function(d,h){return c(r(d),h)},"Matrix, Array":function(d,h){return c(d,r(h))},"SparseMatrix, any":function(d,h){return u(d,h,c,!1)},"DenseMatrix, any":function(d,h){return f(d,h,c,!1)},"any, SparseMatrix":function(d,h){return u(h,d,c,!0)},"any, DenseMatrix":function(d,h){return f(h,d,c,!0)},"Array, any":function(d,h){return f(r(d),h,c,!1).valueOf()},"any, Array":function(d,h){return f(r(h),d,c,!0).valueOf()}});return c}),_q="smallerEq",yhe=["typed","config","matrix","DenseMatrix"],OT=ye(_q,yhe,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.DenseMatrix,s=ds({typed:e}),o=wl({typed:e,DenseMatrix:a}),u=hs({typed:e,DenseMatrix:a}),l=pr({typed:e}),f=Jn({typed:e}),c=e(_q,{"boolean, boolean":function(d,h){return d<=h},"number, number":function(d,h){return d<=h||bu(d,h,n.epsilon)},"BigNumber, BigNumber":function(d,h){return d.lte(h)||bp(d,h,n.epsilon)},"Fraction, Fraction":function(d,h){return d.compare(h)!==1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(d,h){if(!d.equalBase(h))throw new Error("Cannot compare units with different base");return c(d.value,h.value)},"SparseMatrix, SparseMatrix":function(d,h){return o(d,h,c)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,c,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,c,!1)},"DenseMatrix, DenseMatrix":function(d,h){return l(d,h,c)},"Array, Array":function(d,h){return c(r(d),r(h)).valueOf()},"Array, Matrix":function(d,h){return c(r(d),h)},"Matrix, Array":function(d,h){return c(d,r(h))},"SparseMatrix, any":function(d,h){return u(d,h,c,!1)},"DenseMatrix, any":function(d,h){return f(d,h,c,!1)},"any, SparseMatrix":function(d,h){return u(h,d,c,!0)},"any, DenseMatrix":function(d,h){return f(h,d,c,!0)},"Array, any":function(d,h){return f(r(d),h,c,!1).valueOf()},"any, Array":function(d,h){return f(r(h),d,c,!0).valueOf()}});return c}),Mq="larger",xhe=["typed","config","matrix","DenseMatrix"],LT=ye(Mq,xhe,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.DenseMatrix,s=ds({typed:e}),o=wl({typed:e,DenseMatrix:a}),u=hs({typed:e,DenseMatrix:a}),l=pr({typed:e}),f=Jn({typed:e}),c=e(Mq,{"boolean, boolean":function(d,h){return d>h},"number, number":function(d,h){return d>h&&!bu(d,h,n.epsilon)},"BigNumber, BigNumber":function(d,h){return d.gt(h)&&!bp(d,h,n.epsilon)},"Fraction, Fraction":function(d,h){return d.compare(h)===1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(d,h){if(!d.equalBase(h))throw new Error("Cannot compare units with different base");return c(d.value,h.value)},"SparseMatrix, SparseMatrix":function(d,h){return o(d,h,c)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,c,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,c,!1)},"DenseMatrix, DenseMatrix":function(d,h){return l(d,h,c)},"Array, Array":function(d,h){return c(r(d),r(h)).valueOf()},"Array, Matrix":function(d,h){return c(r(d),h)},"Matrix, Array":function(d,h){return c(d,r(h))},"SparseMatrix, any":function(d,h){return u(d,h,c,!1)},"DenseMatrix, any":function(d,h){return f(d,h,c,!1)},"any, SparseMatrix":function(d,h){return u(h,d,c,!0)},"any, DenseMatrix":function(d,h){return f(h,d,c,!0)},"Array, any":function(d,h){return f(r(d),h,c,!1).valueOf()},"any, Array":function(d,h){return f(r(h),d,c,!0).valueOf()}});return c}),Eq="largerEq",bhe=["typed","config","matrix","DenseMatrix"],kT=ye(Eq,bhe,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.DenseMatrix,s=ds({typed:e}),o=wl({typed:e,DenseMatrix:a}),u=hs({typed:e,DenseMatrix:a}),l=pr({typed:e}),f=Jn({typed:e}),c=e(Eq,{"boolean, boolean":function(d,h){return d>=h},"number, number":function(d,h){return d>=h||bu(d,h,n.epsilon)},"BigNumber, BigNumber":function(d,h){return d.gte(h)||bp(d,h,n.epsilon)},"Fraction, Fraction":function(d,h){return d.compare(h)!==-1},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(d,h){if(!d.equalBase(h))throw new Error("Cannot compare units with different base");return c(d.value,h.value)},"SparseMatrix, SparseMatrix":function(d,h){return o(d,h,c)},"SparseMatrix, DenseMatrix":function(d,h){return s(h,d,c,!0)},"DenseMatrix, SparseMatrix":function(d,h){return s(d,h,c,!1)},"DenseMatrix, DenseMatrix":function(d,h){return l(d,h,c)},"Array, Array":function(d,h){return c(r(d),r(h)).valueOf()},"Array, Matrix":function(d,h){return c(r(d),h)},"Matrix, Array":function(d,h){return c(d,r(h))},"SparseMatrix, any":function(d,h){return u(d,h,c,!1)},"DenseMatrix, any":function(d,h){return f(d,h,c,!1)},"any, SparseMatrix":function(d,h){return u(h,d,c,!0)},"any, DenseMatrix":function(d,h){return f(h,d,c,!0)},"Array, any":function(d,h){return f(r(d),h,c,!1).valueOf()},"any, Array":function(d,h){return f(r(h),d,c,!0).valueOf()}});return c}),Tq="deepEqual",She=["typed","equal"],UT=ye(Tq,She,function(t){var e=t.typed,n=t.equal;return e(Tq,{"any, any":function(s,o){return r(s.valueOf(),o.valueOf())}});function r(a,s){if(Array.isArray(a))if(Array.isArray(s)){var o=a.length;if(o!==s.length)return!1;for(var u=0;u<o;u++)if(!r(a[u],s[u]))return!1;return!0}else return!1;else return Array.isArray(s)?!1:n(a,s)}}),ZO="unequal",whe=["typed","config","equalScalar","matrix","DenseMatrix"],FT=ye(ZO,whe,function(t){var e=t.typed;t.config;var n=t.equalScalar,r=t.matrix,a=t.DenseMatrix,s=ds({typed:e}),o=wl({typed:e,DenseMatrix:a}),u=hs({typed:e,DenseMatrix:a}),l=pr({typed:e}),f=Jn({typed:e}),c=e("unequal",{"any, any":function(h,m){return h===null?m!==null:m===null?h!==null:h===void 0?m!==void 0:m===void 0?h!==void 0:p(h,m)},"SparseMatrix, SparseMatrix":function(h,m){return o(h,m,p)},"SparseMatrix, DenseMatrix":function(h,m){return s(m,h,p,!0)},"DenseMatrix, SparseMatrix":function(h,m){return s(h,m,p,!1)},"DenseMatrix, DenseMatrix":function(h,m){return l(h,m,p)},"Array, Array":function(h,m){return c(r(h),r(m)).valueOf()},"Array, Matrix":function(h,m){return c(r(h),m)},"Matrix, Array":function(h,m){return c(h,r(m))},"SparseMatrix, any":function(h,m){return u(h,m,p,!1)},"DenseMatrix, any":function(h,m){return f(h,m,p,!1)},"any, SparseMatrix":function(h,m){return u(m,h,p,!0)},"any, DenseMatrix":function(h,m){return f(m,h,p,!0)},"Array, any":function(h,m){return f(r(h),m,p,!1).valueOf()},"any, Array":function(h,m){return f(r(m),h,p,!0).valueOf()}});function p(d,h){return!n(d,h)}return c});ye(ZO,["typed","equalScalar"],function(t){var e=t.typed,n=t.equalScalar;return e(ZO,{"any, any":function(a,s){return a===null?s!==null:s===null?a!==null:a===void 0?s!==void 0:s===void 0?a!==void 0:!n(a,s)}})});var Aq="partitionSelect",_he=["typed","isNumeric","isNaN","compare"],BT=ye(Aq,_he,function(t){var e=t.typed,n=t.isNumeric,r=t.isNaN,a=t.compare,s=a,o=function(c,p){return-a(c,p)};return e(Aq,{"Array | Matrix, number":function(c,p){return u(c,p,s)},"Array | Matrix, number, string":function(c,p,d){if(d==="asc")return u(c,p,s);if(d==="desc")return u(c,p,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":u});function u(f,c,p){if(!Ot(c)||c<0)throw new Error("k must be a non-negative integer");if(Dn(f)){var d=f.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(f.valueOf(),c,p)}if(Array.isArray(f))return l(f,c,p)}function l(f,c,p){if(c>=f.length)throw new Error("k out of bounds");for(var d=0;d<f.length;d++)if(n(f[d])&&r(f[d]))return f[d];for(var h=0,m=f.length-1;h<m;){for(var v=h,g=m,y=f[Math.floor(Math.random()*(m-h+1))+h];v<g;)if(p(f[v],y)>=0){var _=f[g];f[g]=f[v],f[v]=_,--g}else++v;p(f[v],y)>0&&--v,c<=v?m=v:h=v+1}return f[c]}}),Nq="sort",Mhe=["typed","matrix","compare","compareNatural"],zT=ye(Nq,Mhe,function(t){var e=t.typed,n=t.matrix,r=t.compare,a=t.compareNatural,s=r,o=function(p,d){return-r(p,d)};return e(Nq,{Array:function(p){return l(p),p.sort(s)},Matrix:function(p){return f(p),n(p.toArray().sort(s),p.storage())},"Array, function":function(p,d){return l(p),p.sort(d)},"Matrix, function":function(p,d){return f(p),n(p.toArray().sort(d),p.storage())},"Array, string":function(p,d){return l(p),p.sort(u(d))},"Matrix, string":function(p,d){return f(p),n(p.toArray().sort(u(d)),p.storage())}});function u(c){if(c==="asc")return s;if(c==="desc")return o;if(c==="natural")return a;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(yn(c).length!==1)throw new Error("One dimensional array expected")}function f(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),Cq="max",Ehe=["typed","larger"],B1=ye(Cq,Ehe,function(t){var e=t.typed,n=t.larger;return e(Cq,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,u){return LM(o,u.valueOf(),r)},"...":function(o){if(I1(o))throw new TypeError("Scalar values expected in function max");return a(o)}});function r(s,o){try{return n(s,o)?s:o}catch(u){throw io(u,"max",o)}}function a(s){var o;if(yc(s,function(u){try{isNaN(u)&&typeof u=="number"?o=NaN:(o===void 0||n(u,o))&&(o=u)}catch(l){throw io(l,"max",u)}}),o===void 0)throw new Error("Cannot calculate max of an empty array");return o}}),Dq="min",The=["typed","smaller"],z1=ye(Dq,The,function(t){var e=t.typed,n=t.smaller;return e(Dq,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,u){return LM(o,u.valueOf(),r)},"...":function(o){if(I1(o))throw new TypeError("Scalar values expected in function min");return a(o)}});function r(s,o){try{return n(s,o)?s:o}catch(u){throw io(u,"min",o)}}function a(s){var o;if(yc(s,function(u){try{isNaN(u)&&typeof u=="number"?o=NaN:(o===void 0||n(u,o))&&(o=u)}catch(l){throw io(l,"min",u)}}),o===void 0)throw new Error("Cannot calculate min of an empty array");return o}}),Ahe="ImmutableDenseMatrix",Nhe=["smaller","DenseMatrix"],qT=ye(Ahe,Nhe,function(t){var e=t.smaller,n=t.DenseMatrix;function r(a,s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!Ca(s))throw new Error("Invalid datatype: "+s);if(Dn(a)||zn(a)){var o=new n(a,s);this._data=o._data,this._size=o._size,this._datatype=o._datatype,this._min=null,this._max=null}else if(a&&zn(a.data)&&zn(a.size))this._data=a.data,this._size=a.size,this._datatype=a.datatype,this._min=typeof a.min<"u"?a.min:null,this._max=typeof a.max<"u"?a.max:null;else{if(a)throw new TypeError("Unsupported type of data ("+ur(a)+")");this._data=[],this._size=[0],this._datatype=s,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(a){switch(arguments.length){case 1:{var s=n.prototype.subset.call(this,a);return Dn(s)?new r({data:s._data,size:s._size,datatype:s._datatype}):s}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Ut(this._data),size:Ut(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(a){return new r(a)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var a=null;this.forEach(function(s){(a===null||e(s,a))&&(a=s)}),this._min=a!==null?a:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var a=null;this.forEach(function(s){(a===null||e(a,s))&&(a=s)}),this._max=a!==null?a:void 0}return this._max},r},{isClass:!0}),Che="Index",Dhe=["ImmutableDenseMatrix"],GT=ye(Che,Dhe,function(t){var e=t.ImmutableDenseMatrix;function n(a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var s=0,o=arguments.length;s<o;s++){var u=arguments[s];if(mh(u))this._dimensions.push(u),this._isScalar=!1;else if(Array.isArray(u)||Dn(u)){var l=r(u.valueOf());this._dimensions.push(l);var f=l.size();(f.length!==1||f[0]!==1)&&(this._isScalar=!1)}else if(typeof u=="number")this._dimensions.push(r([u]));else if(typeof u=="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range")}}n.prototype.type="Index",n.prototype.isIndex=!0;function r(a){for(var s=0,o=a.length;s<o;s++)if(typeof a[s]!="number"||!Ot(a[s]))throw new TypeError("Index parameters must be positive integer numbers");return new e(a)}return n.prototype.clone=function(){var a=new n;return a._dimensions=Ut(this._dimensions),a._isScalar=this._isScalar,a},n.create=function(a){var s=new n;return n.apply(s,a),s},n.prototype.size=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a[s]=typeof u=="string"?1:u.size()[0]}return a},n.prototype.max=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a[s]=typeof u=="string"?u:u.max()}return a},n.prototype.min=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a[s]=typeof u=="string"?u:u.min()}return a},n.prototype.forEach=function(a){for(var s=0,o=this._dimensions.length;s<o;s++)a(this._dimensions[s],s,this)},n.prototype.dimension=function(a){return this._dimensions[a]||null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a.push(typeof u=="string"?u:u.toArray())}return a},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];typeof u=="string"?a.push(JSON.stringify(u)):a.push(u.toString())}return"["+a.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(a){return n.create(a.dimensions)},n},{isClass:!0}),Rhe="FibonacciHeap",Ihe=["smaller","larger"],HT=ye(Rhe,Ihe,function(t){var e=t.smaller,n=t.larger,r=1/Math.log((1+Math.sqrt(5))/2);function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}a.prototype.type="FibonacciHeap",a.prototype.isFibonacciHeap=!0,a.prototype.insert=function(c,p){var d={key:c,value:p,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},a.prototype.size=function(){return this._size},a.prototype.clear=function(){this._minimum=null,this._size=0},a.prototype.isEmpty=function(){return this._size===0},a.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var p=this._minimum,d=c.degree,h=c.child;d>0;){var m=h.right;h.left.right=h.right,h.right.left=h.left,h.left=p,h.right=p.right,p.right=h,h.right.left=h,h.parent=null,h=m,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?p=null:(p=c.right,p=f(p,this._size)),this._size--,this._minimum=p,c},a.prototype.remove=function(c){this._minimum=s(this._minimum,c,-1),this.extractMinimum()};function s(c,p,d){p.key=d;var h=p.parent;return h&&e(p.key,h.key)&&(o(c,p,h),u(c,h)),e(p.key,c.key)&&(c=p),c}function o(c,p,d){p.left.right=p.right,p.right.left=p.left,d.degree--,d.child===p&&(d.child=p.right),d.degree===0&&(d.child=null),p.left=c,p.right=c.right,c.right=p,p.right.left=p,p.parent=null,p.mark=!1}function u(c,p){var d=p.parent;d&&(p.mark?(o(c,p,d),u(d)):p.mark=!0)}var l=function(p,d){p.left.right=p.right,p.right.left=p.left,p.parent=d,d.child?(p.left=d.child,p.right=d.child.right,d.child.right=p,p.right.left=p):(d.child=p,p.right=p,p.left=p),d.degree++,p.mark=!1};function f(c,p){var d=Math.floor(Math.log(p)*r)+1,h=new Array(d),m=0,v=c;if(v)for(m++,v=v.right;v!==c;)m++,v=v.right;for(var g;m>0;){for(var y=v.degree,_=v.right;g=h[y],!!g;){if(n(v.key,g.key)){var x=g;g=v,v=x}l(g,v),h[y]=null,y++}h[y]=v,v=_,m--}c=null;for(var M=0;M<d;M++)g=h[M],g&&(c?(g.left.right=g.right,g.right.left=g.left,g.left=c,g.right=c.right,c.right=g,g.right.left=g,e(g.key,c.key)&&(c=g)):c=g);return c}return a},{isClass:!0}),Phe="Spa",Ohe=["addScalar","equalScalar","FibonacciHeap"],VT=ye(Phe,Ohe,function(t){var e=t.addScalar,n=t.equalScalar,r=t.FibonacciHeap;function a(){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return a.prototype.type="Spa",a.prototype.isSpa=!0,a.prototype.set=function(s,o){if(this._values[s])this._values[s].value=o;else{var u=this._heap.insert(s,o);this._values[s]=u}},a.prototype.get=function(s){var o=this._values[s];return o?o.value:0},a.prototype.accumulate=function(s,o){var u=this._values[s];u?u.value=e(u.value,o):(u=this._heap.insert(s,o),this._values[s]=u)},a.prototype.forEach=function(s,o,u){var l=this._heap,f=this._values,c=[],p=l.extractMinimum();for(p&&c.push(p);p&&p.key<=o;)p.key>=s&&(n(p.value,0)||u(p.key,p.value,this)),p=l.extractMinimum(),p&&c.push(p);for(var d=0;d<c.length;d++){var h=c[d];p=l.insert(h.key,h.value),f[p.key]=p}},a.prototype.swap=function(s,o){var u=this._values[s],l=this._values[o];if(!u&&l)u=this._heap.insert(s,l.value),this._heap.remove(l),this._values[s]=u,this._values[o]=void 0;else if(u&&!l)l=this._heap.insert(o,u.value),this._heap.remove(u),this._values[o]=l,this._values[s]=void 0;else if(u&&l){var f=u.value;u.value=l.value,l.value=f}},a},{isClass:!0}),Lhe=HE(function(t){return new t(1).exp()},WT),khe=HE(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},WT),fU=HE(function(t){return t.acos(-1)},WT),Uhe=HE(function(t){return fU(t).times(2)},WT);function WT(t){return t[0].precision}function Xg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xg=function(n){return typeof n}:Xg=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xg(t)}function Yg(){return Yg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yg.apply(this,arguments)}var Fhe="Unit",Bhe=["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],$T=ye(Fhe,Bhe,function(t){var e=t.on,n=t.config,r=t.addScalar,a=t.subtract,s=t.multiplyScalar,o=t.divideScalar,u=t.pow,l=t.abs,f=t.fix,c=t.round,p=t.equal,d=t.isNumeric,h=t.format,m=t.number,v=t.Complex,g=t.BigNumber,y=t.Fraction,_=m;function x(ne,se){if(!(this instanceof x))throw new Error("Constructor must be called with the new operator");if(!(ne==null||d(ne)||qo(ne)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(se!==void 0&&(typeof se!="string"||se===""))throw new TypeError("Second parameter in Unit constructor must be a string");if(se!==void 0){var xe=x.parse(se);this.units=xe.units,this.dimensions=xe.dimensions}else{this.units=[{unit:ee,prefix:F.NONE,power:0}],this.dimensions=[];for(var ve=0;ve<k.length;ve++)this.dimensions[ve]=0}this.value=ne!=null?this._normalize(ne):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0}x.prototype.type="Unit",x.prototype.isUnit=!0;var M,A,E;function N(){for(;E===" "||E==="	";)T()}function D(ne){return ne>="0"&&ne<="9"||ne==="."}function C(ne){return ne>="0"&&ne<="9"}function T(){A++,E=M.charAt(A)}function P(ne){A=ne,E=M.charAt(A)}function I(){var ne="",se=A;if(E==="+"?T():E==="-"&&(ne+=E,T()),!D(E))return P(se),null;if(E==="."){if(ne+=E,T(),!C(E))return P(se),null}else{for(;C(E);)ne+=E,T();E==="."&&(ne+=E,T())}for(;C(E);)ne+=E,T();if(E==="E"||E==="e"){var xe="",ve=A;if(xe+=E,T(),(E==="+"||E==="-")&&(xe+=E,T()),!C(E))return P(ve),ne;for(ne=ne+xe;C(E);)ne+=E,T()}return ne}function U(){for(var ne="",se=M.charCodeAt(A);se>=48&&se<=57||se>=65&&se<=90||se>=97&&se<=122;)ne+=E,T(),se=M.charCodeAt(A);return se=ne.charCodeAt(0),(se>=65&&se<=90||se>=97&&se<=122)&&ne||null}function q(ne){return E===ne?(T(),ne):null}x.parse=function(ne,se){if(se=se||{},M=ne,A=-1,E="",typeof M!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var xe=new x;xe.units=[];var ve=1,te=!1;T(),N();var $=I(),B=null;if($){if(n.number==="BigNumber")B=new g($);else if(n.number==="Fraction")try{B=new y($)}catch{B=parseFloat($)}else B=parseFloat($);N(),q("*")?(ve=1,te=!0):q("/")&&(ve=-1,te=!0)}for(var ae=[],ue=1;;){for(N();E==="(";)ae.push(ve),ue*=ve,ve=1,T(),N();var _e=void 0;if(E){var be=E;if(_e=U(),_e===null)throw new SyntaxError('Unexpected "'+be+'" in "'+M+'" at index '+A.toString())}else break;var Pe=z(_e);if(Pe===null)throw new SyntaxError('Unit "'+_e+'" not found.');var Te=ve*ue;if(N(),q("^")){N();var Ie=I();if(Ie===null)throw new SyntaxError('In "'+ne+'", "^" must be followed by a floating-point number');Te*=Ie}xe.units.push({unit:Pe.unit,prefix:Pe.prefix,power:Te});for(var Oe=0;Oe<k.length;Oe++)xe.dimensions[Oe]+=(Pe.unit.dimensions[Oe]||0)*Te;for(N();E===")";){if(ae.length===0)throw new SyntaxError('Unmatched ")" in "'+M+'" at index '+A.toString());ue/=ae.pop(),T(),N()}if(te=!1,q("*")?(ve=1,te=!0):q("/")?(ve=-1,te=!0):ve=1,Pe.unit.base){var Be=Pe.unit.base.key;K.auto[Be]={unit:Pe.unit,prefix:Pe.prefix}}}if(N(),E)throw new SyntaxError('Could not parse: "'+ne+'"');if(te)throw new SyntaxError('Trailing characters: "'+ne+'"');if(ae.length!==0)throw new SyntaxError('Unmatched "(" in "'+M+'"');if(xe.units.length===0&&!se.allowNoUnits)throw new SyntaxError('"'+ne+'" contains no units');return xe.value=B!==void 0?xe._normalize(B):null,xe},x.prototype.clone=function(){var ne=new x;ne.fixPrefix=this.fixPrefix,ne.skipAutomaticSimplification=this.skipAutomaticSimplification,ne.value=Ut(this.value),ne.dimensions=this.dimensions.slice(0),ne.units=[];for(var se=0;se<this.units.length;se++){ne.units[se]={};for(var xe in this.units[se])Et(this.units[se],xe)&&(ne.units[se][xe]=this.units[se][xe])}return ne},x.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},x.prototype._normalize=function(ne){var se,xe,ve,te,$;if(ne==null||this.units.length===0)return ne;if(this._isDerived()){var B=ne;$=x._getNumberConverter(ur(ne));for(var ae=0;ae<this.units.length;ae++)se=$(this.units[ae].unit.value),te=$(this.units[ae].prefix.value),ve=$(this.units[ae].power),B=s(B,u(s(se,te),ve));return B}else return $=x._getNumberConverter(ur(ne)),se=$(this.units[0].unit.value),xe=$(this.units[0].unit.offset),te=$(this.units[0].prefix.value),s(r(ne,xe),s(se,te))},x.prototype._denormalize=function(ne,se){var xe,ve,te,$,B;if(ne==null||this.units.length===0)return ne;if(this._isDerived()){var ae=ne;B=x._getNumberConverter(ur(ne));for(var ue=0;ue<this.units.length;ue++)xe=B(this.units[ue].unit.value),$=B(this.units[ue].prefix.value),te=B(this.units[ue].power),ae=o(ae,u(s(xe,$),te));return ae}else return B=x._getNumberConverter(ur(ne)),xe=B(this.units[0].unit.value),$=B(this.units[0].prefix.value),ve=B(this.units[0].unit.offset),se==null?a(o(o(ne,xe),$),ve):a(o(o(ne,xe),se),ve)};function z(ne){if(Et(J,ne)){var se=J[ne],xe=se.prefixes[""];return{unit:se,prefix:xe}}for(var ve in J)if(Et(J,ve)&&Ple(ne,ve)){var te=J[ve],$=ne.length-ve.length,B=ne.substring(0,$),ae=Et(te.prefixes,B)?te.prefixes[B]:void 0;if(ae!==void 0)return{unit:te,prefix:ae}}return null}x.isValuelessUnit=function(ne){return z(ne)!==null},x.prototype.hasBase=function(ne){if(typeof ne=="string"&&(ne=O[ne]),!ne)return!1;for(var se=0;se<k.length;se++)if(Math.abs((this.dimensions[se]||0)-(ne.dimensions[se]||0))>1e-12)return!1;return!0},x.prototype.equalBase=function(ne){for(var se=0;se<k.length;se++)if(Math.abs((this.dimensions[se]||0)-(ne.dimensions[se]||0))>1e-12)return!1;return!0},x.prototype.equals=function(ne){return this.equalBase(ne)&&p(this.value,ne.value)},x.prototype.multiply=function(ne){for(var se=this.clone(),xe=0;xe<k.length;xe++)se.dimensions[xe]=(this.dimensions[xe]||0)+(ne.dimensions[xe]||0);for(var ve=0;ve<ne.units.length;ve++){var te={};for(var $ in ne.units[ve])te[$]=ne.units[ve][$];se.units.push(te)}if(this.value!==null||ne.value!==null){var B=this.value===null?this._normalize(1):this.value,ae=ne.value===null?ne._normalize(1):ne.value;se.value=s(B,ae)}else se.value=null;return se.skipAutomaticSimplification=!1,G(se)},x.prototype.divide=function(ne){for(var se=this.clone(),xe=0;xe<k.length;xe++)se.dimensions[xe]=(this.dimensions[xe]||0)-(ne.dimensions[xe]||0);for(var ve=0;ve<ne.units.length;ve++){var te={};for(var $ in ne.units[ve])te[$]=ne.units[ve][$];te.power=-te.power,se.units.push(te)}if(this.value!==null||ne.value!==null){var B=this.value===null?this._normalize(1):this.value,ae=ne.value===null?ne._normalize(1):ne.value;se.value=o(B,ae)}else se.value=null;return se.skipAutomaticSimplification=!1,G(se)},x.prototype.pow=function(ne){for(var se=this.clone(),xe=0;xe<k.length;xe++)se.dimensions[xe]=(this.dimensions[xe]||0)*ne;for(var ve=0;ve<se.units.length;ve++)se.units[ve].power*=ne;return se.value!==null?se.value=u(se.value,ne):se.value=null,se.skipAutomaticSimplification=!1,G(se)};function G(ne){return ne.equalBase(O.NONE)&&ne.value!==null&&!n.predictable?ne.value:ne}x.prototype.abs=function(){var ne=this.clone();ne.value=ne.value!==null?l(ne.value):null;for(var se in ne.units)(ne.units[se].unit.name==="VA"||ne.units[se].unit.name==="VAR")&&(ne.units[se].unit=J.W);return ne},x.prototype.to=function(ne){var se,xe=this.value===null?this._normalize(1):this.value;if(typeof ne=="string"){if(se=x.parse(ne),!this.equalBase(se))throw new Error("Units do not match ('".concat(se.toString(),"' != '").concat(this.toString(),"')"));if(se.value!==null)throw new Error("Cannot convert to a unit with a value");return se.value=Ut(xe),se.fixPrefix=!0,se.skipAutomaticSimplification=!0,se}else if(Uc(ne)){if(!this.equalBase(ne))throw new Error("Units do not match ('".concat(ne.toString(),"' != '").concat(this.toString(),"')"));if(ne.value!==null)throw new Error("Cannot convert to a unit with a value");return se=ne.clone(),se.value=Ut(xe),se.fixPrefix=!0,se.skipAutomaticSimplification=!0,se}else throw new Error("String or Unit expected as parameter")},x.prototype.toNumber=function(ne){return _(this.toNumeric(ne))},x.prototype.toNumeric=function(ne){var se;return ne?se=this.to(ne):se=this.clone(),se._isDerived()||se.units.length===0?se._denormalize(se.value):se._denormalize(se.value,se.units[0].prefix.value)},x.prototype.toString=function(){return this.format()},x.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},x.fromJSON=function(ne){var se=new x(ne.value,ne.unit);return se.fixPrefix=ne.fixPrefix||!1,se},x.prototype.valueOf=x.prototype.toString,x.prototype.simplify=function(){var ne=this.clone(),se=[],xe;for(var ve in re)if(ne.hasBase(O[ve])){xe=ve;break}if(xe==="NONE")ne.units=[];else{var te;if(xe&&Et(re,xe)&&(te=re[xe]),te)ne.units=[{unit:te.unit,prefix:te.prefix,power:1}];else{for(var $=!1,B=0;B<k.length;B++){var ae=k[B];Math.abs(ne.dimensions[B]||0)>1e-12&&(Et(re,ae)?se.push({unit:re[ae].unit,prefix:re[ae].prefix,power:ne.dimensions[B]||0}):$=!0)}se.length<ne.units.length&&!$&&(ne.units=se)}}return ne},x.prototype.toSI=function(){for(var ne=this.clone(),se=[],xe=0;xe<k.length;xe++){var ve=k[xe];if(Math.abs(ne.dimensions[xe]||0)>1e-12)if(Et(K.si,ve))se.push({unit:K.si[ve].unit,prefix:K.si[ve].prefix,power:ne.dimensions[xe]||0});else throw new Error("Cannot express custom unit "+ve+" in SI units")}return ne.units=se,ne.fixPrefix=!0,ne.skipAutomaticSimplification=!0,ne},x.prototype.formatUnits=function(){for(var ne="",se="",xe=0,ve=0,te=0;te<this.units.length;te++)this.units[te].power>0?(xe++,ne+=" "+this.units[te].prefix.name+this.units[te].unit.name,Math.abs(this.units[te].power-1)>1e-15&&(ne+="^"+this.units[te].power)):this.units[te].power<0&&ve++;if(ve>0)for(var $=0;$<this.units.length;$++)this.units[$].power<0&&(xe>0?(se+=" "+this.units[$].prefix.name+this.units[$].unit.name,Math.abs(this.units[$].power+1)>1e-15&&(se+="^"+-this.units[$].power)):(se+=" "+this.units[$].prefix.name+this.units[$].unit.name,se+="^"+this.units[$].power));ne=ne.substr(1),se=se.substr(1),xe>1&&ve>0&&(ne="("+ne+")"),ve>1&&xe>0&&(se="("+se+")");var B=ne;return xe>0&&ve>0&&(B+=" / "),B+=se,B},x.prototype.format=function(ne){var se=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),xe=!1;typeof se.value<"u"&&se.value!==null&&qo(se.value)&&(xe=Math.abs(se.value.re)<1e-14);for(var ve in se.units)se.units[ve].unit&&(se.units[ve].unit.name==="VA"&&xe?se.units[ve].unit=J.VAR:se.units[ve].unit.name==="VAR"&&!xe&&(se.units[ve].unit=J.VA));se.units.length===1&&!se.fixPrefix&&Math.abs(se.units[0].power-Math.round(se.units[0].power))<1e-14&&(se.units[0].prefix=se._bestPrefix());var te=se._denormalize(se.value),$=se.value!==null?h(te,ne||{}):"",B=se.formatUnits();return se.value&&qo(se.value)&&($="("+$+")"),B.length>0&&$.length>0&&($+=" "),$+=B,$},x.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var ne=this.value!==null?l(this.value):0,se=l(this.units[0].unit.value),xe=this.units[0].prefix;if(ne===0)return xe;var ve=this.units[0].power,te=Math.log(ne/Math.pow(xe.value*se,ve))/Math.LN10-1.2;if(te>-2.200001&&te<1.800001)return xe;te=Math.abs(te);var $=this.units[0].unit.prefixes;for(var B in $)if(Et($,B)){var ae=$[B];if(ae.scientific){var ue=Math.abs(Math.log(ne/Math.pow(ae.value*se,ve))/Math.LN10-1.2);(ue<te||ue===te&&ae.name.length<xe.name.length)&&(xe=ae,te=ue)}}return xe},x.prototype.splitUnit=function(ne){for(var se=this.clone(),xe=[],ve=0;ve<ne.length&&(se=se.to(ne[ve]),ve!==ne.length-1);ve++){var te=se.toNumeric(),$=c(te),B=void 0,ae=p($,te);ae?B=$:B=f(se.toNumeric());var ue=new x(B,ne[ve].toString());xe.push(ue),se=a(se,ue)}for(var _e=0,be=0;be<xe.length;be++)_e=r(_e,xe[be].value);return p(_e,this.value)&&(se.value=0),xe.push(se),xe};var F={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};F.SHORTLONG=Yg({},F.SHORT,F.LONG),F.BINARY_SHORT=Yg({},F.BINARY_SHORT_SI,F.BINARY_SHORT_IEC),F.BINARY_LONG=Yg({},F.BINARY_LONG_SI,F.BINARY_LONG_IEC);var k=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],O={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var W in O)O[W].key=W;var X={},ee={name:"",base:X,value:1,offset:0,dimensions:k.map(function(ne){return 0})},J={meter:{name:"meter",base:O.LENGTH,prefixes:F.LONG,value:1,offset:0},inch:{name:"inch",base:O.LENGTH,prefixes:F.NONE,value:.0254,offset:0},foot:{name:"foot",base:O.LENGTH,prefixes:F.NONE,value:.3048,offset:0},yard:{name:"yard",base:O.LENGTH,prefixes:F.NONE,value:.9144,offset:0},mile:{name:"mile",base:O.LENGTH,prefixes:F.NONE,value:1609.344,offset:0},link:{name:"link",base:O.LENGTH,prefixes:F.NONE,value:.201168,offset:0},rod:{name:"rod",base:O.LENGTH,prefixes:F.NONE,value:5.0292,offset:0},chain:{name:"chain",base:O.LENGTH,prefixes:F.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:O.LENGTH,prefixes:F.NONE,value:1e-10,offset:0},m:{name:"m",base:O.LENGTH,prefixes:F.SHORT,value:1,offset:0},in:{name:"in",base:O.LENGTH,prefixes:F.NONE,value:.0254,offset:0},ft:{name:"ft",base:O.LENGTH,prefixes:F.NONE,value:.3048,offset:0},yd:{name:"yd",base:O.LENGTH,prefixes:F.NONE,value:.9144,offset:0},mi:{name:"mi",base:O.LENGTH,prefixes:F.NONE,value:1609.344,offset:0},li:{name:"li",base:O.LENGTH,prefixes:F.NONE,value:.201168,offset:0},rd:{name:"rd",base:O.LENGTH,prefixes:F.NONE,value:5.02921,offset:0},ch:{name:"ch",base:O.LENGTH,prefixes:F.NONE,value:20.1168,offset:0},mil:{name:"mil",base:O.LENGTH,prefixes:F.NONE,value:254e-7,offset:0},m2:{name:"m2",base:O.SURFACE,prefixes:F.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:O.SURFACE,prefixes:F.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:O.SURFACE,prefixes:F.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:O.SURFACE,prefixes:F.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:O.SURFACE,prefixes:F.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:O.SURFACE,prefixes:F.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:O.SURFACE,prefixes:F.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:O.SURFACE,prefixes:F.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:O.SURFACE,prefixes:F.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:O.SURFACE,prefixes:F.NONE,value:1e4,offset:0},m3:{name:"m3",base:O.VOLUME,prefixes:F.CUBIC,value:1,offset:0},L:{name:"L",base:O.VOLUME,prefixes:F.SHORT,value:.001,offset:0},l:{name:"l",base:O.VOLUME,prefixes:F.SHORT,value:.001,offset:0},litre:{name:"litre",base:O.VOLUME,prefixes:F.LONG,value:.001,offset:0},cuin:{name:"cuin",base:O.VOLUME,prefixes:F.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:O.VOLUME,prefixes:F.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:O.VOLUME,prefixes:F.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:O.VOLUME,prefixes:F.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:O.VOLUME,prefixes:F.NONE,value:15e-6,offset:0},drop:{name:"drop",base:O.VOLUME,prefixes:F.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:O.VOLUME,prefixes:F.NONE,value:5e-8,offset:0},minim:{name:"minim",base:O.VOLUME,prefixes:F.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:O.VOLUME,prefixes:F.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:O.VOLUME,prefixes:F.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:O.VOLUME,prefixes:F.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:O.VOLUME,prefixes:F.NONE,value:1e-6,offset:0},cup:{name:"cup",base:O.VOLUME,prefixes:F.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:O.VOLUME,prefixes:F.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:O.VOLUME,prefixes:F.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:O.VOLUME,prefixes:F.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:O.VOLUME,prefixes:F.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:O.VOLUME,prefixes:F.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:O.VOLUME,prefixes:F.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:O.VOLUME,prefixes:F.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:O.VOLUME,prefixes:F.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:O.VOLUME,prefixes:F.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:O.VOLUME,prefixes:F.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:O.VOLUME,prefixes:F.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:O.VOLUME,prefixes:F.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:O.VOLUME,prefixes:F.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:O.VOLUME,prefixes:F.NONE,value:.1173478,offset:0},obl:{name:"obl",base:O.VOLUME,prefixes:F.NONE,value:.1589873,offset:0},g:{name:"g",base:O.MASS,prefixes:F.SHORT,value:.001,offset:0},gram:{name:"gram",base:O.MASS,prefixes:F.LONG,value:.001,offset:0},ton:{name:"ton",base:O.MASS,prefixes:F.SHORT,value:907.18474,offset:0},t:{name:"t",base:O.MASS,prefixes:F.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:O.MASS,prefixes:F.LONG,value:1e3,offset:0},grain:{name:"grain",base:O.MASS,prefixes:F.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:O.MASS,prefixes:F.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:O.MASS,prefixes:F.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:O.MASS,prefixes:F.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:O.MASS,prefixes:F.NONE,value:45.359237,offset:0},stick:{name:"stick",base:O.MASS,prefixes:F.NONE,value:.115,offset:0},stone:{name:"stone",base:O.MASS,prefixes:F.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:O.MASS,prefixes:F.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:O.MASS,prefixes:F.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:O.MASS,prefixes:F.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:O.MASS,prefixes:F.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:O.MASS,prefixes:F.NONE,value:45.359237,offset:0},s:{name:"s",base:O.TIME,prefixes:F.SHORT,value:1,offset:0},min:{name:"min",base:O.TIME,prefixes:F.NONE,value:60,offset:0},h:{name:"h",base:O.TIME,prefixes:F.NONE,value:3600,offset:0},second:{name:"second",base:O.TIME,prefixes:F.LONG,value:1,offset:0},sec:{name:"sec",base:O.TIME,prefixes:F.LONG,value:1,offset:0},minute:{name:"minute",base:O.TIME,prefixes:F.NONE,value:60,offset:0},hour:{name:"hour",base:O.TIME,prefixes:F.NONE,value:3600,offset:0},day:{name:"day",base:O.TIME,prefixes:F.NONE,value:86400,offset:0},week:{name:"week",base:O.TIME,prefixes:F.NONE,value:7*86400,offset:0},month:{name:"month",base:O.TIME,prefixes:F.NONE,value:2629800,offset:0},year:{name:"year",base:O.TIME,prefixes:F.NONE,value:31557600,offset:0},decade:{name:"decade",base:O.TIME,prefixes:F.NONE,value:315576e3,offset:0},century:{name:"century",base:O.TIME,prefixes:F.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:O.TIME,prefixes:F.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:O.FREQUENCY,prefixes:F.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:O.FREQUENCY,prefixes:F.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:O.ANGLE,prefixes:F.SHORT,value:1,offset:0},radian:{name:"radian",base:O.ANGLE,prefixes:F.LONG,value:1,offset:0},deg:{name:"deg",base:O.ANGLE,prefixes:F.SHORT,value:null,offset:0},degree:{name:"degree",base:O.ANGLE,prefixes:F.LONG,value:null,offset:0},grad:{name:"grad",base:O.ANGLE,prefixes:F.SHORT,value:null,offset:0},gradian:{name:"gradian",base:O.ANGLE,prefixes:F.LONG,value:null,offset:0},cycle:{name:"cycle",base:O.ANGLE,prefixes:F.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:O.ANGLE,prefixes:F.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:O.ANGLE,prefixes:F.NONE,value:null,offset:0},A:{name:"A",base:O.CURRENT,prefixes:F.SHORT,value:1,offset:0},ampere:{name:"ampere",base:O.CURRENT,prefixes:F.LONG,value:1,offset:0},K:{name:"K",base:O.TEMPERATURE,prefixes:F.NONE,value:1,offset:0},degC:{name:"degC",base:O.TEMPERATURE,prefixes:F.NONE,value:1,offset:273.15},degF:{name:"degF",base:O.TEMPERATURE,prefixes:F.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:O.TEMPERATURE,prefixes:F.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:O.TEMPERATURE,prefixes:F.NONE,value:1,offset:0},celsius:{name:"celsius",base:O.TEMPERATURE,prefixes:F.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:O.TEMPERATURE,prefixes:F.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:O.TEMPERATURE,prefixes:F.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:O.AMOUNT_OF_SUBSTANCE,prefixes:F.SHORT,value:1,offset:0},mole:{name:"mole",base:O.AMOUNT_OF_SUBSTANCE,prefixes:F.LONG,value:1,offset:0},cd:{name:"cd",base:O.LUMINOUS_INTENSITY,prefixes:F.SHORT,value:1,offset:0},candela:{name:"candela",base:O.LUMINOUS_INTENSITY,prefixes:F.LONG,value:1,offset:0},N:{name:"N",base:O.FORCE,prefixes:F.SHORT,value:1,offset:0},newton:{name:"newton",base:O.FORCE,prefixes:F.LONG,value:1,offset:0},dyn:{name:"dyn",base:O.FORCE,prefixes:F.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:O.FORCE,prefixes:F.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:O.FORCE,prefixes:F.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:O.FORCE,prefixes:F.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:O.FORCE,prefixes:F.LONG,value:4448.2216,offset:0},J:{name:"J",base:O.ENERGY,prefixes:F.SHORT,value:1,offset:0},joule:{name:"joule",base:O.ENERGY,prefixes:F.SHORT,value:1,offset:0},erg:{name:"erg",base:O.ENERGY,prefixes:F.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:O.ENERGY,prefixes:F.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:O.ENERGY,prefixes:F.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:O.ENERGY,prefixes:F.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:O.ENERGY,prefixes:F.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:O.POWER,prefixes:F.SHORT,value:1,offset:0},watt:{name:"watt",base:O.POWER,prefixes:F.LONG,value:1,offset:0},hp:{name:"hp",base:O.POWER,prefixes:F.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:O.POWER,prefixes:F.SHORT,value:v.I,offset:0},VA:{name:"VA",base:O.POWER,prefixes:F.SHORT,value:1,offset:0},Pa:{name:"Pa",base:O.PRESSURE,prefixes:F.SHORT,value:1,offset:0},psi:{name:"psi",base:O.PRESSURE,prefixes:F.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:O.PRESSURE,prefixes:F.NONE,value:101325,offset:0},bar:{name:"bar",base:O.PRESSURE,prefixes:F.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:O.PRESSURE,prefixes:F.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:O.PRESSURE,prefixes:F.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:O.PRESSURE,prefixes:F.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:O.PRESSURE,prefixes:F.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:O.ELECTRIC_CHARGE,prefixes:F.LONG,value:1,offset:0},C:{name:"C",base:O.ELECTRIC_CHARGE,prefixes:F.SHORT,value:1,offset:0},farad:{name:"farad",base:O.ELECTRIC_CAPACITANCE,prefixes:F.LONG,value:1,offset:0},F:{name:"F",base:O.ELECTRIC_CAPACITANCE,prefixes:F.SHORT,value:1,offset:0},volt:{name:"volt",base:O.ELECTRIC_POTENTIAL,prefixes:F.LONG,value:1,offset:0},V:{name:"V",base:O.ELECTRIC_POTENTIAL,prefixes:F.SHORT,value:1,offset:0},ohm:{name:"ohm",base:O.ELECTRIC_RESISTANCE,prefixes:F.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:O.ELECTRIC_INDUCTANCE,prefixes:F.LONG,value:1,offset:0},H:{name:"H",base:O.ELECTRIC_INDUCTANCE,prefixes:F.SHORT,value:1,offset:0},siemens:{name:"siemens",base:O.ELECTRIC_CONDUCTANCE,prefixes:F.LONG,value:1,offset:0},S:{name:"S",base:O.ELECTRIC_CONDUCTANCE,prefixes:F.SHORT,value:1,offset:0},weber:{name:"weber",base:O.MAGNETIC_FLUX,prefixes:F.LONG,value:1,offset:0},Wb:{name:"Wb",base:O.MAGNETIC_FLUX,prefixes:F.SHORT,value:1,offset:0},tesla:{name:"tesla",base:O.MAGNETIC_FLUX_DENSITY,prefixes:F.LONG,value:1,offset:0},T:{name:"T",base:O.MAGNETIC_FLUX_DENSITY,prefixes:F.SHORT,value:1,offset:0},b:{name:"b",base:O.BIT,prefixes:F.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:O.BIT,prefixes:F.BINARY_LONG,value:1,offset:0},B:{name:"B",base:O.BIT,prefixes:F.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:O.BIT,prefixes:F.BINARY_LONG,value:8,offset:0}},Y={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ie(ne){if(ne.number==="BigNumber"){var se=fU(g);J.rad.value=new g(1),J.deg.value=se.div(180),J.grad.value=se.div(200),J.cycle.value=se.times(2),J.arcsec.value=se.div(648e3),J.arcmin.value=se.div(10800)}else J.rad.value=1,J.deg.value=Math.PI/180,J.grad.value=Math.PI/200,J.cycle.value=Math.PI*2,J.arcsec.value=Math.PI/648e3,J.arcmin.value=Math.PI/10800;J.radian.value=J.rad.value,J.degree.value=J.deg.value,J.gradian.value=J.grad.value}ie(n),e&&e("config",function(ne,se){ne.number!==se.number&&ie(ne)});var K={si:{NONE:{unit:ee,prefix:F.NONE[""]},LENGTH:{unit:J.m,prefix:F.SHORT[""]},MASS:{unit:J.g,prefix:F.SHORT.k},TIME:{unit:J.s,prefix:F.SHORT[""]},CURRENT:{unit:J.A,prefix:F.SHORT[""]},TEMPERATURE:{unit:J.K,prefix:F.SHORT[""]},LUMINOUS_INTENSITY:{unit:J.cd,prefix:F.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:J.mol,prefix:F.SHORT[""]},ANGLE:{unit:J.rad,prefix:F.SHORT[""]},BIT:{unit:J.bits,prefix:F.SHORT[""]},FORCE:{unit:J.N,prefix:F.SHORT[""]},ENERGY:{unit:J.J,prefix:F.SHORT[""]},POWER:{unit:J.W,prefix:F.SHORT[""]},PRESSURE:{unit:J.Pa,prefix:F.SHORT[""]},ELECTRIC_CHARGE:{unit:J.C,prefix:F.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:J.F,prefix:F.SHORT[""]},ELECTRIC_POTENTIAL:{unit:J.V,prefix:F.SHORT[""]},ELECTRIC_RESISTANCE:{unit:J.ohm,prefix:F.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:J.H,prefix:F.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:J.S,prefix:F.SHORT[""]},MAGNETIC_FLUX:{unit:J.Wb,prefix:F.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:J.T,prefix:F.SHORT[""]},FREQUENCY:{unit:J.Hz,prefix:F.SHORT[""]}}};K.cgs=JSON.parse(JSON.stringify(K.si)),K.cgs.LENGTH={unit:J.m,prefix:F.SHORT.c},K.cgs.MASS={unit:J.g,prefix:F.SHORT[""]},K.cgs.FORCE={unit:J.dyn,prefix:F.SHORT[""]},K.cgs.ENERGY={unit:J.erg,prefix:F.NONE[""]},K.us=JSON.parse(JSON.stringify(K.si)),K.us.LENGTH={unit:J.ft,prefix:F.NONE[""]},K.us.MASS={unit:J.lbm,prefix:F.NONE[""]},K.us.TEMPERATURE={unit:J.degF,prefix:F.NONE[""]},K.us.FORCE={unit:J.lbf,prefix:F.NONE[""]},K.us.ENERGY={unit:J.BTU,prefix:F.BTU[""]},K.us.POWER={unit:J.hp,prefix:F.NONE[""]},K.us.PRESSURE={unit:J.psi,prefix:F.NONE[""]},K.auto=JSON.parse(JSON.stringify(K.si));var re=K.auto;x.setUnitSystem=function(ne){if(Et(K,ne))re=K[ne];else throw new Error("Unit system "+ne+" does not exist. Choices are: "+Object.keys(K).join(", "))},x.getUnitSystem=function(){for(var ne in K)if(K[ne]===re)return ne},x.typeConverters={BigNumber:function(se){return new g(se+"")},Fraction:function(se){return new y(se)},Complex:function(se){return se},number:function(se){return se}},x._getNumberConverter=function(ne){if(!x.typeConverters[ne])throw new TypeError('Unsupported type "'+ne+'"');return x.typeConverters[ne]};for(var oe in J){var ce=J[oe];ce.dimensions=ce.base.dimensions}for(var me in Y)if(Et(Y,me)){var Se=J[Y[me]],le={};for(var Q in Se)Et(Se,Q)&&(le[Q]=Se[Q]);le.name=me,J[me]=le}function Ee(ne){for(var se=0;se<ne.length;se++){var xe=ne.charAt(se),ve=function(B){return/^[a-zA-Z]$/.test(B)},te=function(B){return B>="0"&&B<="9"};if(se===0&&!ve(xe))throw new Error('Invalid unit name (must begin with alpha character): "'+ne+'"');if(se>0&&!(ve(xe)||te(xe)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+ne+'"')}}return x.createUnit=function(ne,se){if(Xg(ne)!=="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(se&&se.override){for(var xe in ne)if(Et(ne,xe)&&x.deleteUnit(xe),ne[xe].aliases)for(var ve=0;ve<ne[xe].aliases.length;ve++)x.deleteUnit(ne[xe].aliases[ve])}var te;for(var $ in ne)Et(ne,$)&&(te=x.createUnitSingle($,ne[$]));return te},x.createUnitSingle=function(ne,se,xe){if((typeof se>"u"||se===null)&&(se={}),typeof ne!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Et(J,ne))throw new Error('Cannot create unit "'+ne+'": a unit with that name already exists');Ee(ne);var ve=null,te=[],$=0,B,ae,ue;if(se&&se.type==="Unit")ve=se.clone();else if(typeof se=="string")se!==""&&(B=se);else if(Xg(se)==="object")B=se.definition,ae=se.prefixes,$=se.offset,ue=se.baseName,se.aliases&&(te=se.aliases.valueOf());else throw new TypeError('Cannot create unit "'+ne+'" from "'+se.toString()+'": expecting "string" or "Unit" or "Object"');if(te){for(var _e=0;_e<te.length;_e++)if(Et(J,te[_e]))throw new Error('Cannot create alias "'+te[_e]+'": a unit with that name already exists')}if(B&&typeof B=="string"&&!ve)try{ve=x.parse(B,{allowNoUnits:!0})}catch(j){throw j.message='Could not create unit "'+ne+'" from "'+B+'": '+j.message,j}else B&&B.type==="Unit"&&(ve=B.clone());te=te||[],$=$||0,ae&&ae.toUpperCase?ae=F[ae.toUpperCase()]||F.NONE:ae=F.NONE;var be={};if(ve){be={name:ne,value:ve.value,dimensions:ve.dimensions.slice(0),prefixes:ae,offset:$};var Oe=!1;for(var Be in O)if(Et(O,Be)){for(var He=!0,Qe=0;Qe<k.length;Qe++)if(Math.abs((be.dimensions[Qe]||0)-(O[Be].dimensions[Qe]||0))>1e-12){He=!1;break}if(He){Oe=!0,be.base=O[Be];break}}if(!Oe){ue=ue||ne+"_STUFF";var et={dimensions:ve.dimensions.slice(0)};et.key=ue,O[ue]=et,re[ue]={unit:be,prefix:F.NONE[""]},be.base=O[ue]}}else{if(ue=ue||ne+"_STUFF",k.indexOf(ue)>=0)throw new Error('Cannot create new base unit "'+ne+'": a base unit with that name already exists (and cannot be overridden)');k.push(ue);for(var Pe in O)Et(O,Pe)&&(O[Pe].dimensions[k.length-1]=0);for(var Te={dimensions:[]},Ie=0;Ie<k.length;Ie++)Te.dimensions[Ie]=0;Te.dimensions[k.length-1]=1,Te.key=ue,O[ue]=Te,be={name:ne,value:1,dimensions:O[ue].dimensions.slice(0),prefixes:ae,offset:$,base:O[ue]},re[ue]={unit:be,prefix:F.NONE[""]}}x.UNITS[ne]=be;for(var Xe=0;Xe<te.length;Xe++){var je=te[Xe],we={};for(var V in be)Et(be,V)&&(we[V]=be[V]);we.name=je,x.UNITS[je]=we}return new x(null,ne)},x.deleteUnit=function(ne){delete x.UNITS[ne]},x.PREFIXES=F,x.BASE_DIMENSIONS=k,x.BASE_UNITS=O,x.UNIT_SYSTEMS=K,x.UNITS=J,x},{isClass:!0}),Rq="unit",zhe=["typed","Unit"],jT=ye(Rq,zhe,function(t){var e=t.typed,n=t.Unit,r=e(Rq,{Unit:function(s){return s.clone()},string:function(s){return n.isValuelessUnit(s)?new n(null,s):n.parse(s,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string":function(s,o){return new n(s,o)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Iq="sparse",qhe=["typed","SparseMatrix"],XT=ye(Iq,qhe,function(t){var e=t.typed,n=t.SparseMatrix;return e(Iq,{"":function(){return new n([])},string:function(a){return new n([],a)},"Array | Matrix":function(a){return new n(a)},"Array | Matrix, string":function(a,s){return new n(a,s)}})}),Pq="createUnit",Ghe=["typed","Unit"],YT=ye(Pq,Ghe,function(t){var e=t.typed,n=t.Unit;return e(Pq,{"Object, Object":function(a,s){return n.createUnit(a,s)},Object:function(a){return n.createUnit(a,{})},"string, Unit | string | Object, Object":function(a,s,o){var u={};return u[a]=s,n.createUnit(u,o)},"string, Unit | string | Object":function(a,s){var o={};return o[a]=s,n.createUnit(o,{})},string:function(a){var s={};return s[a]={},n.createUnit(s,{})}})}),Oq="acos",Hhe=["typed","config","Complex"],QT=ye(Oq,Hhe,function(t){var e=t.typed,n=t.config,r=t.Complex,a=e(Oq,{number:function(o){return o>=-1&&o<=1||n.predictable?Math.acos(o):new r(o,0).acos()},Complex:function(o){return o.acos()},BigNumber:function(o){return o.acos()},"Array | Matrix":function(o){return wt(o,a)}});return a}),Lq="acosh",Vhe=["typed","config","Complex"],ZT=ye(Lq,Vhe,function(t){var e=t.typed,n=t.config,r=t.Complex,a=e(Lq,{number:function(o){return o>=1||n.predictable?$$(o):o<=-1?new r(Math.log(Math.sqrt(o*o-1)-o),Math.PI):new r(o,0).acosh()},Complex:function(o){return o.acosh()},BigNumber:function(o){return o.acosh()},"Array | Matrix":function(o){return wt(o,a)}});return a}),kq="acot",Whe=["typed","BigNumber"],JT=ye(kq,Whe,function(t){var e=t.typed,n=t.BigNumber,r=e(kq,{number:j$,Complex:function(s){return s.acot()},BigNumber:function(s){return new n(1).div(s).atan()},"Array | Matrix":function(s){return wt(s,r)}});return r}),Uq="acoth",$he=["typed","config","Complex","BigNumber"],KT=ye(Uq,$he,function(t){var e=t.typed,n=t.config,r=t.Complex,a=t.BigNumber,s=e(Uq,{number:function(u){return u>=1||u<=-1||n.predictable?X$(u):new r(u,0).acoth()},Complex:function(u){return u.acoth()},BigNumber:function(u){return new a(1).div(u).atanh()},"Array | Matrix":function(u){return wt(u,s)}});return s}),Fq="acsc",jhe=["typed","config","Complex","BigNumber"],eA=ye(Fq,jhe,function(t){var e=t.typed,n=t.config,r=t.Complex,a=t.BigNumber,s=e(Fq,{number:function(u){return u<=-1||u>=1||n.predictable?Y$(u):new r(u,0).acsc()},Complex:function(u){return u.acsc()},BigNumber:function(u){return new a(1).div(u).asin()},"Array | Matrix":function(u){return wt(u,s)}});return s}),Bq="acsch",Xhe=["typed","BigNumber"],tA=ye(Bq,Xhe,function(t){var e=t.typed,n=t.BigNumber,r=e(Bq,{number:Q$,Complex:function(s){return s.acsch()},BigNumber:function(s){return new n(1).div(s).asinh()},"Array | Matrix":function(s){return wt(s,r)}});return r}),zq="asec",Yhe=["typed","config","Complex","BigNumber"],nA=ye(zq,Yhe,function(t){var e=t.typed,n=t.config,r=t.Complex,a=t.BigNumber,s=e(zq,{number:function(u){return u<=-1||u>=1||n.predictable?Z$(u):new r(u,0).asec()},Complex:function(u){return u.asec()},BigNumber:function(u){return new a(1).div(u).acos()},"Array | Matrix":function(u){return wt(u,s)}});return s}),qq="asech",Qhe=["typed","config","Complex","BigNumber"],rA=ye(qq,Qhe,function(t){var e=t.typed,n=t.config,r=t.Complex,a=t.BigNumber,s=e(qq,{number:function(u){if(u<=1&&u>=-1||n.predictable){var l=1/u;if(l>0||n.predictable)return J$(u);var f=Math.sqrt(l*l-1);return new r(Math.log(f-l),Math.PI)}return new r(u,0).asech()},Complex:function(u){return u.asech()},BigNumber:function(u){return new a(1).div(u).acosh()},"Array | Matrix":function(u){return wt(u,s)}});return s}),Gq="asin",Zhe=["typed","config","Complex"],iA=ye(Gq,Zhe,function(t){var e=t.typed,n=t.config,r=t.Complex,a=e(Gq,{number:function(o){return o>=-1&&o<=1||n.predictable?Math.asin(o):new r(o,0).asin()},Complex:function(o){return o.asin()},BigNumber:function(o){return o.asin()},"Array | Matrix":function(o){return wt(o,a)}});return a}),Jhe="asinh",Khe=["typed"],aA=ye(Jhe,Khe,function(t){var e=t.typed,n=e("asinh",{number:K$,Complex:function(a){return a.asinh()},BigNumber:function(a){return a.asinh()},"Array | Matrix":function(a){return wt(a,n)}});return n}),e0e="atan",t0e=["typed"],sA=ye(e0e,t0e,function(t){var e=t.typed,n=e("atan",{number:function(a){return Math.atan(a)},Complex:function(a){return a.atan()},BigNumber:function(a){return a.atan()},"Array | Matrix":function(a){return wt(a,n)}});return n}),Hq="atan2",n0e=["typed","matrix","equalScalar","BigNumber","DenseMatrix"],oA=ye(Hq,n0e,function(t){var e=t.typed,n=t.matrix,r=t.equalScalar,a=t.BigNumber,s=t.DenseMatrix,o=Du({typed:e,equalScalar:r}),u=ds({typed:e}),l=pj({typed:e,equalScalar:r}),f=ps({typed:e,equalScalar:r}),c=hs({typed:e,DenseMatrix:s}),p=pr({typed:e}),d=Jn({typed:e}),h=e(Hq,{"number, number":Math.atan2,"BigNumber, BigNumber":function(v,g){return a.atan2(v,g)},"SparseMatrix, SparseMatrix":function(v,g){return l(v,g,h,!1)},"SparseMatrix, DenseMatrix":function(v,g){return o(g,v,h,!0)},"DenseMatrix, SparseMatrix":function(v,g){return u(v,g,h,!1)},"DenseMatrix, DenseMatrix":function(v,g){return p(v,g,h)},"Array, Array":function(v,g){return h(n(v),n(g)).valueOf()},"Array, Matrix":function(v,g){return h(n(v),g)},"Matrix, Array":function(v,g){return h(v,n(g))},"SparseMatrix, number | BigNumber":function(v,g){return f(v,g,h,!1)},"DenseMatrix, number | BigNumber":function(v,g){return d(v,g,h,!1)},"number | BigNumber, SparseMatrix":function(v,g){return c(g,v,h,!0)},"number | BigNumber, DenseMatrix":function(v,g){return d(g,v,h,!0)},"Array, number | BigNumber":function(v,g){return d(n(v),g,h,!1).valueOf()},"number | BigNumber, Array":function(v,g){return d(n(g),v,h,!0).valueOf()}});return h}),Vq="atanh",r0e=["typed","config","Complex"],uA=ye(Vq,r0e,function(t){var e=t.typed,n=t.config,r=t.Complex,a=e(Vq,{number:function(o){return o<=1&&o>=-1||n.predictable?ej(o):new r(o,0).atanh()},Complex:function(o){return o.atanh()},BigNumber:function(o){return o.atanh()},"Array | Matrix":function(o){return wt(o,a)}});return a}),Wq="cos",i0e=["typed"],lA=ye(Wq,i0e,function(t){var e=t.typed,n=e(Wq,{number:Math.cos,Complex:function(a){return a.cos()},BigNumber:function(a){return a.cos()},Unit:function(a){if(!a.hasBase(a.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return n(a.value)},"Array | Matrix":function(a){return wt(a,n)}});return n}),$q="cosh",a0e=["typed"],cA=ye($q,a0e,function(t){var e=t.typed,n=e($q,{number:Nle,Complex:function(a){return a.cosh()},BigNumber:function(a){return a.cosh()},Unit:function(a){if(!a.hasBase(a.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return n(a.value)},"Array | Matrix":function(a){return wt(a,n)}});return n}),jq="cot",s0e=["typed","BigNumber"],fA=ye(jq,s0e,function(t){var e=t.typed,n=t.BigNumber,r=e(jq,{number:tj,Complex:function(s){return s.cot()},BigNumber:function(s){return new n(1).div(s.tan())},Unit:function(s){if(!s.hasBase(s.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return r(s.value)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Xq="coth",o0e=["typed","BigNumber"],pA=ye(Xq,o0e,function(t){var e=t.typed,n=t.BigNumber,r=e(Xq,{number:nj,Complex:function(s){return s.coth()},BigNumber:function(s){return new n(1).div(s.tanh())},Unit:function(s){if(!s.hasBase(s.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return r(s.value)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Yq="csc",u0e=["typed","BigNumber"],dA=ye(Yq,u0e,function(t){var e=t.typed,n=t.BigNumber,r=e(Yq,{number:rj,Complex:function(s){return s.csc()},BigNumber:function(s){return new n(1).div(s.sin())},Unit:function(s){if(!s.hasBase(s.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return r(s.value)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Qq="csch",l0e=["typed","BigNumber"],hA=ye(Qq,l0e,function(t){var e=t.typed,n=t.BigNumber,r=e(Qq,{number:ij,Complex:function(s){return s.csch()},BigNumber:function(s){return new n(1).div(s.sinh())},Unit:function(s){if(!s.hasBase(s.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return r(s.value)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Zq="sec",c0e=["typed","BigNumber"],mA=ye(Zq,c0e,function(t){var e=t.typed,n=t.BigNumber,r=e(Zq,{number:aj,Complex:function(s){return s.sec()},BigNumber:function(s){return new n(1).div(s.cos())},Unit:function(s){if(!s.hasBase(s.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return r(s.value)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Jq="sech",f0e=["typed","BigNumber"],vA=ye(Jq,f0e,function(t){var e=t.typed,n=t.BigNumber,r=e(Jq,{number:sj,Complex:function(s){return s.sech()},BigNumber:function(s){return new n(1).div(s.cosh())},Unit:function(s){if(!s.hasBase(s.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return r(s.value)},"Array | Matrix":function(s){return wt(s,r)}});return r}),Kq="sin",p0e=["typed"],gA=ye(Kq,p0e,function(t){var e=t.typed,n=e(Kq,{number:Math.sin,Complex:function(a){return a.sin()},BigNumber:function(a){return a.sin()},Unit:function(a){if(!a.hasBase(a.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return n(a.value)},"Array | Matrix":function(a){return wt(a,n)}});return n}),e8="sinh",d0e=["typed"],yA=ye(e8,d0e,function(t){var e=t.typed,n=e(e8,{number:oj,Complex:function(a){return a.sinh()},BigNumber:function(a){return a.sinh()},Unit:function(a){if(!a.hasBase(a.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return n(a.value)},"Array | Matrix":function(a){return wt(a,n)}});return n}),t8="tan",h0e=["typed"],xA=ye(t8,h0e,function(t){var e=t.typed,n=e(t8,{number:Math.tan,Complex:function(a){return a.tan()},BigNumber:function(a){return a.tan()},Unit:function(a){if(!a.hasBase(a.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return n(a.value)},"Array | Matrix":function(a){return wt(a,n)}});return n}),m0e="tanh",v0e=["typed"],bA=ye(m0e,v0e,function(t){var e=t.typed,n=e("tanh",{number:Dle,Complex:function(a){return a.tanh()},BigNumber:function(a){return a.tanh()},Unit:function(a){if(!a.hasBase(a.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return n(a.value)},"Array | Matrix":function(a){return wt(a,n)}});return n}),n8="setCartesian",g0e=["typed","size","subset","compareNatural","Index","DenseMatrix"],SA=ye(n8,g0e,function(t){var e=t.typed,n=t.size,r=t.subset,a=t.compareNatural,s=t.Index,o=t.DenseMatrix;return e(n8,{"Array | Matrix, Array | Matrix":function(l,f){var c=[];if(r(n(l),new s(0))!==0&&r(n(f),new s(0))!==0){var p=kn(Array.isArray(l)?l:l.toArray()).sort(a),d=kn(Array.isArray(f)?f:f.toArray()).sort(a);c=[];for(var h=0;h<p.length;h++)for(var m=0;m<d.length;m++)c.push([p[h],d[m]])}return Array.isArray(l)&&Array.isArray(f)?c:new o(c)}})}),r8="setDifference",y0e=["typed","size","subset","compareNatural","Index","DenseMatrix"],wA=ye(r8,y0e,function(t){var e=t.typed,n=t.size,r=t.subset,a=t.compareNatural,s=t.Index,o=t.DenseMatrix;return e(r8,{"Array | Matrix, Array | Matrix":function(l,f){var c;if(r(n(l),new s(0))===0)c=[];else{if(r(n(f),new s(0))===0)return kn(l.toArray());var p=Em(kn(Array.isArray(l)?l:l.toArray()).sort(a)),d=Em(kn(Array.isArray(f)?f:f.toArray()).sort(a));c=[];for(var h,m=0;m<p.length;m++){h=!1;for(var v=0;v<d.length;v++)if(a(p[m].value,d[v].value)===0&&p[m].identifier===d[v].identifier){h=!0;break}h||c.push(p[m])}}return Array.isArray(l)&&Array.isArray(f)?iw(c):new o(iw(c))}})}),i8="setDistinct",x0e=["typed","size","subset","compareNatural","Index","DenseMatrix"],_A=ye(i8,x0e,function(t){var e=t.typed,n=t.size,r=t.subset,a=t.compareNatural,s=t.Index,o=t.DenseMatrix;return e(i8,{"Array | Matrix":function(l){var f;if(r(n(l),new s(0))===0)f=[];else{var c=kn(Array.isArray(l)?l:l.toArray()).sort(a);f=[],f.push(c[0]);for(var p=1;p<c.length;p++)a(c[p],c[p-1])!==0&&f.push(c[p])}return Array.isArray(l)?f:new o(f)}})}),a8="setIntersect",b0e=["typed","size","subset","compareNatural","Index","DenseMatrix"],MA=ye(a8,b0e,function(t){var e=t.typed,n=t.size,r=t.subset,a=t.compareNatural,s=t.Index,o=t.DenseMatrix;return e(a8,{"Array | Matrix, Array | Matrix":function(l,f){var c;if(r(n(l),new s(0))===0||r(n(f),new s(0))===0)c=[];else{var p=Em(kn(Array.isArray(l)?l:l.toArray()).sort(a)),d=Em(kn(Array.isArray(f)?f:f.toArray()).sort(a));c=[];for(var h=0;h<p.length;h++)for(var m=0;m<d.length;m++)if(a(p[h].value,d[m].value)===0&&p[h].identifier===d[m].identifier){c.push(p[h]);break}}return Array.isArray(l)&&Array.isArray(f)?iw(c):new o(iw(c))}})}),s8="setIsSubset",S0e=["typed","size","subset","compareNatural","Index"],EA=ye(s8,S0e,function(t){var e=t.typed,n=t.size,r=t.subset,a=t.compareNatural,s=t.Index;return e(s8,{"Array | Matrix, Array | Matrix":function(u,l){if(r(n(u),new s(0))===0)return!0;if(r(n(l),new s(0))===0)return!1;for(var f=Em(kn(Array.isArray(u)?u:u.toArray()).sort(a)),c=Em(kn(Array.isArray(l)?l:l.toArray()).sort(a)),p,d=0;d<f.length;d++){p=!1;for(var h=0;h<c.length;h++)if(a(f[d].value,c[h].value)===0&&f[d].identifier===c[h].identifier){p=!0;break}if(p===!1)return!1}return!0}})}),o8="setMultiplicity",w0e=["typed","size","subset","compareNatural","Index"],TA=ye(o8,w0e,function(t){var e=t.typed,n=t.size,r=t.subset,a=t.compareNatural,s=t.Index;return e(o8,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(u,l){if(r(n(l),new s(0))===0)return 0;for(var f=kn(Array.isArray(l)?l:l.toArray()),c=0,p=0;p<f.length;p++)a(f[p],u)===0&&c++;return c}})}),u8="setPowerset",_0e=["typed","size","subset","compareNatural","Index"],AA=ye(u8,_0e,function(t){var e=t.typed,n=t.size,r=t.subset,a=t.compareNatural,s=t.Index;return e(u8,{"Array | Matrix":function(f){if(r(n(f),new s(0))===0)return[];for(var c=kn(Array.isArray(f)?f:f.toArray()).sort(a),p=[],d=0;d.toString(2).length<=c.length;)p.push(o(c,d.toString(2).split("").reverse())),d++;return u(p)}});function o(l,f){for(var c=[],p=0;p<f.length;p++)f[p]==="1"&&c.push(l[p]);return c}function u(l){for(var f=[],c=l.length-1;c>0;c--)for(var p=0;p<c;p++)l[p].length>l[p+1].length&&(f=l[p],l[p]=l[p+1],l[p+1]=f);return l}}),l8="setSize",M0e=["typed","compareNatural"],NA=ye(l8,M0e,function(t){var e=t.typed,n=t.compareNatural;return e(l8,{"Array | Matrix":function(a){return Array.isArray(a)?kn(a).length:kn(a.toArray()).length},"Array | Matrix, boolean":function(a,s){if(s===!1||a.length===0)return Array.isArray(a)?kn(a).length:kn(a.toArray()).length;for(var o=kn(Array.isArray(a)?a:a.toArray()).sort(n),u=1,l=1;l<o.length;l++)n(o[l],o[l-1])!==0&&u++;return u}})}),c8="setSymDifference",E0e=["typed","size","concat","subset","setDifference","Index"],CA=ye(c8,E0e,function(t){var e=t.typed,n=t.size,r=t.concat,a=t.subset,s=t.setDifference,o=t.Index;return e(c8,{"Array | Matrix, Array | Matrix":function(l,f){if(a(n(l),new o(0))===0)return kn(f);if(a(n(f),new o(0))===0)return kn(l);var c=kn(l),p=kn(f);return r(s(c,p),s(p,c))}})}),f8="setUnion",T0e=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],DA=ye(f8,T0e,function(t){var e=t.typed,n=t.size,r=t.concat,a=t.subset,s=t.setIntersect,o=t.setSymDifference,u=t.Index;return e(f8,{"Array | Matrix, Array | Matrix":function(f,c){if(a(n(f),new u(0))===0)return kn(c);if(a(n(c),new u(0))===0)return kn(f);var p=kn(f),d=kn(c);return r(o(p,d),s(p,d))}})}),p8="add",A0e=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],RA=ye(p8,A0e,function(t){var e=t.typed,n=t.matrix,r=t.addScalar,a=t.equalScalar,s=t.DenseMatrix;t.SparseMatrix;var o=Sp({typed:e}),u=iU({typed:e,equalScalar:a}),l=gh({typed:e,DenseMatrix:s}),f=pr({typed:e}),c=Jn({typed:e}),p=e(p8,xM({"DenseMatrix, DenseMatrix":function(h,m){return f(h,m,r)},"DenseMatrix, SparseMatrix":function(h,m){return o(h,m,r,!1)},"SparseMatrix, DenseMatrix":function(h,m){return o(m,h,r,!0)},"SparseMatrix, SparseMatrix":function(h,m){return u(h,m,r)},"Array, Array":function(h,m){return p(n(h),n(m)).valueOf()},"Array, Matrix":function(h,m){return p(n(h),m)},"Matrix, Array":function(h,m){return p(h,n(m))},"DenseMatrix, any":function(h,m){return c(h,m,r,!1)},"SparseMatrix, any":function(h,m){return l(h,m,r,!1)},"any, DenseMatrix":function(h,m){return c(m,h,r,!0)},"any, SparseMatrix":function(h,m){return l(m,h,r,!0)},"Array, any":function(h,m){return c(n(h),m,r,!1).valueOf()},"any, Array":function(h,m){return c(n(m),h,r,!0).valueOf()},"any, any":r,"any, any, ...any":function(h,m,v){for(var g=p(h,m),y=0;y<v.length;y++)g=p(g,v[y]);return g}},r.signatures));return p}),d8="hypot",N0e=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],IA=ye(d8,N0e,function(t){var e=t.typed,n=t.abs,r=t.addScalar,a=t.divideScalar,s=t.multiplyScalar,o=t.sqrt,u=t.smaller,l=t.isPositive,f=e(d8,{"... number | BigNumber":c,Array:function(d){return f.apply(f,kn(d))},Matrix:function(d){return f.apply(f,kn(d.toArray()))}});function c(p){for(var d=0,h=0,m=0;m<p.length;m++){var v=n(p[m]);u(h,v)?(d=s(d,s(a(h,v),a(h,v))),d=r(d,1),h=v):d=r(d,l(v)?s(a(v,h),a(v,h)):v)}return s(h,o(d))}return f}),h8="norm",C0e=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix"],PA=ye(h8,C0e,function(t){var e=t.typed,n=t.abs,r=t.add,a=t.pow,s=t.conj,o=t.sqrt,u=t.multiply,l=t.equalScalar,f=t.larger,c=t.smaller,p=t.matrix,d=e(h8,{number:Math.abs,Complex:function(v){return v.abs()},BigNumber:function(v){return v.abs()},boolean:function(v){return Math.abs(v)},Array:function(v){return h(p(v),2)},Matrix:function(v){return h(v,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(v){return d(v)},"Array, number | BigNumber | string":function(v,g){return h(p(v),g)},"Matrix, number | BigNumber | string":function(v,g){return h(v,g)}});function h(m,v){var g=m.size();if(g.length===1){if(v===Number.POSITIVE_INFINITY||v==="inf"){var y=0;return m.forEach(function(C){var T=n(C);f(T,y)&&(y=T)},!0),y}if(v===Number.NEGATIVE_INFINITY||v==="-inf"){var _;return m.forEach(function(C){var T=n(C);(!_||c(T,_))&&(_=T)},!0),_||0}if(v==="fro")return h(m,2);if(typeof v=="number"&&!isNaN(v)){if(!l(v,0)){var x=0;return m.forEach(function(C){x=r(a(n(C),v),x)},!0),a(x,1/v)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}if(g.length===2){if(v===1){var M=[],A=0;return m.forEach(function(C,T){var P=T[1],I=r(M[P]||0,n(C));f(I,A)&&(A=I),M[P]=I},!0),A}if(v===Number.POSITIVE_INFINITY||v==="inf"){var E=[],N=0;return m.forEach(function(C,T){var P=T[0],I=r(E[P]||0,n(C));f(I,N)&&(N=I),E[P]=I},!0),N}if(v==="fro"){var D=0;return m.forEach(function(C,T){D=r(D,u(C,s(C)))}),n(o(D))}throw v===2?new Error("Unsupported parameter value, missing implementation of matrix singular value decomposition"):new Error("Unsupported parameter value")}}return d}),m8="dot",D0e=["typed","add","multiply"],OA=ye(m8,D0e,function(t){var e=t.typed,n=t.add,r=t.multiply;return e(m8,{"Matrix, Matrix":function(o,u){return a(o.toArray(),u.toArray())},"Matrix, Array":function(o,u){return a(o.toArray(),u)},"Array, Matrix":function(o,u){return a(o,u.toArray())},"Array, Array":a});function a(s,o){var u=yn(s),l=yn(o),f=u[0];if(u.length!==1||l.length!==1)throw new RangeError("Vector expected");if(u[0]!==l[0])throw new RangeError("Vectors must have equal length ("+u[0]+" != "+l[0]+")");if(f===0)throw new RangeError("Cannot calculate the dot product of empty vectors");for(var c=0,p=0;p<f;p++)c=n(c,r(s[p],o[p]));return c}}),R0e="trace",I0e=["typed","matrix","add"],LA=ye(R0e,I0e,function(t){var e=t.typed,n=t.matrix,r=t.add;return e("trace",{Array:function(u){return a(n(u))},SparseMatrix:s,DenseMatrix:a,any:Ut});function a(o){var u=o._size,l=o._data;switch(u.length){case 1:if(u[0]===1)return Ut(l[0]);throw new RangeError("Matrix must be square (size: "+mn(u)+")");case 2:{var f=u[0],c=u[1];if(f===c){for(var p=0,d=0;d<f;d++)p=r(p,l[d][d]);return p}else throw new RangeError("Matrix must be square (size: "+mn(u)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+mn(u)+")")}}function s(o){var u=o._values,l=o._index,f=o._ptr,c=o._size,p=c[0],d=c[1];if(p===d){var h=0;if(u.length>0)for(var m=0;m<d;m++)for(var v=f[m],g=f[m+1],y=v;y<g;y++){var _=l[y];if(_===m){h=r(h,u[y]);break}if(_>m)break}return h}throw new RangeError("Matrix must be square (size: "+mn(c)+")")}}),v8="index",P0e=["typed","Index"],kA=ye(v8,P0e,function(t){var e=t.typed,n=t.Index;return e(v8,{"...number | string | BigNumber | Range | Array | Matrix":function(a){var s=a.map(function(u){return Jt(u)?u.toNumber():Array.isArray(u)||Dn(u)?u.map(function(l){return Jt(l)?l.toNumber():l}):u}),o=new n;return n.apply(o,s),o}})}),vj={end:!0};function Jl(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jl=function(n){return typeof n}:Jl=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jl(t)}var O0e="Node",L0e=["mathWithTransform"],UA=ye(O0e,L0e,function(t){var e=t.mathWithTransform;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}n.prototype.evaluate=function(a){return this.compile().evaluate(a)},n.prototype.eval=function(a){return xc("Method Node.eval is renamed to Node.evaluate. Please use the new method name."),this.evaluate(a)},n.prototype.type="Node",n.prototype.isNode=!0,n.prototype.comment="",n.prototype.compile=function(){var a=this._compile(e,{}),s={},o=null;function u(l){var f=l||{};return r(f),a(f,s,o)}return{evaluate:u,eval:function(f){return xc("Method eval is renamed to evaluate. Please use the new method."),u(f)}}},n.prototype._compile=function(a,s){throw new Error("Method _compile should be implemented by type "+this.type)},n.prototype.forEach=function(a){throw new Error("Cannot run forEach on a Node interface")},n.prototype.map=function(a){throw new Error("Cannot run map on a Node interface")},n.prototype._ifNode=function(a){if(!Cn(a))throw new TypeError("Callback function must return a Node");return a},n.prototype.traverse=function(a){a(this,null,null);function s(o,u){o.forEach(function(l,f,c){u(l,f,c),s(l,u)})}s(this,a)},n.prototype.transform=function(a){function s(o,u,l){var f=a(o,u,l);return f!==o?f:o.map(s)}return s(this,null,null)},n.prototype.filter=function(a){var s=[];return this.traverse(function(o,u,l){a(o,u,l)&&s.push(o)}),s},n.prototype.find=function(){throw new Error("Function Node.find is deprecated. Use Node.filter instead.")},n.prototype.match=function(){throw new Error("Function Node.match is deprecated. See functions Node.filter, Node.transform, Node.traverse.")},n.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},n.prototype.cloneDeep=function(){return this.map(function(a){return a.cloneDeep()})},n.prototype.equals=function(a){return a?fm(this,a):!1},n.prototype.toString=function(a){var s;if(a&&Jl(a)==="object")switch(Jl(a.handler)){case"object":case"undefined":break;case"function":s=a.handler(this,a);break;default:throw new TypeError("Object or function expected as callback")}return typeof s<"u"?s:this._toString(a)},n.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)},n.prototype.toHTML=function(a){var s;if(a&&Jl(a)==="object")switch(Jl(a.handler)){case"object":case"undefined":break;case"function":s=a.handler(this,a);break;default:throw new TypeError("Object or function expected as callback")}return typeof s<"u"?s:this.toHTML(a)},n.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},n.prototype.toTex=function(a){var s;if(a&&Jl(a)==="object")switch(Jl(a.handler)){case"object":case"undefined":break;case"function":s=a.handler(this,a);break;default:throw new TypeError("Object or function expected as callback")}return typeof s<"u"?s:this._toTex(a)},n.prototype._toTex=function(a){throw new Error("_toTex not implemented for "+this.type)},n.prototype.getIdentifier=function(){return this.type},n.prototype.getContent=function(){return this};function r(a){for(var s in a)if(Et(a,s)&&s in vj)throw new Error('Scope contains an illegal symbol, "'+s+'" is a reserved keyword')}return n},{isClass:!0,isNode:!0});function mo(t){return t&&t.isIndexError?new po(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function h2(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h2=function(n){return typeof n}:h2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},h2(t)}function gj(t){var e=t.subset;return function(r,a){try{if(Array.isArray(r))return e(r,a);if(r&&typeof r.subset=="function")return r.subset(a);if(typeof r=="string")return e(r,a);if(h2(r)==="object"){if(!a.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return sa(r,a.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw mo(s)}}}var k0e="AccessorNode",U0e=["subset","Node"],FA=ye(k0e,U0e,function(t){var e=t.subset,n=t.Node,r=gj({subset:e});function a(o,u){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(!Cn(o))throw new TypeError('Node expected for parameter "object"');if(!vh(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=o||null,this.index=u,Object.defineProperty(this,"name",{get:(function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}).bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}a.prototype=new n,a.prototype.type="AccessorNode",a.prototype.isAccessorNode=!0,a.prototype._compile=function(o,u){var l=this.object._compile(o,u),f=this.index._compile(o,u);if(this.index.isObjectProperty()){var c=this.index.getObjectProperty();return function(d,h,m){return sa(l(d,h,m),c)}}else return function(d,h,m){var v=l(d,h,m),g=f(d,h,v);return r(v,g)}},a.prototype.forEach=function(o){o(this.object,"object",this),o(this.index,"index",this)},a.prototype.map=function(o){return new a(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)))},a.prototype.clone=function(){return new a(this.object,this.index)},a.prototype._toString=function(o){var u=this.object.toString(o);return s(this.object)&&(u="("+u+")"),u+this.index.toString(o)},a.prototype.toHTML=function(o){var u=this.object.toHTML(o);return s(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(o)},a.prototype._toTex=function(o){var u=this.object.toTex(o);return s(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(o)},a.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index}},a.fromJSON=function(o){return new a(o.object,o.index)};function s(o){return!(gc(o)||N1(o)||tr(o)||yp(o)||C1(o)||sl(o)||ri(o))}return a},{isClass:!0,isNode:!0}),F0e="ArrayNode",B0e=["Node"],BA=ye(F0e,B0e,function(t){var e=t.Node;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=r||[],!Array.isArray(this.items)||!this.items.every(Cn))throw new TypeError("Array containing Nodes expected");var a=function(){throw new Error("Property `ArrayNode.nodes` is deprecated, use `ArrayNode.items` instead")};Object.defineProperty(this,"nodes",{get:a,set:a})}return n.prototype=new e,n.prototype.type="ArrayNode",n.prototype.isArrayNode=!0,n.prototype._compile=function(r,a){var s=Js(this.items,function(l){return l._compile(r,a)}),o=r.config.matrix!=="Array";if(o){var u=r.matrix;return function(f,c,p){return u(Js(s,function(d){return d(f,c,p)}))}}else return function(f,c,p){return Js(s,function(d){return d(f,c,p)})}},n.prototype.forEach=function(r){for(var a=0;a<this.items.length;a++){var s=this.items[a];r(s,"items["+a+"]",this)}},n.prototype.map=function(r){for(var a=[],s=0;s<this.items.length;s++)a[s]=this._ifNode(r(this.items[s],"items["+s+"]",this));return new n(a)},n.prototype.clone=function(){return new n(this.items.slice(0))},n.prototype._toString=function(r){var a=this.items.map(function(s){return s.toString(r)});return"["+a.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items}},n.fromJSON=function(r){return new n(r.items)},n.prototype.toHTML=function(r){var a=this.items.map(function(s){return s.toHTML(r)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},n.prototype._toTex=function(r){var a="\\begin{bmatrix}";return this.items.forEach(function(s){s.items?a+=s.items.map(function(o){return o.toTex(r)}).join("&"):a+=s.toTex(r),a+="\\\\"}),a+="\\end{bmatrix}",a},n},{isClass:!0,isNode:!0});function m2(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?m2=function(n){return typeof n}:m2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},m2(t)}function z0e(t){var e=t.subset,n=t.matrix;return function(a,s,o){try{if(Array.isArray(a))return n(a).subset(s,o).valueOf();if(a&&typeof a.subset=="function")return a.subset(s,o);if(typeof a=="string")return e(a,s,o);if(m2(a)==="object"){if(!s.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Bf(a,s.getObjectProperty(),o),a}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(u){throw mo(u)}}}var Zu=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function nr(t,e){var n=t;e!=="keep"&&(n=t.getContent());for(var r=n.getIdentifier(),a=0;a<Zu.length;a++)if(r in Zu[a])return a;return null}function ng(t,e){var n=t;e!=="keep"&&(n=t.getContent());var r=n.getIdentifier(),a=nr(n,e);if(a===null)return null;var s=Zu[a][r];if(Et(s,"associativity")){if(s.associativity==="left")return"left";if(s.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+s.associativity+"'.")}return null}function SI(t,e,n){var r=n!=="keep"?t.getContent():t,a=n!=="keep"?t.getContent():e,s=r.getIdentifier(),o=a.getIdentifier(),u=nr(r,n);if(u===null)return null;var l=Zu[u][s];if(Et(l,"associativeWith")&&l.associativeWith instanceof Array){for(var f=0;f<l.associativeWith.length;f++)if(l.associativeWith[f]===o)return!0;return!1}return null}var q0e="AssignmentNode",G0e=["subset","?matrix","Node"],zA=ye(q0e,G0e,function(t){var e=t.subset,n=t.matrix,r=t.Node,a=gj({subset:e}),s=z0e({subset:e,matrix:n});function o(l,f,c){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=l,this.index=c?f:null,this.value=c||f,!ri(l)&&!gc(l))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(ri(l)&&l.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!vh(this.index))throw new TypeError('IndexNode expected as "index"');if(!Cn(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:(function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}).bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}o.prototype=new r,o.prototype.type="AssignmentNode",o.prototype.isAssignmentNode=!0,o.prototype._compile=function(l,f){var c=this.object._compile(l,f),p=this.index?this.index._compile(l,f):null,d=this.value._compile(l,f),h=this.object.name;if(this.index)if(this.index.isObjectProperty()){var m=this.index.getObjectProperty();return function(x,M,A){var E=c(x,M,A),N=d(x,M,A);return Bf(E,m,N)}}else{if(ri(this.object))return function(x,M,A){var E=c(x,M,A),N=d(x,M,A),D=p(x,M,E);return Bf(x,h,s(E,D,N)),N};var v=this.object.object._compile(l,f);if(this.object.index.isObjectProperty()){var g=this.object.index.getObjectProperty();return function(x,M,A){var E=v(x,M,A),N=sa(E,g),D=p(x,M,N),C=d(x,M,A);return Bf(E,g,s(N,D,C)),C}}else{var y=this.object.index._compile(l,f);return function(x,M,A){var E=v(x,M,A),N=y(x,M,E),D=a(E,N),C=p(x,M,D),T=d(x,M,A);return s(E,N,s(D,C,T)),T}}}else{if(!ri(this.object))throw new TypeError("SymbolNode expected as object");return function(x,M,A){return Bf(x,h,d(x,M,A))}}},o.prototype.forEach=function(l){l(this.object,"object",this),this.index&&l(this.index,"index",this),l(this.value,"value",this)},o.prototype.map=function(l){var f=this._ifNode(l(this.object,"object",this)),c=this.index?this._ifNode(l(this.index,"index",this)):null,p=this._ifNode(l(this.value,"value",this));return new o(f,c,p)},o.prototype.clone=function(){return new o(this.object,this.index,this.value)};function u(l,f){f||(f="keep");var c=nr(l,f),p=nr(l.value,f);return f==="all"||p!==null&&p<=c}return o.prototype._toString=function(l){var f=this.object.toString(l),c=this.index?this.index.toString(l):"",p=this.value.toString(l);return u(this,l&&l.parenthesis)&&(p="("+p+")"),f+c+" = "+p},o.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value}},o.fromJSON=function(l){return new o(l.object,l.index,l.value)},o.prototype.toHTML=function(l){var f=this.object.toHTML(l),c=this.index?this.index.toHTML(l):"",p=this.value.toHTML(l);return u(this,l&&l.parenthesis)&&(p='<span class="math-paranthesis math-round-parenthesis">(</span>'+p+'<span class="math-paranthesis math-round-parenthesis">)</span>'),f+c+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+p},o.prototype._toTex=function(l){var f=this.object.toTex(l),c=this.index?this.index.toTex(l):"",p=this.value.toTex(l);return u(this,l&&l.parenthesis)&&(p="\\left(".concat(p,"\\right)")),f+c+":="+p},o},{isClass:!0,isNode:!0}),H0e="BlockNode",V0e=["ResultSet","Node"],qA=ye(H0e,V0e,function(t){var e=t.ResultSet,n=t.Node;function r(a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(s){var o=s&&s.node,u=s&&s.visible!==void 0?s.visible:!0;if(!Cn(o))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:u}})}return r.prototype=new n,r.prototype.type="BlockNode",r.prototype.isBlockNode=!0,r.prototype._compile=function(a,s){var o=Js(this.blocks,function(u){return{evaluate:u.node._compile(a,s),visible:u.visible}});return function(l,f,c){var p=[];return wM(o,function(h){var m=h.evaluate(l,f,c);h.visible&&p.push(m)}),new e(p)}},r.prototype.forEach=function(a){for(var s=0;s<this.blocks.length;s++)a(this.blocks[s].node,"blocks["+s+"].node",this)},r.prototype.map=function(a){for(var s=[],o=0;o<this.blocks.length;o++){var u=this.blocks[o],l=this._ifNode(a(u.node,"blocks["+o+"].node",this));s[o]={node:l,visible:u.visible}}return new r(s)},r.prototype.clone=function(){var a=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new r(a)},r.prototype._toString=function(a){return this.blocks.map(function(s){return s.node.toString(a)+(s.visible?"":";")}).join(`
`)},r.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks}},r.fromJSON=function(a){return new r(a.blocks)},r.prototype.toHTML=function(a){return this.blocks.map(function(s){return s.node.toHTML(a)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')},r.prototype._toTex=function(a){return this.blocks.map(function(s){return s.node.toTex(a)+(s.visible?"":";")}).join(`\\;\\;
`)},r},{isClass:!0,isNode:!0}),W0e="ConditionalNode",$0e=["Node"],GA=ye(W0e,$0e,function(t){var e=t.Node;function n(a,s,o){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Cn(a))throw new TypeError("Parameter condition must be a Node");if(!Cn(s))throw new TypeError("Parameter trueExpr must be a Node");if(!Cn(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=s,this.falseExpr=o}n.prototype=new e,n.prototype.type="ConditionalNode",n.prototype.isConditionalNode=!0,n.prototype._compile=function(a,s){var o=this.condition._compile(a,s),u=this.trueExpr._compile(a,s),l=this.falseExpr._compile(a,s);return function(c,p,d){return r(o(c,p,d))?u(c,p,d):l(c,p,d)}},n.prototype.forEach=function(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)},n.prototype.map=function(a){return new n(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))},n.prototype.clone=function(){return new n(this.condition,this.trueExpr,this.falseExpr)},n.prototype._toString=function(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=nr(this,s),u=this.condition.toString(a),l=nr(this.condition,s);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u="("+u+")");var f=this.trueExpr.toString(a),c=nr(this.trueExpr,s);(s==="all"||this.trueExpr.type==="OperatorNode"||c!==null&&c<=o)&&(f="("+f+")");var p=this.falseExpr.toString(a),d=nr(this.falseExpr,s);return(s==="all"||this.falseExpr.type==="OperatorNode"||d!==null&&d<=o)&&(p="("+p+")"),u+" ? "+f+" : "+p},n.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}},n.fromJSON=function(a){return new n(a.condition,a.trueExpr,a.falseExpr)},n.prototype.toHTML=function(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=nr(this,s),u=this.condition.toHTML(a),l=nr(this.condition,s);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var f=this.trueExpr.toHTML(a),c=nr(this.trueExpr,s);(s==="all"||this.trueExpr.type==="OperatorNode"||c!==null&&c<=o)&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>');var p=this.falseExpr.toHTML(a),d=nr(this.falseExpr,s);return(s==="all"||this.falseExpr.type==="OperatorNode"||d!==null&&d<=o)&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+f+'<span class="math-operator math-conditional-operator">:</span>'+p},n.prototype._toTex=function(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"};function r(a){if(typeof a=="number"||typeof a=="boolean"||typeof a=="string")return!!a;if(a){if(Jt(a))return!a.isZero();if(qo(a))return!!(a.re||a.im);if(Uc(a))return!!a.value}if(a==null)return!1;throw new TypeError('Unsupported type of condition "'+ur(a)+'"')}return n},{isClass:!0,isNode:!0}),JO=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j0e={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},X0e={"–":"\\--","—":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},Y0e=function(e,n){return JO({},e,n)},Q0e=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.preserveFormatting,r=n===void 0?!1:n,a=e.escapeMapFn,s=a===void 0?Y0e:a,o=String(t),u="",l=s(JO({},j0e),r?JO({},X0e):{}),f=Object.keys(l),c=function(){var d=!1;f.forEach(function(h,m){d||o.length>=h.length&&o.slice(0,h.length)===h&&(u+=l[f[m]],o=o.slice(h.length,o.length),d=!0)}),d||(u+=o.slice(0,1),o=o.slice(1,o.length))};o;)c();return u};const Z0e=Au(Q0e);var KO={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Pn={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},g8={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Pn.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Pn.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Pn.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Pn.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Pn.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Pn.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Pn.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Pn.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Pn.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Pn.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Pn.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Pn.bitAnd,"${args[1]}\\right)")},bitNot:{1:Pn.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Pn.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Pn.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Pn.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Pn.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Pn.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Pn.and,"${args[1]}\\right)")},not:{1:Pn.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Pn.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Pn.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Pn.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},sqrtm:{1:"{${args[0]}}".concat(Pn.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Pn.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Pn.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Pn.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Pn.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Pn.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Pn.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Pn.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Pn.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Pn.to,"${args[1]}\\right)")},numeric:function(e,n){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(KO.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},J0e="\\mathrm{${name}}\\left(${args}\\right)",y8={deg:"^\\circ"};function eL(t){return Z0e(t,{preserveFormatting:!0})}function yj(t,e){return e=typeof e>"u"?!1:e,e?Et(y8,t)?y8[t]:"\\mathrm{"+eL(t)+"}":Et(KO,t)?KO[t]:eL(t)}var K0e="ConstantNode",eme=["Node"],HA=ye(K0e,eme,function(t){var e=t.Node;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(arguments.length===2)throw new SyntaxError("new ConstantNode(valueStr, valueType) is not supported anymore since math v4.0.0. Use new ConstantNode(value) instead, where value is a non-stringified value.");this.value=r}return n.prototype=new e,n.prototype.type="ConstantNode",n.prototype.isConstantNode=!0,n.prototype._compile=function(r,a){var s=this.value;return function(){return s}},n.prototype.forEach=function(r){},n.prototype.map=function(r){return this.clone()},n.prototype.clone=function(){return new n(this.value)},n.prototype._toString=function(r){return mn(this.value,r)},n.prototype.toHTML=function(r){var a=this._toString(r);switch(ur(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}},n.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value}},n.fromJSON=function(r){return new n(r.value)},n.prototype._toTex=function(r){var a=this._toString(r);switch(ur(this.value)){case"string":return"\\mathtt{"+eL(a)+"}";case"number":case"BigNumber":{if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var s=a.toLowerCase().indexOf("e");if(s!==-1)return a.substring(0,s)+"\\cdot10^{"+a.substring(s+1)+"}"}return a;case"Fraction":return this.value.toLatex();default:return a}},n},{isClass:!0,isNode:!0}),tme="FunctionAssignmentNode",nme=["typed","Node"],VA=ye(tme,nme,function(t){var e=t.typed,n=t.Node;function r(s,o,u){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Cn(u))throw new TypeError('Node expected for parameter "expr"');if(s in vj)throw new Error('Illegal function name, "'+s+'" is a reserved keyword');this.name=s,this.params=o.map(function(l){return l&&l.name||l}),this.types=o.map(function(l){return l&&l.type||"any"}),this.expr=u}r.prototype=new n,r.prototype.type="FunctionAssignmentNode",r.prototype.isFunctionAssignmentNode=!0,r.prototype._compile=function(s,o){var u=Object.create(o);wM(this.params,function(h){u[h]=!0});var l=this.expr._compile(s,u),f=this.name,c=this.params,p=Rz(this.types,","),d=f+"("+Rz(this.params,", ")+")";return function(m,v,g){var y={};y[p]=function(){for(var x=Object.create(v),M=0;M<c.length;M++)x[c[M]]=arguments[M];return l(m,x,g)};var _=e(f,y);return _.syntax=d,Bf(m,f,_),_}},r.prototype.forEach=function(s){s(this.expr,"expr",this)},r.prototype.map=function(s){var o=this._ifNode(s(this.expr,"expr",this));return new r(this.name,this.params.slice(0),o)},r.prototype.clone=function(){return new r(this.name,this.params.slice(0),this.expr)};function a(s,o){var u=nr(s,o),l=nr(s.expr,o);return o==="all"||l!==null&&l<=u}return r.prototype._toString=function(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toString(s);return a(this,o)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u},r.prototype.toJSON=function(){var s=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map(function(o,u){return{name:o,type:s[u]}}),expr:this.expr}},r.fromJSON=function(s){return new r(s.name,s.params,s.expr)},r.prototype.toHTML=function(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",u=[],l=0;l<this.params.length;l++)u.push('<span class="math-symbol math-parameter">'+Lo(this.params[l])+"</span>");var f=this.expr.toHTML(s);return a(this,o)&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+Lo(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+f},r.prototype._toTex=function(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toTex(s);return a(this,o)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(yj).join(",")+"\\right):="+u},r},{isClass:!0,isNode:!0});function rme(t){return ome(t)||sme(t)||ame(t)||ime()}function ime(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ame(t,e){if(t){if(typeof t=="string")return tL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tL(t,e)}}function sme(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ome(t){if(Array.isArray(t))return tL(t)}function tL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ume="IndexNode",lme=["Range","Node","size"],WA=ye(ume,lme,function(t){var e=t.Range,n=t.Node,r=t.size;function a(o,u){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=o,this.dotNotation=u||!1,!Array.isArray(o)||!o.every(Cn))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties");var l=function(){throw new Error("Property `IndexNode.object` is deprecated, use `IndexNode.fn` instead")};Object.defineProperty(this,"object",{get:l,set:l})}a.prototype=new n,a.prototype.type="IndexNode",a.prototype.isIndexNode=!0,a.prototype._compile=function(o,u){var l=Js(this.dimensions,function(c,p){if(D1(c))if(c.needsEnd()){var d=Object.create(u);d.end=!0;var h=c.start._compile(o,d),m=c.end._compile(o,d),v=c.step?c.step._compile(o,d):function(){return 1};return function(N,D,C){var T=r(C).valueOf(),P=Object.create(D);return P.end=T[p],s(h(N,P,C),m(N,P,C),v(N,P,C))}}else{var g=c.start._compile(o,u),y=c.end._compile(o,u),_=c.step?c.step._compile(o,u):function(){return 1};return function(N,D,C){return s(g(N,D,C),y(N,D,C),_(N,D,C))}}else if(ri(c)&&c.name==="end"){var x=Object.create(u);x.end=!0;var M=c._compile(o,x);return function(N,D,C){var T=r(C).valueOf(),P=Object.create(D);return P.end=T[p],M(N,P,C)}}else{var A=c._compile(o,u);return function(N,D,C){return A(N,D,C)}}}),f=sa(o,"index");return function(p,d,h){var m=Js(l,function(v){return v(p,d,h)});return f.apply(void 0,rme(m))}},a.prototype.forEach=function(o){for(var u=0;u<this.dimensions.length;u++)o(this.dimensions[u],"dimensions["+u+"]",this)},a.prototype.map=function(o){for(var u=[],l=0;l<this.dimensions.length;l++)u[l]=this._ifNode(o(this.dimensions[l],"dimensions["+l+"]",this));return new a(u,this.dotNotation)},a.prototype.clone=function(){return new a(this.dimensions.slice(0),this.dotNotation)},a.prototype.isObjectProperty=function(){return this.dimensions.length===1&&tr(this.dimensions[0])&&typeof this.dimensions[0].value=="string"},a.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},a.prototype._toString=function(o){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},a.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation}},a.fromJSON=function(o){return new a(o.dimensions,o.dotNotation)},a.prototype.toHTML=function(o){for(var u=[],l=0;l<this.dimensions.length;l++)u[l]=this.dimensions[l].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+Lo(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},a.prototype._toTex=function(o){var u=this.dimensions.map(function(l){return l.toTex(o)});return this.dotNotation?"."+this.getObjectProperty():"_{"+u.join(",")+"}"};function s(o,u,l){return new e(Jt(o)?o.toNumber():o,Jt(u)?u.toNumber():u,Jt(l)?l.toNumber():l)}return a},{isClass:!0,isNode:!0});function v2(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v2=function(n){return typeof n}:v2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},v2(t)}var cme="ObjectNode",fme=["Node"],$A=ye(cme,fme,function(t){var e=t.Node;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=r||{},r&&(v2(r)!=="object"||!Object.keys(r).every(function(a){return Cn(r[a])})))throw new TypeError("Object containing Nodes expected")}return n.prototype=new e,n.prototype.type="ObjectNode",n.prototype.isObjectNode=!0,n.prototype._compile=function(r,a){var s={};for(var o in this.properties)if(Et(this.properties,o)){var u=Wb(o),l=JSON.parse(u);if(!oU(this.properties,l))throw new Error('No access to property "'+l+'"');s[l]=this.properties[o]._compile(r,a)}return function(c,p,d){var h={};for(var m in s)Et(s,m)&&(h[m]=s[m](c,p,d));return h}},n.prototype.forEach=function(r){for(var a in this.properties)Et(this.properties,a)&&r(this.properties[a],"properties["+Wb(a)+"]",this)},n.prototype.map=function(r){var a={};for(var s in this.properties)Et(this.properties,s)&&(a[s]=this._ifNode(r(this.properties[s],"properties["+Wb(s)+"]",this)));return new n(a)},n.prototype.clone=function(){var r={};for(var a in this.properties)Et(this.properties,a)&&(r[a]=this.properties[a]);return new n(r)},n.prototype._toString=function(r){var a=[];for(var s in this.properties)Et(this.properties,s)&&a.push(Wb(s)+": "+this.properties[s].toString(r));return"{"+a.join(", ")+"}"},n.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties}},n.fromJSON=function(r){return new n(r.properties)},n.prototype.toHTML=function(r){var a=[];for(var s in this.properties)Et(this.properties,s)&&a.push('<span class="math-symbol math-property">'+Lo(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(r));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},n.prototype._toTex=function(r){var a=[];for(var s in this.properties)Et(this.properties,s)&&a.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(r)+"\\\\");return"\\left\\{\\begin{array}{ll}".concat(a.join(`
`),"\\end{array}\\right\\}")},n},{isClass:!0,isNode:!0}),pme="OperatorNode",dme=["Node"],jA=ye(pme,dme,function(t){var e=t.Node;function n(a,s,o,u){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(typeof a!="string")throw new TypeError('string expected for parameter "op"');if(typeof s!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(o)||!o.every(Cn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.op=a,this.fn=s,this.args=o||[]}n.prototype=new e,n.prototype.type="OperatorNode",n.prototype.isOperatorNode=!0,n.prototype._compile=function(a,s){if(typeof this.fn!="string"||!uU(a,this.fn))throw a[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var o=sa(a,this.fn),u=Js(this.args,function(p){return p._compile(a,s)});if(u.length===1){var l=u[0];return function(d,h,m){return o(l(d,h,m))}}else if(u.length===2){var f=u[0],c=u[1];return function(d,h,m){return o(f(d,h,m),c(d,h,m))}}else return function(d,h,m){return o.apply(null,Js(u,function(v){return v(d,h,m)}))}},n.prototype.forEach=function(a){for(var s=0;s<this.args.length;s++)a(this.args[s],"args["+s+"]",this)},n.prototype.map=function(a){for(var s=[],o=0;o<this.args.length;o++)s[o]=this._ifNode(a(this.args[o],"args["+o+"]",this));return new n(this.op,this.fn,s,this.implicit)},n.prototype.clone=function(){return new n(this.op,this.fn,this.args.slice(0),this.implicit)},n.prototype.isUnary=function(){return this.args.length===1},n.prototype.isBinary=function(){return this.args.length===2};function r(a,s,o,u,l){var f=nr(a,s),c=ng(a,s);if(s==="all"||u.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return u.map(function(D){switch(D.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var p;switch(u.length){case 0:p=[];break;case 1:{var d=nr(u[0],s);if(l&&d!==null){var h,m;if(s==="keep"?(h=u[0].getIdentifier(),m=a.getIdentifier()):(h=u[0].getContent().getIdentifier(),m=a.getContent().getIdentifier()),Zu[f][m].latexLeftParens===!1){p=[!1];break}if(Zu[d][h].latexParens===!1){p=[!1];break}}if(d===null){p=[!1];break}if(d<=f){p=[!0];break}p=[!1]}break;case 2:{var v,g=nr(u[0],s),y=SI(a,u[0],s);g===null?v=!1:g===f&&c==="right"&&!y||g<f?v=!0:v=!1;var _,x=nr(u[1],s),M=SI(a,u[1],s);if(x===null?_=!1:x===f&&c==="left"&&!M||x<f?_=!0:_=!1,l){var A,E,N;s==="keep"?(A=a.getIdentifier(),E=a.args[0].getIdentifier(),N=a.args[1].getIdentifier()):(A=a.getContent().getIdentifier(),E=a.args[0].getContent().getIdentifier(),N=a.args[1].getContent().getIdentifier()),g!==null&&(Zu[f][A].latexLeftParens===!1&&(v=!1),Zu[g][E].latexParens===!1&&(v=!1)),x!==null&&(Zu[f][A].latexRightParens===!1&&(_=!1),Zu[x][N].latexParens===!1&&(_=!1))}p=[v,_]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(p=u.map(function(D){var C=nr(D,s),T=SI(a,D,s),P=ng(D,s);return C===null?!1:f===C&&c===P&&!T?!0:C<f}));break}return u.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&s==="auto"&&o==="hide"&&(p=u.map(function(D,C){var T=D.getIdentifier()==="ParenthesisNode";return!!(p[C]||T)})),p}return n.prototype._toString=function(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=a&&a.implicit?a.implicit:"hide",u=this.args,l=r(this,s,o,u,!1);if(u.length===1){var f=ng(this,s),c=u[0].toString(a);l[0]&&(c="("+c+")");var p=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(p?" ":"")+c:f==="left"?c+(p?" ":"")+this.op:c+this.op}else if(u.length===2){var d=u[0].toString(a),h=u[1].toString(a);return l[0]&&(d="("+d+")"),l[1]&&(h="("+h+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&o==="hide"?d+" "+h:d+" "+this.op+" "+h}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var m=u.map(function(v,g){return v=v.toString(a),l[g]&&(v="("+v+")"),v});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&o==="hide"?m.join(" "):m.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"},n.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit}},n.fromJSON=function(a){return new n(a.op,a.fn,a.args,a.implicit)},n.prototype.toHTML=function(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=a&&a.implicit?a.implicit:"hide",u=this.args,l=r(this,s,o,u,!1);if(u.length===1){var f=ng(this,s),c=u[0].toHTML(a);return l[0]&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+Lo(this.op)+"</span>"+c:c+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+Lo(this.op)+"</span>"}else if(u.length===2){var p=u[0].toHTML(a),d=u[1].toHTML(a);return l[0]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l[1]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&o==="hide"?p+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+d:p+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Lo(this.op)+"</span>"+d}else{var h=u.map(function(m,v){return m=m.toHTML(a),l[v]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),m});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&o==="hide"?h.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):h.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Lo(this.op)+"</span>"):'<span class="math-function">'+Lo(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+h.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}},n.prototype._toTex=function(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=a&&a.implicit?a.implicit:"hide",u=this.args,l=r(this,s,o,u,!0),f=Pn[this.fn];if(f=typeof f>"u"?this.op:f,u.length===1){var c=ng(this,s),p=u[0].toTex(a);return l[0]&&(p="\\left(".concat(p,"\\right)")),c==="right"?f+p:p+f}else if(u.length===2){var d=u[0],h=d.toTex(a);l[0]&&(h="\\left(".concat(h,"\\right)"));var m=u[1],v=m.toTex(a);l[1]&&(v="\\left(".concat(v,"\\right)"));var g;switch(s==="keep"?g=d.getIdentifier():g=d.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+h+"}{"+v+"}";case"OperatorNode:pow":switch(h="{"+h+"}",v="{"+v+"}",g){case"ConditionalNode":case"OperatorNode:divide":h="\\left(".concat(h,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&o==="hide")return h+"~"+v}return h+f+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(_,x){return _=_.toTex(a),l[x]&&(_="\\left(".concat(_,"\\right)")),_});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit?y.join("~"):y.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(_){return _.toTex(a)}).join(",")+"\\right)"},n.prototype.getIdentifier=function(){return this.type+":"+this.fn},n},{isClass:!0,isNode:!0}),hme="ParenthesisNode",mme=["Node"],XA=ye(hme,mme,function(t){var e=t.Node;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Cn(r))throw new TypeError('Node expected for parameter "content"');this.content=r}return n.prototype=new e,n.prototype.type="ParenthesisNode",n.prototype.isParenthesisNode=!0,n.prototype._compile=function(r,a){return this.content._compile(r,a)},n.prototype.getContent=function(){return this.content.getContent()},n.prototype.forEach=function(r){r(this.content,"content",this)},n.prototype.map=function(r){var a=r(this.content,"content",this);return new n(a)},n.prototype.clone=function(){return new n(this.content)},n.prototype._toString=function(r){return!r||r&&!r.parenthesis||r&&r.parenthesis==="keep"?"("+this.content.toString(r)+")":this.content.toString(r)},n.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content}},n.fromJSON=function(r){return new n(r.content)},n.prototype.toHTML=function(r){return!r||r&&!r.parenthesis||r&&r.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(r)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(r)},n.prototype._toTex=function(r){return!r||r&&!r.parenthesis||r&&r.parenthesis==="keep"?"\\left(".concat(this.content.toTex(r),"\\right)"):this.content.toTex(r)},n},{isClass:!0,isNode:!0}),vme="RangeNode",gme=["Node"],YA=ye(vme,gme,function(t){var e=t.Node;function n(a,s,o){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Cn(a))throw new TypeError("Node expected");if(!Cn(s))throw new TypeError("Node expected");if(o&&!Cn(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=s,this.step=o||null}n.prototype=new e,n.prototype.type="RangeNode",n.prototype.isRangeNode=!0,n.prototype.needsEnd=function(){var a=this.filter(function(s){return ri(s)&&s.name==="end"});return a.length>0},n.prototype._compile=function(a,s){var o=a.range,u=this.start._compile(a,s),l=this.end._compile(a,s);if(this.step){var f=this.step._compile(a,s);return function(p,d,h){return o(u(p,d,h),l(p,d,h),f(p,d,h))}}else return function(p,d,h){return o(u(p,d,h),l(p,d,h))}},n.prototype.forEach=function(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)},n.prototype.map=function(a){return new n(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))},n.prototype.clone=function(){return new n(this.start,this.end,this.step&&this.step)};function r(a,s){var o=nr(a,s),u={},l=nr(a.start,s);if(u.start=l!==null&&l<=o||s==="all",a.step){var f=nr(a.step,s);u.step=f!==null&&f<=o||s==="all"}var c=nr(a.end,s);return u.end=c!==null&&c<=o||s==="all",u}return n.prototype._toString=function(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=r(this,s),u,l=this.start.toString(a);if(o.start&&(l="("+l+")"),u=l,this.step){var f=this.step.toString(a);o.step&&(f="("+f+")"),u+=":"+f}var c=this.end.toString(a);return o.end&&(c="("+c+")"),u+=":"+c,u},n.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step}},n.fromJSON=function(a){return new n(a.start,a.end,a.step)},n.prototype.toHTML=function(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=r(this,s),u,l=this.start.toHTML(a);if(o.start&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=l,this.step){var f=this.step.toHTML(a);o.step&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f}var c=this.end.toHTML(a);return o.end&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c,u},n.prototype._toTex=function(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=r(this,s),u=this.start.toTex(a);if(o.start&&(u="\\left(".concat(u,"\\right)")),this.step){var l=this.step.toTex(a);o.step&&(l="\\left(".concat(l,"\\right)")),u+=":"+l}var f=this.end.toTex(a);return o.end&&(f="\\left(".concat(f,"\\right)")),u+=":"+f,u},n},{isClass:!0,isNode:!0}),yme="RelationalNode",xme=["Node"],QA=ye(yme,xme,function(t){var e=t.Node;function n(r,a){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(r))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(a))throw new TypeError("Parameter params must be an array");if(r.length!==a.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=r,this.params=a}return n.prototype=new e,n.prototype.type="RelationalNode",n.prototype.isRelationalNode=!0,n.prototype._compile=function(r,a){var s=this,o=this.params.map(function(u){return u._compile(r,a)});return function(l,f,c){for(var p,d=o[0](l,f,c),h=0;h<s.conditionals.length;h++){p=d,d=o[h+1](l,f,c);var m=sa(r,s.conditionals[h]);if(!m(p,d))return!1}return!0}},n.prototype.forEach=function(r){var a=this;this.params.forEach(function(s,o){return r(s,"params["+o+"]",a)},this)},n.prototype.map=function(r){var a=this;return new n(this.conditionals.slice(),this.params.map(function(s,o){return a._ifNode(r(s,"params["+o+"]",a))},this))},n.prototype.clone=function(){return new n(this.conditionals,this.params)},n.prototype._toString=function(r){for(var a=r&&r.parenthesis?r.parenthesis:"keep",s=nr(this,a),o=this.params.map(function(c,p){var d=nr(c,a);return a==="all"||d!==null&&d<=s?"("+c.toString(r)+")":c.toString(r)}),u={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},l=o[0],f=0;f<this.conditionals.length;f++)l+=" "+u[this.conditionals[f]]+" "+o[f+1];return l},n.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params}},n.fromJSON=function(r){return new n(r.conditionals,r.params)},n.prototype.toHTML=function(r){for(var a=r&&r.parenthesis?r.parenthesis:"keep",s=nr(this,a),o=this.params.map(function(c,p){var d=nr(c,a);return a==="all"||d!==null&&d<=s?'<span class="math-parenthesis math-round-parenthesis">(</span>'+c.toHTML(r)+'<span class="math-parenthesis math-round-parenthesis">)</span>':c.toHTML(r)}),u={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},l=o[0],f=0;f<this.conditionals.length;f++)l+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+Lo(u[this.conditionals[f]])+"</span>"+o[f+1];return l},n.prototype._toTex=function(r){for(var a=r&&r.parenthesis?r.parenthesis:"keep",s=nr(this,a),o=this.params.map(function(f,c){var p=nr(f,a);return a==="all"||p!==null&&p<=s?"\\left("+f.toTex(r)+"\right)":f.toTex(r)}),u=o[0],l=0;l<this.conditionals.length;l++)u+=Pn[this.conditionals[l]]+o[l+1];return u},n},{isClass:!0,isNode:!0}),bme="SymbolNode",Sme=["math","?Unit","Node"],ZA=ye(bme,Sme,function(t){var e=t.math,n=t.Unit,r=t.Node;function a(u){return n?n.isValuelessUnit(u):!1}function s(u){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if(typeof u!="string")throw new TypeError('String expected for parameter "name"');this.name=u}s.prototype=new r,s.prototype.type="SymbolNode",s.prototype.isSymbolNode=!0,s.prototype._compile=function(u,l){var f=this.name;if(l[f]===!0)return function(p,d,h){return d[f]};if(f in u)return function(p,d,h){return f in p?sa(p,f):sa(u,f)};var c=a(f);return function(p,d,h){return f in p?sa(p,f):c?new n(null,f):o(f)}},s.prototype.forEach=function(u){},s.prototype.map=function(u){return this.clone()};function o(u){throw new Error("Undefined symbol "+u)}return s.prototype.clone=function(){return new s(this.name)},s.prototype._toString=function(u){return this.name},s.prototype.toHTML=function(u){var l=Lo(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"},s.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name}},s.fromJSON=function(u){return new s(u.name)},s.prototype._toTex=function(u){var l=!1;typeof e[this.name]>"u"&&a(this.name)&&(l=!0);var f=yj(this.name,l);return f[0]==="\\"?f:" "+f},s},{isClass:!0,isNode:!0});function Kl(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kl=function(n){return typeof n}:Kl=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Kl(t)}function Qg(){return Qg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qg.apply(this,arguments)}var wme="FunctionNode",_me=["math","Node","SymbolNode"],JA=ye(wme,_me,function(t){var e=t.math,n=t.Node,r=t.SymbolNode;function a(l,f){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(typeof l=="string"&&(l=new r(l)),!Cn(l))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(f)||!f.every(Cn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=l,this.args=f||[],Object.defineProperty(this,"name",{get:(function(){return this.fn.name||""}).bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}});var c=function(){throw new Error("Property `FunctionNode.object` is deprecated, use `FunctionNode.fn` instead")};Object.defineProperty(this,"object",{get:c,set:c})}a.prototype=new n,a.prototype.type="FunctionNode",a.prototype.isFunctionNode=!0,a.prototype._compile=function(l,f){if(!(this instanceof a))throw new TypeError("No valid FunctionNode");var c=Js(this.args,function(N){return N._compile(l,f)});if(ri(this.fn)){var p=this.fn.name,d=p in l?sa(l,p):void 0,h=typeof d=="function"&&d.rawArgs===!0;if(h){var m=this.args;return function(D,C,T){return(p in D?sa(D,p):d)(m,l,Qg({},D,C))}}else if(c.length===1){var v=c[0];return function(D,C,T){return(p in D?sa(D,p):d)(v(D,C,T))}}else if(c.length===2){var g=c[0],y=c[1];return function(D,C,T){return(p in D?sa(D,p):d)(g(D,C,T),y(D,C,T))}}else return function(D,C,T){return(p in D?sa(D,p):d).apply(null,Js(c,function(P){return P(D,C,T)}))}}else if(gc(this.fn)&&vh(this.fn.index)&&this.fn.index.isObjectProperty()){var _=this.fn.object._compile(l,f),x=this.fn.index.getObjectProperty(),M=this.args;return function(D,C,T){var P=_(D,C,T);wde(P,x);var I=P[x]&&P[x].rawArgs;return I?P[x](M,l,Qg({},D,C)):P[x].apply(P,Js(c,function(U){return U(D,C,T)}))}}else{var A=this.fn._compile(l,f),E=this.args;return function(D,C,T){var P=A(D,C,T),I=P&&P.rawArgs;return I?P(E,l,Qg({},D,C)):P.apply(P,Js(c,function(U){return U(D,C,T)}))}}},a.prototype.forEach=function(l){l(this.fn,"fn",this);for(var f=0;f<this.args.length;f++)l(this.args[f],"args["+f+"]",this)},a.prototype.map=function(l){for(var f=this._ifNode(l(this.fn,"fn",this)),c=[],p=0;p<this.args.length;p++)c[p]=this._ifNode(l(this.args[p],"args["+p+"]",this));return new a(f,c)},a.prototype.clone=function(){return new a(this.fn,this.args.slice(0))};var s=a.prototype.toString;a.prototype.toString=function(l){var f,c=this.fn.toString(l);return l&&Kl(l.handler)==="object"&&Et(l.handler,c)&&(f=l.handler[c](this,l)),typeof f<"u"?f:s.call(this,l)},a.prototype._toString=function(l){var f=this.args.map(function(p){return p.toString(l)}),c=gp(this.fn)?"("+this.fn.toString(l)+")":this.fn.toString(l);return c+"("+f.join(", ")+")"},a.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args}},a.fromJSON=function(l){return new a(l.fn,l.args)},a.prototype.toHTML=function(l){var f=this.args.map(function(c){return c.toHTML(l)});return'<span class="math-function">'+Lo(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+f.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};function o(l,f,c){for(var p="",d=new RegExp("\\$(?:\\{([a-z_][a-z_0-9]*)(?:\\[([0-9]+)\\])?\\}|\\$)","ig"),h=0,m;(m=d.exec(l))!==null;)if(p+=l.substring(h,m.index),h=m.index,m[0]==="$$")p+="$",h++;else{h+=m[0].length;var v=f[m[1]];if(!v)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(Kl(v)){case"string":p+=v;break;case"object":if(Cn(v))p+=v.toTex(c);else if(Array.isArray(v))p+=v.map(function(g,y){if(Cn(g))return g.toTex(c);throw new TypeError("Template: "+m[1]+"["+y+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if(Cn(v[m[2]]&&v[m[2]]))p+=v[m[2]].toTex(c);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return p+=l.slice(h),p}var u=a.prototype.toTex;return a.prototype.toTex=function(l){var f;return l&&Kl(l.handler)==="object"&&Et(l.handler,this.name)&&(f=l.handler[this.name](this,l)),typeof f<"u"?f:u.call(this,l)},a.prototype._toTex=function(l){var f=this.args.map(function(d){return d.toTex(l)}),c;g8[this.name]&&(c=g8[this.name]),e[this.name]&&(typeof e[this.name].toTex=="function"||Kl(e[this.name].toTex)==="object"||typeof e[this.name].toTex=="string")&&(c=e[this.name].toTex);var p;switch(Kl(c)){case"function":p=c(this,l);break;case"string":p=o(c,this,l);break;case"object":switch(Kl(c[f.length])){case"function":p=c[f.length](this,l);break;case"string":p=o(c[f.length],this,l);break}}return typeof p<"u"?p:o(J0e,this,l)},a.prototype.getIdentifier=function(){return this.type+":"+this.name},a},{isClass:!0,isNode:!0});function Cf(){return Cf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cf.apply(this,arguments)}var x8="parse",Mme=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],KA=ye(x8,Mme,function(t){var e=t.typed,n=t.numeric,r=t.config,a=t.AccessorNode,s=t.ArrayNode,o=t.AssignmentNode,u=t.BlockNode,l=t.ConditionalNode,f=t.ConstantNode,c=t.FunctionAssignmentNode,p=t.FunctionNode,d=t.IndexNode,h=t.ObjectNode,m=t.OperatorNode,v=t.ParenthesisNode,g=t.RangeNode,y=t.RelationalNode,_=t.SymbolNode,x=e(x8,{string:function(j){return W(j,{})},"Array | Matrix":function(j){return M(j,{})},"string, Object":function(j,pe){var he=pe.nodes!==void 0?pe.nodes:{};return W(j,he)},"Array | Matrix, Object":M});function M(V){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=j.nodes!==void 0?j.nodes:{};return wt(V,function(he){if(typeof he!="string")throw new TypeError("String expected");return W(he,pe)})}var A={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},E={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},N={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},D={true:!0,false:!1,null:null,undefined:void 0},C=["NaN","Infinity"];function T(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:A.NULL,nestingLevel:0,conditionalLevel:null}}function P(V,j){return V.expression.substr(V.index,j)}function I(V){return P(V,1)}function U(V){V.index++}function q(V){return V.expression.charAt(V.index-1)}function z(V){return V.expression.charAt(V.index+1)}function G(V){for(V.tokenType=A.NULL,V.token="",V.comment="";x.isWhitespace(I(V),V.nestingLevel);)U(V);if(I(V)==="#")for(;I(V)!==`
`&&I(V)!=="";)V.comment+=I(V),U(V);if(I(V)===""){V.tokenType=A.DELIMITER;return}if(I(V)===`
`&&!V.nestingLevel){V.tokenType=A.DELIMITER,V.token=I(V),U(V);return}var j=I(V),pe=P(V,2),he=P(V,3);if(he.length===3&&E[he]){V.tokenType=A.DELIMITER,V.token=he,U(V),U(V),U(V);return}if(pe.length===2&&E[pe]){V.tokenType=A.DELIMITER,V.token=pe,U(V),U(V);return}if(E[j]){V.tokenType=A.DELIMITER,V.token=j,U(V);return}if(x.isDigitDot(j)){if(V.tokenType=A.NUMBER,I(V)===".")V.token+=I(V),U(V),x.isDigit(I(V))||(V.tokenType=A.DELIMITER);else{for(;x.isDigit(I(V));)V.token+=I(V),U(V);x.isDecimalMark(I(V),z(V))&&(V.token+=I(V),U(V))}for(;x.isDigit(I(V));)V.token+=I(V),U(V);if(I(V)==="E"||I(V)==="e"){if(x.isDigit(z(V))||z(V)==="-"||z(V)==="+"){if(V.token+=I(V),U(V),(I(V)==="+"||I(V)==="-")&&(V.token+=I(V),U(V)),!x.isDigit(I(V)))throw je(V,'Digit expected, got "'+I(V)+'"');for(;x.isDigit(I(V));)V.token+=I(V),U(V);if(x.isDecimalMark(I(V),z(V)))throw je(V,'Digit expected, got "'+I(V)+'"')}else if(z(V)===".")throw U(V),je(V,'Digit expected, got "'+I(V)+'"')}return}if(x.isAlpha(I(V),q(V),z(V))){for(;x.isAlpha(I(V),q(V),z(V))||x.isDigit(I(V));)V.token+=I(V),U(V);Et(N,V.token)?V.tokenType=A.DELIMITER:V.tokenType=A.SYMBOL;return}for(V.tokenType=A.UNKNOWN;I(V)!=="";)V.token+=I(V),U(V);throw je(V,'Syntax error in part "'+V.token+'"')}function F(V){do G(V);while(V.token===`
`)}function k(V){V.nestingLevel++}function O(V){V.nestingLevel--}x.isAlpha=function(j,pe,he){return x.isValidLatinOrGreek(j)||x.isValidMathSymbol(j,he)||x.isValidMathSymbol(pe,j)},x.isValidLatinOrGreek=function(j){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(j)},x.isValidMathSymbol=function(j,pe){return/^[\uD835]$/.test(j)&&/^[\uDC00-\uDFFF]$/.test(pe)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(pe)},x.isWhitespace=function(j,pe){return j===" "||j==="	"||j===`
`&&pe>0},x.isDecimalMark=function(j,pe){return j==="."&&pe!=="/"&&pe!=="*"&&pe!=="^"},x.isDigitDot=function(j){return j>="0"&&j<="9"||j==="."},x.isDigit=function(j){return j>="0"&&j<="9"};function W(V,j){var pe=T();Cf(pe,{expression:V,extraNodes:j}),G(pe);var he=X(pe);if(pe.token!=="")throw pe.tokenType===A.DELIMITER?we(pe,"Unexpected operator "+pe.token):je(pe,'Unexpected part "'+pe.token+'"');return he}function X(V){var j,pe=[],he;for(V.token!==""&&V.token!==`
`&&V.token!==";"&&(j=ee(V),j.comment=V.comment);V.token===`
`||V.token===";";)pe.length===0&&j&&(he=V.token!==";",pe.push({node:j,visible:he})),G(V),V.token!==`
`&&V.token!==";"&&V.token!==""&&(j=ee(V),j.comment=V.comment,he=V.token!==";",pe.push({node:j,visible:he}));return pe.length>0?new u(pe):(j||(j=new f(void 0),j.comment=V.comment),j)}function ee(V){var j,pe,he,Ae,Fe=J(V);if(V.token==="="){if(ri(Fe))return j=Fe.name,F(V),he=ee(V),new o(new _(j),he);if(gc(Fe))return F(V),he=ee(V),new o(Fe.object,Fe.index,he);if(yp(Fe)&&ri(Fe.fn)&&(Ae=!0,pe=[],j=Fe.name,Fe.args.forEach(function(qe,Ze){ri(qe)?pe[Ze]=qe.name:Ae=!1}),Ae))return F(V),he=ee(V),new c(j,pe,he);throw je(V,"Invalid left hand side of assignment operator =")}return Fe}function J(V){for(var j=Y(V);V.token==="?";){var pe=V.conditionalLevel;V.conditionalLevel=V.nestingLevel,F(V);var he=j,Ae=ee(V);if(V.token!==":")throw je(V,"False part of conditional expression expected");V.conditionalLevel=null,F(V);var Fe=ee(V);j=new l(he,Ae,Fe),V.conditionalLevel=pe}return j}function Y(V){for(var j=ie(V);V.token==="or";)F(V),j=new m("or","or",[j,ie(V)]);return j}function ie(V){for(var j=K(V);V.token==="xor";)F(V),j=new m("xor","xor",[j,K(V)]);return j}function K(V){for(var j=re(V);V.token==="and";)F(V),j=new m("and","and",[j,re(V)]);return j}function re(V){for(var j=oe(V);V.token==="|";)F(V),j=new m("|","bitOr",[j,oe(V)]);return j}function oe(V){for(var j=ce(V);V.token==="^|";)F(V),j=new m("^|","bitXor",[j,ce(V)]);return j}function ce(V){for(var j=me(V);V.token==="&";)F(V),j=new m("&","bitAnd",[j,me(V)]);return j}function me(V){for(var j=[Se(V)],pe=[],he={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Et(he,V.token);){var Ae={name:V.token,fn:he[V.token]};pe.push(Ae),F(V),j.push(Se(V))}return j.length===1?j[0]:j.length===2?new m(pe[0].name,pe[0].fn,j):new y(pe.map(function(Fe){return Fe.fn}),j)}function Se(V){var j,pe,he,Ae;j=le(V);for(var Fe={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Et(Fe,V.token);)pe=V.token,he=Fe[pe],F(V),Ae=[j,le(V)],j=new m(pe,he,Ae);return j}function le(V){var j,pe,he,Ae;j=Q(V);for(var Fe={to:"to",in:"to"};Et(Fe,V.token);)pe=V.token,he=Fe[pe],F(V),pe==="in"&&V.token===""?j=new m("*","multiply",[j,new _("in")],!0):(Ae=[j,Q(V)],j=new m(pe,he,Ae));return j}function Q(V){var j,pe=[];if(V.token===":"?j=new f(1):j=Ee(V),V.token===":"&&V.conditionalLevel!==V.nestingLevel){for(pe.push(j);V.token===":"&&pe.length<3;)F(V),V.token===")"||V.token==="]"||V.token===","||V.token===""?pe.push(new _("end")):pe.push(Ee(V));pe.length===3?j=new g(pe[0],pe[2],pe[1]):j=new g(pe[0],pe[1])}return j}function Ee(V){var j,pe,he,Ae;j=ne(V);for(var Fe={"+":"add","-":"subtract"};Et(Fe,V.token);)pe=V.token,he=Fe[pe],F(V),Ae=[j,ne(V)],j=new m(pe,he,Ae);return j}function ne(V){var j,pe,he,Ae;j=se(V),pe=j;for(var Fe={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Et(Fe,V.token);)he=V.token,Ae=Fe[he],F(V),pe=se(V),j=new m(he,Ae,[j,pe]);return j}function se(V){var j,pe;for(j=xe(V),pe=j;V.tokenType===A.SYMBOL||V.token==="in"&&tr(j)||V.tokenType===A.NUMBER&&!tr(pe)&&(!Gi(pe)||pe.op==="!")||V.token==="(";)pe=xe(V),j=new m("*","multiply",[j,pe],!0);return j}function xe(V){for(var j=ve(V),pe=j,he=[];V.token==="/"&&tr(pe);)if(he.push(Cf({},V)),F(V),V.tokenType===A.NUMBER)if(he.push(Cf({},V)),F(V),V.tokenType===A.SYMBOL||V.token==="(")Cf(V,he.pop()),he.pop(),pe=ve(V),j=new m("/","divide",[j,pe]);else{he.pop(),Cf(V,he.pop());break}else{Cf(V,he.pop());break}return j}function ve(V){var j,pe,he,Ae={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Et(Ae,V.token)?(he=Ae[V.token],j=V.token,F(V),pe=[ve(V)],new m(j,he,pe)):te(V)}function te(V){var j,pe,he,Ae;return j=$(V),(V.token==="^"||V.token===".^")&&(pe=V.token,he=pe==="^"?"pow":"dotPow",F(V),Ae=[j,ve(V)],j=new m(pe,he,Ae)),j}function $(V){var j,pe,he,Ae;j=B(V);for(var Fe={"!":"factorial","'":"ctranspose"};Et(Fe,V.token);)pe=V.token,he=Fe[pe],G(V),Ae=[j],j=new m(pe,he,Ae),j=ue(V,j);return j}function B(V){var j=[];if(V.tokenType===A.SYMBOL&&Et(V.extraNodes,V.token)){var pe=V.extraNodes[V.token];if(G(V),V.token==="("){if(j=[],k(V),G(V),V.token!==")")for(j.push(ee(V));V.token===",";)G(V),j.push(ee(V));if(V.token!==")")throw je(V,"Parenthesis ) expected");O(V),G(V)}return new pe(j)}return ae(V)}function ae(V){var j,pe;return V.tokenType===A.SYMBOL||V.tokenType===A.DELIMITER&&V.token in N?(pe=V.token,G(V),Et(D,pe)?j=new f(D[pe]):C.indexOf(pe)!==-1?j=new f(n(pe,"number")):j=new _(pe),j=ue(V,j),j):_e(V)}function ue(V,j,pe){for(var he;(V.token==="("||V.token==="["||V.token===".")&&!pe;)if(he=[],V.token==="(")if(ri(j)||gc(j)){if(k(V),G(V),V.token!==")")for(he.push(ee(V));V.token===",";)G(V),he.push(ee(V));if(V.token!==")")throw je(V,"Parenthesis ) expected");O(V),G(V),j=new p(j,he)}else return j;else if(V.token==="["){if(k(V),G(V),V.token!=="]")for(he.push(ee(V));V.token===",";)G(V),he.push(ee(V));if(V.token!=="]")throw je(V,"Parenthesis ] expected");O(V),G(V),j=new a(j,new d(he))}else{if(G(V),V.tokenType!==A.SYMBOL)throw je(V,"Property name expected after dot");he.push(new f(V.token)),G(V);var Ae=!0;j=new a(j,new d(he,Ae))}return j}function _e(V){var j,pe;return V.token==='"'?(pe=be(V),j=new f(pe),j=ue(V,j),j):Pe(V)}function be(V){for(var j="";I(V)!==""&&I(V)!=='"';)I(V)==="\\"&&(j+=I(V),U(V)),j+=I(V),U(V);if(G(V),V.token!=='"')throw je(V,'End of string " expected');return G(V),JSON.parse('"'+j+'"')}function Pe(V){var j,pe;return V.token==="'"?(pe=Te(V),j=new f(pe),j=ue(V,j),j):Ie(V)}function Te(V){for(var j="";I(V)!==""&&I(V)!=="'";)I(V)==="\\"&&(j+=I(V),U(V)),j+=I(V),U(V);if(G(V),V.token!=="'")throw je(V,"End of string ' expected");return G(V),JSON.parse('"'+j+'"')}function Ie(V){var j,pe,he,Ae;if(V.token==="["){if(k(V),G(V),V.token!=="]"){var Fe=Oe(V);if(V.token===";"){for(he=1,pe=[Fe];V.token===";";)G(V),pe[he]=Oe(V),he++;if(V.token!=="]")throw je(V,"End of matrix ] expected");O(V),G(V),Ae=pe[0].items.length;for(var qe=1;qe<he;qe++)if(pe[qe].items.length!==Ae)throw we(V,"Column dimensions mismatch ("+pe[qe].items.length+" !== "+Ae+")");j=new s(pe)}else{if(V.token!=="]")throw je(V,"End of matrix ] expected");O(V),G(V),j=Fe}}else O(V),G(V),j=new s([]);return ue(V,j)}return Be(V)}function Oe(V){for(var j=[ee(V)],pe=1;V.token===",";)G(V),j[pe]=ee(V),pe++;return new s(j)}function Be(V){if(V.token==="{"){k(V);var j,pe={};do if(G(V),V.token!=="}"){if(V.token==='"')j=be(V);else if(V.token==="'")j=Te(V);else if(V.tokenType===A.SYMBOL||V.tokenType===A.DELIMITER&&V.token in N)j=V.token,G(V);else throw je(V,"Symbol or string expected as object key");if(V.token!==":")throw je(V,"Colon : expected after object key");G(V),pe[j]=ee(V)}while(V.token===",");if(V.token!=="}")throw je(V,"Comma , or bracket } expected after object value");O(V),G(V);var he=new h(pe);return he=ue(V,he),he}return He(V)}function He(V){var j;return V.tokenType===A.NUMBER?(j=V.token,G(V),new f(n(j,r.number))):Qe(V)}function Qe(V){var j;if(V.token==="("){if(k(V),G(V),j=ee(V),V.token!==")")throw je(V,"Parenthesis ) expected");return O(V),G(V),j=new v(j),j=ue(V,j),j}return et(V)}function et(V){throw V.token===""?je(V,"Unexpected end of expression"):je(V,"Value expected")}function Xe(V){return V.index-V.token.length+1}function je(V,j){var pe=Xe(V),he=new SyntaxError(j+" (char "+pe+")");return he.char=pe,he}function we(V,j){var pe=Xe(V),he=new SyntaxError(j+" (char "+pe+")");return he.char=pe,he}return x}),b8="compile",Eme=["typed","parse"],eN=ye(b8,Eme,function(t){var e=t.typed,n=t.parse;return e(b8,{string:function(a){return n(a).compile()},"Array | Matrix":function(a){return wt(a,function(s){return n(s).compile()})}})}),S8="evaluate",Tme=["typed","parse"],tN=ye(S8,Tme,function(t){var e=t.typed,n=t.parse;return e(S8,{string:function(a){var s={};return n(a).compile().evaluate(s)},"string, Object":function(a,s){return n(a).compile().evaluate(s)},"Array | Matrix":function(a){var s={};return wt(a,function(o){return n(o).compile().evaluate(s)})},"Array | Matrix, Object":function(a,s){return wt(a,function(o){return n(o).compile().evaluate(s)})}})}),nN=ye("eval",["evaluate"],function(t){var e=t.evaluate;return function(){xc('Function "eval" has been renamed to "evaluate" in v6.0.0, please use the new function instead.');for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(e,r)}}),Ame="Parser",Nme=["parse"],rN=ye(Ame,Nme,function(t){var e=t.parse;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.scope={}}return n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.parse=function(r){throw new Error("Parser.parse is deprecated. Use math.parse instead.")},n.prototype.compile=function(r){throw new Error("Parser.compile is deprecated. Use math.compile instead.")},n.prototype.evaluate=function(r){return e(r).compile().evaluate(this.scope)},n.prototype.eval=function(r){return xc("Method Parser.eval is renamed to Parser.evaluate. Please use the new method name."),this.evaluate(r)},n.prototype.get=function(r){return r in this.scope?sa(this.scope,r):void 0},n.prototype.getAll=function(){return xM({},this.scope)},n.prototype.set=function(r,a){return Bf(this.scope,r,a)},n.prototype.remove=function(r){delete this.scope[r]},n.prototype.clear=function(){for(var r in this.scope)Et(this.scope,r)&&delete this.scope[r]},n},{isClass:!0}),w8="parser",Cme=["typed","Parser"],iN=ye(w8,Cme,function(t){var e=t.typed,n=t.Parser;return e(w8,{"":function(){return new n}})}),_8="lup",Dme=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],aN=ye(_8,Dme,function(t){var e=t.typed,n=t.matrix,r=t.abs,a=t.addScalar,s=t.divideScalar,o=t.multiplyScalar,u=t.subtract,l=t.larger,f=t.equalScalar,c=t.unaryMinus,p=t.DenseMatrix,d=t.SparseMatrix,h=t.Spa;return e(_8,{DenseMatrix:function(y){return m(y)},SparseMatrix:function(y){return v(y)},Array:function(y){var _=n(y),x=m(_);return{L:x.L.valueOf(),U:x.U.valueOf(),p:x.p}}});function m(g){var y=g._size[0],_=g._size[1],x=Math.min(y,_),M=Ut(g._data),A=[],E=[y,x],N=[],D=[x,_],C,T,P,I=[];for(C=0;C<y;C++)I[C]=C;for(T=0;T<_;T++){if(T>0)for(C=0;C<y;C++){var U=Math.min(C,T),q=0;for(P=0;P<U;P++)q=a(q,o(M[C][P],M[P][T]));M[C][T]=u(M[C][T],q)}var z=T,G=0,F=0;for(C=T;C<y;C++){var k=M[C][T],O=r(k);l(O,G)&&(z=C,G=O,F=k)}if(T!==z&&(I[T]=[I[z],I[z]=I[T]][0],p._swapRows(T,z,M)),T<y)for(C=T+1;C<y;C++){var W=M[C][T];f(W,0)||(M[C][T]=s(M[C][T],F))}}for(T=0;T<_;T++)for(C=0;C<y;C++){if(T===0&&(C<_&&(N[C]=[]),A[C]=[]),C<T){C<_&&(N[C][T]=M[C][T]),T<y&&(A[C][T]=0);continue}if(C===T){C<_&&(N[C][T]=M[C][T]),T<y&&(A[C][T]=1);continue}C<_&&(N[C][T]=0),T<y&&(A[C][T]=M[C][T])}var X=new p({data:A,size:E}),ee=new p({data:N,size:D}),J=[];for(C=0,x=I.length;C<x;C++)J[I[C]]=C;return{L:X,U:ee,p:J,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(g){var y=g._size[0],_=g._size[1],x=Math.min(y,_),M=g._values,A=g._index,E=g._ptr,N=[],D=[],C=[],T=[y,x],P=[],I=[],U=[],q=[x,_],z,G,F,k=[],O=[];for(z=0;z<y;z++)k[z]=z,O[z]=z;var W=function(J,Y){var ie=O[J],K=O[Y];k[ie]=Y,k[K]=J,O[J]=K,O[Y]=ie},X=function(){var J=new h;G<y&&(C.push(N.length),N.push(1),D.push(G)),U.push(P.length);var Y=E[G],ie=E[G+1];for(F=Y;F<ie;F++)z=A[F],J.set(k[z],M[F]);G>0&&J.forEach(0,G-1,function(ce,me){d._forEachRow(ce,N,D,C,function(Se,le){Se>ce&&J.accumulate(Se,c(o(le,me)))})});var K=G,re=J.get(G),oe=r(re);J.forEach(G+1,y-1,function(ce,me){var Se=r(me);l(Se,oe)&&(K=ce,oe=Se,re=me)}),G!==K&&(d._swapRows(G,K,T[1],N,D,C),d._swapRows(G,K,q[1],P,I,U),J.swap(G,K),W(G,K)),J.forEach(0,y-1,function(ce,me){ce<=G?(P.push(me),I.push(ce)):(me=s(me,re),f(me,0)||(N.push(me),D.push(ce)))})};for(G=0;G<_;G++)X();return U.push(P.length),C.push(N.length),{L:new d({values:N,index:D,ptr:C,size:T}),U:new d({values:P,index:I,ptr:U,size:q}),p:k,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}});function nL(){return nL=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nL.apply(this,arguments)}var M8="qr",Rme=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],sN=ye(M8,Rme,function(t){var e=t.typed,n=t.matrix,r=t.zeros,a=t.identity,s=t.isZero,o=t.equal,u=t.sign,l=t.sqrt,f=t.conj,c=t.unaryMinus,p=t.addScalar,d=t.divideScalar,h=t.multiplyScalar,m=t.subtract,v=t.complex;return nL(e(M8,{DenseMatrix:function(M){return y(M)},SparseMatrix:function(M){return _()},Array:function(M){var A=n(M),E=y(A);return{Q:E.Q.valueOf(),R:E.R.valueOf()}}}),{_denseQRimpl:g});function g(x){var M=x._size[0],A=x._size[1],E=a([M],"dense"),N=E._data,D=x.clone(),C=D._data,T,P,I,U=r([M],"");for(I=0;I<Math.min(A,M);++I){var q=C[I][I],z=c(o(q,0)?1:u(q)),G=f(z),F=0;for(T=I;T<M;T++)F=p(F,h(C[T][I],f(C[T][I])));var k=h(z,l(F));if(!s(k)){var O=m(q,k);for(U[I]=1,T=I+1;T<M;T++)U[T]=d(C[T][I],O);var W=c(f(d(O,k))),X=void 0;for(P=I;P<A;P++){for(X=0,T=I;T<M;T++)X=p(X,h(f(U[T]),C[T][P]));for(X=h(X,W),T=I;T<M;T++)C[T][P]=h(m(C[T][P],h(U[T],X)),G)}for(T=0;T<M;T++){for(X=0,P=I;P<M;P++)X=p(X,h(N[T][P],U[P]));for(X=h(X,W),P=I;P<M;++P)N[T][P]=d(m(N[T][P],h(X,f(U[P]))),G)}}}return{Q:E,R:D,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function y(x){var M=g(x),A=M.R._data;if(x._data.length>0)for(var E=A[0][0].type==="Complex"?v(0):0,N=0;N<A.length;++N)for(var D=0;D<N&&D<(A[0]||[]).length;++D)A[N][D]=E;return M}function _(x){throw new Error("qr not implemented for sparse matrices yet")}});function Ime(t,e,n,r){t._values;for(var a=t._index,s=t._ptr,o=t._size,u=t._datatype,l=o[0],f=o[1],c=null,p=[],d=[],h=0,m=0;m<f;m++){d[m]=h;for(var v=n?n[m]:m,g=s[v],y=s[v+1],_=g;_<y;_++){var x=a[_];p[h]=x,h++}}return d[f]=h,t.createSparseMatrix({values:c,index:p,ptr:d,size:[l,f],datatype:u})}function xj(t,e,n,r,a,s,o){var u=0;for(n[o]=t;u>=0;){var l=n[o+u],f=n[r+l];f===-1?(u--,s[e++]=l):(n[r+l]=n[a+f],++u,n[o+u]=f)}return e}function Pme(t,e){if(!t)return null;var n=0,r,a=[],s=[],o=0,u=e,l=2*e;for(r=0;r<e;r++)s[o+r]=-1;for(r=e-1;r>=0;r--)t[r]!==-1&&(s[u+r]=s[o+t[r]],s[o+t[r]]=r);for(r=0;r<e;r++)t[r]===-1&&(n=xj(r,n,s,o,u,a,l));return a}function Ome(t,e){if(!t)return null;var n=t._index,r=t._ptr,a=t._size,s=a[0],o=a[1],u=[],l=[],f=0,c=o,p,d;for(p=0;p<s;p++)l[c+p]=-1;for(var h=0;h<o;h++){u[h]=-1,l[f+h]=-1;for(var m=r[h],v=r[h+1],g=m;g<v;g++){var y=n[g];for(p=l[c+y];p!==-1&&p<h;p=d)d=l[f+p],l[f+p]=h,d===-1&&(u[p]=h);l[c+y]=h}}return u}function Lme(t,e,n){for(var r=t._values,a=t._index,s=t._ptr,o=t._size,u=o[1],l=0,f=0;f<u;f++){var c=s[f];for(s[f]=l;c<s[f+1];c++)e(a[c],f,r?r[c]:1,n)&&(a[l]=a[c],r&&(r[l]=r[c]),l++)}return s[u]=l,a.splice(l,a.length-l),r&&r.splice(l,r.length-l),l}function Df(t){return-t-2}var kme="csAmd",Ume=["add","multiply","transpose"],Fme=ye(kme,Ume,function(t){var e=t.add,n=t.multiply,r=t.transpose;return function(c,p){if(!p||c<=0||c>3)return null;var d=p._size,h=d[0],m=d[1],v=0,g=Math.max(16,10*Math.sqrt(m));g=Math.min(m-2,g);var y=a(c,p,h,m,g);Lme(y,l,null);for(var _=y._index,x=y._ptr,M=x[m],A=[],E=[],N=0,D=m+1,C=2*(m+1),T=3*(m+1),P=4*(m+1),I=5*(m+1),U=6*(m+1),q=7*(m+1),z=A,G=s(m,x,E,N,T,z,C,q,D,U,P,I),F=o(m,x,E,I,P,U,g,D,T,z,C),k=0,O,W,X,ee,J,Y,ie,K,re,oe,ce,me,Se,le,Q,Ee;F<m;){for(X=-1;k<m&&(X=E[T+k])===-1;k++);E[C+X]!==-1&&(z[E[C+X]]=-1),E[T+k]=E[C+X];var ne=E[P+X],se=E[D+X];F+=se;var xe=0;E[D+X]=-se;var ve=x[X],te=ne===0?ve:M,$=te;for(ee=1;ee<=ne+1;ee++){for(ee>ne?(Y=X,ie=ve,K=E[N+X]-ne):(Y=_[ve++],ie=x[Y],K=E[N+Y]),J=1;J<=K;J++)O=_[ie++],!((re=E[D+O])<=0)&&(xe+=re,E[D+O]=-re,_[$++]=O,E[C+O]!==-1&&(z[E[C+O]]=z[O]),z[O]!==-1?E[C+z[O]]=E[C+O]:E[T+E[I+O]]=E[C+O]);Y!==X&&(x[Y]=Df(X),E[U+Y]=0)}for(ne!==0&&(M=$),E[I+X]=xe,x[X]=te,E[N+X]=$-te,E[P+X]=-2,G=u(G,v,E,U,m),oe=te;oe<$;oe++)if(O=_[oe],!((ce=E[P+O])<=0)){re=-E[D+O];var B=G-re;for(ve=x[O],me=x[O]+ce-1;ve<=me;ve++)Y=_[ve],E[U+Y]>=G?E[U+Y]-=re:E[U+Y]!==0&&(E[U+Y]=E[I+Y]+B)}for(oe=te;oe<$;oe++){for(O=_[oe],me=x[O],Se=me+E[P+O]-1,le=me,Q=0,Ee=0,ve=me;ve<=Se;ve++)if(Y=_[ve],E[U+Y]!==0){var ae=E[U+Y]-G;ae>0?(Ee+=ae,_[le++]=Y,Q+=Y):(x[Y]=Df(X),E[U+Y]=0)}E[P+O]=le-me+1;var ue=le,_e=me+E[N+O];for(ve=Se+1;ve<_e;ve++){W=_[ve];var be=E[D+W];be<=0||(Ee+=be,_[le++]=W,Q+=W)}Ee===0?(x[O]=Df(X),re=-E[D+O],xe-=re,se+=re,F+=re,E[D+O]=0,E[P+O]=-1):(E[I+O]=Math.min(E[I+O],Ee),_[le]=_[ue],_[ue]=_[me],_[me]=X,E[N+O]=le-me+1,Q=(Q<0?-Q:Q)%m,E[C+O]=E[q+Q],E[q+Q]=O,z[O]=Q)}for(E[I+X]=xe,v=Math.max(v,xe),G=u(G+v,v,E,U,m),oe=te;oe<$;oe++)if(O=_[oe],!(E[D+O]>=0))for(Q=z[O],O=E[q+Q],E[q+Q]=-1;O!==-1&&E[C+O]!==-1;O=E[C+O],G++){for(K=E[N+O],ce=E[P+O],ve=x[O]+1;ve<=x[O]+K-1;ve++)E[U+_[ve]]=G;var Pe=O;for(W=E[C+O];W!==-1;){var Te=E[N+W]===K&&E[P+W]===ce;for(ve=x[W]+1;Te&&ve<=x[W]+K-1;ve++)E[U+_[ve]]!==G&&(Te=0);Te?(x[W]=Df(O),E[D+O]+=E[D+W],E[D+W]=0,E[P+W]=-1,W=E[C+W],E[C+Pe]=W):(Pe=W,W=E[C+W])}}for(ve=te,oe=te;oe<$;oe++)O=_[oe],!((re=-E[D+O])<=0)&&(E[D+O]=re,Ee=E[I+O]+xe-re,Ee=Math.min(Ee,m-F-re),E[T+Ee]!==-1&&(z[E[T+Ee]]=O),E[C+O]=E[T+Ee],z[O]=-1,E[T+Ee]=O,k=Math.min(k,Ee),E[I+O]=Ee,_[ve++]=O);E[D+X]=se,(E[N+X]=ve-te)===0&&(x[X]=-1,E[U+X]=0),ne!==0&&(M=ve)}for(O=0;O<m;O++)x[O]=Df(x[O]);for(W=0;W<=m;W++)E[T+W]=-1;for(W=m;W>=0;W--)E[D+W]>0||(E[C+W]=E[T+x[W]],E[T+x[W]]=W);for(Y=m;Y>=0;Y--)E[D+Y]<=0||x[Y]!==-1&&(E[C+Y]=E[T+x[Y]],E[T+x[Y]]=Y);for(X=0,O=0;O<=m;O++)x[O]===-1&&(X=xj(O,X,E,T,C,A,U));return A.splice(A.length-1,1),A};function a(f,c,p,d,h){var m=r(c);if(f===1&&d===p)return e(c,m);if(f===2){for(var v=m._index,g=m._ptr,y=0,_=0;_<p;_++){var x=g[_];if(g[_]=y,!(g[_+1]-x>h))for(var M=g[_+1];x<M;x++)v[y++]=v[x]}return g[p]=y,c=r(m),n(m,c)}return n(m,c)}function s(f,c,p,d,h,m,v,g,y,_,x,M){for(var A=0;A<f;A++)p[d+A]=c[A+1]-c[A];p[d+f]=0;for(var E=0;E<=f;E++)p[h+E]=-1,m[E]=-1,p[v+E]=-1,p[g+E]=-1,p[y+E]=1,p[_+E]=1,p[x+E]=0,p[M+E]=p[d+E];var N=u(0,0,p,_,f);return p[x+f]=-2,c[f]=-1,p[_+f]=0,N}function o(f,c,p,d,h,m,v,g,y,_,x){for(var M=0,A=0;A<f;A++){var E=p[d+A];if(E===0)p[h+A]=-2,M++,c[A]=-1,p[m+A]=0;else if(E>v)p[g+A]=0,p[h+A]=-1,M++,c[A]=Df(f),p[g+f]++;else{var N=p[y+E];N!==-1&&(_[N]=A),p[x+A]=p[y+E],p[y+E]=A}}return M}function u(f,c,p,d,h){if(f<2||f+c<0){for(var m=0;m<h;m++)p[d+m]!==0&&(p[d+m]=1);f=2}return f}function l(f,c){return f!==c}});function Bme(t,e,n,r,a,s,o){var u,l,f=0,c;if(t<=e||n[r+e]<=n[a+t])return-1;n[a+t]=n[r+e];var p=n[s+t];if(n[s+t]=e,p===-1)f=1,c=t;else{for(f=2,c=p;c!==n[o+c];c=n[o+c]);for(u=p;u!==c;u=l)l=n[o+u],n[o+u]=c}return{jleaf:f,q:c}}var zme="csCounts",qme=["transpose"],Gme=ye(zme,qme,function(t){var e=t.transpose;return function(n,r,a,s){if(!n||!r||!a)return null;var o=n._size,u=o[0],l=o[1],f,c,p,d,h,m,v,g=4*l+(s?l+u+1:0),y=[],_=0,x=l,M=2*l,A=3*l,E=4*l,N=5*l+1;for(p=0;p<g;p++)y[p]=-1;var D=[],C=e(n),T=C._index,P=C._ptr;for(p=0;p<l;p++)for(c=a[p],D[c]=y[A+c]===-1?1:0;c!==-1&&y[A+c]===-1;c=r[c])y[A+c]=p;if(s){for(p=0;p<l;p++)y[a[p]]=p;for(f=0;f<u;f++){for(p=l,m=P[f],v=P[f+1],h=m;h<v;h++)p=Math.min(p,y[T[h]]);y[N+f]=y[E+p],y[E+p]=f}}for(f=0;f<l;f++)y[_+f]=f;for(p=0;p<l;p++){for(c=a[p],r[c]!==-1&&D[r[c]]--,d=s?y[E+p]:c;d!==-1;d=s?y[N+d]:-1)for(h=P[d];h<P[d+1];h++){f=T[h];var I=Bme(f,c,y,A,x,M,_);I.jleaf>=1&&D[c]++,I.jleaf===2&&D[I.q]--}r[c]!==-1&&(y[_+c]=r[c])}for(c=0;c<l;c++)r[c]!==-1&&(D[r[c]]+=D[c]);return D}}),Hme="csSqr",Vme=["add","multiply","transpose"],Wme=ye(Hme,Vme,function(t){var e=t.add,n=t.multiply,r=t.transpose,a=Fme({add:e,multiply:n,transpose:r}),s=Gme({transpose:r});return function(l,f,c){var p=f._ptr,d=f._size,h=d[1],m,v={};if(v.q=a(l,f),l&&!v.q)return null;if(c){var g=l?Ime(f,null,v.q):f;v.parent=Ome(g);var y=Pme(v.parent,h);if(v.cp=s(g,v.parent,y,1),g&&v.parent&&v.cp&&o(g,v))for(v.unz=0,m=0;m<h;m++)v.unz+=v.cp[m]}else v.unz=4*p[h]+h,v.lnz=v.unz;return v};function o(u,l){var f=u._ptr,c=u._index,p=u._size,d=p[0],h=p[1];l.pinv=[],l.leftmost=[];var m=l.parent,v=l.pinv,g=l.leftmost,y=[],_=0,x=d,M=d+h,A=d+2*h,E,N,D,C,T;for(N=0;N<h;N++)y[x+N]=-1,y[M+N]=-1,y[A+N]=0;for(E=0;E<d;E++)g[E]=-1;for(N=h-1;N>=0;N--)for(C=f[N],T=f[N+1],D=C;D<T;D++)g[c[D]]=N;for(E=d-1;E>=0;E--)v[E]=-1,N=g[E],N!==-1&&(y[A+N]++===0&&(y[M+N]=E),y[_+E]=y[x+N],y[x+N]=E);for(l.lnz=0,l.m2=d,N=0;N<h;N++)if(E=y[x+N],l.lnz++,E<0&&(E=l.m2++),v[E]=N,!(--A[N]<=0)){l.lnz+=y[A+N];var P=m[N];P!==-1&&(y[A+P]===0&&(y[M+P]=y[M+N]),y[_+y[M+N]]=y[x+P],y[x+P]=y[_+E],y[A+P]+=y[A+N])}for(E=0;E<d;E++)v[E]<0&&(v[E]=N++);return!0}});function rL(t,e){return t[e]<0}function bj(t,e){t[e]=Df(t[e])}function E8(t){return t<0?Df(t):t}function $me(t,e,n,r,a){var s=e._index,o=e._ptr,u=e._size,l=u[1],f,c,p,d=0;for(r[0]=t;d>=0;){t=r[d];var h=a?a[t]:t;rL(o,t)||(bj(o,t),r[l+d]=h<0?0:E8(o[h]));var m=1;for(c=r[l+d],p=h<0?0:E8(o[h+1]);c<p;c++)if(f=s[c],!rL(o,f)){r[l+d]=c,r[++d]=f,m=0;break}m&&(d--,r[--n]=t)}return n}function jme(t,e,n,r,a){var s=t._ptr,o=t._size,u=e._index,l=e._ptr,f=o[1],c,p,d,h=f;for(p=l[n],d=l[n+1],c=p;c<d;c++){var m=u[c];rL(s,m)||(h=$me(m,t,h,r,a))}for(c=h;c<f;c++)bj(s,r[c]);return h}var Xme="csSpsolve",Yme=["divideScalar","multiply","subtract"],Qme=ye(Xme,Yme,function(t){var e=t.divideScalar,n=t.multiply,r=t.subtract;return function(s,o,u,l,f,c,p){var d=s._values,h=s._index,m=s._ptr,v=s._size,g=v[1],y=o._values,_=o._index,x=o._ptr,M,A,E,N,D=jme(s,o,u,l,c);for(M=D;M<g;M++)f[l[M]]=0;for(A=x[u],E=x[u+1],M=A;M<E;M++)f[_[M]]=y[M];for(var C=D;C<g;C++){var T=l[C],P=c?c[T]:T;if(!(P<0))for(A=m[P],E=m[P+1],f[T]=e(f[T],d[p?A:E-1]),M=p?A+1:A,N=p?E:E-1;M<N;M++){var I=h[M];f[I]=r(f[I],n(d[M],f[T]))}}return D}}),Zme="csLu",Jme=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],Kme=ye(Zme,Jme,function(t){var e=t.abs,n=t.divideScalar,r=t.multiply,a=t.subtract,s=t.larger,o=t.largerEq,u=t.SparseMatrix,l=Qme({divideScalar:n,multiply:r,subtract:a});return function(c,p,d){if(!c)return null;var h=c._size,m=h[1],v,g=100,y=100;p&&(v=p.q,g=p.lnz||g,y=p.unz||y);var _=[],x=[],M=[],A=new u({values:_,index:x,ptr:M,size:[m,m]}),E=[],N=[],D=[],C=new u({values:E,index:N,ptr:D,size:[m,m]}),T=[],P,I,U=[],q=[];for(P=0;P<m;P++)U[P]=0,T[P]=-1,M[P+1]=0;g=0,y=0;for(var z=0;z<m;z++){M[z]=g,D[z]=y;var G=v?v[z]:z,F=l(A,c,G,q,U,T,1),k=-1,O=-1;for(I=F;I<m;I++)if(P=q[I],T[P]<0){var W=e(U[P]);s(W,O)&&(O=W,k=P)}else N[y]=T[P],E[y++]=U[P];if(k===-1||O<=0)return null;T[G]<0&&o(e(U[G]),r(O,d))&&(k=G);var X=U[k];for(N[y]=z,E[y++]=X,T[k]=z,x[g]=k,_[g++]=1,I=F;I<m;I++)P=q[I],T[P]<0&&(x[g]=P,_[g++]=n(U[P],X)),U[P]=0}for(M[m]=g,D[m]=y,I=0;I<g;I++)x[I]=T[x[I]];return _.splice(g,_.length-g),x.splice(g,x.length-g),E.splice(y,E.length-y),N.splice(y,N.length-y),{L:A,U:C,pinv:T}}}),T8="slu",eve=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],oN=ye(T8,eve,function(t){var e=t.typed,n=t.abs,r=t.add,a=t.multiply,s=t.transpose,o=t.divideScalar,u=t.subtract,l=t.larger,f=t.largerEq,c=t.SparseMatrix,p=Wme({add:r,multiply:a,transpose:s}),d=Kme({abs:n,divideScalar:o,multiply:a,subtract:u,larger:l,largerEq:f,SparseMatrix:c});return e(T8,{"SparseMatrix, number, number":function(m,v,g){if(!Ot(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(g<0||g>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var y=p(v,m,!1),_=d(m,y,g);return{L:_.L,U:_.U,p:_.pinv,q:y.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function A8(t,e){var n,r=e.length,a=[];if(t)for(n=0;n<r;n++)a[t[n]]=e[n];else for(n=0;n<r;n++)a[n]=e[n];return a}var N8="lusolve",tve=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],uN=ye(N8,tve,function(t){var e=t.typed,n=t.matrix,r=t.lup,a=t.slu,s=t.usolve,o=t.lsolve,u=t.DenseMatrix,l=lU({DenseMatrix:u});return e(N8,{"Array, Array | Matrix":function(d,h){d=n(d);var m=r(d),v=c(m.L,m.U,m.p,null,h);return v.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,m,v){var g=a(d,m,v);return c(g.L,g.U,g.p,g.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function f(p){if(Dn(p))return p;if(zn(p))return n(p);throw new TypeError("Invalid Matrix LU decomposition")}function c(p,d,h,m,v){p=f(p),d=f(d),v=l(p,v,!1),h&&(v._data=A8(h,v._data));var g=o(p,v),y=s(d,g);return m&&(y._data=A8(m,y._data)),y}}),nve="Help",rve=["parse"],lN=ye(nve,rve,function(t){var e=t.parse;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var r=this.doc||{},a=`
`;if(r.name&&(a+="Name: "+r.name+`

`),r.category&&(a+="Category: "+r.category+`

`),r.description&&(a+=`Description:
    `+r.description+`

`),r.syntax&&(a+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){a+=`Examples:
`;for(var s={},o=0;o<r.examples.length;o++){var u=r.examples[o];a+="    "+u+`
`;var l=void 0;try{l=e(u).compile().evaluate(s)}catch(f){l=f}l!==void 0&&!Zm(l)&&(a+="        "+mn(l,{precision:14})+`
`)}a+=`
`}return r.seealso&&r.seealso.length&&(a+="See also: "+r.seealso.join(", ")+`
`),a},n.prototype.toJSON=function(){var r=Ut(this.doc);return r.mathjs="Help",r},n.fromJSON=function(r){var a={};for(var s in r)s!=="mathjs"&&(a[s]=r[s]);return new n(a)},n.prototype.valueOf=n.prototype.toString,n},{isClass:!0}),ive="Chain",ave=["?on","math"],cN=ye(ive,ave,function(t){var e=t.on,n=t.math;function r(l){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Jm(l)?this.value=l.value:this.value=l}r.prototype.type="Chain",r.prototype.isChain=!0,r.prototype.done=function(){return this.value},r.prototype.valueOf=function(){return this.value},r.prototype.toString=function(){return mn(this.value)},r.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},r.fromJSON=function(l){return new r(l.value)};function a(l,f){typeof f=="function"&&(r.prototype[l]=o(f))}function s(l,f){tc(r.prototype,l,function(){var p=f();if(typeof p=="function")return o(p)})}function o(l){return function(){for(var f=[this.value],c=0;c<arguments.length;c++)f[c+1]=arguments[c];return new r(l.apply(l,f))}}r.createProxy=function(l,f){if(typeof l=="string")a(l,f);else{var c=function(h){Et(l,h)&&u[h]===void 0&&s(h,function(){return l[h]})};for(var p in l)c(p)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return r.createProxy(n),e&&e("import",function(l,f,c){c||s(l,f)}),r},{isClass:!0}),sve={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},C8={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},ove={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},uve={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},lve={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},cve={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},fve={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},pve={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},dve={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},hve={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},mve={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},vve={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},gve={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},yve={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},xve={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},bve={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},Sve={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},wve={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},_ve={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},Mve={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},Eve={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},Tve={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},Ave={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},Nve={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},Cve={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},Dve={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},Rve={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},Ive={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},Pve={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},Ove={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},Lve={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},kve={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},Uve={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},Fve={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},Bve={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},zve={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},qve={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},Gve={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},Hve={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},Vve={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},Wve={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},$ve={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},jve={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},Xve={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},Yve={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},Qve={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},Zve={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},Jve={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},Kve={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},ege={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},tge={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},nge={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},rge={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},ige={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},age={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},sge={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},oge={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},uge={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},lge={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},cge={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},fge={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},pge={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},dge={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},hge={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},mge={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},vge={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},gge={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},yge={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},xge={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},bge={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},Sge={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},wge={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},_ge={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},Mge={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},Ege={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},Tge={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},Age={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},Nge={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},Cge={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},Dge={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},Rge={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},Ige={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},Pge={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},Oge={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Lge={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},kge={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},Uge={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]},Fge={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},Bge={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},zge={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]},qge={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},Gge={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},Hge={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},Vge={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Wge={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]},$ge={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},jge={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},Xge={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Yge={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},Qge={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},Zge={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Jge={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Kge={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},eye={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},tye={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},nye={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},rye={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},iye={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},aye={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},sye={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},oye={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},uye={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},D8={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(" + 4 + ")")'],seealso:[]},lye={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},cye={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},fye={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},pye={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},dye={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]},hye={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},mye={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},vye={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},gye={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},yye={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},xye={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},bye={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},Sye={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},wye={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},_ye={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},Mye={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},Eye={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Tye={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Aye={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},Nye={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},Cye={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},Dye={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},Rye={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[1, 2], [3, 4]])"],seealso:["sqrt","abs","square","multiply"]},Iye={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},Pye={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},Oye={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]},Lye={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},kye={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},Uye={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},Fye={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},Bye={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},zye={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},qye={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},Gye={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},Hye={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},Vye={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},Wye={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},$ye={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},jye={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},Xye={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},Yye={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},Qye={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},Zye={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},Jye={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and eigenvectors of a real symmetric matrix",examples:["eigs([[5, 2.3], [2.3, 1]])"],seealso:["inv"]},Kye={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},e1e={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},t1e={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},n1e={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},r1e={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},i1e={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},a1e={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},s1e={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},o1e={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},u1e={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},l1e={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Solves the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["lup","lusolve","lsolve","matrix","sparse"]},c1e={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},f1e={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},p1e={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["derivative","parse","evaluate"]},d1e={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},h1e={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Solves the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lup","lusolve","usolve","matrix","sparse"]},m1e={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},v1e={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},g1e={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},y1e={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},x1e={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},b1e={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},S1e={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},R8={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},w1e={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},_1e={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},M1e={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},E1e={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},T1e={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},A1e={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},N1e={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},C1e={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},D1e={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},I8={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},R1e={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},I1e={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},P1e={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},O1e={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},L1e={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},k1e={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},U1e={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},F1e={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},B1e={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},z1e={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},q1e={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},G1e={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},H1e={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},V1e={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},P8={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},W1e={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},$1e={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction)','numeric(4, "Fraction")','numeric(fraction(2, 5), "number)'],seealso:["number","fraction","bignumber","string","format"]},j1e={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row"]},X1e={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column"]},Sj={bignumber:sve,boolean:q1e,complex:z1e,createUnit:B1e,fraction:F1e,index:U1e,matrix:k1e,number:L1e,sparse:O1e,splitUnit:P1e,string:I1e,unit:R1e,e:I8,E:I8,false:D1e,i:C1e,Infinity:N1e,LN2:A1e,LN10:T1e,LOG2E:E1e,LOG10E:M1e,NaN:_1e,null:w1e,pi:R8,PI:R8,phi:S1e,SQRT1_2:b1e,SQRT2:x1e,tau:y1e,true:g1e,version:v1e,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:m1e,lsolve:h1e,lup:d1e,lusolve:H1e,simplify:p1e,rationalize:f1e,slu:c1e,usolve:l1e,qr:u1e,abs:o1e,add:s1e,cbrt:a1e,ceil:i1e,cube:r1e,divide:n1e,dotDivide:t1e,dotMultiply:e1e,dotPow:G1e,exp:Kye,expm:Zye,expm1:Qye,fix:Yye,floor:Xye,gcd:jye,hypot:$ye,lcm:Wye,log:Vye,log2:Hye,log1p:Gye,log10:qye,mod:zye,multiply:Bye,norm:Fye,nthRoot:Uye,nthRoots:kye,pow:Lye,round:Oye,sign:Pye,sqrt:Iye,sqrtm:Rye,square:Dye,subtract:V1e,unaryMinus:Cye,unaryPlus:Nye,xgcd:Aye,bitAnd:Tye,bitNot:Eye,bitOr:Mye,bitXor:_ye,leftShift:wye,rightArithShift:Sye,rightLogShift:bye,bellNumbers:xye,catalan:yye,composition:gye,stirlingS2:vye,config:mye,import:hye,typed:dye,arg:pye,conj:fye,re:cye,im:lye,evaluate:D8,eval:D8,help:uye,distance:oye,intersect:sye,and:aye,not:iye,or:rye,xor:nye,concat:tye,cross:eye,column:j1e,ctranspose:Kge,det:Jge,diag:Zge,dot:Qge,getMatrixDataType:Yge,identity:Xge,filter:jge,flatten:$ge,forEach:Wge,inv:Vge,eigs:Jye,kron:Hge,map:Gge,ones:qge,partitionSelect:zge,range:Bge,resize:Fge,reshape:Uge,row:X1e,size:kge,sort:Lge,squeeze:Oge,subset:Pge,trace:Ige,transpose:Rge,zeros:Dge,combinations:Nge,combinationsWithRep:Cge,factorial:Age,gamma:Tge,kldivergence:Ege,multinomial:Mge,permutations:_ge,pickRandom:wge,random:Sge,randomInt:bge,compare:xge,compareNatural:yge,compareText:gge,deepEqual:vge,equal:mge,equalText:hge,larger:dge,largerEq:pge,smaller:fge,smallerEq:cge,unequal:lge,setCartesian:uge,setDifference:oge,setDistinct:sge,setIntersect:age,setIsSubset:ige,setMultiplicity:rge,setPowerset:nge,setSize:tge,setSymDifference:ege,setUnion:Kve,erf:Jve,mad:Zve,max:Qve,mean:Yve,median:Xve,min:jve,mode:$ve,prod:Wve,quantileSeq:Vve,std:Hve,sum:Gve,variance:P8,var:P8,acos:qve,acosh:zve,acot:Bve,acoth:Fve,acsc:Uve,acsch:kve,asec:Lve,asech:Ove,asin:Pve,asinh:Ive,atan:Rve,atanh:Dve,atan2:Cve,cos:Nve,cosh:Ave,cot:Tve,coth:Eve,csc:Mve,csch:_ve,sec:wve,sech:Sve,sin:W1e,sinh:bve,tan:xve,tanh:yve,to:gve,clone:vve,format:mve,isNaN:hve,isInteger:dve,isNegative:pve,isNumeric:cve,hasNumericValue:fve,isPositive:lve,isPrime:uve,isZero:ove,typeOf:C8,typeof:C8,numeric:$1e},O8="help",Y1e=["typed","mathWithTransform","Help"],fN=ye(O8,Y1e,function(t){var e=t.typed,n=t.mathWithTransform,r=t.Help;return e(O8,{any:function(s){var o,u=s;if(typeof s!="string"){for(o in n)if(Et(n,o)&&s===n[o]){u=o;break}}var l=sa(Sj,u);if(!l){var f=typeof u=="function"?u.name:u;throw new Error('No documentation found on "'+f+'"')}return new r(l)}})}),L8="chain",Q1e=["typed","Chain"],pN=ye(L8,Q1e,function(t){var e=t.typed,n=t.Chain;return e(L8,{"":function(){return new n},any:function(a){return new n(a)}})}),k8="det",Z1e=["typed","matrix","subtract","multiply","unaryMinus","lup"],dN=ye(k8,Z1e,function(t){var e=t.typed,n=t.matrix,r=t.subtract,a=t.multiply,s=t.unaryMinus,o=t.lup;return e(k8,{any:function(f){return Ut(f)},"Array | Matrix":function(f){var c;switch(Dn(f)?c=f.size():Array.isArray(f)?(f=n(f),c=f.size()):c=[],c.length){case 0:return Ut(f);case 1:if(c[0]===1)return Ut(f.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+mn(c)+")");case 2:{var p=c[0],d=c[1];if(p===d)return u(f.clone().valueOf(),p);throw new RangeError("Matrix must be square (size: "+mn(c)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+mn(c)+")")}}});function u(l,f,c){if(f===1)return Ut(l[0][0]);if(f===2)return r(a(l[0][0],l[1][1]),a(l[1][0],l[0][1]));for(var p=o(l),d=p.U[0][0],h=1;h<f;h++)d=a(d,p.U[h][h]);for(var m=0,v=0,g=[];;){for(;g[v];)v++;if(v>=f)break;for(var y=v,_=0;!g[p.p[y]];)g[p.p[y]]=!0,y=p.p[y],_++;_%2===0&&m++}return m%2===0?d:s(d)}}),U8="inv",J1e=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],hN=ye(U8,J1e,function(t){var e=t.typed,n=t.matrix,r=t.divideScalar,a=t.addScalar,s=t.multiply,o=t.unaryMinus,u=t.det,l=t.identity,f=t.abs;return e(U8,{"Array | Matrix":function(d){var h=Dn(d)?d.size():yn(d);switch(h.length){case 1:if(h[0]===1)return Dn(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+mn(h)+")");case 2:{var m=h[0],v=h[1];if(m===v)return Dn(d)?n(c(d.valueOf(),m,v),d.storage()):c(d,m,v);throw new RangeError("Matrix must be square (size: "+mn(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+mn(h)+")")}},any:function(d){return r(1,d)}});function c(p,d,h){var m,v,g,y,_;if(d===1){if(y=p[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,y)]]}else if(d===2){var x=u(p);if(x===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(p[1][1],x),r(o(p[0][1]),x)],[r(o(p[1][0]),x),r(p[0][0],x)]]}else{var M=p.concat();for(m=0;m<d;m++)M[m]=M[m].concat();for(var A=l(d).valueOf(),E=0;E<h;E++){var N=f(M[E][E]),D=E;for(m=E+1;m<d;)f(M[m][E])>N&&(N=f(M[m][E]),D=m),m++;if(N===0)throw Error("Cannot calculate inverse, determinant is zero");m=D,m!==E&&(_=M[E],M[E]=M[m],M[m]=_,_=A[E],A[E]=A[m],A[m]=_);var C=M[E],T=A[E];for(m=0;m<d;m++){var P=M[m],I=A[m];if(m!==E){if(P[E]!==0){for(g=r(o(P[E]),C[E]),v=E;v<h;v++)P[v]=a(P[v],s(g,C[v]));for(v=0;v<h;v++)I[v]=a(I[v],s(g,T[v]))}}else{for(g=C[E],v=E;v<h;v++)P[v]=r(P[v],g);for(v=0;v<h;v++)I[v]=r(I[v],g)}}}return A}}}),K1e="eigs",exe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","inv","bignumber","multiply","add"],mN=ye(K1e,exe,function(t){var e=t.config,n=t.typed,r=t.matrix,a=t.addScalar,s=t.subtract,o=t.equal,u=t.abs,l=t.atan,f=t.cos,c=t.sin,p=t.multiplyScalar,d=t.inv,h=t.bignumber,m=t.multiply,v=t.add,g=n("eigs",{Array:function(G){var F=r(G),k=F.size();if(k.length!==2||k[0]!==k[1])throw new RangeError("Matrix must be square (size: "+mn(k)+")");var O=_(F,k[0]);return{values:O[0],vectors:O[1]}},Matrix:function(G){var F=G.size();if(F.length!==2||F[0]!==F[1])throw new RangeError("Matrix must be square (size: "+mn(F)+")");var k=_(G,F[0]);return{values:r(k[0]),vectors:r(k[1])}}});function y(z,G){for(var F=0;F<G;F++)for(var k=F;k<G;k++)if(!o(z[F][k],z[k][F]))throw new TypeError("Input matrix is not symmetric")}function _(z,G){var F=z.datatype();if(F===void 0&&(F=z.getDataType()),F!=="number"&&F!=="BigNumber"&&F!=="Fraction")throw F==="mixed"?new TypeError("Mixed matrix element type is not supported"):new TypeError("Matrix element type not supported ("+F+")");if(y(z.toArray(),G),F==="number")return x(z.toArray());if(F==="Fraction"){for(var k=z.toArray(),O=0;O<G;O++)for(var W=O;W<G;W++)k[O][W]=k[O][W].valueOf(),k[W][O]=k[O][W];return x(z.toArray())}else if(F==="BigNumber")return M(z.toArray())}function x(z){for(var G=z.length,F=Math.abs(e.epsilon/G),k,O=new Array(G),W=0;W<G;W++)O[W]=q(G,0),O[W][W]=1;for(var X=P(z);Math.abs(X[1])>=Math.abs(F);){var ee=X[0][0],J=X[0][1];k=A(z[ee][ee],z[J][J],z[ee][J]),z=T(z,k,ee,J),O=N(O,k,ee,J),X=P(z)}for(var Y=q(G,0),ie=0;ie<G;ie++)Y[ie]=z[ie][ie];return U(Ut(Y),Ut(O))}function M(z){for(var G=z.length,F=u(e.epsilon/G),k,O=new Array(G),W=0;W<G;W++)O[W]=q(G,0),O[W][W]=1;for(var X=I(z);u(X[1])>=u(F);){var ee=X[0][0],J=X[0][1];k=E(z[ee][ee],z[J][J],z[ee][J]),z=C(z,k,ee,J),O=D(O,k,ee,J),X=I(z)}for(var Y=q(G,0),ie=0;ie<G;ie++)Y[ie]=z[ie][ie];return U(Ut(Y),Ut(O))}function A(z,G,F){var k=G-z;return Math.abs(k)<=e.epsilon?Math.PI/4:.5*Math.atan(2*F/(G-z))}function E(z,G,F){var k=s(G,z);return u(k)<=e.epsilon?h(-1).acos().div(4):p(.5,l(m(2,F,d(k))))}function N(z,G,F,k){for(var O=z.length,W=Math.cos(G),X=Math.sin(G),ee=q(O,0),J=q(O,0),Y=0;Y<O;Y++)ee[Y]=W*z[Y][F]-X*z[Y][k],J[Y]=X*z[Y][F]+W*z[Y][k];for(var ie=0;ie<O;ie++)z[ie][F]=ee[ie],z[ie][k]=J[ie];return z}function D(z,G,F,k){for(var O=z.length,W=f(G),X=c(G),ee=q(O,h(0)),J=q(O,h(0)),Y=0;Y<O;Y++)ee[Y]=s(p(W,z[Y][F]),p(X,z[Y][k])),J[Y]=a(p(X,z[Y][F]),p(W,z[Y][k]));for(var ie=0;ie<O;ie++)z[ie][F]=ee[ie],z[ie][k]=J[ie];return z}function C(z,G,F,k){for(var O=z.length,W=h(f(G)),X=h(c(G)),ee=p(W,W),J=p(X,X),Y=q(O,h(0)),ie=q(O,h(0)),K=m(h(2),W,X,z[F][k]),re=a(s(p(ee,z[F][F]),K),p(J,z[k][k])),oe=v(p(J,z[F][F]),K,p(ee,z[k][k])),ce=0;ce<O;ce++)Y[ce]=s(p(W,z[F][ce]),p(X,z[k][ce])),ie[ce]=a(p(X,z[F][ce]),p(W,z[k][ce]));z[F][F]=re,z[k][k]=oe,z[F][k]=h(0),z[k][F]=h(0);for(var me=0;me<O;me++)me!==F&&me!==k&&(z[F][me]=Y[me],z[me][F]=Y[me],z[k][me]=ie[me],z[me][k]=ie[me]);return z}function T(z,G,F,k){for(var O=z.length,W=Math.cos(G),X=Math.sin(G),ee=W*W,J=X*X,Y=q(O,0),ie=q(O,0),K=ee*z[F][F]-2*W*X*z[F][k]+J*z[k][k],re=J*z[F][F]+2*W*X*z[F][k]+ee*z[k][k],oe=0;oe<O;oe++)Y[oe]=W*z[F][oe]-X*z[k][oe],ie[oe]=X*z[F][oe]+W*z[k][oe];z[F][F]=K,z[k][k]=re,z[F][k]=0,z[k][F]=0;for(var ce=0;ce<O;ce++)ce!==F&&ce!==k&&(z[F][ce]=Y[ce],z[ce][F]=Y[ce],z[k][ce]=ie[ce],z[ce][k]=ie[ce]);return z}function P(z){for(var G=z.length,F=0,k=[0,1],O=0;O<G;O++)for(var W=O+1;W<G;W++)Math.abs(F)<Math.abs(z[O][W])&&(F=Math.abs(z[O][W]),k=[O,W]);return[k,F]}function I(z){for(var G=z.length,F=0,k=[0,1],O=0;O<G;O++)for(var W=O+1;W<G;W++)u(F)<u(z[O][W])&&(F=u(z[O][W]),k=[O,W]);return[k,F]}function U(z,G){for(var F=z.length,k=Array(F),O=Array(F),W=0;W<F;W++)O[W]=Array(F);for(var X=0;X<F;X++){for(var ee=0,J=z[0],Y=0;Y<z.length;Y++)z[Y]<J&&(ee=Y,J=z[ee]);k[X]=z.splice(ee,1)[0];for(var ie=0;ie<F;ie++)O[ie][X]=G[ie][ee],G[ie].splice(ee,1)}return[Ut(k),Ut(O)]}function q(z,G){for(var F=new Array(z),k=0;k<z;k++)F[k]=G;return F}return g}),F8="expm",txe=["typed","abs","add","identity","inv","multiply"],vN=ye(F8,txe,function(t){var e=t.typed,n=t.abs,r=t.add,a=t.identity,s=t.inv,o=t.multiply;return e(F8,{Matrix:function(p){var d=p.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+mn(d)+")");for(var h=d[0],m=1e-15,v=u(p),g=l(v,m),y=g.q,_=g.j,x=o(p,Math.pow(2,-_)),M=a(h),A=a(h),E=1,N=x,D=-1,C=1;C<=y;C++)C>1&&(N=o(N,x),D=-D),E=E*(y-C+1)/((2*y-C+1)*C),M=r(M,o(E,N)),A=r(A,o(E*D,N));for(var T=o(s(A),M),P=0;P<_;P++)T=o(T,T);return sc(p)?p.createSparseMatrix(T):T}});function u(c){for(var p=c.size()[0],d=0,h=0;h<p;h++){for(var m=0,v=0;v<p;v++)m+=n(c.get([h,v]));d=Math.max(m,d)}return d}function l(c,p){for(var d=30,h=0;h<d;h++)for(var m=0;m<=h;m++){var v=h-m;if(f(c,m,v)<p)return{q:m,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function f(c,p,d){for(var h=1,m=2;m<=p;m++)h*=m;for(var v=h,g=p+1;g<=2*p;g++)v*=g;var y=v*(2*p+1);return 8*Math.pow(c/Math.pow(2,d),2*p)*h*h/(v*y)}}),B8="sqrtm",nxe=["typed","abs","add","multiply","sqrt","subtract","inv","size","max","identity"],gN=ye(B8,nxe,function(t){var e=t.typed,n=t.abs,r=t.add,a=t.multiply,s=t.sqrt,o=t.subtract,u=t.inv,l=t.size,f=t.max,c=t.identity,p=e(B8,{"Array | Matrix":function(g){var y=Dn(g)?g.size():yn(g);switch(y.length){case 1:if(y[0]===1)return s(g);throw new RangeError("Matrix must be square (size: "+mn(y)+")");case 2:{var _=y[0],x=y[1];if(_===x)return m(g);throw new RangeError("Matrix must be square (size: "+mn(y)+")")}}}}),d=1e3,h=1e-6;function m(v){var g,y=0,_=v,x=c(l(v));do{var M=_;if(_=a(.5,r(M,u(x))),x=a(.5,r(x,u(M))),g=f(n(o(_,M))),g>h&&++y>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(g>h);return _}return p}),rxe="divide",ixe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],yN=ye(rxe,ixe,function(t){var e=t.typed,n=t.matrix,r=t.multiply,a=t.equalScalar,s=t.divideScalar,o=t.inv,u=ps({typed:e,equalScalar:a}),l=Jn({typed:e});return e("divide",xM({"Array | Matrix, Array | Matrix":function(c,p){return r(c,o(p))},"DenseMatrix, any":function(c,p){return l(c,p,s,!1)},"SparseMatrix, any":function(c,p){return u(c,p,s,!1)},"Array, any":function(c,p){return l(n(c),p,s,!1).valueOf()},"any, Array | Matrix":function(c,p){return r(c,o(p))}},s.signatures))}),z8="distance",axe=["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],xN=ye(z8,axe,function(t){var e=t.typed,n=t.addScalar,r=t.subtract,a=t.multiplyScalar,s=t.divideScalar,o=t.unaryMinus,u=t.sqrt,l=t.abs;return e(z8,{"Array, Array, Array":function(A,E,N){if(A.length===2&&E.length===2&&N.length===2){if(!c(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var D=s(r(N[1],N[0]),r(E[1],E[0])),C=a(a(D,D),E[0]),T=o(a(D,E[0])),P=A[1];return g(A[0],A[1],C,T,P)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(A,E,N){if(Object.keys(A).length===2&&Object.keys(E).length===2&&Object.keys(N).length===2){if(!c(A))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(N))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in A&&"pointY"in A&&"lineOnePtX"in E&&"lineOnePtY"in E&&"lineTwoPtX"in N&&"lineTwoPtY"in N){var D=s(r(N.lineTwoPtY,N.lineTwoPtX),r(E.lineOnePtY,E.lineOnePtX)),C=a(a(D,D),E.lineOnePtX),T=o(a(D,E.lineOnePtX)),P=A.pointX;return g(A.pointX,A.pointY,C,T,P)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(A,E){if(A.length===2&&E.length===3){if(!c(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!p(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return g(A[0],A[1],E[0],E[1],E[2])}else if(A.length===3&&E.length===6){if(!p(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(E))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return y(A[0],A[1],A[2],E[0],E[1],E[2],E[3],E[4],E[5])}else if(A.length===E.length&&A.length>0){if(!d(A))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(E))throw new TypeError("All values of an array should be numbers or BigNumbers");return _(A,E)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(A,E){if(Object.keys(A).length===2&&Object.keys(E).length===3){if(!c(A))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!p(E))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in A&&"pointY"in A&&"xCoeffLine"in E&&"yCoeffLine"in E&&"constant"in E)return g(A.pointX,A.pointY,E.xCoeffLine,E.yCoeffLine,E.constant);throw new TypeError("Key names do not match")}else if(Object.keys(A).length===3&&Object.keys(E).length===6){if(!p(A))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(E))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in A&&"pointY"in A&&"x0"in E&&"y0"in E&&"z0"in E&&"a"in E&&"b"in E&&"c"in E)return y(A.pointX,A.pointY,A.pointZ,E.x0,E.y0,E.z0,E.a,E.b,E.c);throw new TypeError("Key names do not match")}else if(Object.keys(A).length===2&&Object.keys(E).length===2){if(!c(A))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(E))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in A&&"pointOneY"in A&&"pointTwoX"in E&&"pointTwoY"in E)return _([A.pointOneX,A.pointOneY],[E.pointTwoX,E.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(A).length===3&&Object.keys(E).length===3){if(!p(A))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!p(E))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in A&&"pointOneY"in A&&"pointOneZ"in A&&"pointTwoX"in E&&"pointTwoY"in E&&"pointTwoZ"in E)return _([A.pointOneX,A.pointOneY,A.pointOneZ],[E.pointTwoX,E.pointTwoY,E.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(A){if(!v(A))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return x(A)}});function f(M){return typeof M=="number"||Jt(M)}function c(M){return M.constructor!==Array&&(M=m(M)),f(M[0])&&f(M[1])}function p(M){return M.constructor!==Array&&(M=m(M)),f(M[0])&&f(M[1])&&f(M[2])}function d(M){return Array.isArray(M)||(M=m(M)),M.every(f)}function h(M){return M.constructor!==Array&&(M=m(M)),f(M[0])&&f(M[1])&&f(M[2])&&f(M[3])&&f(M[4])&&f(M[5])}function m(M){for(var A=Object.keys(M),E=[],N=0;N<A.length;N++)E.push(M[A[N]]);return E}function v(M){if(M[0].length===2&&f(M[0][0])&&f(M[0][1])){if(M.some(function(A){return A.length!==2||!f(A[0])||!f(A[1])}))return!1}else if(M[0].length===3&&f(M[0][0])&&f(M[0][1])&&f(M[0][2])){if(M.some(function(A){return A.length!==3||!f(A[0])||!f(A[1])||!f(A[2])}))return!1}else return!1;return!0}function g(M,A,E,N,D){var C=l(n(n(a(E,M),a(N,A)),D)),T=u(n(a(E,E),a(N,N)));return s(C,T)}function y(M,A,E,N,D,C,T,P,I){var U=[r(a(r(D,A),I),a(r(C,E),P)),r(a(r(C,E),T),a(r(N,M),I)),r(a(r(N,M),P),a(r(D,A),T))];U=u(n(n(a(U[0],U[0]),a(U[1],U[1])),a(U[2],U[2])));var q=u(n(n(a(T,T),a(P,P)),a(I,I)));return s(U,q)}function _(M,A){for(var E=M.length,N=0,D=0,C=0;C<E;C++)D=r(M[C],A[C]),N=n(a(D,D),N);return u(N)}function x(M){for(var A=[],E=[],N=[],D=0;D<M.length-1;D++)for(var C=D+1;C<M.length;C++)M[0].length===2?(E=[M[D][0],M[D][1]],N=[M[C][0],M[C][1]]):M[0].length===3&&(E=[M[D][0],M[D][1],M[D][2]],N=[M[C][0],M[C][1],M[C][2]]),A.push(_(E,N));return A}}),sxe="intersect",oxe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar"],bN=ye(sxe,oxe,function(t){var e=t.typed,n=t.config,r=t.abs,a=t.add,s=t.addScalar,o=t.matrix,u=t.multiply,l=t.multiplyScalar,f=t.divideScalar,c=t.subtract,p=t.smaller,d=t.equalScalar,h=e("intersect",{"Array, Array, Array":function(N,D,C){if(!g(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!g(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!y(C))throw new TypeError("Array with 4 numbers expected as third argument");return A(N[0],N[1],N[2],D[0],D[1],D[2],C[0],C[1],C[2],C[3])},"Array, Array, Array, Array":function(N,D,C,T){if(N.length===2){if(!v(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!v(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!v(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!v(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return _(N,D,C,T)}else if(N.length===3){if(!g(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!g(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!g(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!g(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return M(N[0],N[1],N[2],D[0],D[1],D[2],C[0],C[1],C[2],T[0],T[1],T[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")},"Matrix, Matrix, Matrix":function(N,D,C){return o(h(N.valueOf(),D.valueOf(),C.valueOf()))},"Matrix, Matrix, Matrix, Matrix":function(N,D,C,T){return o(h(N.valueOf(),D.valueOf(),C.valueOf(),T.valueOf()))}});function m(E){return typeof E=="number"||Jt(E)}function v(E){return E.length===2&&m(E[0])&&m(E[1])}function g(E){return E.length===3&&m(E[0])&&m(E[1])&&m(E[2])}function y(E){return E.length===4&&m(E[0])&&m(E[1])&&m(E[2])&&m(E[3])}function _(E,N,D,C){var T=E,P=D,I=c(T,N),U=c(P,C),q=c(l(I[0],U[1]),l(U[0],I[1]));if(p(r(q),n.epsilon))return null;var z=l(U[0],T[1]),G=l(U[1],T[0]),F=l(U[0],P[1]),k=l(U[1],P[0]),O=f(s(c(c(z,G),F),k),q);return a(u(I,O),T)}function x(E,N,D,C,T,P,I,U,q,z,G,F){var k=l(c(E,N),c(D,C)),O=l(c(T,P),c(I,U)),W=l(c(q,z),c(G,F));return s(s(k,O),W)}function M(E,N,D,C,T,P,I,U,q,z,G,F){var k=x(E,I,z,I,N,U,G,U,D,q,F,q),O=x(z,I,C,E,G,U,T,N,F,q,P,D),W=x(E,I,C,E,N,U,T,N,D,q,P,D),X=x(z,I,z,I,G,U,G,U,F,q,F,q),ee=x(C,E,C,E,T,N,T,N,P,D,P,D),J=f(c(l(k,O),l(W,X)),c(l(ee,X),l(O,O))),Y=f(s(k,l(J,O)),X),ie=s(E,l(J,c(C,E))),K=s(N,l(J,c(T,N))),re=s(D,l(J,c(P,D))),oe=s(I,l(Y,c(z,I))),ce=s(U,l(Y,c(G,U))),me=s(q,l(Y,c(F,q)));return d(ie,oe)&&d(K,ce)&&d(re,me)?[ie,K,re]:null}function A(E,N,D,C,T,P,I,U,q,z){var G=l(E,I),F=l(C,I),k=l(N,U),O=l(T,U),W=l(D,q),X=l(P,q),ee=f(c(c(c(z,G),k),W),c(c(c(s(s(F,O),X),G),k),W)),J=s(E,l(ee,c(C,E))),Y=s(N,l(ee,c(T,N))),ie=s(D,l(ee,c(P,D)));return[J,Y,ie]}return h}),q8="sum",uxe=["typed","config","add","?bignumber","?fraction"],q1=ye(q8,uxe,function(t){var e=t.typed,n=t.config,r=t.add,a=t.bignumber,s=t.fraction;return e(q8,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":u,"...":function(f){if(I1(f))throw new TypeError("Scalar values expected in function sum");return o(f)}});function o(l){var f;if(yc(l,function(c){try{f=f===void 0?c:r(f,c)}catch(p){throw io(p,"sum",c)}}),f===void 0)switch(n.number){case"number":return 0;case"BigNumber":return a?a(0):JE();case"Fraction":return s?s(0):sU();default:return 0}return f}function u(l,f){try{var c=LM(l,f,r);return c}catch(p){throw io(p,"sum")}}}),G8="mean",lxe=["typed","add","divide"],G1=ye(G8,lxe,function(t){var e=t.typed,n=t.add,r=t.divide;return e(G8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":a,"...":function(u){if(I1(u))throw new TypeError("Scalar values expected in function mean");return s(u)}});function a(o,u){try{var l=LM(o,u,n),f=Array.isArray(o)?yn(o):o.size();return r(l,f[u])}catch(c){throw io(c,"mean")}}function s(o){var u,l=0;if(yc(o,function(f){try{u=u===void 0?f:n(u,f),l++}catch(c){throw io(c,"mean",f)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return r(u,l)}}),H8="median",cxe=["typed","add","divide","compare","partitionSelect"],SN=ye(H8,cxe,function(t){var e=t.typed,n=t.add,r=t.divide,a=t.compare,s=t.partitionSelect,o=e(H8,{"Array | Matrix":u,"Array | Matrix, number | BigNumber":function(p,d){throw new Error("median(A, dim) is not yet supported")},"...":function(p){if(I1(p))throw new TypeError("Scalar values expected in function median");return u(p)}});function u(c){try{c=kn(c.valueOf());var p=c.length;if(p===0)throw new Error("Cannot calculate median of an empty array");if(p%2===0){for(var d=p/2-1,h=s(c,d+1),m=c[d],v=0;v<d;++v)a(c[v],m)>0&&(m=c[v]);return f(m,h)}else{var g=s(c,(p-1)/2);return l(g)}}catch(y){throw io(y,"median")}}var l=e({"number | BigNumber | Complex | Unit":function(p){return p}}),f=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(p,d){return r(n(p,d),2)}});return o}),V8="mad",fxe=["typed","abs","map","median","subtract"],wN=ye(V8,fxe,function(t){var e=t.typed,n=t.abs,r=t.map,a=t.median,s=t.subtract;return e(V8,{"Array | Matrix":o,"...":function(l){return o(l)}});function o(u){if(u=kn(u.valueOf()),u.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=a(u);return a(r(u,function(f){return n(s(f,l))}))}catch(f){throw f instanceof TypeError&&f.message.indexOf("median")!==-1?new TypeError(f.message.replace("median","mad")):io(f,"mad")}}}),wI="unbiased",W8="variance",pxe=["typed","add","subtract","multiply","divide","apply","isNaN"],H1=ye(W8,pxe,function(t){var e=t.typed,n=t.add,r=t.subtract,a=t.multiply,s=t.divide,o=t.apply,u=t.isNaN;return e(W8,{"Array | Matrix":function(p){return l(p,wI)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(p,d){return f(p,d,wI)},"Array | Matrix, number | BigNumber, string":f,"...":function(p){return l(p,wI)}});function l(c,p){var d=0,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(yc(c,function(g){try{d=n(d,g),h++}catch(y){throw io(y,"variance",g)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=s(d,h);if(d=0,yc(c,function(g){var y=r(g,m);d=n(d,a(y,y))}),u(d))return d;switch(p){case"uncorrected":return s(d,h);case"biased":return s(d,h+1);case"unbiased":{var v=Jt(d)?d.mul(0):0;return h===1?v:s(d,h-1)}default:throw new Error('Unknown normalization "'+p+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function f(c,p,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(c,p,function(h){return l(h,d)})}catch(h){throw io(h,"variance")}}}),_N=ye("var",["variance"],function(t){var e=t.variance;return function(){xc('Function "var" has been renamed to "variance" in v6.0.0, please use the new function instead.');for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e.apply(e,r)}}),dxe="quantileSeq",hxe=["typed","add","multiply","partitionSelect","compare"],MN=ye(dxe,hxe,function(t){var e=t.typed,n=t.add,r=t.multiply,a=t.partitionSelect,s=t.compare;function o(f,c,p){var d,h,m;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(Cu(f)){if(p=p||!1,typeof p=="boolean"){if(h=f.valueOf(),pn(c)){if(c<0)throw new Error("N/prob must be non-negative");if(c<=1)return u(h,c,p);if(c>1){if(!Ot(c))throw new Error("N must be a positive integer");var v=c+1;d=new Array(c);for(var g=0;g<c;)d[g]=u(h,++g/v,p);return d}}if(Jt(c)){var y=c.constructor;if(c.isNegative())throw new Error("N/prob must be non-negative");if(m=new y(1),c.lte(m))return new y(u(h,c,p));if(c.gt(m)){if(!c.isInteger())throw new Error("N must be a positive integer");var _=c.toNumber();if(_>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var x=new y(_+1);d=new Array(_);for(var M=0;M<_;)d[M]=new y(u(h,new y(++M).div(x),p));return d}}if(Array.isArray(c)){d=new Array(c.length);for(var A=0;A<d.length;++A){var E=c[A];if(pn(E)){if(E<0||E>1)throw new Error("Probability must be between 0 and 1, inclusive")}else if(Jt(E)){if(m=new E.constructor(1),E.isNegative()||E.gt(m))throw new Error("Probability must be between 0 and 1, inclusive")}else throw new TypeError("Unexpected type of argument in function quantileSeq");d[A]=u(h,E,p)}return d}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}function u(f,c,p){var d=kn(f),h=d.length;if(h===0)throw new Error("Cannot calculate quantile of an empty sequence");if(pn(c)){var m=c*(h-1),v=m%1;if(v===0){var g=p?d[m]:a(d,m);return l(g),g}var y=Math.floor(m),_,x;if(p)_=d[y],x=d[y+1];else{x=a(d,y+1),_=d[y];for(var M=0;M<y;++M)s(d[M],_)>0&&(_=d[M])}return l(_),l(x),n(r(_,1-v),r(x,v))}var A=c.times(h-1);if(A.isInteger()){A=A.toNumber();var E=p?d[A]:a(d,A);return l(E),E}var N=A.floor(),D=A.minus(N),C=N.toNumber(),T,P;if(p)T=d[C],P=d[C+1];else{P=a(d,C+1),T=d[C];for(var I=0;I<C;++I)s(d[I],T)>0&&(T=d[I])}l(T),l(P);var U=new D.constructor(1);return n(r(T,U.minus(D)),r(P,D))}var l=e({"number | BigNumber | Unit":function(c){return c}});return o}),$8="std",mxe=["typed","sqrt","variance"],V1=ye($8,mxe,function(t){var e=t.typed,n=t.sqrt,r=t.variance;return e($8,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(o){return a(o)}});function a(s,o){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{return n(r.apply(null,arguments))}catch(u){throw u instanceof TypeError&&u.message.indexOf(" variance")!==-1?new TypeError(u.message.replace(" variance"," std")):u}}}),j8="combinations",vxe=["typed"],EN=ye(j8,vxe,function(t){var e=t.typed;return e(j8,{"number, number":z$,"BigNumber, BigNumber":function(r,a){var s=r.constructor,o,u,l=r.minus(a),f=new s(1);if(!X8(r)||!X8(a))throw new TypeError("Positive integer value expected in function combinations");if(a.gt(r))throw new TypeError("k must be less than n in function combinations");if(o=f,a.lt(l))for(u=f;u.lte(l);u=u.plus(f))o=o.times(a.plus(u)).dividedBy(u);else for(u=f;u.lte(a);u=u.plus(f))o=o.times(l.plus(u)).dividedBy(u);return o}})});function X8(t){return t.isInteger()&&t.gte(0)}var Y8="combinationsWithRep",gxe=["typed"],TN=ye(Y8,gxe,function(t){var e=t.typed;return e(Y8,{"number, number":function(r,a){if(!Ot(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Ot(a)||a<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(a<r-1){var s=Fo(r,r+a-1);return s/Fo(1,a)}var o=Fo(a+1,r+a-1);return o/Fo(1,r-1)},"BigNumber, BigNumber":function(r,a){var s=r.constructor,o,u,l=new s(1),f=r.minus(l);if(!Q8(r)||!Q8(a))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(o=l,a.lt(f))for(u=l;u.lte(f);u=u.plus(l))o=o.times(a.plus(u)).dividedBy(u);else for(u=l;u.lte(a);u=u.plus(l))o=o.times(f.plus(u)).dividedBy(u);return o}})});function Q8(t){return t.isInteger()&&t.gte(0)}var Z8="gamma",yxe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],AN=ye(Z8,yxe,function(t){var e=t.typed,n=t.config,r=t.multiplyScalar,a=t.pow,s=t.BigNumber,o=t.Complex,u=e(Z8,{number:rU,Complex:function(c){if(c.im===0)return u(c.re);c=new o(c.re-1,c.im);for(var p=new o(Pf[0],0),d=1;d<Pf.length;++d){var h=c.re+d,m=h*h+c.im*c.im;m!==0?(p.re+=Pf[d]*h/m,p.im+=-(Pf[d]*c.im)/m):p.re=Pf[d]<0?-1/0:1/0}var v=new o(c.re+W$+.5,c.im),g=Math.sqrt(2*Math.PI);c.re+=.5;var y=a(v,c);y.im===0?y.re*=g:(y.re===0||(y.re*=g),y.im*=g);var _=Math.exp(-v.re);return v.re=_*Math.cos(-v.im),v.im=_*Math.sin(-v.im),r(r(y,v),p)},BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):l(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(c){return wt(c,u)}});function l(f){if(f<8)return new s([1,1,2,6,24,120,720,5040][f]);var c=n.precision+(Math.log(f.toNumber())|0),p=s.clone({precision:c});if(f%2===1)return f.times(l(new s(f-1)));for(var d=f,h=new p(f),m=f.toNumber();d>2;)d-=2,m+=d,h=h.times(m);return new s(h.toPrecision(s.precision))}return u}),J8="factorial",xxe=["typed","gamma"],NN=ye(J8,xxe,function(t){var e=t.typed,n=t.gamma,r=e(J8,{number:function(s){if(s<0)throw new Error("Value must be non-negative");return n(s+1)},BigNumber:function(s){if(s.isNegative())throw new Error("Value must be non-negative");return n(s.plus(1))},"Array | Matrix":function(s){return wt(s,r)}});return r}),K8="kldivergence",bxe=["typed","matrix","divide","sum","multiply","dotDivide","log","isNumeric"],CN=ye(K8,bxe,function(t){var e=t.typed,n=t.matrix,r=t.divide,a=t.sum,s=t.multiply,o=t.dotDivide,u=t.log,l=t.isNumeric;return e(K8,{"Array, Array":function(p,d){return f(n(p),n(d))},"Matrix, Array":function(p,d){return f(p,n(d))},"Array, Matrix":function(p,d){return f(n(p),d)},"Matrix, Matrix":function(p,d){return f(p,d)}});function f(c,p){var d=p.size().length,h=c.size().length;if(d>1)throw new Error("first object must be one dimensional");if(h>1)throw new Error("second object must be one dimensional");if(d!==h)throw new Error("Length of two vectors must be equal");var m=a(c);if(m===0)throw new Error("Sum of elements in first object must be non zero");var v=a(p);if(v===0)throw new Error("Sum of elements in second object must be non zero");var g=r(c,a(c)),y=r(p,a(p)),_=a(s(g,u(o(g,y))));return l(_)?_:Number.NaN}}),e7="multinomial",Sxe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],DN=ye(e7,Sxe,function(t){var e=t.typed,n=t.add,r=t.divide,a=t.multiply,s=t.factorial,o=t.isInteger,u=t.isPositive;return e(e7,{"Array | Matrix":function(f){var c=0,p=1;return yc(f,function(d){if(!o(d)||!u(d))throw new TypeError("Positive integer value expected in function multinomial");c=n(c,d),p=a(p,s(d))}),r(s(c),p)}})}),t7="permutations",wxe=["typed","factorial"],RN=ye(t7,wxe,function(t){var e=t.typed,n=t.factorial;return e(t7,{"number | BigNumber":n,"number, number":function(a,s){if(!Ot(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(!Ot(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(s>a)throw new TypeError("second argument k must be less than or equal to first argument n");return Fo(a-s+1,a)},"BigNumber, BigNumber":function(a,s){var o,u;if(!n7(a)||!n7(s))throw new TypeError("Positive integer value expected in function permutations");if(s.gt(a))throw new TypeError("second argument k must be less than or equal to first argument n");var l=a.mul(0).add(1);for(o=l,u=a.minus(s).plus(1);u.lte(a);u=u.plus(1))o=o.times(u);return o}})});function n7(t){return t.isInteger()&&t.gte(0)}var pU={exports:{}};pU.exports;(function(t){var e=256,n=6,r=52,a=[],s=typeof RP>"u"?window:RP,o=Math.pow(e,n),u=Math.pow(2,r),l=u*2,f=e-1,c=Math.random;t.exports=function(g,y){if(y&&y.global===!0)return y.global=!1,Math.random=t.exports(g,y),y.global=!0,Math.random;var _=y&&y.entropy||!1,x=[];h(d(_?[g,v(a)]:0 in arguments?g:m(),3),x);var M=new p(x);return h(v(M.S),a),function(){for(var A=M.g(n),E=o,N=0;A<u;)A=(A+N)*e,E*=e,N=M.g(1);for(;A>=l;)A/=2,E/=2,N>>>=1;return(A+N)/E}},t.exports.resetGlobal=function(){Math.random=c};function p(g){var y,_=g.length,x=this,M=0,A=x.i=x.j=0,E=x.S=[];for(_||(g=[_++]);M<e;)E[M]=M++;for(M=0;M<e;M++)E[M]=E[A=f&A+g[M%_]+(y=E[M])],E[A]=y;(x.g=function(N){for(var D,C=0,T=x.i,P=x.j,I=x.S;N--;)D=I[T=f&T+1],C=C*e+I[f&(I[T]=I[P=f&P+D])+(I[P]=D)];return x.i=T,x.j=P,C})(e)}function d(g,y){var _=[],x=(typeof g)[0],M;if(y&&x=="o")for(M in g)try{_.push(d(g[M],y-1))}catch{}return _.length?_:x=="s"?g:g+"\0"}function h(g,y){for(var _=g+"",x,M=0;M<_.length;)y[f&M]=f&(x^=y[f&M]*19)+_.charCodeAt(M++);return v(y)}function m(g){try{return s.crypto.getRandomValues(g=new Uint8Array(e)),v(g)}catch{return[+new Date,s,s.navigator&&s.navigator.plugins,s.screen,v(a)]}}function v(g){return String.fromCharCode.apply(0,g)}h(Math.random(),a)})(pU);var _xe=pU.exports;const wj=Au(_xe);var Mxe=wj();function Am(t){var e;function n(a){e=a===null?Mxe:wj(String(a))}n(t);function r(){return e()}return r}var Exe="pickRandom",Txe=["typed","config","?on"],IN=ye(Exe,Txe,function(t){var e=t.typed,n=t.config,r=t.on,a=Am(n.randomSeed);return r&&r("config",function(o,u){o.randomSeed!==u.randomSeed&&(a=Am(o.randomSeed))}),e({"Array | Matrix":function(u){return s(u)},"Array | Matrix, number":function(u,l){return s(u,l,void 0)},"Array | Matrix, Array":function(u,l){return s(u,void 0,l)},"Array | Matrix, Array | Matrix, number":function(u,l,f){return s(u,f,l)},"Array | Matrix, number, Array | Matrix":function(u,l,f){return s(u,l,f)}});function s(o,u,l){var f=typeof u>"u";if(f&&(u=1),o=o.valueOf(),l&&(l=l.valueOf()),yn(o).length>1)throw new Error("Only one dimensional vectors supported");var c=0;if(typeof l<"u"){if(l.length!==o.length)throw new Error("Weights must have the same length as possibles");for(var p=0,d=l.length;p<d;p++){if(!pn(l[p])||l[p]<0)throw new Error("Weights must be an array of positive numbers");c+=l[p]}}var h=o.length;if(h===0)return[];if(u>=h)return u>1?o:o[0];for(var m=[],v;m.length<u;){if(typeof l>"u")v=o[Math.floor(a()*h)];else for(var g=a()*c,y=0,_=o.length;y<_;y++)if(g-=l[y],g<0){v=o[y];break}m.indexOf(v)===-1&&m.push(v)}return f?m[0]:m}});function dU(t,e){var n=[];if(t=t.slice(0),t.length>1)for(var r=0,a=t.shift();r<a;r++)n.push(dU(t,e));else for(var s=0,o=t.shift();s<o;s++)n.push(e());return n}var r7="random",Axe=["typed","config","?on"],PN=ye(r7,Axe,function(t){var e=t.typed,n=t.config,r=t.on,a=Am(n.randomSeed);return r&&r("config",function(u,l){u.randomSeed!==l.randomSeed&&(a=Am(u.randomSeed))}),e(r7,{"":function(){return o(0,1)},number:function(l){return o(0,l)},"number, number":function(l,f){return o(l,f)},"Array | Matrix":function(l){return s(l,0,1)},"Array | Matrix, number":function(l,f){return s(l,0,f)},"Array | Matrix, number, number":function(l,f,c){return s(l,f,c)}});function s(u,l,f){var c=dU(u.valueOf(),function(){return o(l,f)});return Dn(u)?u.create(c):c}function o(u,l){return u+a()*(l-u)}}),i7="randomInt",Nxe=["typed","config","?on"],ON=ye(i7,Nxe,function(t){var e=t.typed,n=t.config,r=t.on,a=Am(n.randomSeed);return r&&r("config",function(u,l){u.randomSeed!==l.randomSeed&&(a=Am(u.randomSeed))}),e(i7,{"":function(){return o(0,1)},number:function(l){return o(0,l)},"number, number":function(l,f){return o(l,f)},"Array | Matrix":function(l){return s(l,0,1)},"Array | Matrix, number":function(l,f){return s(l,0,f)},"Array | Matrix, number, number":function(l,f,c){return s(l,f,c)}});function s(u,l,f){var c=dU(u.valueOf(),function(){return o(l,f)});return Dn(u)?u.create(c):c}function o(u,l){return Math.floor(u+a()*(l-u))}}),a7="stirlingS2",Cxe=["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","larger"],LN=ye(a7,Cxe,function(t){var e=t.typed,n=t.addScalar,r=t.subtract,a=t.multiplyScalar,s=t.divideScalar,o=t.pow,u=t.factorial,l=t.combinations,f=t.isNegative,c=t.isInteger,p=t.larger;return e(a7,{"number | BigNumber, number | BigNumber":function(h,m){if(!c(h)||f(h)||!c(m)||f(m))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(p(m,h))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var v=u(m),g=0,y=0;y<=m;y++){var _=o(-1,r(m,y)),x=l(m,y),M=o(y,h);g=n(g,a(a(x,M),_))}return s(g,v)}})}),s7="bellNumbers",Dxe=["typed","addScalar","isNegative","isInteger","stirlingS2"],kN=ye(s7,Dxe,function(t){var e=t.typed,n=t.addScalar,r=t.isNegative,a=t.isInteger,s=t.stirlingS2;return e(s7,{"number | BigNumber":function(u){if(!a(u)||r(u))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,f=0;f<=u;f++)l=n(l,s(u,f));return l}})}),o7="catalan",Rxe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],UN=ye(o7,Rxe,function(t){var e=t.typed,n=t.addScalar,r=t.divideScalar,a=t.multiplyScalar,s=t.combinations,o=t.isNegative,u=t.isInteger;return e(o7,{"number | BigNumber":function(f){if(!u(f)||o(f))throw new TypeError("Non-negative integer value expected in function catalan");return r(s(a(f,2),f),n(f,1))}})}),u7="composition",Ixe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],FN=ye(u7,Ixe,function(t){var e=t.typed,n=t.addScalar,r=t.combinations,a=t.isPositive;t.isNegative;var s=t.isInteger,o=t.larger;return e(u7,{"number | BigNumber, number | BigNumber":function(l,f){if(!s(l)||!a(l)||!s(f)||!a(f))throw new TypeError("Positive integer value expected in function composition");if(o(f,l))throw new TypeError("k must be less than or equal to n in function composition");return r(n(l,-1),n(f,-1))}})}),Pxe="simplifyUtil",Oxe=["FunctionNode","OperatorNode","SymbolNode"],_j=ye(Pxe,Oxe,function(t){var e=t.FunctionNode,n=t.OperatorNode,r=t.SymbolNode,a={add:!0,multiply:!0},s={add:!0,multiply:!0};function o(h,m){if(!Gi(h))return!0;var v=h.fn.toString();return m&&Et(m,v)&&Et(m[v],"commutative")?m[v].commutative:a[v]||!1}function u(h,m){if(!Gi(h))return!1;var v=h.fn.toString();return m&&Et(m,v)&&Et(m[v],"associative")?m[v].associative:s[v]||!1}function l(h){if(!h.args||h.args.length===0)return h;h.args=f(h);for(var m=0;m<h.args.length;m++)l(h.args[m])}function f(h){var m,v=[],g=function y(_){for(var x=0;x<_.args.length;x++){var M=_.args[x];Gi(M)&&m===M.op?y(M):v.push(M)}};return u(h)?(m=h.op,g(h),v):h.args}function c(h){if(!(!h.args||h.args.length===0)){for(var m=d(h),v=h.args.length,g=0;g<v;g++)c(h.args[g]);if(v>2&&u(h)){for(var y=h.args.pop();h.args.length>0;)y=m([h.args.pop(),y]);h.args=y.args}}}function p(h){if(!(!h.args||h.args.length===0)){for(var m=d(h),v=h.args.length,g=0;g<v;g++)p(h.args[g]);if(v>2&&u(h)){for(var y=h.args.shift();h.args.length>0;)y=m([y,h.args.shift()]);h.args=y.args}}}function d(h){return Gi(h)?function(m){try{return new n(h.op,h.fn,m,h.implicit)}catch(v){return console.error(v),[]}}:function(m){return new e(new r(h.name),m)}}return{createMakeNodeFunction:d,isCommutative:o,isAssociative:u,flatten:l,allChildren:f,unflattenr:c,unflattenl:p}}),Lxe="simplifyCore",kxe=["equal","isZero","add","subtract","multiply","divide","pow","ConstantNode","OperatorNode","FunctionNode","ParenthesisNode"],Mj=ye(Lxe,kxe,function(t){var e=t.equal,n=t.isZero,r=t.add,a=t.subtract,s=t.multiply,o=t.divide,u=t.pow,l=t.ConstantNode,f=t.OperatorNode,c=t.FunctionNode,p=t.ParenthesisNode,d=new l(0),h=new l(1);function m(v){if(Gi(v)&&v.isUnary()){var g=m(v.args[0]);if(v.op==="+")return g;if(v.op==="-"){if(Gi(g)){if(g.isUnary()&&g.op==="-")return g.args[0];if(g.isBinary()&&g.fn==="subtract")return new f("-","subtract",[g.args[1],g.args[0]])}return new f(v.op,v.fn,[g])}}else if(Gi(v)&&v.isBinary()){var y=m(v.args[0]),_=m(v.args[1]);if(v.op==="+"){if(tr(y)){if(n(y.value))return _;if(tr(_))return new l(r(y.value,_.value))}return tr(_)&&n(_.value)?y:Gi(_)&&_.isUnary()&&_.op==="-"?new f("-","subtract",[y,_.args[0]]):new f(v.op,v.fn,_?[y,_]:[y])}else if(v.op==="-"){if(tr(y)&&_){if(tr(_))return new l(a(y.value,_.value));if(n(y.value))return new f("-","unaryMinus",[_])}if(v.fn==="subtract")return tr(_)&&n(_.value)?y:Gi(_)&&_.isUnary()&&_.op==="-"?m(new f("+","add",[y,_.args[0]])):new f(v.op,v.fn,[y,_])}else if(v.op==="*"){if(tr(y)){if(n(y.value))return d;if(e(y.value,1))return _;if(tr(_))return new l(s(y.value,_.value))}if(tr(_)){if(n(_.value))return d;if(e(_.value,1))return y;if(Gi(y)&&y.isBinary()&&y.op===v.op){var x=y.args[0];if(tr(x)){var M=new l(s(x.value,_.value));return new f(v.op,v.fn,[M,y.args[1]],v.implicit)}}return new f(v.op,v.fn,[_,y],v.implicit)}return new f(v.op,v.fn,[y,_],v.implicit)}else if(v.op==="/"){if(tr(y)){if(n(y.value))return d;if(tr(_)&&(e(_.value,1)||e(_.value,2)||e(_.value,4)))return new l(o(y.value,_.value))}return new f(v.op,v.fn,[y,_])}else if(v.op==="^"){if(tr(_)){if(n(_.value))return h;if(e(_.value,1))return y;if(tr(y))return new l(u(y.value,_.value));if(Gi(y)&&y.isBinary()&&y.op==="^"){var A=y.args[1];if(tr(A))return new f(v.op,v.fn,[y.args[0],new l(s(A.value,_.value))])}}return new f(v.op,v.fn,[y,_])}}else if(sl(v)){var E=m(v.content);return sl(E)||ri(E)||tr(E)?E:new p(E)}else if(yp(v)){var N=v.args.map(m).map(function(D){return sl(D)?D.content:D});return new c(m(v.fn),N)}return v}return m}),Uxe="simplifyConstant",Fxe=["typed","config","mathWithTransform","?fraction","?bignumber","ConstantNode","OperatorNode","FunctionNode","SymbolNode"],Ej=ye(Uxe,Fxe,function(t){var e=t.typed,n=t.config,r=t.mathWithTransform,a=t.fraction,s=t.bignumber,o=t.ConstantNode,u=t.OperatorNode,l=t.FunctionNode,f=t.SymbolNode,c=_j({FunctionNode:l,OperatorNode:u,SymbolNode:f}),p=c.isCommutative,d=c.isAssociative,h=c.allChildren,m=c.createMakeNodeFunction;function v(D,C){var T=N(D,C);return Cn(T)?T:y(T)}function g(D,C,T){try{return x(r[D].apply(null,C),T)}catch{return C=C.map(function(I){return kc(I)?I.valueOf():I}),x(r[D].apply(null,C),T)}}var y=e({Fraction:A,number:function(C){return C<0?M(new o(-C)):new o(C)},BigNumber:function(C){return C<0?M(new o(-C)):new o(C)},Complex:function(C){throw new Error("Cannot convert Complex number to Node")}});function _(D,C){var T=C&&C.exactFractions!==!1;if(T&&isFinite(D)&&a){var P=a(D);if(P.valueOf()===D)return P}return D}var x=e({"string, Object":function(C,T){if(n.number==="BigNumber")return s===void 0&&JE(),s(C);if(n.number==="Fraction")return a===void 0&&sU(),a(C);var P=parseFloat(C);return _(P,T)},"Fraction, Object":function(C,T){return C},"BigNumber, Object":function(C,T){return C},"number, Object":function(C,T){return _(C,T)},"Complex, Object":function(C,T){return C.im!==0?C:_(C.re,T)}});function M(D){return new u("-","unaryMinus",[D])}function A(D){var C,T=D.s*D.n;return T<0?C=new u("-","unaryMinus",[new o(-T)]):C=new o(T),D.d===1?C:new u("/","divide",[C,new o(D.d)])}function E(D,C,T,P){return C.reduce(function(I,U){if(!Cn(I)&&!Cn(U)){try{return g(D,[I,U],P)}catch{}I=y(I),U=y(U)}else Cn(I)?Cn(U)||(U=y(U)):I=y(I);return T([I,U])})}function N(D,C){switch(D.type){case"SymbolNode":return D;case"ConstantNode":return typeof D.value=="number"||!isNaN(D.value)?x(D.value,C):D;case"FunctionNode":if(r[D.name]&&r[D.name].rawArgs)return D;{var T=["add","multiply"];if(T.indexOf(D.name)===-1){var P=D.args.map(function(O){return N(O,C)});if(!P.some(Cn))try{return g(D.name,P,C)}catch{}return P=P.map(function(O){return Cn(O)?O:y(O)}),new l(D.name,P)}}case"OperatorNode":{var I=D.fn.toString(),U,q,z=m(D);if(Gi(D)&&D.isUnary())U=[N(D.args[0],C)],Cn(U[0])?q=z(U):q=g(I,U,C);else if(d(D))if(U=h(D),U=U.map(function(O){return N(O,C)}),p(I)){for(var G=[],F=[],k=0;k<U.length;k++)Cn(U[k])?F.push(U[k]):G.push(U[k]);G.length>1?(q=E(I,G,z,C),F.unshift(q),q=E(I,F,z,C)):q=E(I,U,z,C)}else q=E(I,U,z,C);else U=D.args.map(function(O){return N(O,C)}),q=E(I,U,z,C);return q}case"ParenthesisNode":return N(D.content,C);case"AccessorNode":case"ArrayNode":case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"IndexNode":case"ObjectNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(D.type))}}return v}),Bxe="resolve",zxe=["parse","FunctionNode","OperatorNode","ParenthesisNode"],qxe=ye(Bxe,zxe,function(t){var e=t.parse,n=t.FunctionNode,r=t.OperatorNode,a=t.ParenthesisNode;function s(o,u){if(!u)return o;if(ri(o)){var l=u[o.name];if(Cn(l))return s(l,u);if(typeof l=="number")return e(String(l))}else if(Gi(o)){var f=o.args.map(function(p){return s(p,u)});return new r(o.op,o.fn,f,o.implicit)}else{if(sl(o))return new a(s(o.content,u));if(yp(o)){var c=o.args.map(function(p){return s(p,u)});return new n(o.name,c)}}return o}return s});function g2(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g2=function(n){return typeof n}:g2=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},g2(t)}var Gxe="simplify",Hxe=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","?fraction","?bignumber","mathWithTransform","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],BN=ye(Gxe,Hxe,function(t){var e=t.config,n=t.typed,r=t.parse,a=t.add,s=t.subtract,o=t.multiply,u=t.divide,l=t.pow,f=t.isZero,c=t.equal,p=t.fraction,d=t.bignumber,h=t.mathWithTransform,m=t.ConstantNode,v=t.FunctionNode,g=t.OperatorNode,y=t.ParenthesisNode,_=t.SymbolNode,x=Ej({typed:n,config:e,mathWithTransform:h,fraction:p,bignumber:d,ConstantNode:m,OperatorNode:g,FunctionNode:v,SymbolNode:_}),M=Mj({equal:c,isZero:f,add:a,subtract:s,multiply:o,divide:u,pow:l,ConstantNode:m,OperatorNode:g,FunctionNode:v,ParenthesisNode:y}),A=qxe({parse:r,FunctionNode:v,OperatorNode:g,ParenthesisNode:y}),E=_j({FunctionNode:v,OperatorNode:g,SymbolNode:_}),N=E.isCommutative,D=E.isAssociative,C=E.flatten,T=E.unflattenr,P=E.unflattenl,I=E.createMakeNodeFunction,U=n("simplify",{string:function(re){return U(r(re),U.rules,{},{})},"string, Object":function(re,oe){return U(r(re),U.rules,oe,{})},"string, Object, Object":function(re,oe,ce){return U(r(re),U.rules,oe,ce)},"string, Array":function(re,oe){return U(r(re),oe,{},{})},"string, Array, Object":function(re,oe,ce){return U(r(re),oe,ce,{})},"string, Array, Object, Object":function(re,oe,ce,me){return U(r(re),oe,ce,me)},"Node, Object":function(re,oe){return U(re,U.rules,oe,{})},"Node, Object, Object":function(re,oe,ce){return U(re,U.rules,oe,ce)},Node:function(re){return U(re,U.rules,{},{})},"Node, Array":function(re,oe){return U(re,oe,{},{})},"Node, Array, Object":function(re,oe,ce){return U(re,oe,ce,{})},"Node, Array, Object, Object":function(re,oe,ce,me){oe=G(oe);var Se=A(re,ce);Se=q(Se);for(var le={},Q=Se.toString({parenthesis:"all"});!le[Q];){le[Q]=!0,F=0;for(var Ee=0;Ee<oe.length;Ee++)typeof oe[Ee]=="function"?Se=oe[Ee](Se,me):(C(Se),Se=O(Se,oe[Ee])),P(Se);Q=Se.toString({parenthesis:"all"})}return Se}});U.simplifyCore=M,U.resolve=A;function q(K){return K.transform(function(re,oe,ce){return sl(re)?q(re.content):re})}var z={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};U.rules=[M,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},x,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"},{l:"n1/(n2/n3)",r:"(n1*n3)/n2"}];function G(K){for(var re=[],oe=0;oe<K.length;oe++){var ce=K[oe],me=void 0,Se=g2(ce);switch(Se){case"string":{var le=ce.split("->");if(le.length===2)ce={l:le[0],r:le[1]};else throw SyntaxError("Could not parse rule: "+ce)}case"object":if(me={l:q(r(ce.l)),r:q(r(ce.r))},ce.context&&(me.evaluate=ce.context),ce.evaluate&&(me.evaluate=r(ce.evaluate)),D(me.l)){var Q=I(me.l),Ee=k();me.expanded={},me.expanded.l=Q([me.l.clone(),Ee]),C(me.expanded.l),T(me.expanded.l),me.expanded.r=Q([me.r,Ee])}break;case"function":me=ce;break;default:throw TypeError("Unsupported type of rule: "+Se)}re.push(me)}return re}var F=0;function k(){return new _("_p"+F++)}var O=n("applyRule",{"Node, Object":function(re,oe){var ce=re;if(ce instanceof g||ce instanceof v){if(ce.args)for(var me=0;me<ce.args.length;me++)ce.args[me]=O(ce.args[me],oe)}else ce instanceof y&&ce.content&&(ce.content=O(ce.content,oe));var Se=oe.r,le=Y(oe.l,ce)[0];if(!le&&oe.expanded&&(Se=oe.expanded.r,le=Y(oe.expanded.l,ce)[0]),le){var Q=ce.implicit;ce=Se.clone(),Q&&"implicit"in Se&&(ce.implicit=!0),ce=ce.transform(function(Ee){return Ee.isSymbolNode&&Et(le.placeholders,Ee.name)?le.placeholders[Ee.name].clone():Ee})}return ce}});function W(K,re){var oe=[],ce,me,Se=I(K);if(N(K,re))for(var le=0;le<K.args.length;le++)me=K.args.slice(0),me.splice(le,1),ce=me.length===1?me[0]:Se(me),oe.push(Se([K.args[le],ce]));else me=K.args.slice(1),ce=me.length===1?me[0]:Se(me),oe.push(Se([K.args[0],ce]));return oe}function X(K,re){var oe={placeholders:{}};if(!K.placeholders&&!re.placeholders)return oe;if(K.placeholders){if(!re.placeholders)return K}else return re;for(var ce in K.placeholders)if(oe.placeholders[ce]=K.placeholders[ce],Et(re.placeholders,ce)&&!ie(K.placeholders[ce],re.placeholders[ce]))return null;for(var me in re.placeholders)oe.placeholders[me]=re.placeholders[me];return oe}function ee(K,re){var oe=[];if(K.length===0||re.length===0)return oe;for(var ce,me=0;me<K.length;me++)for(var Se=0;Se<re.length;Se++)ce=X(K[me],re[Se]),ce&&oe.push(ce);return oe}function J(K){if(K.length===0)return K;for(var re=K.reduce(ee),oe=[],ce={},me=0;me<re.length;me++){var Se=JSON.stringify(re[me]);ce[Se]||(ce[Se]=!0,oe.push(re[me]))}return oe}function Y(K,re,oe){var ce=[{placeholders:{}}];if(K instanceof g&&re instanceof g||K instanceof v&&re instanceof v){if(K instanceof g){if(K.op!==re.op||K.fn!==re.fn)return[]}else if(K instanceof v&&K.name!==re.name)return[];if(re.args.length===1&&K.args.length===1||!D(re)||oe){for(var me=[],Se=0;Se<K.args.length;Se++){var le=Y(K.args[Se],re.args[Se]);if(le.length===0)return[];me.push(le)}ce=J(me)}else if(re.args.length>=2&&K.args.length===2){for(var Q=W(re,K.context),Ee=[],ne=0;ne<Q.length;ne++){var se=Y(K,Q[ne],!0);Ee=Ee.concat(se)}return Ee}else{if(K.args.length>2)throw Error("Unexpected non-binary associative function: "+K.toString());return[]}}else if(K instanceof _){if(K.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(z[K.name]){if(K.name!==re.name)return[]}else if(K.name[0]==="n"||K.name.substring(0,2)==="_p")ce[0].placeholders[K.name]=re;else if(K.name[0]==="v")if(!tr(re))ce[0].placeholders[K.name]=re;else return[];else if(K.name[0]==="c")if(re instanceof m)ce[0].placeholders[K.name]=re;else return[];else throw new Error("Invalid symbol in rule: "+K.name)}else if(K instanceof m){if(!c(K.value,re.value))return[]}else return[];return ce}function ie(K,re){if(K instanceof m&&re instanceof m){if(!c(K.value,re.value))return!1}else if(K instanceof _&&re instanceof _){if(K.name!==re.name)return!1}else if(K instanceof g&&re instanceof g||K instanceof v&&re instanceof v){if(K instanceof g){if(K.op!==re.op||K.fn!==re.fn)return!1}else if(K instanceof v&&K.name!==re.name)return!1;if(K.args.length!==re.args.length)return!1;for(var oe=0;oe<K.args.length;oe++)if(!ie(K.args[oe],re.args[oe]))return!1}else return!1;return!0}return U}),Vxe="derivative",Wxe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],zN=ye(Vxe,Wxe,function(t){var e=t.typed,n=t.config,r=t.parse,a=t.simplify,s=t.equal,o=t.isZero,u=t.numeric,l=t.ConstantNode,f=t.FunctionNode,c=t.OperatorNode,p=t.ParenthesisNode,d=t.SymbolNode,h=e("derivative",{"Node, SymbolNode, Object":function(M,A,E){var N={};v(N,M,A.name);var D=g(M,N);return E.simplify?a(D):D},"Node, SymbolNode":function(M,A){return h(M,A,{simplify:!0})},"string, SymbolNode":function(M,A){return h(r(M),A)},"string, SymbolNode, Object":function(M,A,E){return h(r(M),A,E)},"string, string":function(M,A){return h(r(M),r(A))},"string, string, Object":function(M,A,E){return h(r(M),r(A),E)},"Node, string":function(M,A){return h(M,r(A))},"Node, string, Object":function(M,A,E){return h(M,r(A),E)}});h._simplify=!0,h.toTex=function(x){return m.apply(null,x.args)};var m=e("_derivTex",{"Node, SymbolNode":function(M,A){return tr(M)&&ur(M.value)==="string"?m(r(M.value).toString(),A.toString(),1):m(M.toString(),A.toString(),1)},"Node, ConstantNode":function(M,A){if(ur(A.value)==="string")return m(M,r(A.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(M,A,E){return m(M.toString(),A.name,E.value)},"string, string, number":function(M,A,E){var N;return E===1?N="{d\\over d"+A+"}":N="{d^{"+E+"}\\over d"+A+"^{"+E+"}}",N+"\\left[".concat(M,"\\right]")}}),v=e("constTag",{"Object, ConstantNode, string":function(M,A){return M[A]=!0,!0},"Object, SymbolNode, string":function(M,A,E){return A.name!==E?(M[A]=!0,!0):!1},"Object, ParenthesisNode, string":function(M,A,E){return v(M,A.content,E)},"Object, FunctionAssignmentNode, string":function(M,A,E){return A.params.indexOf(E)===-1?(M[A]=!0,!0):v(M,A.expr,E)},"Object, FunctionNode | OperatorNode, string":function(M,A,E){if(A.args.length>0){for(var N=v(M,A.args[0],E),D=1;D<A.args.length;++D)N=v(M,A.args[D],E)&&N;if(N)return M[A]=!0,!0}return!1}}),g=e("_derivative",{"ConstantNode, Object":function(M){return _(0)},"SymbolNode, Object":function(M,A){return A[M]!==void 0?_(0):_(1)},"ParenthesisNode, Object":function(M,A){return new p(g(M.content,A))},"FunctionAssignmentNode, Object":function(M,A){return A[M]!==void 0?_(0):g(M.expr,A)},"FunctionNode, Object":function(M,A){if(M.args.length!==1&&y(M),A[M]!==void 0)return _(0);var E=M.args[0],N,D=!1,C=!1,T;switch(M.name){case"cbrt":D=!0,T=new c("*","multiply",[_(3),new c("^","pow",[E,new c("/","divide",[_(2),_(3)])])]);break;case"sqrt":case"nthRoot":if(M.args.length===1)D=!0,T=new c("*","multiply",[_(2),new f("sqrt",[E])]);else if(M.args.length===2)return N=new c("/","divide",[_(1),M.args[1]]),A[N]=A[M.args[1]],g(new c("^","pow",[E,N]),A);break;case"log10":N=_(10);case"log":if(!N&&M.args.length===1)T=E.clone(),D=!0;else if(M.args.length===1&&N||M.args.length===2&&A[M.args[1]]!==void 0)T=new c("*","multiply",[E.clone(),new f("log",[N||M.args[1]])]),D=!0;else if(M.args.length===2)return g(new c("/","divide",[new f("log",[E]),new f("log",[M.args[1]])]),A);break;case"pow":return A[N]=A[M.args[1]],g(new c("^","pow",[E,M.args[1]]),A);case"exp":T=new f("exp",[E.clone()]);break;case"sin":T=new f("cos",[E.clone()]);break;case"cos":T=new c("-","unaryMinus",[new f("sin",[E.clone()])]);break;case"tan":T=new c("^","pow",[new f("sec",[E.clone()]),_(2)]);break;case"sec":T=new c("*","multiply",[M,new f("tan",[E.clone()])]);break;case"csc":C=!0,T=new c("*","multiply",[M,new f("cot",[E.clone()])]);break;case"cot":C=!0,T=new c("^","pow",[new f("csc",[E.clone()]),_(2)]);break;case"asin":D=!0,T=new f("sqrt",[new c("-","subtract",[_(1),new c("^","pow",[E.clone(),_(2)])])]);break;case"acos":D=!0,C=!0,T=new f("sqrt",[new c("-","subtract",[_(1),new c("^","pow",[E.clone(),_(2)])])]);break;case"atan":D=!0,T=new c("+","add",[new c("^","pow",[E.clone(),_(2)]),_(1)]);break;case"asec":D=!0,T=new c("*","multiply",[new f("abs",[E.clone()]),new f("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),_(2)]),_(1)])])]);break;case"acsc":D=!0,C=!0,T=new c("*","multiply",[new f("abs",[E.clone()]),new f("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),_(2)]),_(1)])])]);break;case"acot":D=!0,C=!0,T=new c("+","add",[new c("^","pow",[E.clone(),_(2)]),_(1)]);break;case"sinh":T=new f("cosh",[E.clone()]);break;case"cosh":T=new f("sinh",[E.clone()]);break;case"tanh":T=new c("^","pow",[new f("sech",[E.clone()]),_(2)]);break;case"sech":C=!0,T=new c("*","multiply",[M,new f("tanh",[E.clone()])]);break;case"csch":C=!0,T=new c("*","multiply",[M,new f("coth",[E.clone()])]);break;case"coth":C=!0,T=new c("^","pow",[new f("csch",[E.clone()]),_(2)]);break;case"asinh":D=!0,T=new f("sqrt",[new c("+","add",[new c("^","pow",[E.clone(),_(2)]),_(1)])]);break;case"acosh":D=!0,T=new f("sqrt",[new c("-","subtract",[new c("^","pow",[E.clone(),_(2)]),_(1)])]);break;case"atanh":D=!0,T=new c("-","subtract",[_(1),new c("^","pow",[E.clone(),_(2)])]);break;case"asech":D=!0,C=!0,T=new c("*","multiply",[E.clone(),new f("sqrt",[new c("-","subtract",[_(1),new c("^","pow",[E.clone(),_(2)])])])]);break;case"acsch":D=!0,C=!0,T=new c("*","multiply",[new f("abs",[E.clone()]),new f("sqrt",[new c("+","add",[new c("^","pow",[E.clone(),_(2)]),_(1)])])]);break;case"acoth":D=!0,C=!0,T=new c("-","subtract",[_(1),new c("^","pow",[E.clone(),_(2)])]);break;case"abs":T=new c("/","divide",[new f(new d("abs"),[E.clone()]),E.clone()]);break;case"gamma":default:throw new Error('Function "'+M.name+'" is not supported by derivative, or a wrong number of arguments is passed')}var P,I;D?(P="/",I="divide"):(P="*",I="multiply");var U=g(E,A);return C&&(U=new c("-","unaryMinus",[U])),new c(P,I,[U,T])},"OperatorNode, Object":function(M,A){if(A[M]!==void 0)return _(0);if(M.op==="+")return new c(M.op,M.fn,M.args.map(function(z){return g(z,A)}));if(M.op==="-"){if(M.isUnary())return new c(M.op,M.fn,[g(M.args[0],A)]);if(M.isBinary())return new c(M.op,M.fn,[g(M.args[0],A),g(M.args[1],A)])}if(M.op==="*"){var E=M.args.filter(function(z){return A[z]!==void 0});if(E.length>0){var N=M.args.filter(function(z){return A[z]===void 0}),D=N.length===1?N[0]:new c("*","multiply",N),C=E.concat(g(D,A));return new c("*","multiply",C)}return new c("+","add",M.args.map(function(z){return new c("*","multiply",M.args.map(function(G){return G===z?g(G,A):G.clone()}))}))}if(M.op==="/"&&M.isBinary()){var T=M.args[0],P=M.args[1];return A[P]!==void 0?new c("/","divide",[g(T,A),P]):A[T]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[T]),new c("/","divide",[g(P,A),new c("^","pow",[P.clone(),_(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[g(T,A),P.clone()]),new c("*","multiply",[T.clone(),g(P,A)])]),new c("^","pow",[P.clone(),_(2)])])}if(M.op==="^"&&M.isBinary()){var I=M.args[0],U=M.args[1];if(A[I]!==void 0)return tr(I)&&(o(I.value)||s(I.value,1))?_(0):new c("*","multiply",[M,new c("*","multiply",[new f("log",[I.clone()]),g(U.clone(),A)])]);if(A[U]!==void 0){if(tr(U)){if(o(U.value))return _(0);if(s(U.value,1))return g(I,A)}var q=new c("^","pow",[I.clone(),new c("-","subtract",[U,_(1)])]);return new c("*","multiply",[U.clone(),new c("*","multiply",[g(I,A),q])])}return new c("*","multiply",[new c("^","pow",[I.clone(),U.clone()]),new c("+","add",[new c("*","multiply",[g(I,A),new c("/","divide",[U.clone(),I.clone()])]),new c("*","multiply",[g(U,A),new f("log",[I.clone()])])])])}throw new Error('Operator "'+M.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function y(x){if(!((x.name==="log"||x.name==="nthRoot"||x.name==="pow")&&x.args.length===2)){for(var M=0;M<x.args.length;++M)x.args[M]=_(0);throw x.compile().evaluate(),new Error("Expected TypeError, but none found")}}function _(x,M){return new l(u(x,n.number))}return h}),l7="rationalize",$xe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplify","?bignumber","?fraction","mathWithTransform","ConstantNode","OperatorNode","FunctionNode","SymbolNode","ParenthesisNode"],qN=ye(l7,$xe,function(t){var e=t.config,n=t.typed,r=t.equal,a=t.isZero,s=t.add,o=t.subtract,u=t.multiply,l=t.divide,f=t.pow,c=t.parse,p=t.simplify,d=t.fraction,h=t.bignumber,m=t.mathWithTransform,v=t.ConstantNode,g=t.OperatorNode,y=t.FunctionNode,_=t.SymbolNode,x=t.ParenthesisNode,M=Ej({typed:n,config:e,mathWithTransform:m,fraction:d,bignumber:h,ConstantNode:v,OperatorNode:g,FunctionNode:y,SymbolNode:_}),A=Mj({equal:r,isZero:a,add:s,subtract:o,multiply:u,divide:l,pow:f,ConstantNode:v,OperatorNode:g,FunctionNode:y,ParenthesisNode:x}),E=n(l7,{string:function(I){return E(c(I),{},!1)},"string, boolean":function(I,U){return E(c(I),{},U)},"string, Object":function(I,U){return E(c(I),U,!1)},"string, Object, boolean":function(I,U,q){return E(c(I),U,q)},Node:function(I){return E(I,{},!1)},"Node, boolean":function(I,U){return E(I,{},U)},"Node, Object":function(I,U){return E(I,U,!1)},"Node, Object, boolean":function(I,U,q){var z=D(),G=N(I,U,!0,z.firstRules),F=G.variables.length;if(I=G.expression,F>=1){I=C(I);var k,O,W=!0,X=!1;I=p(I,z.firstRules,{},{exactFractions:!1});for(var ee;O=W?z.distrDivRules:z.sucDivRules,I=p(I,O),W=!W,ee=I.toString(),ee!==k;)X=!0,k=ee;X&&(I=p(I,z.firstRulesAgain,{},{exactFractions:!1})),I=p(I,z.finalRules,{},{exactFractions:!1})}var J=[],Y={};return I.type==="OperatorNode"&&I.isBinary()&&I.op==="/"?(F===1&&(I.args[0]=T(I.args[0],J),I.args[1]=T(I.args[1])),q&&(Y.numerator=I.args[0],Y.denominator=I.args[1])):(F===1&&(I=T(I,J)),q&&(Y.numerator=I,Y.denominator=null)),q?(Y.coefficients=J,Y.variables=G.variables,Y.expression=I,Y):I}});function N(P,I,U,q){var z=[],G=p(P,q,I,{exactFractions:!1});U=!!U;var F="+-*"+(U?"/":"");O(G);var k={};return k.expression=G,k.variables=z,k;function O(W){var X=W.type;if(X==="FunctionNode")throw new Error("There is an unsolved function call");if(X==="OperatorNode")if(W.op==="^"){if(W.args[1].type!=="ConstantNode"||!Ot(parseFloat(W.args[1].value)))throw new Error("There is a non-integer exponent");O(W.args[0])}else{if(F.indexOf(W.op)===-1)throw new Error("Operator "+W.op+" invalid in polynomial expression");for(var ee=0;ee<W.args.length;ee++)O(W.args[ee])}else if(X==="SymbolNode"){var J=W.name,Y=z.indexOf(J);Y===-1&&z.push(J)}else if(X==="ParenthesisNode")O(W.content);else if(X!=="ConstantNode")throw new Error("type "+X+" is not allowed in polynomial expression")}}function D(){var P=[A,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},M,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],I=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],U=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],q=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],z={};return z.firstRules=P.concat(I,q),z.distrDivRules=U,z.sucDivRules=q,z.firstRulesAgain=P.concat(I),z.finalRules=[A,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},M,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],z}function C(P,I,U){var q=P.type,z=arguments.length>1;if(q==="OperatorNode"&&P.isBinary()){var G=!1,F;if(P.op==="^"&&(P.args[0].type==="ParenthesisNode"||P.args[0].type==="OperatorNode")&&P.args[1].type==="ConstantNode"&&(F=parseFloat(P.args[1].value),G=F>=2&&Ot(F)),G){if(F>2){var k=P.args[0],O=new g("^","pow",[P.args[0].cloneDeep(),new v(F-1)]);P=new g("*","multiply",[k,O])}else P=new g("*","multiply",[P.args[0],P.args[0].cloneDeep()]);z&&(U==="content"?I.content=P:I.args[U]=P)}}if(q==="ParenthesisNode")C(P.content,P,"content");else if(q!=="ConstantNode"&&q!=="SymbolNode")for(var W=0;W<P.args.length;W++)C(P.args[W],P,W);if(!z)return P}function T(P,I){I===void 0&&(I=[]),I[0]=0;var U={};U.cte=1,U.oper="+",U.fire="";var q=0,z="";J(P,null,U),q=I.length-1;for(var G=!0,F,k=q;k>=0;k--)if(I[k]!==0){var O=new v(G?I[k]:Math.abs(I[k])),W=I[k]<0?"-":"+";if(k>0){var X=new _(z);if(k>1){var ee=new v(k);X=new g("^","pow",[X,ee])}I[k]===-1&&G?O=new g("-","unaryMinus",[X]):Math.abs(I[k])===1?O=X:O=new g("*","multiply",[O,X])}G?F=O:W==="+"?F=new g("+","add",[F,O]):F=new g("-","subtract",[F,O]),G=!1}if(G)return new v(0);return F;function J(Y,ie,K){var re=Y.type;if(re==="FunctionNode")throw new Error("There is an unsolved function call");if(re==="OperatorNode"){if("+-*^".indexOf(Y.op)===-1)throw new Error("Operator "+Y.op+" invalid");if(ie!==null){if((Y.fn==="unaryMinus"||Y.fn==="pow")&&ie.fn!=="add"&&ie.fn!=="subtract"&&ie.fn!=="multiply")throw new Error("Invalid "+Y.op+" placing");if((Y.fn==="subtract"||Y.fn==="add"||Y.fn==="multiply")&&ie.fn!=="add"&&ie.fn!=="subtract")throw new Error("Invalid "+Y.op+" placing");if((Y.fn==="subtract"||Y.fn==="add"||Y.fn==="unaryMinus")&&K.noFil!==0)throw new Error("Invalid "+Y.op+" placing")}(Y.op==="^"||Y.op==="*")&&(K.fire=Y.op);for(var oe=0;oe<Y.args.length;oe++)Y.fn==="unaryMinus"&&(K.oper="-"),(Y.op==="+"||Y.fn==="subtract")&&(K.fire="",K.cte=1,K.oper=oe===0?"+":Y.op),K.noFil=oe,J(Y.args[oe],Y,K)}else if(re==="SymbolNode"){if(Y.name!==z&&z!=="")throw new Error("There is more than one variable");if(z=Y.name,ie===null){I[1]=1;return}if(ie.op==="^"&&K.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ie.op==="*"&&K.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(K.fire===""||K.fire==="*")&&(q<1&&(I[1]=0),I[1]+=K.cte*(K.oper==="+"?1:-1),q=Math.max(1,q))}else if(re==="ConstantNode"){var ce=parseFloat(Y.value);if(ie===null){I[0]=ce;return}if(ie.op==="^"){if(K.noFil!==1)throw new Error("Constant cannot be powered");if(!Ot(ce)||ce<=0)throw new Error("Non-integer exponent is not allowed");for(var me=q+1;me<ce;me++)I[me]=0;ce>q&&(I[ce]=0),I[ce]+=K.cte*(K.oper==="+"?1:-1),q=Math.max(ce,q);return}K.cte=ce,K.fire===""&&(I[0]+=K.cte*(K.oper==="+"?1:-1))}else throw new Error("Type "+re+" is not allowed")}}return E}),jxe="reviver",Xxe=["classes"],GN=ye(jxe,Xxe,function(t){var e=t.classes;return function(r,a){var s=e[a&&a.mathjs];return s&&typeof s.fromJSON=="function"?s.fromJSON(a):a}}),Yxe="replacer",Qxe=[],HN=ye(Yxe,Qxe,function(){return function(e,n){return typeof n=="number"&&(!isFinite(n)||isNaN(n))?{mathjs:"number",value:String(n)}:n}}),Zxe="6.6.5",VN=ye("true",[],function(){return!0}),WN=ye("false",[],function(){return!1}),$N=ye("null",[],function(){return null}),jN=vo("Infinity",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?new n(1/0):1/0}),XN=vo("NaN",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?new n(NaN):NaN}),YN=vo("pi",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?fU(n):afe}),QN=vo("tau",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?Uhe(n):sfe}),ZN=vo("e",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?Lhe(n):ofe}),JN=vo("phi",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?khe(n):ufe}),KN=vo("LN2",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?new n(2).ln():Math.LN2}),eC=vo("LN10",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?new n(10).ln():Math.LN10}),tC=vo("LOG2E",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?new n(1).div(new n(2).ln()):Math.LOG2E}),nC=vo("LOG10E",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?new n(1).div(new n(10).ln()):Math.LOG10E}),rC=vo("SQRT1_2",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?new n("0.5").sqrt():Math.SQRT1_2}),iC=vo("SQRT2",["config","?BigNumber"],function(t){var e=t.config,n=t.BigNumber;return e.number==="BigNumber"?new n(2).sqrt():Math.SQRT2}),aC=vo("i",["Complex"],function(t){var e=t.Complex;return e.I}),hU=ye("PI",["pi"],function(t){var e=t.pi;return e}),mU=ye("E",["e"],function(t){var e=t.e;return e}),sC=ye("version",[],function(){return Zxe});function vo(t,e,n){return ye(t,e,n,{recreateOnConfigChange:!0})}var oC=tn("speedOfLight","299792458","m s^-1"),uC=tn("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),lC=tn("planckConstant","6.62607015e-34","J s"),cC=tn("reducedPlanckConstant","1.0545718176461565e-34","J s"),fC=tn("magneticConstant","1.25663706212e-6","N A^-2"),pC=tn("electricConstant","8.8541878128e-12","F m^-1"),dC=tn("vacuumImpedance","376.730313667","ohm"),hC=tn("coulomb","8.987551792261171e9","N m^2 C^-2"),mC=tn("elementaryCharge","1.602176634e-19","C"),vC=tn("bohrMagneton","9.2740100783e-24","J T^-1"),gC=tn("conductanceQuantum","7.748091729863649e-5","S"),yC=tn("inverseConductanceQuantum","12906.403729652257","ohm"),xC=tn("magneticFluxQuantum","2.0678338484619295e-15","Wb"),bC=tn("nuclearMagneton","5.0507837461e-27","J T^-1"),SC=tn("klitzing","25812.807459304513","ohm"),wC=tn("bohrRadius","5.29177210903e-11","m"),_C=tn("classicalElectronRadius","2.8179403262e-15","m"),MC=tn("electronMass","9.1093837015e-31","kg"),EC=tn("fermiCoupling","1.1663787e-5","GeV^-2"),TC=r3("fineStructure",.0072973525693),AC=tn("hartreeEnergy","4.3597447222071e-18","J"),NC=tn("protonMass","1.67262192369e-27","kg"),CC=tn("deuteronMass","3.3435830926e-27","kg"),DC=tn("neutronMass","1.6749271613e-27","kg"),RC=tn("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),IC=tn("rydberg","10973731.568160","m^-1"),PC=tn("thomsonCrossSection","6.6524587321e-29","m^2"),OC=r3("weakMixingAngle",.2229),LC=r3("efimovFactor",22.7),kC=tn("atomicMass","1.66053906660e-27","kg"),UC=tn("avogadro","6.02214076e23","mol^-1"),FC=tn("boltzmann","1.380649e-23","J K^-1"),BC=tn("faraday","96485.33212331001","C mol^-1"),zC=tn("firstRadiation","3.7417718521927573e-16","W m^2"),qC=tn("loschmidt","2.686780111798444e25","m^-3"),GC=tn("gasConstant","8.31446261815324","J K^-1 mol^-1"),HC=tn("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),VC=tn("molarVolume","0.022413969545014137","m^3 mol^-1"),WC=r3("sackurTetrode",-1.16487052358),$C=tn("secondRadiation","0.014387768775039337","m K"),jC=tn("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),XC=tn("wienDisplacement","2.897771955e-3","m K"),YC=tn("molarMass","0.99999999965e-3","kg mol^-1"),QC=tn("molarMassC12","11.9999999958e-3","kg mol^-1"),ZC=tn("gravity","9.80665","m s^-2"),JC=tn("planckLength","1.616255e-35","m"),KC=tn("planckMass","2.176435e-8","kg"),e3=tn("planckTime","5.391245e-44","s"),t3=tn("planckCharge","1.87554603778e-18","C"),n3=tn("planckTemperature","1.416785e+32","K");function tn(t,e,n){var r=["config","Unit","BigNumber"];return ye(t,r,function(a){var s=a.config,o=a.Unit,u=a.BigNumber,l=s.number==="BigNumber"?new u(e):parseFloat(e),f=new o(l,n);return f.fixPrefix=!0,f})}function r3(t,e){var n=["config","BigNumber"];return ye(t,n,function(r){var a=r.config,s=r.BigNumber;return a.number==="BigNumber"?new s(e):e})}var Jxe="apply",Kxe=["typed","isInteger"],i3=ye(Jxe,Kxe,function(t){var e=t.typed,n=t.isInteger,r=P1({typed:e,isInteger:n});return e("apply",{"...any":function(s){var o=s[1];pn(o)?s[1]=o-1:Jt(o)&&(s[1]=o.minus(1));try{return r.apply(null,s)}catch(u){throw mo(u)}}})},{isTransformFunction:!0}),ebe="column",tbe=["typed","Index","matrix","range"],a3=ye(ebe,tbe,function(t){var e=t.typed,n=t.Index,r=t.matrix,a=t.range,s=L1({typed:e,Index:n,matrix:r,range:a});return e("column",{"...any":function(u){var l=u.length-1,f=u[l];pn(f)&&(u[l]=f-1);try{return s.apply(null,u)}catch(c){throw mo(c)}}})},{isTransformFunction:!0});function vU(t,e,n){var r=t.filter(function(u){return ri(u)&&!(u.name in e)&&!(u.name in n)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+t+'"');var a=r.name,s=Object.create(n),o=t.compile();return function(l){return s[a]=l,o.evaluate(s)}}var nbe="filter",rbe=["typed"],s3=ye(nbe,rbe,function(t){var e=t.typed;function n(a,s,o){var u,l;return a[0]&&(u=a[0].compile().evaluate(o)),a[1]&&(ri(a[1])||gp(a[1])?l=a[1].compile().evaluate(o):l=vU(a[1],s,o)),r(u,l)}n.rawArgs=!0;var r=e("filter",{"Array, function":c7,"Matrix, function":function(s,o){return s.create(c7(s.toArray(),o))},"Array, RegExp":rw,"Matrix, RegExp":function(s,o){return s.create(rw(s.toArray(),o))}});return n},{isTransformFunction:!0});function c7(t,e){var n=ev(e);return e$(t,function(r,a,s){return n===1?e(r):n===2?e(r,[a+1]):e(r,[a+1],s)})}var ibe="forEach",abe=["typed"],o3=ye(ibe,abe,function(t){var e=t.typed;function n(a,s,o){var u,l;return a[0]&&(u=a[0].compile().evaluate(o)),a[1]&&(ri(a[1])||gp(a[1])?l=a[1].compile().evaluate(o):l=vU(a[1],s,o)),r(u,l)}n.rawArgs=!0;var r=e("forEach",{"Array | Matrix, function":function(s,o){var u=ev(o),l=function f(c,p){Array.isArray(c)?wM(c,function(d,h){f(d,p.concat(h+1))}):u===1?o(c):u===2?o(c,p):o(c,p,s)};l(s.valueOf(),[])}});return n},{isTransformFunction:!0}),sbe="index",obe=["Index"],u3=ye(sbe,obe,function(t){var e=t.Index;return function(){for(var r=[],a=0,s=arguments.length;a<s;a++){var o=arguments[a];if(mh(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(l){return l-1});else if(zn(o)||Dn(o))o=o.map(function(l){return l-1});else if(pn(o))o--;else if(Jt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");r[a]=o}var u=new e;return e.apply(u,r),u}},{isTransformFunction:!0}),ube="map",lbe=["typed"],l3=ye(ube,lbe,function(t){var e=t.typed;function n(a,s,o){var u,l;return a[0]&&(u=a[0].compile().evaluate(o)),a[1]&&(ri(a[1])||gp(a[1])?l=a[1].compile().evaluate(o):l=vU(a[1],s,o)),r(u,l)}n.rawArgs=!0;var r=e("map",{"Array, function":function(s,o){return f7(s,o,s)},"Matrix, function":function(s,o){return s.create(f7(s.valueOf(),o,s))}});return n},{isTransformFunction:!0});function f7(t,e,n){var r=ev(e);function a(s,o){return Array.isArray(s)?Js(s,function(u,l){return a(u,o.concat(l+1))}):r===1?e(s):r===2?e(s,o):e(s,o,n)}return a(t,[])}var cbe="max",fbe=["typed","larger"],c3=ye(cbe,fbe,function(t){var e=t.typed,n=t.larger,r=B1({typed:e,larger:n});return e("max",{"...any":function(s){if(s.length===2&&Cu(s[0])){var o=s[1];pn(o)?s[1]=o-1:Jt(o)&&(s[1]=o.minus(1))}try{return r.apply(null,s)}catch(u){throw mo(u)}}})},{isTransformFunction:!0}),pbe="mean",dbe=["typed","add","divide"],f3=ye(pbe,dbe,function(t){var e=t.typed,n=t.add,r=t.divide,a=G1({typed:e,add:n,divide:r});return e("mean",{"...any":function(o){if(o.length===2&&Cu(o[0])){var u=o[1];pn(u)?o[1]=u-1:Jt(u)&&(o[1]=u.minus(1))}try{return a.apply(null,o)}catch(l){throw mo(l)}}})},{isTransformFunction:!0}),hbe="min",mbe=["typed","smaller"],p3=ye(hbe,mbe,function(t){var e=t.typed,n=t.smaller,r=z1({typed:e,smaller:n});return e("min",{"...any":function(s){if(s.length===2&&Cu(s[0])){var o=s[1];pn(o)?s[1]=o-1:Jt(o)&&(s[1]=o.minus(1))}try{return r.apply(null,s)}catch(u){throw mo(u)}}})},{isTransformFunction:!0}),vbe="range",gbe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],d3=ye(vbe,gbe,function(t){var e=t.typed,n=t.config,r=t.matrix,a=t.bignumber,s=t.smaller,o=t.smallerEq,u=t.larger,l=t.largerEq,f=k1({typed:e,config:n,matrix:r,bignumber:a,smaller:s,smallerEq:o,larger:u,largerEq:l});return e("range",{"...any":function(p){var d=p.length-1,h=p[d];return typeof h!="boolean"&&p.push(!0),f.apply(null,p)}})},{isTransformFunction:!0}),ybe="row",xbe=["typed","Index","matrix","range"],h3=ye(ybe,xbe,function(t){var e=t.typed,n=t.Index,r=t.matrix,a=t.range,s=U1({typed:e,Index:n,matrix:r,range:a});return e("row",{"...any":function(u){var l=u.length-1,f=u[l];pn(f)&&(u[l]=f-1);try{return s.apply(null,u)}catch(c){throw mo(c)}}})},{isTransformFunction:!0}),bbe="subset",Sbe=["typed","matrix"],m3=ye(bbe,Sbe,function(t){var e=t.typed,n=t.matrix,r=F1({typed:e,matrix:n});return e("subset",{"...any":function(s){try{return r.apply(null,s)}catch(o){throw mo(o)}}})},{isTransformFunction:!0}),wbe="concat",_be=["typed","matrix","isInteger"],v3=ye(wbe,_be,function(t){var e=t.typed,n=t.matrix,r=t.isInteger,a=O1({typed:e,matrix:n,isInteger:r});return e("concat",{"...any":function(o){var u=o.length-1,l=o[u];pn(l)?o[u]=l-1:Jt(l)&&(o[u]=l.minus(1));try{return a.apply(null,o)}catch(f){throw mo(f)}}})},{isTransformFunction:!0}),Mbe="std",Ebe=["typed","sqrt","variance"],g3=ye(Mbe,Ebe,function(t){var e=t.typed,n=t.sqrt,r=t.variance,a=V1({typed:e,sqrt:n,variance:r});return e("std",{"...any":function(o){if(o.length>=2&&Cu(o[0])){var u=o[1];pn(u)?o[1]=u-1:Jt(u)&&(o[1]=u.minus(1))}try{return a.apply(null,o)}catch(l){throw mo(l)}}})},{isTransformFunction:!0}),p7="sum",Tbe=["typed","config","add","?bignumber","?fraction"],y3=ye(p7,Tbe,function(t){var e=t.typed,n=t.config,r=t.add,a=t.bignumber,s=t.fraction,o=q1({typed:e,config:n,add:r,bignumber:a,fraction:s});return e(p7,{"...any":function(l){if(l.length===2&&Cu(l[0])){var f=l[1];pn(f)?l[1]=f-1:Jt(f)&&(l[1]=f.minus(1))}try{return o.apply(null,l)}catch(c){throw mo(c)}}})},{isTransformFunction:!0}),d7="variance",Abe=["typed","add","subtract","multiply","divide","apply","isNaN"],x3=ye(d7,Abe,function(t){var e=t.typed,n=t.add,r=t.subtract,a=t.multiply,s=t.divide,o=t.apply,u=t.isNaN,l=H1({typed:e,add:n,subtract:r,multiply:a,divide:s,apply:o,isNaN:u});return e(d7,{"...any":function(c){if(c.length>=2&&Cu(c[0])){var p=c[1];pn(p)?c[1]=p-1:Jt(p)&&(c[1]=p.minus(1))}try{return l.apply(null,c)}catch(d){throw mo(d)}}})},{isTransformFunction:!0});const Nbe=Object.freeze(Object.defineProperty({__proto__:null,createAbs:iE,createAccessorNode:FA,createAcos:QT,createAcosh:ZT,createAcot:JT,createAcoth:KT,createAcsc:eA,createAcsch:tA,createAdd:RA,createAddScalar:aE,createAnd:AT,createApply:P1,createApplyTransform:i3,createArg:PE,createArrayNode:BA,createAsec:nA,createAsech:rA,createAsin:iA,createAsinh:aA,createAssignmentNode:zA,createAtan:sA,createAtan2:oA,createAtanh:uA,createAtomicMass:kC,createAvogadro:UC,createBellNumbers:kN,createBigNumberClass:NM,createBignumber:ZM,createBitAnd:CE,createBitNot:DE,createBitOr:RE,createBitXor:IE,createBlockNode:qA,createBohrMagneton:vC,createBohrRadius:wC,createBoltzmann:FC,createBoolean:QM,createCatalan:UN,createCbrt:sE,createCeil:oE,createChain:pN,createChainClass:cN,createClassicalElectronRadius:_C,createClone:OM,createColumn:L1,createColumnTransform:a3,createCombinations:EN,createCombinationsWithRep:TN,createCompare:NT,createCompareNatural:CT,createCompareText:DT,createCompile:eN,createComplex:JM,createComplexClass:CM,createComposition:FN,createConcat:O1,createConcatTransform:v3,createConditionalNode:GA,createConductanceQuantum:gC,createConj:OE,createConstantNode:HA,createCos:lA,createCosh:cA,createCot:fA,createCoth:pA,createCoulomb:hC,createCreateUnit:YT,createCross:zE,createCsc:dA,createCsch:hA,createCtranspose:iT,createCube:uE,createDeepEqual:UT,createDenseMatrixClass:PM,createDeprecatedEval:nN,createDeprecatedTypeof:WM,createDeprecatedVar:_N,createDerivative:zN,createDet:dN,createDeuteronMass:CC,createDiag:qE,createDistance:xN,createDivide:yN,createDivideScalar:hT,createDot:OA,createDotDivide:ST,createDotMultiply:NE,createDotPow:bT,createE:ZN,createEfimovFactor:LC,createEigs:mN,createElectricConstant:pC,createElectronMass:MC,createElementaryCharge:mC,createEqual:RT,createEqualScalar:$M,createEqualText:IT,createErf:sT,createEvaluate:tN,createExp:lE,createExpm:vN,createExpm1:cE,createEye:GE,createFactorial:NN,createFalse:WN,createFaraday:BC,createFermiCoupling:EC,createFibonacciHeapClass:HT,createFilter:VE,createFilterTransform:s3,createFineStructure:TC,createFirstRadiation:zC,createFix:fE,createFlatten:WE,createFloor:pE,createForEach:$E,createForEachTransform:o3,createFormat:lT,createFraction:KM,createFractionClass:DM,createFunctionAssignmentNode:VA,createFunctionNode:JA,createGamma:AN,createGasConstant:GC,createGcd:dE,createGetMatrixDataType:jE,createGravitationConstant:uC,createGravity:ZC,createHartreeEnergy:AC,createHasNumericValue:zM,createHelp:fN,createHelpClass:lN,createHypot:IA,createI:aC,createIdentity:XE,createIm:LE,createImmutableDenseMatrixClass:qT,createIndex:kA,createIndexClass:GT,createIndexNode:WA,createIndexTransform:u3,createInfinity:jN,createIntersect:bN,createInv:hN,createInverseConductanceQuantum:yC,createIsInteger:kM,createIsNaN:HM,createIsNegative:FM,createIsNumeric:BM,createIsPositive:qM,createIsPrime:pT,createIsZero:GM,createKldivergence:CN,createKlitzing:SC,createKron:YE,createLN10:eC,createLN2:KN,createLOG10E:nC,createLOG2E:tC,createLarger:LT,createLargerEq:kT,createLcm:mE,createLeftShift:MT,createLog:gT,createLog10:vE,createLog1p:yT,createLog2:gE,createLoschmidt:qC,createLsolve:wT,createLup:aN,createLusolve:uN,createMad:wN,createMagneticConstant:fC,createMagneticFluxQuantum:xC,createMap:QE,createMapTransform:l3,createMatrix:eE,createMatrixClass:IM,createMax:B1,createMaxTransform:c3,createMean:G1,createMeanTransform:f3,createMedian:SN,createMin:z1,createMinTransform:p3,createMod:xE,createMode:oT,createMolarMass:YC,createMolarMassC12:QC,createMolarPlanckConstant:HC,createMolarVolume:VC,createMultinomial:DN,createMultiply:SE,createMultiplyScalar:bE,createNaN:XN,createNeutronMass:DC,createNode:UA,createNorm:PA,createNot:UE,createNthRoot:wE,createNthRoots:xT,createNuclearMagneton:bC,createNull:$N,createNumber:XM,createNumeric:dT,createObjectNode:$A,createOnes:ZE,createOperatorNode:jA,createOr:FE,createParenthesisNode:XA,createParse:KA,createParser:iN,createParserClass:rN,createPartitionSelect:BT,createPermutations:RN,createPhi:JN,createPi:YN,createPickRandom:IN,createPlanckCharge:t3,createPlanckConstant:lC,createPlanckLength:JC,createPlanckMass:KC,createPlanckTemperature:n3,createPlanckTime:e3,createPow:mT,createPrint:cT,createProd:uT,createProtonMass:NC,createQr:sN,createQuantileSeq:MN,createQuantumOfCirculation:RC,createRandom:PN,createRandomInt:ON,createRange:k1,createRangeClass:RM,createRangeNode:YA,createRangeTransform:d3,createRationalize:qN,createRe:kE,createReducedPlanckConstant:cC,createRelationalNode:QA,createReplacer:HN,createReshape:KE,createResize:eT,createResultSet:MM,createReviver:GN,createRightArithShift:ET,createRightLogShift:TT,createRound:vT,createRow:U1,createRowTransform:h3,createRydberg:IC,createSQRT1_2:rC,createSQRT2:iC,createSackurTetrode:WC,createSec:mA,createSech:vA,createSecondRadiation:$C,createSetCartesian:SA,createSetDifference:wA,createSetDistinct:_A,createSetIntersect:MA,createSetIsSubset:EA,createSetMultiplicity:TA,createSetPowerset:AA,createSetSize:NA,createSetSymDifference:CA,createSetUnion:DA,createSign:_E,createSimplify:BN,createSin:gA,createSinh:yA,createSize:tT,createSlu:oN,createSmaller:PT,createSmallerEq:OT,createSort:zT,createSpaClass:VT,createSparse:XT,createSparseMatrixClass:jM,createSpeedOfLight:oC,createSplitUnit:tE,createSqrt:ME,createSqrtm:gN,createSquare:EE,createSqueeze:nT,createStd:V1,createStdTransform:g3,createStefanBoltzmann:jC,createStirlingS2:LN,createString:YM,createSubset:F1,createSubsetTransform:m3,createSubtract:TE,createSum:q1,createSumTransform:y3,createSymbolNode:ZA,createTan:xA,createTanh:bA,createTau:QN,createThomsonCrossSection:PC,createTo:fT,createTrace:LA,createTranspose:rT,createTrue:VN,createTypeOf:VM,createTyped:_M,createUnaryMinus:nE,createUnaryPlus:rE,createUnequal:FT,createUnitClass:$T,createUnitFunction:jT,createUppercaseE:mU,createUppercasePi:hU,createUsolve:_T,createVacuumImpedance:dC,createVariance:H1,createVarianceTransform:x3,createVersion:sC,createWeakMixingAngle:OC,createWienDisplacement:XC,createXgcd:AE,createXor:BE,createZeros:aT},Symbol.toStringTag,{value:"Module"}));var b3=MM({}),Ar=CM({}),S3=RM({}),Tj=GE({}),Aj=WN({}),Nj=$N({}),Cj=VN({}),lt=NM({config:at}),tv=IM({}),Dj=HN({}),Rj=aC({Complex:Ar}),Ij=eC({BigNumber:lt,config:at}),Pj=nC({BigNumber:lt,config:at}),Oj=XN({BigNumber:lt,config:at}),iL=YN({BigNumber:lt,config:at}),Lj=rC({BigNumber:lt,config:at}),kj=QN({BigNumber:lt,config:at}),Uj=LC({BigNumber:lt,config:at}),Fj=TC({BigNumber:lt,config:at}),Bj=WC({BigNumber:lt,config:at}),zj=OC({BigNumber:lt,config:at}),Bc=DM({}),aL=ZN({BigNumber:lt,config:at}),qj=jN({BigNumber:lt,config:at}),Gj=tC({BigNumber:lt,config:at}),Hj=sC({}),bn=PM({Matrix:tv}),Vj=JN({BigNumber:lt,config:at}),De=_M({BigNumber:lt,Complex:Ar,DenseMatrix:bn,Fraction:Bc}),Vo=kM({typed:De}),yh=BM({typed:De}),W1=qM({typed:De}),nv=HM({typed:De}),Yn=$M({config:at,typed:De}),$1=XM({typed:De}),Wj=QM({typed:De}),w3=JM({Complex:Ar,typed:De}),$j=tE({typed:De}),jj=rE({BigNumber:lt,config:at,typed:De}),_3=P1({isInteger:Vo,typed:De}),Xj=uE({typed:De}),Yj=cE({Complex:Ar,typed:De}),Qj=vE({Complex:Ar,config:at,typed:De}),da=bE({typed:De}),gU=_E({BigNumber:lt,Fraction:Bc,complex:w3,typed:De}),Zj=EE({typed:De}),Jj=DE({typed:De}),Kj=PE({typed:De}),eX=LE({typed:De}),yU=UE({typed:De}),tX=VE({typed:De}),nX=$E({typed:De}),xU=QE({typed:De}),rX=sT({typed:De}),bU=lT({typed:De}),iX=pT({typed:De}),aX=QT({Complex:Ar,config:at,typed:De}),sX=JT({BigNumber:lt,typed:De}),oX=eA({BigNumber:lt,Complex:Ar,config:at,typed:De}),uX=nA({BigNumber:lt,Complex:Ar,config:at,typed:De}),lX=iA({Complex:Ar,config:at,typed:De}),SU=sA({typed:De}),cX=uA({Complex:Ar,config:at,typed:De}),fX=cA({typed:De}),pX=pA({BigNumber:lt,typed:De}),dX=hA({BigNumber:lt,typed:De}),hX=vA({BigNumber:lt,typed:De}),mX=yA({typed:De}),vX=bA({typed:De}),j1=EN({typed:De}),gX=IN({config:at,typed:De}),yX=ON({config:at,typed:De}),xX=KN({BigNumber:lt,config:at}),bX=OM({typed:De}),SX=zM({isNumeric:yh,typed:De}),pw=VM({typed:De}),wX=YM({typed:De}),wp=KM({Fraction:Bc,typed:De}),zc=nE({typed:De}),Zi=aE({typed:De}),_X=lE({typed:De}),MX=gE({Complex:Ar,config:at,typed:De}),qc=ME({Complex:Ar,config:at,typed:De}),X1=OE({typed:De}),EX=jE({typed:De}),TX=oT({isNaN:nv,isNumeric:yh,typed:De}),AX=cT({typed:De}),NX=ZT({Complex:Ar,config:at,typed:De}),CX=tA({BigNumber:lt,typed:De}),DX=aA({typed:De}),wU=lA({typed:De}),RX=dA({BigNumber:lt,typed:De}),_U=gA({typed:De}),IX=TN({typed:De}),PX=PN({config:at,typed:De}),OX=iC({BigNumber:lt,config:at}),xh=FM({typed:De}),Ml=jM({Matrix:tv,equalScalar:Yn,typed:De}),xt=eE({DenseMatrix:bn,Matrix:tv,SparseMatrix:Ml,typed:De}),LX=sE({BigNumber:lt,Complex:Ar,Fraction:Bc,config:at,isNegative:xh,matrix:xt,typed:De,unaryMinus:zc}),kX=dE({BigNumber:lt,DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De}),UX=xE({DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De}),FX=wE({BigNumber:lt,equalScalar:Yn,matrix:xt,typed:De}),BX=AE({BigNumber:lt,config:at,matrix:xt,typed:De}),zX=CE({equalScalar:Yn,matrix:xt,typed:De}),qX=IE({DenseMatrix:bn,matrix:xt,typed:De}),GX=FE({DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De}),M3=O1({isInteger:Vo,matrix:xt,typed:De}),HX=qE({DenseMatrix:bn,SparseMatrix:Ml,matrix:xt,typed:De}),bh=XE({BigNumber:lt,DenseMatrix:bn,SparseMatrix:Ml,config:at,matrix:xt,typed:De}),VX=ZE({BigNumber:lt,config:at,matrix:xt,typed:De}),WX=KE({isInteger:Vo,matrix:xt,typed:De}),go=tT({matrix:xt,config:at,typed:De}),yo=F1({matrix:xt,typed:De}),_p=aT({BigNumber:lt,config:at,matrix:xt,typed:De}),$X=fT({matrix:xt,typed:De}),Y1=vT({BigNumber:lt,DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De,zeros:_p}),jX=MT({DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De,zeros:_p}),XX=TT({DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De,zeros:_p}),Sh=NT({BigNumber:lt,DenseMatrix:bn,Fraction:Bc,config:at,equalScalar:Yn,matrix:xt,typed:De}),MU=DT({matrix:xt,typed:De}),Su=PT({DenseMatrix:bn,config:at,matrix:xt,typed:De}),Wo=LT({DenseMatrix:bn,config:at,matrix:xt,typed:De}),YX=FT({DenseMatrix:bn,config:at,equalScalar:Yn,matrix:xt,typed:De}),EU=B1({larger:Wo,typed:De}),E3=qT({DenseMatrix:bn,smaller:Su}),T3=HT({larger:Wo,smaller:Su}),QX=XT({SparseMatrix:Ml,typed:De}),ZX=KT({BigNumber:lt,Complex:Ar,config:at,typed:De}),JX=oA({BigNumber:lt,DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De}),KX=mA({BigNumber:lt,typed:De}),pi=RA({DenseMatrix:bn,SparseMatrix:Ml,addScalar:Zi,equalScalar:Yn,matrix:xt,typed:De}),eY=LA({add:pi,matrix:xt,typed:De}),tY=FN({addScalar:Zi,combinations:j1,isInteger:Vo,isNegative:xh,isPositive:W1,larger:Wo,typed:De}),wh=GM({typed:De}),Os=iE({typed:De}),TU=pE({config:at,round:Y1,typed:De}),ii=SE({addScalar:Zi,equalScalar:Yn,matrix:xt,multiplyScalar:da,typed:De}),nY=NE({equalScalar:Yn,matrix:xt,multiplyScalar:da,typed:De}),rY=kE({typed:De}),iY=WE({matrix:xt,typed:De}),aY=eT({config:at,matrix:xt}),sY=nT({matrix:xt,typed:De}),oY=uT({multiply:ii,typed:De}),Gc=mT({Complex:Ar,config:at,fraction:wp,identity:bh,matrix:xt,multiply:ii,number:$1,typed:De}),uY=bT({DenseMatrix:bn,equalScalar:Yn,matrix:xt,pow:Gc,typed:De}),lY=ET({DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De,zeros:_p}),Ru=CT({compare:Sh,typed:De}),cY=IT({compareText:MU,isZero:wh,typed:De}),Q1=kT({DenseMatrix:bn,config:at,matrix:xt,typed:De}),A3=BT({compare:Sh,isNaN:nv,isNumeric:yh,typed:De}),fY=z1({smaller:Su,typed:De}),N3=VT({FibonacciHeap:T3,addScalar:Zi,equalScalar:Yn}),pY=rA({BigNumber:lt,Complex:Ar,config:at,typed:De}),dY=xA({typed:De}),hY=NA({compareNatural:Ru,typed:De}),mY=PA({abs:Os,add:pi,conj:X1,equalScalar:Yn,larger:Wo,matrix:xt,multiply:ii,pow:Gc,smaller:Su,sqrt:qc,typed:De}),vY=MN({add:pi,compare:Sh,multiply:ii,partitionSelect:A3,typed:De}),AU=AN({BigNumber:lt,Complex:Ar,config:at,multiplyScalar:da,pow:Gc,typed:De}),fl=ZM({BigNumber:lt,typed:De}),gY=mE({equalScalar:Yn,matrix:xt,typed:De}),yY=RE({DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De}),xY=YE({matrix:xt,multiplyScalar:da,typed:De}),C3=rT({matrix:xt,typed:De}),Z1=dT({bignumber:fl,fraction:wp,number:$1}),bY=AT({equalScalar:Yn,matrix:xt,not:yU,typed:De,zeros:_p}),D3=OT({DenseMatrix:bn,config:at,matrix:xt,typed:De}),SY=zT({compare:Sh,compareNatural:Ru,matrix:xt,typed:De}),wY=fA({BigNumber:lt,typed:De}),_Y=OA({add:pi,multiply:ii,typed:De}),NU=q1({bignumber:fl,fraction:wp,add:pi,config:at,typed:De}),J1=NN({gamma:AU,typed:De}),MY=RN({factorial:J1,typed:De}),CU=oE({config:at,round:Y1,typed:De}),Ei=TE({DenseMatrix:bn,addScalar:Zi,equalScalar:Yn,matrix:xt,typed:De,unaryMinus:zc}),EY=zE({matrix:xt,multiply:ii,subtract:Ei,typed:De}),TY=iT({conj:X1,transpose:C3,typed:De}),Hc=RT({DenseMatrix:bn,equalScalar:Yn,matrix:xt,typed:De}),$i=GT({ImmutableDenseMatrix:E3}),AY=SA({DenseMatrix:bn,Index:$i,compareNatural:Ru,size:go,subset:yo,typed:De}),NY=_A({DenseMatrix:bn,Index:$i,compareNatural:Ru,size:go,subset:yo,typed:De}),CY=EA({Index:$i,compareNatural:Ru,size:go,subset:yo,typed:De}),DY=AA({Index:$i,compareNatural:Ru,size:go,subset:yo,typed:De}),RY=kA({Index:$i,typed:De}),DU=fE({Complex:Ar,ceil:CU,floor:TU,typed:De}),Nm=k1({bignumber:fl,matrix:xt,config:at,larger:Wo,largerEq:Q1,smaller:Su,smallerEq:D3,typed:De}),Oi=hT({numeric:Z1,typed:De}),IY=xT({Complex:Ar,config:at,divideScalar:Oi,typed:De}),RU=wT({DenseMatrix:bn,divideScalar:Oi,equalScalar:Yn,matrix:xt,multiplyScalar:da,subtract:Ei,typed:De}),PY=UT({equal:Hc,typed:De}),IU=wA({DenseMatrix:bn,Index:$i,compareNatural:Ru,size:go,subset:yo,typed:De}),OY=TA({Index:$i,compareNatural:Ru,size:go,subset:yo,typed:De}),LY=IA({abs:Os,addScalar:Zi,divideScalar:Oi,isPositive:W1,multiplyScalar:da,smaller:Su,sqrt:qc,typed:De}),R3=aN({DenseMatrix:bn,Spa:N3,SparseMatrix:Ml,abs:Os,addScalar:Zi,divideScalar:Oi,equalScalar:Yn,larger:Wo,matrix:xt,multiplyScalar:da,subtract:Ei,typed:De,unaryMinus:zc}),PU=oN({SparseMatrix:Ml,abs:Os,add:pi,divideScalar:Oi,larger:Wo,largerEq:Q1,multiply:ii,subtract:Ei,transpose:C3,typed:De}),OU=dN({lup:R3,matrix:xt,multiply:ii,subtract:Ei,typed:De,unaryMinus:zc}),kY=xN({abs:Os,addScalar:Zi,divideScalar:Oi,multiplyScalar:da,sqrt:qc,subtract:Ei,typed:De,unaryMinus:zc}),LU=LN({addScalar:Zi,combinations:j1,divideScalar:Oi,factorial:J1,isInteger:Vo,isNegative:xh,larger:Wo,multiplyScalar:da,pow:Gc,subtract:Ei,typed:De}),UY=UN({addScalar:Zi,combinations:j1,divideScalar:Oi,isInteger:Vo,isNegative:xh,multiplyScalar:da,typed:De}),FY=BE({DenseMatrix:bn,matrix:xt,typed:De}),BY=U1({Index:$i,matrix:xt,range:Nm,typed:De}),kU=ST({DenseMatrix:bn,divideScalar:Oi,equalScalar:Yn,matrix:xt,typed:De}),Vt=$T({BigNumber:lt,Complex:Ar,Fraction:Bc,abs:Os,addScalar:Zi,config:at,divideScalar:Oi,equal:Hc,fix:DU,format:bU,isNumeric:yh,multiplyScalar:da,number:$1,pow:Gc,round:Y1,subtract:Ei}),zY=YT({Unit:Vt,typed:De}),UU=CA({Index:$i,concat:M3,setDifference:IU,size:go,subset:yo,typed:De}),qY=sN({addScalar:Zi,complex:w3,conj:X1,divideScalar:Oi,equal:Hc,identity:bh,isZero:wh,matrix:xt,multiplyScalar:da,sign:gU,sqrt:qc,subtract:Ei,typed:De,unaryMinus:zc,zeros:_p}),rv=hN({abs:Os,addScalar:Zi,det:OU,divideScalar:Oi,identity:bh,matrix:xt,multiply:ii,typed:De,unaryMinus:zc}),GY=vN({abs:Os,add:pi,identity:bh,inv:rv,multiply:ii,typed:De}),wu=yN({divideScalar:Oi,equalScalar:Yn,inv:rv,matrix:xt,multiply:ii,typed:De}),HY=G1({add:pi,divide:wu,typed:De}),Cm=H1({add:pi,apply:_3,divide:wu,isNaN:nv,multiply:ii,subtract:Ei,typed:De}),VY=V1({sqrt:qc,typed:De,variance:Cm}),WY=DN({add:pi,divide:wu,factorial:J1,isInteger:Vo,isPositive:W1,multiply:ii,typed:De}),$Y=kC({BigNumber:lt,Unit:Vt,config:at}),jY=vC({BigNumber:lt,Unit:Vt,config:at}),XY=FC({BigNumber:lt,Unit:Vt,config:at}),YY=gC({BigNumber:lt,Unit:Vt,config:at}),QY=CC({BigNumber:lt,Unit:Vt,config:at}),ZY=MC({BigNumber:lt,Unit:Vt,config:at}),JY=BC({BigNumber:lt,Unit:Vt,config:at}),KY=zC({BigNumber:lt,Unit:Vt,config:at}),eQ=uC({BigNumber:lt,Unit:Vt,config:at}),tQ=AC({BigNumber:lt,Unit:Vt,config:at}),nQ=SC({BigNumber:lt,Unit:Vt,config:at}),rQ=fC({BigNumber:lt,Unit:Vt,config:at}),iQ=YC({BigNumber:lt,Unit:Vt,config:at}),aQ=HC({BigNumber:lt,Unit:Vt,config:at}),sQ=DC({BigNumber:lt,Unit:Vt,config:at}),oQ=t3({BigNumber:lt,Unit:Vt,config:at}),uQ=JC({BigNumber:lt,Unit:Vt,config:at}),lQ=n3({BigNumber:lt,Unit:Vt,config:at}),cQ=NC({BigNumber:lt,Unit:Vt,config:at}),fQ=cC({BigNumber:lt,Unit:Vt,config:at}),pQ=$C({BigNumber:lt,Unit:Vt,config:at}),dQ=jC({BigNumber:lt,Unit:Vt,config:at}),hQ=dC({BigNumber:lt,Unit:Vt,config:at}),mQ=L1({Index:$i,matrix:xt,range:Nm,typed:De}),FU=_T({DenseMatrix:bn,divideScalar:Oi,equalScalar:Yn,matrix:xt,multiplyScalar:da,subtract:Ei,typed:De}),BU=MA({DenseMatrix:bn,Index:$i,compareNatural:Ru,size:go,subset:yo,typed:De}),vQ=uN({DenseMatrix:bn,lsolve:RU,lup:R3,matrix:xt,slu:PU,typed:De,usolve:FU}),gQ=mN({abs:Os,add:pi,addScalar:Zi,atan:SU,bignumber:fl,config:at,cos:wU,equal:Hc,inv:rv,matrix:xt,multiply:ii,multiplyScalar:da,sin:_U,subtract:Ei,typed:De}),yQ=bN({abs:Os,add:pi,addScalar:Zi,config:at,divideScalar:Oi,equalScalar:Yn,matrix:xt,multiply:ii,multiplyScalar:da,smaller:Su,subtract:Ei,typed:De}),xQ=kN({addScalar:Zi,isInteger:Vo,isNegative:xh,stirlingS2:LU,typed:De}),bQ=UC({BigNumber:lt,Unit:Vt,config:at}),SQ=_C({BigNumber:lt,Unit:Vt,config:at}),wQ=pC({BigNumber:lt,Unit:Vt,config:at}),_Q=EC({BigNumber:lt,Unit:Vt,config:at}),MQ=ZC({BigNumber:lt,Unit:Vt,config:at}),EQ=qC({BigNumber:lt,Unit:Vt,config:at}),TQ=QC({BigNumber:lt,Unit:Vt,config:at}),AQ=bC({BigNumber:lt,Unit:Vt,config:at}),NQ=KC({BigNumber:lt,Unit:Vt,config:at}),CQ=RC({BigNumber:lt,Unit:Vt,config:at}),DQ=oC({BigNumber:lt,Unit:Vt,config:at}),RQ=XC({BigNumber:lt,Unit:Vt,config:at}),I3=gT({Complex:Ar,config:at,divideScalar:Oi,typed:De}),IQ=jT({Unit:Vt,typed:De}),PQ=gN({abs:Os,add:pi,identity:bh,inv:rv,max:EU,multiply:ii,size:go,sqrt:qc,subtract:Ei,typed:De}),OQ=CN({divide:wu,dotDivide:kU,isNumeric:yh,log:I3,matrix:xt,multiply:ii,sum:NU,typed:De}),LQ=wC({BigNumber:lt,Unit:Vt,config:at}),kQ=mC({BigNumber:lt,Unit:Vt,config:at}),UQ=yC({BigNumber:lt,Unit:Vt,config:at}),FQ=VC({BigNumber:lt,Unit:Vt,config:at}),BQ=e3({BigNumber:lt,Unit:Vt,config:at}),zQ=PC({BigNumber:lt,Unit:Vt,config:at}),qQ=yT({Complex:Ar,config:at,divideScalar:Oi,log:I3,typed:De}),zU=SN({add:pi,compare:Sh,divide:wu,partitionSelect:A3,typed:De}),GQ=GC({BigNumber:lt,Unit:Vt,config:at}),HQ=lC({BigNumber:lt,Unit:Vt,config:at}),VQ=DA({Index:$i,concat:M3,setIntersect:BU,setSymDifference:UU,size:go,subset:yo,typed:De}),WQ=xC({BigNumber:lt,Unit:Vt,config:at}),$Q=hC({BigNumber:lt,Unit:Vt,config:at}),jQ=wN({abs:Os,map:xU,median:zU,subtract:Ei,typed:De}),XQ=IC({BigNumber:lt,Unit:Vt,config:at});function Fy(){return Fy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fy.apply(this,arguments)}var iv={},K1={},YQ={},Ji=UA({mathWithTransform:K1}),P3=BA({Node:Ji}),O3=qA({Node:Ji,ResultSet:b3}),_h=HA({Node:Ji}),L3=$A({Node:Ji}),Mh=XA({Node:Ji}),k3=QA({Node:Ji}),ex=cN({math:iv}),qU=GN({classes:YQ}),U3=GA({Node:Ji}),Eh=jA({Node:Ji}),F3=YA({Node:Ji}),B3=VA({Node:Ji,typed:De}),QQ=pN({Chain:ex,typed:De}),z3=FA({Node:Ji,subset:yo}),q3=WA({Node:Ji,Range:S3,size:go}),G3=zA({matrix:xt,Node:Ji,subset:yo}),Mp=ZA({Unit:Vt,Node:Ji,math:iv}),Th=JA({Node:Ji,SymbolNode:Mp,math:iv}),El=KA({AccessorNode:z3,ArrayNode:P3,AssignmentNode:G3,BlockNode:O3,ConditionalNode:U3,ConstantNode:_h,FunctionAssignmentNode:B3,FunctionNode:Th,IndexNode:q3,ObjectNode:L3,OperatorNode:Eh,ParenthesisNode:Mh,RangeNode:F3,RelationalNode:k3,SymbolNode:Mp,config:at,numeric:Z1,typed:De}),dw=tN({parse:El,typed:De}),tx=rN({parse:El}),H3=lN({parse:El}),ZQ=eN({parse:El,typed:De}),JQ=iN({Parser:tx,typed:De}),V3=BN({bignumber:fl,fraction:wp,ConstantNode:_h,FunctionNode:Th,OperatorNode:Eh,ParenthesisNode:Mh,SymbolNode:Mp,add:pi,config:at,divide:wu,equal:Hc,isZero:wh,mathWithTransform:K1,multiply:ii,parse:El,pow:Gc,subtract:Ei,typed:De}),KQ=qN({bignumber:fl,fraction:wp,ConstantNode:_h,FunctionNode:Th,OperatorNode:Eh,ParenthesisNode:Mh,SymbolNode:Mp,add:pi,config:at,divide:wu,equal:Hc,isZero:wh,mathWithTransform:K1,multiply:ii,parse:El,pow:Gc,simplify:V3,subtract:Ei,typed:De}),eZ=fN({Help:H3,mathWithTransform:K1,typed:De}),tZ=zN({ConstantNode:_h,FunctionNode:Th,OperatorNode:Eh,ParenthesisNode:Mh,SymbolNode:Mp,config:at,equal:Hc,isZero:wh,numeric:Z1,parse:El,simplify:V3,typed:De});Fy(iv,{typeof:pw,eye:Tj,reviver:qU,false:Aj,null:Nj,true:Cj,replacer:Dj,i:Rj,LN10:Ij,LOG10E:Pj,NaN:Oj,pi:iL,SQRT1_2:Lj,tau:kj,efimovFactor:Uj,fineStructure:Fj,sackurTetrode:Bj,weakMixingAngle:zj,e:aL,Infinity:qj,LOG2E:Gj,PI:iL,version:Hj,E:aL,phi:Vj,typed:De,isInteger:Vo,isNumeric:yh,isPositive:W1,isNaN:nv,equalScalar:Yn,number:$1,boolean:Wj,complex:w3,splitUnit:$j,unaryPlus:jj,apply:_3,cube:Xj,expm1:Yj,log10:Qj,multiplyScalar:da,sign:gU,square:Zj,bitNot:Jj,arg:Kj,im:eX,not:yU,filter:tX,forEach:nX,map:xU,erf:rX,format:bU,isPrime:iX,acos:aX,acot:sX,acsc:oX,asec:uX,asin:lX,atan:SU,atanh:cX,cosh:fX,coth:pX,csch:dX,sech:hX,sinh:mX,tanh:vX,chain:QQ,combinations:j1,pickRandom:gX,randomInt:yX,LN2:xX,clone:bX,hasNumericValue:SX,typeOf:pw,string:wX,fraction:wp,unaryMinus:zc,addScalar:Zi,exp:_X,log2:MX,sqrt:qc,conj:X1,getMatrixDataType:EX,mode:TX,print:AX,acosh:NX,acsch:CX,asinh:DX,cos:wU,csc:RX,sin:_U,combinationsWithRep:IX,random:PX,SQRT2:OX,isNegative:xh,matrix:xt,cbrt:LX,gcd:kX,mod:UX,nthRoot:FX,xgcd:BX,bitAnd:zX,bitXor:qX,or:GX,concat:M3,diag:HX,identity:bh,ones:VX,reshape:WX,size:go,subset:yo,zeros:_p,to:$X,round:Y1,leftShift:jX,rightLogShift:XX,compare:Sh,compareText:MU,smaller:Su,larger:Wo,unequal:YX,max:EU,sparse:QX,acoth:ZX,atan2:JX,sec:KX,add:pi,trace:eY,composition:tY,isZero:wh,abs:Os,floor:TU,multiply:ii,dotMultiply:nY,re:rY,flatten:iY,resize:aY,squeeze:sY,prod:oY,pow:Gc,dotPow:uY,rightArithShift:lY,compareNatural:Ru,equalText:cY,largerEq:Q1,partitionSelect:A3,min:fY,asech:pY,tan:dY,setSize:hY,norm:mY,quantileSeq:vY,gamma:AU,bignumber:fl,lcm:gY,bitOr:yY,kron:xY,transpose:C3,numeric:Z1,and:bY,smallerEq:D3,sort:SY,cot:wY,dot:_Y,sum:NU,factorial:J1,permutations:MY,ceil:CU,subtract:Ei,cross:EY,ctranspose:TY,equal:Hc,setCartesian:AY,setDistinct:NY,setIsSubset:CY,setPowerset:DY,index:RY,fix:DU,range:Nm,divideScalar:Oi,nthRoots:IY,lsolve:RU,deepEqual:PY,setDifference:IU,setMultiplicity:OY,hypot:LY,lup:R3,slu:PU,det:OU,distance:kY,stirlingS2:LU,catalan:UY,xor:FY,row:BY,dotDivide:kU,createUnit:zY,setSymDifference:UU,qr:qY,inv:rv,expm:GY,divide:wu,mean:HY,variance:Cm,std:VY,multinomial:WY,atomicMass:$Y,bohrMagneton:jY,boltzmann:XY,conductanceQuantum:YY,deuteronMass:QY,electronMass:ZY,faraday:JY,firstRadiation:KY,gravitationConstant:eQ,hartreeEnergy:tQ,klitzing:nQ,magneticConstant:rQ,molarMass:iQ,molarPlanckConstant:aQ,neutronMass:sQ,planckCharge:oQ,planckLength:uQ,planckTemperature:lQ,protonMass:cQ,reducedPlanckConstant:fQ,secondRadiation:pQ,stefanBoltzmann:dQ,vacuumImpedance:hQ,column:mQ,usolve:FU,setIntersect:BU,lusolve:vQ,eigs:gQ,intersect:yQ,var:Cm,bellNumbers:xQ,avogadro:bQ,classicalElectronRadius:SQ,electricConstant:wQ,fermiCoupling:_Q,gravity:MQ,loschmidt:EQ,molarMassC12:TQ,nuclearMagneton:AQ,planckMass:NQ,quantumOfCirculation:CQ,speedOfLight:DQ,wienDisplacement:RQ,log:I3,unit:IQ,parse:El,evaluate:dw,sqrtm:PQ,kldivergence:OQ,bohrRadius:LQ,elementaryCharge:kQ,inverseConductanceQuantum:UQ,molarVolume:FQ,planckTime:BQ,thomsonCrossSection:zQ,log1p:qQ,compile:ZQ,parser:JQ,median:zU,simplify:V3,rationalize:KQ,gasConstant:GQ,planckConstant:HQ,setUnion:VQ,help:eZ,derivative:tZ,magneticFluxQuantum:WQ,eval:dw,coulomb:$Q,mad:jQ,rydberg:XQ,config:at});Fy(K1,iv,{apply:i3({isInteger:Vo,typed:De}),filter:s3({typed:De}),map:l3({typed:De}),forEach:o3({typed:De}),max:c3({larger:Wo,typed:De}),min:p3({smaller:Su,typed:De}),subset:m3({matrix:xt,typed:De}),concat:v3({isInteger:Vo,matrix:xt,typed:De}),range:d3({bignumber:fl,matrix:xt,config:at,larger:Wo,largerEq:Q1,smaller:Su,smallerEq:D3,typed:De}),sum:y3({bignumber:fl,fraction:wp,add:pi,config:at,typed:De}),index:u3({Index:$i}),column:a3({Index:$i,matrix:xt,range:Nm,typed:De}),row:h3({Index:$i,matrix:xt,range:Nm,typed:De}),mean:f3({add:pi,divide:wu,typed:De}),variance:x3({add:pi,apply:_3,divide:wu,isNaN:nv,multiply:ii,subtract:Ei,typed:De}),std:g3({sqrt:qc,typed:De,variance:Cm})});Fy(YQ,{ResultSet:b3,Complex:Ar,Range:S3,Node:Ji,ArrayNode:P3,BlockNode:O3,ConstantNode:_h,ObjectNode:L3,ParenthesisNode:Mh,RelationalNode:k3,Chain:ex,BigNumber:lt,Matrix:tv,ConditionalNode:U3,OperatorNode:Eh,Fraction:Bc,RangeNode:F3,DenseMatrix:bn,FunctionAssignmentNode:B3,SparseMatrix:Ml,ImmutableDenseMatrix:E3,FibonacciHeap:T3,AccessorNode:z3,IndexNode:q3,Spa:N3,AssignmentNode:G3,Index:$i,Unit:Vt,SymbolNode:Mp,FunctionNode:Th,Parser:tx,Help:H3});ex.createProxy(iv);var ct={createBigNumberClass:NM},Fr={createComplexClass:CM},W3={createMatrixClass:IM},Rn={MatrixDependencies:W3,createDenseMatrixClass:PM},Ah={createFractionClass:DM},Re={BigNumberDependencies:ct,ComplexDependencies:Fr,DenseMatrixDependencies:Rn,FractionDependencies:Ah,createTyped:_M},nZ={createResultSet:MM},rZ={createRangeClass:RM},Cbe={typedDependencies:Re,createClone:OM},Iu={typedDependencies:Re,createIsInteger:kM},av={typedDependencies:Re,createIsNegative:FM},sv={typedDependencies:Re,createIsNumeric:BM},Dbe={isNumericDependencies:sv,typedDependencies:Re,createHasNumericValue:zM},$3={typedDependencies:Re,createIsPositive:qM},ov={typedDependencies:Re,createIsZero:GM},nx={typedDependencies:Re,createIsNaN:HM},Rbe={typedDependencies:Re,createTypeOf:VM},Ibe={createDeprecatedTypeof:WM},Kn={typedDependencies:Re,createEqualScalar:$M},Ep={MatrixDependencies:W3,equalScalarDependencies:Kn,typedDependencies:Re,createSparseMatrixClass:jM},j3={typedDependencies:Re,createNumber:XM},Pbe={typedDependencies:Re,createString:YM},Obe={typedDependencies:Re,createBoolean:QM},Vc={BigNumberDependencies:ct,typedDependencies:Re,createBignumber:ZM},GU={ComplexDependencies:Fr,typedDependencies:Re,createComplex:JM},Nh={FractionDependencies:Ah,typedDependencies:Re,createFraction:KM},St={DenseMatrixDependencies:Rn,MatrixDependencies:W3,SparseMatrixDependencies:Ep,typedDependencies:Re,createMatrix:eE},Lbe={typedDependencies:Re,createSplitUnit:tE},Tp={typedDependencies:Re,createUnaryMinus:nE},kbe={BigNumberDependencies:ct,typedDependencies:Re,createUnaryPlus:rE},xo={typedDependencies:Re,createAbs:iE},HU={isIntegerDependencies:Iu,typedDependencies:Re,createApply:P1},ha={typedDependencies:Re,createAddScalar:aE},Ube={BigNumberDependencies:ct,ComplexDependencies:Fr,FractionDependencies:Ah,isNegativeDependencies:av,matrixDependencies:St,typedDependencies:Re,unaryMinusDependencies:Tp,createCbrt:sE},Ch={BigNumberDependencies:ct,matrixDependencies:St,typedDependencies:Re,createZeros:aT},X3={BigNumberDependencies:ct,DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,zerosDependencies:Ch,createRound:vT},iZ={roundDependencies:X3,typedDependencies:Re,createCeil:oE},Fbe={typedDependencies:Re,createCube:uE},Bbe={typedDependencies:Re,createExp:lE},zbe={ComplexDependencies:Fr,typedDependencies:Re,createExpm1:cE},aZ={roundDependencies:X3,typedDependencies:Re,createFloor:pE},sZ={ComplexDependencies:Fr,ceilDependencies:iZ,floorDependencies:aZ,typedDependencies:Re,createFix:fE},qbe={BigNumberDependencies:ct,DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createGcd:dE},Gbe={equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createLcm:mE},Hbe={ComplexDependencies:Fr,typedDependencies:Re,createLog10:vE},Vbe={ComplexDependencies:Fr,typedDependencies:Re,createLog2:gE},Wbe={DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createMod:xE},Ba={typedDependencies:Re,createMultiplyScalar:bE},hi={addScalarDependencies:ha,equalScalarDependencies:Kn,matrixDependencies:St,multiplyScalarDependencies:Ba,typedDependencies:Re,createMultiply:SE},$be={BigNumberDependencies:ct,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createNthRoot:wE},oZ={BigNumberDependencies:ct,FractionDependencies:Ah,complexDependencies:GU,typedDependencies:Re,createSign:_E},Ap={ComplexDependencies:Fr,typedDependencies:Re,createSqrt:ME},jbe={typedDependencies:Re,createSquare:EE},Li={DenseMatrixDependencies:Rn,addScalarDependencies:ha,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,unaryMinusDependencies:Tp,createSubtract:TE},Xbe={BigNumberDependencies:ct,matrixDependencies:St,typedDependencies:Re,createXgcd:AE},Ybe={equalScalarDependencies:Kn,matrixDependencies:St,multiplyScalarDependencies:Ba,typedDependencies:Re,createDotMultiply:NE},Qbe={equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createBitAnd:CE},Zbe={typedDependencies:Re,createBitNot:DE},Jbe={DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createBitOr:RE},Kbe={DenseMatrixDependencies:Rn,matrixDependencies:St,typedDependencies:Re,createBitXor:IE},eSe={typedDependencies:Re,createArg:PE},Y3={typedDependencies:Re,createConj:OE},tSe={typedDependencies:Re,createIm:LE},nSe={typedDependencies:Re,createRe:kE},uZ={typedDependencies:Re,createNot:UE},rSe={DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createOr:FE},iSe={DenseMatrixDependencies:Rn,matrixDependencies:St,typedDependencies:Re,createXor:BE},VU={isIntegerDependencies:Iu,matrixDependencies:St,typedDependencies:Re,createConcat:O1},Tl={DenseMatrixDependencies:Rn,matrixDependencies:St,typedDependencies:Re,createSmaller:PT},lZ={DenseMatrixDependencies:Rn,smallerDependencies:Tl,createImmutableDenseMatrixClass:qT},za={ImmutableDenseMatrixDependencies:lZ,createIndexClass:GT},Pu={DenseMatrixDependencies:Rn,matrixDependencies:St,typedDependencies:Re,createLarger:LT},Q3={DenseMatrixDependencies:Rn,matrixDependencies:St,typedDependencies:Re,createLargerEq:kT},WU={DenseMatrixDependencies:Rn,matrixDependencies:St,typedDependencies:Re,createSmallerEq:OT},rx={bignumberDependencies:Vc,matrixDependencies:St,largerDependencies:Pu,largerEqDependencies:Q3,smallerDependencies:Tl,smallerEqDependencies:WU,typedDependencies:Re,createRange:k1},aSe={IndexDependencies:za,matrixDependencies:St,rangeDependencies:rx,typedDependencies:Re,createColumn:L1},sSe={matrixDependencies:St,multiplyDependencies:hi,subtractDependencies:Li,typedDependencies:Re,createCross:zE},oSe={DenseMatrixDependencies:Rn,SparseMatrixDependencies:Ep,matrixDependencies:St,typedDependencies:Re,createDiag:qE},uSe={createEye:GE},lSe={typedDependencies:Re,createFilter:VE},cSe={matrixDependencies:St,typedDependencies:Re,createFlatten:WE},fSe={typedDependencies:Re,createForEach:$E},pSe={typedDependencies:Re,createGetMatrixDataType:jE},uv={BigNumberDependencies:ct,DenseMatrixDependencies:Rn,SparseMatrixDependencies:Ep,matrixDependencies:St,typedDependencies:Re,createIdentity:XE},dSe={matrixDependencies:St,multiplyScalarDependencies:Ba,typedDependencies:Re,createKron:YE},cZ={typedDependencies:Re,createMap:QE},hSe={BigNumberDependencies:ct,matrixDependencies:St,typedDependencies:Re,createOnes:ZE},mSe={isIntegerDependencies:Iu,matrixDependencies:St,typedDependencies:Re,createReshape:KE},vSe={matrixDependencies:St,createResize:eT},gSe={IndexDependencies:za,matrixDependencies:St,rangeDependencies:rx,typedDependencies:Re,createRow:U1},Ko={matrixDependencies:St,typedDependencies:Re,createSize:tT},ySe={matrixDependencies:St,typedDependencies:Re,createSqueeze:nT},eu={matrixDependencies:St,typedDependencies:Re,createSubset:F1},$U={matrixDependencies:St,typedDependencies:Re,createTranspose:rT},xSe={conjDependencies:Y3,transposeDependencies:$U,typedDependencies:Re,createCtranspose:iT},bSe={typedDependencies:Re,createErf:sT},SSe={isNaNDependencies:nx,isNumericDependencies:sv,typedDependencies:Re,createMode:oT},wSe={multiplyDependencies:hi,typedDependencies:Re,createProd:uT},fZ={typedDependencies:Re,createFormat:lT},_Se={typedDependencies:Re,createPrint:cT},MSe={matrixDependencies:St,typedDependencies:Re,createTo:fT},ESe={typedDependencies:Re,createIsPrime:pT},Z3={bignumberDependencies:Vc,fractionDependencies:Nh,numberDependencies:j3,createNumeric:dT},Ki={numericDependencies:Z3,typedDependencies:Re,createDivideScalar:hT},Np={ComplexDependencies:Fr,fractionDependencies:Nh,identityDependencies:uv,matrixDependencies:St,multiplyDependencies:hi,numberDependencies:j3,typedDependencies:Re,createPow:mT},jU={ComplexDependencies:Fr,divideScalarDependencies:Ki,typedDependencies:Re,createLog:gT},TSe={ComplexDependencies:Fr,divideScalarDependencies:Ki,logDependencies:jU,typedDependencies:Re,createLog1p:yT},ASe={ComplexDependencies:Fr,divideScalarDependencies:Ki,typedDependencies:Re,createNthRoots:xT},NSe={DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,powDependencies:Np,typedDependencies:Re,createDotPow:bT},pZ={DenseMatrixDependencies:Rn,divideScalarDependencies:Ki,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createDotDivide:ST},dZ={DenseMatrixDependencies:Rn,divideScalarDependencies:Ki,equalScalarDependencies:Kn,matrixDependencies:St,multiplyScalarDependencies:Ba,subtractDependencies:Li,typedDependencies:Re,createLsolve:wT},hZ={DenseMatrixDependencies:Rn,divideScalarDependencies:Ki,equalScalarDependencies:Kn,matrixDependencies:St,multiplyScalarDependencies:Ba,subtractDependencies:Li,typedDependencies:Re,createUsolve:_T},CSe={DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,zerosDependencies:Ch,createLeftShift:MT},DSe={DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,zerosDependencies:Ch,createRightArithShift:ET},RSe={DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,zerosDependencies:Ch,createRightLogShift:TT},ISe={equalScalarDependencies:Kn,matrixDependencies:St,notDependencies:uZ,typedDependencies:Re,zerosDependencies:Ch,createAnd:AT},lv={BigNumberDependencies:ct,DenseMatrixDependencies:Rn,FractionDependencies:Ah,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createCompare:NT},Al={compareDependencies:lv,typedDependencies:Re,createCompareNatural:CT},mZ={matrixDependencies:St,typedDependencies:Re,createCompareText:DT},Cp={DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createEqual:RT},PSe={compareTextDependencies:mZ,isZeroDependencies:ov,typedDependencies:Re,createEqualText:IT},OSe={equalDependencies:Cp,typedDependencies:Re,createDeepEqual:UT},LSe={DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createUnequal:FT},XU={compareDependencies:lv,isNaNDependencies:nx,isNumericDependencies:sv,typedDependencies:Re,createPartitionSelect:BT},kSe={compareDependencies:lv,compareNaturalDependencies:Al,matrixDependencies:St,typedDependencies:Re,createSort:zT},vZ={largerDependencies:Pu,typedDependencies:Re,createMax:B1},USe={smallerDependencies:Tl,typedDependencies:Re,createMin:z1},gZ={largerDependencies:Pu,smallerDependencies:Tl,createFibonacciHeapClass:HT},yZ={FibonacciHeapDependencies:gZ,addScalarDependencies:ha,equalScalarDependencies:Kn,createSpaClass:VT},jt={BigNumberDependencies:ct,ComplexDependencies:Fr,FractionDependencies:Ah,absDependencies:xo,addScalarDependencies:ha,divideScalarDependencies:Ki,equalDependencies:Cp,fixDependencies:sZ,formatDependencies:fZ,isNumericDependencies:sv,multiplyScalarDependencies:Ba,numberDependencies:j3,powDependencies:Np,roundDependencies:X3,subtractDependencies:Li,createUnitClass:$T},FSe={UnitDependencies:jt,typedDependencies:Re,createUnitFunction:jT},BSe={SparseMatrixDependencies:Ep,typedDependencies:Re,createSparse:XT},zSe={UnitDependencies:jt,typedDependencies:Re,createCreateUnit:YT},qSe={ComplexDependencies:Fr,typedDependencies:Re,createAcos:QT},GSe={ComplexDependencies:Fr,typedDependencies:Re,createAcosh:ZT},HSe={BigNumberDependencies:ct,typedDependencies:Re,createAcot:JT},VSe={BigNumberDependencies:ct,ComplexDependencies:Fr,typedDependencies:Re,createAcoth:KT},WSe={BigNumberDependencies:ct,ComplexDependencies:Fr,typedDependencies:Re,createAcsc:eA},$Se={BigNumberDependencies:ct,typedDependencies:Re,createAcsch:tA},jSe={BigNumberDependencies:ct,ComplexDependencies:Fr,typedDependencies:Re,createAsec:nA},XSe={BigNumberDependencies:ct,ComplexDependencies:Fr,typedDependencies:Re,createAsech:rA},YSe={ComplexDependencies:Fr,typedDependencies:Re,createAsin:iA},QSe={typedDependencies:Re,createAsinh:aA},xZ={typedDependencies:Re,createAtan:sA},ZSe={BigNumberDependencies:ct,DenseMatrixDependencies:Rn,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createAtan2:oA},JSe={ComplexDependencies:Fr,typedDependencies:Re,createAtanh:uA},bZ={typedDependencies:Re,createCos:lA},KSe={typedDependencies:Re,createCosh:cA},e2e={BigNumberDependencies:ct,typedDependencies:Re,createCot:fA},t2e={BigNumberDependencies:ct,typedDependencies:Re,createCoth:pA},n2e={BigNumberDependencies:ct,typedDependencies:Re,createCsc:dA},r2e={BigNumberDependencies:ct,typedDependencies:Re,createCsch:hA},i2e={BigNumberDependencies:ct,typedDependencies:Re,createSec:mA},a2e={BigNumberDependencies:ct,typedDependencies:Re,createSech:vA},SZ={typedDependencies:Re,createSin:gA},s2e={typedDependencies:Re,createSinh:yA},o2e={typedDependencies:Re,createTan:xA},u2e={typedDependencies:Re,createTanh:bA},l2e={DenseMatrixDependencies:Rn,IndexDependencies:za,compareNaturalDependencies:Al,sizeDependencies:Ko,subsetDependencies:eu,typedDependencies:Re,createSetCartesian:SA},wZ={DenseMatrixDependencies:Rn,IndexDependencies:za,compareNaturalDependencies:Al,sizeDependencies:Ko,subsetDependencies:eu,typedDependencies:Re,createSetDifference:wA},c2e={DenseMatrixDependencies:Rn,IndexDependencies:za,compareNaturalDependencies:Al,sizeDependencies:Ko,subsetDependencies:eu,typedDependencies:Re,createSetDistinct:_A},_Z={DenseMatrixDependencies:Rn,IndexDependencies:za,compareNaturalDependencies:Al,sizeDependencies:Ko,subsetDependencies:eu,typedDependencies:Re,createSetIntersect:MA},f2e={IndexDependencies:za,compareNaturalDependencies:Al,sizeDependencies:Ko,subsetDependencies:eu,typedDependencies:Re,createSetIsSubset:EA},p2e={IndexDependencies:za,compareNaturalDependencies:Al,sizeDependencies:Ko,subsetDependencies:eu,typedDependencies:Re,createSetMultiplicity:TA},d2e={IndexDependencies:za,compareNaturalDependencies:Al,sizeDependencies:Ko,subsetDependencies:eu,typedDependencies:Re,createSetPowerset:AA},h2e={compareNaturalDependencies:Al,typedDependencies:Re,createSetSize:NA},MZ={IndexDependencies:za,concatDependencies:VU,setDifferenceDependencies:wZ,sizeDependencies:Ko,subsetDependencies:eu,typedDependencies:Re,createSetSymDifference:CA},m2e={IndexDependencies:za,concatDependencies:VU,setIntersectDependencies:_Z,setSymDifferenceDependencies:MZ,sizeDependencies:Ko,subsetDependencies:eu,typedDependencies:Re,createSetUnion:DA},Ti={DenseMatrixDependencies:Rn,SparseMatrixDependencies:Ep,addScalarDependencies:ha,equalScalarDependencies:Kn,matrixDependencies:St,typedDependencies:Re,createAdd:RA},v2e={absDependencies:xo,addScalarDependencies:ha,divideScalarDependencies:Ki,isPositiveDependencies:$3,multiplyScalarDependencies:Ba,smallerDependencies:Tl,sqrtDependencies:Ap,typedDependencies:Re,createHypot:IA},g2e={absDependencies:xo,addDependencies:Ti,conjDependencies:Y3,equalScalarDependencies:Kn,largerDependencies:Pu,matrixDependencies:St,multiplyDependencies:hi,powDependencies:Np,smallerDependencies:Tl,sqrtDependencies:Ap,typedDependencies:Re,createNorm:PA},y2e={addDependencies:Ti,multiplyDependencies:hi,typedDependencies:Re,createDot:OA},x2e={addDependencies:Ti,matrixDependencies:St,typedDependencies:Re,createTrace:LA},b2e={IndexDependencies:za,typedDependencies:Re,createIndex:kA},qa={createNode:UA},EZ={NodeDependencies:qa,subsetDependencies:eu,createAccessorNode:FA},TZ={NodeDependencies:qa,createArrayNode:BA},AZ={matrixDependencies:St,NodeDependencies:qa,subsetDependencies:eu,createAssignmentNode:zA},NZ={NodeDependencies:qa,ResultSetDependencies:nZ,createBlockNode:qA},CZ={NodeDependencies:qa,createConditionalNode:GA},ix={NodeDependencies:qa,createConstantNode:HA},DZ={NodeDependencies:qa,typedDependencies:Re,createFunctionAssignmentNode:VA},RZ={NodeDependencies:qa,RangeDependencies:rZ,sizeDependencies:Ko,createIndexNode:WA},IZ={NodeDependencies:qa,createObjectNode:$A},ax={NodeDependencies:qa,createOperatorNode:jA},sx={NodeDependencies:qa,createParenthesisNode:XA},PZ={NodeDependencies:qa,createRangeNode:YA},OZ={NodeDependencies:qa,createRelationalNode:QA},cv={UnitDependencies:jt,NodeDependencies:qa,createSymbolNode:ZA},ox={NodeDependencies:qa,SymbolNodeDependencies:cv,createFunctionNode:JA},Dp={AccessorNodeDependencies:EZ,ArrayNodeDependencies:TZ,AssignmentNodeDependencies:AZ,BlockNodeDependencies:NZ,ConditionalNodeDependencies:CZ,ConstantNodeDependencies:ix,FunctionAssignmentNodeDependencies:DZ,FunctionNodeDependencies:ox,IndexNodeDependencies:RZ,ObjectNodeDependencies:IZ,OperatorNodeDependencies:ax,ParenthesisNodeDependencies:sx,RangeNodeDependencies:PZ,RelationalNodeDependencies:OZ,SymbolNodeDependencies:cv,numericDependencies:Z3,typedDependencies:Re,createParse:KA},S2e={parseDependencies:Dp,typedDependencies:Re,createCompile:eN},LZ={parseDependencies:Dp,typedDependencies:Re,createEvaluate:tN},w2e={evaluateDependencies:LZ,createDeprecatedEval:nN},kZ={parseDependencies:Dp,createParserClass:rN},_2e={ParserDependencies:kZ,typedDependencies:Re,createParser:iN},YU={DenseMatrixDependencies:Rn,SpaDependencies:yZ,SparseMatrixDependencies:Ep,absDependencies:xo,addScalarDependencies:ha,divideScalarDependencies:Ki,equalScalarDependencies:Kn,largerDependencies:Pu,matrixDependencies:St,multiplyScalarDependencies:Ba,subtractDependencies:Li,typedDependencies:Re,unaryMinusDependencies:Tp,createLup:aN},M2e={addScalarDependencies:ha,complexDependencies:GU,conjDependencies:Y3,divideScalarDependencies:Ki,equalDependencies:Cp,identityDependencies:uv,isZeroDependencies:ov,matrixDependencies:St,multiplyScalarDependencies:Ba,signDependencies:oZ,sqrtDependencies:Ap,subtractDependencies:Li,typedDependencies:Re,unaryMinusDependencies:Tp,zerosDependencies:Ch,createQr:sN},UZ={SparseMatrixDependencies:Ep,absDependencies:xo,addDependencies:Ti,divideScalarDependencies:Ki,largerDependencies:Pu,largerEqDependencies:Q3,multiplyDependencies:hi,subtractDependencies:Li,transposeDependencies:$U,typedDependencies:Re,createSlu:oN},E2e={DenseMatrixDependencies:Rn,lsolveDependencies:dZ,lupDependencies:YU,matrixDependencies:St,sluDependencies:UZ,typedDependencies:Re,usolveDependencies:hZ,createLusolve:uN},FZ={parseDependencies:Dp,createHelpClass:lN},BZ={createChainClass:cN},T2e={HelpDependencies:FZ,typedDependencies:Re,createHelp:fN},A2e={ChainDependencies:BZ,typedDependencies:Re,createChain:pN},zZ={lupDependencies:YU,matrixDependencies:St,multiplyDependencies:hi,subtractDependencies:Li,typedDependencies:Re,unaryMinusDependencies:Tp,createDet:dN},ux={absDependencies:xo,addScalarDependencies:ha,detDependencies:zZ,divideScalarDependencies:Ki,identityDependencies:uv,matrixDependencies:St,multiplyDependencies:hi,typedDependencies:Re,unaryMinusDependencies:Tp,createInv:hN},N2e={absDependencies:xo,addDependencies:Ti,addScalarDependencies:ha,atanDependencies:xZ,bignumberDependencies:Vc,cosDependencies:bZ,equalDependencies:Cp,invDependencies:ux,matrixDependencies:St,multiplyDependencies:hi,multiplyScalarDependencies:Ba,sinDependencies:SZ,subtractDependencies:Li,typedDependencies:Re,createEigs:mN},C2e={absDependencies:xo,addDependencies:Ti,identityDependencies:uv,invDependencies:ux,multiplyDependencies:hi,typedDependencies:Re,createExpm:vN},D2e={absDependencies:xo,addDependencies:Ti,identityDependencies:uv,invDependencies:ux,maxDependencies:vZ,multiplyDependencies:hi,sizeDependencies:Ko,sqrtDependencies:Ap,subtractDependencies:Li,typedDependencies:Re,createSqrtm:gN},Nl={divideScalarDependencies:Ki,equalScalarDependencies:Kn,invDependencies:ux,matrixDependencies:St,multiplyDependencies:hi,typedDependencies:Re,createDivide:yN},R2e={absDependencies:xo,addScalarDependencies:ha,divideScalarDependencies:Ki,multiplyScalarDependencies:Ba,sqrtDependencies:Ap,subtractDependencies:Li,typedDependencies:Re,unaryMinusDependencies:Tp,createDistance:xN},I2e={absDependencies:xo,addDependencies:Ti,addScalarDependencies:ha,divideScalarDependencies:Ki,equalScalarDependencies:Kn,matrixDependencies:St,multiplyDependencies:hi,multiplyScalarDependencies:Ba,smallerDependencies:Tl,subtractDependencies:Li,typedDependencies:Re,createIntersect:bN},qZ={bignumberDependencies:Vc,fractionDependencies:Nh,addDependencies:Ti,typedDependencies:Re,createSum:q1},P2e={addDependencies:Ti,divideDependencies:Nl,typedDependencies:Re,createMean:G1},GZ={addDependencies:Ti,compareDependencies:lv,divideDependencies:Nl,partitionSelectDependencies:XU,typedDependencies:Re,createMedian:SN},O2e={absDependencies:xo,mapDependencies:cZ,medianDependencies:GZ,subtractDependencies:Li,typedDependencies:Re,createMad:wN},J3={addDependencies:Ti,applyDependencies:HU,divideDependencies:Nl,isNaNDependencies:nx,multiplyDependencies:hi,subtractDependencies:Li,typedDependencies:Re,createVariance:H1},L2e={varianceDependencies:J3,createDeprecatedVar:_N},k2e={addDependencies:Ti,compareDependencies:lv,multiplyDependencies:hi,partitionSelectDependencies:XU,typedDependencies:Re,createQuantileSeq:MN},U2e={sqrtDependencies:Ap,typedDependencies:Re,varianceDependencies:J3,createStd:V1},K3={typedDependencies:Re,createCombinations:EN},F2e={typedDependencies:Re,createCombinationsWithRep:TN},HZ={BigNumberDependencies:ct,ComplexDependencies:Fr,multiplyScalarDependencies:Ba,powDependencies:Np,typedDependencies:Re,createGamma:AN},eD={gammaDependencies:HZ,typedDependencies:Re,createFactorial:NN},B2e={divideDependencies:Nl,dotDivideDependencies:pZ,isNumericDependencies:sv,logDependencies:jU,matrixDependencies:St,multiplyDependencies:hi,sumDependencies:qZ,typedDependencies:Re,createKldivergence:CN},z2e={addDependencies:Ti,divideDependencies:Nl,factorialDependencies:eD,isIntegerDependencies:Iu,isPositiveDependencies:$3,multiplyDependencies:hi,typedDependencies:Re,createMultinomial:DN},q2e={factorialDependencies:eD,typedDependencies:Re,createPermutations:RN},G2e={typedDependencies:Re,createPickRandom:IN},H2e={typedDependencies:Re,createRandom:PN},V2e={typedDependencies:Re,createRandomInt:ON},VZ={addScalarDependencies:ha,combinationsDependencies:K3,divideScalarDependencies:Ki,factorialDependencies:eD,isIntegerDependencies:Iu,isNegativeDependencies:av,largerDependencies:Pu,multiplyScalarDependencies:Ba,powDependencies:Np,subtractDependencies:Li,typedDependencies:Re,createStirlingS2:LN},W2e={addScalarDependencies:ha,isIntegerDependencies:Iu,isNegativeDependencies:av,stirlingS2Dependencies:VZ,typedDependencies:Re,createBellNumbers:kN},$2e={addScalarDependencies:ha,combinationsDependencies:K3,divideScalarDependencies:Ki,isIntegerDependencies:Iu,isNegativeDependencies:av,multiplyScalarDependencies:Ba,typedDependencies:Re,createCatalan:UN},j2e={addScalarDependencies:ha,combinationsDependencies:K3,isIntegerDependencies:Iu,isNegativeDependencies:av,isPositiveDependencies:$3,largerDependencies:Pu,typedDependencies:Re,createComposition:FN},QU={bignumberDependencies:Vc,fractionDependencies:Nh,ConstantNodeDependencies:ix,FunctionNodeDependencies:ox,OperatorNodeDependencies:ax,ParenthesisNodeDependencies:sx,SymbolNodeDependencies:cv,addDependencies:Ti,divideDependencies:Nl,equalDependencies:Cp,isZeroDependencies:ov,multiplyDependencies:hi,parseDependencies:Dp,powDependencies:Np,subtractDependencies:Li,typedDependencies:Re,createSimplify:BN},X2e={ConstantNodeDependencies:ix,FunctionNodeDependencies:ox,OperatorNodeDependencies:ax,ParenthesisNodeDependencies:sx,SymbolNodeDependencies:cv,equalDependencies:Cp,isZeroDependencies:ov,numericDependencies:Z3,parseDependencies:Dp,simplifyDependencies:QU,typedDependencies:Re,createDerivative:zN},Y2e={bignumberDependencies:Vc,fractionDependencies:Nh,ConstantNodeDependencies:ix,FunctionNodeDependencies:ox,OperatorNodeDependencies:ax,ParenthesisNodeDependencies:sx,SymbolNodeDependencies:cv,addDependencies:Ti,divideDependencies:Nl,equalDependencies:Cp,isZeroDependencies:ov,multiplyDependencies:hi,parseDependencies:Dp,powDependencies:Np,simplifyDependencies:QU,subtractDependencies:Li,typedDependencies:Re,createRationalize:qN},Q2e={createReviver:GN},Z2e={createReplacer:HN},WZ={BigNumberDependencies:ct,createE:ZN},J2e={eDependencies:WZ,createUppercaseE:mU},K2e={createFalse:WN},ewe={ComplexDependencies:Fr,createI:aC},twe={BigNumberDependencies:ct,createInfinity:jN},nwe={BigNumberDependencies:ct,createLN10:eC},rwe={BigNumberDependencies:ct,createLN2:KN},iwe={BigNumberDependencies:ct,createLOG10E:nC},awe={BigNumberDependencies:ct,createLOG2E:tC},swe={BigNumberDependencies:ct,createNaN:XN},owe={createNull:$N},uwe={BigNumberDependencies:ct,createPhi:JN},$Z={BigNumberDependencies:ct,createPi:YN},lwe={piDependencies:$Z,createUppercasePi:hU},cwe={BigNumberDependencies:ct,createSQRT1_2:rC},fwe={BigNumberDependencies:ct,createSQRT2:iC},pwe={BigNumberDependencies:ct,createTau:QN},dwe={createTrue:VN},hwe={createVersion:sC},mwe={BigNumberDependencies:ct,UnitDependencies:jt,createAtomicMass:kC},vwe={BigNumberDependencies:ct,UnitDependencies:jt,createAvogadro:UC},gwe={BigNumberDependencies:ct,UnitDependencies:jt,createBohrMagneton:vC},ywe={BigNumberDependencies:ct,UnitDependencies:jt,createBohrRadius:wC},xwe={BigNumberDependencies:ct,UnitDependencies:jt,createBoltzmann:FC},bwe={BigNumberDependencies:ct,UnitDependencies:jt,createClassicalElectronRadius:_C},Swe={BigNumberDependencies:ct,UnitDependencies:jt,createConductanceQuantum:gC},wwe={BigNumberDependencies:ct,UnitDependencies:jt,createCoulomb:hC},_we={BigNumberDependencies:ct,UnitDependencies:jt,createDeuteronMass:CC},Mwe={BigNumberDependencies:ct,createEfimovFactor:LC},Ewe={BigNumberDependencies:ct,UnitDependencies:jt,createElectricConstant:pC},Twe={BigNumberDependencies:ct,UnitDependencies:jt,createElectronMass:MC},Awe={BigNumberDependencies:ct,UnitDependencies:jt,createElementaryCharge:mC},Nwe={BigNumberDependencies:ct,UnitDependencies:jt,createFaraday:BC},Cwe={BigNumberDependencies:ct,UnitDependencies:jt,createFermiCoupling:EC},Dwe={BigNumberDependencies:ct,createFineStructure:TC},Rwe={BigNumberDependencies:ct,UnitDependencies:jt,createFirstRadiation:zC},Iwe={BigNumberDependencies:ct,UnitDependencies:jt,createGasConstant:GC},Pwe={BigNumberDependencies:ct,UnitDependencies:jt,createGravitationConstant:uC},Owe={BigNumberDependencies:ct,UnitDependencies:jt,createGravity:ZC},Lwe={BigNumberDependencies:ct,UnitDependencies:jt,createHartreeEnergy:AC},kwe={BigNumberDependencies:ct,UnitDependencies:jt,createInverseConductanceQuantum:yC},Uwe={BigNumberDependencies:ct,UnitDependencies:jt,createKlitzing:SC},Fwe={BigNumberDependencies:ct,UnitDependencies:jt,createLoschmidt:qC},Bwe={BigNumberDependencies:ct,UnitDependencies:jt,createMagneticConstant:fC},zwe={BigNumberDependencies:ct,UnitDependencies:jt,createMagneticFluxQuantum:xC},qwe={BigNumberDependencies:ct,UnitDependencies:jt,createMolarMass:YC},Gwe={BigNumberDependencies:ct,UnitDependencies:jt,createMolarMassC12:QC},Hwe={BigNumberDependencies:ct,UnitDependencies:jt,createMolarPlanckConstant:HC},Vwe={BigNumberDependencies:ct,UnitDependencies:jt,createMolarVolume:VC},Wwe={BigNumberDependencies:ct,UnitDependencies:jt,createNeutronMass:DC},$we={BigNumberDependencies:ct,UnitDependencies:jt,createNuclearMagneton:bC},jwe={BigNumberDependencies:ct,UnitDependencies:jt,createPlanckCharge:t3},Xwe={BigNumberDependencies:ct,UnitDependencies:jt,createPlanckConstant:lC},Ywe={BigNumberDependencies:ct,UnitDependencies:jt,createPlanckLength:JC},Qwe={BigNumberDependencies:ct,UnitDependencies:jt,createPlanckMass:KC},Zwe={BigNumberDependencies:ct,UnitDependencies:jt,createPlanckTemperature:n3},Jwe={BigNumberDependencies:ct,UnitDependencies:jt,createPlanckTime:e3},Kwe={BigNumberDependencies:ct,UnitDependencies:jt,createProtonMass:NC},e_e={BigNumberDependencies:ct,UnitDependencies:jt,createQuantumOfCirculation:RC},t_e={BigNumberDependencies:ct,UnitDependencies:jt,createReducedPlanckConstant:cC},n_e={BigNumberDependencies:ct,UnitDependencies:jt,createRydberg:IC},r_e={BigNumberDependencies:ct,createSackurTetrode:WC},i_e={BigNumberDependencies:ct,UnitDependencies:jt,createSecondRadiation:$C},a_e={BigNumberDependencies:ct,UnitDependencies:jt,createSpeedOfLight:oC},s_e={BigNumberDependencies:ct,UnitDependencies:jt,createStefanBoltzmann:jC},o_e={BigNumberDependencies:ct,UnitDependencies:jt,createThomsonCrossSection:PC},u_e={BigNumberDependencies:ct,UnitDependencies:jt,createVacuumImpedance:dC},l_e={BigNumberDependencies:ct,createWeakMixingAngle:OC},c_e={BigNumberDependencies:ct,UnitDependencies:jt,createWienDisplacement:XC},f_e={isIntegerDependencies:Iu,typedDependencies:Re,createApplyTransform:i3},p_e={IndexDependencies:za,matrixDependencies:St,rangeDependencies:rx,typedDependencies:Re,createColumnTransform:a3},d_e={typedDependencies:Re,createFilterTransform:s3},h_e={typedDependencies:Re,createForEachTransform:o3},m_e={IndexDependencies:za,createIndexTransform:u3},v_e={typedDependencies:Re,createMapTransform:l3},g_e={largerDependencies:Pu,typedDependencies:Re,createMaxTransform:c3},y_e={addDependencies:Ti,divideDependencies:Nl,typedDependencies:Re,createMeanTransform:f3},x_e={smallerDependencies:Tl,typedDependencies:Re,createMinTransform:p3},b_e={bignumberDependencies:Vc,matrixDependencies:St,largerDependencies:Pu,largerEqDependencies:Q3,smallerDependencies:Tl,smallerEqDependencies:WU,typedDependencies:Re,createRangeTransform:d3},S_e={IndexDependencies:za,matrixDependencies:St,rangeDependencies:rx,typedDependencies:Re,createRowTransform:h3},w_e={matrixDependencies:St,typedDependencies:Re,createSubsetTransform:m3},__e={isIntegerDependencies:Iu,matrixDependencies:St,typedDependencies:Re,createConcatTransform:v3},M_e={sqrtDependencies:Ap,typedDependencies:Re,varianceDependencies:J3,createStdTransform:g3},E_e={bignumberDependencies:Vc,fractionDependencies:Nh,addDependencies:Ti,typedDependencies:Re,createSumTransform:y3},T_e={addDependencies:Ti,applyDependencies:HU,divideDependencies:Nl,isNaNDependencies:nx,multiplyDependencies:hi,subtractDependencies:Li,typedDependencies:Re,createVarianceTransform:x3},A_e=Nbe,ZU={exports:{}};function JU(){}JU.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function a(){r.off(t,a),e.apply(n,arguments)}return a._=e,this.on(t,a,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,a=n.length;for(r;r<a;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],a=[];if(r&&e)for(var s=0,o=r.length;s<o;s++)r[s].fn!==e&&r[s].fn._!==e&&a.push(r[s]);return a.length?n[t]=a:delete n[t],this}};ZU.exports=JU;ZU.exports.TinyEmitter=JU;var N_e=ZU.exports;const C_e=Au(N_e);function D_e(t){var e=new C_e;return t.on=e.on.bind(e),t.off=e.off.bind(e),t.once=e.once.bind(e),t.emit=e.emit.bind(e),t}function R_e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zg(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zg=function(n){return typeof n}:Zg=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Zg(t)}function I_e(t,e,n,r){function a(x,M){var A=arguments.length;if(A!==1&&A!==2)throw new _l("import",A,1,2);M||(M={});function E(T,P,I){if(VW(P))f(P,M);else if(Array.isArray(P))P.forEach(function(z){return E(T,z)});else if(Zg(P)==="object")for(var U in P)Et(P,U)&&E(T,P[U],U);else if($g(P)||I!==void 0){var q=$g(P)?y(P)?P.fn+".transform":P.fn:I;if(Et(T,q)&&T[q]!==P&&!M.silent)throw new Error('Cannot import "'+q+'" twice');T[q]=P}else if(!M.silent)throw new TypeError("Factory, Object, or Array expected")}var N={};E(N,x);for(var D in N)if(Et(N,D)){var C=N[D];if($g(C))c(C,M);else if(p(C))s(D,C,M);else if(!M.silent)throw new TypeError("Factory, Object, or Array expected")}}function s(x,M,A){if(A.wrap&&typeof M=="function"&&(M=l(M)),h(M)&&(M=t(x,R_e({},M.signature,M))),d(n[x])&&d(M)){A.override?M=t(x,M.signatures):M=t(n[x],M),n[x]=M,delete r[x],o(x,M),n.emit("import",x,function(){return M});return}if(n[x]===void 0||A.override){n[x]=M,delete r[x],o(x,M),n.emit("import",x,function(){return M});return}if(!A.silent)throw new Error('Cannot import "'+x+'": already exists')}function o(x,M){M&&typeof M.transform=="function"?(n.expression.transform[x]=M.transform,m(x)&&(n.expression.mathWithTransform[x]=M.transform)):(delete n.expression.transform[x],m(x)&&(n.expression.mathWithTransform[x]=M))}function u(x){delete n.expression.transform[x],m(x)?n.expression.mathWithTransform[x]=n[x]:delete n.expression.mathWithTransform[x]}function l(x){var M=function(){for(var E=[],N=0,D=arguments.length;N<D;N++){var C=arguments[N];E[N]=C&&C.valueOf()}return x.apply(n,E)};return x.transform&&(M.transform=x.transform),M}function f(x,M){if(xc("Factories of type { name, factory } are deprecated since v6. Please create your factory functions using the math.factory function."),typeof x.name=="string"){var A=x.name,E=A in n.expression.transform,N=x.path?Kk(n,x.path):n,D=Et(N,A)?N[A]:void 0,C=function(){var I=e(x);if(I&&typeof I.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(d(D)&&d(I))return M.override||(I=t(D,I)),I;if(D===void 0||M.override)return I;if(M.silent)return D;throw new Error('Cannot import "'+A+'": already exists')};x.lazy!==!1?(tc(N,A,C),E?u(A):(x.path==="expression.transform"||v(x))&&tc(n.expression.mathWithTransform,A,C)):(N[A]=C(),E?u(A):(x.path==="expression.transform"||v(x))&&(n.expression.mathWithTransform[A]=C()));var T=x.path?x.path+"."+x.name:x.name;r[T]=x,n.emit("import",A,C,x.path)}else e(x)}function c(x,M){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.fn;if(Iz(A,"."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(A));var E=y(x)?n.expression.transform:n,N=A in n.expression.transform,D=Et(E,A)?E[A]:void 0,C=function(){var P={};x.dependencies.map(t$).forEach(function(U){if(Iz(U,"."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(U));U==="math"?P.math=n:U==="mathWithTransform"?P.mathWithTransform=n.expression.mathWithTransform:U==="classes"?P.classes=n:P[U]=n[U]});var I=x(P);if(I&&typeof I.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(D===void 0||M.override)return I;if(d(D)&&d(I))return t(D,I);if(M.silent)return D;throw new Error('Cannot import "'+A+'": already exists')};!x.meta||x.meta.lazy!==!1?(tc(E,A,C),D&&N?u(A):(y(x)||g(x))&&tc(n.expression.mathWithTransform,A,function(){return E[A]})):(E[A]=C(),D&&N?u(A):(y(x)||g(x))&&tc(n.expression.mathWithTransform,A,function(){return E[A]})),r[A]=x,n.emit("import",A,C)}function p(x){return typeof x=="function"||typeof x=="number"||typeof x=="string"||typeof x=="boolean"||x===null||Uc(x)||qo(x)||Jt(x)||kc(x)||Dn(x)||Array.isArray(x)}function d(x){return typeof x=="function"&&Zg(x.signatures)==="object"}function h(x){return typeof x=="function"&&typeof x.signature=="string"}function m(x){return!Et(_,x)}function v(x){return x.path===void 0&&!Et(_,x.name)}function g(x){return x.fn.indexOf(".")===-1&&!Et(_,x.fn)&&(!x.meta||!x.meta.isClass)}function y(x){return x!==void 0&&x.meta!==void 0&&x.meta.isTransformFunction===!0||!1}var _={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return a}function sL(){return sL=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sL.apply(this,arguments)}function jZ(t,e){var n=sL({},uM,e);if(typeof Object.create!="function")throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r=D_e({isNumber:pn,isComplex:qo,isBigNumber:Jt,isFraction:kc,isUnit:Uc,isString:Ca,isArray:zn,isMatrix:Dn,isCollection:Cu,isDenseMatrix:Qd,isSparseMatrix:sc,isRange:mh,isIndex:vp,isBoolean:lM,isResultSet:A1,isHelp:Zm,isFunction:cM,isDate:fM,isRegExp:pM,isObject:dM,isNull:hM,isUndefined:mM,isAccessorNode:gc,isArrayNode:N1,isAssignmentNode:vM,isBlockNode:gM,isConditionalNode:yM,isConstantNode:tr,isFunctionAssignmentNode:gp,isFunctionNode:yp,isIndexNode:vh,isNode:Cn,isObjectNode:C1,isOperatorNode:Gi,isParenthesisNode:sl,isRangeNode:D1,isSymbolNode:ri,isChain:Jm});r.config=dle(n,r.emit),r.expression={transform:{},mathWithTransform:{config:r.config}};var a=[],s=[];function o(p){if($g(p))return p(r);var d=p[Object.keys(p)[0]];if($g(d))return d(r);if(!VW(p))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",p),new Error("Factory object with properties `type`, `name`, and `factory` expected");var h=a.indexOf(p),m;return h===-1?(p.math===!0?m=p.factory(r.type,n,o,r.typed,r):m=p.factory(r.type,n,o,r.typed),a.push(p),s.push(m)):m=s[h],m}var u={};function l(){for(var p=arguments.length,d=new Array(p),h=0;h<p;h++)d[h]=arguments[h];return r.typed.apply(r.typed,d)}var f=I_e(l,o,r,u);r.import=f,r.on("config",function(){Ez(u).forEach(function(p){p&&p.meta&&p.meta.recreateOnConfigChange&&f(p,{override:!0})})}),r.create=jZ.bind(null,t),r.factory=ye,r.import(Ez(fle(t)));var c=["type.isNumber","type.isComplex","type.isBigNumber","type.isFraction","type.isUnit","type.isString","type.isArray","type.isMatrix","type.isDenseMatrix","type.isSparseMatrix","type.isCollection","type.isRange","type.isIndex","type.isBoolean","type.isResultSet","type.isHelp","type.isFunction","type.isDate","type.isRegExp","type.isObject","type.isNull","type.isUndefined","type.isAccessorNode","type.isArrayNode","type.isAssignmentNode","type.isBlockNode","type.isConditionalNode","type.isConstantNode","type.isFunctionAssignmentNode","type.isFunctionNode","type.isIndexNode","type.isNode","type.isObjectNode","type.isOperatorNode","type.isParenthesisNode","type.isRangeNode","type.isSymbolNode","type.isChain","type.BigNumber","type.Chain","type.Complex","type.Fraction","type.Matrix","type.DenseMatrix","type.SparseMatrix","type.Spa","type.FibonacciHeap","type.ImmutableDenseMatrix","type.Index","type.Range","type.ResultSet","type.Unit","type.Help","type.Parser","expression.parse","expression.Parser","expression.node.AccessorNode","expression.node.ArrayNode","expression.node.AssignmentNode","expression.node.BlockNode","expression.node.ConditionalNode","expression.node.ConstantNode","expression.node.IndexNode","expression.node.FunctionAssignmentNode","expression.node.FunctionNode","expression.node.Node","expression.node.ObjectNode","expression.node.OperatorNode","expression.node.ParenthesisNode","expression.node.RangeNode","expression.node.RelationalNode","expression.node.SymbolNode","json.reviver","error.ArgumentsError","error.DimensionError","error.IndexError"];return c.forEach(function(p){var d=p.split("."),h=Ule(d),m=kle(d),v=Kk(r,h);tc(v,m,function(){return xc("math.".concat(p," is moved to math.").concat(m," in v6.0.0. ")+"Please use the new location instead."),r[m]})}),tc(r.expression,"docs",function(){throw new Error(`math.expression.docs has been moved. Please import via "import { docs } from 'mathjs'"`)}),r.ArgumentsError=_l,r.DimensionError=nn,r.IndexError=po,r}function P_e(){return function(){throw new Error(`The global import function is not available anymore in v6.0.0. 
Please create a mathjs instance if you want to import functions. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.import(...);
`)}}var O_e=nN({evaluate:dw}),L_e=P_e(),k_e=_N({variance:Cm}),U_e=WM({typeOf:pw}),F_e=By("type",{isNumber:pn,isComplex:qo,isBigNumber:Jt,isFraction:kc,isUnit:Uc,isString:Ca,isArray:zn,isMatrix:Dn,isCollection:Cu,isDenseMatrix:Qd,isSparseMatrix:sc,isRange:mh,isIndex:vp,isBoolean:lM,isResultSet:A1,isHelp:Zm,isFunction:cM,isDate:fM,isRegExp:pM,isObject:dM,isNull:hM,isUndefined:mM,isAccessorNode:gc,isArrayNode:N1,isAssignmentNode:vM,isBlockNode:gM,isConditionalNode:yM,isConstantNode:tr,isFunctionAssignmentNode:gp,isFunctionNode:yp,isIndexNode:vh,isNode:Cn,isObjectNode:C1,isOperatorNode:Gi,isParenthesisNode:sl,isRangeNode:D1,isSymbolNode:ri,isChain:Jm,BigNumber:lt,Chain:ex,Complex:Ar,Fraction:Bc,Matrix:tv,DenseMatrix:bn,SparseMatrix:Ml,Spa:N3,FibonacciHeap:T3,ImmutableDenseMatrix:E3,Index:$i,Range:S3,ResultSet:b3,Unit:Vt,Help:H3,Parser:tx}),B_e=By("expression",{parse:El,Parser:tx,node:By("expression.node",{AccessorNode:z3,ArrayNode:P3,AssignmentNode:G3,BlockNode:O3,ConditionalNode:U3,ConstantNode:_h,IndexNode:q3,FunctionAssignmentNode:B3,FunctionNode:Th,Node:Ji,ObjectNode:L3,OperatorNode:Eh,ParenthesisNode:Mh,RangeNode:F3,RelationalNode:k3,SymbolNode:Mp})}),z_e=By("json",{reviver:qU}),q_e=By("error",{ArgumentsError:_l,DimensionError:nn,IndexError:po});function By(t,e){var n={};return Object.keys(e).forEach(function(r){tc(n,r,function(){return xc("math.".concat(t,".").concat(r," is moved to math.").concat(r," in v6.0.0. ")+"Please use the new location instead."),e[r]})}),n}const G_e=Object.freeze(Object.defineProperty({__proto__:null,AccessorNode:z3,AccessorNodeDependencies:EZ,ArgumentsError:_l,ArrayNode:P3,ArrayNodeDependencies:TZ,AssignmentNode:G3,AssignmentNodeDependencies:AZ,BigNumber:lt,BigNumberDependencies:ct,BlockNode:O3,BlockNodeDependencies:NZ,Chain:ex,ChainDependencies:BZ,Complex:Ar,ComplexDependencies:Fr,ConditionalNode:U3,ConditionalNodeDependencies:CZ,ConstantNode:_h,ConstantNodeDependencies:ix,DenseMatrix:bn,DenseMatrixDependencies:Rn,DimensionError:nn,EDependencies:J2e,FibonacciHeap:T3,FibonacciHeapDependencies:gZ,Fraction:Bc,FractionDependencies:Ah,FunctionAssignmentNode:B3,FunctionAssignmentNodeDependencies:DZ,FunctionNode:Th,FunctionNodeDependencies:ox,Help:H3,HelpDependencies:FZ,ImmutableDenseMatrix:E3,ImmutableDenseMatrixDependencies:lZ,Index:$i,IndexDependencies:za,IndexError:po,IndexNode:q3,IndexNodeDependencies:RZ,InfinityDependencies:twe,LN10:Ij,LN10Dependencies:nwe,LN2:xX,LN2Dependencies:rwe,LOG10E:Pj,LOG10EDependencies:iwe,LOG2E:Gj,LOG2EDependencies:awe,Matrix:tv,MatrixDependencies:W3,NaNDependencies:swe,Node:Ji,NodeDependencies:qa,ObjectNode:L3,ObjectNodeDependencies:IZ,OperatorNode:Eh,OperatorNodeDependencies:ax,PIDependencies:lwe,ParenthesisNode:Mh,ParenthesisNodeDependencies:sx,Parser:tx,ParserDependencies:kZ,Range:S3,RangeDependencies:rZ,RangeNode:F3,RangeNodeDependencies:PZ,RelationalNode:k3,RelationalNodeDependencies:OZ,ResultSet:b3,ResultSetDependencies:nZ,SQRT1_2:Lj,SQRT1_2Dependencies:cwe,SQRT2:OX,SQRT2Dependencies:fwe,Spa:N3,SpaDependencies:yZ,SparseMatrix:Ml,SparseMatrixDependencies:Ep,SymbolNode:Mp,SymbolNodeDependencies:cv,Unit:Vt,UnitDependencies:jt,_Infinity:qj,_NaN:Oj,_false:Aj,_null:Nj,_true:Cj,abs:Os,absDependencies:xo,acos:aX,acosDependencies:qSe,acosh:NX,acoshDependencies:GSe,acot:sX,acotDependencies:HSe,acoth:ZX,acothDependencies:VSe,acsc:oX,acscDependencies:WSe,acsch:CX,acschDependencies:$Se,add:pi,addDependencies:Ti,addScalar:Zi,addScalarDependencies:ha,all:A_e,and:bY,andDependencies:ISe,apply:_3,applyDependencies:HU,applyTransformDependencies:f_e,arg:Kj,argDependencies:eSe,asec:uX,asecDependencies:jSe,asech:pY,asechDependencies:XSe,asin:lX,asinDependencies:YSe,asinh:DX,asinhDependencies:QSe,atan:SU,atan2:JX,atan2Dependencies:ZSe,atanDependencies:xZ,atanh:cX,atanhDependencies:JSe,atomicMass:$Y,atomicMassDependencies:mwe,avogadro:bQ,avogadroDependencies:vwe,bellNumbers:xQ,bellNumbersDependencies:W2e,bignumber:fl,bignumberDependencies:Vc,bitAnd:zX,bitAndDependencies:Qbe,bitNot:Jj,bitNotDependencies:Zbe,bitOr:yY,bitOrDependencies:Jbe,bitXor:qX,bitXorDependencies:Kbe,bohrMagneton:jY,bohrMagnetonDependencies:gwe,bohrRadius:LQ,bohrRadiusDependencies:ywe,boltzmann:XY,boltzmannDependencies:xwe,boolean:Wj,booleanDependencies:Obe,catalan:UY,catalanDependencies:$2e,cbrt:LX,cbrtDependencies:Ube,ceil:CU,ceilDependencies:iZ,chain:QQ,chainDependencies:A2e,classicalElectronRadius:SQ,classicalElectronRadiusDependencies:bwe,clone:bX,cloneDependencies:Cbe,column:mQ,columnDependencies:aSe,columnTransformDependencies:p_e,combinations:j1,combinationsDependencies:K3,combinationsWithRep:IX,combinationsWithRepDependencies:F2e,compare:Sh,compareDependencies:lv,compareNatural:Ru,compareNaturalDependencies:Al,compareText:MU,compareTextDependencies:mZ,compile:ZQ,compileDependencies:S2e,complex:w3,complexDependencies:GU,composition:tY,compositionDependencies:j2e,concat:M3,concatDependencies:VU,concatTransformDependencies:__e,conductanceQuantum:YY,conductanceQuantumDependencies:Swe,config:at,conj:X1,conjDependencies:Y3,cos:wU,cosDependencies:bZ,cosh:fX,coshDependencies:KSe,cot:wY,cotDependencies:e2e,coth:pX,cothDependencies:t2e,coulomb:$Q,coulombDependencies:wwe,create:jZ,createAbs:iE,createAccessorNode:FA,createAcos:QT,createAcosh:ZT,createAcot:JT,createAcoth:KT,createAcsc:eA,createAcsch:tA,createAdd:RA,createAddScalar:aE,createAnd:AT,createApply:P1,createApplyTransform:i3,createArg:PE,createArrayNode:BA,createAsec:nA,createAsech:rA,createAsin:iA,createAsinh:aA,createAssignmentNode:zA,createAtan:sA,createAtan2:oA,createAtanh:uA,createAtomicMass:kC,createAvogadro:UC,createBellNumbers:kN,createBigNumberClass:NM,createBignumber:ZM,createBitAnd:CE,createBitNot:DE,createBitOr:RE,createBitXor:IE,createBlockNode:qA,createBohrMagneton:vC,createBohrRadius:wC,createBoltzmann:FC,createBoolean:QM,createCatalan:UN,createCbrt:sE,createCeil:oE,createChain:pN,createChainClass:cN,createClassicalElectronRadius:_C,createClone:OM,createColumn:L1,createColumnTransform:a3,createCombinations:EN,createCombinationsWithRep:TN,createCompare:NT,createCompareNatural:CT,createCompareText:DT,createCompile:eN,createComplex:JM,createComplexClass:CM,createComposition:FN,createConcat:O1,createConcatTransform:v3,createConditionalNode:GA,createConductanceQuantum:gC,createConj:OE,createConstantNode:HA,createCos:lA,createCosh:cA,createCot:fA,createCoth:pA,createCoulomb:hC,createCreateUnit:YT,createCross:zE,createCsc:dA,createCsch:hA,createCtranspose:iT,createCube:uE,createDeepEqual:UT,createDenseMatrixClass:PM,createDeprecatedEval:nN,createDeprecatedTypeof:WM,createDeprecatedVar:_N,createDerivative:zN,createDet:dN,createDeuteronMass:CC,createDiag:qE,createDistance:xN,createDivide:yN,createDivideScalar:hT,createDot:OA,createDotDivide:ST,createDotMultiply:NE,createDotPow:bT,createE:ZN,createEfimovFactor:LC,createEigs:mN,createElectricConstant:pC,createElectronMass:MC,createElementaryCharge:mC,createEqual:RT,createEqualScalar:$M,createEqualText:IT,createErf:sT,createEvaluate:tN,createExp:lE,createExpm:vN,createExpm1:cE,createEye:GE,createFactorial:NN,createFalse:WN,createFaraday:BC,createFermiCoupling:EC,createFibonacciHeapClass:HT,createFilter:VE,createFilterTransform:s3,createFineStructure:TC,createFirstRadiation:zC,createFix:fE,createFlatten:WE,createFloor:pE,createForEach:$E,createForEachTransform:o3,createFormat:lT,createFraction:KM,createFractionClass:DM,createFunctionAssignmentNode:VA,createFunctionNode:JA,createGamma:AN,createGasConstant:GC,createGcd:dE,createGetMatrixDataType:jE,createGravitationConstant:uC,createGravity:ZC,createHartreeEnergy:AC,createHasNumericValue:zM,createHelp:fN,createHelpClass:lN,createHypot:IA,createI:aC,createIdentity:XE,createIm:LE,createImmutableDenseMatrixClass:qT,createIndex:kA,createIndexClass:GT,createIndexNode:WA,createIndexTransform:u3,createInfinity:jN,createIntersect:bN,createInv:hN,createInverseConductanceQuantum:yC,createIsInteger:kM,createIsNaN:HM,createIsNegative:FM,createIsNumeric:BM,createIsPositive:qM,createIsPrime:pT,createIsZero:GM,createKldivergence:CN,createKlitzing:SC,createKron:YE,createLN10:eC,createLN2:KN,createLOG10E:nC,createLOG2E:tC,createLarger:LT,createLargerEq:kT,createLcm:mE,createLeftShift:MT,createLog:gT,createLog10:vE,createLog1p:yT,createLog2:gE,createLoschmidt:qC,createLsolve:wT,createLup:aN,createLusolve:uN,createMad:wN,createMagneticConstant:fC,createMagneticFluxQuantum:xC,createMap:QE,createMapTransform:l3,createMatrix:eE,createMatrixClass:IM,createMax:B1,createMaxTransform:c3,createMean:G1,createMeanTransform:f3,createMedian:SN,createMin:z1,createMinTransform:p3,createMod:xE,createMode:oT,createMolarMass:YC,createMolarMassC12:QC,createMolarPlanckConstant:HC,createMolarVolume:VC,createMultinomial:DN,createMultiply:SE,createMultiplyScalar:bE,createNaN:XN,createNeutronMass:DC,createNode:UA,createNorm:PA,createNot:UE,createNthRoot:wE,createNthRoots:xT,createNuclearMagneton:bC,createNull:$N,createNumber:XM,createNumeric:dT,createObjectNode:$A,createOnes:ZE,createOperatorNode:jA,createOr:FE,createParenthesisNode:XA,createParse:KA,createParser:iN,createParserClass:rN,createPartitionSelect:BT,createPermutations:RN,createPhi:JN,createPi:YN,createPickRandom:IN,createPlanckCharge:t3,createPlanckConstant:lC,createPlanckLength:JC,createPlanckMass:KC,createPlanckTemperature:n3,createPlanckTime:e3,createPow:mT,createPrint:cT,createProd:uT,createProtonMass:NC,createQr:sN,createQuantileSeq:MN,createQuantumOfCirculation:RC,createRandom:PN,createRandomInt:ON,createRange:k1,createRangeClass:RM,createRangeNode:YA,createRangeTransform:d3,createRationalize:qN,createRe:kE,createReducedPlanckConstant:cC,createRelationalNode:QA,createReplacer:HN,createReshape:KE,createResize:eT,createResultSet:MM,createReviver:GN,createRightArithShift:ET,createRightLogShift:TT,createRound:vT,createRow:U1,createRowTransform:h3,createRydberg:IC,createSQRT1_2:rC,createSQRT2:iC,createSackurTetrode:WC,createSec:mA,createSech:vA,createSecondRadiation:$C,createSetCartesian:SA,createSetDifference:wA,createSetDistinct:_A,createSetIntersect:MA,createSetIsSubset:EA,createSetMultiplicity:TA,createSetPowerset:AA,createSetSize:NA,createSetSymDifference:CA,createSetUnion:DA,createSign:_E,createSimplify:BN,createSin:gA,createSinh:yA,createSize:tT,createSlu:oN,createSmaller:PT,createSmallerEq:OT,createSort:zT,createSpaClass:VT,createSparse:XT,createSparseMatrixClass:jM,createSpeedOfLight:oC,createSplitUnit:tE,createSqrt:ME,createSqrtm:gN,createSquare:EE,createSqueeze:nT,createStd:V1,createStdTransform:g3,createStefanBoltzmann:jC,createStirlingS2:LN,createString:YM,createSubset:F1,createSubsetTransform:m3,createSubtract:TE,createSum:q1,createSumTransform:y3,createSymbolNode:ZA,createTan:xA,createTanh:bA,createTau:QN,createThomsonCrossSection:PC,createTo:fT,createTrace:LA,createTranspose:rT,createTrue:VN,createTypeOf:VM,createTyped:_M,createUnaryMinus:nE,createUnaryPlus:rE,createUnequal:FT,createUnit:zY,createUnitClass:$T,createUnitDependencies:zSe,createUnitFunction:jT,createUppercaseE:mU,createUppercasePi:hU,createUsolve:_T,createVacuumImpedance:dC,createVariance:H1,createVarianceTransform:x3,createVersion:sC,createWeakMixingAngle:OC,createWienDisplacement:XC,createXgcd:AE,createXor:BE,createZeros:aT,cross:EY,crossDependencies:sSe,csc:RX,cscDependencies:n2e,csch:dX,cschDependencies:r2e,ctranspose:TY,ctransposeDependencies:xSe,cube:Xj,cubeDependencies:Fbe,deepEqual:PY,deepEqualDependencies:OSe,deprecatedEval:O_e,deprecatedImport:L_e,deprecatedTypeof:U_e,deprecatedVar:k_e,derivative:tZ,derivativeDependencies:X2e,det:OU,detDependencies:zZ,deuteronMass:QY,deuteronMassDependencies:_we,diag:HX,diagDependencies:oSe,distance:kY,distanceDependencies:R2e,divide:wu,divideDependencies:Nl,divideScalar:Oi,divideScalarDependencies:Ki,docs:Sj,dot:_Y,dotDependencies:y2e,dotDivide:kU,dotDivideDependencies:pZ,dotMultiply:nY,dotMultiplyDependencies:Ybe,dotPow:uY,dotPowDependencies:NSe,e:aL,eDependencies:WZ,efimovFactor:Uj,efimovFactorDependencies:Mwe,eigs:gQ,eigsDependencies:N2e,electricConstant:wQ,electricConstantDependencies:Ewe,electronMass:ZY,electronMassDependencies:Twe,elementaryCharge:kQ,elementaryChargeDependencies:Awe,equal:Hc,equalDependencies:Cp,equalScalar:Yn,equalScalarDependencies:Kn,equalText:cY,equalTextDependencies:PSe,erf:rX,erfDependencies:bSe,error:q_e,evalDependencies:w2e,evaluate:dw,evaluateDependencies:LZ,exp:_X,expDependencies:Bbe,expm:GY,expm1:Yj,expm1Dependencies:zbe,expmDependencies:C2e,expression:B_e,eye:Tj,eyeDependencies:uSe,factorial:J1,factorialDependencies:eD,factory:ye,falseDependencies:K2e,faraday:JY,faradayDependencies:Nwe,fermiCoupling:_Q,fermiCouplingDependencies:Cwe,filter:tX,filterDependencies:lSe,filterTransformDependencies:d_e,fineStructure:Fj,fineStructureDependencies:Dwe,firstRadiation:KY,firstRadiationDependencies:Rwe,fix:DU,fixDependencies:sZ,flatten:iY,flattenDependencies:cSe,floor:TU,floorDependencies:aZ,forEach:nX,forEachDependencies:fSe,forEachTransformDependencies:h_e,format:bU,formatDependencies:fZ,fraction:wp,fractionDependencies:Nh,gamma:AU,gammaDependencies:HZ,gasConstant:GQ,gasConstantDependencies:Iwe,gcd:kX,gcdDependencies:qbe,getMatrixDataType:EX,getMatrixDataTypeDependencies:pSe,gravitationConstant:eQ,gravitationConstantDependencies:Pwe,gravity:MQ,gravityDependencies:Owe,hartreeEnergy:tQ,hartreeEnergyDependencies:Lwe,hasNumericValue:SX,hasNumericValueDependencies:Dbe,help:eZ,helpDependencies:T2e,hypot:LY,hypotDependencies:v2e,i:Rj,iDependencies:ewe,identity:bh,identityDependencies:uv,im:eX,imDependencies:tSe,index:RY,indexDependencies:b2e,indexTransformDependencies:m_e,intersect:yQ,intersectDependencies:I2e,inv:rv,invDependencies:ux,inverseConductanceQuantum:UQ,inverseConductanceQuantumDependencies:kwe,isAccessorNode:gc,isArray:zn,isArrayNode:N1,isAssignmentNode:vM,isBigNumber:Jt,isBlockNode:gM,isBoolean:lM,isChain:Jm,isCollection:Cu,isComplex:qo,isConditionalNode:yM,isConstantNode:tr,isDate:fM,isDenseMatrix:Qd,isFraction:kc,isFunction:cM,isFunctionAssignmentNode:gp,isFunctionNode:yp,isHelp:Zm,isIndex:vp,isIndexNode:vh,isInteger:Vo,isIntegerDependencies:Iu,isMatrix:Dn,isNaN:nv,isNaNDependencies:nx,isNegative:xh,isNegativeDependencies:av,isNode:Cn,isNull:hM,isNumber:pn,isNumeric:yh,isNumericDependencies:sv,isObject:dM,isObjectNode:C1,isOperatorNode:Gi,isParenthesisNode:sl,isPositive:W1,isPositiveDependencies:$3,isPrime:iX,isPrimeDependencies:ESe,isRange:mh,isRangeNode:D1,isRegExp:pM,isResultSet:A1,isSparseMatrix:sc,isString:Ca,isSymbolNode:ri,isUndefined:mM,isUnit:Uc,isZero:wh,isZeroDependencies:ov,json:z_e,kldivergence:OQ,kldivergenceDependencies:B2e,klitzing:nQ,klitzingDependencies:Uwe,kron:xY,kronDependencies:dSe,larger:Wo,largerDependencies:Pu,largerEq:Q1,largerEqDependencies:Q3,lcm:gY,lcmDependencies:Gbe,leftShift:jX,leftShiftDependencies:CSe,log:I3,log10:Qj,log10Dependencies:Hbe,log1p:qQ,log1pDependencies:TSe,log2:MX,log2Dependencies:Vbe,logDependencies:jU,loschmidt:EQ,loschmidtDependencies:Fwe,lsolve:RU,lsolveDependencies:dZ,lup:R3,lupDependencies:YU,lusolve:vQ,lusolveDependencies:E2e,mad:jQ,madDependencies:O2e,magneticConstant:rQ,magneticConstantDependencies:Bwe,magneticFluxQuantum:WQ,magneticFluxQuantumDependencies:zwe,map:xU,mapDependencies:cZ,mapTransformDependencies:v_e,matrix:xt,matrixDependencies:St,max:EU,maxDependencies:vZ,maxTransformDependencies:g_e,mean:HY,meanDependencies:P2e,meanTransformDependencies:y_e,median:zU,medianDependencies:GZ,min:fY,minDependencies:USe,minTransformDependencies:x_e,mod:UX,modDependencies:Wbe,mode:TX,modeDependencies:SSe,molarMass:iQ,molarMassC12:TQ,molarMassC12Dependencies:Gwe,molarMassDependencies:qwe,molarPlanckConstant:aQ,molarPlanckConstantDependencies:Hwe,molarVolume:FQ,molarVolumeDependencies:Vwe,multinomial:WY,multinomialDependencies:z2e,multiply:ii,multiplyDependencies:hi,multiplyScalar:da,multiplyScalarDependencies:Ba,neutronMass:sQ,neutronMassDependencies:Wwe,norm:mY,normDependencies:g2e,not:yU,notDependencies:uZ,nthRoot:FX,nthRootDependencies:$be,nthRoots:IY,nthRootsDependencies:ASe,nuclearMagneton:AQ,nuclearMagnetonDependencies:$we,nullDependencies:owe,number:$1,numberDependencies:j3,numeric:Z1,numericDependencies:Z3,ones:VX,onesDependencies:hSe,or:GX,orDependencies:rSe,parse:El,parseDependencies:Dp,parser:JQ,parserDependencies:_2e,partitionSelect:A3,partitionSelectDependencies:XU,permutations:MY,permutationsDependencies:q2e,phi:Vj,phiDependencies:uwe,pi:iL,piDependencies:$Z,pickRandom:gX,pickRandomDependencies:G2e,planckCharge:oQ,planckChargeDependencies:jwe,planckConstant:HQ,planckConstantDependencies:Xwe,planckLength:uQ,planckLengthDependencies:Ywe,planckMass:NQ,planckMassDependencies:Qwe,planckTemperature:lQ,planckTemperatureDependencies:Zwe,planckTime:BQ,planckTimeDependencies:Jwe,pow:Gc,powDependencies:Np,print:AX,printDependencies:_Se,prod:oY,prodDependencies:wSe,protonMass:cQ,protonMassDependencies:Kwe,qr:qY,qrDependencies:M2e,quantileSeq:vY,quantileSeqDependencies:k2e,quantumOfCirculation:CQ,quantumOfCirculationDependencies:e_e,random:PX,randomDependencies:H2e,randomInt:yX,randomIntDependencies:V2e,range:Nm,rangeDependencies:rx,rangeTransformDependencies:b_e,rationalize:KQ,rationalizeDependencies:Y2e,re:rY,reDependencies:nSe,reducedPlanckConstant:fQ,reducedPlanckConstantDependencies:t_e,replacer:Dj,replacerDependencies:Z2e,reshape:WX,reshapeDependencies:mSe,resize:aY,resizeDependencies:vSe,reviver:qU,reviverDependencies:Q2e,rightArithShift:lY,rightArithShiftDependencies:DSe,rightLogShift:XX,rightLogShiftDependencies:RSe,round:Y1,roundDependencies:X3,row:BY,rowDependencies:gSe,rowTransformDependencies:S_e,rydberg:XQ,rydbergDependencies:n_e,sackurTetrode:Bj,sackurTetrodeDependencies:r_e,sec:KX,secDependencies:i2e,sech:hX,sechDependencies:a2e,secondRadiation:pQ,secondRadiationDependencies:i_e,setCartesian:AY,setCartesianDependencies:l2e,setDifference:IU,setDifferenceDependencies:wZ,setDistinct:NY,setDistinctDependencies:c2e,setIntersect:BU,setIntersectDependencies:_Z,setIsSubset:CY,setIsSubsetDependencies:f2e,setMultiplicity:OY,setMultiplicityDependencies:p2e,setPowerset:DY,setPowersetDependencies:d2e,setSize:hY,setSizeDependencies:h2e,setSymDifference:UU,setSymDifferenceDependencies:MZ,setUnion:VQ,setUnionDependencies:m2e,sign:gU,signDependencies:oZ,simplify:V3,simplifyDependencies:QU,sin:_U,sinDependencies:SZ,sinh:mX,sinhDependencies:s2e,size:go,sizeDependencies:Ko,slu:PU,sluDependencies:UZ,smaller:Su,smallerDependencies:Tl,smallerEq:D3,smallerEqDependencies:WU,sort:SY,sortDependencies:kSe,sparse:QX,sparseDependencies:BSe,speedOfLight:DQ,speedOfLightDependencies:a_e,splitUnit:$j,splitUnitDependencies:Lbe,sqrt:qc,sqrtDependencies:Ap,sqrtm:PQ,sqrtmDependencies:D2e,square:Zj,squareDependencies:jbe,squeeze:sY,squeezeDependencies:ySe,std:VY,stdDependencies:U2e,stdTransformDependencies:M_e,stefanBoltzmann:dQ,stefanBoltzmannDependencies:s_e,stirlingS2:LU,stirlingS2Dependencies:VZ,string:wX,stringDependencies:Pbe,subset:yo,subsetDependencies:eu,subsetTransformDependencies:w_e,subtract:Ei,subtractDependencies:Li,sum:NU,sumDependencies:qZ,sumTransformDependencies:E_e,tan:dY,tanDependencies:o2e,tanh:vX,tanhDependencies:u2e,tau:kj,tauDependencies:pwe,thomsonCrossSection:zQ,thomsonCrossSectionDependencies:o_e,to:$X,toDependencies:MSe,trace:eY,traceDependencies:x2e,transpose:C3,transposeDependencies:$U,trueDependencies:dwe,type:F_e,typeOf:pw,typeOfDependencies:Rbe,typed:De,typedDependencies:Re,typeofDependencies:Ibe,unaryMinus:zc,unaryMinusDependencies:Tp,unaryPlus:jj,unaryPlusDependencies:kbe,unequal:YX,unequalDependencies:LSe,unit:IQ,unitDependencies:FSe,usolve:FU,usolveDependencies:hZ,vacuumImpedance:hQ,vacuumImpedanceDependencies:u_e,varDependencies:L2e,variance:Cm,varianceDependencies:J3,varianceTransformDependencies:T_e,version:Hj,versionDependencies:hwe,weakMixingAngle:zj,weakMixingAngleDependencies:l_e,wienDisplacement:RQ,wienDisplacementDependencies:c_e,xgcd:BX,xgcdDependencies:Xbe,xor:FY,xorDependencies:iSe,zeros:_p,zerosDependencies:Ch},Symbol.toStringTag,{value:"Module"})),H_e=GH(G_e);var ai={},fv={},_I={},MI={},Xn={};function XZ(t){return"["+t.join(", ")+"]"}String.prototype.seed=String.prototype.seed||Math.round(Math.random()*Math.pow(2,32));String.prototype.hashCode=function(){var t,e,n,r,a,s,o,u,l=this.toString();for(t=l.length&3,e=l.length-t,n=String.prototype.seed,a=3432918353,s=461845907,u=0;u<e;)o=l.charCodeAt(u)&255|(l.charCodeAt(++u)&255)<<8|(l.charCodeAt(++u)&255)<<16|(l.charCodeAt(++u)&255)<<24,++u,o=(o&65535)*a+(((o>>>16)*a&65535)<<16)&4294967295,o=o<<15|o>>>17,o=(o&65535)*s+(((o>>>16)*s&65535)<<16)&4294967295,n^=o,n=n<<13|n>>>19,r=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(r&65535)+27492+(((r>>>16)+58964&65535)<<16);switch(o=0,t){case 3:o^=(l.charCodeAt(u+2)&255)<<16;case 2:o^=(l.charCodeAt(u+1)&255)<<8;case 1:o^=l.charCodeAt(u)&255,o=(o&65535)*a+(((o>>>16)*a&65535)<<16)&4294967295,o=o<<15|o>>>17,o=(o&65535)*s+(((o>>>16)*s&65535)<<16)&4294967295,n^=o}return n^=l.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0};function YZ(t,e){return t.equals(e)}function QZ(t){return t.hashCode()}function Dh(t,e){return this.data={},this.hashFunction=t||QZ,this.equalsFunction=e||YZ,this}Object.defineProperty(Dh.prototype,"length",{get:function(){var t=0;for(var e in this.data)e.indexOf("hash_")===0&&(t=t+this.data[e].length);return t}});Dh.prototype.add=function(t){var e=this.hashFunction(t),n="hash_"+e;if(n in this.data){for(var r=this.data[n],a=0;a<r.length;a++)if(this.equalsFunction(t,r[a]))return r[a];return r.push(t),t}else return this.data[n]=[t],t};Dh.prototype.contains=function(t){return this.get(t)!=null};Dh.prototype.get=function(t){var e=this.hashFunction(t),n="hash_"+e;if(n in this.data){for(var r=this.data[n],a=0;a<r.length;a++)if(this.equalsFunction(t,r[a]))return r[a]}return null};Dh.prototype.values=function(){var t=[];for(var e in this.data)e.indexOf("hash_")===0&&(t=t.concat(this.data[e]));return t};Dh.prototype.toString=function(){return XZ(this.values())};function $o(){return this.data=[],this}$o.prototype.add=function(t){this.data[t]=!0};$o.prototype.or=function(t){var e=this;Object.keys(t.data).map(function(n){e.add(n)})};$o.prototype.remove=function(t){delete this.data[t]};$o.prototype.contains=function(t){return this.data[t]===!0};$o.prototype.values=function(){return Object.keys(this.data)};$o.prototype.minValue=function(){return Math.min.apply(null,this.values())};$o.prototype.hashCode=function(){var t=new lx;return t.update(this.values()),t.finish()};$o.prototype.equals=function(t){return t instanceof $o?this.hashCode()===t.hashCode():!1};Object.defineProperty($o.prototype,"length",{get:function(){return this.values().length}});$o.prototype.toString=function(){return"{"+this.values().join(", ")+"}"};function Wc(t,e){return this.data={},this.hashFunction=t||QZ,this.equalsFunction=e||YZ,this}Object.defineProperty(Wc.prototype,"length",{get:function(){var t=0;for(var e in this.data)e.indexOf("hash_")===0&&(t=t+this.data[e].length);return t}});Wc.prototype.put=function(t,e){var n="hash_"+this.hashFunction(t);if(n in this.data){for(var r=this.data[n],a=0;a<r.length;a++){var s=r[a];if(this.equalsFunction(t,s.key)){var o=s.value;return s.value=e,o}}return r.push({key:t,value:e}),e}else return this.data[n]=[{key:t,value:e}],e};Wc.prototype.containsKey=function(t){var e="hash_"+this.hashFunction(t);if(e in this.data)for(var n=this.data[e],r=0;r<n.length;r++){var a=n[r];if(this.equalsFunction(t,a.key))return!0}return!1};Wc.prototype.get=function(t){var e="hash_"+this.hashFunction(t);if(e in this.data)for(var n=this.data[e],r=0;r<n.length;r++){var a=n[r];if(this.equalsFunction(t,a.key))return a.value}return null};Wc.prototype.entries=function(){var t=[];for(var e in this.data)e.indexOf("hash_")===0&&(t=t.concat(this.data[e]));return t};Wc.prototype.getKeys=function(){return this.entries().map(function(t){return t.key})};Wc.prototype.getValues=function(){return this.entries().map(function(t){return t.value})};Wc.prototype.toString=function(){var t=this.entries().map(function(e){return"{"+e.key+":"+e.value+"}"});return"["+t.join(", ")+"]"};function tD(){return this.data={},this}tD.prototype.get=function(t){return t="k-"+t,t in this.data?this.data[t]:null};tD.prototype.put=function(t,e){t="k-"+t,this.data[t]=e};tD.prototype.values=function(){var t=this.data,e=Object.keys(this.data);return e.map(function(n){return t[n]})};function KU(){return this}function lx(){return this.count=0,this.hash=0,this}lx.prototype.update=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];if(e!=null)if(Array.isArray(e))this.update.apply(e);else{var n=0;switch(typeof e){case"undefined":case"function":continue;case"number":case"boolean":n=e;break;case"string":n=e.hashCode();break;default:e.updateHashCode(this);continue}n=n*3432918353,n=n<<15|n>>>17,n=n*461845907,this.count=this.count+1;var r=this.hash^n;r=r<<13|r>>>19,r=r*5+3864292196,this.hash=r}}};lx.prototype.finish=function(){var t=this.hash^this.count*4;return t=t^t>>>16,t=t*2246822507,t=t^t>>>13,t=t*3266489909,t=t^t>>>16,t};function V_e(){var t=new lx;return t.update.apply(arguments),t.finish()}KU.prototype.get=function(t,e){var n=this[t]||null;return n===null?null:n[e]||null};KU.prototype.set=function(t,e,n){var r=this[t]||null;r===null&&(r={},this[t]=r),r[e]=n};function W_e(t,e){return t=t.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"),e&&(t=t.replace(/ /g,"·")),t}function $_e(t){return t.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1)})}function j_e(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].equals(e[n]))return!1;return!0}Xn.Hash=lx;Xn.Set=Dh;Xn.Map=Wc;Xn.BitSet=$o;Xn.AltDict=tD;Xn.DoubleDict=KU;Xn.hashStuff=V_e;Xn.escapeWhitespace=W_e;Xn.arrayToString=XZ;Xn.titleCase=$_e;Xn.equalArrays=j_e;var mi={};function ao(){return this.source=null,this.type=null,this.channel=null,this.start=null,this.stop=null,this.tokenIndex=null,this.line=null,this.column=null,this._text=null,this}ao.INVALID_TYPE=0;ao.EPSILON=-2;ao.MIN_USER_TOKEN_TYPE=1;ao.EOF=-1;ao.DEFAULT_CHANNEL=0;ao.HIDDEN_CHANNEL=1;Object.defineProperty(ao.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t}});ao.prototype.getTokenSource=function(){return this.source[0]};ao.prototype.getInputStream=function(){return this.source[1]};function pl(t,e,n,r,a){return ao.call(this),this.source=t!==void 0?t:pl.EMPTY_SOURCE,this.type=e!==void 0?e:null,this.channel=n!==void 0?n:ao.DEFAULT_CHANNEL,this.start=r!==void 0?r:-1,this.stop=a!==void 0?a:-1,this.tokenIndex=-1,this.source[0]!==null?(this.line=t[0].line,this.column=t[0].column):this.column=-1,this}pl.prototype=Object.create(ao.prototype);pl.prototype.constructor=pl;pl.EMPTY_SOURCE=[null,null];pl.prototype.clone=function(){var t=new pl(this.source,this.type,this.channel,this.start,this.stop);return t.tokenIndex=this.tokenIndex,t.line=this.line,t.column=this.column,t.text=this.text,t};Object.defineProperty(pl.prototype,"text",{get:function(){if(this._text!==null)return this._text;var t=this.getInputStream();if(t===null)return null;var e=t.size;return this.start<e&&this.stop<e?t.getText(this.start,this.stop):"<EOF>"},set:function(t){this._text=t}});pl.prototype.toString=function(){var t=this.text;return t!==null?t=t.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t"):t="<no text>","[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+t+"',<"+this.type+">"+(this.channel>0?",channel="+this.channel:"")+","+this.line+":"+this.column+"]"};mi.Token=ao;mi.CommonToken=pl;var pv={},Br={};function Kt(){return this.atn=null,this.stateNumber=Kt.INVALID_STATE_NUMBER,this.stateType=null,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.nextTokenWithinRule=null,this}Kt.INVALID_TYPE=0;Kt.BASIC=1;Kt.RULE_START=2;Kt.BLOCK_START=3;Kt.PLUS_BLOCK_START=4;Kt.STAR_BLOCK_START=5;Kt.TOKEN_START=6;Kt.RULE_STOP=7;Kt.BLOCK_END=8;Kt.STAR_LOOP_BACK=9;Kt.STAR_LOOP_ENTRY=10;Kt.PLUS_LOOP_BACK=11;Kt.LOOP_END=12;Kt.serializationNames=["INVALID","BASIC","RULE_START","BLOCK_START","PLUS_BLOCK_START","STAR_BLOCK_START","TOKEN_START","RULE_STOP","BLOCK_END","STAR_LOOP_BACK","STAR_LOOP_ENTRY","PLUS_LOOP_BACK","LOOP_END"];Kt.INVALID_STATE_NUMBER=-1;Kt.prototype.toString=function(){return this.stateNumber};Kt.prototype.equals=function(t){return t instanceof Kt?this.stateNumber===t.stateNumber:!1};Kt.prototype.isNonGreedyExitState=function(){return!1};Kt.prototype.addTransition=function(t,e){e===void 0&&(e=-1),this.transitions.length===0?this.epsilonOnlyTransitions=t.isEpsilon:this.epsilonOnlyTransitions!==t.isEpsilon&&(this.epsilonOnlyTransitions=!1),e===-1?this.transitions.push(t):this.transitions.splice(e,1,t)};function hw(){return Kt.call(this),this.stateType=Kt.BASIC,this}hw.prototype=Object.create(Kt.prototype);hw.prototype.constructor=hw;function jo(){return Kt.call(this),this.decision=-1,this.nonGreedy=!1,this}jo.prototype=Object.create(Kt.prototype);jo.prototype.constructor=jo;function dl(){return jo.call(this),this.endState=null,this}dl.prototype=Object.create(jo.prototype);dl.prototype.constructor=dl;function mw(){return dl.call(this),this.stateType=Kt.BLOCK_START,this}mw.prototype=Object.create(dl.prototype);mw.prototype.constructor=mw;function vw(){return Kt.call(this),this.stateType=Kt.BLOCK_END,this.startState=null,this}vw.prototype=Object.create(Kt.prototype);vw.prototype.constructor=vw;function gw(){return Kt.call(this),this.stateType=Kt.RULE_STOP,this}gw.prototype=Object.create(Kt.prototype);gw.prototype.constructor=gw;function yw(){return Kt.call(this),this.stateType=Kt.RULE_START,this.stopState=null,this.isPrecedenceRule=!1,this}yw.prototype=Object.create(Kt.prototype);yw.prototype.constructor=yw;function xw(){return jo.call(this),this.stateType=Kt.PLUS_LOOP_BACK,this}xw.prototype=Object.create(jo.prototype);xw.prototype.constructor=xw;function bw(){return dl.call(this),this.stateType=Kt.PLUS_BLOCK_START,this.loopBackState=null,this}bw.prototype=Object.create(dl.prototype);bw.prototype.constructor=bw;function Sw(){return dl.call(this),this.stateType=Kt.STAR_BLOCK_START,this}Sw.prototype=Object.create(dl.prototype);Sw.prototype.constructor=Sw;function ww(){return Kt.call(this),this.stateType=Kt.STAR_LOOP_BACK,this}ww.prototype=Object.create(Kt.prototype);ww.prototype.constructor=ww;function _w(){return jo.call(this),this.stateType=Kt.STAR_LOOP_ENTRY,this.loopBackState=null,this.isPrecedenceDecision=null,this}_w.prototype=Object.create(jo.prototype);_w.prototype.constructor=_w;function Mw(){return Kt.call(this),this.stateType=Kt.LOOP_END,this.loopBackState=null,this}Mw.prototype=Object.create(Kt.prototype);Mw.prototype.constructor=Mw;function Ew(){return jo.call(this),this.stateType=Kt.TOKEN_START,this}Ew.prototype=Object.create(jo.prototype);Ew.prototype.constructor=Ew;Br.ATNState=Kt;Br.BasicState=hw;Br.DecisionState=jo;Br.BlockStartState=dl;Br.BlockEndState=vw;Br.LoopEndState=Mw;Br.RuleStartState=yw;Br.RuleStopState=gw;Br.TokensStartState=Ew;Br.PlusLoopbackState=xw;Br.StarLoopbackState=ww;Br.StarLoopEntryState=_w;Br.PlusBlockStartState=bw;Br.StarBlockStartState=Sw;Br.BasicBlockStartState=mw;var $c={},ZZ=Xn.Set,X_e=Xn.Hash;function Tr(){return this}Tr.prototype.hashCode=function(){var t=new X_e;return this.updateHashCode(t),t.finish()};Tr.prototype.evaluate=function(t,e){};Tr.prototype.evalPrecedence=function(t,e){return this};Tr.andContext=function(t,e){if(t===null||t===Tr.NONE)return e;if(e===null||e===Tr.NONE)return t;var n=new Xo(t,e);return n.opnds.length===1?n.opnds[0]:n};Tr.orContext=function(t,e){if(t===null)return e;if(e===null)return t;if(t===Tr.NONE||e===Tr.NONE)return Tr.NONE;var n=new Yo(t,e);return n.opnds.length===1?n.opnds[0]:n};function hl(t,e,n){return Tr.call(this),this.ruleIndex=t===void 0?-1:t,this.predIndex=e===void 0?-1:e,this.isCtxDependent=n===void 0?!1:n,this}hl.prototype=Object.create(Tr.prototype);hl.prototype.constructor=hl;Tr.NONE=new hl;hl.prototype.evaluate=function(t,e){var n=this.isCtxDependent?e:null;return t.sempred(n,this.ruleIndex,this.predIndex)};hl.prototype.updateHashCode=function(t){t.update(this.ruleIndex,this.predIndex,this.isCtxDependent)};hl.prototype.equals=function(t){return this===t?!0:t instanceof hl?this.ruleIndex===t.ruleIndex&&this.predIndex===t.predIndex&&this.isCtxDependent===t.isCtxDependent:!1};hl.prototype.toString=function(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"};function ss(t){Tr.call(this),this.precedence=t===void 0?0:t}ss.prototype=Object.create(Tr.prototype);ss.prototype.constructor=ss;ss.prototype.evaluate=function(t,e){return t.precpred(e,this.precedence)};ss.prototype.evalPrecedence=function(t,e){return t.precpred(e,this.precedence)?Tr.NONE:null};ss.prototype.compareTo=function(t){return this.precedence-t.precedence};ss.prototype.updateHashCode=function(t){t.update(31)};ss.prototype.equals=function(t){return this===t?!0:t instanceof ss?this.precedence===t.precedence:!1};ss.prototype.toString=function(){return"{"+this.precedence+">=prec}?"};ss.filterPrecedencePredicates=function(t){var e=[];return t.values().map(function(n){n instanceof ss&&e.push(n)}),e};function Xo(t,e){Tr.call(this);var n=new ZZ;t instanceof Xo?t.opnds.map(function(s){n.add(s)}):n.add(t),e instanceof Xo?e.opnds.map(function(s){n.add(s)}):n.add(e);var r=ss.filterPrecedencePredicates(n);if(r.length>0){var a=null;r.map(function(s){(a===null||s.precedence<a.precedence)&&(a=s)}),n.add(a)}return this.opnds=n.values(),this}Xo.prototype=Object.create(Tr.prototype);Xo.prototype.constructor=Xo;Xo.prototype.equals=function(t){return this===t?!0:t instanceof Xo?this.opnds===t.opnds:!1};Xo.prototype.updateHashCode=function(t){t.update(this.opnds,"AND")};Xo.prototype.evaluate=function(t,e){for(var n=0;n<this.opnds.length;n++)if(!this.opnds[n].evaluate(t,e))return!1;return!0};Xo.prototype.evalPrecedence=function(t,e){for(var n=!1,r=[],a=0;a<this.opnds.length;a++){var s=this.opnds[a],o=s.evalPrecedence(t,e);if(n|=o!==s,o===null)return null;o!==Tr.NONE&&r.push(o)}if(!n)return this;if(r.length===0)return Tr.NONE;var u=null;return r.map(function(l){u=u===null?l:Tr.andContext(u,l)}),u};Xo.prototype.toString=function(){var t="";return this.opnds.map(function(e){t+="&& "+e.toString()}),t.length>3?t.slice(3):t};function Yo(t,e){Tr.call(this);var n=new ZZ;t instanceof Yo?t.opnds.map(function(o){n.add(o)}):n.add(t),e instanceof Yo?e.opnds.map(function(o){n.add(o)}):n.add(e);var r=ss.filterPrecedencePredicates(n);if(r.length>0){var a=r.sort(function(o,u){return o.compareTo(u)}),s=a[a.length-1];n.add(s)}return this.opnds=n.values(),this}Yo.prototype=Object.create(Tr.prototype);Yo.prototype.constructor=Yo;Yo.prototype.constructor=function(t){return this===t?!0:t instanceof Yo?this.opnds===t.opnds:!1};Yo.prototype.updateHashCode=function(t){t.update(this.opnds,"OR")};Yo.prototype.evaluate=function(t,e){for(var n=0;n<this.opnds.length;n++)if(this.opnds[n].evaluate(t,e))return!0;return!1};Yo.prototype.evalPrecedence=function(t,e){for(var n=!1,r=[],a=0;a<this.opnds.length;a++){var s=this.opnds[a],o=s.evalPrecedence(t,e);if(n|=o!==s,o===Tr.NONE)return Tr.NONE;o!==null&&r.push(o)}if(!n)return this;if(r.length===0)return null;var u=null;return u};Yo.prototype.toString=function(){var t="";return this.opnds.map(function(e){t+="|| "+e.toString()}),t.length>3?t.slice(3):t};$c.SemanticContext=Tr;$c.PrecedencePredicate=ss;$c.Predicate=hl;var Y_e=Br.DecisionState,JZ=$c.SemanticContext,KZ=Xn.Hash;function h7(t,e){if(t===null){var n={state:null,alt:null,context:null,semanticContext:null};return e&&(n.reachesIntoOuterContext=0),n}else{var r={};return r.state=t.state||null,r.alt=t.alt===void 0?null:t.alt,r.context=t.context||null,r.semanticContext=t.semanticContext||null,e&&(r.reachesIntoOuterContext=t.reachesIntoOuterContext||0,r.precedenceFilterSuppressed=t.precedenceFilterSuppressed||!1),r}}function so(t,e){return this.checkContext(t,e),t=h7(t),e=h7(e,!0),this.state=t.state!==null?t.state:e.state,this.alt=t.alt!==null?t.alt:e.alt,this.context=t.context!==null?t.context:e.context,this.semanticContext=t.semanticContext!==null?t.semanticContext:e.semanticContext!==null?e.semanticContext:JZ.NONE,this.reachesIntoOuterContext=e.reachesIntoOuterContext,this.precedenceFilterSuppressed=e.precedenceFilterSuppressed,this}so.prototype.checkContext=function(t,e){(t.context===null||t.context===void 0)&&(e===null||e.context===null||e.context===void 0)&&(this.context=null)};so.prototype.hashCode=function(){var t=new KZ;return this.updateHashCode(t),t.finish()};so.prototype.updateHashCode=function(t){t.update(this.state.stateNumber,this.alt,this.context,this.semanticContext)};so.prototype.equals=function(t){return this===t?!0:t instanceof so?this.state.stateNumber===t.state.stateNumber&&this.alt===t.alt&&(this.context===null?t.context===null:this.context.equals(t.context))&&this.semanticContext.equals(t.semanticContext)&&this.precedenceFilterSuppressed===t.precedenceFilterSuppressed:!1};so.prototype.hashCodeForConfigSet=function(){var t=new KZ;return t.update(this.state.stateNumber,this.alt,this.semanticContext),t.finish()};so.prototype.equalsForConfigSet=function(t){return this===t?!0:t instanceof so?this.state.stateNumber===t.state.stateNumber&&this.alt===t.alt&&this.semanticContext.equals(t.semanticContext):!1};so.prototype.toString=function(){return"("+this.state+","+this.alt+(this.context!==null?",["+this.context.toString()+"]":"")+(this.semanticContext!==JZ.NONE?","+this.semanticContext.toString():"")+(this.reachesIntoOuterContext>0?",up="+this.reachesIntoOuterContext:"")+")"};function Qo(t,e){so.call(this,t,e);var n=t.lexerActionExecutor||null;return this.lexerActionExecutor=n||(e!==null?e.lexerActionExecutor:null),this.passedThroughNonGreedyDecision=e!==null?this.checkNonGreedyDecision(e,this.state):!1,this}Qo.prototype=Object.create(so.prototype);Qo.prototype.constructor=Qo;Qo.prototype.updateHashCode=function(t){t.update(this.state.stateNumber,this.alt,this.context,this.semanticContext,this.passedThroughNonGreedyDecision,this.lexerActionExecutor)};Qo.prototype.equals=function(t){return this===t||t instanceof Qo&&this.passedThroughNonGreedyDecision==t.passedThroughNonGreedyDecision&&(this.lexerActionExecutor?this.lexerActionExecutor.equals(t.lexerActionExecutor):!t.lexerActionExecutor)&&so.prototype.equals.call(this,t)};Qo.prototype.hashCodeForConfigSet=Qo.prototype.hashCode;Qo.prototype.equalsForConfigSet=Qo.prototype.equals;Qo.prototype.checkNonGreedyDecision=function(t,e){return t.passedThroughNonGreedyDecision||e instanceof Y_e&&e.nonGreedy};pv.ATNConfig=so;pv.LexerATNConfig=Qo;var Ls={},zy=mi.Token;function ua(t,e){return this.start=t,this.stop=e,this}ua.prototype.contains=function(t){return t>=this.start&&t<this.stop};ua.prototype.toString=function(){return this.start===this.stop-1?this.start.toString():this.start.toString()+".."+(this.stop-1).toString()};Object.defineProperty(ua.prototype,"length",{get:function(){return this.stop-this.start}});function ji(){this.intervals=null,this.readOnly=!1}ji.prototype.first=function(t){return this.intervals===null||this.intervals.length===0?zy.INVALID_TYPE:this.intervals[0].start};ji.prototype.addOne=function(t){this.addInterval(new ua(t,t+1))};ji.prototype.addRange=function(t,e){this.addInterval(new ua(t,e+1))};ji.prototype.addInterval=function(t){if(this.intervals===null)this.intervals=[],this.intervals.push(t);else{for(var e=0;e<this.intervals.length;e++){var n=this.intervals[e];if(t.stop<n.start){this.intervals.splice(e,0,t);return}else if(t.stop===n.start){this.intervals[e].start=t.start;return}else if(t.start<=n.stop){this.intervals[e]=new ua(Math.min(n.start,t.start),Math.max(n.stop,t.stop)),this.reduce(e);return}}this.intervals.push(t)}};ji.prototype.addSet=function(t){if(t.intervals!==null)for(var e=0;e<t.intervals.length;e++){var n=t.intervals[e];this.addInterval(new ua(n.start,n.stop))}return this};ji.prototype.reduce=function(t){if(t<this.intervalslength-1){var e=this.intervals[t],n=this.intervals[t+1];e.stop>=n.stop?(this.intervals.pop(t+1),this.reduce(t)):e.stop>=n.start&&(this.intervals[t]=new ua(e.start,n.stop),this.intervals.pop(t+1))}};ji.prototype.complement=function(t,e){var n=new ji;n.addInterval(new ua(t,e+1));for(var r=0;r<this.intervals.length;r++)n.removeRange(this.intervals[r]);return n};ji.prototype.contains=function(t){if(this.intervals===null)return!1;for(var e=0;e<this.intervals.length;e++)if(this.intervals[e].contains(t))return!0;return!1};Object.defineProperty(ji.prototype,"length",{get:function(){var t=0;return this.intervals.map(function(e){t+=e.length}),t}});ji.prototype.removeRange=function(t){if(t.start===t.stop-1)this.removeOne(t.start);else if(this.intervals!==null)for(var e=0,n=0;n<this.intervals.length;n++){var r=this.intervals[e];if(t.stop<=r.start)return;if(t.start>r.start&&t.stop<r.stop){this.intervals[e]=new ua(r.start,t.start);var a=new ua(t.stop,r.stop);this.intervals.splice(e,0,a);return}else t.start<=r.start&&t.stop>=r.stop?(this.intervals.splice(e,1),e=e-1):t.start<r.stop?this.intervals[e]=new ua(r.start,t.start):t.stop<r.stop&&(this.intervals[e]=new ua(t.stop,r.stop));e+=1}};ji.prototype.removeOne=function(t){if(this.intervals!==null)for(var e=0;e<this.intervals.length;e++){var n=this.intervals[e];if(t<n.start)return;if(t===n.start&&t===n.stop-1){this.intervals.splice(e,1);return}else if(t===n.start){this.intervals[e]=new ua(n.start+1,n.stop);return}else if(t===n.stop-1){this.intervals[e]=new ua(n.start,n.stop-1);return}else if(t<n.stop-1){var r=new ua(n.start,t);n.start=t+1,this.intervals.splice(e,0,r);return}}};ji.prototype.toString=function(t,e,n){return t=t||null,e=e||null,n=n||!1,this.intervals===null?"{}":t!==null||e!==null?this.toTokenString(t,e):n?this.toCharString():this.toIndexString()};ji.prototype.toCharString=function(){for(var t=[],e=0;e<this.intervals.length;e++){var n=this.intervals[e];n.stop===n.start+1?n.start===zy.EOF?t.push("<EOF>"):t.push("'"+String.fromCharCode(n.start)+"'"):t.push("'"+String.fromCharCode(n.start)+"'..'"+String.fromCharCode(n.stop-1)+"'")}return t.length>1?"{"+t.join(", ")+"}":t[0]};ji.prototype.toIndexString=function(){for(var t=[],e=0;e<this.intervals.length;e++){var n=this.intervals[e];n.stop===n.start+1?n.start===zy.EOF?t.push("<EOF>"):t.push(n.start.toString()):t.push(n.start.toString()+".."+(n.stop-1).toString())}return t.length>1?"{"+t.join(", ")+"}":t[0]};ji.prototype.toTokenString=function(t,e){for(var n=[],r=0;r<this.intervals.length;r++)for(var a=this.intervals[r],s=a.start;s<a.stop;s++)n.push(this.elementName(t,e,s));return n.length>1?"{"+n.join(", ")+"}":n[0]};ji.prototype.elementName=function(t,e,n){return n===zy.EOF?"<EOF>":n===zy.EPSILON?"<EPSILON>":t[n]||e[n]};Ls.Interval=ua;Ls.IntervalSet=ji;var _i={},Q_e=mi.Token,e4=Ls.IntervalSet,Z_e=$c.Predicate,J_e=$c.PrecedencePredicate;function Qt(t){if(t==null)throw"target cannot be null.";return this.target=t,this.isEpsilon=!1,this.label=null,this}Qt.EPSILON=1;Qt.RANGE=2;Qt.RULE=3;Qt.PREDICATE=4;Qt.ATOM=5;Qt.ACTION=6;Qt.SET=7;Qt.NOT_SET=8;Qt.WILDCARD=9;Qt.PRECEDENCE=10;Qt.serializationNames=["INVALID","EPSILON","RANGE","RULE","PREDICATE","ATOM","ACTION","SET","NOT_SET","WILDCARD","PRECEDENCE"];Qt.serializationTypes={EpsilonTransition:Qt.EPSILON,RangeTransition:Qt.RANGE,RuleTransition:Qt.RULE,PredicateTransition:Qt.PREDICATE,AtomTransition:Qt.ATOM,ActionTransition:Qt.ACTION,SetTransition:Qt.SET,NotSetTransition:Qt.NOT_SET,WildcardTransition:Qt.WILDCARD,PrecedencePredicateTransition:Qt.PRECEDENCE};function Zd(t,e){return Qt.call(this,t),this.label_=e,this.label=this.makeLabel(),this.serializationType=Qt.ATOM,this}Zd.prototype=Object.create(Qt.prototype);Zd.prototype.constructor=Zd;Zd.prototype.makeLabel=function(){var t=new e4;return t.addOne(this.label_),t};Zd.prototype.matches=function(t,e,n){return this.label_===t};Zd.prototype.toString=function(){return this.label_};function qy(t,e,n,r){return Qt.call(this,t),this.ruleIndex=e,this.precedence=n,this.followState=r,this.serializationType=Qt.RULE,this.isEpsilon=!0,this}qy.prototype=Object.create(Qt.prototype);qy.prototype.constructor=qy;qy.prototype.matches=function(t,e,n){return!1};function Dm(t,e){return Qt.call(this,t),this.serializationType=Qt.EPSILON,this.isEpsilon=!0,this.outermostPrecedenceReturn=e,this}Dm.prototype=Object.create(Qt.prototype);Dm.prototype.constructor=Dm;Dm.prototype.matches=function(t,e,n){return!1};Dm.prototype.toString=function(){return"epsilon"};function Jd(t,e,n){return Qt.call(this,t),this.serializationType=Qt.RANGE,this.start=e,this.stop=n,this.label=this.makeLabel(),this}Jd.prototype=Object.create(Qt.prototype);Jd.prototype.constructor=Jd;Jd.prototype.makeLabel=function(){var t=new e4;return t.addRange(this.start,this.stop),t};Jd.prototype.matches=function(t,e,n){return t>=this.start&&t<=this.stop};Jd.prototype.toString=function(){return"'"+String.fromCharCode(this.start)+"'..'"+String.fromCharCode(this.stop)+"'"};function tp(t){return Qt.call(this,t),this}tp.prototype=Object.create(Qt.prototype);tp.prototype.constructor=tp;function Kd(t,e,n,r){return tp.call(this,t),this.serializationType=Qt.PREDICATE,this.ruleIndex=e,this.predIndex=n,this.isCtxDependent=r,this.isEpsilon=!0,this}Kd.prototype=Object.create(tp.prototype);Kd.prototype.constructor=Kd;Kd.prototype.matches=function(t,e,n){return!1};Kd.prototype.getPredicate=function(){return new Z_e(this.ruleIndex,this.predIndex,this.isCtxDependent)};Kd.prototype.toString=function(){return"pred_"+this.ruleIndex+":"+this.predIndex};function Rm(t,e,n,r){return Qt.call(this,t),this.serializationType=Qt.ACTION,this.ruleIndex=e,this.actionIndex=n===void 0?-1:n,this.isCtxDependent=r===void 0?!1:r,this.isEpsilon=!0,this}Rm.prototype=Object.create(Qt.prototype);Rm.prototype.constructor=Rm;Rm.prototype.matches=function(t,e,n){return!1};Rm.prototype.toString=function(){return"action_"+this.ruleIndex+":"+this.actionIndex};function ml(t,e){return Qt.call(this,t),this.serializationType=Qt.SET,e!=null?this.label=e:(this.label=new e4,this.label.addOne(Q_e.INVALID_TYPE)),this}ml.prototype=Object.create(Qt.prototype);ml.prototype.constructor=ml;ml.prototype.matches=function(t,e,n){return this.label.contains(t)};ml.prototype.toString=function(){return this.label.toString()};function Im(t,e){return ml.call(this,t,e),this.serializationType=Qt.NOT_SET,this}Im.prototype=Object.create(ml.prototype);Im.prototype.constructor=Im;Im.prototype.matches=function(t,e,n){return t>=e&&t<=n&&!ml.prototype.matches.call(this,t,e,n)};Im.prototype.toString=function(){return"~"+ml.prototype.toString.call(this)};function Pm(t){return Qt.call(this,t),this.serializationType=Qt.WILDCARD,this}Pm.prototype=Object.create(Qt.prototype);Pm.prototype.constructor=Pm;Pm.prototype.matches=function(t,e,n){return t>=e&&t<=n};Pm.prototype.toString=function(){return"."};function eh(t,e){return tp.call(this,t),this.serializationType=Qt.PRECEDENCE,this.precedence=e,this.isEpsilon=!0,this}eh.prototype=Object.create(tp.prototype);eh.prototype.constructor=eh;eh.prototype.matches=function(t,e,n){return!1};eh.prototype.getPredicate=function(){return new J_e(this.precedence)};eh.prototype.toString=function(){return this.precedence+" >= _p"};_i.Transition=Qt;_i.AtomTransition=Zd;_i.SetTransition=ml;_i.NotSetTransition=Im;_i.RuleTransition=qy;_i.ActionTransition=Rm;_i.EpsilonTransition=Dm;_i.RangeTransition=Jd;_i.WildcardTransition=Pm;_i.PredicateTransition=Kd;_i.PrecedencePredicateTransition=eh;_i.AbstractPredicateTransition=tp;var hf={},EI={},Xi={},K_e=mi.Token,eJ=Ls.Interval,tJ=new eJ(-1,-2);function nJ(){return this}function Gy(){return nJ.call(this),this}Gy.prototype=Object.create(nJ.prototype);Gy.prototype.constructor=Gy;function th(){return Gy.call(this),this}th.prototype=Object.create(Gy.prototype);th.prototype.constructor=th;function Tw(){return th.call(this),this}Tw.prototype=Object.create(th.prototype);Tw.prototype.constructor=Tw;function bc(){return th.call(this),this}bc.prototype=Object.create(th.prototype);bc.prototype.constructor=bc;function Hy(){return bc.call(this),this}Hy.prototype=Object.create(bc.prototype);Hy.prototype.constructor=Hy;function cx(){return this}cx.prototype.visit=function(t){return Array.isArray(t)?t.map(function(e){return e.accept(this)},this):t.accept(this)};cx.prototype.visitChildren=function(t){return t.children?this.visit(t.children):null};cx.prototype.visitTerminal=function(t){};cx.prototype.visitErrorNode=function(t){};function fx(){return this}fx.prototype.visitTerminal=function(t){};fx.prototype.visitErrorNode=function(t){};fx.prototype.enterEveryRule=function(t){};fx.prototype.exitEveryRule=function(t){};function os(t){return bc.call(this),this.parentCtx=null,this.symbol=t,this}os.prototype=Object.create(bc.prototype);os.prototype.constructor=os;os.prototype.getChild=function(t){return null};os.prototype.getSymbol=function(){return this.symbol};os.prototype.getParent=function(){return this.parentCtx};os.prototype.getPayload=function(){return this.symbol};os.prototype.getSourceInterval=function(){if(this.symbol===null)return tJ;var t=this.symbol.tokenIndex;return new eJ(t,t)};os.prototype.getChildCount=function(){return 0};os.prototype.accept=function(t){return t.visitTerminal(this)};os.prototype.getText=function(){return this.symbol.text};os.prototype.toString=function(){return this.symbol.type===K_e.EOF?"<EOF>":this.symbol.text};function Om(t){return os.call(this,t),this}Om.prototype=Object.create(os.prototype);Om.prototype.constructor=Om;Om.prototype.isErrorNode=function(){return!0};Om.prototype.accept=function(t){return t.visitErrorNode(this)};function Lm(){return this}Lm.prototype.walk=function(t,e){var n=e instanceof Hy||e.isErrorNode!==void 0&&e.isErrorNode();if(n)t.visitErrorNode(e);else if(e instanceof bc)t.visitTerminal(e);else{this.enterRule(t,e);for(var r=0;r<e.getChildCount();r++){var a=e.getChild(r);this.walk(t,a)}this.exitRule(t,e)}};Lm.prototype.enterRule=function(t,e){var n=e.getRuleContext();t.enterEveryRule(n),n.enterRule(t)};Lm.prototype.exitRule=function(t,e){var n=e.getRuleContext();n.exitRule(t),t.exitEveryRule(n)};Lm.DEFAULT=new Lm;Xi.RuleNode=Tw;Xi.ErrorNode=Hy;Xi.TerminalNode=bc;Xi.ErrorNodeImpl=Om;Xi.TerminalNodeImpl=os;Xi.ParseTreeListener=fx;Xi.ParseTreeVisitor=cx;Xi.ParseTreeWalker=Lm;Xi.INVALID_INTERVAL=tJ;var TI={},AI={},m7;function t4(){if(m7)return AI;m7=1;var t=nD().RuleContext,e=Xi,n=e.INVALID_INTERVAL,r=e.TerminalNode,a=e.TerminalNodeImpl,s=e.ErrorNodeImpl,o=Ls.Interval;function u(f,c){f=f||null,c=c||null,t.call(this,f,c),this.ruleIndex=-1,this.children=null,this.start=null,this.stop=null,this.exception=null}u.prototype=Object.create(t.prototype),u.prototype.constructor=u,u.prototype.copyFrom=function(f){this.parentCtx=f.parentCtx,this.invokingState=f.invokingState,this.children=null,this.start=f.start,this.stop=f.stop,f.children&&(this.children=[],f.children.map(function(c){c instanceof s&&(this.children.push(c),c.parentCtx=this)},this))},u.prototype.enterRule=function(f){},u.prototype.exitRule=function(f){},u.prototype.addChild=function(f){return this.children===null&&(this.children=[]),this.children.push(f),f},u.prototype.removeLastChild=function(){this.children!==null&&this.children.pop()},u.prototype.addTokenNode=function(f){var c=new a(f);return this.addChild(c),c.parentCtx=this,c},u.prototype.addErrorNode=function(f){var c=new s(f);return this.addChild(c),c.parentCtx=this,c},u.prototype.getChild=function(f,c){if(c=c||null,this.children===null||f<0||f>=this.children.length)return null;if(c===null)return this.children[f];for(var p=0;p<this.children.length;p++){var d=this.children[p];if(d instanceof c){if(f===0)return d;f-=1}}return null},u.prototype.getToken=function(f,c){if(this.children===null||c<0||c>=this.children.length)return null;for(var p=0;p<this.children.length;p++){var d=this.children[p];if(d instanceof r&&d.symbol.type===f){if(c===0)return d;c-=1}}return null},u.prototype.getTokens=function(f){if(this.children===null)return[];for(var c=[],p=0;p<this.children.length;p++){var d=this.children[p];d instanceof r&&d.symbol.type===f&&c.push(d)}return c},u.prototype.getTypedRuleContext=function(f,c){return this.getChild(c,f)},u.prototype.getTypedRuleContexts=function(f){if(this.children===null)return[];for(var c=[],p=0;p<this.children.length;p++){var d=this.children[p];d instanceof f&&c.push(d)}return c},u.prototype.getChildCount=function(){return this.children===null?0:this.children.length},u.prototype.getSourceInterval=function(){return this.start===null||this.stop===null?n:new o(this.start.tokenIndex,this.stop.tokenIndex)},t.EMPTY=new u;function l(f,c,p){return u.call(f,c),this.ruleIndex=p,this}return l.prototype=Object.create(u.prototype),l.prototype.constructor=l,AI.ParserRuleContext=u,AI}var v7;function rJ(){if(v7)return TI;v7=1;var t=Xn,e=mi.Token,n=Xi.ErrorNode,r=Xi.TerminalNode,a=t4().ParserRuleContext,s=nD().RuleContext,o=Rp().INVALID_ALT_NUMBER;function u(){}return u.toStringTree=function(l,f,c){f=f||null,c=c||null,c!==null&&(f=c.ruleNames);var p=u.getNodeText(l,f);p=t.escapeWhitespace(p,!1);var d=l.getChildCount();if(d===0)return p;var h="("+p+" ";d>0&&(p=u.toStringTree(l.getChild(0),f),h=h.concat(p));for(var m=1;m<d;m++)p=u.toStringTree(l.getChild(m),f),h=h.concat(" "+p);return h=h.concat(")"),h},u.getNodeText=function(l,f,c){if(f=f||null,c=c||null,c!==null&&(f=c.ruleNames),f!==null)if(l instanceof s){var p=l.getAltNumber();return p!=o?f[l.ruleIndex]+":"+p:f[l.ruleIndex]}else{if(l instanceof n)return l.toString();if(l instanceof r&&l.symbol!==null)return l.symbol.text}var d=l.getPayload();return d instanceof e?d.text:l.getPayload().toString()},u.getChildren=function(l){for(var f=[],c=0;c<l.getChildCount();c++)f.push(l.getChild(c));return f},u.getAncestors=function(l){var f=[];for(l=l.getParent();l!==null;)f=[l].concat(f),l=l.getParent();return f},u.findAllTokenNodes=function(l,f){return u.findAllNodes(l,f,!0)},u.findAllRuleNodes=function(l,f){return u.findAllNodes(l,f,!1)},u.findAllNodes=function(l,f,c){var p=[];return u._findAllNodes(l,f,c,p),p},u._findAllNodes=function(l,f,c,p){c&&l instanceof r?l.symbol.type===f&&p.push(l):!c&&l instanceof a&&l.ruleIndex===f&&p.push(l);for(var d=0;d<l.getChildCount();d++)u._findAllNodes(l.getChild(d),f,c,p)},u.descendants=function(l){for(var f=[l],c=0;c<l.getChildCount();c++)f=f.concat(u.descendants(l.getChild(c)));return f},TI.Trees=u,TI}var g7;function nD(){if(g7)return EI;g7=1;var t=Xi.RuleNode,e=Xi.INVALID_INTERVAL,n=Rp().INVALID_ALT_NUMBER;function r(s,o){return t.call(this),this.parentCtx=s||null,this.invokingState=o||-1,this}r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.depth=function(){for(var s=0,o=this;o!==null;)o=o.parentCtx,s+=1;return s},r.prototype.isEmpty=function(){return this.invokingState===-1},r.prototype.getSourceInterval=function(){return e},r.prototype.getRuleContext=function(){return this},r.prototype.getPayload=function(){return this},r.prototype.getText=function(){return this.getChildCount()===0?"":this.children.map(function(s){return s.getText()}).join("")},r.prototype.getAltNumber=function(){return n},r.prototype.setAltNumber=function(s){},r.prototype.getChild=function(s){return null},r.prototype.getChildCount=function(){return 0},r.prototype.accept=function(s){return s.visitChildren(this)},EI.RuleContext=r;var a=rJ().Trees;return r.prototype.toStringTree=function(s,o){return a.toStringTree(this,s,o)},r.prototype.toString=function(s,o){s=s||null,o=o||null;for(var u=this,l="[";u!==null&&u!==o;){if(s===null)u.isEmpty()||(l+=u.invokingState);else{var f=u.ruleIndex,c=f>=0&&f<s.length?s[f]:""+f;l+=c}u.parentCtx!==null&&(s!==null||!u.parentCtx.isEmpty())&&(l+=" "),u=u.parentCtx}return l+="]",l},EI}var y7;function jc(){if(y7)return hf;y7=1;var t=nD().RuleContext,e=Xn.Hash;function n(m){this.cachedHashCode=m}n.EMPTY=null,n.EMPTY_RETURN_STATE=2147483647,n.globalNodeCount=1,n.id=n.globalNodeCount,n.prototype.isEmpty=function(){return this===n.EMPTY},n.prototype.hasEmptyPath=function(){return this.getReturnState(this.length-1)===n.EMPTY_RETURN_STATE},n.prototype.hashCode=function(){return this.cachedHashCode},n.prototype.updateHashCode=function(m){m.update(this.cachedHashCode)};function r(){return this.cache={},this}r.prototype.add=function(m){if(m===n.EMPTY)return n.EMPTY;var v=this.cache[m]||null;return v!==null?v:(this.cache[m]=m,m)},r.prototype.get=function(m){return this.cache[m]||null},Object.defineProperty(r.prototype,"length",{get:function(){return this.cache.length}});function a(m,v){var g=0;if(m!==null){var y=new e;y.update(m,v),g=y.finish()}n.call(this,g),this.parentCtx=m,this.returnState=v}a.prototype=Object.create(n.prototype),a.prototype.contructor=a,a.create=function(m,v){return v===n.EMPTY_RETURN_STATE&&m===null?n.EMPTY:new a(m,v)},Object.defineProperty(a.prototype,"length",{get:function(){return 1}}),a.prototype.getParent=function(m){return this.parentCtx},a.prototype.getReturnState=function(m){return this.returnState},a.prototype.equals=function(m){return this===m?!0:m instanceof a?this.hashCode()!==m.hashCode()||this.returnState!==m.returnState?!1:this.parentCtx==null?m.parentCtx==null:this.parentCtx.equals(m.parentCtx):!1},a.prototype.toString=function(){var m=this.parentCtx===null?"":this.parentCtx.toString();return m.length===0?this.returnState===n.EMPTY_RETURN_STATE?"$":""+this.returnState:""+this.returnState+" "+m};function s(){return a.call(this,null,n.EMPTY_RETURN_STATE),this}s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.isEmpty=function(){return!0},s.prototype.getParent=function(m){return null},s.prototype.getReturnState=function(m){return this.returnState},s.prototype.equals=function(m){return this===m},s.prototype.toString=function(){return"$"},n.EMPTY=new s;function o(m,v){var g=new e;g.update(m,v);var y=g.finish();return n.call(this,y),this.parents=m,this.returnStates=v,this}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.isEmpty=function(){return this.returnStates[0]===n.EMPTY_RETURN_STATE},Object.defineProperty(o.prototype,"length",{get:function(){return this.returnStates.length}}),o.prototype.getParent=function(m){return this.parents[m]},o.prototype.getReturnState=function(m){return this.returnStates[m]},o.prototype.equals=function(m){return this===m?!0:m instanceof o?this.hashCode()!==m.hashCode()?!1:this.returnStates===m.returnStates&&this.parents===m.parents:!1},o.prototype.toString=function(){if(this.isEmpty())return"[]";for(var m="[",v=0;v<this.returnStates.length;v++){if(v>0&&(m=m+", "),this.returnStates[v]===n.EMPTY_RETURN_STATE){m=m+"$";continue}m=m+this.returnStates[v],this.parents[v]!==null?m=m+" "+this.parents[v]:m=m+"null"}return m+"]"};function u(m,v){if(v==null&&(v=t.EMPTY),v.parentCtx===null||v===t.EMPTY)return n.EMPTY;var g=u(m,v.parentCtx),y=m.states[v.invokingState],_=y.transitions[0];return a.create(g,_.followState.stateNumber)}function l(m,v,g,y){if(m===v)return m;if(m instanceof a&&v instanceof a)return f(m,v,g,y);if(g){if(m instanceof s)return m;if(v instanceof s)return v}return m instanceof a&&(m=new o([m.getParent()],[m.returnState])),v instanceof a&&(v=new o([v.getParent()],[v.returnState])),p(m,v,g,y)}function f(m,v,g,y){if(y!==null){var _=y.get(m,v);if(_!==null||(_=y.get(v,m),_!==null))return _}var x=c(m,v,g);if(x!==null)return y!==null&&y.set(m,v,x),x;if(m.returnState===v.returnState){var M=l(m.parentCtx,v.parentCtx,g,y);if(M===m.parentCtx)return m;if(M===v.parentCtx)return v;var A=a.create(M,m.returnState);return y!==null&&y.set(m,v,A),A}else{var E=null;if((m===v||m.parentCtx!==null&&m.parentCtx===v.parentCtx)&&(E=m.parentCtx),E!==null){var D=[m.returnState,v.returnState];m.returnState>v.returnState&&(D[0]=v.returnState,D[1]=m.returnState);var C=[E,E],N=new o(C,D);return y!==null&&y.set(m,v,N),N}var D=[m.returnState,v.returnState],C=[m.parentCtx,v.parentCtx];m.returnState>v.returnState&&(D[0]=v.returnState,D[1]=m.returnState,C=[v.parentCtx,m.parentCtx]);var T=new o(C,D);return y!==null&&y.set(m,v,T),T}}function c(m,v,g){if(g){if(m===n.EMPTY||v===n.EMPTY)return n.EMPTY}else{if(m===n.EMPTY&&v===n.EMPTY)return n.EMPTY;if(m===n.EMPTY){var y=[v.returnState,n.EMPTY_RETURN_STATE],_=[v.parentCtx,null];return new o(_,y)}else if(v===n.EMPTY){var y=[m.returnState,n.EMPTY_RETURN_STATE],_=[m.parentCtx,null];return new o(_,y)}}return null}function p(m,v,g,y){if(y!==null){var _=y.get(m,v);if(_!==null||(_=y.get(v,m),_!==null))return _}for(var x=0,M=0,A=0,E=[],N=[];x<m.returnStates.length&&M<v.returnStates.length;){var D=m.parents[x],C=v.parents[M];if(m.returnStates[x]===v.returnStates[M]){var T=m.returnStates[x],P=T===n.EMPTY_RETURN_STATE&&D===null&&C===null,I=D!==null&&C!==null&&D===C;if(P||I)N[A]=D,E[A]=T;else{var U=l(D,C,g,y);N[A]=U,E[A]=T}x+=1,M+=1}else m.returnStates[x]<v.returnStates[M]?(N[A]=D,E[A]=m.returnStates[x],x+=1):(N[A]=C,E[A]=v.returnStates[M],M+=1);A+=1}if(x<m.returnStates.length)for(var q=x;q<m.returnStates.length;q++)N[A]=m.parents[q],E[A]=m.returnStates[q],A+=1;else for(var q=M;q<v.returnStates.length;q++)N[A]=v.parents[q],E[A]=v.returnStates[q],A+=1;if(A<N.length){if(A===1){var z=a.create(N[0],E[0]);return y!==null&&y.set(m,v,z),z}N=N.slice(0,A),E=E.slice(0,A)}var G=new o(N,E);return G===m?(y!==null&&y.set(m,v,m),m):G===v?(y!==null&&y.set(m,v,v),v):(d(N),y!==null&&y.set(m,v,G),G)}function d(m){for(var v={},g=0;g<m.length;g++){var y=m[g];y in v||(v[y]=y)}for(var _=0;_<m.length;_++)m[_]=v[m[_]]}function h(m,v,g){if(m.isEmpty())return m;var y=g[m]||null;if(y!==null)return y;if(y=v.get(m),y!==null)return g[m]=y,y;for(var _=!1,x=[],M=0;M<x.length;M++){var A=h(m.getParent(M),v,g);if(_||A!==m.getParent(M)){if(!_){x=[];for(var E=0;E<m.length;E++)x[E]=m.getParent(E);_=!0}x[M]=A}}if(!_)return v.add(m),g[m]=m,m;var N=null;return x.length===0?N=n.EMPTY:x.length===1?N=a.create(x[0],m.getReturnState(0)):N=new o(x,m.returnStates),v.add(N),g[N]=N,g[m]=N,N}return hf.merge=l,hf.PredictionContext=n,hf.PredictionContextCache=r,hf.SingletonPredictionContext=a,hf.predictionContextFromRuleContext=u,hf.getCachedPredictionContext=h,hf}var x7;function eMe(){if(x7)return MI;x7=1;var t=Xn.Set,e=Xn.BitSet,n=mi.Token,r=pv.ATNConfig,a=Ls.IntervalSet,s=Br.RuleStopState,o=_i.RuleTransition,u=_i.NotSetTransition,l=_i.WildcardTransition,f=_i.AbstractPredicateTransition,c=jc(),p=c.predictionContextFromRuleContext,d=c.PredictionContext,h=c.SingletonPredictionContext;function m(v){this.atn=v}return m.HIT_PRED=n.INVALID_TYPE,m.prototype.getDecisionLookahead=function(v){if(v===null)return null;for(var g=v.transitions.length,y=[],_=0;_<g;_++){y[_]=new a;var x=new t,M=!1;this._LOOK(v.transition(_).target,null,d.EMPTY,y[_],x,new e,M,!1),(y[_].length===0||y[_].contains(m.HIT_PRED))&&(y[_]=null)}return y},m.prototype.LOOK=function(v,g,y){var _=new a,x=!0;y=y||null;var M=y!==null?p(v.atn,y):null;return this._LOOK(v,g,M,_,new t,new e,x,!0),_},m.prototype._LOOK=function(v,g,y,_,x,M,A,E){var N=new r({state:v,alt:0,context:y},null);if(!x.contains(N)){if(x.add(N),v===g){if(y===null){_.addOne(n.EPSILON);return}else if(y.isEmpty()&&E){_.addOne(n.EOF);return}}if(v instanceof s){if(y===null){_.addOne(n.EPSILON);return}else if(y.isEmpty()&&E){_.addOne(n.EOF);return}if(y!==d.EMPTY){for(var D=0;D<y.length;D++){var C=this.atn.states[y.getReturnState(D)],T=M.contains(C.ruleIndex);try{M.remove(C.ruleIndex),this._LOOK(C,g,y.getParent(D),_,x,M,A,E)}finally{T&&M.add(C.ruleIndex)}}return}}for(var P=0;P<v.transitions.length;P++){var I=v.transitions[P];if(I.constructor===o){if(M.contains(I.target.ruleIndex))continue;var U=h.create(y,I.followState.stateNumber);try{M.add(I.target.ruleIndex),this._LOOK(I.target,g,U,_,x,M,A,E)}finally{M.remove(I.target.ruleIndex)}}else if(I instanceof f)A?this._LOOK(I.target,g,y,_,x,M,A,E):_.addOne(m.HIT_PRED);else if(I.isEpsilon)this._LOOK(I.target,g,y,_,x,M,A,E);else if(I.constructor===l)_.addRange(n.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType);else{var q=I.label;q!==null&&(I instanceof u&&(q=q.complement(n.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType)),_.addSet(q))}}}},MI.LL1Analyzer=m,MI}var b7;function Rp(){if(b7)return _I;b7=1;var t=eMe().LL1Analyzer,e=Ls.IntervalSet;function n(a,s){return this.grammarType=a,this.maxTokenType=s,this.states=[],this.decisionToState=[],this.ruleToStartState=[],this.ruleToStopState=null,this.modeNameToStartState={},this.ruleToTokenType=null,this.lexerActions=null,this.modeToStartState=[],this}n.prototype.nextTokensInContext=function(a,s){var o=new t(this);return o.LOOK(a,null,s)},n.prototype.nextTokensNoContext=function(a){return a.nextTokenWithinRule!==null||(a.nextTokenWithinRule=this.nextTokensInContext(a,null),a.nextTokenWithinRule.readOnly=!0),a.nextTokenWithinRule},n.prototype.nextTokens=function(a,s){return s===void 0?this.nextTokensNoContext(a):this.nextTokensInContext(a,s)},n.prototype.addState=function(a){a!==null&&(a.atn=this,a.stateNumber=this.states.length),this.states.push(a)},n.prototype.removeState=function(a){this.states[a.stateNumber]=null},n.prototype.defineDecisionState=function(a){return this.decisionToState.push(a),a.decision=this.decisionToState.length-1,a.decision},n.prototype.getDecisionState=function(a){return this.decisionToState.length===0?null:this.decisionToState[a]};var r=mi.Token;return n.prototype.getExpectedTokens=function(a,s){if(a<0||a>=this.states.length)throw"Invalid state number.";var o=this.states[a],u=this.nextTokens(o);if(!u.contains(r.EPSILON))return u;var l=new e;for(l.addSet(u),l.removeOne(r.EPSILON);s!==null&&s.invokingState>=0&&u.contains(r.EPSILON);){var f=this.states[s.invokingState],c=f.transitions[0];u=this.nextTokens(c.followState),l.addSet(u),l.removeOne(r.EPSILON),s=s.parentCtx}return u.contains(r.EPSILON)&&l.addOne(r.EOF),l},n.INVALID_ALT_NUMBER=0,_I.ATN=n,_I}var n4={},iJ={};function r4(){}r4.LEXER=0;r4.PARSER=1;iJ.ATNType=r4;var i4={};function Aw(t){return t===void 0&&(t=null),this.readOnly=!1,this.verifyATN=t===null?!0:t.verifyATN,this.generateRuleBypassTransitions=t===null?!1:t.generateRuleBypassTransitions,this}Aw.defaultOptions=new Aw;Aw.defaultOptions.readOnly=!0;i4.ATNDeserializationOptions=Aw;var tu={};function ma(){}ma.CHANNEL=0;ma.CUSTOM=1;ma.MODE=2;ma.MORE=3;ma.POP_MODE=4;ma.PUSH_MODE=5;ma.SKIP=6;ma.TYPE=7;function vi(t){return this.actionType=t,this.isPositionDependent=!1,this}vi.prototype.hashCode=function(){var t=new Hash;return this.updateHashCode(t),t.finish()};vi.prototype.updateHashCode=function(t){t.update(this.actionType)};vi.prototype.equals=function(t){return this===t};function np(){return vi.call(this,ma.SKIP),this}np.prototype=Object.create(vi.prototype);np.prototype.constructor=np;np.INSTANCE=new np;np.prototype.execute=function(t){t.skip()};np.prototype.toString=function(){return"skip"};function Sc(t){return vi.call(this,ma.TYPE),this.type=t,this}Sc.prototype=Object.create(vi.prototype);Sc.prototype.constructor=Sc;Sc.prototype.execute=function(t){t.type=this.type};Sc.prototype.updateHashCode=function(t){t.update(this.actionType,this.type)};Sc.prototype.equals=function(t){return this===t?!0:t instanceof Sc?this.type===t.type:!1};Sc.prototype.toString=function(){return"type("+this.type+")"};function wc(t){return vi.call(this,ma.PUSH_MODE),this.mode=t,this}wc.prototype=Object.create(vi.prototype);wc.prototype.constructor=wc;wc.prototype.execute=function(t){t.pushMode(this.mode)};wc.prototype.updateHashCode=function(t){t.update(this.actionType,this.mode)};wc.prototype.equals=function(t){return this===t?!0:t instanceof wc?this.mode===t.mode:!1};wc.prototype.toString=function(){return"pushMode("+this.mode+")"};function rp(){return vi.call(this,ma.POP_MODE),this}rp.prototype=Object.create(vi.prototype);rp.prototype.constructor=rp;rp.INSTANCE=new rp;rp.prototype.execute=function(t){t.popMode()};rp.prototype.toString=function(){return"popMode"};function ip(){return vi.call(this,ma.MORE),this}ip.prototype=Object.create(vi.prototype);ip.prototype.constructor=ip;ip.INSTANCE=new ip;ip.prototype.execute=function(t){t.more()};ip.prototype.toString=function(){return"more"};function _c(t){return vi.call(this,ma.MODE),this.mode=t,this}_c.prototype=Object.create(vi.prototype);_c.prototype.constructor=_c;_c.prototype.execute=function(t){t.mode(this.mode)};_c.prototype.updateHashCode=function(t){t.update(this.actionType,this.mode)};_c.prototype.equals=function(t){return this===t?!0:t instanceof _c?this.mode===t.mode:!1};_c.prototype.toString=function(){return"mode("+this.mode+")"};function ap(t,e){return vi.call(this,ma.CUSTOM),this.ruleIndex=t,this.actionIndex=e,this.isPositionDependent=!0,this}ap.prototype=Object.create(vi.prototype);ap.prototype.constructor=ap;ap.prototype.execute=function(t){t.action(null,this.ruleIndex,this.actionIndex)};ap.prototype.updateHashCode=function(t){t.update(this.actionType,this.ruleIndex,this.actionIndex)};ap.prototype.equals=function(t){return this===t?!0:t instanceof ap?this.ruleIndex===t.ruleIndex&&this.actionIndex===t.actionIndex:!1};function Mc(t){return vi.call(this,ma.CHANNEL),this.channel=t,this}Mc.prototype=Object.create(vi.prototype);Mc.prototype.constructor=Mc;Mc.prototype.execute=function(t){t._channel=this.channel};Mc.prototype.updateHashCode=function(t){t.update(this.actionType,this.channel)};Mc.prototype.equals=function(t){return this===t?!0:t instanceof Mc?this.channel===t.channel:!1};Mc.prototype.toString=function(){return"channel("+this.channel+")"};function sp(t,e){return vi.call(this,e.actionType),this.offset=t,this.action=e,this.isPositionDependent=!0,this}sp.prototype=Object.create(vi.prototype);sp.prototype.constructor=sp;sp.prototype.execute=function(t){this.action.execute(t)};sp.prototype.updateHashCode=function(t){t.update(this.actionType,this.offset,this.action)};sp.prototype.equals=function(t){return this===t?!0:t instanceof sp?this.offset===t.offset&&this.action===t.action:!1};tu.LexerActionType=ma;tu.LexerSkipAction=np;tu.LexerChannelAction=Mc;tu.LexerCustomAction=ap;tu.LexerIndexedCustomAction=sp;tu.LexerMoreAction=ip;tu.LexerTypeAction=Sc;tu.LexerPushModeAction=wc;tu.LexerPopModeAction=rp;tu.LexerModeAction=_c;var oL=mi.Token,tMe=Rp().ATN,Nw=iJ.ATNType,ms=Br,Ka=ms.ATNState,aJ=ms.BasicState,nMe=ms.DecisionState,a4=ms.BlockStartState,s4=ms.BlockEndState,dm=ms.LoopEndState,sJ=ms.RuleStartState,px=ms.RuleStopState,rMe=ms.TokensStartState,oJ=ms.PlusLoopbackState,o4=ms.StarLoopbackState,km=ms.StarLoopEntryState,u4=ms.PlusBlockStartState,uL=ms.StarBlockStartState,uJ=ms.BasicBlockStartState,Ou=_i,ju=Ou.Transition,lL=Ou.AtomTransition,iMe=Ou.SetTransition,aMe=Ou.NotSetTransition,lJ=Ou.RuleTransition,S7=Ou.RangeTransition,sMe=Ou.ActionTransition,Jg=Ou.EpsilonTransition,oMe=Ou.WildcardTransition,uMe=Ou.PredicateTransition,lMe=Ou.PrecedencePredicateTransition,cMe=Ls.IntervalSet,fMe=i4.ATNDeserializationOptions,Xc=tu,mf=Xc.LexerActionType,pMe=Xc.LexerSkipAction,dMe=Xc.LexerChannelAction,hMe=Xc.LexerCustomAction,mMe=Xc.LexerMoreAction,vMe=Xc.LexerTypeAction,gMe=Xc.LexerPushModeAction,yMe=Xc.LexerPopModeAction,xMe=Xc.LexerModeAction,bMe="AADB8D7E-AEEF-4415-AD2B-8204D6CF042E",l4="59627784-3BE5-417A-B9EB-8131A7286089",cL=[bMe,l4],w7=3,SMe=l4;function y2(t,e){var n=[];return n[t-1]=e,n.map(function(r){return e})}function xr(t){return t==null&&(t=fMe.defaultOptions),this.deserializationOptions=t,this.stateFactories=null,this.actionFactories=null,this}xr.prototype.isFeatureSupported=function(t,e){var n=cL.indexOf(t);if(n<0)return!1;var r=cL.indexOf(e);return r>=n};xr.prototype.deserialize=function(t){this.reset(t),this.checkVersion(),this.checkUUID();var e=this.readATN();this.readStates(e),this.readRules(e),this.readModes(e);var n=[];return this.readSets(e,n,this.readInt.bind(this)),this.isFeatureSupported(l4,this.uuid)&&this.readSets(e,n,this.readInt32.bind(this)),this.readEdges(e,n),this.readDecisions(e),this.readLexerActions(e),this.markPrecedenceDecisions(e),this.verifyATN(e),this.deserializationOptions.generateRuleBypassTransitions&&e.grammarType===Nw.PARSER&&(this.generateRuleBypassTransitions(e),this.verifyATN(e)),e};xr.prototype.reset=function(t){var e=function(r){var a=r.charCodeAt(0);return a>1?a-2:a+65533},n=t.split("").map(e);n[0]=t.charCodeAt(0),this.data=n,this.pos=0};xr.prototype.checkVersion=function(){var t=this.readInt();if(t!==w7)throw"Could not deserialize ATN with version "+t+" (expected "+w7+")."};xr.prototype.checkUUID=function(){var t=this.readUUID();if(cL.indexOf(t)<0)throw SMe;this.uuid=t};xr.prototype.readATN=function(){var t=this.readInt(),e=this.readInt();return new tMe(t,e)};xr.prototype.readStates=function(t){for(var e,n,r,a=[],s=[],o=this.readInt(),u=0;u<o;u++){var l=this.readInt();if(l===Ka.INVALID_TYPE){t.addState(null);continue}var f=this.readInt();f===65535&&(f=-1);var c=this.stateFactory(l,f);if(l===Ka.LOOP_END){var p=this.readInt();a.push([c,p])}else if(c instanceof a4){var d=this.readInt();s.push([c,d])}t.addState(c)}for(e=0;e<a.length;e++)n=a[e],n[0].loopBackState=t.states[n[1]];for(e=0;e<s.length;e++)n=s[e],n[0].endState=t.states[n[1]];var h=this.readInt();for(e=0;e<h;e++)r=this.readInt(),t.states[r].nonGreedy=!0;var m=this.readInt();for(e=0;e<m;e++)r=this.readInt(),t.states[r].isPrecedenceRule=!0};xr.prototype.readRules=function(t){var e,n=this.readInt();for(t.grammarType===Nw.LEXER&&(t.ruleToTokenType=y2(n,0)),t.ruleToStartState=y2(n,0),e=0;e<n;e++){var r=this.readInt(),a=t.states[r];if(t.ruleToStartState[e]=a,t.grammarType===Nw.LEXER){var s=this.readInt();s===65535&&(s=oL.EOF),t.ruleToTokenType[e]=s}}for(t.ruleToStopState=y2(n,0),e=0;e<t.states.length;e++){var o=t.states[e];o instanceof px&&(t.ruleToStopState[o.ruleIndex]=o,t.ruleToStartState[o.ruleIndex].stopState=o)}};xr.prototype.readModes=function(t){for(var e=this.readInt(),n=0;n<e;n++){var r=this.readInt();t.modeToStartState.push(t.states[r])}};xr.prototype.readSets=function(t,e,n){for(var r=this.readInt(),a=0;a<r;a++){var s=new cMe;e.push(s);var o=this.readInt(),u=this.readInt();u!==0&&s.addOne(-1);for(var l=0;l<o;l++){var f=n(),c=n();s.addRange(f,c)}}};xr.prototype.readEdges=function(t,e){var n,r,a,s,o,u=this.readInt();for(n=0;n<u;n++){var l=this.readInt(),f=this.readInt(),c=this.readInt(),p=this.readInt(),d=this.readInt(),h=this.readInt();s=this.edgeFactory(t,c,l,f,p,d,h,e);var m=t.states[l];m.addTransition(s)}for(n=0;n<t.states.length;n++)for(a=t.states[n],r=0;r<a.transitions.length;r++){var v=a.transitions[r];if(v instanceof lJ){var g=-1;t.ruleToStartState[v.target.ruleIndex].isPrecedenceRule&&v.precedence===0&&(g=v.target.ruleIndex),s=new Jg(v.followState,g),t.ruleToStopState[v.target.ruleIndex].addTransition(s)}}for(n=0;n<t.states.length;n++){if(a=t.states[n],a instanceof a4){if(a.endState===null||a.endState.startState!==null)throw"IllegalState";a.endState.startState=a}if(a instanceof oJ)for(r=0;r<a.transitions.length;r++)o=a.transitions[r].target,o instanceof u4&&(o.loopBackState=a);else if(a instanceof o4)for(r=0;r<a.transitions.length;r++)o=a.transitions[r].target,o instanceof km&&(o.loopBackState=a)}};xr.prototype.readDecisions=function(t){for(var e=this.readInt(),n=0;n<e;n++){var r=this.readInt(),a=t.states[r];t.decisionToState.push(a),a.decision=n}};xr.prototype.readLexerActions=function(t){if(t.grammarType===Nw.LEXER){var e=this.readInt();t.lexerActions=y2(e,null);for(var n=0;n<e;n++){var r=this.readInt(),a=this.readInt();a===65535&&(a=-1);var s=this.readInt();s===65535&&(s=-1);var o=this.lexerActionFactory(r,a,s);t.lexerActions[n]=o}}};xr.prototype.generateRuleBypassTransitions=function(t){var e,n=t.ruleToStartState.length;for(e=0;e<n;e++)t.ruleToTokenType[e]=t.maxTokenType+e+1;for(e=0;e<n;e++)this.generateRuleBypassTransition(t,e)};xr.prototype.generateRuleBypassTransition=function(t,e){var n,r,a=new uJ;a.ruleIndex=e,t.addState(a);var s=new s4;s.ruleIndex=e,t.addState(s),a.endState=s,t.defineDecisionState(a),s.startState=a;var o=null,u=null;if(t.ruleToStartState[e].isPrecedenceRule){for(u=null,n=0;n<t.states.length;n++)if(r=t.states[n],this.stateIsEndStateFor(r,e)){u=r,o=r.loopBackState.transitions[0];break}if(o===null)throw"Couldn't identify final state of the precedence rule prefix section."}else u=t.ruleToStopState[e];for(n=0;n<t.states.length;n++){r=t.states[n];for(var l=0;l<r.transitions.length;l++){var f=r.transitions[l];f!==o&&f.target===u&&(f.target=s)}}for(var c=t.ruleToStartState[e],p=c.transitions.length;p>0;)a.addTransition(c.transitions[p-1]),c.transitions=c.transitions.slice(-1);t.ruleToStartState[e].addTransition(new Jg(a)),s.addTransition(new Jg(u));var d=new aJ;t.addState(d),d.addTransition(new lL(s,t.ruleToTokenType[e])),a.addTransition(new Jg(d))};xr.prototype.stateIsEndStateFor=function(t,e){if(t.ruleIndex!==e||!(t instanceof km))return null;var n=t.transitions[t.transitions.length-1].target;return n instanceof dm&&n.epsilonOnlyTransitions&&n.transitions[0].target instanceof px?t:null};xr.prototype.markPrecedenceDecisions=function(t){for(var e=0;e<t.states.length;e++){var n=t.states[e];if(n instanceof km&&t.ruleToStartState[n.ruleIndex].isPrecedenceRule){var r=n.transitions[n.transitions.length-1].target;r instanceof dm&&r.epsilonOnlyTransitions&&r.transitions[0].target instanceof px&&(n.isPrecedenceDecision=!0)}}};xr.prototype.verifyATN=function(t){if(this.deserializationOptions.verifyATN)for(var e=0;e<t.states.length;e++){var n=t.states[e];if(n!==null)if(this.checkCondition(n.epsilonOnlyTransitions||n.transitions.length<=1),n instanceof u4)this.checkCondition(n.loopBackState!==null);else if(n instanceof km)if(this.checkCondition(n.loopBackState!==null),this.checkCondition(n.transitions.length===2),n.transitions[0].target instanceof uL)this.checkCondition(n.transitions[1].target instanceof dm),this.checkCondition(!n.nonGreedy);else if(n.transitions[0].target instanceof dm)this.checkCondition(n.transitions[1].target instanceof uL),this.checkCondition(n.nonGreedy);else throw"IllegalState";else n instanceof o4?(this.checkCondition(n.transitions.length===1),this.checkCondition(n.transitions[0].target instanceof km)):n instanceof dm?this.checkCondition(n.loopBackState!==null):n instanceof sJ?this.checkCondition(n.stopState!==null):n instanceof a4?this.checkCondition(n.endState!==null):n instanceof s4?this.checkCondition(n.startState!==null):n instanceof nMe?this.checkCondition(n.transitions.length<=1||n.decision>=0):this.checkCondition(n.transitions.length<=1||n instanceof px)}};xr.prototype.checkCondition=function(t,e){if(!t)throw e==null&&(e="IllegalState"),e};xr.prototype.readInt=function(){return this.data[this.pos++]};xr.prototype.readInt32=function(){var t=this.readInt(),e=this.readInt();return t|e<<16};xr.prototype.readLong=function(){var t=this.readInt32(),e=this.readInt32();return t&4294967295|e<<32};function wMe(){for(var t=[],e=0;e<256;e++)t[e]=(e+256).toString(16).substr(1).toUpperCase();return t}var _a=wMe();xr.prototype.readUUID=function(){for(var t=[],e=7;e>=0;e--){var n=this.readInt();t[2*e+1]=n&255,t[2*e]=n>>8&255}return _a[t[0]]+_a[t[1]]+_a[t[2]]+_a[t[3]]+"-"+_a[t[4]]+_a[t[5]]+"-"+_a[t[6]]+_a[t[7]]+"-"+_a[t[8]]+_a[t[9]]+"-"+_a[t[10]]+_a[t[11]]+_a[t[12]]+_a[t[13]]+_a[t[14]]+_a[t[15]]};xr.prototype.edgeFactory=function(t,e,n,r,a,s,o,u){var l=t.states[r];switch(e){case ju.EPSILON:return new Jg(l);case ju.RANGE:return o!==0?new S7(l,oL.EOF,s):new S7(l,a,s);case ju.RULE:return new lJ(t.states[a],s,o,l);case ju.PREDICATE:return new uMe(l,a,s,o!==0);case ju.PRECEDENCE:return new lMe(l,a);case ju.ATOM:return o!==0?new lL(l,oL.EOF):new lL(l,a);case ju.ACTION:return new sMe(l,a,s,o!==0);case ju.SET:return new iMe(l,u[a]);case ju.NOT_SET:return new aMe(l,u[a]);case ju.WILDCARD:return new oMe(l);default:throw"The specified transition type: "+e+" is not valid."}};xr.prototype.stateFactory=function(t,e){if(this.stateFactories===null){var n=[];n[Ka.INVALID_TYPE]=null,n[Ka.BASIC]=function(){return new aJ},n[Ka.RULE_START]=function(){return new sJ},n[Ka.BLOCK_START]=function(){return new uJ},n[Ka.PLUS_BLOCK_START]=function(){return new u4},n[Ka.STAR_BLOCK_START]=function(){return new uL},n[Ka.TOKEN_START]=function(){return new rMe},n[Ka.RULE_STOP]=function(){return new px},n[Ka.BLOCK_END]=function(){return new s4},n[Ka.STAR_LOOP_BACK]=function(){return new o4},n[Ka.STAR_LOOP_ENTRY]=function(){return new km},n[Ka.PLUS_LOOP_BACK]=function(){return new oJ},n[Ka.LOOP_END]=function(){return new dm},this.stateFactories=n}if(t>this.stateFactories.length||this.stateFactories[t]===null)throw"The specified state type "+t+" is not valid.";var r=this.stateFactories[t]();if(r!==null)return r.ruleIndex=e,r};xr.prototype.lexerActionFactory=function(t,e,n){if(this.actionFactories===null){var r=[];r[mf.CHANNEL]=function(a,s){return new dMe(a)},r[mf.CUSTOM]=function(a,s){return new hMe(a,s)},r[mf.MODE]=function(a,s){return new xMe(a)},r[mf.MORE]=function(a,s){return mMe.INSTANCE},r[mf.POP_MODE]=function(a,s){return yMe.INSTANCE},r[mf.PUSH_MODE]=function(a,s){return new gMe(a)},r[mf.SKIP]=function(a,s){return pMe.INSTANCE},r[mf.TYPE]=function(a,s){return new vMe(a)},this.actionFactories=r}if(t>this.actionFactories.length||this.actionFactories[t]===null)throw"The specified lexer action type "+t+" is not valid.";return this.actionFactories[t](e,n)};n4.ATNDeserializer=xr;var cJ={},dx={},c4={},Rh={};function Yc(){return this}Yc.prototype.syntaxError=function(t,e,n,r,a,s){};Yc.prototype.reportAmbiguity=function(t,e,n,r,a,s,o){};Yc.prototype.reportAttemptingFullContext=function(t,e,n,r,a,s){};Yc.prototype.reportContextSensitivity=function(t,e,n,r,a,s){};function nh(){return Yc.call(this),this}nh.prototype=Object.create(Yc.prototype);nh.prototype.constructor=nh;nh.INSTANCE=new nh;nh.prototype.syntaxError=function(t,e,n,r,a,s){console.error("line "+n+":"+r+" "+a)};function op(t){if(Yc.call(this),t===null)throw"delegates";return this.delegates=t,this}op.prototype=Object.create(Yc.prototype);op.prototype.constructor=op;op.prototype.syntaxError=function(t,e,n,r,a,s){this.delegates.map(function(o){o.syntaxError(t,e,n,r,a,s)})};op.prototype.reportAmbiguity=function(t,e,n,r,a,s,o){this.delegates.map(function(u){u.reportAmbiguity(t,e,n,r,a,s,o)})};op.prototype.reportAttemptingFullContext=function(t,e,n,r,a,s){this.delegates.map(function(o){o.reportAttemptingFullContext(t,e,n,r,a,s)})};op.prototype.reportContextSensitivity=function(t,e,n,r,a,s){this.delegates.map(function(o){o.reportContextSensitivity(t,e,n,r,a,s)})};Rh.ErrorListener=Yc;Rh.ConsoleErrorListener=nh;Rh.ProxyErrorListener=op;var f4=mi.Token,_Me=Rh.ConsoleErrorListener,MMe=Rh.ProxyErrorListener;function vs(){return this._listeners=[_Me.INSTANCE],this._interp=null,this._stateNumber=-1,this}vs.tokenTypeMapCache={};vs.ruleIndexMapCache={};vs.prototype.checkVersion=function(t){var e="4.7.2";e!==t&&console.log("ANTLR runtime and generated code versions disagree: "+e+"!="+t)};vs.prototype.addErrorListener=function(t){this._listeners.push(t)};vs.prototype.removeErrorListeners=function(){this._listeners=[]};vs.prototype.getTokenTypeMap=function(){var t=this.getTokenNames();if(t===null)throw"The current recognizer does not provide a list of token names.";var e=this.tokenTypeMapCache[t];return e===void 0&&(e=t.reduce(function(n,r,a){n[r]=a}),e.EOF=f4.EOF,this.tokenTypeMapCache[t]=e),e};vs.prototype.getRuleIndexMap=function(){var t=this.ruleNames;if(t===null)throw"The current recognizer does not provide a list of rule names.";var e=this.ruleIndexMapCache[t];return e===void 0&&(e=t.reduce(function(n,r,a){n[r]=a}),this.ruleIndexMapCache[t]=e),e};vs.prototype.getTokenType=function(t){var e=this.getTokenTypeMap()[t];return e!==void 0?e:f4.INVALID_TYPE};vs.prototype.getErrorHeader=function(t){var e=t.getOffendingToken().line,n=t.getOffendingToken().column;return"line "+e+":"+n};vs.prototype.getTokenErrorDisplay=function(t){if(t===null)return"<no token>";var e=t.text;return e===null&&(t.type===f4.EOF?e="<EOF>":e="<"+t.type+">"),e=e.replace(`
`,"\\n").replace("\r","\\r").replace("	","\\t"),"'"+e+"'"};vs.prototype.getErrorListenerDispatch=function(){return new MMe(this._listeners)};vs.prototype.sempred=function(t,e,n){return!0};vs.prototype.precpred=function(t,e){return!0};Object.defineProperty(vs.prototype,"state",{get:function(){return this._stateNumber},set:function(t){this._stateNumber=t}});c4.Recognizer=vs;var fJ={},pJ=mi.CommonToken;function dJ(){return this}function up(t){return dJ.call(this),this.copyText=t===void 0?!1:t,this}up.prototype=Object.create(dJ.prototype);up.prototype.constructor=up;up.DEFAULT=new up;up.prototype.create=function(t,e,n,r,a,s,o,u){var l=new pJ(t,e,r,a,s);return l.line=o,l.column=u,n!==null?l.text=n:this.copyText&&t[1]!==null&&(l.text=t[1].getText(a,s)),l};up.prototype.createThin=function(t,e){var n=new pJ(null,t);return n.text=e,n};fJ.CommonTokenFactory=up;var Ga={},EMe=_i.PredicateTransition;function us(t){return Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,us):new Error().stack,this.message=t.message,this.recognizer=t.recognizer,this.input=t.input,this.ctx=t.ctx,this.offendingToken=null,this.offendingState=-1,this.recognizer!==null&&(this.offendingState=this.recognizer.state),this}us.prototype=Object.create(Error.prototype);us.prototype.constructor=us;us.prototype.getExpectedTokens=function(){return this.recognizer!==null?this.recognizer.atn.getExpectedTokens(this.offendingState,this.ctx):null};us.prototype.toString=function(){return this.message};function Vy(t,e,n,r){return us.call(this,{message:"",recognizer:t,input:e,ctx:null}),this.startIndex=n,this.deadEndConfigs=r,this}Vy.prototype=Object.create(us.prototype);Vy.prototype.constructor=Vy;Vy.prototype.toString=function(){var t="";return this.startIndex>=0&&this.startIndex<this.input.size&&(t=this.input.getText((this.startIndex,this.startIndex))),"LexerNoViableAltException"+t};function Cw(t,e,n,r,a,s){s=s||t._ctx,r=r||t.getCurrentToken(),n=n||t.getCurrentToken(),e=e||t.getInputStream(),us.call(this,{message:"",recognizer:t,input:e,ctx:s}),this.deadEndConfigs=a,this.startToken=n,this.offendingToken=r}Cw.prototype=Object.create(us.prototype);Cw.prototype.constructor=Cw;function Dw(t){us.call(this,{message:"",recognizer:t,input:t.getInputStream(),ctx:t._ctx}),this.offendingToken=t.getCurrentToken()}Dw.prototype=Object.create(us.prototype);Dw.prototype.constructor=Dw;function Wy(t,e,n){us.call(this,{message:this.formatMessage(e,n||null),recognizer:t,input:t.getInputStream(),ctx:t._ctx});var r=t._interp.atn.states[t.state],a=r.transitions[0];return a instanceof EMe?(this.ruleIndex=a.ruleIndex,this.predicateIndex=a.predIndex):(this.ruleIndex=0,this.predicateIndex=0),this.predicate=e,this.offendingToken=t.getCurrentToken(),this}Wy.prototype=Object.create(us.prototype);Wy.prototype.constructor=Wy;Wy.prototype.formatMessage=function(t,e){return e!==null?e:"failed predicate: {"+t+"}?"};function $y(){return Error.call(this),Error.captureStackTrace(this,$y),this}$y.prototype=Object.create(Error.prototype);$y.prototype.constructor=$y;Ga.RecognitionException=us;Ga.NoViableAltException=Cw;Ga.LexerNoViableAltException=Vy;Ga.InputMismatchException=Dw;Ga.FailedPredicateException=Wy;Ga.ParseCancellationException=$y;var is=mi.Token,hJ=c4.Recognizer,TMe=fJ.CommonTokenFactory,AMe=Ga.RecognitionException,NMe=Ga.LexerNoViableAltException;function dn(t){return hJ.call(this),this._input=t,this._factory=TMe.DEFAULT,this._tokenFactorySourcePair=[this,t],this._interp=null,this._token=null,this._tokenStartCharIndex=-1,this._tokenStartLine=-1,this._tokenStartColumn=-1,this._hitEOF=!1,this._channel=is.DEFAULT_CHANNEL,this._type=is.INVALID_TYPE,this._modeStack=[],this._mode=dn.DEFAULT_MODE,this._text=null,this}dn.prototype=Object.create(hJ.prototype);dn.prototype.constructor=dn;dn.DEFAULT_MODE=0;dn.MORE=-2;dn.SKIP=-3;dn.DEFAULT_TOKEN_CHANNEL=is.DEFAULT_CHANNEL;dn.HIDDEN=is.HIDDEN_CHANNEL;dn.MIN_CHAR_VALUE=0;dn.MAX_CHAR_VALUE=1114111;dn.prototype.reset=function(){this._input!==null&&this._input.seek(0),this._token=null,this._type=is.INVALID_TYPE,this._channel=is.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartColumn=-1,this._tokenStartLine=-1,this._text=null,this._hitEOF=!1,this._mode=dn.DEFAULT_MODE,this._modeStack=[],this._interp.reset()};dn.prototype.nextToken=function(){if(this._input===null)throw"nextToken requires a non-null input stream.";var t=this._input.mark();try{for(;;){if(this._hitEOF)return this.emitEOF(),this._token;this._token=null,this._channel=is.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartColumn=this._interp.column,this._tokenStartLine=this._interp.line,this._text=null;for(var e=!1;;){this._type=is.INVALID_TYPE;var n=dn.SKIP;try{n=this._interp.match(this._input,this._mode)}catch(r){if(r instanceof AMe)this.notifyListeners(r),this.recover(r);else throw console.log(r.stack),r}if(this._input.LA(1)===is.EOF&&(this._hitEOF=!0),this._type===is.INVALID_TYPE&&(this._type=n),this._type===dn.SKIP){e=!0;break}if(this._type!==dn.MORE)break}if(!e)return this._token===null&&this.emit(),this._token}}finally{this._input.release(t)}};dn.prototype.skip=function(){this._type=dn.SKIP};dn.prototype.more=function(){this._type=dn.MORE};dn.prototype.mode=function(t){this._mode=t};dn.prototype.pushMode=function(t){this._interp.debug&&console.log("pushMode "+t),this._modeStack.push(this._mode),this.mode(t)};dn.prototype.popMode=function(){if(this._modeStack.length===0)throw"Empty Stack";return this._interp.debug&&console.log("popMode back to "+this._modeStack.slice(0,-1)),this.mode(this._modeStack.pop()),this._mode};Object.defineProperty(dn.prototype,"inputStream",{get:function(){return this._input},set:function(t){this._input=null,this._tokenFactorySourcePair=[this,this._input],this.reset(),this._input=t,this._tokenFactorySourcePair=[this,this._input]}});Object.defineProperty(dn.prototype,"sourceName",{get:function(){return this._input.sourceName}});dn.prototype.emitToken=function(t){this._token=t};dn.prototype.emit=function(){var t=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.getCharIndex()-1,this._tokenStartLine,this._tokenStartColumn);return this.emitToken(t),t};dn.prototype.emitEOF=function(){var t=this.column,e=this.line,n=this._factory.create(this._tokenFactorySourcePair,is.EOF,null,is.DEFAULT_CHANNEL,this._input.index,this._input.index-1,e,t);return this.emitToken(n),n};Object.defineProperty(dn.prototype,"type",{get:function(){return this.type},set:function(t){this._type=t}});Object.defineProperty(dn.prototype,"line",{get:function(){return this._interp.line},set:function(t){this._interp.line=t}});Object.defineProperty(dn.prototype,"column",{get:function(){return this._interp.column},set:function(t){this._interp.column=t}});dn.prototype.getCharIndex=function(){return this._input.index};Object.defineProperty(dn.prototype,"text",{get:function(){return this._text!==null?this._text:this._interp.getText(this._input)},set:function(t){this._text=t}});dn.prototype.getAllTokens=function(){for(var t=[],e=this.nextToken();e.type!==is.EOF;)t.push(e),e=this.nextToken();return t};dn.prototype.notifyListeners=function(t){var e=this._tokenStartCharIndex,n=this._input.index,r=this._input.getText(e,n),a="token recognition error at: '"+this.getErrorDisplay(r)+"'",s=this.getErrorListenerDispatch();s.syntaxError(this,null,this._tokenStartLine,this._tokenStartColumn,a,t)};dn.prototype.getErrorDisplay=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e.join("")};dn.prototype.getErrorDisplayForChar=function(t){return t.charCodeAt(0)===is.EOF?"<EOF>":t===`
`?"\\n":t==="	"?"\\t":t==="\r"?"\\r":t};dn.prototype.getCharErrorDisplay=function(t){return"'"+this.getErrorDisplayForChar(t)+"'"};dn.prototype.recover=function(t){this._input.LA(1)!==is.EOF&&(t instanceof NMe?this._interp.consume(this._input):this._input.consume())};dx.Lexer=dn;var p4={},Ip={},Pp={},CMe=Rp().ATN,rD=Xn,mJ=rD.Hash,iD=rD.Set,vJ=$c.SemanticContext,DMe=jc().merge;function RMe(t){return t.hashCodeForConfigSet()}function IMe(t,e){return t===e?!0:t===null||e===null?!1:t.equalsForConfigSet(e)}function Mi(t){return this.configLookup=new iD(RMe,IMe),this.fullCtx=t===void 0?!0:t,this.readOnly=!1,this.configs=[],this.uniqueAlt=0,this.conflictingAlts=null,this.hasSemanticContext=!1,this.dipsIntoOuterContext=!1,this.cachedHashCode=-1,this}Mi.prototype.add=function(t,e){if(e===void 0&&(e=null),this.readOnly)throw"This set is readonly";t.semanticContext!==vJ.NONE&&(this.hasSemanticContext=!0),t.reachesIntoOuterContext>0&&(this.dipsIntoOuterContext=!0);var n=this.configLookup.add(t);if(n===t)return this.cachedHashCode=-1,this.configs.push(t),!0;var r=!this.fullCtx,a=DMe(n.context,t.context,r,e);return n.reachesIntoOuterContext=Math.max(n.reachesIntoOuterContext,t.reachesIntoOuterContext),t.precedenceFilterSuppressed&&(n.precedenceFilterSuppressed=!0),n.context=a,!0};Mi.prototype.getStates=function(){for(var t=new iD,e=0;e<this.configs.length;e++)t.add(this.configs[e].state);return t};Mi.prototype.getPredicates=function(){for(var t=[],e=0;e<this.configs.length;e++){var n=this.configs[e].semanticContext;n!==vJ.NONE&&t.push(n.semanticContext)}return t};Object.defineProperty(Mi.prototype,"items",{get:function(){return this.configs}});Mi.prototype.optimizeConfigs=function(t){if(this.readOnly)throw"This set is readonly";if(this.configLookup.length!==0)for(var e=0;e<this.configs.length;e++){var n=this.configs[e];n.context=t.getCachedContext(n.context)}};Mi.prototype.addAll=function(t){for(var e=0;e<t.length;e++)this.add(t[e]);return!1};Mi.prototype.equals=function(t){return this===t||t instanceof Mi&&rD.equalArrays(this.configs,t.configs)&&this.fullCtx===t.fullCtx&&this.uniqueAlt===t.uniqueAlt&&this.conflictingAlts===t.conflictingAlts&&this.hasSemanticContext===t.hasSemanticContext&&this.dipsIntoOuterContext===t.dipsIntoOuterContext};Mi.prototype.hashCode=function(){var t=new mJ;return this.updateHashCode(t),t.finish()};Mi.prototype.updateHashCode=function(t){if(this.readOnly){if(this.cachedHashCode===-1){var t=new mJ;t.update(this.configs),this.cachedHashCode=t.finish()}t.update(this.cachedHashCode)}else t.update(this.configs)};Object.defineProperty(Mi.prototype,"length",{get:function(){return this.configs.length}});Mi.prototype.isEmpty=function(){return this.configs.length===0};Mi.prototype.contains=function(t){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.contains(t)};Mi.prototype.containsFast=function(t){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.containsFast(t)};Mi.prototype.clear=function(){if(this.readOnly)throw"This set is readonly";this.configs=[],this.cachedHashCode=-1,this.configLookup=new iD};Mi.prototype.setReadonly=function(t){this.readOnly=t,t&&(this.configLookup=null)};Mi.prototype.toString=function(){return rD.arrayToString(this.configs)+(this.hasSemanticContext?",hasSemanticContext="+this.hasSemanticContext:"")+(this.uniqueAlt!==CMe.INVALID_ALT_NUMBER?",uniqueAlt="+this.uniqueAlt:"")+(this.conflictingAlts!==null?",conflictingAlts="+this.conflictingAlts:"")+(this.dipsIntoOuterContext?",dipsIntoOuterContext":"")};function Rw(){return Mi.call(this),this.configLookup=new iD,this}Rw.prototype=Object.create(Mi.prototype);Rw.prototype.constructor=Rw;Pp.ATNConfigSet=Mi;Pp.OrderedATNConfigSet=Rw;var PMe=Pp.ATNConfigSet,gJ=Xn,OMe=gJ.Hash,LMe=gJ.Set;function yJ(t,e){return this.alt=e,this.pred=t,this}yJ.prototype.toString=function(){return"("+this.pred+", "+this.alt+")"};function Um(t,e){return t===null&&(t=-1),e===null&&(e=new PMe),this.stateNumber=t,this.configs=e,this.edges=null,this.isAcceptState=!1,this.prediction=0,this.lexerActionExecutor=null,this.requiresFullContext=!1,this.predicates=null,this}Um.prototype.getAltSet=function(){var t=new LMe;if(this.configs!==null)for(var e=0;e<this.configs.length;e++){var n=this.configs[e];t.add(n.alt)}return t.length===0?null:t};Um.prototype.equals=function(t){return this===t||t instanceof Um&&this.configs.equals(t.configs)};Um.prototype.toString=function(){var t=""+this.stateNumber+":"+this.configs;return this.isAcceptState&&(t=t+"=>",this.predicates!==null?t=t+this.predicates:t=t+this.prediction),t};Um.prototype.hashCode=function(){var t=new OMe;return t.update(this.configs),this.isAcceptState&&(this.predicates!==null?t.update(this.predicates):t.update(this.prediction)),t.finish()};Ip.DFAState=Um;Ip.PredPrediction=yJ;var kMe=Ip.DFAState,UMe=Pp.ATNConfigSet,FMe=jc().getCachedPredictionContext;function d4(t,e){return this.atn=t,this.sharedContextCache=e,this}d4.ERROR=new kMe(2147483647,new UMe);d4.prototype.getCachedContext=function(t){if(this.sharedContextCache===null)return t;var e={};return FMe(t,this.sharedContextCache,e)};p4.ATNSimulator=d4;var xJ={},BMe=Xn.hashStuff,fL=tu.LexerIndexedCustomAction;function yu(t){return this.lexerActions=t===null?[]:t,this.cachedHashCode=BMe(t),this}yu.append=function(t,e){if(t===null)return new yu([e]);var n=t.lexerActions.concat([e]);return new yu(n)};yu.prototype.fixOffsetBeforeMatch=function(t){for(var e=null,n=0;n<this.lexerActions.length;n++)this.lexerActions[n].isPositionDependent&&!(this.lexerActions[n]instanceof fL)&&(e===null&&(e=this.lexerActions.concat([])),e[n]=new fL(t,this.lexerActions[n]));return e===null?this:new yu(e)};yu.prototype.execute=function(t,e,n){var r=!1,a=e.index;try{for(var s=0;s<this.lexerActions.length;s++){var o=this.lexerActions[s];if(o instanceof fL){var u=o.offset;e.seek(n+u),o=o.action,r=n+u!==a}else o.isPositionDependent&&(e.seek(a),r=!1);o.execute(t)}}finally{r&&e.seek(a)}};yu.prototype.hashCode=function(){return this.cachedHashCode};yu.prototype.updateHashCode=function(t){t.update(this.cachedHashCode)};yu.prototype.equals=function(t){if(this===t)return!0;if(t instanceof yu){if(this.cachedHashCode!=t.cachedHashCode)return!1;if(this.lexerActions.length!=t.lexerActions.length)return!1;for(var e=this.lexerActions.length,n=0;n<e;++n)if(!this.lexerActions[n].equals(t.lexerActions[n]))return!1;return!0}else return!1};xJ.LexerActionExecutor=yu;var Fm=mi.Token,aD=dx.Lexer,zMe=Rp().ATN,jy=p4.ATNSimulator,qMe=Ip.DFAState,bJ=Pp.OrderedATNConfigSet,pL=jc().PredictionContext,GMe=jc().SingletonPredictionContext,SJ=Br.RuleStopState,Ju=pv.LexerATNConfig,vf=_i.Transition,HMe=xJ.LexerActionExecutor,VMe=Ga.LexerNoViableAltException;function wJ(t){t.index=-1,t.line=0,t.column=-1,t.dfaState=null}function _J(){return wJ(this),this}_J.prototype.reset=function(){wJ(this)};function Zt(t,e,n,r){return jy.call(this,e,r),this.decisionToDFA=n,this.recog=t,this.startIndex=-1,this.line=1,this.column=0,this.mode=aD.DEFAULT_MODE,this.prevAccept=new _J,this}Zt.prototype=Object.create(jy.prototype);Zt.prototype.constructor=Zt;Zt.debug=!1;Zt.dfa_debug=!1;Zt.MIN_DFA_EDGE=0;Zt.MAX_DFA_EDGE=127;Zt.match_calls=0;Zt.prototype.copyState=function(t){this.column=t.column,this.line=t.line,this.mode=t.mode,this.startIndex=t.startIndex};Zt.prototype.match=function(t,e){this.match_calls+=1,this.mode=e;var n=t.mark();try{this.startIndex=t.index,this.prevAccept.reset();var r=this.decisionToDFA[e];return r.s0===null?this.matchATN(t):this.execATN(t,r.s0)}finally{t.release(n)}};Zt.prototype.reset=function(){this.prevAccept.reset(),this.startIndex=-1,this.line=1,this.column=0,this.mode=aD.DEFAULT_MODE};Zt.prototype.matchATN=function(t){var e=this.atn.modeToStartState[this.mode];Zt.debug&&console.log("matchATN mode "+this.mode+" start: "+e);var n=this.mode,r=this.computeStartState(t,e),a=r.hasSemanticContext;r.hasSemanticContext=!1;var s=this.addDFAState(r);a||(this.decisionToDFA[this.mode].s0=s);var o=this.execATN(t,s);return Zt.debug&&console.log("DFA after matchATN: "+this.decisionToDFA[n].toLexerString()),o};Zt.prototype.execATN=function(t,e){Zt.debug&&console.log("start state closure="+e.configs),e.isAcceptState&&this.captureSimState(this.prevAccept,t,e);for(var n=t.LA(1),r=e;;){Zt.debug&&console.log("execATN loop starting closure: "+r.configs);var a=this.getExistingTargetState(r,n);if(a===null&&(a=this.computeTargetState(t,r,n)),a===jy.ERROR||(n!==Fm.EOF&&this.consume(t),a.isAcceptState&&(this.captureSimState(this.prevAccept,t,a),n===Fm.EOF)))break;n=t.LA(1),r=a}return this.failOrAccept(this.prevAccept,t,r.configs,n)};Zt.prototype.getExistingTargetState=function(t,e){if(t.edges===null||e<Zt.MIN_DFA_EDGE||e>Zt.MAX_DFA_EDGE)return null;var n=t.edges[e-Zt.MIN_DFA_EDGE];return n===void 0&&(n=null),Zt.debug&&n!==null&&console.log("reuse state "+t.stateNumber+" edge to "+n.stateNumber),n};Zt.prototype.computeTargetState=function(t,e,n){var r=new bJ;return this.getReachableConfigSet(t,e.configs,r,n),r.items.length===0?(r.hasSemanticContext||this.addDFAEdge(e,n,jy.ERROR),jy.ERROR):this.addDFAEdge(e,n,null,r)};Zt.prototype.failOrAccept=function(t,e,n,r){if(this.prevAccept.dfaState!==null){var a=t.dfaState.lexerActionExecutor;return this.accept(e,a,this.startIndex,t.index,t.line,t.column),t.dfaState.prediction}else{if(r===Fm.EOF&&e.index===this.startIndex)return Fm.EOF;throw new VMe(this.recog,e,this.startIndex,n)}};Zt.prototype.getReachableConfigSet=function(t,e,n,r){for(var a=zMe.INVALID_ALT_NUMBER,s=0;s<e.items.length;s++){var o=e.items[s],u=o.alt===a;if(!(u&&o.passedThroughNonGreedyDecision)){Zt.debug&&console.log(`testing %s at %s
`,this.getTokenName(r),o.toString(this.recog,!0));for(var l=0;l<o.state.transitions.length;l++){var f=o.state.transitions[l],c=this.getReachableTarget(f,r);if(c!==null){var p=o.lexerActionExecutor;p!==null&&(p=p.fixOffsetBeforeMatch(t.index-this.startIndex));var d=r===Fm.EOF,h=new Ju({state:c,lexerActionExecutor:p},o);this.closure(t,h,n,u,!0,d)&&(a=o.alt)}}}}};Zt.prototype.accept=function(t,e,n,r,a,s){Zt.debug&&console.log(`ACTION %s
`,e),t.seek(r),this.line=a,this.column=s,e!==null&&this.recog!==null&&e.execute(this.recog,t,n)};Zt.prototype.getReachableTarget=function(t,e){return t.matches(e,0,aD.MAX_CHAR_VALUE)?t.target:null};Zt.prototype.computeStartState=function(t,e){for(var n=pL.EMPTY,r=new bJ,a=0;a<e.transitions.length;a++){var s=e.transitions[a].target,o=new Ju({state:s,alt:a+1,context:n},null);this.closure(t,o,r,!1,!1,!1)}return r};Zt.prototype.closure=function(t,e,n,r,a,s){var o=null;if(Zt.debug&&console.log("closure("+e.toString(this.recog,!0)+")"),e.state instanceof SJ){if(Zt.debug&&(this.recog!==null?console.log(`closure at %s rule stop %s
`,this.recog.ruleNames[e.state.ruleIndex],e):console.log(`closure at rule stop %s
`,e)),e.context===null||e.context.hasEmptyPath()){if(e.context===null||e.context.isEmpty())return n.add(e),!0;n.add(new Ju({state:e.state,context:pL.EMPTY},e)),r=!0}if(e.context!==null&&!e.context.isEmpty()){for(var u=0;u<e.context.length;u++)if(e.context.getReturnState(u)!==pL.EMPTY_RETURN_STATE){var l=e.context.getParent(u),f=this.atn.states[e.context.getReturnState(u)];o=new Ju({state:f,context:l},e),r=this.closure(t,o,n,r,a,s)}}return r}e.state.epsilonOnlyTransitions||(!r||!e.passedThroughNonGreedyDecision)&&n.add(e);for(var c=0;c<e.state.transitions.length;c++){var p=e.state.transitions[c];o=this.getEpsilonTarget(t,e,p,n,a,s),o!==null&&(r=this.closure(t,o,n,r,a,s))}return r};Zt.prototype.getEpsilonTarget=function(t,e,n,r,a,s){var o=null;if(n.serializationType===vf.RULE){var u=GMe.create(e.context,n.followState.stateNumber);o=new Ju({state:n.target,context:u},e)}else{if(n.serializationType===vf.PRECEDENCE)throw"Precedence predicates are not supported in lexers.";if(n.serializationType===vf.PREDICATE)Zt.debug&&console.log("EVAL rule "+n.ruleIndex+":"+n.predIndex),r.hasSemanticContext=!0,this.evaluatePredicate(t,n.ruleIndex,n.predIndex,a)&&(o=new Ju({state:n.target},e));else if(n.serializationType===vf.ACTION)if(e.context===null||e.context.hasEmptyPath()){var l=HMe.append(e.lexerActionExecutor,this.atn.lexerActions[n.actionIndex]);o=new Ju({state:n.target,lexerActionExecutor:l},e)}else o=new Ju({state:n.target},e);else n.serializationType===vf.EPSILON?o=new Ju({state:n.target},e):(n.serializationType===vf.ATOM||n.serializationType===vf.RANGE||n.serializationType===vf.SET)&&s&&n.matches(Fm.EOF,0,aD.MAX_CHAR_VALUE)&&(o=new Ju({state:n.target},e))}return o};Zt.prototype.evaluatePredicate=function(t,e,n,r){if(this.recog===null)return!0;if(!r)return this.recog.sempred(null,e,n);var a=this.column,s=this.line,o=t.index,u=t.mark();try{return this.consume(t),this.recog.sempred(null,e,n)}finally{this.column=a,this.line=s,t.seek(o),t.release(u)}};Zt.prototype.captureSimState=function(t,e,n){t.index=e.index,t.line=this.line,t.column=this.column,t.dfaState=n};Zt.prototype.addDFAEdge=function(t,e,n,r){if(n===void 0&&(n=null),r===void 0&&(r=null),n===null&&r!==null){var a=r.hasSemanticContext;if(r.hasSemanticContext=!1,n=this.addDFAState(r),a)return n}return e<Zt.MIN_DFA_EDGE||e>Zt.MAX_DFA_EDGE||(Zt.debug&&console.log("EDGE "+t+" -> "+n+" upon "+e),t.edges===null&&(t.edges=[]),t.edges[e-Zt.MIN_DFA_EDGE]=n),n};Zt.prototype.addDFAState=function(t){for(var e=new qMe(null,t),n=null,r=0;r<t.items.length;r++){var a=t.items[r];if(a.state instanceof SJ){n=a;break}}n!==null&&(e.isAcceptState=!0,e.lexerActionExecutor=n.lexerActionExecutor,e.prediction=this.atn.ruleToTokenType[n.state.ruleIndex]);var s=this.decisionToDFA[this.mode],o=s.states.get(e);if(o!==null)return o;var u=e;return u.stateNumber=s.states.length,t.setReadonly(!0),u.configs=t,s.states.add(u),u};Zt.prototype.getDFA=function(t){return this.decisionToDFA[t]};Zt.prototype.getText=function(t){return t.getText(this.startIndex,t.index-1)};Zt.prototype.consume=function(t){var e=t.LA(1);e===10?(this.line+=1,this.column=0):this.column+=1,t.consume()};Zt.prototype.getTokenName=function(t){return t===-1?"EOF":"'"+String.fromCharCode(t)+"'"};cJ.LexerATNSimulator=Zt;var MJ={},h4={};Xn.Set;var WMe=Xn.Map,m4=Xn.BitSet,$Me=Xn.AltDict,EJ=Rp().ATN,TJ=Br.RuleStopState,jMe=Pp.ATNConfigSet,XMe=pv.ATNConfig,YMe=$c.SemanticContext;Xn.Hash;var QMe=Xn.hashStuff;Xn.equalArrays;function gr(){return this}gr.SLL=0;gr.LL=1;gr.LL_EXACT_AMBIG_DETECTION=2;gr.hasSLLConflictTerminatingPrediction=function(t,e){if(gr.allConfigsInRuleStopStates(e))return!0;if(t===gr.SLL&&e.hasSemanticContext){for(var n=new jMe,r=0;r<e.items.length;r++){var a=e.items[r];a=new XMe({semanticContext:YMe.NONE},a),n.add(a)}e=n}var s=gr.getConflictingAltSubsets(e);return gr.hasConflictingAltSet(s)&&!gr.hasStateAssociatedWithOneAlt(e)};gr.hasConfigInRuleStopState=function(t){for(var e=0;e<t.items.length;e++){var n=t.items[e];if(n.state instanceof TJ)return!0}return!1};gr.allConfigsInRuleStopStates=function(t){for(var e=0;e<t.items.length;e++){var n=t.items[e];if(!(n.state instanceof TJ))return!1}return!0};gr.resolvesToJustOneViableAlt=function(t){return gr.getSingleViableAlt(t)};gr.allSubsetsConflict=function(t){return!gr.hasNonConflictingAltSet(t)};gr.hasNonConflictingAltSet=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.length===1)return!0}return!1};gr.hasConflictingAltSet=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.length>1)return!0}return!1};gr.allSubsetsEqual=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n];if(e===null)e=r;else if(r!==e)return!1}return!0};gr.getUniqueAlt=function(t){var e=gr.getAlts(t);return e.length===1?e.minValue():EJ.INVALID_ALT_NUMBER};gr.getAlts=function(t){var e=new m4;return t.map(function(n){e.or(n)}),e};gr.getConflictingAltSubsets=function(t){var e=new WMe;return e.hashFunction=function(n){QMe(n.state.stateNumber,n.context)},e.equalsFunction=function(n,r){return n.state.stateNumber==r.state.stateNumber&&n.context.equals(r.context)},t.items.map(function(n){var r=e.get(n);r===null&&(r=new m4,e.put(n,r)),r.add(n.alt)}),e.getValues()};gr.getStateToAltMap=function(t){var e=new $Me;return t.items.map(function(n){var r=e.get(n.state);r===null&&(r=new m4,e.put(n.state,r)),r.add(n.alt)}),e};gr.hasStateAssociatedWithOneAlt=function(t){for(var e=gr.getStateToAltMap(t).values(),n=0;n<e.length;n++)if(e[n].length===1)return!0;return!1};gr.getSingleViableAlt=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],a=r.minValue();if(e===null)e=a;else if(e!==a)return EJ.INVALID_ALT_NUMBER}return e};h4.PredictionMode=gr;var Ih=Xn,AJ=Ih.Set,NJ=Ih.BitSet,ZMe=Ih.DoubleDict,la=Rp().ATN,Yb=Br.ATNState,Ia=pv.ATNConfig,rh=Pp.ATNConfigSet,uc=mi.Token,dL=Ip.DFAState,JMe=Ip.PredPrediction,Bm=p4.ATNSimulator,ia=h4.PredictionMode,_7=nD().RuleContext;t4().ParserRuleContext;var Xf=$c.SemanticContext,hx=Br.RuleStopState,M7=jc().PredictionContext,v4=Ls.Interval,mx=_i,gf=mx.Transition,KMe=mx.SetTransition,eEe=mx.NotSetTransition,tEe=mx.RuleTransition,nEe=mx.ActionTransition,rEe=Ga.NoViableAltException,iEe=jc().SingletonPredictionContext,aEe=jc().predictionContextFromRuleContext;function $t(t,e,n,r){return Bm.call(this,e,r),this.parser=t,this.decisionToDFA=n,this.predictionMode=ia.LL,this._input=null,this._startIndex=0,this._outerContext=null,this._dfa=null,this.mergeCache=null,this}$t.prototype=Object.create(Bm.prototype);$t.prototype.constructor=$t;$t.prototype.debug=!1;$t.prototype.debug_closure=!1;$t.prototype.debug_add=!1;$t.prototype.debug_list_atn_decisions=!1;$t.prototype.dfa_debug=!1;$t.prototype.retry_debug=!1;$t.prototype.reset=function(){};$t.prototype.adaptivePredict=function(t,e,n){(this.debug||this.debug_list_atn_decisions)&&console.log("adaptivePredict decision "+e+" exec LA(1)=="+this.getLookaheadName(t)+" line "+t.LT(1).line+":"+t.LT(1).column),this._input=t,this._startIndex=t.index,this._outerContext=n;var r=this.decisionToDFA[e];this._dfa=r;var a=t.mark(),s=t.index;try{var o;if(r.precedenceDfa?o=r.getPrecedenceStartState(this.parser.getPrecedence()):o=r.s0,o===null){n===null&&(n=_7.EMPTY),(this.debug||this.debug_list_atn_decisions)&&console.log("predictATN decision "+r.decision+" exec LA(1)=="+this.getLookaheadName(t)+", outerContext="+n.toString(this.parser.ruleNames));var u=!1,l=this.computeStartState(r.atnStartState,_7.EMPTY,u);r.precedenceDfa?(r.s0.configs=l,l=this.applyPrecedenceFilter(l),o=this.addDFAState(r,new dL(null,l)),r.setPrecedenceStartState(this.parser.getPrecedence(),o)):(o=this.addDFAState(r,new dL(null,l)),r.s0=o)}var f=this.execATN(r,o,t,s,n);return this.debug&&console.log("DFA after predictATN: "+r.toString(this.parser.literalNames)),f}finally{this._dfa=null,this.mergeCache=null,t.seek(s),t.release(a)}};$t.prototype.execATN=function(t,e,n,r,a){(this.debug||this.debug_list_atn_decisions)&&console.log("execATN decision "+t.decision+" exec LA(1)=="+this.getLookaheadName(n)+" line "+n.LT(1).line+":"+n.LT(1).column);var s,o=e;this.debug&&console.log("s0 = "+e);for(var u=n.LA(1);;){var l=this.getExistingTargetState(o,u);if(l===null&&(l=this.computeTargetState(t,o,u)),l===Bm.ERROR){var f=this.noViableAlt(n,a,o.configs,r);if(n.seek(r),s=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(o.configs,a),s!==la.INVALID_ALT_NUMBER)return s;throw f}if(l.requiresFullContext&&this.predictionMode!==ia.SLL){var c=null;if(l.predicates!==null){this.debug&&console.log("DFA state has preds in DFA sim LL failover");var p=n.index;if(p!==r&&n.seek(r),c=this.evalSemanticContext(l.predicates,a,!0),c.length===1)return this.debug&&console.log("Full LL avoided"),c.minValue();p!==r&&n.seek(p)}this.dfa_debug&&console.log("ctx sensitive state "+a+" in "+l);var d=!0,h=this.computeStartState(t.atnStartState,a,d);return this.reportAttemptingFullContext(t,c,l.configs,r,n.index),s=this.execATNWithFullContext(t,l,h,n,r,a),s}if(l.isAcceptState){if(l.predicates===null)return l.prediction;var m=n.index;n.seek(r);var v=this.evalSemanticContext(l.predicates,a,!0);if(v.length===0)throw this.noViableAlt(n,a,l.configs,r);return v.length===1||this.reportAmbiguity(t,l,r,m,!1,v,l.configs),v.minValue()}o=l,u!==uc.EOF&&(n.consume(),u=n.LA(1))}};$t.prototype.getExistingTargetState=function(t,e){var n=t.edges;return n===null?null:n[e+1]||null};$t.prototype.computeTargetState=function(t,e,n){var r=this.computeReachSet(e.configs,n,!1);if(r===null)return this.addDFAEdge(t,e,n,Bm.ERROR),Bm.ERROR;var a=new dL(null,r),s=this.getUniqueAlt(r);if(this.debug){var o=ia.getConflictingAltSubsets(r);console.log("SLL altSubSets="+Ih.arrayToString(o)+", previous="+e.configs+", configs="+r+", predict="+s+", allSubsetsConflict="+ia.allSubsetsConflict(o)+", conflictingAlts="+this.getConflictingAlts(r))}return s!==la.INVALID_ALT_NUMBER?(a.isAcceptState=!0,a.configs.uniqueAlt=s,a.prediction=s):ia.hasSLLConflictTerminatingPrediction(this.predictionMode,r)&&(a.configs.conflictingAlts=this.getConflictingAlts(r),a.requiresFullContext=!0,a.isAcceptState=!0,a.prediction=a.configs.conflictingAlts.minValue()),a.isAcceptState&&a.configs.hasSemanticContext&&(this.predicateDFAState(a,this.atn.getDecisionState(t.decision)),a.predicates!==null&&(a.prediction=la.INVALID_ALT_NUMBER)),a=this.addDFAEdge(t,e,n,a),a};$t.prototype.predicateDFAState=function(t,e){var n=e.transitions.length,r=this.getConflictingAltsOrUniqueAlt(t.configs),a=this.getPredsForAmbigAlts(r,t.configs,n);a!==null?(t.predicates=this.getPredicatePredictions(r,a),t.prediction=la.INVALID_ALT_NUMBER):t.prediction=r.minValue()};$t.prototype.execATNWithFullContext=function(t,e,n,r,a,s){(this.debug||this.debug_list_atn_decisions)&&console.log("execATNWithFullContext "+n);var o=!0,u=!1,l=null,f=n;r.seek(a);for(var c=r.LA(1),p=-1;;){if(l=this.computeReachSet(f,c,o),l===null){var d=this.noViableAlt(r,s,f,a);r.seek(a);var h=this.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule(f,s);if(h!==la.INVALID_ALT_NUMBER)return h;throw d}var m=ia.getConflictingAltSubsets(l);if(this.debug&&console.log("LL altSubSets="+m+", predict="+ia.getUniqueAlt(m)+", resolvesToJustOneViableAlt="+ia.resolvesToJustOneViableAlt(m)),l.uniqueAlt=this.getUniqueAlt(l),l.uniqueAlt!==la.INVALID_ALT_NUMBER){p=l.uniqueAlt;break}else if(this.predictionMode!==ia.LL_EXACT_AMBIG_DETECTION){if(p=ia.resolvesToJustOneViableAlt(m),p!==la.INVALID_ALT_NUMBER)break}else if(ia.allSubsetsConflict(m)&&ia.allSubsetsEqual(m)){u=!0,p=ia.getSingleViableAlt(m);break}f=l,c!==uc.EOF&&(r.consume(),c=r.LA(1))}return l.uniqueAlt!==la.INVALID_ALT_NUMBER?(this.reportContextSensitivity(t,p,l,a,r.index),p):(this.reportAmbiguity(t,e,a,r.index,u,null,l),p)};$t.prototype.computeReachSet=function(t,e,n){this.debug&&console.log("in computeReachSet, starting closure: "+t),this.mergeCache===null&&(this.mergeCache=new ZMe);for(var r=new rh(n),a=null,s=0;s<t.items.length;s++){var o=t.items[s];if(this.debug_add&&console.log("testing "+this.getTokenName(e)+" at "+o),o.state instanceof hx){(n||e===uc.EOF)&&(a===null&&(a=[]),a.push(o),this.debug_add&&console.log("added "+o+" to skippedStopStates"));continue}for(var u=0;u<o.state.transitions.length;u++){var l=o.state.transitions[u],f=this.getReachableTarget(l,e);if(f!==null){var c=new Ia({state:f},o);r.add(c,this.mergeCache),this.debug_add&&console.log("added "+c+" to intermediate")}}}var p=null;if(a===null&&e!==uc.EOF&&(r.items.length===1||this.getUniqueAlt(r)!==la.INVALID_ALT_NUMBER)&&(p=r),p===null){p=new rh(n);for(var d=new AJ,h=e===uc.EOF,m=0;m<r.items.length;m++)this.closure(r.items[m],p,d,!1,n,h)}if(e===uc.EOF&&(p=this.removeAllConfigsNotInRuleStopState(p,p===r)),a!==null&&(!n||!ia.hasConfigInRuleStopState(p)))for(var v=0;v<a.length;v++)p.add(a[v],this.mergeCache);return p.items.length===0?null:p};$t.prototype.removeAllConfigsNotInRuleStopState=function(t,e){if(ia.allConfigsInRuleStopStates(t))return t;for(var n=new rh(t.fullCtx),r=0;r<t.items.length;r++){var a=t.items[r];if(a.state instanceof hx){n.add(a,this.mergeCache);continue}if(e&&a.state.epsilonOnlyTransitions){var s=this.atn.nextTokens(a.state);if(s.contains(uc.EPSILON)){var o=this.atn.ruleToStopState[a.state.ruleIndex];n.add(new Ia({state:o},a),this.mergeCache)}}}return n};$t.prototype.computeStartState=function(t,e,n){for(var r=aEe(this.atn,e),a=new rh(n),s=0;s<t.transitions.length;s++){var o=t.transitions[s].target,u=new Ia({state:o,alt:s+1,context:r},null),l=new AJ;this.closure(u,a,l,!0,n,!1)}return a};$t.prototype.applyPrecedenceFilter=function(t){for(var e,n=[],r=new rh(t.fullCtx),a=0;a<t.items.length;a++)if(e=t.items[a],e.alt===1){var s=e.semanticContext.evalPrecedence(this.parser,this._outerContext);s!==null&&(n[e.state.stateNumber]=e.context,s!==e.semanticContext?r.add(new Ia({semanticContext:s},e),this.mergeCache):r.add(e,this.mergeCache))}for(a=0;a<t.items.length;a++)if(e=t.items[a],e.alt!==1){if(!e.precedenceFilterSuppressed){var o=n[e.state.stateNumber]||null;if(o!==null&&o.equals(e.context))continue}r.add(e,this.mergeCache)}return r};$t.prototype.getReachableTarget=function(t,e){return t.matches(e,0,this.atn.maxTokenType)?t.target:null};$t.prototype.getPredsForAmbigAlts=function(t,e,n){for(var r=[],a=0;a<e.items.length;a++){var s=e.items[a];t.contains(s.alt)&&(r[s.alt]=Xf.orContext(r[s.alt]||null,s.semanticContext))}var o=0;for(a=1;a<n+1;a++){var u=r[a]||null;u===null?r[a]=Xf.NONE:u!==Xf.NONE&&(o+=1)}return o===0&&(r=null),this.debug&&console.log("getPredsForAmbigAlts result "+Ih.arrayToString(r)),r};$t.prototype.getPredicatePredictions=function(t,e){for(var n=[],r=!1,a=1;a<e.length;a++){var s=e[a];t!==null&&t.contains(a)&&n.push(new JMe(s,a)),s!==Xf.NONE&&(r=!0)}return r?n:null};$t.prototype.getSynValidOrSemInvalidAltThatFinishedDecisionEntryRule=function(t,e){var n=this.splitAccordingToSemanticValidity(t,e),r=n[0],a=n[1],s=this.getAltThatFinishedDecisionEntryRule(r);return s!==la.INVALID_ALT_NUMBER||a.items.length>0&&(s=this.getAltThatFinishedDecisionEntryRule(a),s!==la.INVALID_ALT_NUMBER)?s:la.INVALID_ALT_NUMBER};$t.prototype.getAltThatFinishedDecisionEntryRule=function(t){for(var e=[],n=0;n<t.items.length;n++){var r=t.items[n];(r.reachesIntoOuterContext>0||r.state instanceof hx&&r.context.hasEmptyPath())&&e.indexOf(r.alt)<0&&e.push(r.alt)}return e.length===0?la.INVALID_ALT_NUMBER:Math.min.apply(null,e)};$t.prototype.splitAccordingToSemanticValidity=function(t,e){for(var n=new rh(t.fullCtx),r=new rh(t.fullCtx),a=0;a<t.items.length;a++){var s=t.items[a];if(s.semanticContext!==Xf.NONE){var o=s.semanticContext.evaluate(this.parser,e);o?n.add(s):r.add(s)}else n.add(s)}return[n,r]};$t.prototype.evalSemanticContext=function(t,e,n){for(var r=new NJ,a=0;a<t.length;a++){var s=t[a];if(s.pred===Xf.NONE){if(r.add(s.alt),!n)break;continue}var o=s.pred.evaluate(this.parser,e);if((this.debug||this.dfa_debug)&&console.log("eval pred "+s+"="+o),o&&((this.debug||this.dfa_debug)&&console.log("PREDICT "+s.alt),r.add(s.alt),!n))break}return r};$t.prototype.closure=function(t,e,n,r,a,s){var o=0;this.closureCheckingStopState(t,e,n,r,a,o,s)};$t.prototype.closureCheckingStopState=function(t,e,n,r,a,s,o){if((this.debug||this.debug_closure)&&(console.log("closure("+t.toString(this.parser,!0)+")"),t.reachesIntoOuterContext>50))throw"problem";if(t.state instanceof hx)if(t.context.isEmpty())if(a){e.add(t,this.mergeCache);return}else this.debug&&console.log("FALLING off rule "+this.getRuleName(t.state.ruleIndex));else{for(var u=0;u<t.context.length;u++){if(t.context.getReturnState(u)===M7.EMPTY_RETURN_STATE){if(a){e.add(new Ia({state:t.state,context:M7.EMPTY},t),this.mergeCache);continue}else this.debug&&console.log("FALLING off rule "+this.getRuleName(t.state.ruleIndex)),this.closure_(t,e,n,r,a,s,o);continue}var l=this.atn.states[t.context.getReturnState(u)],f=t.context.getParent(u),c={state:l,alt:t.alt,context:f,semanticContext:t.semanticContext},p=new Ia(c,null);p.reachesIntoOuterContext=t.reachesIntoOuterContext,this.closureCheckingStopState(p,e,n,r,a,s-1,o)}return}this.closure_(t,e,n,r,a,s,o)};$t.prototype.closure_=function(t,e,n,r,a,s,o){var u=t.state;u.epsilonOnlyTransitions||e.add(t,this.mergeCache);for(var l=0;l<u.transitions.length;l++)if(!(l==0&&this.canDropLoopEntryEdgeInLeftRecursiveRule(t))){var f=u.transitions[l],c=r&&!(f instanceof nEe),p=this.getEpsilonTarget(t,f,c,s===0,a,o);if(p!==null){var d=s;if(t.state instanceof hx){if(this._dfa!==null&&this._dfa.precedenceDfa&&f.outermostPrecedenceReturn===this._dfa.atnStartState.ruleIndex&&(p.precedenceFilterSuppressed=!0),p.reachesIntoOuterContext+=1,n.add(p)!==p)continue;e.dipsIntoOuterContext=!0,d-=1,this.debug&&console.log("dips into outer ctx: "+p)}else{if(!f.isEpsilon&&n.add(p)!==p)continue;f instanceof tEe&&d>=0&&(d+=1)}this.closureCheckingStopState(p,e,n,c,a,d,o)}}};$t.prototype.canDropLoopEntryEdgeInLeftRecursiveRule=function(t){var e=t.state;if(e.stateType!=Yb.STAR_LOOP_ENTRY||e.stateType!=Yb.STAR_LOOP_ENTRY||!e.isPrecedenceDecision||t.context.isEmpty()||t.context.hasEmptyPath())return!1;for(var n=t.context.length,r=0;r<n;r++){var a=this.atn.states[t.context.getReturnState(r)];if(a.ruleIndex!=e.ruleIndex)return!1}for(var s=e.transitions[0].target,o=s.endState.stateNumber,u=this.atn.states[o],r=0;r<n;r++){var l=t.context.getReturnState(r),a=this.atn.states[l];if(a.transitions.length!=1||!a.transitions[0].isEpsilon)return!1;var f=a.transitions[0].target;if(!(a.stateType==Yb.BLOCK_END&&f==e)&&a!=u&&f!=u&&!(f.stateType==Yb.BLOCK_END&&f.transitions.length==1&&f.transitions[0].isEpsilon&&f.transitions[0].target==e))return!1}return!0};$t.prototype.getRuleName=function(t){return this.parser!==null&&t>=0?this.parser.ruleNames[t]:"<rule "+t+">"};$t.prototype.getEpsilonTarget=function(t,e,n,r,a,s){switch(e.serializationType){case gf.RULE:return this.ruleTransition(t,e);case gf.PRECEDENCE:return this.precedenceTransition(t,e,n,r,a);case gf.PREDICATE:return this.predTransition(t,e,n,r,a);case gf.ACTION:return this.actionTransition(t,e);case gf.EPSILON:return new Ia({state:e.target},t);case gf.ATOM:case gf.RANGE:case gf.SET:return s&&e.matches(uc.EOF,0,1)?new Ia({state:e.target},t):null;default:return null}};$t.prototype.actionTransition=function(t,e){if(this.debug){var n=e.actionIndex==-1?65535:e.actionIndex;console.log("ACTION edge "+e.ruleIndex+":"+n)}return new Ia({state:e.target},t)};$t.prototype.precedenceTransition=function(t,e,n,r,a){this.debug&&(console.log("PRED (collectPredicates="+n+") "+e.precedence+">=_p, ctx dependent=true"),this.parser!==null&&console.log("context surrounding pred is "+Ih.arrayToString(this.parser.getRuleInvocationStack())));var s=null;if(n&&r)if(a){var o=this._input.index;this._input.seek(this._startIndex);var u=e.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(o),u&&(s=new Ia({state:e.target},t))}else{var l=Xf.andContext(t.semanticContext,e.getPredicate());s=new Ia({state:e.target,semanticContext:l},t)}else s=new Ia({state:e.target},t);return this.debug&&console.log("config from pred transition="+s),s};$t.prototype.predTransition=function(t,e,n,r,a){this.debug&&(console.log("PRED (collectPredicates="+n+") "+e.ruleIndex+":"+e.predIndex+", ctx dependent="+e.isCtxDependent),this.parser!==null&&console.log("context surrounding pred is "+Ih.arrayToString(this.parser.getRuleInvocationStack())));var s=null;if(n&&(e.isCtxDependent&&r||!e.isCtxDependent))if(a){var o=this._input.index;this._input.seek(this._startIndex);var u=e.getPredicate().evaluate(this.parser,this._outerContext);this._input.seek(o),u&&(s=new Ia({state:e.target},t))}else{var l=Xf.andContext(t.semanticContext,e.getPredicate());s=new Ia({state:e.target,semanticContext:l},t)}else s=new Ia({state:e.target},t);return this.debug&&console.log("config from pred transition="+s),s};$t.prototype.ruleTransition=function(t,e){this.debug&&console.log("CALL rule "+this.getRuleName(e.target.ruleIndex)+", ctx="+t.context);var n=e.followState,r=iEe.create(t.context,n.stateNumber);return new Ia({state:e.target,context:r},t)};$t.prototype.getConflictingAlts=function(t){var e=ia.getConflictingAltSubsets(t);return ia.getAlts(e)};$t.prototype.getConflictingAltsOrUniqueAlt=function(t){var e=null;return t.uniqueAlt!==la.INVALID_ALT_NUMBER?(e=new NJ,e.add(t.uniqueAlt)):e=t.conflictingAlts,e};$t.prototype.getTokenName=function(t){if(t===uc.EOF)return"EOF";if(this.parser!==null&&this.parser.literalNames!==null)if(t>=this.parser.literalNames.length&&t>=this.parser.symbolicNames.length)console.log(""+t+" ttype out of range: "+this.parser.literalNames),console.log(""+this.parser.getInputStream().getTokens());else{var e=this.parser.literalNames[t]||this.parser.symbolicNames[t];return e+"<"+t+">"}return""+t};$t.prototype.getLookaheadName=function(t){return this.getTokenName(t.LA(1))};$t.prototype.dumpDeadEndConfigs=function(t){console.log("dead end configs: ");for(var e=t.getDeadEndConfigs(),n=0;n<e.length;n++){var r=e[n],a="no edges";if(r.state.transitions.length>0){var s=r.state.transitions[0];if(s instanceof AtomTransition)a="Atom "+this.getTokenName(s.label);else if(s instanceof KMe){var o=s instanceof eEe;a=(o?"~":"")+"Set "+s.set}}console.error(r.toString(this.parser,!0)+":"+a)}};$t.prototype.noViableAlt=function(t,e,n,r){return new rEe(this.parser,t,t.get(r),t.LT(1),n,e)};$t.prototype.getUniqueAlt=function(t){for(var e=la.INVALID_ALT_NUMBER,n=0;n<t.items.length;n++){var r=t.items[n];if(e===la.INVALID_ALT_NUMBER)e=r.alt;else if(r.alt!==e)return la.INVALID_ALT_NUMBER}return e};$t.prototype.addDFAEdge=function(t,e,n,r){if(this.debug&&console.log("EDGE "+e+" -> "+r+" upon "+this.getTokenName(n)),r===null)return null;if(r=this.addDFAState(t,r),e===null||n<-1||n>this.atn.maxTokenType)return r;if(e.edges===null&&(e.edges=[]),e.edges[n+1]=r,this.debug){var a=this.parser===null?null:this.parser.literalNames,s=this.parser===null?null:this.parser.symbolicNames;console.log(`DFA=
`+t.toString(a,s))}return r};$t.prototype.addDFAState=function(t,e){if(e==Bm.ERROR)return e;var n=t.states.get(e);return n!==null?n:(e.stateNumber=t.states.length,e.configs.readOnly||(e.configs.optimizeConfigs(this),e.configs.setReadonly(!0)),t.states.add(e),this.debug&&console.log("adding new DFA state: "+e),e)};$t.prototype.reportAttemptingFullContext=function(t,e,n,r,a){if(this.debug||this.retry_debug){var s=new v4(r,a+1);console.log("reportAttemptingFullContext decision="+t.decision+":"+n+", input="+this.parser.getTokenStream().getText(s))}this.parser!==null&&this.parser.getErrorListenerDispatch().reportAttemptingFullContext(this.parser,t,r,a,e,n)};$t.prototype.reportContextSensitivity=function(t,e,n,r,a){if(this.debug||this.retry_debug){var s=new v4(r,a+1);console.log("reportContextSensitivity decision="+t.decision+":"+n+", input="+this.parser.getTokenStream().getText(s))}this.parser!==null&&this.parser.getErrorListenerDispatch().reportContextSensitivity(this.parser,t,r,a,e,n)};$t.prototype.reportAmbiguity=function(t,e,n,r,a,s,o){if(this.debug||this.retry_debug){var u=new v4(n,r+1);console.log("reportAmbiguity "+s+":"+o+", input="+this.parser.getTokenStream().getText(u))}this.parser!==null&&this.parser.getErrorListenerDispatch().reportAmbiguity(this.parser,t,n,r,a,s,o)};MJ.ParserATNSimulator=$t;fv.ATN=Rp().ATN;fv.ATNDeserializer=n4.ATNDeserializer;fv.LexerATNSimulator=cJ.LexerATNSimulator;fv.ParserATNSimulator=MJ.ParserATNSimulator;fv.PredictionMode=h4.PredictionMode;var sEe={};/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var t=function(){try{var n={},r=Object.defineProperty,a=r(n,n,n)&&r}catch{}return a}(),e=function(n){if(this==null)throw TypeError();var r=String(this),a=r.length,s=n?Number(n):0;if(s!=s&&(s=0),!(s<0||s>=a)){var o=r.charCodeAt(s),u;return o>=55296&&o<=56319&&a>s+1&&(u=r.charCodeAt(s+1),u>=56320&&u<=57343)?(o-55296)*1024+u-56320+65536:o}};t?t(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();var vx={},CJ={},dv={};function hv(t,e,n){return this.dfa=t,this.literalNames=e||[],this.symbolicNames=n||[],this}hv.prototype.toString=function(){if(this.dfa.s0===null)return null;for(var t="",e=this.dfa.sortedStates(),n=0;n<e.length;n++){var r=e[n];if(r.edges!==null)for(var a=r.edges.length,s=0;s<a;s++){var o=r.edges[s]||null;o!==null&&o.stateNumber!==2147483647&&(t=t.concat(this.getStateString(r)),t=t.concat("-"),t=t.concat(this.getEdgeLabel(s)),t=t.concat("->"),t=t.concat(this.getStateString(o)),t=t.concat(`
`))}}return t.length===0?null:t};hv.prototype.getEdgeLabel=function(t){return t===0?"EOF":this.literalNames!==null||this.symbolicNames!==null?this.literalNames[t-1]||this.symbolicNames[t-1]:String.fromCharCode(t-1)};hv.prototype.getStateString=function(t){var e=(t.isAcceptState?":":"")+"s"+t.stateNumber+(t.requiresFullContext?"^":"");return t.isAcceptState?t.predicates!==null?e+"=>"+t.predicates.toString():e+"=>"+t.prediction.toString():e};function Xy(t){return hv.call(this,t,null),this}Xy.prototype=Object.create(hv.prototype);Xy.prototype.constructor=Xy;Xy.prototype.getEdgeLabel=function(t){return"'"+String.fromCharCode(t)+"'"};dv.DFASerializer=hv;dv.LexerDFASerializer=Xy;var oEe=Xn.Set,DJ=Ip.DFAState,uEe=Br.StarLoopEntryState,RJ=Pp.ATNConfigSet,lEe=dv.DFASerializer,cEe=dv.LexerDFASerializer;function Op(t,e){if(e===void 0&&(e=0),this.atnStartState=t,this.decision=e,this._states=new oEe,this.s0=null,this.precedenceDfa=!1,t instanceof uEe&&t.isPrecedenceDecision){this.precedenceDfa=!0;var n=new DJ(null,new RJ);n.edges=[],n.isAcceptState=!1,n.requiresFullContext=!1,this.s0=n}return this}Op.prototype.getPrecedenceStartState=function(t){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";return t<0||t>=this.s0.edges.length?null:this.s0.edges[t]||null};Op.prototype.setPrecedenceStartState=function(t,e){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";t<0||(this.s0.edges[t]=e)};Op.prototype.setPrecedenceDfa=function(t){if(this.precedenceDfa!==t){if(this._states=new DFAStatesSet,t){var e=new DJ(null,new RJ);e.edges=[],e.isAcceptState=!1,e.requiresFullContext=!1,this.s0=e}else this.s0=null;this.precedenceDfa=t}};Object.defineProperty(Op.prototype,"states",{get:function(){return this._states}});Op.prototype.sortedStates=function(){var t=this._states.values();return t.sort(function(e,n){return e.stateNumber-n.stateNumber})};Op.prototype.toString=function(t,e){if(t=t||null,e=e||null,this.s0===null)return"";var n=new lEe(this,t,e);return n.toString()};Op.prototype.toLexerString=function(){if(this.s0===null)return"";var t=new cEe(this);return t.toString()};CJ.DFA=Op;vx.DFA=CJ.DFA;vx.DFASerializer=dv.DFASerializer;vx.LexerDFASerializer=dv.LexerDFASerializer;vx.PredPrediction=Ip.PredPrediction;var fEe={};/*! https://mths.be/fromcodepoint v0.2.1 by @mathias */String.fromCodePoint||function(){var t=function(){try{var a={},s=Object.defineProperty,o=s(a,a,a)&&s}catch{}return o}(),e=String.fromCharCode,n=Math.floor,r=function(a){var s=16384,o=[],u,l,f=-1,c=arguments.length;if(!c)return"";for(var p="";++f<c;){var d=Number(arguments[f]);if(!isFinite(d)||d<0||d>1114111||n(d)!=d)throw RangeError("Invalid code point: "+d);d<=65535?o.push(d):(d-=65536,u=(d>>10)+55296,l=d%1024+56320,o.push(u,l)),(f+1==c||o.length>s)&&(p+=e.apply(null,o),o.length=0)}return p};t?t(String,"fromCodePoint",{value:r,configurable:!0,writable:!0}):String.fromCodePoint=r}();var mv={},sD=Xi;mv.Trees=rJ().Trees;mv.RuleNode=sD.RuleNode;mv.ParseTreeListener=sD.ParseTreeListener;mv.ParseTreeVisitor=sD.ParseTreeVisitor;mv.ParseTreeWalker=sD.ParseTreeWalker;var Qc={},IJ={},pEe=Xn.BitSet,PJ=Rh.ErrorListener,g4=Ls.Interval;function Ec(t){return PJ.call(this),t=t||!0,this.exactOnly=t,this}Ec.prototype=Object.create(PJ.prototype);Ec.prototype.constructor=Ec;Ec.prototype.reportAmbiguity=function(t,e,n,r,a,s,o){if(!(this.exactOnly&&!a)){var u="reportAmbiguity d="+this.getDecisionDescription(t,e)+": ambigAlts="+this.getConflictingAlts(s,o)+", input='"+t.getTokenStream().getText(new g4(n,r))+"'";t.notifyErrorListeners(u)}};Ec.prototype.reportAttemptingFullContext=function(t,e,n,r,a,s){var o="reportAttemptingFullContext d="+this.getDecisionDescription(t,e)+", input='"+t.getTokenStream().getText(new g4(n,r))+"'";t.notifyErrorListeners(o)};Ec.prototype.reportContextSensitivity=function(t,e,n,r,a,s){var o="reportContextSensitivity d="+this.getDecisionDescription(t,e)+", input='"+t.getTokenStream().getText(new g4(n,r))+"'";t.notifyErrorListeners(o)};Ec.prototype.getDecisionDescription=function(t,e){var n=e.decision,r=e.atnStartState.ruleIndex,a=t.ruleNames;if(r<0||r>=a.length)return""+n;var s=a[r]||null;return s===null||s.length===0?""+n:""+n+" ("+s+")"};Ec.prototype.getConflictingAlts=function(t,e){if(t!==null)return t;for(var n=new pEe,r=0;r<e.items.length;r++)n.add(e.items[r].alt);return"{"+n.values().join(", ")+"}"};IJ.DiagnosticErrorListener=Ec;var oD={},Yf=mi.Token,uD=Ga,dEe=uD.NoViableAltException,lD=uD.InputMismatchException,hEe=uD.FailedPredicateException,mEe=uD.ParseCancellationException,l0=Br.ATNState,vEe=Ls.Interval,OJ=Ls.IntervalSet;function Lp(){}Lp.prototype.reset=function(t){};Lp.prototype.recoverInline=function(t){};Lp.prototype.recover=function(t,e){};Lp.prototype.sync=function(t){};Lp.prototype.inErrorRecoveryMode=function(t){};Lp.prototype.reportError=function(t){};function cr(){return Lp.call(this),this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.lastErrorStates=null,this}cr.prototype=Object.create(Lp.prototype);cr.prototype.constructor=cr;cr.prototype.reset=function(t){this.endErrorCondition(t)};cr.prototype.beginErrorCondition=function(t){this.errorRecoveryMode=!0};cr.prototype.inErrorRecoveryMode=function(t){return this.errorRecoveryMode};cr.prototype.endErrorCondition=function(t){this.errorRecoveryMode=!1,this.lastErrorStates=null,this.lastErrorIndex=-1};cr.prototype.reportMatch=function(t){this.endErrorCondition(t)};cr.prototype.reportError=function(t,e){this.inErrorRecoveryMode(t)||(this.beginErrorCondition(t),e instanceof dEe?this.reportNoViableAlternative(t,e):e instanceof lD?this.reportInputMismatch(t,e):e instanceof hEe?this.reportFailedPredicate(t,e):(console.log("unknown recognition error type: "+e.constructor.name),console.log(e.stack),t.notifyErrorListeners(e.getOffendingToken(),e.getMessage(),e)))};cr.prototype.recover=function(t,e){this.lastErrorIndex===t.getInputStream().index&&this.lastErrorStates!==null&&this.lastErrorStates.indexOf(t.state)>=0&&t.consume(),this.lastErrorIndex=t._input.index,this.lastErrorStates===null&&(this.lastErrorStates=[]),this.lastErrorStates.push(t.state);var n=this.getErrorRecoverySet(t);this.consumeUntil(t,n)};cr.prototype.sync=function(t){if(!this.inErrorRecoveryMode(t)){var e=t._interp.atn.states[t.state],n=t.getTokenStream().LA(1),r=t.atn.nextTokens(e);if(!(r.contains(Yf.EPSILON)||r.contains(n)))switch(e.stateType){case l0.BLOCK_START:case l0.STAR_BLOCK_START:case l0.PLUS_BLOCK_START:case l0.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(t)!==null)return;throw new lD(t);case l0.PLUS_LOOP_BACK:case l0.STAR_LOOP_BACK:this.reportUnwantedToken(t);var a=new OJ;a.addSet(t.getExpectedTokens());var s=a.addSet(this.getErrorRecoverySet(t));this.consumeUntil(t,s);break}}};cr.prototype.reportNoViableAlternative=function(t,e){var n=t.getTokenStream(),r;n!==null?e.startToken.type===Yf.EOF?r="<EOF>":r=n.getText(new vEe(e.startToken.tokenIndex,e.offendingToken.tokenIndex)):r="<unknown input>";var a="no viable alternative at input "+this.escapeWSAndQuote(r);t.notifyErrorListeners(a,e.offendingToken,e)};cr.prototype.reportInputMismatch=function(t,e){var n="mismatched input "+this.getTokenErrorDisplay(e.offendingToken)+" expecting "+e.getExpectedTokens().toString(t.literalNames,t.symbolicNames);t.notifyErrorListeners(n,e.offendingToken,e)};cr.prototype.reportFailedPredicate=function(t,e){var n=t.ruleNames[t._ctx.ruleIndex],r="rule "+n+" "+e.message;t.notifyErrorListeners(r,e.offendingToken,e)};cr.prototype.reportUnwantedToken=function(t){if(!this.inErrorRecoveryMode(t)){this.beginErrorCondition(t);var e=t.getCurrentToken(),n=this.getTokenErrorDisplay(e),r=this.getExpectedTokens(t),a="extraneous input "+n+" expecting "+r.toString(t.literalNames,t.symbolicNames);t.notifyErrorListeners(a,e,null)}};cr.prototype.reportMissingToken=function(t){if(!this.inErrorRecoveryMode(t)){this.beginErrorCondition(t);var e=t.getCurrentToken(),n=this.getExpectedTokens(t),r="missing "+n.toString(t.literalNames,t.symbolicNames)+" at "+this.getTokenErrorDisplay(e);t.notifyErrorListeners(r,e,null)}};cr.prototype.recoverInline=function(t){var e=this.singleTokenDeletion(t);if(e!==null)return t.consume(),e;if(this.singleTokenInsertion(t))return this.getMissingSymbol(t);throw new lD(t)};cr.prototype.singleTokenInsertion=function(t){var e=t.getTokenStream().LA(1),n=t._interp.atn,r=n.states[t.state],a=r.transitions[0].target,s=n.nextTokens(a,t._ctx);return s.contains(e)?(this.reportMissingToken(t),!0):!1};cr.prototype.singleTokenDeletion=function(t){var e=t.getTokenStream().LA(2),n=this.getExpectedTokens(t);if(n.contains(e)){this.reportUnwantedToken(t),t.consume();var r=t.getCurrentToken();return this.reportMatch(t),r}else return null};cr.prototype.getMissingSymbol=function(t){var e=t.getCurrentToken(),n=this.getExpectedTokens(t),r=n.first(),a;r===Yf.EOF?a="<missing EOF>":a="<missing "+t.literalNames[r]+">";var s=e,o=t.getTokenStream().LT(-1);return s.type===Yf.EOF&&o!==null&&(s=o),t.getTokenFactory().create(s.source,r,a,Yf.DEFAULT_CHANNEL,-1,-1,s.line,s.column)};cr.prototype.getExpectedTokens=function(t){return t.getExpectedTokens()};cr.prototype.getTokenErrorDisplay=function(t){if(t===null)return"<no token>";var e=t.text;return e===null&&(t.type===Yf.EOF?e="<EOF>":e="<"+t.type+">"),this.escapeWSAndQuote(e)};cr.prototype.escapeWSAndQuote=function(t){return t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t=t.replace(/\t/g,"\\t"),"'"+t+"'"};cr.prototype.getErrorRecoverySet=function(t){for(var e=t._interp.atn,n=t._ctx,r=new OJ;n!==null&&n.invokingState>=0;){var a=e.states[n.invokingState],s=a.transitions[0],o=e.nextTokens(s.followState);r.addSet(o),n=n.parentCtx}return r.removeOne(Yf.EPSILON),r};cr.prototype.consumeUntil=function(t,e){for(var n=t.getTokenStream().LA(1);n!==Yf.EOF&&!e.contains(n);)t.consume(),n=t.getTokenStream().LA(1)};function ih(){return cr.call(this),this}ih.prototype=Object.create(cr.prototype);ih.prototype.constructor=ih;ih.prototype.recover=function(t,e){for(var n=t._ctx;n!==null;)n.exception=e,n=n.parentCtx;throw new mEe(e)};ih.prototype.recoverInline=function(t){this.recover(t,new lD(t))};ih.prototype.sync=function(t){};oD.BailErrorStrategy=ih;oD.DefaultErrorStrategy=cr;Qc.RecognitionException=Ga.RecognitionException;Qc.NoViableAltException=Ga.NoViableAltException;Qc.LexerNoViableAltException=Ga.LexerNoViableAltException;Qc.InputMismatchException=Ga.InputMismatchException;Qc.FailedPredicateException=Ga.FailedPredicateException;Qc.DiagnosticErrorListener=IJ.DiagnosticErrorListener;Qc.BailErrorStrategy=oD.BailErrorStrategy;Qc.ErrorListener=Rh.ErrorListener;var LJ={},cD={},gEe=mi.Token;function yEe(t){if(t._index=0,t.data=[],t.decodeToUnicodeCodePoints)for(var e=0;e<t.strdata.length;){var n=t.strdata.codePointAt(e);t.data.push(n),e+=n<=65535?1:2}else for(var e=0;e<t.strdata.length;e++){var r=t.strdata.charCodeAt(e);t.data.push(r)}t._size=t.data.length}function nu(t,e){return this.name="<empty>",this.strdata=t,this.decodeToUnicodeCodePoints=e||!1,yEe(this),this}Object.defineProperty(nu.prototype,"index",{get:function(){return this._index}});Object.defineProperty(nu.prototype,"size",{get:function(){return this._size}});nu.prototype.reset=function(){this._index=0};nu.prototype.consume=function(){if(this._index>=this._size)throw"cannot consume EOF";this._index+=1};nu.prototype.LA=function(t){if(t===0)return 0;t<0&&(t+=1);var e=this._index+t-1;return e<0||e>=this._size?gEe.EOF:this.data[e]};nu.prototype.LT=function(t){return this.LA(t)};nu.prototype.mark=function(){return-1};nu.prototype.release=function(t){};nu.prototype.seek=function(t){if(t<=this._index){this._index=t;return}this._index=Math.min(t,this._size)};nu.prototype.getText=function(t,e){if(e>=this._size&&(e=this._size-1),t>=this._size)return"";if(this.decodeToUnicodeCodePoints){for(var n="",r=t;r<=e;r++)n+=String.fromCodePoint(this.data[r]);return n}else return this.strdata.slice(t,e+1)};nu.prototype.toString=function(){return this.strdata};cD.InputStream=nu;const xEe={},bEe=Object.freeze(Object.defineProperty({__proto__:null,default:xEe},Symbol.toStringTag,{value:"Module"})),kJ=GH(bEe);var rg=cD.InputStream,SEe=typeof window>"u"&&typeof importScripts>"u",E7=SEe?kJ:null,wEe={fromString:function(t){return new rg(t,!0)},fromBlob:function(t,e,n,r){var a=FileReader();a.onload=function(s){var o=new rg(s.target.result,!0);n(o)},a.onerror=r,a.readAsText(t,e)},fromBuffer:function(t,e){return new rg(t.toString(e),!0)},fromPath:function(t,e,n){E7.readFile(t,e,function(r,a){var s=null;a!==null&&(s=new rg(a,!0)),n(r,s)})},fromPathSync:function(t,e){var n=E7.readFileSync(t,e);return new rg(n,!0)}};LJ.CharStreams=wEe;var UJ={},FJ=cD.InputStream,_Ee=typeof window>"u"&&typeof importScripts>"u",MEe=_Ee?kJ:null;function Iw(t,e){var n=MEe.readFileSync(t,"utf8");return FJ.call(this,n,e),this.fileName=t,this}Iw.prototype=Object.create(FJ.prototype);Iw.prototype.constructor=Iw;UJ.FileStream=Iw;var BJ={},zJ={},kd=mi.Token,y4=dx.Lexer,EEe=Ls.Interval;function qJ(){return this}function fr(t){return qJ.call(this),this.tokenSource=t,this.tokens=[],this.index=-1,this.fetchedEOF=!1,this}fr.prototype=Object.create(qJ.prototype);fr.prototype.constructor=fr;fr.prototype.mark=function(){return 0};fr.prototype.release=function(t){};fr.prototype.reset=function(){this.seek(0)};fr.prototype.seek=function(t){this.lazyInit(),this.index=this.adjustSeekIndex(t)};fr.prototype.get=function(t){return this.lazyInit(),this.tokens[t]};fr.prototype.consume=function(){var t=!1;if(this.index>=0?this.fetchedEOF?t=this.index<this.tokens.length-1:t=this.index<this.tokens.length:t=!1,!t&&this.LA(1)===kd.EOF)throw"cannot consume EOF";this.sync(this.index+1)&&(this.index=this.adjustSeekIndex(this.index+1))};fr.prototype.sync=function(t){var e=t-this.tokens.length+1;if(e>0){var n=this.fetch(e);return n>=e}return!0};fr.prototype.fetch=function(t){if(this.fetchedEOF)return 0;for(var e=0;e<t;e++){var n=this.tokenSource.nextToken();if(n.tokenIndex=this.tokens.length,this.tokens.push(n),n.type===kd.EOF)return this.fetchedEOF=!0,e+1}return t};fr.prototype.getTokens=function(t,e,n){if(n===void 0&&(n=null),t<0||e<0)return null;this.lazyInit();var r=[];e>=this.tokens.length&&(e=this.tokens.length-1);for(var a=t;a<e;a++){var s=this.tokens[a];if(s.type===kd.EOF)break;(n===null||n.contains(s.type))&&r.push(s)}return r};fr.prototype.LA=function(t){return this.LT(t).type};fr.prototype.LB=function(t){return this.index-t<0?null:this.tokens[this.index-t]};fr.prototype.LT=function(t){if(this.lazyInit(),t===0)return null;if(t<0)return this.LB(-t);var e=this.index+t-1;return this.sync(e),e>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[e]};fr.prototype.adjustSeekIndex=function(t){return t};fr.prototype.lazyInit=function(){this.index===-1&&this.setup()};fr.prototype.setup=function(){this.sync(0),this.index=this.adjustSeekIndex(0)};fr.prototype.setTokenSource=function(t){this.tokenSource=t,this.tokens=[],this.index=-1,this.fetchedEOF=!1};fr.prototype.nextTokenOnChannel=function(t,e){if(this.sync(t),t>=this.tokens.length)return-1;for(var n=this.tokens[t];n.channel!==this.channel;){if(n.type===kd.EOF)return-1;t+=1,this.sync(t),n=this.tokens[t]}return t};fr.prototype.previousTokenOnChannel=function(t,e){for(;t>=0&&this.tokens[t].channel!==e;)t-=1;return t};fr.prototype.getHiddenTokensToRight=function(t,e){if(e===void 0&&(e=-1),this.lazyInit(),t<0||t>=this.tokens.length)throw""+t+" not in 0.."+this.tokens.length-1;var n=this.nextTokenOnChannel(t+1,y4.DEFAULT_TOKEN_CHANNEL),r=t+1,a=n===-1?this.tokens.length-1:n;return this.filterForChannel(r,a,e)};fr.prototype.getHiddenTokensToLeft=function(t,e){if(e===void 0&&(e=-1),this.lazyInit(),t<0||t>=this.tokens.length)throw""+t+" not in 0.."+this.tokens.length-1;var n=this.previousTokenOnChannel(t-1,y4.DEFAULT_TOKEN_CHANNEL);if(n===t-1)return null;var r=n+1,a=t-1;return this.filterForChannel(r,a,e)};fr.prototype.filterForChannel=function(t,e,n){for(var r=[],a=t;a<e+1;a++){var s=this.tokens[a];n===-1?s.channel!==y4.DEFAULT_TOKEN_CHANNEL&&r.push(s):s.channel===n&&r.push(s)}return r.length===0?null:r};fr.prototype.getSourceName=function(){return this.tokenSource.getSourceName()};fr.prototype.getText=function(t){this.lazyInit(),this.fill(),t==null&&(t=new EEe(0,this.tokens.length-1));var e=t.start;e instanceof kd&&(e=e.tokenIndex);var n=t.stop;if(n instanceof kd&&(n=n.tokenIndex),e===null||n===null||e<0||n<0)return"";n>=this.tokens.length&&(n=this.tokens.length-1);for(var r="",a=e;a<n+1;a++){var s=this.tokens[a];if(s.type===kd.EOF)break;r=r+s.text}return r};fr.prototype.fill=function(){for(this.lazyInit();this.fetch(1e3)===1e3;);};zJ.BufferedTokenStream=fr;var GJ=mi.Token,HJ=zJ.BufferedTokenStream;function lp(t,e){return HJ.call(this,t),this.channel=e===void 0?GJ.DEFAULT_CHANNEL:e,this}lp.prototype=Object.create(HJ.prototype);lp.prototype.constructor=lp;lp.prototype.adjustSeekIndex=function(t){return this.nextTokenOnChannel(t,this.channel)};lp.prototype.LB=function(t){if(t===0||this.index-t<0)return null;for(var e=this.index,n=1;n<=t;)e=this.previousTokenOnChannel(e-1,this.channel),n+=1;return e<0?null:this.tokens[e]};lp.prototype.LT=function(t){if(this.lazyInit(),t===0)return null;if(t<0)return this.LB(-t);for(var e=this.index,n=1;n<t;)this.sync(e+1)&&(e=this.nextTokenOnChannel(e+1,this.channel)),n+=1;return this.tokens[e]};lp.prototype.getNumberOfOnChannelTokens=function(){var t=0;this.fill();for(var e=0;e<this.tokens.length;e++){var n=this.tokens[e];if(n.channel===this.channel&&(t+=1),n.type===GJ.EOF)break}return t};BJ.CommonTokenStream=lp;var VJ={},Cg=mi.Token,WJ=Xi.ParseTreeListener,$J=c4.Recognizer,TEe=oD.DefaultErrorStrategy,AEe=n4.ATNDeserializer,NEe=i4.ATNDeserializationOptions,CEe=Xi.TerminalNode,DEe=Xi.ErrorNode;function ah(t){return WJ.call(this),this.parser=t,this}ah.prototype=Object.create(WJ.prototype);ah.prototype.constructor=ah;ah.prototype.enterEveryRule=function(t){console.log("enter   "+this.parser.ruleNames[t.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)};ah.prototype.visitTerminal=function(t){console.log("consume "+t.symbol+" rule "+this.parser.ruleNames[this.parser._ctx.ruleIndex])};ah.prototype.exitEveryRule=function(t){console.log("exit    "+this.parser.ruleNames[t.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)};function rn(t){return $J.call(this),this._input=null,this._errHandler=new TEe,this._precedenceStack=[],this._precedenceStack.push(0),this._ctx=null,this.buildParseTrees=!0,this._tracer=null,this._parseListeners=null,this._syntaxErrors=0,this.setInputStream(t),this}rn.prototype=Object.create($J.prototype);rn.prototype.contructor=rn;rn.bypassAltsAtnCache={};rn.prototype.reset=function(){this._input!==null&&this._input.seek(0),this._errHandler.reset(this),this._ctx=null,this._syntaxErrors=0,this.setTrace(!1),this._precedenceStack=[],this._precedenceStack.push(0),this._interp!==null&&this._interp.reset()};rn.prototype.match=function(t){var e=this.getCurrentToken();return e.type===t?(this._errHandler.reportMatch(this),this.consume()):(e=this._errHandler.recoverInline(this),this.buildParseTrees&&e.tokenIndex===-1&&this._ctx.addErrorNode(e)),e};rn.prototype.matchWildcard=function(){var t=this.getCurrentToken();return t.type>0?(this._errHandler.reportMatch(this),this.consume()):(t=this._errHandler.recoverInline(this),this._buildParseTrees&&t.tokenIndex===-1&&this._ctx.addErrorNode(t)),t};rn.prototype.getParseListeners=function(){return this._parseListeners||[]};rn.prototype.addParseListener=function(t){if(t===null)throw"listener";this._parseListeners===null&&(this._parseListeners=[]),this._parseListeners.push(t)};rn.prototype.removeParseListener=function(t){if(this._parseListeners!==null){var e=this._parseListeners.indexOf(t);e>=0&&this._parseListeners.splice(e,1),this._parseListeners.length===0&&(this._parseListeners=null)}};rn.prototype.removeParseListeners=function(){this._parseListeners=null};rn.prototype.triggerEnterRuleEvent=function(){if(this._parseListeners!==null){var t=this._ctx;this._parseListeners.map(function(e){e.enterEveryRule(t),t.enterRule(e)})}};rn.prototype.triggerExitRuleEvent=function(){if(this._parseListeners!==null){var t=this._ctx;this._parseListeners.slice(0).reverse().map(function(e){t.exitRule(e),e.exitEveryRule(t)})}};rn.prototype.getTokenFactory=function(){return this._input.tokenSource._factory};rn.prototype.setTokenFactory=function(t){this._input.tokenSource._factory=t};rn.prototype.getATNWithBypassAlts=function(){var t=this.getSerializedATN();if(t===null)throw"The current parser does not support an ATN with bypass alternatives.";var e=this.bypassAltsAtnCache[t];if(e===null){var n=new NEe;n.generateRuleBypassTransitions=!0,e=new AEe(n).deserialize(t),this.bypassAltsAtnCache[t]=e}return e};var REe=dx.Lexer;rn.prototype.compileParseTreePattern=function(t,e,n){if(n=n||null,n===null&&this.getTokenStream()!==null){var r=this.getTokenStream().tokenSource;r instanceof REe&&(n=r)}if(n===null)throw"Parser can't discover a lexer to use";var a=new ParseTreePatternMatcher(n,this);return a.compile(t,e)};rn.prototype.getInputStream=function(){return this.getTokenStream()};rn.prototype.setInputStream=function(t){this.setTokenStream(t)};rn.prototype.getTokenStream=function(){return this._input};rn.prototype.setTokenStream=function(t){this._input=null,this.reset(),this._input=t};rn.prototype.getCurrentToken=function(){return this._input.LT(1)};rn.prototype.notifyErrorListeners=function(t,e,n){e=e||null,n=n||null,e===null&&(e=this.getCurrentToken()),this._syntaxErrors+=1;var r=e.line,a=e.column,s=this.getErrorListenerDispatch();s.syntaxError(this,e,r,a,t,n)};rn.prototype.consume=function(){var t=this.getCurrentToken();t.type!==Cg.EOF&&this.getInputStream().consume();var e=this._parseListeners!==null&&this._parseListeners.length>0;if(this.buildParseTrees||e){var n;this._errHandler.inErrorRecoveryMode(this)?n=this._ctx.addErrorNode(t):n=this._ctx.addTokenNode(t),n.invokingState=this.state,e&&this._parseListeners.map(function(r){n instanceof DEe||n.isErrorNode!==void 0&&n.isErrorNode()?r.visitErrorNode(n):n instanceof CEe&&r.visitTerminal(n)})}return t};rn.prototype.addContextToParseTree=function(){this._ctx.parentCtx!==null&&this._ctx.parentCtx.addChild(this._ctx)};rn.prototype.enterRule=function(t,e,n){this.state=e,this._ctx=t,this._ctx.start=this._input.LT(1),this.buildParseTrees&&this.addContextToParseTree(),this._parseListeners!==null&&this.triggerEnterRuleEvent()};rn.prototype.exitRule=function(){this._ctx.stop=this._input.LT(-1),this._parseListeners!==null&&this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx.parentCtx};rn.prototype.enterOuterAlt=function(t,e){t.setAltNumber(e),this.buildParseTrees&&this._ctx!==t&&this._ctx.parentCtx!==null&&(this._ctx.parentCtx.removeLastChild(),this._ctx.parentCtx.addChild(t)),this._ctx=t};rn.prototype.getPrecedence=function(){return this._precedenceStack.length===0?-1:this._precedenceStack[this._precedenceStack.length-1]};rn.prototype.enterRecursionRule=function(t,e,n,r){this.state=e,this._precedenceStack.push(r),this._ctx=t,this._ctx.start=this._input.LT(1),this._parseListeners!==null&&this.triggerEnterRuleEvent()};rn.prototype.pushNewRecursionContext=function(t,e,n){var r=this._ctx;r.parentCtx=t,r.invokingState=e,r.stop=this._input.LT(-1),this._ctx=t,this._ctx.start=r.start,this.buildParseTrees&&this._ctx.addChild(r),this._parseListeners!==null&&this.triggerEnterRuleEvent()};rn.prototype.unrollRecursionContexts=function(t){this._precedenceStack.pop(),this._ctx.stop=this._input.LT(-1);var e=this._ctx;if(this._parseListeners!==null)for(;this._ctx!==t;)this.triggerExitRuleEvent(),this._ctx=this._ctx.parentCtx;else this._ctx=t;e.parentCtx=t,this.buildParseTrees&&t!==null&&t.addChild(e)};rn.prototype.getInvokingContext=function(t){for(var e=this._ctx;e!==null;){if(e.ruleIndex===t)return e;e=e.parentCtx}return null};rn.prototype.precpred=function(t,e){return e>=this._precedenceStack[this._precedenceStack.length-1]};rn.prototype.inContext=function(t){return!1};rn.prototype.isExpectedToken=function(t){var e=this._interp.atn,n=this._ctx,r=e.states[this.state],a=e.nextTokens(r);if(a.contains(t))return!0;if(!a.contains(Cg.EPSILON))return!1;for(;n!==null&&n.invokingState>=0&&a.contains(Cg.EPSILON);){var s=e.states[n.invokingState],o=s.transitions[0];if(a=e.nextTokens(o.followState),a.contains(t))return!0;n=n.parentCtx}return!!(a.contains(Cg.EPSILON)&&t===Cg.EOF)};rn.prototype.getExpectedTokens=function(){return this._interp.atn.getExpectedTokens(this.state,this._ctx)};rn.prototype.getExpectedTokensWithinCurrentRule=function(){var t=this._interp.atn,e=t.states[this.state];return t.nextTokens(e)};rn.prototype.getRuleIndex=function(t){var e=this.getRuleIndexMap()[t];return e!==null?e:-1};rn.prototype.getRuleInvocationStack=function(t){t=t||null,t===null&&(t=this._ctx);for(var e=[];t!==null;){var n=t.ruleIndex;n<0?e.push("n/a"):e.push(this.ruleNames[n]),t=t.parentCtx}return e};rn.prototype.getDFAStrings=function(){return this._interp.decisionToDFA.toString()};rn.prototype.dumpDFA=function(){for(var t=!1,e=0;e<this._interp.decisionToDFA.length;e++){var n=this._interp.decisionToDFA[e];n.states.length>0&&(t&&console.log(),this.printer.println("Decision "+n.decision+":"),this.printer.print(n.toString(this.literalNames,this.symbolicNames)),t=!0)}};rn.prototype.getSourceName=function(){return this._input.sourceName};rn.prototype.setTrace=function(t){t?(this._tracer!==null&&this.removeParseListener(this._tracer),this._tracer=new ah(this),this.addParseListener(this._tracer)):(this.removeParseListener(this._tracer),this._tracer=null)};VJ.Parser=rn;ai.atn=fv;ai.codepointat=sEe;ai.dfa=vx;ai.fromcodepoint=fEe;ai.tree=mv;ai.error=Qc;ai.Token=mi.Token;ai.CharStreams=LJ.CharStreams;ai.CommonToken=mi.CommonToken;ai.InputStream=cD.InputStream;ai.FileStream=UJ.FileStream;ai.CommonTokenStream=BJ.CommonTokenStream;ai.Lexer=dx.Lexer;ai.Parser=VJ.Parser;var IEe=jc();ai.PredictionContextCache=IEe.PredictionContextCache;ai.ParserRuleContext=t4().ParserRuleContext;ai.Interval=Ls.Interval;ai.Utils=Xn;var jJ={},Ud=ai,PEe=["悋Ꜫ脳맭䅼㯧瞆奤","-Ĥ\b		","			\x07	",`\x07\b	\b			
	
\v	\v`,"\f	\f\r	\r		","				","			","				","\x1B	\x1B		",'		 	 !	!"	"#',"	#$	$%	%&	&'	'(	()	)","*	*+	+,	,","","\x07","\x07\x07\b\b\b		",`						


`,`





\v\v`,"\v\v\v\v\v\v","\f\f\f\f\f\r\r","","","","","","","","\x1B\x1B",""," ",'   !!!""""','"###$$$$$',`$$$á
$%%%%æ
%\r%`,`%ç&&&&í
&\r&&î'`,`'ò
'\r''ó((\x07(ø
(\f`,`((û\v())þ
)\r))ÿ)`,`)***Ć
*\r**ć**`,`++++\x07+Đ
+\f++ē\v+`,"+++++,,,,\x07",`,Ğ
,\f,,ġ\v,,,đ-`,"\x07	\v\x07\r\b	",`
\v\f\r\x1B`,"!#%')+-/1",`3\x1B579;= ?!A"C#E$G%I&K'M(O)Q*S+U,W-`,`
2;GGgg--//c`,'|2;C\\aac|\v\f""\x07',"/02;C\\aac|\f\fĭ","\x07","	\v","\r","","","\x1B","","!#","%'",")+","-/","135","79",";=","?A","CE","GIK","MO","QS","UW","Y[\x07","b	d\vf","\rhk","nv","","\x1B","!","#%¤","'§)­","+¯-²","/´1¶","3¸5º","7¼9¾;Â","=Æ?Ê","AÎCÑ","EÖGà","IâKé","MñOõQý","SăUċ","WęYZ\x07","Z[\\\x07q\\]\x07","r]^\x07c^_\x07s_`\x07w","`a\x07gabc\x07=",`c\bde\x07*e
`,"fg\x07+g\fh","i\x07kij\x07hj","kl\x07?lm\x07?m","no\x07dop\x07cpq\x07t","qr\x07trs\x07kst\x07gtu\x07","tuvw\x07Qwx","\x07Rxy\x07Gyz\x07Pz{\x07","S{|\x07C|}\x07U}~\x07O","~\x07k","\x07p\x07e","\x07n\x07w","\x07f\x07g","\x07s\x07","t\x07g\x07i","\x07]","\x07_","\x07e","\x07t\x07g","\x07i","\x07i\x07c","\x07v\x07g ",'\x07}"',"\x07o\x07g","\x07c \x07u"," ¡\x07w¡¢\x07t¢","£\x07g£$¤¥","\x07/¥¦\x07@¦&","§¨\x07t¨©\x07g","©ª\x07uª«\x07g","«¬\x07v¬(­","®\x07W®*¯°","\x07E°±\x07Z±,","²³\x07.³.","´µ\x07`µ0","¶·\x07,·2¸","¹\x071¹4º»","\x07-»6¼½\x07","/½8¾¿\x07u","¿À\x07kÀÁ\x07p","Á:ÂÃ\x07eÃ","Ä\x07qÄÅ\x07uÅ<","ÆÇ\x07vÇÈ\x07","cÈÉ\x07pÉ>","ÊË\x07gËÌ\x07z","ÌÍ\x07rÍ@Î","Ï\x07nÏÐ\x07pÐB","ÑÒ\x07uÒÓ\x07","sÓÔ\x07tÔÕ\x07v","ÕDÖ×\x07r","×Ø\x07kØFÙ","ÚI%ÚÛK&Ûá","ÜÝM'ÝÞK&Þ","áßáI%àÙ","àÜàß","áHâã","M'ãå\x070äæ	","åäæç","çåçè","èJéê	","êì	ëí	ì","ëíîî","ìîïï","Lðò	ñð","òóóñ","óôôN","õù	öø","	÷öøû","ù÷ùú","úPûù","üþ	\x07ýü","þÿÿý","ÿĀĀā","āĂ\b)ĂR","ăą\x07$ĄĆ	\b","ąĄĆć","ćąćĈ","ĈĉĉĊ\x07$","ĊTċČ\x071Č","č\x07,čđĎ","Đ\vďĎĐ","ēđĒđ","ďĒĔē","đĔĕ\x07,ĕ","Ė\x071Ėėė","Ę\b+ĘVęĚ\x07","1Ěě\x071ěğ",`ĜĞ
	ĝĜ`,"Ğġğĝ","ğĠĠĢ","ġğĢģ\b,","ģX\fàçîóù","ÿćđğ\b"].join(""),x4=new Ud.atn.ATNDeserializer().deserialize(PEe),OEe=x4.decisionToState.map(function(t,e){return new Ud.dfa.DFA(t,e)});function Bt(t){return Ud.Lexer.call(this,t),this._interp=new Ud.atn.LexerATNSimulator(this,x4,OEe,new Ud.PredictionContextCache),this}Bt.prototype=Object.create(Ud.Lexer.prototype);Bt.prototype.constructor=Bt;Object.defineProperty(Bt.prototype,"atn",{get:function(){return x4}});Bt.EOF=Ud.Token.EOF;Bt.T__0=1;Bt.T__1=2;Bt.T__2=3;Bt.T__3=4;Bt.T__4=5;Bt.T__5=6;Bt.T__6=7;Bt.T__7=8;Bt.T__8=9;Bt.T__9=10;Bt.T__10=11;Bt.T__11=12;Bt.T__12=13;Bt.T__13=14;Bt.T__14=15;Bt.T__15=16;Bt.T__16=17;Bt.T__17=18;Bt.T__18=19;Bt.T__19=20;Bt.T__20=21;Bt.T__21=22;Bt.T__22=23;Bt.T__23=24;Bt.T__24=25;Bt.T__25=26;Bt.T__26=27;Bt.T__27=28;Bt.T__28=29;Bt.T__29=30;Bt.T__30=31;Bt.T__31=32;Bt.T__32=33;Bt.PI=34;Bt.REAL=35;Bt.SUBREAL=36;Bt.EXPREAL=37;Bt.INT=38;Bt.ID=39;Bt.WS=40;Bt.FILENAME=41;Bt.COMMENT=42;Bt.LINE_COMMENT=43;Bt.prototype.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];Bt.prototype.modeNames=["DEFAULT_MODE"];Bt.prototype.literalNames=[null,"'}'","'opaque'","';'","'('","')'","'if'","'=='","'barrier'","'OPENQASM'","'include'","'qreg'","'['","']'","'creg'","'gate'","'{'","'measure'","'->'","'reset'","'U'","'CX'","','","'^'","'*'","'/'","'+'","'-'","'sin'","'cos'","'tan'","'exp'","'ln'","'sqrt'","'pi'"];Bt.prototype.symbolicNames=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"PI","REAL","SUBREAL","EXPREAL","INT","ID","WS","FILENAME","COMMENT","LINE_COMMENT"];Bt.prototype.ruleNames=["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","T__11","T__12","T__13","T__14","T__15","T__16","T__17","T__18","T__19","T__20","T__21","T__22","T__23","T__24","T__25","T__26","T__27","T__28","T__29","T__30","T__31","T__32","PI","REAL","SUBREAL","EXPREAL","INT","ID","WS","FILENAME","COMMENT","LINE_COMMENT"];Bt.prototype.grammarFileName="QASM.g4";jJ.QASMLexer=Bt;var XJ={},b4={},YJ=ai;function vn(){return YJ.tree.ParseTreeListener.call(this),this}vn.prototype=Object.create(YJ.tree.ParseTreeListener.prototype);vn.prototype.constructor=vn;vn.prototype.enterMainprog=function(t){};vn.prototype.exitMainprog=function(t){};vn.prototype.enterStatement=function(t){};vn.prototype.exitStatement=function(t){};vn.prototype.enterVersion=function(t){};vn.prototype.exitVersion=function(t){};vn.prototype.enterInclude=function(t){};vn.prototype.exitInclude=function(t){};vn.prototype.enterFilename=function(t){};vn.prototype.exitFilename=function(t){};vn.prototype.enterDecl=function(t){};vn.prototype.exitDecl=function(t){};vn.prototype.enterGatedecl=function(t){};vn.prototype.exitGatedecl=function(t){};vn.prototype.enterGoplist=function(t){};vn.prototype.exitGoplist=function(t){};vn.prototype.enterQop=function(t){};vn.prototype.exitQop=function(t){};vn.prototype.enterUop=function(t){};vn.prototype.exitUop=function(t){};vn.prototype.enterAnylist=function(t){};vn.prototype.exitAnylist=function(t){};vn.prototype.enterIdlist=function(t){};vn.prototype.exitIdlist=function(t){};vn.prototype.enterMixedlist=function(t){};vn.prototype.exitMixedlist=function(t){};vn.prototype.enterArgument=function(t){};vn.prototype.exitArgument=function(t){};vn.prototype.enterExplist=function(t){};vn.prototype.exitExplist=function(t){};vn.prototype.enterExp=function(t){};vn.prototype.exitExp=function(t){};vn.prototype.enterAtom=function(t){};vn.prototype.exitAtom=function(t){};vn.prototype.enterUnaryop=function(t){};vn.prototype.exitUnaryop=function(t){};b4.QASMListener=vn;var vt=ai,In=b4.QASMListener,LEe=["悋Ꜫ脳맭䅼㯧瞆奤","-İ			","		\x07	\x07",`\b	\b			
	
\v	\v\f	\f`,"\r	\r			","			",`\x07)
\f,\v`,"","","","","","",`W
`,"","\x07\x07","\x07\x07\x07\x07\x07\x07",`\x07\x07\x07\x07\x07o
\x07`,"\b\b\b\b\b\b\b\b","\b\b\b\b\b\b\b\b\b",`\b\b\b\b
\b				`,`		
	\r		


`,`







`,`


\v\v\v\v\v`,"\v\v\v\v\v\v","\v\v\v\v\v\v","\v\v\v\v\v\v","\v\v\v\v\v\v",`\v\v»
\v\f\f\f¿`,`
\f\r\r\x07\rÃ
\r\f\r\rÆ\v\r`,"\r\r",`\x07Ï
\fÒ\v`,"\x07",`Ú
\fÝ\v`,"\x07",`å
\fè\v`,`\x07ì
\fï\v`,`õ
`,"",`ü
\x07`,`ā
\fĄ\v`,`Ċ
`,`đ
`,"",`ę
Ĝ
`,"",`\x07ħ
\f`,"Ī\v",` \b
\f`,' "$',"\x1B$%()","#ń&V","X\b\\","\n`\fn","","º¾","Äô","ûĂ",' ě"ī',"$ĭ&*","')('),","*(*++",",*-W\f\x07","./\b/0	01\x07","1W23\b34\x07","4W56\x0767\x07)","78\r89\x079W",":;\x07;<\x07)<=","\x07=>\x07\x07>?\r","?@\x07@WAB\x07","BC\x07)CD\x07DE","\rEF\x07\x07FG\rGH\x07",`HWIW
JK\x07`,"\bKL\x07LM\x07)MN\x07","	NO\x07(OP\x07\x07PW",`
QR\x07
RS\fST\x07`,"TWUW\bV-","V.V2","V5V:VA","VIVJVQ","VUW","XY\x07\vYZ\x07%Z[\x07","[\x07\\]\x07\f]^",`
^_\x07_	`,"`a\x07+a\vbc\x07\r","cd\x07)de\x07ef\x07(","fg\x07go\x07hi\x07","ij\x07)jk\x07kl\x07","(lm\x07mo\x07nb","nho\r","pq\x07qr\x07)rs","\rst\x07tuv","\x07vw\x07)wx\x07","xy\x07\x07yz\rz{\x07","{|}\x07}~\x07",")~\x07","\r\x07\x07","\r\x07","pu","|",`\v\x07
`,"\r\x07","","","","\v","\x07","\x07","\x07","\x07","\x07","","","\x07\x07"," \x07\x07"," ¡¡¢\x07","¢»£¤\x07","¤¥¥¦\x07","¦§§¨\x07","¨»©ª\x07)","ª«\f«¬\x07","¬»­®\x07)","®¯\x07¯°\x07\x07","°±\f±²\x07","²»³´\x07)","´µ\x07µ¶","¶·\x07\x07·¸\f","¸¹\x07¹»","ºº£","º©º­","º³»","¼¿\r½¿","¾¼¾½","¿ÀÁ\x07)","ÁÃ\x07ÂÀ","ÃÆÄÂ","ÄÅÅÇ","ÆÄÇÈ\x07)","ÈÉÊ\x07)","ÊË\x07ËÌ\x07(","ÌÍ\x07ÍÏ\x07","ÎÉÏÒ","ÐÎÐÑ","ÑÓÒÐ","Óõ\x07)ÔÕ\x07)","ÕÖ\x07Ö×\x07(","×Ø\x07ØÚ\x07","ÙÔÚÝ","ÛÙÛÜ","ÜÞÝÛ","Þß\x07)ßà\x07","àá\x07(áõ\x07","âã\x07)ãå\x07","äâåè","æäæç","çéèæ","éê\x07)êì\x07","ëæìï","íëíî","îðïí","ðñ\x07)ñò\x07","òó\x07(óõ\x07","ôÐôÛ","ôíõ\x1B","öü\x07)÷ø\x07)ø","ù\x07ùú\x07(ú","ü\x07ûöû","÷üý","þ þÿ\x07ÿ","āĀýā","ĄĂĀĂ","ăăąĄ","ĂąĆ Ć","ćĉ\bĈ","Ċ	ĉĈĉ","ĊĊċċ","Č\x07Čč č","Ď\x07\x07ĎĜď","đ	ĐďĐ","đđĒĒ","ē$ēĔ\x07Ĕ","ĕ ĕĖ\x07\x07Ė","Ĝėę	Ę","ėĘęę",'ĚĚĜ"ě',"ćěĐě","ĘĜĨĝ","Ğ\f\bĞğ\x07ğħ"," 	Ġġ\f\x07ġĢ	","Ģħ \bģĤ\f","Ĥĥ	ĥħ \x07Ħ","ĝĦĠĦ","ģħĪĨ","ĦĨĩĩ","!ĪĨī","Ĭ	Ĭ#ĭĮ","	Į%*Vn","º¾ÄÐÛæíôûĂ","ĉĐĘěĦĨ"].join(""),S4=new vt.atn.ATNDeserializer().deserialize(LEe),kEe=S4.decisionToState.map(function(t,e){return new vt.dfa.DFA(t,e)}),UEe=new vt.PredictionContextCache,FEe=[null,"'}'","'opaque'","';'","'('","')'","'if'","'=='","'barrier'","'OPENQASM'","'include'","'qreg'","'['","']'","'creg'","'gate'","'{'","'measure'","'->'","'reset'","'U'","'CX'","','","'^'","'*'","'/'","'+'","'-'","'sin'","'cos'","'tan'","'exp'","'ln'","'sqrt'","'pi'"],BEe=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"PI","REAL","SUBREAL","EXPREAL","INT","ID","WS","FILENAME","COMMENT","LINE_COMMENT"],zEe=["mainprog","statement","version","include","filename","decl","gatedecl","goplist","qop","uop","anylist","idlist","mixedlist","argument","explist","exp","atom","unaryop"];function fe(t){return vt.Parser.call(this,t),this._interp=new vt.atn.ParserATNSimulator(this,S4,kEe,UEe),this.ruleNames=zEe,this.literalNames=FEe,this.symbolicNames=BEe,this}fe.prototype=Object.create(vt.Parser.prototype);fe.prototype.constructor=fe;Object.defineProperty(fe.prototype,"atn",{get:function(){return S4}});fe.EOF=vt.Token.EOF;fe.T__0=1;fe.T__1=2;fe.T__2=3;fe.T__3=4;fe.T__4=5;fe.T__5=6;fe.T__6=7;fe.T__7=8;fe.T__8=9;fe.T__9=10;fe.T__10=11;fe.T__11=12;fe.T__12=13;fe.T__13=14;fe.T__14=15;fe.T__15=16;fe.T__16=17;fe.T__17=18;fe.T__18=19;fe.T__19=20;fe.T__20=21;fe.T__21=22;fe.T__22=23;fe.T__23=24;fe.T__24=25;fe.T__25=26;fe.T__26=27;fe.T__27=28;fe.T__28=29;fe.T__29=30;fe.T__30=31;fe.T__31=32;fe.T__32=33;fe.PI=34;fe.REAL=35;fe.SUBREAL=36;fe.EXPREAL=37;fe.INT=38;fe.ID=39;fe.WS=40;fe.FILENAME=41;fe.COMMENT=42;fe.LINE_COMMENT=43;fe.RULE_mainprog=0;fe.RULE_statement=1;fe.RULE_version=2;fe.RULE_include=3;fe.RULE_filename=4;fe.RULE_decl=5;fe.RULE_gatedecl=6;fe.RULE_goplist=7;fe.RULE_qop=8;fe.RULE_uop=9;fe.RULE_anylist=10;fe.RULE_idlist=11;fe.RULE_mixedlist=12;fe.RULE_argument=13;fe.RULE_explist=14;fe.RULE_exp=15;fe.RULE_atom=16;fe.RULE_unaryop=17;function Tc(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_mainprog,this}Tc.prototype=Object.create(vt.ParserRuleContext.prototype);Tc.prototype.constructor=Tc;Tc.prototype.version=function(){return this.getTypedRuleContext(Ac,0)};Tc.prototype.statement=function(t){return t===void 0&&(t=null),t===null?this.getTypedRuleContexts(Yi):this.getTypedRuleContext(Yi,t)};Tc.prototype.enterRule=function(t){t instanceof In&&t.enterMainprog(this)};Tc.prototype.exitRule=function(t){t instanceof In&&t.exitMainprog(this)};fe.MainprogContext=Tc;fe.prototype.mainprog=function(){var t=new Tc(this,this._ctx,this.state);this.enterRule(t,0,fe.RULE_mainprog);var e=0;try{for(this.enterOuterAlt(t,1),this.state=36,this.version(),this.state=40,this._errHandler.sync(this),e=this._input.LA(1);!(e&-32)&&1<<e&(1<<fe.T__1|1<<fe.T__5|1<<fe.T__7|1<<fe.T__9|1<<fe.T__10|1<<fe.T__13|1<<fe.T__14|1<<fe.T__16|1<<fe.T__18|1<<fe.T__19|1<<fe.T__20)||e===fe.ID;)this.state=37,this.statement(),this.state=42,this._errHandler.sync(this),e=this._input.LA(1)}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function Yi(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_statement,this}Yi.prototype=Object.create(vt.ParserRuleContext.prototype);Yi.prototype.constructor=Yi;Yi.prototype.decl=function(){return this.getTypedRuleContext(vl,0)};Yi.prototype.gatedecl=function(){return this.getTypedRuleContext(gl,0)};Yi.prototype.goplist=function(){return this.getTypedRuleContext(yl,0)};Yi.prototype.ID=function(){return this.getToken(fe.ID,0)};Yi.prototype.idlist=function(t){return t===void 0&&(t=null),t===null?this.getTypedRuleContexts(ls):this.getTypedRuleContext(ls,t)};Yi.prototype.qop=function(){return this.getTypedRuleContext(xl,0)};Yi.prototype.INT=function(){return this.getToken(fe.INT,0)};Yi.prototype.anylist=function(){return this.getTypedRuleContext(_u,0)};Yi.prototype.include=function(){return this.getTypedRuleContext(Nc,0)};Yi.prototype.enterRule=function(t){t instanceof In&&t.enterStatement(this)};Yi.prototype.exitRule=function(t){t instanceof In&&t.exitStatement(this)};fe.StatementContext=Yi;fe.prototype.statement=function(){var t=new Yi(this,this._ctx,this.state);this.enterRule(t,2,fe.RULE_statement);try{this.state=84,this._errHandler.sync(this);var e=this._interp.adaptivePredict(this._input,1,this._ctx);switch(e){case 1:this.enterOuterAlt(t,1),this.state=43,this.decl();break;case 2:this.enterOuterAlt(t,2),this.state=44,this.gatedecl(),this.state=45,this.goplist(),this.state=46,this.match(fe.T__0);break;case 3:this.enterOuterAlt(t,3),this.state=48,this.gatedecl(),this.state=49,this.match(fe.T__0);break;case 4:this.enterOuterAlt(t,4),this.state=51,this.match(fe.T__1),this.state=52,this.match(fe.ID),this.state=53,this.idlist(),this.state=54,this.match(fe.T__2);break;case 5:this.enterOuterAlt(t,5),this.state=56,this.match(fe.T__1),this.state=57,this.match(fe.ID),this.state=58,this.match(fe.T__3),this.state=59,this.match(fe.T__4),this.state=60,this.idlist(),this.state=61,this.match(fe.T__2);break;case 6:this.enterOuterAlt(t,6),this.state=63,this.match(fe.T__1),this.state=64,this.match(fe.ID),this.state=65,this.match(fe.T__3),this.state=66,this.idlist(),this.state=67,this.match(fe.T__4),this.state=68,this.idlist(),this.state=69,this.match(fe.T__2);break;case 7:this.enterOuterAlt(t,7),this.state=71,this.qop();break;case 8:this.enterOuterAlt(t,8),this.state=72,this.match(fe.T__5),this.state=73,this.match(fe.T__3),this.state=74,this.match(fe.ID),this.state=75,this.match(fe.T__6),this.state=76,this.match(fe.INT),this.state=77,this.match(fe.T__4),this.state=78,this.qop();break;case 9:this.enterOuterAlt(t,9),this.state=79,this.match(fe.T__7),this.state=80,this.anylist(),this.state=81,this.match(fe.T__2);break;case 10:this.enterOuterAlt(t,10),this.state=83,this.include();break}}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function Ac(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_version,this}Ac.prototype=Object.create(vt.ParserRuleContext.prototype);Ac.prototype.constructor=Ac;Ac.prototype.REAL=function(){return this.getToken(fe.REAL,0)};Ac.prototype.enterRule=function(t){t instanceof In&&t.enterVersion(this)};Ac.prototype.exitRule=function(t){t instanceof In&&t.exitVersion(this)};fe.VersionContext=Ac;fe.prototype.version=function(){var t=new Ac(this,this._ctx,this.state);this.enterRule(t,4,fe.RULE_version);try{this.enterOuterAlt(t,1),this.state=86,this.match(fe.T__8),this.state=87,this.match(fe.REAL),this.state=88,this.match(fe.T__2)}catch(e){if(e instanceof vt.error.RecognitionException)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t};function Nc(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_include,this}Nc.prototype=Object.create(vt.ParserRuleContext.prototype);Nc.prototype.constructor=Nc;Nc.prototype.filename=function(){return this.getTypedRuleContext(Cc,0)};Nc.prototype.enterRule=function(t){t instanceof In&&t.enterInclude(this)};Nc.prototype.exitRule=function(t){t instanceof In&&t.exitInclude(this)};fe.IncludeContext=Nc;fe.prototype.include=function(){var t=new Nc(this,this._ctx,this.state);this.enterRule(t,6,fe.RULE_include);try{this.enterOuterAlt(t,1),this.state=90,this.match(fe.T__9),this.state=91,this.filename(),this.state=92,this.match(fe.T__2)}catch(e){if(e instanceof vt.error.RecognitionException)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t};function Cc(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_filename,this}Cc.prototype=Object.create(vt.ParserRuleContext.prototype);Cc.prototype.constructor=Cc;Cc.prototype.FILENAME=function(){return this.getToken(fe.FILENAME,0)};Cc.prototype.enterRule=function(t){t instanceof In&&t.enterFilename(this)};Cc.prototype.exitRule=function(t){t instanceof In&&t.exitFilename(this)};fe.FilenameContext=Cc;fe.prototype.filename=function(){var t=new Cc(this,this._ctx,this.state);this.enterRule(t,8,fe.RULE_filename);try{this.enterOuterAlt(t,1),this.state=94,this.match(fe.FILENAME)}catch(e){if(e instanceof vt.error.RecognitionException)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t};function vl(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_decl,this}vl.prototype=Object.create(vt.ParserRuleContext.prototype);vl.prototype.constructor=vl;vl.prototype.ID=function(){return this.getToken(fe.ID,0)};vl.prototype.INT=function(){return this.getToken(fe.INT,0)};vl.prototype.enterRule=function(t){t instanceof In&&t.enterDecl(this)};vl.prototype.exitRule=function(t){t instanceof In&&t.exitDecl(this)};fe.DeclContext=vl;fe.prototype.decl=function(){var t=new vl(this,this._ctx,this.state);this.enterRule(t,10,fe.RULE_decl);try{switch(this.state=108,this._errHandler.sync(this),this._input.LA(1)){case fe.T__10:this.enterOuterAlt(t,1),this.state=96,this.match(fe.T__10),this.state=97,this.match(fe.ID),this.state=98,this.match(fe.T__11),this.state=99,this.match(fe.INT),this.state=100,this.match(fe.T__12),this.state=101,this.match(fe.T__2);break;case fe.T__13:this.enterOuterAlt(t,2),this.state=102,this.match(fe.T__13),this.state=103,this.match(fe.ID),this.state=104,this.match(fe.T__11),this.state=105,this.match(fe.INT),this.state=106,this.match(fe.T__12),this.state=107,this.match(fe.T__2);break;default:throw new vt.error.NoViableAltException(this)}}catch(e){if(e instanceof vt.error.RecognitionException)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t};function gl(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_gatedecl,this}gl.prototype=Object.create(vt.ParserRuleContext.prototype);gl.prototype.constructor=gl;gl.prototype.ID=function(){return this.getToken(fe.ID,0)};gl.prototype.idlist=function(t){return t===void 0&&(t=null),t===null?this.getTypedRuleContexts(ls):this.getTypedRuleContext(ls,t)};gl.prototype.enterRule=function(t){t instanceof In&&t.enterGatedecl(this)};gl.prototype.exitRule=function(t){t instanceof In&&t.exitGatedecl(this)};fe.GatedeclContext=gl;fe.prototype.gatedecl=function(){var t=new gl(this,this._ctx,this.state);this.enterRule(t,12,fe.RULE_gatedecl);try{this.state=130,this._errHandler.sync(this);var e=this._interp.adaptivePredict(this._input,3,this._ctx);switch(e){case 1:this.enterOuterAlt(t,1),this.state=110,this.match(fe.T__14),this.state=111,this.match(fe.ID),this.state=112,this.idlist(),this.state=113,this.match(fe.T__15);break;case 2:this.enterOuterAlt(t,2),this.state=115,this.match(fe.T__14),this.state=116,this.match(fe.ID),this.state=117,this.match(fe.T__3),this.state=118,this.match(fe.T__4),this.state=119,this.idlist(),this.state=120,this.match(fe.T__15);break;case 3:this.enterOuterAlt(t,3),this.state=122,this.match(fe.T__14),this.state=123,this.match(fe.ID),this.state=124,this.match(fe.T__3),this.state=125,this.idlist(),this.state=126,this.match(fe.T__4),this.state=127,this.idlist(),this.state=128,this.match(fe.T__15);break}}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function yl(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_goplist,this}yl.prototype=Object.create(vt.ParserRuleContext.prototype);yl.prototype.constructor=yl;yl.prototype.uop=function(t){return t===void 0&&(t=null),t===null?this.getTypedRuleContexts(Ps):this.getTypedRuleContext(Ps,t)};yl.prototype.idlist=function(t){return t===void 0&&(t=null),t===null?this.getTypedRuleContexts(ls):this.getTypedRuleContext(ls,t)};yl.prototype.enterRule=function(t){t instanceof In&&t.enterGoplist(this)};yl.prototype.exitRule=function(t){t instanceof In&&t.exitGoplist(this)};fe.GoplistContext=yl;fe.prototype.goplist=function(){var t=new yl(this,this._ctx,this.state);this.enterRule(t,14,fe.RULE_goplist);var e=0;try{this.enterOuterAlt(t,1),this.state=137,this._errHandler.sync(this),e=this._input.LA(1);do{switch(this.state=137,this._errHandler.sync(this),this._input.LA(1)){case fe.T__19:case fe.T__20:case fe.ID:this.state=132,this.uop();break;case fe.T__7:this.state=133,this.match(fe.T__7),this.state=134,this.idlist(),this.state=135,this.match(fe.T__2);break;default:throw new vt.error.NoViableAltException(this)}this.state=139,this._errHandler.sync(this),e=this._input.LA(1)}while(!(e-8&-32)&&1<<e-8&(1<<fe.T__7-8|1<<fe.T__19-8|1<<fe.T__20-8|1<<fe.ID-8))}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function xl(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_qop,this}xl.prototype=Object.create(vt.ParserRuleContext.prototype);xl.prototype.constructor=xl;xl.prototype.uop=function(){return this.getTypedRuleContext(Ps,0)};xl.prototype.argument=function(t){return t===void 0&&(t=null),t===null?this.getTypedRuleContexts(oo):this.getTypedRuleContext(oo,t)};xl.prototype.enterRule=function(t){t instanceof In&&t.enterQop(this)};xl.prototype.exitRule=function(t){t instanceof In&&t.exitQop(this)};fe.QopContext=xl;fe.prototype.qop=function(){var t=new xl(this,this._ctx,this.state);this.enterRule(t,16,fe.RULE_qop);try{switch(this.state=152,this._errHandler.sync(this),this._input.LA(1)){case fe.T__19:case fe.T__20:case fe.ID:this.enterOuterAlt(t,1),this.state=141,this.uop();break;case fe.T__16:this.enterOuterAlt(t,2),this.state=142,this.match(fe.T__16),this.state=143,this.argument(),this.state=144,this.match(fe.T__17),this.state=145,this.argument(),this.state=146,this.match(fe.T__2);break;case fe.T__18:this.enterOuterAlt(t,3),this.state=148,this.match(fe.T__18),this.state=149,this.argument(),this.state=150,this.match(fe.T__2);break;default:throw new vt.error.NoViableAltException(this)}}catch(e){if(e instanceof vt.error.RecognitionException)t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e);else throw e}finally{this.exitRule()}return t};function Ps(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_uop,this}Ps.prototype=Object.create(vt.ParserRuleContext.prototype);Ps.prototype.constructor=Ps;Ps.prototype.explist=function(){return this.getTypedRuleContext(Dc,0)};Ps.prototype.argument=function(t){return t===void 0&&(t=null),t===null?this.getTypedRuleContexts(oo):this.getTypedRuleContext(oo,t)};Ps.prototype.ID=function(){return this.getToken(fe.ID,0)};Ps.prototype.anylist=function(){return this.getTypedRuleContext(_u,0)};Ps.prototype.enterRule=function(t){t instanceof In&&t.enterUop(this)};Ps.prototype.exitRule=function(t){t instanceof In&&t.exitUop(this)};fe.UopContext=Ps;fe.prototype.uop=function(){var t=new Ps(this,this._ctx,this.state);this.enterRule(t,18,fe.RULE_uop);try{this.state=184,this._errHandler.sync(this);var e=this._interp.adaptivePredict(this._input,7,this._ctx);switch(e){case 1:this.enterOuterAlt(t,1),this.state=154,this.match(fe.T__19),this.state=155,this.match(fe.T__3),this.state=156,this.explist(),this.state=157,this.match(fe.T__4),this.state=158,this.argument(),this.state=159,this.match(fe.T__2);break;case 2:this.enterOuterAlt(t,2),this.state=161,this.match(fe.T__20),this.state=162,this.argument(),this.state=163,this.match(fe.T__21),this.state=164,this.argument(),this.state=165,this.match(fe.T__2);break;case 3:this.enterOuterAlt(t,3),this.state=167,this.match(fe.ID),this.state=168,this.anylist(),this.state=169,this.match(fe.T__2);break;case 4:this.enterOuterAlt(t,4),this.state=171,this.match(fe.ID),this.state=172,this.match(fe.T__3),this.state=173,this.match(fe.T__4),this.state=174,this.anylist(),this.state=175,this.match(fe.T__2);break;case 5:this.enterOuterAlt(t,5),this.state=177,this.match(fe.ID),this.state=178,this.match(fe.T__3),this.state=179,this.explist(),this.state=180,this.match(fe.T__4),this.state=181,this.anylist(),this.state=182,this.match(fe.T__2);break}}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function _u(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_anylist,this}_u.prototype=Object.create(vt.ParserRuleContext.prototype);_u.prototype.constructor=_u;_u.prototype.idlist=function(){return this.getTypedRuleContext(ls,0)};_u.prototype.mixedlist=function(){return this.getTypedRuleContext(bl,0)};_u.prototype.enterRule=function(t){t instanceof In&&t.enterAnylist(this)};_u.prototype.exitRule=function(t){t instanceof In&&t.exitAnylist(this)};fe.AnylistContext=_u;fe.prototype.anylist=function(){var t=new _u(this,this._ctx,this.state);this.enterRule(t,20,fe.RULE_anylist);try{this.state=188,this._errHandler.sync(this);var e=this._interp.adaptivePredict(this._input,8,this._ctx);switch(e){case 1:this.enterOuterAlt(t,1),this.state=186,this.idlist();break;case 2:this.enterOuterAlt(t,2),this.state=187,this.mixedlist();break}}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function ls(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_idlist,this}ls.prototype=Object.create(vt.ParserRuleContext.prototype);ls.prototype.constructor=ls;ls.prototype.ID=function(t){return t===void 0&&(t=null),t===null?this.getTokens(fe.ID):this.getToken(fe.ID,t)};ls.prototype.enterRule=function(t){t instanceof In&&t.enterIdlist(this)};ls.prototype.exitRule=function(t){t instanceof In&&t.exitIdlist(this)};fe.IdlistContext=ls;fe.prototype.idlist=function(){var t=new ls(this,this._ctx,this.state);this.enterRule(t,22,fe.RULE_idlist);try{this.enterOuterAlt(t,1),this.state=194,this._errHandler.sync(this);for(var e=this._interp.adaptivePredict(this._input,9,this._ctx);e!=2&&e!=vt.atn.ATN.INVALID_ALT_NUMBER;)e===1&&(this.state=190,this.match(fe.ID),this.state=191,this.match(fe.T__21)),this.state=196,this._errHandler.sync(this),e=this._interp.adaptivePredict(this._input,9,this._ctx);this.state=197,this.match(fe.ID)}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function bl(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_mixedlist,this}bl.prototype=Object.create(vt.ParserRuleContext.prototype);bl.prototype.constructor=bl;bl.prototype.ID=function(t){return t===void 0&&(t=null),t===null?this.getTokens(fe.ID):this.getToken(fe.ID,t)};bl.prototype.INT=function(t){return t===void 0&&(t=null),t===null?this.getTokens(fe.INT):this.getToken(fe.INT,t)};bl.prototype.enterRule=function(t){t instanceof In&&t.enterMixedlist(this)};bl.prototype.exitRule=function(t){t instanceof In&&t.exitMixedlist(this)};fe.MixedlistContext=bl;fe.prototype.mixedlist=function(){var t=new bl(this,this._ctx,this.state);this.enterRule(t,24,fe.RULE_mixedlist);try{this.state=242,this._errHandler.sync(this);var e=this._interp.adaptivePredict(this._input,14,this._ctx);switch(e){case 1:this.enterOuterAlt(t,1),this.state=206,this._errHandler.sync(this);for(var n=this._interp.adaptivePredict(this._input,10,this._ctx);n!=2&&n!=vt.atn.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=199,this.match(fe.ID),this.state=200,this.match(fe.T__11),this.state=201,this.match(fe.INT),this.state=202,this.match(fe.T__12),this.state=203,this.match(fe.T__21)),this.state=208,this._errHandler.sync(this),n=this._interp.adaptivePredict(this._input,10,this._ctx);this.state=209,this.match(fe.ID);break;case 2:this.enterOuterAlt(t,2),this.state=217,this._errHandler.sync(this);for(var n=this._interp.adaptivePredict(this._input,11,this._ctx);n!=2&&n!=vt.atn.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=210,this.match(fe.ID),this.state=211,this.match(fe.T__11),this.state=212,this.match(fe.INT),this.state=213,this.match(fe.T__12),this.state=214,this.match(fe.T__21)),this.state=219,this._errHandler.sync(this),n=this._interp.adaptivePredict(this._input,11,this._ctx);this.state=220,this.match(fe.ID),this.state=221,this.match(fe.T__11),this.state=222,this.match(fe.INT),this.state=223,this.match(fe.T__12);break;case 3:this.enterOuterAlt(t,3),this.state=235,this._errHandler.sync(this);for(var n=this._interp.adaptivePredict(this._input,13,this._ctx);n!=2&&n!=vt.atn.ATN.INVALID_ALT_NUMBER;){if(n===1){this.state=228,this._errHandler.sync(this);for(var n=this._interp.adaptivePredict(this._input,12,this._ctx);n!=2&&n!=vt.atn.ATN.INVALID_ALT_NUMBER;)n===1&&(this.state=224,this.match(fe.ID),this.state=225,this.match(fe.T__21)),this.state=230,this._errHandler.sync(this),n=this._interp.adaptivePredict(this._input,12,this._ctx);this.state=231,this.match(fe.ID),this.state=232,this.match(fe.T__21)}this.state=237,this._errHandler.sync(this),n=this._interp.adaptivePredict(this._input,13,this._ctx)}this.state=238,this.match(fe.ID),this.state=239,this.match(fe.T__11),this.state=240,this.match(fe.INT),this.state=241,this.match(fe.T__12);break}}catch(r){if(r instanceof vt.error.RecognitionException)t.exception=r,this._errHandler.reportError(this,r),this._errHandler.recover(this,r);else throw r}finally{this.exitRule()}return t};function oo(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_argument,this}oo.prototype=Object.create(vt.ParserRuleContext.prototype);oo.prototype.constructor=oo;oo.prototype.ID=function(){return this.getToken(fe.ID,0)};oo.prototype.INT=function(){return this.getToken(fe.INT,0)};oo.prototype.enterRule=function(t){t instanceof In&&t.enterArgument(this)};oo.prototype.exitRule=function(t){t instanceof In&&t.exitArgument(this)};fe.ArgumentContext=oo;fe.prototype.argument=function(){var t=new oo(this,this._ctx,this.state);this.enterRule(t,26,fe.RULE_argument);try{this.state=249,this._errHandler.sync(this);var e=this._interp.adaptivePredict(this._input,15,this._ctx);switch(e){case 1:this.enterOuterAlt(t,1),this.state=244,this.match(fe.ID);break;case 2:this.enterOuterAlt(t,2),this.state=245,this.match(fe.ID),this.state=246,this.match(fe.T__11),this.state=247,this.match(fe.INT),this.state=248,this.match(fe.T__12);break}}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function Dc(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_explist,this}Dc.prototype=Object.create(vt.ParserRuleContext.prototype);Dc.prototype.constructor=Dc;Dc.prototype.exp=function(t){return t===void 0&&(t=null),t===null?this.getTypedRuleContexts(Da):this.getTypedRuleContext(Da,t)};Dc.prototype.enterRule=function(t){t instanceof In&&t.enterExplist(this)};Dc.prototype.exitRule=function(t){t instanceof In&&t.exitExplist(this)};fe.ExplistContext=Dc;fe.prototype.explist=function(){var t=new Dc(this,this._ctx,this.state);this.enterRule(t,28,fe.RULE_explist);try{this.enterOuterAlt(t,1),this.state=256,this._errHandler.sync(this);for(var e=this._interp.adaptivePredict(this._input,16,this._ctx);e!=2&&e!=vt.atn.ATN.INVALID_ALT_NUMBER;)e===1&&(this.state=251,this.exp(0),this.state=252,this.match(fe.T__21)),this.state=258,this._errHandler.sync(this),e=this._interp.adaptivePredict(this._input,16,this._ctx);this.state=259,this.exp(0)}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function Da(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_exp,this}Da.prototype=Object.create(vt.ParserRuleContext.prototype);Da.prototype.constructor=Da;Da.prototype.exp=function(t){return t===void 0&&(t=null),t===null?this.getTypedRuleContexts(Da):this.getTypedRuleContext(Da,t)};Da.prototype.unaryop=function(){return this.getTypedRuleContext(cp,0)};Da.prototype.atom=function(){return this.getTypedRuleContext(Zo,0)};Da.prototype.enterRule=function(t){t instanceof In&&t.enterExp(this)};Da.prototype.exitRule=function(t){t instanceof In&&t.exitExp(this)};fe.prototype.exp=function(t){t===void 0&&(t=0);var e=this._ctx,n=this.state,r=new Da(this,this._ctx,n),a=r,s=30;this.enterRecursionRule(r,30,fe.RULE_exp,t);var o=0;try{this.enterOuterAlt(r,1),this.state=281,this._errHandler.sync(this);var u=this._interp.adaptivePredict(this._input,20,this._ctx);switch(u){case 1:this.state=263,this._errHandler.sync(this),o=this._input.LA(1),(o===fe.T__25||o===fe.T__26)&&(this.state=262,o=this._input.LA(1),o===fe.T__25||o===fe.T__26?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=265,this.match(fe.T__3),this.state=266,this.exp(0),this.state=267,this.match(fe.T__4);break;case 2:this.state=270,this._errHandler.sync(this),o=this._input.LA(1),(o===fe.T__25||o===fe.T__26)&&(this.state=269,o=this._input.LA(1),o===fe.T__25||o===fe.T__26?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=272,this.unaryop(),this.state=273,this.match(fe.T__3),this.state=274,this.exp(0),this.state=275,this.match(fe.T__4);break;case 3:this.state=278,this._errHandler.sync(this),o=this._input.LA(1),(o===fe.T__25||o===fe.T__26)&&(this.state=277,o=this._input.LA(1),o===fe.T__25||o===fe.T__26?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)),this.state=280,this.atom();break}this._ctx.stop=this._input.LT(-1),this.state=294,this._errHandler.sync(this);for(var l=this._interp.adaptivePredict(this._input,22,this._ctx);l!=2&&l!=vt.atn.ATN.INVALID_ALT_NUMBER;){if(l===1){this._parseListeners!==null&&this.triggerExitRuleEvent(),a=r,this.state=292,this._errHandler.sync(this);var u=this._interp.adaptivePredict(this._input,21,this._ctx);switch(u){case 1:if(r=new Da(this,e,n),this.pushNewRecursionContext(r,s,fe.RULE_exp),this.state=283,!this.precpred(this._ctx,6))throw new vt.error.FailedPredicateException(this,"this.precpred(this._ctx, 6)");this.state=284,this.match(fe.T__22),this.state=285,this.exp(7);break;case 2:if(r=new Da(this,e,n),this.pushNewRecursionContext(r,s,fe.RULE_exp),this.state=286,!this.precpred(this._ctx,5))throw new vt.error.FailedPredicateException(this,"this.precpred(this._ctx, 5)");this.state=287,o=this._input.LA(1),o===fe.T__23||o===fe.T__24?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=288,this.exp(6);break;case 3:if(r=new Da(this,e,n),this.pushNewRecursionContext(r,s,fe.RULE_exp),this.state=289,!this.precpred(this._ctx,4))throw new vt.error.FailedPredicateException(this,"this.precpred(this._ctx, 4)");this.state=290,o=this._input.LA(1),o===fe.T__25||o===fe.T__26?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this),this.state=291,this.exp(5);break}}this.state=296,this._errHandler.sync(this),l=this._interp.adaptivePredict(this._input,22,this._ctx)}}catch(f){if(f instanceof vt.error.RecognitionException)r.exception=f,this._errHandler.reportError(this,f),this._errHandler.recover(this,f);else throw f}finally{this.unrollRecursionContexts(e)}return r};function Zo(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_atom,this}Zo.prototype=Object.create(vt.ParserRuleContext.prototype);Zo.prototype.constructor=Zo;Zo.prototype.INT=function(){return this.getToken(fe.INT,0)};Zo.prototype.REAL=function(){return this.getToken(fe.REAL,0)};Zo.prototype.PI=function(){return this.getToken(fe.PI,0)};Zo.prototype.ID=function(){return this.getToken(fe.ID,0)};Zo.prototype.enterRule=function(t){t instanceof In&&t.enterAtom(this)};Zo.prototype.exitRule=function(t){t instanceof In&&t.exitAtom(this)};fe.AtomContext=Zo;fe.prototype.atom=function(){var t=new Zo(this,this._ctx,this.state);this.enterRule(t,32,fe.RULE_atom);var e=0;try{this.enterOuterAlt(t,1),this.state=297,e=this._input.LA(1),!(e-34&-32)&&1<<e-34&(1<<fe.PI-34|1<<fe.REAL-34|1<<fe.INT-34|1<<fe.ID-34)?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};function cp(t,e,n){return e===void 0&&(e=null),n==null&&(n=-1),vt.ParserRuleContext.call(this,e,n),this.parser=t,this.ruleIndex=fe.RULE_unaryop,this}cp.prototype=Object.create(vt.ParserRuleContext.prototype);cp.prototype.constructor=cp;cp.prototype.enterRule=function(t){t instanceof In&&t.enterUnaryop(this)};cp.prototype.exitRule=function(t){t instanceof In&&t.exitUnaryop(this)};fe.UnaryopContext=cp;fe.prototype.unaryop=function(){var t=new cp(this,this._ctx,this.state);this.enterRule(t,34,fe.RULE_unaryop);var e=0;try{this.enterOuterAlt(t,1),this.state=299,e=this._input.LA(1),!(e-28&-32)&&1<<e-28&(1<<fe.T__27-28|1<<fe.T__28-28|1<<fe.T__29-28|1<<fe.T__30-28|1<<fe.T__31-28|1<<fe.T__32-28)?(this._errHandler.reportMatch(this),this.consume()):this._errHandler.recoverInline(this)}catch(n){if(n instanceof vt.error.RecognitionException)t.exception=n,this._errHandler.reportError(this,n),this._errHandler.recover(this,n);else throw n}finally{this.exitRule()}return t};fe.prototype.sempred=function(t,e,n){switch(e){case 15:return this.exp_sempred(t,n);default:throw"No predicate with index:"+e}};fe.prototype.exp_sempred=function(t,e){switch(e){case 0:return this.precpred(this._ctx,6);case 1:return this.precpred(this._ctx,5);case 2:return this.precpred(this._ctx,4);default:throw"No predicate with index:"+e}};XJ.QASMParser=fe;/**
 * @license
 *
 * Copyright (c) 2016, Petar Korponaić <petar.korponaic@gmail.com>
 *
 * This source code is licensed under the MIT License, found in
 * the LICENSE.txt file in the root directory of this source tree.
 */var Kg=ai,qEe=jJ,GEe=XJ,QJ=b4.QASMListener,Yy=function(t){return Kg.error.ErrorListener.call(this),this.errors=t,this};Yy.prototype=Object.create(Kg.error.ErrorListener.prototype);Yy.prototype.constructor=Yy;Yy.prototype.syntaxError=function(t,e,n,r,a,s){this.errors.push({line:n,col:r,msg:a})};var Mn=function(t,e){return this.circuit=t,this.qregMap={},this.condition={},this.compatibilityMode=e,QJ.call(this),this},HEe=function(t,e,n,r){var a=new Kg.InputStream(e),s=new qEe.QASMLexer(a),o=new Kg.CommonTokenStream(s),u=new GEe.QASMParser(o);u.buildParseTrees=!0,u.removeErrorListeners();var l=[],f=new Yy(l);u.addErrorListener(f);var c=u.mainprog(),p=new Mn(t,r);Kg.tree.ParseTreeWalker.DEFAULT.walk(p,c),n&&n(l)};Mn.prototype=Object.create(QJ.prototype);Mn.prototype.constructor=Mn;Mn.prototype.numQbit=function(){var t=0;for(var e in this.qregMap)t+=this.qregMap[e];return t};Mn.prototype.qregBase=function(t){var e=0;for(var n in this.qregMap){if(n==t)return e;e+=this.qregMap[n]}return e};Mn.prototype.qregLen=function(t){return this.qregMap[t]||0};Mn.prototype.enterMainprog=function(t){};Mn.prototype.exitMainprog=function(t){};Mn.prototype.enterStatement=function(t){var e=this,n=t.getChildCount()?t.getChild(0).getText():"";if(n=="if"&&(this.condition={creg:t.ID().getText(),value:parseInt(t.INT().getText())}),t.gatedecl()){var r=t.gatedecl(),a=[],s=[],o=r.getChildCount();o>2&&r.getChild(2).ID?a=r.getChild(2).ID():(o>3&&r.getChild(3).ID&&(s=r.getChild(3).ID()),o>5&&r.getChild(5).ID&&(a=r.getChild(5).ID()));var u=Object.getPrototypeOf(this.circuit),l=new u.constructor(a.length),f=r.ID().getText(),c=[];if(a.map(function(d){c.push(d.getText())}),s.map(function(d){var h=d.getText();l.params.push(h)}),t.goplist()){var p=t.goplist();p.uop().map(function(d){var h=d.ID()?d.ID().getText():"";if(h){var m=d.anylist()?d.anylist().idlist():null;d.anylist()&&d.anylist().mixedlist();var v=d.explist();switch(h){case"CX":h="cx";break;case"U":h="u3";break}if(!e.circuit.basicGates[h]&&!e.circuit.customGates[h])for(var g in e.circuit.basicGates){var y=e.circuit.basicGates[g];if(y.exportInfo&&y.exportInfo.qasm&&y.exportInfo.qasm.name&&y.exportInfo.qasm.name==h){h=g;break}if(y.exportInfo&&y.exportInfo.qiskit&&y.exportInfo.qiskit.name&&y.exportInfo.qiskit.name==h){h=g;break}}var _={};if(v&&v.exp()){var x=e.circuit.basicGates[h];if(x||(x=e.circuit.customGates[h]),x){var M=v.exp(),A=x.params||[];M.map(function(P,I){var U=P.getText(),q=A.length>=I?A[I]:"";q&&(_[q]=U)})}}var E={params:_},N=[];if(m)for(var D=m.ID().length,C=0;C<D;C++)N.push(c.indexOf(m.ID()[C].getText()));var T=e.circuit.customGates[h];T&&l.registerGate(h,JSON.parse(JSON.stringify(T))),l.addGate(h,-1,N,E)}})}this.circuit.registerGate(f,l.save(!1))}};Mn.prototype.exitStatement=function(t){};Mn.prototype.enterVersion=function(t){};Mn.prototype.exitVersion=function(t){};Mn.prototype.enterDecl=function(t){switch(t.getChild(0).getText()){case"qreg":this.qregMap[t.getChild(1).getText()]=parseInt(t.getChild(3).getText());break;case"creg":this.circuit.createCreg(t.getChild(1).getText(),parseInt(t.getChild(3).getText()));break}};Mn.prototype.exitDecl=function(t){};Mn.prototype.enterGatedecl=function(t){};Mn.prototype.exitGatedecl=function(t){};Mn.prototype.enterGoplist=function(t){};Mn.prototype.exitGoplist=function(t){};Mn.prototype.enterQop=function(t){var e=this,n=JSON.parse(JSON.stringify(this.condition));this.condition={};var r=t.getChildCount()?t.getChild(0).getText():"";if(r=="reset"){for(var a="",s=-1,o=t.argument().length,u=0;u<o;u++){var l=t.argument()[u];u==0&&(a=l.ID().getText(),s=l.INT()?parseInt(l.INT().getText()):-1)}if(a){var f=e.qregLen(a);if(s<0)for(var c=0;c<f;c++)e.circuit.addGate("reset",-1,c+e.qregBase(a),{condition:n||{}});else e.circuit.addGate("reset",-1,s+e.qregBase(a),{condition:n||{}})}}if(r=="measure"){for(var a="",s=-1,p="",d=-1,o=t.argument().length,u=0;u<o;u++){var l=t.argument()[u];u==0&&(a=l.ID().getText(),s=l.INT()?parseInt(l.INT().getText()):-1),u==1&&(p=l.ID().getText(),d=l.INT()?parseInt(l.INT().getText()):-1)}if(a&&p){var f=e.qregLen(a);if(s<0&&d<0)for(var c=0;c<f;c++)e.circuit.addGate("measure",-1,c+e.qregBase(a),{creg:{name:p,bit:c},condition:n||{}});else if(s>=0&&d>=0)e.circuit.addGate("measure",-1,s+e.qregBase(a),{creg:{name:p,bit:d},condition:n||{}});else if(s>=0&&d<0)for(var c=0;c<f;c++)e.circuit.addGate("measure",-1,s+e.qregBase(a),{creg:{name:p,bit:c},condition:n||{}});else for(var c=0;c<f;c++)e.circuit.addGate("measure",-1,c+e.qregBase(a),{creg:{name:p,bit:d},condition:n||{}})}}var h=t.uop();if(h&&h.ID()){var m=h.ID().getText(),v=h.anylist()?h.anylist().idlist():null,g=h.anylist()?h.anylist().mixedlist():null,y=h.explist();switch(m){case"CX":m="cx";break;case"U":m="u3";break}if(!e.circuit.basicGates[m]&&!e.circuit.customGates[m])for(var _ in e.circuit.basicGates){var x=e.circuit.basicGates[_];if(x.exportInfo&&x.exportInfo.qasm&&x.exportInfo.qasm.name&&x.exportInfo.qasm.name==m){m=_;break}if(x.exportInfo&&x.exportInfo.qiskit&&x.exportInfo.qiskit.name&&x.exportInfo.qiskit.name==m){m=_;break}}var M={};if(y&&y.exp()){var A=e.circuit.basicGates[m];if(A||(A=e.circuit.customGates[m]),A){var E=y.exp(),N=A.params||[];E.map(function(P,I){var U=P.getText(),q=N.length>=I?N[I]:"";q&&(M[q]=U)})}}var D={params:M,condition:n||{}};if(v)for(var f=e.qregLen(v.ID()[0].getText()),c=0;c<f;c++){for(var C=[],o=v.ID().length,u=0;u<o;u++)C.push({reg:v.ID()[u].getText(),bit:c});var T=[];C.map(function(q){T.push(q.bit+e.qregBase(q.reg))}),e.circuit.addGate(m,-1,T,D)}if(g&&g.ID().length==g.INT().length){for(var C=[],o=g.ID().length,u=0;u<o;u++)C.push({reg:g.ID()[u].getText(),bit:parseInt(g.INT()[u].getText())});var T=[];C.map(function(q){T.push(q.bit+e.qregBase(q.reg))}),e.circuit.addGate(m,-1,T,D)}}};Mn.prototype.exitQop=function(t){};Mn.prototype.enterUop=function(t){};Mn.prototype.exitUop=function(t){};Mn.prototype.enterAnylist=function(t){};Mn.prototype.exitAnylist=function(t){};Mn.prototype.enterIdlist=function(t){};Mn.prototype.exitIdlist=function(t){};Mn.prototype.enterMixedlist=function(t){};Mn.prototype.exitMixedlist=function(t){};Mn.prototype.enterArgument=function(t){};Mn.prototype.exitArgument=function(t){};Mn.prototype.enterExplist=function(t){};Mn.prototype.exitExplist=function(t){};Mn.prototype.enterExp=function(t){};Mn.prototype.exitExp=function(t){};Mn.prototype.enterUnaryop=function(t){};Mn.prototype.exitUnaryop=function(t){};var VEe=HEe;/**
 * @license
 *
 * Copyright (c) 2016, Petar Korponaić <petar.korponaic@gmail.com>
 *
 * This source code is licensed under the MIT License, found in
 * the LICENSE.txt file in the root directory of this source tree.
 */var Ce=H_e,WEe=VEe,Dg=function(t,e,n){n=n||{};var r=Pw(t,n),a=JSON.parse(JSON.stringify(n));a.plusChar="+";var s=Pw(e,a);return r+s+(n.iotaChar?n.iotaChar:"i")},Pw=function(t,e){e=e||{},e.decimalPlaces&&(t=Ce.round(t,e.decimalPlaces));var n=t+"";e.fixedWidth&&(n=t.toFixed(e.decimalPlaces||14));var r=e.plusChar;return e.fixedWidth&&!r&&(r=" "),r&&t>=0&&(n=r+n),n},Hi=function(t,e){maxN=e||t+1,maxN>0&&(maxN=maxN-1),maxLen=maxN.toString(26).length;for(var n=t.toString(26);n.length<maxLen;)n="0"+n;for(var r="",a=0;a<n.length;a++){var s=n.charCodeAt(a);r+=String.fromCharCode(s<97?s+49:s+10)}return r},Ne=function(t){this.basicGates={id:{description:"Single qubit identity gate",matrix:[[1,0],[0,1]],params:[],drawingInfo:{connectors:["box"],label:"ID"},exportInfo:{quil:{name:"I"},cirq:{name:"I",notTfqSupported:!0},quest:{name:"compactUnitary",params:{alpha:"(Complex) { .real = 1, .imag = 0 }",beta:"(Complex) {.real = 0, .imag = 0}"}},qsharp:{name:"I"},qiskit:{name:"id"},braket:{name:"i"},aqasm:{name:"I"}}},x:{description:'Pauli X (PI rotation over X-axis) aka "NOT" gate',matrix:[[0,1],[1,0]],params:[],drawingInfo:{connectors:["box"],label:"X"},exportInfo:{quil:{name:"X"},cirq:{name:"X"},quest:{name:"pauliX"},qsharp:{name:"X"},quirk:{name:"X"},braket:{name:"x"},aqasm:{name:"X"},ionq:{names:["x","not"]}}},y:{description:"Pauli Y (PI rotation over Y-axis)",matrix:[[0,"-i"],["i",0]],params:[],drawingInfo:{connectors:["box"],label:"Y"},exportInfo:{quil:{name:"Y"},cirq:{name:"Y"},quest:{name:"pauliY"},qsharp:{name:"Y"},quirk:{name:"Y"},braket:{name:"y"},aqasm:{name:"Y"},ionq:{name:"y"}}},z:{description:"Pauli Z (PI rotation over Z-axis)",matrix:[[1,0],[0,-1]],params:[],drawingInfo:{connectors:["box"],label:"Z"},exportInfo:{quil:{name:"Z"},cirq:{name:"Z"},quest:{name:"pauliZ"},qsharp:{name:"Z"},quirk:{name:"Z"},braket:{name:"z"},aqasm:{name:"Z"},ionq:{name:"z"}}},h:{description:"Hadamard gate",matrix:[["1 / sqrt(2)","1 / sqrt(2)"],["1 / sqrt(2)","-1 / sqrt(2)"]],params:[],drawingInfo:{connectors:["box"],label:"H"},exportInfo:{quil:{name:"H"},cirq:{name:"H"},quest:{name:"hadamard"},qsharp:{name:"H"},quirk:{name:"H"},braket:{name:"h"},aqasm:{name:"H"},ionq:{name:"h"}}},srn:{description:"Square root of NOT",matrix:[["0.5+0.5i","0.5-0.5i"],["0.5-0.5i","0.5+0.5i"]],params:[],drawingInfo:{connectors:["box"],label:"&#x221A;X"},exportInfo:{quil:{name:"srn",defgate:`DEFGATE srn:
    0.5+0.5i, 0.5-0.5i
    0.5-0.5i, 0.5+0.5i`},pyquil:{name:"srn",array:"[[0.5+0.5j, 0.5-0.5j], [0.5-0.5j, 0.5+0.5j]]"},cirq:{name:"X**(1/2)"},quest:{name:"unitary",matrix:[[["0.5","0.5"],["0.5","-0.5"]],[["0.5","-0.5"],["0.5","0.5"]]]},qasm:{name:"sx"},qiskit:{name:"sx"},braket:{name:"v"},aqasm:{matrix:[["0.5+0.5i","0.5-0.5i"],["0.5-0.5i","0.5+0.5i"]],array:"[[0.5+0.5j, 0.5-0.5j], [0.5-0.5j, 0.5+0.5j]]"},ionq:{name:"v"}}},srndg:{description:"Inverse square root of NOT",matrix:[["0.5-0.5i","0.5+0.5i"],["0.5+0.5i","0.5-0.5i"]],params:[],drawingInfo:{connectors:["box"],label:"&#x221A;X&#8224;"},exportInfo:{quil:{name:"srndg",defgate:`DEFGATE srndg:
    0.5-0.5i, 0.5+0.5i
    0.5+0.5i, 0.5-0.5i`},pyquil:{name:"srndg",array:"[[0.5-0.5j, 0.5+0.5j], [0.5+0.5j, 0.5-0.5j]]"},cirq:{name:"X**(-1/2)"},quest:{name:"unitary",matrix:[[["0.5","-0.5"],["0.5","0.5"]],[["0.5","0.5"],["0.5","-0.5"]]]},qasm:{name:"sxdg"},qiskit:{name:"sxdg"},braket:{name:"vi"},aqasm:{matrix:[["0.5-0.5i","0.5+0.5i"],["0.5+0.5i","0.5-0.5i"]],array:"[[0.5-0.5j, 0.5+0.5j], [0.5+0.5j, 0.5-0.5j]]"},ionq:{name:"vi"}}},r2:{description:'PI/2 rotation over Z-axis aka "Phase PI/2"',matrix:[[1,0],[0,"exp(i * pi / 2)"]],params:[],drawingInfo:{connectors:["box"],label:"Z&#x1D6D1;/2"},exportInfo:{quil:{replacement:{name:"s"}},cirq:{replacement:{name:"s"}},quest:{name:"sGate"},qsharp:{replacement:{name:"s"}},qasm:{replacement:[{name:"s",params:{}}]},qiskit:{replacement:[{name:"s",params:{}}]},quirk:{name:"Z^½"},braket:{name:"s"},aqasm:{name:"S"}}},r4:{description:'PI/4 rotation over Z-axis aka "Phase PI/4"',matrix:[[1,0],[0,"exp(i * pi / 4)"]],params:[],drawingInfo:{connectors:["box"],label:"Z&#x1D6D1;/4"},exportInfo:{quil:{replacement:{name:"t"}},cirq:{replacement:{name:"t"}},quest:{name:"tGate"},qsharp:{replacement:{name:"t"}},qasm:{replacement:[{name:"t",params:{}}]},qiskit:{replacement:[{name:"t",params:{}}]},quirk:{name:"Z^¼"},braket:{name:"t"},aqasm:{name:"T"}}},r8:{description:'PI/8 rotation over Z-axis aka "Phase PI/8"',matrix:[[1,0],[0,"exp(i * pi / 8)"]],params:[],drawingInfo:{connectors:["box"],label:"Z&#x1D6D1;/8"},exportInfo:{quil:{replacement:{name:"u1",params:{lambda:"pi/8"}}},cirq:{replacement:{name:"u1",params:{lambda:"pi/8"}}},quest:{name:"phaseShift",params:{theta:"M_PI/8"}},qsharp:{replacement:{name:"u1",params:{lambda:"pi/8"}}},qasm:{replacement:[{name:"u1",params:{lambda:"pi/8"}}]},qiskit:{replacement:[{name:"u1",params:{lambda:"pi/8"}}]},quirk:{name:"Z^⅛"},braket:{name:"phaseshift",params:{theta:"pi/8"}},aqasm:{matrix:[[1,0],[0,"exp(i * pi / 8)"]],array:"[[1,0],[0,np.exp(1j * np.pi / 8)]]"}}},rx:{description:"Rotation around the X-axis by given angle",matrix:[["cos(theta / 2)","-i * sin(theta / 2)"],["-i * sin(theta / 2)","cos(theta / 2)"]],params:["theta"],drawingInfo:{connectors:["box"],label:"RX"},exportInfo:{quil:{name:"RX",params:["theta"]},cirq:{name:"rx",params:["theta"]},quest:{name:"rotateX",params:["theta"]},qsharp:{name:"Rx",params:["theta"]},braket:{name:"rx",params:["theta"]},aqasm:{name:"RX"},ionq:{name:"rx",paramsKey:"rotation"}}},ry:{description:"Rotation around the Y-axis by given angle",matrix:[["cos(theta / 2)","-1 * sin(theta / 2)"],["sin(theta / 2)","cos(theta / 2)"]],params:["theta"],drawingInfo:{connectors:["box"],label:"RY"},exportInfo:{quil:{name:"RY",params:["theta"]},cirq:{name:"ry",params:["theta"]},quest:{name:"rotateY",params:["theta"]},qsharp:{name:"Ry",params:["theta"]},braket:{name:"ry",params:["theta"]},aqasm:{name:"RY"},ionq:{name:"ry",paramsKey:"rotation"}}},rz:{description:"Rotation around the Z-axis by given angle",matrix:[["cos(phi / 2) - i * sin(phi / 2)",0],[0,"cos(phi / 2) + i * sin(phi / 2)"]],params:["phi"],drawingInfo:{connectors:["box"],label:"RZ"},exportInfo:{quil:{name:"RZ",params:["phi"]},cirq:{name:"rz",params:["theta"]},qsharp:{name:"Rz",params:["theta"]},braket:{name:"rz",params:["phi"]},aqasm:{name:"RZ"},ionq:{name:"rz",paramsKey:"rotation"}}},u1:{description:"Single-qubit rotation about the Z axis",matrix:[[1,0],[0,"exp(i * lambda)"]],params:["lambda"],drawingInfo:{connectors:["box"],label:"U1"},exportInfo:{quil:{name:"PHASE",params:["lambda"]},cirq:{name:"u1",params:["lambda"],array:"[[1, 0], [0, np.exp(1j*p_lambda)]]",notTfqSupported:!0},quest:{name:"phaseShift",params:["lambda"]},braket:{name:"phaseshift",params:["lambda"]},qiskit:{name:"p"},aqasm:{name:"PH"}}},u2:{description:"Single-qubit rotation about the X+Z axis",matrix:[["1 / sqrt(2)","-exp(i * lambda) * 1 / sqrt(2)"],["exp(i * phi) * 1 / sqrt(2)","exp(i * lambda + i * phi) * 1 / sqrt(2)"]],params:["phi","lambda"],drawingInfo:{connectors:["box"],label:"U2"},exportInfo:{quil:{name:"u2",params:["phi","lambda"],defgate:`DEFGATE u2(%phi, %lambda):
    1/SQRT(2), -1*EXP(i*%lambda)*1/SQRT(2)
    EXP(i*%phi)*1/SQRT(2), EXP(i*%lambda + i*%phi)*1/SQRT(2)`},pyquil:{name:"u2",params:["phi","lambda"],array:"[[1/quil_sqrt(2),-quil_exp(1j*p_lambda)*1/quil_sqrt(2)],[quil_exp(1j*p_phi)*1/quil_sqrt(2),quil_exp(1j*p_lambda+1j*p_phi)*1/quil_sqrt(2)]]"},cirq:{name:"u2",params:["phi","lambda"],array:"[[1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)], [np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]",notTfqSupported:!0},quest:{name:"unitary",params:["phi","lambda"],matrix:[[["1/sqrt(2)","0"],["-cos(lambda)/sqrt(2)","-sin(lambda)/sqrt(2)"]],[["cos(phi)/sqrt(2)","sin(phi)/sqrt(2)"],["cos(lambda+phi)/sqrt(2)","sin(lambda+phi)/sqrt(2)"]]]},braket:{name:"unitary",params:["phi","lambda"],array:"[[1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)], [np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]"},aqasm:{matrix:[["1 / sqrt(2)","-exp(i * lambda) * 1 / sqrt(2)"],["exp(i * phi) * 1 / sqrt(2)","exp(i * lambda + i * phi) * 1 / sqrt(2)"]],array:"[[1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)], [np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]",params:["phi","lambda"]},qiskit:{replacement:[{name:"u3",params:{theta:"pi/2",phi:"phi",lambda:"lambda"}}]}}},u3:{description:"Generic single-qubit rotation gate with 3 Euler angles",matrix:[["cos(theta/2)","-exp(i * lambda) * sin(theta / 2)"],["exp(i * phi) * sin(theta / 2)","exp(i * lambda + i * phi) * cos(theta / 2)"]],params:["theta","phi","lambda"],drawingInfo:{connectors:["box"],label:"U3"},exportInfo:{quil:{name:"u3",params:["theta","phi","lambda"],defgate:`DEFGATE u3(%theta, %phi, %lambda):
    COS(%theta/2), -1*EXP(i*%lambda)*SIN(%theta/2)
    EXP(i*%phi)*SIN(%theta/2), EXP(i*%lambda + i*%phi)*COS(%theta/2)`},pyquil:{name:"u3",params:["theta","phi","lambda"],array:"[[quil_cos(p_theta/2),-quil_exp(1j*p_lambda)*quil_sin(p_theta/2)],[quil_exp(1j*p_phi)*quil_sin(p_theta/2),quil_exp(1j*p_lambda+1j*p_phi)*quil_cos(p_theta/2)]]"},cirq:{name:"u3",params:["theta","phi","lambda"],array:"[[np.cos(p_theta/2), -np.exp(1j*p_lambda)*np.sin(p_theta/2)], [np.exp(1j*p_phi)*np.sin(p_theta/2), np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]",notTfqSupported:!0},quest:{name:"unitary",params:["theta","phi","lambda"],matrix:[[["cos(theta/2)","0"],["-cos(lambda)*sin(theta/2)","-sin(lambda)*sin(theta/2)"]],[["cos(phi)*sin(theta/2)","sin(phi)*sin(theta/2)"],["cos(lambda+phi)*cos(theta/2)","sin(lambda+phi)*cos(theta/2)"]]]},braket:{name:"unitary",params:["theta","phi","lambda"],array:"[[np.cos(p_theta/2), -np.exp(1j*p_lambda)*np.sin(p_theta/2)], [np.exp(1j*p_phi)*np.sin(p_theta/2), np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]"},qiskit:{name:"u"},aqasm:{matrix:[["cos(theta/2)","-exp(i * lambda) * sin(theta / 2)"],["exp(i * phi) * sin(theta / 2)","exp(i * lambda + i * phi) * cos(theta / 2)"]],array:"[[np.cos(p_theta/2), -np.exp(1j*p_lambda)*np.sin(p_theta/2)], [np.exp(1j*p_phi)*np.sin(p_theta/2), np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]",params:["theta","phi","lambda"]}}},s:{description:"PI/2 rotation over Z-axis (synonym for `r2`)",matrix:[[1,0],[0,"i"]],params:[],drawingInfo:{connectors:["box"],label:"S"},exportInfo:{quil:{name:"S"},cirq:{name:"S"},quest:{name:"sGate"},qsharp:{name:"S"},quirk:{name:"Z^½"},braket:{name:"s"},aqasm:{name:"S"},ionq:{name:"s"}}},t:{description:"PI/4 rotation over Z-axis (synonym for `r4`)",matrix:[[1,0],[0,"exp(i * pi / 4)"]],params:[],drawingInfo:{connectors:["box"],label:"T"},exportInfo:{quil:{name:"T"},cirq:{name:"T"},quest:{name:"tGate"},qsharp:{name:"T"},quirk:{name:"Z^¼"},braket:{name:"t"},aqasm:{name:"T"},ionq:{name:"t"}}},sdg:{description:"(-PI/2) rotation over Z-axis",matrix:[[1,0],[0,"-i"]],params:[],drawingInfo:{connectors:["box"],label:"S&#8224;"},exportInfo:{quil:{replacement:{name:"u1",params:{lambda:"-pi/2"}}},cirq:{replacement:{name:"u1",params:{lambda:"-pi/2"}}},quest:{name:"phaseShift",params:{theta:"-M_PI/2"}},qsharp:{replacement:{name:"u1",params:{lambda:"-pi/2"}}},quirk:{name:"Z^-½"},braket:{name:"si"},aqasm:{name:"S",dagger:!0},ionq:{name:"si"}}},tdg:{description:"(-PI/4) rotation over Z-axis",matrix:[[1,0],[0,"exp(-i * pi / 4)"]],params:[],drawingInfo:{connectors:["box"],label:"T&#8224;"},exportInfo:{quil:{replacement:{name:"u1",params:{lambda:"-pi/4"}}},cirq:{replacement:{name:"u1",params:{lambda:"-pi/4"}}},quest:{name:"phaseShift",params:{theta:"-M_PI/4"}},qsharp:{replacement:{name:"u1",params:{lambda:"-pi/4"}}},quirk:{name:"Z^-¼"},braket:{name:"ti"},aqasm:{name:"T",dagger:!0},ionq:{name:"ti"}}},gpi:{description:"GPi gate",matrix:[[0,"exp(-i*phi)"],["exp(i*phi)",0]],params:["phi"],drawingInfo:{connectors:["box"],label:"GPi"},exportInfo:{quil:{name:"gpi",params:["phi"],defgate:`DEFGATE gpi(%phi):
    0, EXP(-i * %phi)
    EXP(i * %phi), 0`},pyquil:{name:"gpi",params:["phi"],array:"[ [ 0, quil_exp(-1j*p_phi) ], [ quil_exp(1j*p_phi), 0 ] ]"},cirq:{name:"gpi"},quest:{name:"gpi",func:"TODO"},qasm:{equivalent:[{name:"u3",params:{theta:"pi",phi:"phi",lambda:"pi-phi"},wires:[0]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"pi",phi:"phi",lambda:"pi-phi"},wires:[0]}]},braket:{name:"unitary",params:["phi"],array:"[ [ 0, np.exp(-1j*p_phi) ], [ np.exp(1j*p_phi), 0 ] ]"},aqasm:{matrix:[[0,"exp(-i*phi)"],["exp(i*phi)",0]],array:"[ [ 0, np.exp(-1j*p_phi) ], [ np.exp(1j*p_phi), 0 ] ]",params:["phi"]},ionq:{name:"gpi",paramsKey:"phase"}}},gpi2:{description:"GPi2 gate",matrix:[["1/sqrt(2)","(-i*exp(-i*phi))/sqrt(2)"],["(-i*exp(i*phi))/sqrt(2)","1/sqrt(2)"]],params:["phi"],drawingInfo:{connectors:["box"],label:"GPi2"},exportInfo:{quil:{name:"gpi2",params:["phi"],defgate:`DEFGATE gpi2(%phi):
    1/SQRT(2), (-i*EXP(-i * %phi)) / SQRT(2)
    (-i*EXP(i * %phi)) / SQRT(2), 1/SQRT(2)`},pyquil:{name:"gpi2",params:["phi"],array:"[ [ 1/quil_sqrt(2), (-1j*quil_exp(-1j*p_phi))/quil_sqrt(2) ], [ (-1j*quil_exp(1j*p_phi))/quil_sqrt(2), 1/quil_sqrt(2) ] ]"},cirq:{name:"gpi2"},quest:{name:"gpi2",func:"TODO"},qasm:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"phi-(pi/2)",lambda:"(pi/2)-phi"},wires:[0]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"phi-(pi/2)",lambda:"(pi/2)-phi"},wires:[0]}]},braket:{name:"unitary",params:["phi"],array:"[ [ 1/np.sqrt(2), (-1j*np.exp(-1j*p_phi))/np.sqrt(2) ], [ (-1j*np.exp(1j*p_phi))/np.sqrt(2), 1/np.sqrt(2) ] ]"},aqasm:{matrix:[["1/sqrt(2)","(-i*exp(-i*phi))/sqrt(2)"],["(-i*exp(i*phi))/sqrt(2)","1/sqrt(2)"]],array:"[ [ 1/np.sqrt(2), (-1j*np.exp(-1j*p_phi))/np.sqrt(2) ], [ (-1j*np.exp(1j*p_phi))/np.sqrt(2), 1/np.sqrt(2) ] ]",params:["phi"]},ionq:{name:"gpi2",paramsKey:"phase"}}},vz:{description:"VirtualZ gate",matrix:[["exp(-i*theta/2)",0],[0,"exp(i*theta/2)"]],params:["theta"],drawingInfo:{connectors:["box"],label:"VrtZ"},exportInfo:{quil:{name:"vz",params:["theta"],defgate:`DEFGATE vz(%theta):
    EXP(-i * %theta/2), 0
    0, EXP(-i * %theta/2)`},pyquil:{name:"vz",params:["theta"],array:"[ [ quil_exp(-1j*p_theta/2), 0 ], [ 0, quil_exp(1j*p_theta/2) ] ]"},cirq:{name:"vz"},quest:{name:"vz",func:"TODO"},qasm:{equivalent:[{name:"rz",params:{phi:"theta"},wires:[0]}]},qiskit:{equivalent:[{name:"rz",params:{phi:"theta"},wires:[0]}]},braket:{name:"unitary",params:["theta"],array:"[ [ np.exp(-1j*p_theta/2), 0 ], [ 0, np.exp(1j*p_theta/2) ] ]"},aqasm:{matrix:[["exp(-i*theta/2)",0],[0,"exp(i*theta/2)"]],array:"[ [ np.exp(-1j*p_theta/2), 0 ], [ 0, np.exp(1j*p_theta/2) ] ]",params:["theta"]},ionq:{name:"vz",paramsKey:"phase"}}},cx:{description:"Controlled NOT (CNOT) gate",matrix:[[1,0,0,0],[0,1,0,0],[0,0,0,1],[0,0,1,0]],numTargetQubits:1,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","not"],label:"X",root:"x"},exportInfo:{quil:{name:"CNOT"},cirq:{name:"CNOT"},quest:{name:"controlledNot"},qsharp:{name:"CNOT"},quirk:{name:"X",controlled:!0},braket:{name:"cnot"},aqasm:{name:"CNOT"},ionq:{name:"cnot"}}},cy:{description:"Controlled Y gate (controlled rotation over Y-axis by PI)",matrix:[[1,0,0,0],[0,1,0,0],[0,0,0,"-i"],[0,0,"i",0]],numTargetQubits:1,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","box"],label:"Y",root:"y"},exportInfo:{quest:{name:"controlledPauliY"},cirq:{replacement:{name:"y",type:"controlled",notTfqSupported:!0}},quil:{name:"cy",defgate:`DEFGATE cy:
    1, 0, 0, 0
    0, 1, 0, 0
    0, 0, 0, -i
    0, 0, i, 0`},pyquil:{name:"cy",array:"[[1,0,0,0],[0,1,0,0],[0,0,0,-1j],[0,0,1j,0]]"},qsharp:{name:"Controlled Y"},quirk:{name:"Y",controlled:!0},braket:{name:"cy"},aqasm:{name:"Y",controlled:!0}}},cz:{description:"Controlled Z gate (controlled rotation over Z-axis by PI)",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,-1]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","dot"],label:"Z",root:"z"},exportInfo:{quil:{name:"CZ"},cirq:{name:"CZ"},quest:{name:"controlledPhaseFlip"},qsharp:{name:"Controlled Z"},quirk:{name:"Z",controlled:!0},braket:{name:"cz"},aqasm:{name:"CSIGN"}}},ch:{description:"Controlled Hadamard gate",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"1 / sqrt(2)","1 / sqrt(2)"],[0,0,"1 / sqrt(2)","-1 / sqrt(2)"]],numTargetQubits:1,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","box"],label:"H",root:"h"},exportInfo:{quest:{name:"controlledUnitary",matrix:[[["1/sqrt(2)","0"],["1/sqrt(2)","0"]],[["1/sqrt(2)","0"],["-1/sqrt(2)","0"]]]},cirq:{replacement:{name:"h",type:"controlled",notTfqSupported:!0}},quil:{name:"ch",defgate:`DEFGATE ch:
    1, 0, 0, 0
    0, 1, 0, 0
    0, 0, 0.7071067811865475, 0.7071067811865475
    0, 0, 0.7071067811865475, -0.7071067811865475`},pyquil:{name:"ch",array:"[[1,0,0,0],[0,1,0,0],[0,0,1/np.sqrt(2),1/np.sqrt(2)],[0,0,1/np.sqrt(2),-1/np.sqrt(2)]]"},qsharp:{name:"Controlled H"},quirk:{name:"H",controlled:!0},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0,0,1/np.sqrt(2),1/np.sqrt(2)],[0,0,1/np.sqrt(2),-1/np.sqrt(2)]]"},aqasm:{name:"H",controlled:!0}}},csrn:{description:"Controlled square root of NOT",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"0.5+0.5i","0.5-0.5i"],[0,0,"0.5-0.5i","0.5+0.5i"]],numTargetQubits:1,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","box"],label:"&#x221A;X",root:"srn"},exportInfo:{quest:{name:"controlledUnitary",matrix:[[["-1/sqrt(2)","0"],["-1/sqrt(2)","0"]],[["-1/sqrt(2)","0"],["1/sqrt(2)","0"]]]},cirq:{replacement:{name:"srn",type:"controlled",notTfqSupported:!0}},quil:{name:"csrn",defgate:`DEFGATE csrn:
    1, 0, 0, 0
    0, 1, 0, 0
    0, 0, 0.5+0.5i, 0.5-0.5i
    0, 0, 0.5-0.5i, 0.5+0.5i`},qasm:{name:"csx"},qiskit:{name:"csx"},pyquil:{name:"csrn",array:"[[1,0,0,0],[0,1,0,0],[0,0,0.5+0.5j,0.5-0.5j],[0,0,0.5-0.5j,0.5+0.5j]]"},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0,0,0.5+0.5j,0.5-0.5j],[0,0,0.5-0.5j,0.5+0.5j]]"},aqasm:{matrix:[[1,0,0,0],[0,1,0,0],[0,0,"0.5+0.5i","0.5-0.5i"],[0,0,"0.5-0.5i","0.5+0.5i"]],array:"[[1,0,0,0],[0,1,0,0],[0,0,0.5+0.5j,0.5-0.5j],[0,0,0.5-0.5j,0.5+0.5j]]"}}},swap:{description:"Swaps the state of two qubits.",matrix:[[1,0,0,0],[0,0,1,0],[0,1,0,0],[0,0,0,1]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["x","x"],label:"SWP"},exportInfo:{quil:{name:"SWAP"},cirq:{name:"SWAP"},quest:{name:"swap",func:`void swap(Qureg qubits, const int q1, const int q2) {
    controlledNot(qubits, q1, q2);
    controlledNot(qubits, q2, q1);
    controlledNot(qubits, q1, q2);
}`},qsharp:{name:"SWAP"},quirk:{name:"Swap"},braket:{name:"swap"},aqasm:{name:"SWAP"},ionq:{name:"swap"}}},srswap:{description:"Square root of swap",matrix:[[1,0,0,0],[0,"0.5 * (1 + i)","0.5 * (1 - i)",0],[0,"0.5 * (1 - i)","0.5 * (1 + i)",0],[0,0,0,1]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["box","box"],label:"&#x221A;SWP"},exportInfo:{quil:{name:"srswap",defgate:`DEFGATE srswap:
    1, 0, 0, 0
    0, 0.5+0.5i, 0.5-0.5i, 0
    0, 0.5-0.5i, 0.5+0.5i, 0
    0, 0, 0, 1`},cirq:{name:"SWAP**(1/2)"},pyquil:{name:"srswap",array:"[[1,0,0,0],[0,0.5 * (1 + 1j),0.5 * (1 - 1j),0],[0,0.5 * (1 - 1j),0.5 * (1 + 1j),0],[0,0,0,1]]"},quest:{name:"srswap",func:`void srswap(Qureg qubits, const int q1, const int q2) {
    controlledNot(qubits, q2, q1);
    rotateY(qubits, q2, M_PI/2);
    rotateZ(qubits, q2, M_PI/16);
    controlledNot(qubits, q1, q2);
    rotateZ(qubits, q1, M_PI/8);
    rotateZ(qubits, q2, -M_PI/8);
    controlledNot(qubits, q1, q2);
    rotateZ(qubits, q2, M_PI/16);
    rotateY(qubits, q2, -M_PI/2);
    controlledNot(qubits, q2, q1);
}`},qasm:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi/2",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"7*pi/4"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi",lambda:"pi/2"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"-3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"0"},wires:[1]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi/2",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"7*pi/4"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/4",phi:"-1*pi",lambda:"-1*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi",lambda:"pi/2"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"-3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"pi/2",lambda:"0"},wires:[1]}]},braket:{name:"unitary",array:"[[1,0,0,0],[0,0.5 * (1 + 1j),0.5 * (1 - 1j),0],[0,0.5 * (1 - 1j),0.5 * (1 + 1j),0],[0,0,0,1]]"},aqasm:{name:"SQRTSWAP"}}},iswap:{description:"Swaps the state of two qubits, applying a -i phase to q1 when it is in the 1 state and a -i phase to q2 when it is in the 0 state",matrix:[[1,0,0,0],[0,0,"0+i",0],[0,"0+i",0,0],[0,0,0,1]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["box","box"],label:"iSWP"},exportInfo:{quil:{name:"ISWAP"},cirq:{name:"ISWAP"},qasm:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"3*pi/2",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"0"},wires:[0]},{name:"u3",params:{theta:"pi",phi:"pi/4",lambda:"-1*pi/4"},wires:[1]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"-1*pi"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"-1*pi/2",lambda:"pi"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"3*pi/2"},wires:[0]},{name:"u3",params:{theta:"pi/2",phi:"3*pi/2",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"pi/2",phi:"0",lambda:"0"},wires:[0]},{name:"u3",params:{theta:"pi",phi:"pi/4",lambda:"-1*pi/4"},wires:[1]}]},braket:{name:"iswap"},aqasm:{name:"ISWAP"}}},xx:{description:"XX gate",matrix:[["cos(theta)",0,0,"-i*sin(theta)"],[0,"cos(theta)","-i*sin(theta)",0],[0,"-i*sin(theta)","cos(theta)",0],["-i*sin(theta)",0,0,"cos(theta)"]],numTargetQubits:2,numControlQubits:0,params:["theta"],drawingInfo:{connectors:["box","box"],label:"XX"},exportInfo:{quil:{name:"xx",params:["theta"],defgate:`DEFGATE xx(%theta):
    COS(%theta), 0, 0, -i*SIN(%theta)
    0, COS(%theta), -i*SIN(%theta), 0
    0, -i*SIN(%theta), COS(%theta), 0
    -i*SIN(%theta), 0, 0, COS(%theta)`},pyquil:{name:"xx",params:["theta"],array:"[ [quil_cos(p_theta), 0, 0, -1j*quil_sin(p_theta)], [0, quil_cos(p_theta), -1j*quil_sin(p_theta), 0], [0, -1j*quil_sin(p_theta), quil_cos(p_theta), 0], [-1j*quil_sin(p_theta), 0, 0, quil_cos(p_theta)] ]"},cirq:{name:"xx"},quest:{name:"xx",func:"TODO"},qasm:{name:"rxx"},qiskit:{name:"rxx"},braket:{name:"unitary",params:["theta"],array:"[[np.cos(p_theta), 0, 0, -1j*np.sin(p_theta)], [0, np.cos(p_theta), -1j*np.sin(p_theta), 0], [0, -1j*np.sin(p_theta), np.cos(p_theta), 0], [-1j*np.sin(p_theta), 0, 0, np.cos(p_theta)] ]"},aqasm:{matrix:[["cos(theta)",0,0,"-i*sin(theta)"],[0,"cos(theta)","-i*sin(theta)",0],[0,"-i*sin(theta)","cos(theta)",0],["-i*sin(theta)",0,0,"cos(theta)"]],array:"[[np.cos(p_theta), 0, 0, -1j*np.sin(p_theta)], [0, np.cos(p_theta), -1j*np.sin(p_theta), 0], [0, -1j*np.sin(p_theta), np.cos(p_theta), 0], [-1j*np.sin(p_theta), 0, 0, np.cos(p_theta)] ]",params:["theta"]},ionq:{name:"xx",paramsKey:"phase"}}},yy:{description:"YY gate",matrix:[["cos(theta)",0,0,"i*sin(theta)"],[0,"cos(theta)","-i*sin(theta)",0],[0,"-i*sin(theta)","cos(theta)",0],["i*sin(theta)",0,0,"cos(theta)"]],numTargetQubits:2,numControlQubits:0,params:["theta"],drawingInfo:{connectors:["box","box"],label:"YY"},exportInfo:{quil:{name:"yy",params:["theta"],defgate:`DEFGATE yy(%theta):
    COS(%theta), 0, 0, i*SIN(%theta)
    0, COS(%theta), -i*SIN(%theta), 0
    0, -i*SIN(%theta), COS(%theta), 0
    i*SIN(%theta), 0, 0, COS(%theta)`},cirq:{name:"YY"},pyquil:{name:"yy",params:["theta"],array:"[ [quil_cos(p_theta), 0, 0, 1j*quil_sin(p_theta)], [0, quil_cos(p_theta), -1j*quil_sin(p_theta), 0], [0, -1j*quil_sin(p_theta), quil_cos(p_theta), 0], [1j*quil_sin(p_theta), 0, 0, quil_cos(p_theta)] ]"},quest:{name:"yy",func:"TODO"},braket:{name:"yy",params:["theta"]},aqasm:{matrix:[["cos(theta)",0,0,"i*sin(theta)"],[0,"cos(theta)","-i*sin(theta)",0],[0,"-i*sin(theta)","cos(theta)",0],["i*sin(theta)",0,0,"cos(theta)"]],array:"[[np.cos(p_theta), 0, 0, 1j*np.sin(p_theta)], [0, np.cos(p_theta), -1j*np.sin(p_theta), 0], [0, -1j*np.sin(p_theta), np.cos(p_theta), 0], [1j*np.sin(p_theta), 0, 0, np.cos(p_theta)] ]",params:["theta"]},qasm:{name:"ryy"},qiskit:{name:"ryy"},ionq:{name:"yy",paramsKey:"phase"}}},zz:{description:"Parametric 2-qubit rotation about ZZ",matrix:[["exp(-i * theta / 2)",0,0,0],[0,"exp(i * theta / 2)",0,0],[0,0,"exp(i * theta / 2)",0],[0,0,0,"exp(-i * theta / 2)"]],numTargetQubits:2,numControlQubits:0,params:["theta"],drawingInfo:{connectors:["box","box"],label:"ZZ"},exportInfo:{quil:{name:"zz",params:["theta"],defgate:`DEFGATE zz(%theta):
    EXP(-i * %theta / 2), 0, 0, 0
    0, EXP(i * %theta / 2), 0, 0
    0, 0, EXP(i * %theta / 2), 0
    0, 0, 0, EXP(-i * %theta / 2)`},pyquil:{name:"zz",params:["theta"],array:"[ [ quil_exp(-1j * p_theta / 2), 0, 0, 0 ], [ 0, quil_exp(1j * p_theta / 2), 0, 0], [ 0, 0, quil_exp(1j * p_theta / 2), 0 ], [ 0, 0, 0, quil_exp(-1j * p_theta / 2) ] ]"},qasm:{name:"rzz"},qiskit:{name:"rzz"},ionq:{name:"zz",paramsKey:"phase"}}},xy:{description:"XY gate",matrix:[[1,0,0,0],[0,"cos(phi / 2)","i * sin(phi / 2)",0],[0,"i * sin(phi / 2)","cos(phi / 2)",0],[0,0,0,1]],numTargetQubits:2,numControlQubits:0,params:["phi"],drawingInfo:{connectors:["box","box"],label:"XY"},exportInfo:{quil:{name:"XY",params:["phi"]},qasm:{equivalent:[{name:"rz",params:{phi:"3*pi/4"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"-3*pi/4"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"phi/2"},wires:[0]},{name:"rx",params:{theta:"-1*pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/2"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"rz",params:{phi:"phi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/4"},wires:[0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"rz",params:{phi:"3*pi/4"},wires:[1]}]},qiskit:{equivalent:[{name:"rz",params:{phi:"3*pi/4"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"-3*pi/4"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"phi/2"},wires:[0]},{name:"rx",params:{theta:"-1*pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/2"},wires:[1]},{name:"rx",params:{theta:"pi/2"},wires:[1]},{name:"rz",params:{phi:"phi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"cz",wires:[1,0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[0]},{name:"rx",params:{theta:"pi/2"},wires:[0]},{name:"rz",params:{phi:"pi/4"},wires:[0]},{name:"rz",params:{phi:"-1*pi/2"},wires:[1]},{name:"rx",params:{theta:"-1*pi/2"},wires:[1]},{name:"rz",params:{phi:"3*pi/4"},wires:[1]}]},cirq:{name:"xy",params:["phi"],array:"[[1, 0, 0, 0], [0, np.cos(p_phi/2), 1j*np.sin(p_phi/2), 0], [0, 1j*np.sin(p_phi/2), np.cos(p_phi/2), 0], [0, 0, 0, 1]]",notTfqSupported:!0},braket:{name:"xy",params:["phi"]},aqasm:{matrix:[[1,0,0,0],[0,"cos(phi / 2)","i * sin(phi / 2)",0],[0,"i * sin(phi / 2)","cos(phi / 2)",0],[0,0,0,1]],array:"[[1, 0, 0, 0], [0, np.cos(p_phi/2), 1j*np.sin(p_phi/2), 0], [0, 1j*np.sin(p_phi/2), np.cos(p_phi/2), 0], [0, 0, 0, 1]]",params:["phi"]}}},ms:{description:"Mølmer-Sørensen gate",matrix:[["1/sqrt(2)",0,0,"(-i*exp(-i*(phi0+phi1)))/sqrt(2)"],[0,"1/sqrt(2)","(-i*exp(-i*(phi0-phi1)))/sqrt(2)",0],[0,"(-i*exp(i*(phi0-phi1)))/sqrt(2)","1/sqrt(2)",0],["(-i*exp(i*(phi0+phi1)))/sqrt(2)",0,0,"1/sqrt(2)"]],numTargetQubits:2,numControlQubits:0,params:["phi0","phi1"],drawingInfo:{connectors:["box","box"],label:"MS"},exportInfo:{quil:{name:"ms",params:["phi0","phi1"],defgate:`DEFGATE ms(%phi0, %phi1):
    1/SQRT(2), 0, 0, (-i*EXP(-i*(%phi0+%phi1)))/SQRT(2)
    0, 1/SQRT(2), (-i*EXP(-i*(%phi0-%phi1)))/SQRT(2), 0
    0, (-i*EXP(i*(%phi0-%phi1)))/SQRT(2), 1/SQRT(2), 0
    (-i*EXP(i*(%phi0+%phi1)))/SQRT(2), 0, 0, 1/SQRT(2)`},pyquil:{name:"ms",params:["phi0","phi1"],array:"[ [ 1/quil_sqrt(2), 0, 0, (-1j*quil_exp(-1j*(p_phi0+p_phi1)))/quil_sqrt(2) ], [ 0, 1/quil_sqrt(2), (-1j*quil_exp(-1j*(p_phi0-p_phi1)))/quil_sqrt(2), 0 ], [ 0, (-1j*quil_exp(1j*(p_phi0-p_phi1)))/quil_sqrt(2), 1/quil_sqrt(2), 0 ], [ (-1j*quil_exp(1j*(p_phi0+p_phi1)))/quil_sqrt(2), 0, 0, 1/quil_sqrt(2) ] ]"},cirq:{name:"ms"},quest:{name:"ms",func:"TODO"},qasm:{name:"ms"},qiskit:{name:"ms"},braket:{name:"unitary",params:["phi0","phi1"],array:"[ [ 1/np.sqrt(2), 0, 0, (-1j*np.exp(-1j*(p_phi0+p_phi1)))/np.sqrt(2) ], [ 0, 1/np.sqrt(2), (-1j*np.exp(-1j*(p_phi0-p_phi1)))/np.sqrt(2), 0 ], [ 0, (-1j*np.exp(1j*(p_phi0-p_phi1)))/np.sqrt(2), 1/np.sqrt(2), 0 ], [ (-1j*np.exp(1j*(p_phi0+p_phi1)))/np.sqrt(2), 0, 0, 1/np.sqrt(2) ] ]"},aqasm:{matrix:[["1/sqrt(2)",0,0,"(-1i*exp(-1i*(phi0+phi1)))/sqrt(2)"],[0,"1/sqrt(2)","(-1i*exp(-1i*(phi0-phi1)))/sqrt(2)",0],[0,"(-1i*exp(1i*(phi0-phi1)))/sqrt(2)","1/sqrt(2)",0],["(-1i*exp(1i*(phi0+phi1)))/sqrt(2)",0,0,"1/sqrt(2)"]],array:"[ [ 1/np.sqrt(2), 0, 0, (-1j*np.exp(-1j*(p_phi0+p_phi1)))/np.sqrt(2) ], [ 0, 1/np.sqrt(2), (-1j*np.exp(-1j*(p_phi0-p_phi1)))/np.sqrt(2), 0 ], [ 0, (-1j*np.exp(1j*(p_phi0-p_phi1)))/np.sqrt(2), 1/np.sqrt(2), 0 ], [ (-1j*np.exp(1j*(p_phi0+p_phi1)))/np.sqrt(2), 0, 0, 1/np.sqrt(2) ] ]",params:["phi0","phi1"]},ionq:{name:"ms",paramsKey:"phases"}}},cr2:{description:"Controlled PI/2 rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 2)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"Z&#x1D6D1;/2",root:"r2"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/2"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/2"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/2"}}]},quirk:{name:"Z^½",controlled:!0},braket:{name:"unitary",array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j * np.pi / 2)] ]"},aqasm:{name:"S",controlled:!0}}},cr4:{description:"Controlled PI/4 rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 4)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"Z&#x1D6D1;/4",root:"r4"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/4"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/4"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/4"}}]},quirk:{name:"Z^¼",controlled:!0},braket:{name:"unitary",array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j * np.pi / 4)] ]"},aqasm:{name:"T",controlled:!0}}},cr8:{description:"Controlled PI/8 rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 8)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"Z&#x1D6D1;/8",root:"r8"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/8"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/8"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/8"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/8"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/8"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/8"}}]},quirk:{name:"Z^⅛",controlled:!0},braket:{name:"unitary",array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j * np.pi / 8)] ]"},aqasm:{matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 8)"]],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j * np.pi / 8)] ]"}}},crx:{description:"Controlled rotation around the X-axis by given angle",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(theta / 2)","-i * sin(theta / 2)"],[0,0,"-i * sin(theta / 2)","cos(theta / 2)"]],numTargetQubits:1,numControlQubits:1,params:["theta"],drawingInfo:{connectors:["dot","box"],label:"RX",root:"rx"},exportInfo:{quil:{name:"crx",params:["theta"],defgate:`DEFGATE crx(%theta):
    1, 0, 0, 0
    0, 1, 0, 0
    0, 0, COS(%theta/2), -i*SIN(%theta/2)
    0, 0, -i*SIN(%theta/2), COS(%theta/2)`},cirq:{replacement:{name:"rx",params:{theta:"theta"},type:"controlled",notTfqSupported:!0}},pyquil:{name:"crx",params:["theta"],array:"[[ 1, 0, 0, 0 ], [ 0, 1, 0, 0 ], [ 0, 0, quil_cos(p_theta / 2), -1j*quil_sin(p_theta / 2) ], [ 0, 0, -1j*quil_sin(p_theta / 2), quil_cos(p_theta / 2) ]]"},quest:{name:"controlledUnitary",params:["theta"],matrix:[[["cos(theta/2)","0"],["0","-sin(theta/2)"]],[["0","-sin(theta/2)"],["cos(theta/2)","0"]]]},qsharp:{name:"Controlled Rx",params:["theta"]},qasm:{replacement:[{name:"cu3",params:{theta:"theta",phi:"-1*pi/2",lambda:"pi/2"}}]},qiskit:{replacement:[{name:"cu3",params:{theta:"theta",phi:"-1*pi/2",lambda:"pi/2"}}]},braket:{name:"unitary",params:["theta"],array:"[[ 1, 0, 0, 0 ], [ 0, 1, 0, 0 ], [ 0, 0, np.cos(p_theta / 2), -1j*np.sin(p_theta / 2) ], [ 0, 0, -1j*np.sin(p_theta / 2), np.cos(p_theta / 2) ]]"},aqasm:{name:"RX",controlled:!0}}},cry:{description:"Controlled rotation around the Y-axis by given angle",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(theta / 2)","-1 * sin(theta / 2)"],[0,0,"sin(theta / 2)","cos(theta / 2)"]],numTargetQubits:1,numControlQubits:1,params:["theta"],drawingInfo:{connectors:["dot","box"],label:"RY",root:"ry"},exportInfo:{quil:{name:"cry",params:["theta"],defgate:`DEFGATE cry(%theta):
    1, 0, 0, 0
    0, 1, 0, 0
    0, 0, COS(%theta/2), -1*SIN(%theta/2)
    0, 0, SIN(%theta/2), COS(%theta/2)`},cirq:{replacement:{name:"ry",params:{theta:"theta"},type:"controlled",notTfqSupported:!0}},pyquil:{name:"cry",params:["theta"],array:"[[ 1, 0, 0, 0 ],[ 0, 1, 0, 0 ],[ 0, 0, quil_cos(p_theta / 2), -1*quil_sin(p_theta / 2) ],[ 0, 0, quil_sin(p_theta / 2), quil_cos(p_theta / 2) ]]"},quest:{name:"controlledUnitary",params:["theta"],matrix:[[["cos(theta/2)","0"],["-sin(theta/2)","0"]],[["sin(theta/2)","0"],["cos(theta/2)","0"]]]},qsharp:{name:"Controlled Ry",params:["theta"]},qasm:{equivalent:[{name:"u3",params:{theta:"theta/2",phi:"0",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"-1*theta / 2",phi:"0",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]}]},qiskit:{equivalent:[{name:"u3",params:{theta:"theta/2",phi:"0",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]},{name:"u3",params:{theta:"-1*theta / 2",phi:"0",lambda:"0"},wires:[1]},{name:"cx",wires:[0,1]}]},braket:{name:"unitary",params:["theta"],array:"[[ 1, 0, 0, 0 ],[ 0, 1, 0, 0 ],[ 0, 0, np.cos(p_theta / 2), -1*np.sin(p_theta / 2) ],[ 0, 0, np.sin(p_theta / 2), np.cos(p_theta / 2) ]]"},aqasm:{name:"RY",controlled:!0}}},crz:{description:"Controlled rotation around the Z-axis by given angle",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(phi / 2) - i * sin(phi / 2)",0],[0,0,0,"cos(phi / 2) + i * sin(phi / 2)"]],numTargetQubits:1,numControlQubits:1,params:["phi"],drawingInfo:{connectors:["dot","dot"],label:"RZ",root:"rz"},exportInfo:{quil:{name:"crz",params:["phi"],defgate:`DEFGATE crz(%phi):
    1, 0, 0, 0
    0, 1, 0, 0
    0, 0, COS(%phi / 2) - i * SIN(%phi / 2), 0
    0, 0, 0, COS(%phi / 2) + i * SIN(%phi / 2)`},pyquil:{name:"crz",params:["phi"],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, quil_cos(p_phi / 2) - 1j * quil_sin(p_phi / 2), 0], [0, 0, 0, quil_cos(p_phi / 2) + 1j * quil_sin(p_phi / 2)]]"},cirq:{replacement:{name:"rz",params:{phi:"phi"},type:"controlled"}},quest:{name:"controlledRotateZ",params:["theta"]},qsharp:{name:"Controlled Rz",params:["phi"]},braket:{name:"unitary",params:["phi"],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, np.cos(p_phi / 2) - 1j * np.sin(p_phi / 2), 0], [0, 0, 0, np.cos(p_phi / 2) + 1j * np.sin(p_phi / 2)]]"},aqasm:{name:"RZ",controlled:!0}}},cu1:{description:"Controlled rotation about the Z axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * lambda)"]],numTargetQubits:2,numControlQubits:0,params:["lambda"],drawingInfo:{connectors:["dot","box"],label:"CU1",root:"u1"},exportInfo:{quil:{name:"CPHASE",params:["lambda"]},cirq:{name:"cu1",params:["lambda"],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j*p_lambda)]]",notTfqSupported:!0},quest:{name:"controlledPhaseShift",params:["theta"]},braket:{name:"unitary",params:["lambda"],array:"[[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, np.exp(1j*p_lambda)]]"},aqasm:{name:"PH",controlled:!0},qiskit:{name:"cp"}}},cu2:{description:"Controlled rotation about the X+Z axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"1 / sqrt(2)","-exp(i * lambda) * 1 / sqrt(2)"],[0,0,"exp(i * phi) * 1 / sqrt(2)","exp(i * lambda + i * phi) * 1 / sqrt(2)"]],numTargetQubits:1,numControlQubits:1,params:["phi","lambda"],drawingInfo:{connectors:["dot","box"],label:"CU2",root:"u2"},exportInfo:{quil:{name:"cu2",params:["phi","lambda"],defgate:`DEFGATE cu2(%phi, %lambda):
    1, 0, 0, 0
    0, 1, 0, 0
    0, 0, 1/SQRT(2), -1*EXP(i*%lambda)*1/SQRT(2)
    0, 0, EXP(i*%phi)*1/SQRT(2), EXP(i*%lambda + i*%phi)*1/SQRT(2)`},pyquil:{name:"cu2",params:["phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1/quil_sqrt(2), -quil_exp(1j*p_lambda)*1/quil_sqrt(2)],[0, 0, quil_exp(1j*p_phi)*1/quil_sqrt(2), quil_exp(1j*p_lambda+1j*p_phi)*1/quil_sqrt(2)]]"},cirq:{name:"cu2",params:["phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)],[0, 0, np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]",notTfqSupported:!0},quest:{name:"controlledUnitary",params:["phi","lambda"],matrix:[[["1/sqrt(2)","0"],["-cos(lambda)/sqrt(2)","-sin(lambda)/sqrt(2)"]],[["cos(phi)/sqrt(2)","sin(phi)/sqrt(2)"],["cos(lambda+phi)/sqrt(2)","sin(lambda+phi)/sqrt(2)"]]]},qasm:{replacement:[{name:"cu3",params:{theta:"pi/2",phi:"phi",lambda:"lambda"}}]},qiskit:{replacement:[{name:"cu3",params:{theta:"pi/2",phi:"phi",lambda:"lambda"}}]},braket:{name:"unitary",params:["phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)],[0, 0, np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]"},aqasm:{matrix:[[1,0,0,0],[0,1,0,0],[0,0,"1 / sqrt(2)","-exp(i * lambda) * 1 / sqrt(2)"],[0,0,"exp(i * phi) * 1 / sqrt(2)","exp(i * lambda + i * phi) * 1 / sqrt(2)"]],array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1/np.sqrt(2), -np.exp(1j*p_lambda)*1/np.sqrt(2)],[0, 0, np.exp(1j*p_phi)*1/np.sqrt(2), np.exp(1j*p_lambda+1j*p_phi)*1/np.sqrt(2)]]",params:["phi","lambda"]}}},cu3:{description:"Controlled rotation gate with 3 Euler angles",matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(theta/2)","-exp(i * lambda) * sin(theta / 2)"],[0,0,"exp(i * phi) * sin(theta / 2)","exp(i * lambda + i * phi) * cos(theta / 2)"]],numTargetQubits:1,numControlQubits:1,params:["theta","phi","lambda"],drawingInfo:{connectors:["dot","box"],label:"CU3",root:"u3"},exportInfo:{quil:{name:"cu3",params:["theta","phi","lambda"],defgate:`DEFGATE cu3(%theta, %phi, %lambda):
    1, 0, 0, 0
    0, 1, 0, 0
    0, 0, COS(%theta/2), -1*EXP(i*%lambda)*SIN(%theta/2)
    0, 0, EXP(i*%phi)*SIN(%theta/2), EXP(i*%lambda + i*%phi)*COS(%theta/2)`},pyquil:{name:"cu3",params:["theta","phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, quil_cos(p_theta/2),-quil_exp(1j*p_lambda)*quil_sin(p_theta/2)],[0, 0, quil_exp(1j*p_phi)*quil_sin(p_theta/2),quil_exp(1j*p_lambda+1j*p_phi)*quil_cos(p_theta/2)]]"},cirq:{name:"cu3",params:["theta","phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, np.cos(p_theta/2),-np.exp(1j*p_lambda)*np.sin(p_theta/2)],[0, 0, np.exp(1j*p_phi)*np.sin(p_theta/2),np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]",notTfqSupported:!0},quest:{name:"controlledUnitary",params:["theta","phi","lambda"],matrix:[[["cos(theta/2)","0"],["-cos(lambda)*sin(theta/2)","-sin(lambda)*sin(theta/2)"]],[["cos(phi)*sin(theta/2)","sin(phi)*sin(theta/2)"],["cos(lambda+phi)*cos(theta/2)","sin(lambda+phi)*cos(theta/2)"]]]},braket:{name:"unitary",params:["theta","phi","lambda"],array:"[[1,0,0,0],[0,1,0,0],[0, 0, np.cos(p_theta/2),-np.exp(1j*p_lambda)*np.sin(p_theta/2)],[0, 0, np.exp(1j*p_phi)*np.sin(p_theta/2),np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]"},aqasm:{matrix:[[1,0,0,0],[0,1,0,0],[0,0,"cos(theta/2)","-exp(i * lambda) * sin(theta / 2)"],[0,0,"exp(i * phi) * sin(theta / 2)","exp(i * lambda + i * phi) * cos(theta / 2)"]],array:"[[1,0,0,0],[0,1,0,0],[0, 0, np.cos(p_theta/2),-np.exp(1j*p_lambda)*np.sin(p_theta/2)],[0, 0, np.exp(1j*p_phi)*np.sin(p_theta/2),np.exp(1j*p_lambda+1j*p_phi)*np.cos(p_theta/2)]]",params:["theta","phi","lambda"]},qiskit:{name:"cu"}}},cs:{description:"Controlled PI/2 rotation over Z-axis (synonym for `cr2`)",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"i"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"S",root:"s"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/2"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/2"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/2"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/2"}}]},quirk:{name:"Z^½",controlled:!0},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1, 0],[0, 0, 0, np.exp(1j * np.pi / 2)]]"},aqasm:{name:"S",controlled:!0}}},ct:{description:"Controlled PI/4 rotation over Z-axis (synonym for `cr4`)",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(i * pi / 4)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"T",root:"t"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},cirq:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},quest:{name:"controlledPhaseShift",params:{theta:"M_PI/4"}},qsharp:{replacement:{name:"cu1",params:{lambda:"pi/4"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"pi/4"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"pi/4"}}]},quirk:{name:"Z^¼",controlled:!0},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1, 0],[0, 0, 0, np.exp(1j * np.pi / 4)]]"},aqasm:{name:"T",controlled:!0}}},csdg:{description:"Controlled (-PI/2) rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"-i"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"S&#8224;",root:"sdg"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"-pi/2"}}},cirq:{replacement:{name:"cu1",params:{lambda:"-pi/2"}}},quest:{name:"controlledPhaseShift",params:{theta:"-M_PI/2"}},qsharp:{replacement:{name:"cu1",params:{lambda:"-pi/2"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"-1*pi/2"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"-1*pi/2"}}]},quirk:{name:"Z^-½",controlled:!0},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1, 0],[0, 0, 0, np.exp(-1j * np.pi / 2)]]"},aqasm:{name:"S",controlled:!0,dagger:!0}}},ctdg:{description:"Controlled (-PI/4) rotation over Z-axis",matrix:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,"exp(-i * pi / 4)"]],numTargetQubits:2,numControlQubits:0,params:[],drawingInfo:{connectors:["dot","box"],label:"T&#8224;",root:"tdg"},exportInfo:{quil:{replacement:{name:"cu1",params:{lambda:"-pi/4"}}},cirq:{replacement:{name:"cu1",params:{lambda:"-pi/4"}}},quest:{name:"controlledPhaseShift",params:{theta:"-M_PI/4"}},qsharp:{replacement:{name:"cu1",params:{lambda:"-pi/4"}}},qasm:{replacement:[{name:"cu1",params:{lambda:"-1*pi/4"}}]},qiskit:{replacement:[{name:"cu1",params:{lambda:"-1*pi/4"}}]},quirk:{name:"Z^-¼",controlled:!0},braket:{name:"unitary",array:"[[1,0,0,0],[0,1,0,0],[0, 0, 1, 0],[0, 0, 0, np.exp(-1j * np.pi / 4)]]"},aqasm:{name:"T",controlled:!0,dagger:!0}}},ccx:{description:'Toffoli aka "CCNOT" gate',matrix:[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,0]],numTargetQubits:1,numControlQubits:2,params:[],drawingInfo:{connectors:["dot","dot","not"],label:"CCNOT",root:"x"},exportInfo:{quil:{name:"CCNOT"},cirq:{name:"CCX",notTfqSupported:!0},quest:{name:"ccx",func:`void ccx(Qureg qubits, const int q1, const int q2, const int q3) {
    hadamard(qubits, q3);
    controlledNot(qubits, q2, q3);
    phaseShift(qubits, q3, -M_PI/4);
    controlledNot(qubits, q1, q3);
    tGate(qubits, q3);
    controlledNot(qubits, q2, q3);
    phaseShift(qubits, q3, -M_PI/4);
    controlledNot(qubits, q1, q3);
    tGate(qubits, q2);
    tGate(qubits, q3);
    controlledNot(qubits, q1, q2);
    hadamard(qubits, q3);
    tGate(qubits, q1);
    phaseShift(qubits, q2, -M_PI/4);
    controlledNot(qubits, q1, q2);
}`},qsharp:{name:"CCNOT"},quirk:{name:"X",controlled:!0},braket:{name:"ccnot"},aqasm:{name:"CCNOT"}}},cswap:{description:'Controlled swap aka "Fredkin" gate',matrix:[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,1,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,1]],numTargetQubits:2,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","x","x"],label:"SWP",root:"swap"},exportInfo:{cirq:{name:"CSWAP"},quest:{name:"cswap",func:`void cswap(Qureg qubits, const int q1, const int q2, const int q3) {
    controlledNot(qubits, q3, q2);
    hadamard(qubits, q3);
    controlledNot(qubits, q2, q3);
    phaseShift(qubits, q3, -M_PI/4);
    controlledNot(qubits, q1, q3);
    tGate(qubits, q3);
    controlledNot(qubits, q2, q3);
    phaseShift(qubits, q3, -M_PI/4);
    controlledNot(qubits, q1, q3);
    tGate(qubits, q2);
    tGate(qubits, q3);
    hadamard(qubits, q3);
    controlledNot(qubits, q1, q2);
    tGate(qubits, q1);
    phaseShift(qubits, q2, -M_PI/4);
    controlledNot(qubits, q2, q3);
    controlledNot(qubits, q3, q2);
}`},qsharp:{name:"Controlled SWAP"},quil:{name:"CSWAP"},pyquil:{name:"CSWAP"},quirk:{name:"Swap",controlled:!0},braket:{name:"unitary",array:"[[1,0,0,0,0,0,0,0], [0,1,0,0,0,0,0,0], [0,0,1,0,0,0,0,0], [0,0,0,1,0,0,0,0], [0,0,0,0,1,0,0,0], [0,0,0,0,0,0,1,0], [0,0,0,0,0,1,0,0], [0,0,0,0,0,0,0,1]]"},aqasm:{name:"SWAP",controlled:!0}}},csrswap:{description:"Controlled square root of swap",matrix:[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,"0.5 * (1 + i)","0.5 * (1 - i)",0],[0,0,0,0,0,"0.5 * (1 - i)","0.5 * (1 + i)",0],[0,0,0,0,0,0,0,1]],numTargetQubits:2,numControlQubits:1,params:[],drawingInfo:{connectors:["dot","box","box"],label:"&#x221A;SWP",root:"srswap"},exportInfo:{quest:{name:"csrswap",func:"TODO"},cirq:{replacement:{name:"srswap",type:"controlled",notTfqSupported:!0}},quil:{name:"csrswap",defgate:`DEFGATE csrswap:
    1, 0, 0, 0, 0, 0, 0, 0
    0, 1, 0, 0, 0, 0, 0, 0
    0, 0, 1, 0, 0, 0, 0, 0
    0, 0, 0, 1, 0, 0, 0, 0
    0, 0, 0, 0, 1, 0, 0, 0
    0, 0, 0, 0, 0, 0.5+0.5i, 0.5-0.5i, 0
    0, 0, 0, 0, 0, 0.5-0.5i, 0.5+0.5i, 0
    0, 0, 0, 0, 0, 0, 0, 1`},pyquil:{name:"csrswap",array:"[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0.5 * (1 + 1j),0.5 * (1 - 1j),0],[0,0,0,0,0,0.5 * (1 - 1j),0.5 * (1 + 1j),0],[0,0,0,0,0,0,0,1]]"},braket:{name:"unitary",array:"[[1,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0],[0,0,1,0,0,0,0,0],[0,0,0,1,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,0,0.5 * (1 + 1j),0.5 * (1 - 1j),0],[0,0,0,0,0,0.5 * (1 - 1j),0.5 * (1 + 1j),0],[0,0,0,0,0,0,0,1]]"},aqasm:{name:"SQRTSWAP",controlled:!0}}},reset:{description:"Resets qubit",matrix:[],params:[],drawingInfo:{connectors:["box"],label:"RST"},exportInfo:{quil:{name:"RESET"},cirq:{name:"reset",notTfqSupported:!0},quest:{name:"reset",func:"TODO"},qsharp:{name:"Reset"}}},measure:{description:"Measures qubit and stores chance (0 or 1) into classical bit",matrix:[],params:[],drawingInfo:{connectors:["gauge"],label:""},exportInfo:{quil:{name:"MEASURE"},cirq:{name:"measure"},quest:{name:"measure"},qsharp:{name:"M"}}}},this.init(t)};Ne.prototype.defaultHybridOptions=function(){return{optimizer:"Powell",tolerance:.001,costFunction:{python:"",javascript:""}}};Ne.prototype.defaultEncoderDecoderOptions=function(){return{inputEncoding:{type:"custom",customFunction:{python:`def custom_encoder(input_data_row, input_encoding):
    qasm = ""
    qasm += "OPENQASM 2.0;\\n"
    qasm += "include \\"qelib1.inc\\";\\n"

    # ...

    return qasm
`,javascript:`function customEncoder(inputDataRow, inputEncoding) {
    let qasm = "";
    qasm += "OPENQASM 2.0;\\n";
    qasm += "include \\"qelib1.inc\\";\\n";
    
    // ...
    
    return qasm;
}
`},qubitOffset:0,colDefs:[],data:[]},outputDecoding:{type:"custom",customFunction:{python:`def custom_decoder(counts, output_decoding):
    output_data_row = {}

    # ...
    
    return output_data_row
`,javascript:`function customDecoder(counts, outputDecoding) {
    outputDataRow = {};
    
    // ...
    
    return outputDataRow;
}
`},qubitOffset:0,colDefs:[]}}};Ne.prototype.init=function(t,e){e=e||{},this.numQubits=t||1,this.gates=[],this.partitionMap=[],this.partitionCount=0,this.partitionInfo={},this.params=[],this.options={params:{},hybrid:!1,hybridOptions:this.defaultHybridOptions(),encoderDecoder:!1,encoderDecoderOptions:this.defaultEncoderDecoderOptions()},e.keepCustomGates||(this.customGates={}),this.cregs={},this.collapsed=[],this.prob=[],this.measureResetsQubit=!1,this.reverseBitOrder=!1,this.clear()};Ne.prototype.clearGates=function(){this.gates=[];for(var t=0;t<this.numQubits;t++)this.gates.push([])};Ne.prototype.clear=function(){this.clearGates(),this.initState()};Ne.prototype.resetState=function(){this.state={},this.stateBits=0,this.partitionCache={};for(var t in this.cregs){var e=this.cregs[t].length||0;this.cregs[t]=[];for(var n=0;n<e;n++)this.cregs[t].push(0)}this.collapsed=[],this.prob=[],this.stats={duration:0}};Ne.prototype.initState=function(){this.resetState(),this.state[0]=Ce.complex(1,0)};Ne.prototype.formatComplex=function(t,e){return Dg(t.re,t.im,e)};Ne.prototype.multiplySquareMatrices=function(t,e){for(var n=t.length,r=n,a=n,s=n,o=[];r--;)for(o[r]=[],a=n;a--;)for(o[r][a]=0,s=n;s--;)t[r][s]&&e[s][a]&&(o[r][a]?o[r][a]=Ce.add(o[r][a],Ce.multiply(t[r][s],e[s][a])):o[r][a]=Ce.multiply(t[r][s],e[s][a]));return o};Ne.prototype.isIdentityMatrix=function(t,e){typeof e>"u"&&(e=14);for(var n=0;n<t.length;n++)for(var r=0;r<t.length;r++)if(Ce.round(t[n][r],e)!=(n==r?1:0))return!1;return!0};Ne.prototype.isUnitaryMatrix=function(t,e){return this.isIdentityMatrix(Ce.multiply(t,Ce.ctranspose(t)),e)};Ne.prototype.isHermitianMatrix=function(t,e){var n=this.matrixDiff(t,Ce.ctranspose(t));return n<=Ce.pow(10,-1*(e||14))};Ne.prototype.matrixDiff=function(t,e){for(var n=0,r=0,a=0;a<t.length;a++)for(var s=t[a],o=e[a],u=0;u<s.length;u++){var l=s[u],f=o[u],c=typeof l=="object"?l:Ce.complex(l),p=typeof f=="object"?f:Ce.complex(f),d=Ce.abs(Ce.subtract(c,p));n+=d,r++}var h=r?n/r:0;return h};Ne.prototype.parseMathString=function(t){var e=[],n=function(s,o){if(s.isSymbolNode){if(s.name=="j")return"i";e.indexOf(s.name)<0&&e.push(s.name)}},r=Ce.parse(t.replace(/[\t\n\r]/gm,"")),a=r.toString({handler:n});return{expression:a,variables:e,node:r}};Ne.prototype.evalMathString=function(t,e){e=e||{};var n=this.parseMathString(t),r=Ce.evaluate(n.expression,e);return r instanceof Ce.Matrix?r.toArray():r};Ne.prototype.parseMatrix=function(t,e){var n=this,r=null;typeof t=="string"?r=n.evalMathString(t,e):r=t;var a=[];return r.map(function(s,o){Array.isArray(s)?(a.push([]),s.map(function(u,l){typeof u=="string"?a[o].push(n.evalMathString(u,e)):a[o].push(u)})):typeof s=="string"?a.push(n.evalMathString(s,e)):a.push(s)}),a};Ne.prototype.matrixHasComplexElement=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n instanceof Array)for(var r=0;r<n.length;r++){var a=n[r];if(a instanceof Ce.Complex||typeof a=="object"&&(a.mathjs&&a.mathjs=="Complex"||a.type&&a.type=="Complex"))return!0}else if(n instanceof Ce.Complex||typeof n=="object"&&(n.mathjs&&n.mathjs=="Complex"||n.type&&n.type=="Complex"))return!0}return!1};Ne.prototype.matrixZeroImagToReal=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n instanceof Array)for(var r=0;r<n.length;r++){var a=n[r];(a instanceof Ce.Complex||typeof a=="object"&&(a.mathjs&&a.mathjs=="Complex"||a.type&&a.type=="Complex"))&&Ce.im(a)==0&&(t[e][r]=Ce.re(a))}else(n instanceof Ce.Complex||typeof n=="object"&&(n.mathjs&&n.mathjs=="Complex"||n.type&&n.type=="Complex"))&&Ce.im(n)==0&&(t[e]=Ce.re(n))}return t};Ne.prototype.stringifyMatrix=function(t,e){var n=this,r=t.toArray?t.toArray():t;e=e||{};var a=!1;e.fixedWidth&&(a=this.matrixHasComplexElement(r));var s="";return s+="[",r.map(function(o,u){u>0&&(s+=","),e.minify?s+=" ":s+=`
  `,o instanceof Array?(s+="[",o.map(function(l,f){f>0&&(s+=", "),l instanceof Ce.Complex?s+=n.formatComplex(l,e):typeof l=="object"&&(l.mathjs&&l.mathjs=="Complex"||l.type&&l.type=="Complex")?s+=Dg(l.re,l.im,e):typeof l=="string"?s+=l:a?s+=Dg(l,0,e):s+=Pw(l,e)}),s+="]"):o instanceof Ce.Complex?s+=n.formatComplex(o,e):typeof o=="object"&&(o.mathjs&&o.mathjs=="Complex"||o.type&&o.type=="Complex")?s+=Dg(o.re,o.im,e):typeof o=="string"?s+=o:a?s+=Dg(o,0,e):s+=Pw(o,e)}),r.length&&(e.minify?s+=" ":s+=`
`),s+="]",s};Ne.prototype.matrixRe=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(Array.isArray(r)){for(var a=[],s=0;s<r.length;s++)typeof r[s]=="object"?a.push(r[s].re):a.push(r[s]);e.push(a)}else typeof r=="object"?a.push(r.re):a.push(r)}return e};Ne.prototype.matrixIm=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(Array.isArray(r)){for(var a=[],s=0;s<r.length;s++)typeof r[s]=="object"?a.push(r[s].im):a.push(0);e.push(a)}else typeof r=="object"?a.push(r.im):a.push(0)}return e};Ne.prototype.matrixAbs=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(Array.isArray(r)){for(var a=[],s=0;s<r.length;s++)a.push(Ce.abs(r[s]));e.push(a)}else e.push(Ce.abs(r))}return e};Ne.prototype.matrixArg=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(Array.isArray(r)){for(var a=[],s=0;s<r.length;s++)a.push(Ce.arg(r[s]));e.push(a)}else e.push(Ce.arg(r))}return e};Ne.prototype.setCombinedState=function(t){for(var e={},n=0,r=0,a=0;a<t.length;a++){var s=t[a];s.wires.map(function(g){g+1>r&&(r=g+1)})}for(var o=[],a=0;a<t.length;a++){var s=t[a],u=[];s.wires.map(function(_,x){u.push({and:1<<r-1-_,or:1<<s.circuit.numQubits-1-x})}),o.push(u)}for(var l=1<<r,f=0;f<l;f++){for(var c=null,a=0;a<t.length;a++){for(var p=o[a],d=0,h=0;h<p.length;h++)f&p[h].and&&(d|=p[h].or);var s=t[a],m=s.circuit.state[d];m?c==null?c=m:c=Ce.multiply(m,c):c=Ce.complex(0,0)}c&&(c.re||c.im)&&(e[f]=c,n|=f)}if(this.resetState(),this.numQubits<r){for(this.numQubits=r;this.gates.length<this.numQubits;)this.gates.push([]);for(var v=this.numCols(),h=0;h<this.gates.length;h++)for(;this.gates[h].length<v;)this.gates[h].push(null)}this.state=e,this.stateBits=n,this.stateBits==0&&Object.keys(this.state).length==0&&(this.state[0]=Ce.complex(1,0))};Ne.prototype._setCombinedState=function(t,e,n){n=n||{};var r=t.numQubits,a=e.numQubits;if(!n.wireMap){n.wireMap={c1:[],c2:[]};for(var s=0;s<r;s++)n.wireMap.c1.push(s);for(var s=0;s<a;s++)n.wireMap.c2.push(s+r)}var o=0;n.wireMap.c1.map(function(M){M+1>o&&(o=M+1)}),n.wireMap.c2.map(function(M){M+1>o&&(o=M+1)});var u=[];n.wireMap.c1.map(function(M,A){u.push({and:1<<o-1-M,or:1<<r-1-A})});var l=[];n.wireMap.c2.map(function(M,A){l.push({and:1<<o-1-M,or:1<<a-1-A})});for(var f=0,s=0;s<o;s++)n.wireMap.c1.indexOf(s)<0&&n.wireMap.c2.indexOf(s)<0&&(f|=1<<o-1-s);for(var c={},p=0,d=1<<o,h=0;h<d;h++)if(!(h&f)){for(var m=0,s=0;s<u.length;s++)h&u[s].and&&(m|=u[s].or);for(var v=0,s=0;s<l.length;s++)h&l[s].and&&(v|=l[s].or);var g=t.state[m];if(g){var y=e.state[v];if(y){var _=Ce.multiply(g,y);(_.re||_.im)&&(c[h]=_,p|=h)}}}if(this.resetState(),this.numQubits<o){for(this.numQubits=o;this.gates.length<this.numQubits;)this.gates.push([]);for(var x=this.numCols(),s=0;s<this.gates.length;s++)for(;this.gates[s].length<x;)this.gates[s].push(null)}this.state=c,this.stateBits=p,this.stateBits==0&&Object.keys(this.state).length==0&&(this.state[0]=Ce.complex(1,0))};Ne.prototype.appendQubits=function(t){var e=new Ne(t);this._setCombinedState(this,e)};Ne.prototype.numAmplitudes=function(t){if(t){var e=0;for(var n in this.state){var r=Ce.round(this.state[n],14);(r.re||r.im)&&e++}return e}return Ce.pow(2,this.numQubits)};Ne.prototype.numCols=function(){return this.gates.length?this.gates[0].length:0};Ne.prototype.numGates=function(t){var e=null;t?(e=new Ne,e.load(this.save(!0))):e=this;for(var n=0,r=e.numCols(),a=0;a<r;a++)for(var s=0;s<e.numQubits;s++){var o=e.getGateAt(a,s);o&&o.connector==0&&n++}return n};Ne.prototype.isEmptyCell=function(t,e){if(this.gates[e]&&this.gates[e][t])return!1;for(var n=0;n<this.numQubits;n++){var r=this.getGateAt(t,n);if(r&&(r.name=="measure"||r.options&&r.options.condition&&r.options.condition.creg||Math.min.apply(null,r.wires)<e&&Math.max.apply(null,r.wires)>e))return!1}return!0};Ne.prototype.isEmptyPlace=function(t,e,n){var r=Math.min.apply(null,e),a=Math.max.apply(null,e);if(n){var s=this.numQubits-1;s>a&&(a=s)}for(var o=!0,u=r;u<=a;u++)if(!this.isEmptyCell(t,u)){o=!1;break}return o};Ne.prototype.lastNonEmptyPlace=function(t,e){var n=this.numCols(),r=!0,a=Math.min.apply(null,t),s=Math.max.apply(null,t);if(e){var o=this.numQubits-1;o>s&&(s=o)}for(;r&&n--;)for(var u=a;u<=s;u++)if(!this.isEmptyCell(n,u)){r=!1;break}return n};Ne.prototype.insertColumn=function(t){for(var e=0;e<this.numQubits;e++)this.gates[e].splice(t||0,0,null)};Ne.prototype.randomString=function(t){t=t||17;var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";e+=n.charAt(Math.floor(Math.random()*n.length)),n+="0123456789";for(var r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e};Ne.prototype.addGate=function(t,e,n,r){var a=[];if(Array.isArray(n))for(var s=0;s<n.length;s++)a.push(n[s]);else a.push(n);e<0&&(e=this.lastNonEmptyPlace(a,t=="measure"||r&&r.condition&&r.condition.creg)+1);for(var o=a.length,u=this.randomString(),l=0;l<o;l++){var f=a[l];for(f+1>this.numQubits&&(this.numQubits=f+1);this.gates.length<this.numQubits;)this.gates.push([]);var c=this.numCols();e+1>c&&(c=e+1);for(var s=0;s<this.gates.length;s++)for(;this.gates[s].length<c;)this.gates[s].push(null);var p={id:u,name:t,connector:l,options:{}};if(r&&(p.options=r,r.creg&&r.creg.name&&typeof r.creg.bit<"u")){var d=parseInt(r.creg.bit||0);isNaN(d)&&(d=0);var h=this.cregs[r.creg.name]||[],m=h.length>d?h[r.creg.bit]:0;this.setCregBit(r.creg.name,d,m)}this.gates[f][e]=p}return u};Ne.prototype.appendGate=function(t,e,n){return this.addGate(t,-1,e,n)};Ne.prototype.insertGate=function(t,e,n,r){var a=[];if(Array.isArray(n))for(var s=0;s<n.length;s++)a.push(n[s]);else a.push(n);e<0&&(e=this.lastNonEmptyPlace(a,!!t&&t=="measure"||r&&r.condition&&r.condition.creg)+1);for(var o=a.length,u=0;u<o;u++){var l=a[u];for(l+1>this.numQubits&&(this.numQubits=l+1);this.gates.length<this.numQubits;)this.gates.push([]);var f=this.numCols();e+1>f&&(f=e+1);for(var s=0;s<this.gates.length;s++)for(;this.gates[s].length<f;)this.gates[s].push(null)}this.isEmptyPlace(e,a,!!t&&t=="measure"||r&&r.condition&&r.condition.creg)||this.insertColumn(e);var c=null;return t&&(c=this.addGate(t,e,a,r)),c};Ne.prototype.insertSpace=function(t,e){return this.insertGate(null,t,e,null)};Ne.prototype.removeGateAt=function(t,e){if(this.gates[e]){var n=this.gates[e][t];if(n)for(var r=n.id,a=this.gates.length,s=0;s<a;s++){var o=this.gates[s][t];o&&o.id==r&&(this.gates[s][t]=null)}}};Ne.prototype.removeGate=function(t){var e=this.getGatePosById(t);!e||e.col<0||!e.wires.length||this.removeGateAt(e.col,e.wires[0])};Ne.prototype.addMeasure=function(t,e,n){this.addGate("measure",-1,t,{creg:{name:e,bit:n}})};Ne.prototype.appendCircuit=function(t,e){for(var n=this.numCols(),r=t.numCols(),a=0;a<r;a++)for(var s=0;s<t.numQubits;s++){var o=t.getGateAt(a,s);o&&o.connector==0&&(!this.basicGates[o.name]&&t.customGates[o.name]&&this.registerGate(o.name,t.customGates[o.name]),this.addGate(o.name,a+n,o.wires,o.options))}};Ne.prototype.removeTrailingColumns=function(){for(var t=this.numCols(),e=t-1;e>=0;e--){for(var n=!0,r=0;r<this.numQubits;r++){var a=this.gates[r][e];if(a){n=!1;break}}if(!n)return;for(var r=0;r<this.numQubits;r++)this.gates[r].pop()}};Ne.prototype.removeLeadingColumns=function(){for(var t=0,e=this.numCols(),n=0;n<e;n++){for(var r=!0,a=0;a<this.numQubits;a++){var s=this.gates[a][n];if(s){r=!1;break}}if(!r)break;t++}for(var o=0;o<t;o++)for(var a=0;a<this.numQubits;a++)this.gates[a].shift()};Ne.prototype.removeTrailingRows=function(){for(var t=this.numCols(),e=this.numQubits-1;e>=0;e--){for(var n=!0,r=0;r<t;r++){var a=this.gates[e][r];if(a){n=!1;break}}if(!n)return;this.gates.pop(),this.numQubits--}};Ne.prototype.removeQubit=function(t){if(this.gates[t]){this.resetState();for(var e=this.numCols(),n=0;n<e;n++)this.removeGateAt(n,t);for(var r=t+1;r<this.numQubits;r++)for(var n=0;n<e;n++)this.gates[r-1][n]=this.gates[r][n];this.gates.pop(),this.numQubits--}};Ne.prototype.flipVertically=function(){this.resetState();for(var t=this.numCols(),e=this.numQubits-1,n=0;n<this.numQubits/2;n++)for(var r=0;r<t;r++){var a=this.gates[n][r];this.gates[n][r]=this.gates[e-n][r],this.gates[e-n][r]=a}};Ne.prototype.flipHorizontally=function(){this.resetState();for(var t=this.numCols(),e=t-1,n=0;n<this.numQubits;n++)for(var r=0;r<t/2;r++){var a=this.gates[n][r];this.gates[n][r]=this.gates[n][e-r],this.gates[n][e-r]=a}};Ne.prototype.applyTransform=function(t,e){var n={},r=0;if(e=e.slice(0),this.reverseBitOrder)for(var a=0;a<e.length;a++)e[a]=this.numQubits-1-e[a];e.reverse();for(var s=[],a=0;a<this.numQubits;a++)e.indexOf(a)<0&&s.push(a);var o=s.length,u=1<<o;function l(C){var T=0;return e.map(function(P,I){C&1<<I&&(T|=1<<P)}),T}function f(){var C=0;return e.map(function(T,P){C|=1<<T}),C+1}function c(){var C=0;return s.map(function(T,P){C|=1<<T}),C}for(var p=Ce.complex(0,0),d=0;d<t.length;d++)for(var h=l(d),m=0;m<t[d].length;m++){var v=l(m);if((this.stateBits&v)==v){var g=t[d][m];if(g)for(var y=h,_=v,x=u,M=l(0),A=f(),E=c(),N=M;x--;){var D=this.state[_];D&&(y=N|h,g==1?n[y]=Ce.add(n[y]||p,D):n[y]=Ce.add(n[y]||p,Ce.multiply(g,D)),r|=y),N=N+A&E,_=N|v}}}this.state=n,this.stateBits=r,this.stateBits==0&&Object.keys(this.state).length==0&&(this.state[0]=Ce.complex(1,0))};Ne.prototype.transformMatrix=function(t,e,n,r){n=n.slice(0);var a=!1;if(r?a=r=="big":a=!this.reverseBitOrder,a)for(var s=0;s<n.length;s++)n[s]=t-1-n[s];n.reverse();for(var o=[],s=0;s<t;s++)n.indexOf(s)<0&&o.push(s);var u=o.length,l=1<<u;function f(C){var T=0;return n.map(function(P,I){C&1<<I&&(T|=1<<P)}),T}function c(){var C=0;return n.map(function(T,P){C|=1<<T}),C+1}function p(){var C=0;return o.map(function(T,P){C|=1<<T}),C}for(var d=Ce.zeros([1<<t,1<<t]),h=0;h<e.length;h++)for(var m=f(h),v=0;v<e[h].length;v++){var g=f(v),y=e[h][v];if(y)for(var _=m,x=g,M=l,A=f(0),E=c(),N=p(),D=A;M--;)_=D|m,d[_][x]=y,D=D+E&N,x=D|g}return d};Ne.prototype.circuitMatrix=function(t){var e=new Ne;if(e.load(this.save(!0)),e.gotClassicalControl())return[];for(var n=[],r=e.numCols()-1;r>=0;r--)for(var a=e.numQubits-1;a>=0;a--){var s=e.getGateAt(r,a);if(s&&s.connector==0){var o=e.basicGates[s.name];if(!o)throw new Error('Unknown gate "'+s.name+'"');if(o.matrix&&o.matrix.length){var u=e.getRawGate(o,s.options),l=e.transformMatrix(e.numQubits,u,s.wires,t);!n||!n.length?n=l:n=this.multiplySquareMatrices(n,l)}}}return n};Ne.prototype.eigenvalues2x2=function(t){var e=this.parseMatrix(t),n=[0,0],r=Ce.add(e[0][0],e[1][1]);return n[0]=Ce.divide(Ce.add(r,Ce.sqrt(Ce.add(Ce.multiply(Ce.multiply(4,e[0][1]),e[1][0]),Ce.pow(Ce.subtract(e[0][0],e[1][1]),2)))),2),n[1]=Ce.divide(Ce.subtract(r,Ce.sqrt(Ce.add(Ce.multiply(Ce.multiply(4,e[0][1]),e[1][0]),Ce.pow(Ce.subtract(e[0][0],e[1][1]),2)))),2),n};Ne.prototype.getBipartiteState=function(t,e){var n={},r=0;function a(c,p){var d=Ce.add(c,p),h=d.arg();return Ce.complex({abs:Ce.sqrt(Ce.pow(Ce.abs(c),2)+Ce.pow(Ce.abs(p),2)),arg:h})}for(var s in this.state){var o=parseInt(s),u=0,l=o&1<<t?1:0,f=o&1<<e?2:0;u|=l,u|=f,typeof n[u]<"u"?n[u]=a(n[u],this.state[s]):n[u]=this.state[s],r++}return r||(n[0]=Ce.complex(1,0)),n};Ne.prototype.chanceMap=function(){for(var t={},e=0;e<this.numQubits;e++)for(var n=0;n<this.numQubits;n++)t[e]||(t[e]={}),n==e?t[e][n]=null:t[e][n]={};for(var e=0;e<this.numQubits;e++)for(var n=e+1;n<this.numQubits;n++){var r=this.getBipartiteState(e,n),a=new Ne(2);a.state=r;var s=Ce.abs(a.angles()[0].radius),o=Ce.round(1-Ce.pow(s,2),7);t[e][n].entangled=o>0,t[e][n].concurence=o,t[e][n].concurencePercent=Ce.round(o*100,2),t[n][e].entangled=o>0,t[n][e].concurence=o,t[n][e].concurencePercent=Ce.round(o*100,2)}return t};function ZJ(t,e){for(var n=t.toString(2);n.length<e;)n="0"+n;return n}function JJ(t,e){return parseInt(ZJ(t,e).split("").reverse().join(""),2)}Ne.prototype.resetQubit=function(t,e){var n=[[0,0],[0,0]],r=null;this.reverseBitOrder?r=Ce.pow(2,this.numQubits-1-t):r=Ce.pow(2,t);var a=0;for(var s in this.state){var o=parseInt(s);(e?o&r:!(o&r))&&(a+=Ce.pow(Ce.abs(this.state[s]),2))}a=Ce.round(a,14),a!=1&&(e?a==0?n[1][0]=1:n[1][1]=Ce.sqrt(1/a):a==0?n[0][1]=1:n[0][0]=Ce.sqrt(1/a),this.collapsed=[],this.prob=[],this.applyTransform(n,[t]))};Ne.prototype.applyGate=function(t,e,n,r){if(t=="measure"){if(!r.creg)throw'Error: "measure" gate requires destination.';var a=this.measure(n[0],r.creg.name,r.creg.bit),s=this.measureResetsQubit;if(!s)for(var o=e;o<this.numCols();o++){for(var u=o==e?n[0]:0,l=u;l<this.numQubits;l++){var f=this.gates[l][o];if(f&&f.name!="measure"){s=!0;break}}if(s)break}s&&this.resetQubit(n[0],a);return}if(t=="reset"){this.resetQubit(n[0],0);return}var c=this.basicGates[t];if(!c){console.log('Unknown gate "'+t+'".');return}var p=this.getRawGate(c,r);this.collapsed=[],this.prob=[],this.applyTransform(p,n)};Ne.prototype.getRawGate=function(t,e,n){var r=n&&n.params?n.params:this.options&&this.options.params?this.options.params:{},r=JSON.parse(JSON.stringify(r));for(var a in r)r[a]=Ce.evaluate(r[a]);var s=[];return t.matrix.map(function(o){var u=[];o.map(function(l){if(typeof l=="string"){var f=e?e.params||{}:{},c={};t.params.map(function(d,h){Array.isArray(f)?c[d]=f.length>h?Ce.evaluate(f[h],r):null:c[d]=Ce.evaluate(f[d],r)});var p=Ce.evaluate(l,c);u.push(p)}else u.push(l)}),s.push(u)}),s};Ne.prototype.countParameterizedGates=function(){for(var t=0,e=this.numCols(),n=0;n<e;n++)for(var r=0;r<this.numQubits;r++){var a=this.getGateAt(n,r);if(a&&a.connector==0&&a.options&&a.options.params){var s=0;for(paramName in a.options.params)s++;s>0&&t++}}return t};Ne.prototype.findGlobalParams=function(){for(var t={globalParams:[],cells:[]},e=function(d){var h=[],m=function(g,y){g.isSymbolNode&&!g.isFunctionNode&&!Ce[g.name]&&h.push(g.name)},v=Ce.parse(d);return v.toString({handler:m}),h},n=this.numCols(),r=0;r<n;r++)for(var a=0;a<this.numQubits;a++){var s=this.getGateAt(r,a);if(s&&s.connector==0&&s.options&&s.options.params){var o=!1;for(var u in s.options.params){var l=s.options.params[u];if(typeof l=="string"){var f=e(l);if(f.length){for(var c=0;c<f.length;c++)t.globalParams.indexOf(f[c])<0&&t.globalParams.push(f[c]);if(!o){var p=Math.max.apply(null,s.wires);t.cells.push([r,p]),o=!0}}}}}}return t};Ne.prototype.getGlobalParams=function(){var t=this.findGlobalParams().globalParams;return t};Ne.prototype.gotGlobalParams=function(){var t=this.getGlobalParams();return t.length>0};Ne.prototype.updateGlobalParams=function(){this.params=this.getGlobalParams(),this.options=this.options||{},this.options.params=this.options.params||{};for(var t=0;t<this.params.length;t++){var e=this.params[t];typeof this.options.params[e]>"u"&&(this.options.params[e]=0)}for(var e in this.options.params)this.params.indexOf(e)<0&&delete this.options.params[e];return this.params};Ne.prototype.makeAllParamsGlobal=function(){for(var t=this.getGlobalParams(),e=function(m){var v=[],g=function(_,x){_.isSymbolNode&&!_.isFunctionNode&&!Ce[_.name]&&v.push(_.name)},y=Ce.parse(m);return y.toString({handler:g}),v},n=this.numCols(),r=0;r<n;r++)for(var a=0;a<this.numQubits;a++){var s=this.getGateAt(r,a);if(s&&s.connector==0&&s.options&&s.options.params)for(var o in s.options.params){var u=s.options.params[o],l=!1;if(typeof u=="string"){var f=e(u);f.length&&(l=!0)}if(!l){for(var c=0;t.indexOf("var"+c)>=0;)c++;var p="var"+c;t.push(p);for(var d=0;d<s.wires.length;d++){var h=this.gates[s.wires[d]][r];h.options.params[o]=p}this.params.push(p),this.options.params[p]=u}}}};Ne.prototype.decompose=function(t){if(!t.gates.length)return t;this.updateGlobalParams();function e(A,E,N){return A.slice(0,N).concat(E).concat(A.slice(N))}for(var n=0;n<t.gates[0].length;n++)for(var r=0;r<t.numQubits;r++){var a=t.gates[r][n];if(a&&a.connector==0&&!this.basicGates[a.name]){var s=new Ne,o=t.customGates[a.name];if(o){if(s.load(o),s.params.length&&a.options&&a.options.params)for(var u=a.options.params,l=0;l<s.gates[0].length;l++)for(var f=0;f<s.numQubits;f++){var c=s.gates[f][l];if(c&&c.connector==0&&c.options&&c.options.params)for(var p in c.options.params){var d=Ce.parse(c.options.params[p]),h=d.transform(function(A,E,N){return A.isSymbolNode&&u.hasOwnProperty(A.name)?Ce.parse("("+u[A.name]+")"):A});c.options.params[p]=h.toString()}}if(a.options&&a.options.condition)for(var l=0;l<s.gates[0].length;l++)for(var f=0;f<s.numQubits;f++){var c=s.gates[f][l];c&&(c.options=c.options||{},c.options.condition=a.options.condition)}var m=s.save(!0);if(!m.gates[0].length)for(var v=0;v<m.gates.length;v++)m.gates[v].push(null);for(var g=[],y=0;y<m.gates[0].length-1;y++)g.push(null);for(var _=0;_<t.numQubits;_++){var x=t.gates[_][n];if(x&&x.id==a.id){t.gates[_].splice(n,1);for(var M=JSON.parse(JSON.stringify(m.gates[x.connector])),v=0;v<M.length;v++)M[v]&&(M[v].id=M[v].id+"_"+a.id);t.gates[_]=e(t.gates[_],M,n)}else t.gates[_]=e(t.gates[_],g,n+1)}}}}return t.customGates={},t};Ne.prototype.decomposeGateAt=function(t,e){var n=this,r=this.getGateAt(t,e);if(r&&this.customGates[r.name]){var a=new Ne;a.load(this.save());for(var s=0;s<a.gates[0].length;s++)for(var o=0;o<a.numQubits;o++){var u=a.gates[o][s];u&&u.id!=r.id&&a.removeGateAt(s,o)}var l=new Ne;l.load(a.save(!0)),l.removeLeadingColumns(),l.removeTrailingColumns();for(var f=0;f<l.gates[0].length-1;f++)this.insertSpace(t+f,r.wires);this.removeGate(r.id);for(var c=t,s=0;s<l.gates[0].length;s++){var p=l.getGatesAtColumn(s);p.map(function(h){n.addGate(h.name,c,h.wires,h.options)}),c++}return l}};Ne.prototype.removeMeasurementAndClassicalControl=function(){for(var t=this.numCols(),e=0;e<t;e++)for(var n=0;n<this.numQubits;n++){var r=this.gates[n][e];r&&r.name=="measure"&&(this.gates[n][e]=null,r=null),r&&r.options&&r.options.condition&&delete this.gates[n][e].options.condition}this.cregs={},this.options&&(this.options.hybrid=!1,this.options.hybridOptions&&delete this.options.hybridOptions,this.options.encoderDecoder=!1,this.options.encoderDecoderOptions&&delete this.options.encoderDecoderOptions)};Ne.prototype.convertToCustomGate=function(t,e,n){for(var r=this.numCols(),a=0;a<r;a++)for(var s=0;s<this.numQubits;s++){var o=this.gates[s][a];o&&o.name=="measure"&&(this.gates[s][a]=null,o=null),o&&o.options&&o.options.condition&&delete this.gates[s][a].options.condition}this.cregs={};var u=this.save(e);if(u.options&&(u.options.hybrid=!1,u.options.hybridOptions&&delete u.options.hybridOptions,u.options.encoderDecoder=!1,u.options.encoderDecoderOptions&&delete u.options.encoderDecoderOptions),this.clear(),this.customGates[t]=u,n){for(var l=[],f=0;f<this.numQubits;f++)l.push(f);var c=JSON.parse(JSON.stringify(this.customGates[t].options));this.addGate(t,-1,l,c)}else this.removeTrailingRows()};Ne.prototype.validCustomGateName=function(t){t=(t||"sub")+"";var e=[];if(this.customGates){if(!this.basicGates[t]&&!this.customGates[t])return t;for(var n in this.basicGates)e.push(n);for(var n in this.customGates)e.push(n)}var r=0,a="";do r++,a=t+r;while(e.indexOf(a)>=0);return a};Ne.prototype.splitIntoBlocks=function(t,e){e=e||{};var n=[],r="{}",a=!0,s=null,o=new Ne;o.load(this.save(!0));for(var u=o.numCols(),l=0;l<u;l++)for(var f=0;f<o.numQubits;f++){var c=o.getGateAt(l,f);if(c&&c.connector==0&&!c.addedToBlock){var p=this.basicGates[c.name],d=c.options&&c.options.condition?JSON.stringify(c.options.condition):"{}",h=p&&!!(p.matrix&&p.matrix.length),m=JSON.parse(JSON.stringify(s?s.wires:[]));if(c.wires.map(function(W){m.indexOf(W)<0&&m.push(W)}),!n.length||d!=r||!h||!a||!(m.length<=t)?(s={wires:c.wires,gates:[c]},n.push(s),c.options&&c.options.condition&&(s.condition=c.options.condition)):(s.wires=m,s.gates.push(c)),c.wires.map(function(W){o.gates[W][l].addedToBlock=!0}),r=d,a=h,!e.verticalOnly){var v=l+1,g=JSON.parse(JSON.stringify(s.wires));for(g.sort();v<u&&g.length;){for(extWire=g[0];g.length&&extWire<=g[g.length-1];){var y=o.getGateAt(v,extWire);if(y&&!y.addedToBlock){var _=this.basicGates[y.name],x=y.options&&y.options.condition?JSON.stringify(y.options.condition):"{}",M=_&&!!(_.matrix&&_.matrix.length),A=M&&x==d;if(A){for(var E=0;E<y.wires.length;E++)if(g.indexOf(y.wires[E])<0){A=!1;break}}if(A)s.gates.push(y),y.wires.map(function(W){o.gates[W][v].addedToBlock=!0});else{for(var N=[],E=0;E<g.length;E++){var D=g[E];y.wires.indexOf(D)<0&&N.push(D)}g=N}}if(g.length){for(var C=g[g.length-1]+1,E=g.length-1;E>=0;E--){var D=g[E];D>extWire&&(C=D)}extWire=C}}v++}}}}for(var T=new Ne,P=0,I=0;I<n.length;I++){var U=n[I],q=!1;if(U.wires.length<=t||e.flexibleBlockSize)for(var z=0;z<U.gates.length;z++){var c=U.gates[z],p=this.basicGates[c.name];p.matrix&&p.matrix.length&&(q=!0)}if(q){P++;for(var G=new Ne,z=0;z<U.gates.length;z++){var c=U.gates[z];c.options.condition&&delete c.options.condition;var F=[];c.wires.map(function(ee){F.push(U.wires.indexOf(ee))}),c.wires=F,G.appendGate(c.name,F,c.options)}var k="block"+P;T.registerGate(k,G);var O={};U.condition&&(O.condition=U.condition),T.appendGate(k,U.wires,O)}else U.gates.map(function(W){T.appendGate(W.name,W.wires,W.options)})}this.load(T.save(!1))};Ne.prototype.usedGates=function(t){t=t||{};var e=new Ne;e.load(this.save(!0));for(var n=[],r=0;r<e.numQubits;r++)for(var a=0;a<e.numCols();a++){var s=e.gates[r][a];if(s&&n.indexOf(s.name)<0){var o=!1;if(t.unitariesOnly){var u=e.basicGates[s.name];(!u||!u.matrix||!u.matrix.length)&&(o=!0)}o||n.push(s.name)}}if(!t.noCustomGates)for(var l in this.customGates)this.customGates[l],n.indexOf(l)<0&&n.push(l);return n};Ne.prototype.countOps=function(t,e){e=e||{},e.shallow=e.shallow||!1,t||(t=this);for(var n={},r=0;r<t.gates.length;r++)for(var a=0;a<t.gates[r].length;a++){var s=t.gates[r][a];if(s&&s.connector==0){var o=this.basicGates[s.name];if(o)n[s.name]?n[s.name]++:n[s.name]=1;else{var u=this.customGates[s.name];if(u&&(n[s.name]?n[s.name]++:n[s.name]=1,!e.shallow)){var l=this.countOps(u,e);for(subName in l)n[subName]?n[subName]+=l[subName]:n[subName]=l[subName]}}}}return n};Ne.prototype.getCouplingMap=function(t){t=t||{};var e="",n=new Ne;n.load(this.save(!0));for(var r=0;r<n.numQubits;r++)for(var a=0;a<n.numCols();a++){var s=n.getGateAt(a,r);if(s&&s.connector==0){var o=!1;if(t.unitariesOnly){var u=n.basicGates[s.name];(!u||!u.matrix||!u.matrix.length)&&(o=!0)}if(!o){var l=JSON.stringify(s.wires);e.indexOf(l)<0&&(e&&(e+=","),e+=l)}}}return JSON.parse("["+e+"]")};Ne.prototype.getGateDef=function(t){var e=this.basicGates[t];return e||(e=this.customGates[t]),e};Ne.prototype.importRaw=function(t,e){var n=t&&t.qubits||0;if(this.init(n),!t)if(e)e([]);else return;if(t.cregs)for(var r=0;r<t.cregs.length;r++){var a=t.cregs[r];if(!a.name){var s="Classical register "+r+` doesn't have a "name".`;if(e){e([{msg:s,line:0,col:0}]);return}else throw new Error(s)}this.createCreg(a.name,a.len||0)}if(t.program)for(var r=0;r<t.program.length;r++){var o=t.program[r];if(!o.name){var s="Gate "+r+` doesn't have a "name". Name is optional and this is OK for QubitToaster but we cannot import gate from matrix. Not implemented yet.`;if(e){e([{msg:s,line:0,col:0}]);return}else throw new Error(s)}var u=this.basicGates[o.name];if(!u){var s='Unknown gate "'+o.name+'". Name is optional and this is OK for QubitToaster but we cannot import gate from matrix. We can import only gates by name from set of known gates.';if(e){e([{msg:s,line:0,col:0}]);return}else throw new Error(s)}var l=JSON.parse(JSON.stringify(o.wires||[])),f=JSON.parse(JSON.stringify(o.options||{})),c=u.matrix&&u.matrix.length?Ce.log2(u.matrix.length):1;if(l.length!=c){var s='Gate "'+o.name+'" has '+l.length+" wires but should have "+c+" wires.";if(e){e([{msg:s,line:0,col:0}]);return}else throw new Error(s)}if(u.params&&u.params.length){if(!f.params){var s='Missing parameters for gate "'+o.name+'". Expecting '+u.params.length+" parameters.";if(e){e([{msg:s,line:0,col:0}]);return}else throw new Error(s)}for(var p=0;p<u.params.length;p++){var d=u.params[p];if(typeof f.params[d]>"u"){var s='Missing parameter "'+d+'" for gate "'+o.name+'".';if(e){e([{msg:s,line:0,col:0}]);return}else throw new Error(s)}}}this.appendGate(o.name,l,f)}e&&e([])};Ne.prototype.exportRaw=function(){var t=this.options&&this.options.params?this.options.params:{},t=JSON.parse(JSON.stringify(t));for(var e in t)t[e]=Ce.evaluate(t[e]);var n=new Ne;n.load(this.save(!0));for(var r=n.numCols(),a=[],s=0;s<r;s++)for(var o=0;o<n.numQubits;o++){var u=n.getGateAt(s,o);if(u&&u.connector==0){var l=n.basicGates[u.name];if(!l){console.log('Unknown gate "'+u.name+'".');return}var f=n.getRawGate(l,u.options),c=[];f.map(function(v){var g=[];v.map(function(y){y=JSON.parse(JSON.stringify(y)),typeof y=="object"&&y.mathjs&&typeof y.mathjs=="string"&&(y.type=y.mathjs.toLowerCase(),delete y.mathjs),g.push(y)}),c.push(g)});var p={};if(u.options&&(p=JSON.parse(JSON.stringify(u.options))),p.params)for(var d in p.params)p.params[d]=Ce.evaluate(p.params[d],t);a.push({name:u.name,matrix:c,wires:u.wires,options:p})}}var h=[];for(var m in n.cregs)h.push({name:m,len:n.cregs[m].length||0});return{qubits:n.numQubits,cregs:h,program:a}};Ne.prototype.exportToGenerator=function(t){t=t||{};var e=this.exportQASM(null,!1,null,!1,!0),n=this.usedGates({noCustomGates:!0,unitariesOnly:!0}),r=this.getCouplingMap({unitariesOnly:!0}),a={source:{circuit:{qasm:e}},problem:[],type:"circuit",settings:{allowed_gates:n.join(","),coupling_map:r}},s=new Ne;if(s.load(this.save(!0)),t.fromMatrix){var o=s.circuitMatrix(),u=[];return o.map(function(h){h.map(function(m){typeof m=="object"?u.push([m.re,m.im]):u.push(m)})}),a.problem.push({unitary:u}),a}if(!t.noVectors){for(var l=new Ne,f=t.numSamples||(this.numQubits<3?8:this.numQubits<5?(1<<this.numQubits)+1:this.numQubits<9?this.numQubits*4:this.numQubits),c=0;c<f+1;c++){var p={input:[],output:[]},d=[];c>0?(l.randomCircuit(this.numQubits,20,{useGates:t.useGates||["u3","cx"],noClassicControl:!0,noMeasure:!0,noReset:!0}),l.run(),l.stateAsArray().map(function(h){p.input.push([h.amplitude.re,h.amplitude.im])}),d=l.state):(s.initState(),s.stateAsArray().map(function(h){p.input.push([h.amplitude.re,h.amplitude.im])}),d=s.state),s.run(null,{initialState:d}),s.stateAsArray().map(function(h){p.output.push([h.amplitude.re,h.amplitude.im])}),a.problem.push(p)}return a}return a};Ne.prototype.save=function(t,e){this.updateGlobalParams();var n={numQubits:this.numQubits,params:JSON.parse(JSON.stringify(this.params)),options:JSON.parse(JSON.stringify(this.options)),gates:JSON.parse(JSON.stringify(this.gates)),customGates:JSON.parse(JSON.stringify(this.customGates)),cregs:JSON.parse(JSON.stringify(this.cregs))},r=null;if(t?r=this.decompose(n):r=n,e&&(r.gates&&r.gates.map(function(o){o&&o.map(function(u){u&&u.id&&delete u.id})}),r.customGates))for(var a in r.customGates){var s=r.customGates[a];s&&s.gates&&s.gates.map(function(o){o&&o.map(function(u){u&&u.id&&delete u.id})})}return r};Ne.prototype.load=function(t){this.numQubits=t.numQubits||1,this.clear(),this.params=JSON.parse(JSON.stringify(t.params||[])),this.options=JSON.parse(JSON.stringify(t.options||{})),this.gates=JSON.parse(JSON.stringify(t.gates||[])),this.customGates=JSON.parse(JSON.stringify(t.customGates||{})),this.cregs=JSON.parse(JSON.stringify(t.cregs||{})),this.options.params=this.options.params||{},this.options.hybrid=this.options.hybrid||!1,this.options.hybridOptions||(this.options.hybridOptions=this.defaultHybridOptions()),this.options.encoderDecoder=this.options.encoderDecoder||!1,this.options.encoderDecoderOptions||(this.options.encoderDecoderOptions=this.defaultEncoderDecoderOptions())};var $Ee=function(t){if(t<=0)throw new Error("Cannot generate the gray code for less than 1 bit.");var e=[0];for(i=0;i<t;i++){var n=[].concat(e).reverse();n.map(function(a){e.push(a+Ce.pow(2,i))})}var r=[];return e.map(function(a){r.push(ZJ(a,t))}),r};Ne.prototype.grayCodeChain=function(t,e,n){function r(d,h){for(var m=[],v=0;v<d.length;v++)m.push(d[v]!=h[v]);return m}function a(d,h){for(var m=[],v=0;v<d.length;v++)d[v]==h&&m.push(v);return m}function s(d,h){for(var m=0,v=0;v<d.length;v++)d[v]==h&&m++;return m}for(var o=[],u=0;u<t;u++)o.push(u);var l=t,f=$Ee(t),c=null,p=[];return f.map(function(d){var h=d.indexOf("1");if(h>=0){c||(c=d);var m=r(d,c),v=m.indexOf(!0);if(v>=0)if(v!=h)p.push({gateName:"cx",wires:[o[v],o[h]],options:null});else for(var g=a(d,"1"),y=1;y<g.length;y++)p.push({gateName:"cx",wires:[o[g[y]],o[h]],options:null});if(s(d,"1")%2)p.push({gateName:e,wires:[o[h],l],options:n});else{var _=null;if(n&&(_=JSON.parse(JSON.stringify(n)),_.params))for(key in _.params){var x=_.params[key];typeof x=="number"?x=0-x:x="-("+x+")",_.params[key]=x}p.push({gateName:e,wires:[o[h],l],options:_})}c=d}}),p};Ne.prototype.MCU1Circuit=function(t){var e=0,n=[];if(typeof t=="number")e=t;else{e=t.length||0;for(var r=0;r<e;r++)(!t[r]||typeof t[r]=="number"&&t[r]<0)&&n.push(r)}if(e==0)throw new Error("Cannot create multi-controlled gate with zero control qubits.");function a(f,c){c.map(function(p){f.appendGate("x",p)})}var s="lambda / "+Ce.pow(2,e-1),o={params:{lambda:s}},u=new Ne;if(e==1)return a(u,n),u.appendGate("cu1",[0,1],o),a(u,n),u;a(u,n);var l=this.grayCodeChain(e,"cu1",o);return l.map(function(f){u.appendGate(f.gateName,f.wires,f.options)}),a(u,n),u};Ne.prototype.MCXCircuit=function(t){var e=0,n=[];if(typeof t=="number")e=t;else{e=t.length||0;for(var r=0;r<e;r++)(!t[r]||typeof t[r]=="number"&&t[r]<0)&&n.push(r)}var a=new Ne;if(e==0)throw new Error("Cannot create multi-controlled gate with zero control qubits.");function s(f,c){c.map(function(p){f.appendGate("x",p)})}if(e==1)return s(a,n),a.appendGate("cx",[0,1]),s(a,n),a;if(e==2)return s(a,n),a.appendGate("ccx",[0,1,2]),s(a,n),a;for(var o=a.MCU1Circuit(e),u="mcu1_"+e,l=[],r=0;r<e+1;r++)l.push(r);return a.registerGate(u,o),s(a,n),a.appendGate("h",e),a.appendGate(u,l,{params:{lambda:"pi"}}),s(a,n),a.appendGate("h",e),a};Ne.prototype.registerGate=function(t,e){if(e instanceof Ne?this.customGates[t]=e.save():this.customGates[t]=e,this.isMultiControlledGate(t)){var n=this.decodeMultiControlledGateName(t);if(n.numCtrlQubits!=this.customGates[t].numQubits-1){n.numCtrlQubits=this.customGates[t].numQubits-1;for(var r=[],a=0;a<n.numCtrlQubits;a++)r.push(typeof n.ctrlQubits[a]>"u"?!0:n.ctrlQubits[a]);n.ctrlQubits=r}var s=this.basicGates[n.rootName];if(s&&s.drawingInfo&&s.drawingInfo.connectors){this.customGates[t].drawingInfo||(this.customGates[t].drawingInfo={});var o=[];n.ctrlQubits.map(function(u){u?o.push("dot"):o.push("ndot")}),o.push(s.drawingInfo.connectors[s.drawingInfo.connectors.length-1]),this.customGates[t].drawingInfo.connectors=o,this.customGates[t].drawingInfo.root=s.drawingInfo.root}}};Ne.prototype.registerMCXGate=function(t){var e=this.multiControlledGateName("mcx",t);return this.registerGate(e,this.MCXCircuit(t).save(!0)),e};Ne.prototype.registerMCU1Gate=function(t){var e=this.multiControlledGateName("mcu1",t);return this.registerGate(e,this.MCU1Circuit(t).save(!0)),e};Ne.prototype.registerMultiControlledGate=function(t,e){switch(t){case"cx":return this.registerMCXGate(e);case"cu1":return this.registerMCU1Gate(e)}return""};Ne.prototype.getOrRegisterMultiControlledEquivalent=function(t,e){var n=this.basicGates[t];if(n){if(n.drawingInfo&&(t=="x"||t=="u1"||n.drawingInfo.root=="x"||n.drawingInfo.root=="u1"))if(!this.basicGates["c"+t]||e){for(var r="c"+(n.drawingInfo.root||t),a=Ce.log2(n.matrix.length),s=[],o=0;o<a-1;o++)s.push(!0);return s.unshift(!e),this.registerMultiControlledGate(r,s)}else return"c"+t;for(var u in this.basicGates){var l=this.basicGates[u];if(l&&l.drawingInfo&&l.drawingInfo.root&&l.drawingInfo.root==t&&!e)return u}return null}if(this.customGates[t]){var f=this.decodeMultiControlledGateName(t);return!f||!f.numCtrlQubits?null:f.rootName=="cx"||f.rootName=="cu1"?(f.ctrlQubits.unshift(!e),this.registerMultiControlledGate(f.rootName,f.ctrlQubits)):null}return null};Ne.prototype.removeUnusedMultiControlledGates=function(){var t=this.countOps(null,{shallow:!1});for(gateName in this.customGates)t[gateName]||this.isMultiControlledGate(gateName)&&delete this.customGates[gateName]};Ne.prototype.decodeMultiControlledGateName=function(t){if(!t)return null;var e={},n=t.split("_");if(n.length>0&&(e.name=n[0],e.rootName=e.name.substring(1),e.rootName!="cx"&&e.rootName!="cu1"))return null;if(n.length>1){var r=parseInt(n[1]);!isNaN(r)&&r<=20&&(e.numCtrlQubits=r)}if(e.numCtrlQubits){var a=[];if(n.length>2)for(var s=0;s<n[2].length;s++)n[2][s]=="0"&&a.push(!1),n[2][s]=="1"&&a.push(!0);if(!a.length)for(var s=0;s<r;s++)a.push(!0);e.ctrlQubits=a}return e};Ne.prototype.multiControlledGateName=function(t,e){var n=t+"_";if(typeof e=="number")n+=e;else{n+=e.length||0;var r="";e.map(function(a){!a||typeof a=="number"&&a<0?r+="0":r+="1"}),r.indexOf("0")<0&&(r=""),r&&(n+="_"+r)}return n};Ne.prototype.isMultiControlledGate=function(t){var e=this.decodeMultiControlledGateName(t),n=!!this.customGates[t]&&!!e&&!!e.numCtrlQubits;return n};Ne.prototype.isControllableGate=function(t){var e=this.basicGates[t];if(e){if(e.drawingInfo&&(e.drawingInfo.root=="x"||e.drawingInfo.root=="u1"))return!0;for(var n in this.basicGates){var e=this.basicGates[n];if(e&&e.drawingInfo&&e.drawingInfo.root&&e.drawingInfo.root==t)return!0}}return this.isMultiControlledGate(t)};Ne.prototype.getGatePosById=function(t){for(var e=this,n=e.numCols(),r=0;r<n;r++)for(var a=0;a<e.numQubits;a++){var s=e.getGateAt(r,a);if(s&&s.id==t)return{wires:s.wires,col:r}}return{wires:[],col:-1}};Ne.prototype.getGateById=function(t){for(var e=this,n=e.numCols(),r=0;r<n;r++)for(var a=0;a<e.numQubits;a++){var s=e.getGateAt(r,a);if(s&&s.id==t)return s}return null};Ne.prototype.getGateBefore=function(t,e){for(var n=null,r=t-1;r>=0&&!n;)n=this.getGateAt(r,e),r--;return n};Ne.prototype.getGateAt=function(t,e){if(!this.gates[e]||!this.gates[e][t])return null;var n=JSON.parse(JSON.stringify(this.gates[e][t]));if(!n)return null;n.column=t,n.wires=[];for(var r=n.id,a=this.gates.length,e=0;e<a;e++){var s=this.gates[e][t];s&&s.id==r&&(n.wires[s.connector]=e)}return n};Ne.prototype.getGatesAtColumn=function(t){for(var e=[],n=this.gates.length,r=0;r<n;r++){var a=this.getGateAt(t,r);a&&a.connector==0&&e.push(a)}return e};Ne.prototype.getControllableGatesAtColumn=function(t){for(var e=this.getGatesAtColumn(t),n=[],r=0;r<e.length;r++){var a=e[r];this.isControllableGate(a.name)&&n.push(a)}return n};Ne.prototype.exportJavaScript=function(t,e,n,r){var a=this,s=null;e?(s=new Ne,s.load(this.save(!0))):s=this;var o="";if(t){var u=(t||"").split(`
`);u.map(function(C){C.length>=2&&C[0]!="/"&&C[1]!="/"&&(o+="// "),o+=C,o+=`
`})}var l="",f="";if(n)l="    ",f="circ",o+="const "+n+` = function() {
`,o+=l+"const "+f+" = new QuantumCircuit("+s.numQubits+`);

`,s.params&&s.params.length&&(o+=l+f+".params = "+JSON.stringify(s.params)+`

`);else{l="",f="circuit",o+=l+`const QuantumCircuit = require("quantum-circuit");

`,o+=l+"const "+f+" = new QuantumCircuit("+s.numQubits+`);

`;var c=s.usedGates();if(!e){var p=[];c.map(function(C){var T=s.basicGates[C];if(!T){var P=a.customGates[C];if(P){var I=new Ne;I.load(P),o+=I.exportJavaScript("",!0,C),p.push(C)}}}),p.map(function(C){o+=l+f+'.registerGate("'+C+'", '+C+`());
`}),p.length>0&&(o+=`
`)}}var d=0;for(var h in this.cregs)o+=l+f+'.createCreg("'+h+'", '+(this.cregs[h].length||1)+`);
`,d++;d>0&&(o+=`
`);for(var m=s.numCols(),v=0;v<m;v++)for(var g=0;g<this.numQubits;g++){var y=s.getGateAt(v,g);if(y&&y.connector==0){var _=y.name;if(_=="measure"&&y.options&&y.options.creg)o+=l+f+".addMeasure("+g+', "'+y.options.creg.name+'", '+y.options.creg.bit+`);
`;else{if(o+=l+f+'.appendGate("'+y.name+'"',y.wires.length==1)o+=", ",o+=y.wires[0];else{o+=", [";for(var x=0;x<y.wires.length;x++)x>0&&(o+=","),o+=y.wires[x];o+="]"}if(y.options){var M={};for(var A in y.options)if(y.options[A]){var E=y.options[A],N=!1;typeof E=="object"&&Object.keys(E).length===0&&E.constructor===Object&&(N=!0),N||(M[A]=E)}o+=", "+JSON.stringify(M)}o+=`);
`}}}if(n?(o+=`
`,o+=l+"return "+f+`;
`,o+=`};

`):(o+=`
`,o+=l+f+`.run();

`,o+=l+`console.log("Probabilities:");
`,o+=l+`console.log(JSON.stringify(circuit.probabilities()));

`,o+=l+`console.log("Measure all:");
`,o+=l+`console.log(JSON.stringify(circuit.measureAll()));

`,s.cregCount()&&(o+=l+`console.log("Classical registers:");
`,o+=l+`console.log(circuit.cregsAsString());

`)),r){var D={metadata:{kernelspec:{display_name:"Javascript (Node.js)",language:"javascript",name:"javascript"},language_info:{file_extension:".js",mimetype:"application/javascript",name:"javascript"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:o,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(D)}return o};Ne.prototype.exportQiskit=function(t,e,n,r,a,s,o,u,l,f,c,p){var d={comment:t,decompose:e,versionStr:r,providerName:a,backendName:s,asJupyter:o,shots:u,hybrid:c,encoderDecoder:p};return this.exportToQiskit(d,n,l,f)};Ne.prototype.exportQuEST=function(t,e,n,r){var a={comment:t,decompose:e};return this.exportToQuEST(a,n,r)};Ne.prototype.exportQASM=function(t,e,n,r,a,s){var o={comment:t,decompose:e,compatibilityMode:a};return this.exportToQASM(o,n,r,s)};Ne.prototype.importQASM=function(t,e,n){this.init(),WEe(this,t,e,n)};Ne.prototype.exportPyquil=function(t,e,n,r,a,s,o,u,l,f){var c={comment:t,decompose:e,versionStr:r,lattice:a,asQVM:s,asJupyter:o,shots:u,hybrid:l,encoderDecoder:f};return this.exportToPyquil(c,n)};Ne.prototype.exportQuil=function(t,e,n,r){var a={comment:t,decompose:e,versionStr:r};return this.exportToQuil(a,n)};Ne.prototype.importQuil=function(t,e,n,r,a,s){var o=this;n=n||{},o.init(),a=a||{},s=s||0;function u(F){if(o.customGates&&o.customGates[F])return{name:F,customGate:o.customGates[F]};for(var k in o.basicGates){var O=o.basicGates[k];if(O.exportInfo){if(O.exportInfo.quil&&O.exportInfo.quil.name==F)return{name:k,gateDef:O,quilDef:O.exportInfo.quil};if(O.exportInfo.pyquil&&O.exportInfo.pyquil.name==F)return{name:k,gateDef:O,quilDef:O.exportInfo.pyquil}}}return null}var l=t.split(`
`),f=[],c=!1;l.map(function(F,k){if(F=F.split("#")[0],F.length?F=F.trim():c=!1,c){var W=F.split(";");W.map(function(ee){ee.trim().length&&f[f.length-1].body.push(ee.trim())})}else if(F.length){var O=F.split(";"),W=[];O.map(function(X){X.trim().length&&W.push(X.trim())}),W.map(function(X){var ee=X.split(" "),J=ee[ee.length-1];if(J.length&&(J[J.length-1]==":"&&(c=!0,J=J.substring(0,J.length-1),ee[ee.length-1]=J),ee.length)){var Y="GATE";(ee[0]=="DEFGATE"||ee[0]=="DEFCIRCUIT")&&(Y=ee[0],ee.splice(0,1));var ie=ee.join(" "),K=[],re=ie.indexOf("(");if(re>=0){var oe=ie.indexOf(")");oe>re&&(K=ie.substring(re+1,oe).split(","),K.map(function(Q,Ee){for(Q=Q.trim();Q.length&&Q[0]=="%";)Q=Q.slice(1);K[Ee]=Q}),oe+1<=ie.length?(tok=ie.substring(oe+1,ie.length).split(" "),ee=[],tok.map(function(Q){Q=Q.trim(),Q.length&&ee.push(Q)})):ee=[],ie=ie.substring(0,re).trim())}else ie=ee.splice(0,1)[0].trim();for(var ce=[],me=0;me<ee.length;me++){var Se=ee[me];if(r){var le=r.indexOf(Se);le>=0?ce.push(le):ce.push(Se)}else ce.push(Se)}f.push({type:Y,name:ie,params:K,args:ce,body:[],line:k,col:0})}})}});for(var p=f.length,d=0;d<p;d++){var h=f[d];switch(a[h.name]&&(h.name=a[h.name]),h.type){case"DEFGATE":if(h.name==h.name.toUpperCase()){var m=h.name.toLowerCase();a[h.name]=m,h.name=m}break;case"DEFCIRCUIT":{if(h.name==h.name.toUpperCase()){var m=h.name.toLowerCase();a[h.name]=m,h.name=m}var v=h.body.join(`
`),g=h.args,y=new Ne;y.importQuil(v,e,n,g,a,h.line+1),y.params=JSON.parse(JSON.stringify(h.params)),o.registerGate(h.name,y.save())}break;case"GATE":switch(h.name){case"DECLARE":break;case"HALT":break;case"PRAGMA":break;default:{var _=u(h.name);if(_){var M={};if(_.gateDef){var A=_.gateDef,E=_.quilDef;if((E.params||[]).length!=(h.params||[]).length){var x="Invalid number of params. Expected "+(E.params||[]).length+" got "+(h.params||[]).length+".";if(e){e([{msg:x,line:s+h.line,col:h.col}]);return}else throw new Error(x)}else for(var N=0;N<A.params.length;N++){var D=A.params[N],C=E.params.indexOf(D);if(C<0||C>=h.params.length){var x='Internal error: QUIL definition for gate "'+h.name+" is invalid.";if(e){e([{msg:x,line:s+h.line,col:h.col}]);return}else throw new Error(x)}else M[D]=h.params[C]}}else{var A=_.customGate;if((A.params||[]).length!=(h.params||[]).length){var x="Invalid number of params. Expected "+(A.params||[]).length+" got "+(h.params||[]).length+".";if(e){e([{msg:x,line:s+h.line,col:h.col}]);return}else throw new Error(x)}else for(var N=0;N<A.params.length;N++){var D=A.params[N];M[D]=h.params[N]}}if(h.name=="MEASURE"){if(h.args.length!=2){var x="Expecting 2 arguments (qubit and target register) but found "+h.args.length+".";if(e){e([{msg:x,line:s+h.line,col:h.col}]);return}else throw new Error(x)}}else{var T=1;if(A.numQubits?T=A.numQubits:A.matrix&&A.matrix.length&&(T=Ce.log2(A.matrix.length)),h.args.length!=T){var x="Expecting "+T+" arguments but found "+h.args.length+".";if(e){e([{msg:x,line:s+h.line,col:h.col}]);return}else throw new Error(x)}}for(var P=[],I={},N=0;N<h.args.length;N++){var U=h.args[N];if(h.name=="MEASURE"){var q=U.indexOf("[");if(q>=0){var z=U.indexOf("]");z>q&&(cregBit=U.substring(q+1,z),cregName=U.substring(0,q),I={bit:cregBit,name:cregName})}else{var G=parseInt(U);if(isNaN(G))if(N>0)P.push(U);else{var x='Invalid argument "'+U+'"';if(e){e([{msg:x,line:s+h.line,col:h.col}]);return}else throw new Error(x)}P.push(G)}}else{var G=parseInt(U);if(isNaN(G)){var x='Invalid argument "'+U+'"';if(e){e([{msg:x,line:s+h.line,col:h.col}]);return}else throw new Error(x)}P.push(G)}}o.appendGate(_.name,P,{params:M,creg:I})}else{var x='Cannot recognize "'+h.name+'".';if(e){e([{msg:x,line:s+h.line,col:h.col}]);return}else throw new Error(x)}}}break}}e&&e([])};Ne.prototype.importIonq=function(t,e){var n=this,r=t.qubits||1;if(n.init(r),!t.circuit){var a="Invalid file format.";if(e){e([{msg:a,line:-1,col:-1}]);return}else throw new Error(a)}function s(o){if(n.customGates&&n.customGates[o])return{name:o,customGate:n.customGates[o]};for(var u in n.basicGates){var l=n.basicGates[u];if(l.exportInfo&&l.exportInfo.ionq&&(l.exportInfo.ionq.name&&l.exportInfo.ionq.name==o||l.exportInfo.ionq.names&&l.exportInfo.ionq.names.indexOf(o)>=0))return{name:u,gateDef:l}}return null}t.circuit.map(function(o){var u=s(o.gate);if(!u){var l='Unknown gate "'+o.gate+'"';if(e){e([{msg:l,line:-1,col:-1}]);return}else throw new Error(l)}var f=[];typeof o.control<"u"&&f.push(o.control),typeof o.controls<"u"&&(f=f.concat(o.controls)),typeof o.target<"u"&&f.push(o.target),typeof o.targets<"u"&&(f=f.concat(o.targets));var c=[];typeof o.rotation<"u"&&c.push(o.rotation),typeof o.phase<"u"&&c.push(o.phase),typeof o.phases<"u"&&(c=c.concat(o.phases));var p=u.gateDef?u.gateDef.matrix?Ce.log2(u.gateDef.matrix.length):1:u.customGate.numQubits||1,d=u.gateDef?u.gateDef.params||[]:u.customGate.params||[];if(f.length!=p){var l='Gate "'+o.gate+'": invalid number of qubits. Expected '+p+" but got "+f.length+".";if(e){e([{msg:l,line:-1,col:-1}]);return}else throw new Error(l)}if(c.length!=d.length){var l='Gate "'+o.gate+'": invalid number of params. Expected '+d.length+" but got "+c.length+".";if(e){e([{msg:l,line:-1,col:-1}]);return}else throw new Error(l)}var h={};c.length&&(h.params={},d.map(function(m,v){h.params[m]=o.rotation?c[v]:2*Ce.pi*c[v]})),n.appendGate(u.name,f,h)}),e&&e([])};Ne.prototype.exportToIonq=function(t,e){var n=this.options&&this.options.params?this.options.params:{},n=JSON.parse(JSON.stringify(n));for(var r in n)n[r]=Ce.evaluate(n[r]);var a=new Ne;a.load(this.save(!0));for(var s={qubits:a.numQubits,circuit:[]},o=a.numCols(),u=0;u<o;u++)for(var l=0;l<a.numQubits;l++){var f=a.getGateAt(u,l);if(f&&f.connector==0){var c=a.getGateDef(f.name);if(c.exportInfo&&c.exportInfo.ionq)if(c.exportInfo.ionq.name||c.exportInfo.ionq.names){var p={gate:c.exportInfo.ionq.name||c.exportInfo.ionq.names[0]};c.params&&c.params.length&&(p[c.exportInfo.ionq.paramsKey]=[],c.params.map(function(d){var h=Ce.evaluate(f.options.params[d],n);c.exportInfo.ionq.paramsKey!="rotation"&&(h=h/(2*Ce.pi)),p[c.exportInfo.ionq.paramsKey].push(h)})),s.circuit.push(p)}else{var p={gate:'Export gate "'+f.name+'" to IONQ not supported yet. Comming soon.'};s.circuit.push(p)}else{var p={gate:'Export gate "'+f.name+'" to IONQ not supported yet. Comming soon.'};s.circuit.push(p)}}}return s};Ne.prototype.exportQuirk=function(t){var e=this,s=null;function n(Se){for(var le=[],Q=0;Q<Se;Q++)le.push(Q);return le}function r(Se,le){return le.indexOf(Se)>-1}t=!0;var a=this.save(t),s=new Ne,o=new Ne;s.load(a),o.load(a);var u={cols:[],gates:[]},l=null,f=this.options&&this.options.params?this.options.params:{},c=new Ne,p={};if(!t)for(var T=o.numCols(),d=T-1;d>=0;d--)for(var h=0;h<o.numQubits;h++){var m=o.gates[h][d];if(m&&m.connector==0&&!o.basicGates[m.name]){customDecomposedCircuit=o.decomposeGateAt(d,h);var v=!1;p[m.name]={info:[],isDecomposeCustomCircuit:null};for(var g=0;g<customDecomposedCircuit.numCols();g++)for(var y=0;y<customDecomposedCircuit.numQubits;y++){var _=customDecomposedCircuit.getGateAt(g,y);if(_){var x=customDecomposedCircuit.basicGates[_.name];x.exportInfo&&!x.exportInfo.quirk&&(v=v||!0),_.connector==0&&p[m.name].info.push({gateInCustomCircuit:_,column:d})}p[m.name].isDecomposeCustomCircuit=v}v&&s.gates.map(function(le,Q){le.map(function(Ee){Ee&&Ee.name==m.name&&s.removeGate(Ee.id)})})}}gateKeys=Object.keys(p);for(var M=0;M<gateKeys.length;M++)if(gateKey=gateKeys[M],p[gateKey].isDecomposeCustomCircuit)for(var A=p[gateKey].info.length-1;A>=0;A--){var E=p[gateKey].info[A],N=E.gateInCustomCircuit;s.insertGate(N.name,E.column,N.wires,N.options)}for(var D=null,C=null,d=0;d<T;d++)for(var h=0;h<s.numQubits;h++){var m=s.getGateAt(d,h);m&&(C&&C.name!=m.name&&C.connector!=0&&D==d&&(s.removeGate(m.id),s.insertGate(m.name,m.column+1,m.wires,m.options)),C=m,D=d)}for(var T=s.numCols(),d=0;d<T;d++){for(var P=[],I=[],U=!1,h=0;h<s.numQubits;h++){var m=s.getGateAt(d,h);if(!m||m.name=="measure"||m.name=="reset")(U||!r(h,I))&&P.push(1);else{var q=s.basicGates[m.name],z=Ce.max(m.wires),G=Ce.min(m.wires),F=m.wires.slice(),I=n(z);if(q){var k="",O=!1;if(U=!0,q.exportInfo&&q.exportInfo.quirk&&(k=q.exportInfo.quirk.name,O=q.exportInfo.quirk.controlled),q.matrix.length==4&&(k&&m.name=="swap"&&m.connector<m.wires.length-2&&O||m.name!="swap"&&m.connector<m.wires.length-1&&O)&&(k="•"),q.matrix.length==8&&(k&&m.name=="cswap"&&m.connector<m.wires.length-2&&O||m.name!="cswap"&&m.connector<m.wires.length-1&&O)&&(k="•"),k&&P.push(k),!k){k="~"+m.name,q.params.length&&m.options.params&&q.params.map(function(ne){angle=Ce.round(Ce.evaluate(m.options.params[ne],f),7),k+="_"+angle});var W="";W+="{";var X=e.getRawGate(q,m.options),ee=F.sort(),J=[];if(m.wires.map(function(ne){J.push(ee.indexOf(ne))}),z-G+1>m.wires.length||m.wires[0]>m.wires[1]?l=s.transformMatrix(z-G+1,X,J):l=X,l.map(function(ne,se){se>0&&(W+=","),W+="{",ne.map(function(xe,ve){ve>0&&(W+=","),typeof xe!="object"?xe=Ce.complex(xe).toString():xe=xe.toString(),W+=xe}),W+="}"}),W+="}",m.connector==0){var Y=u.gates.find(function(ne){return ne.id==k});Y||u.gates.push({id:k,matrix:W});for(var ie=!1,K=0;K<P.length;K++)P[K]==k&&(ie=!0);ie?P.push(1):P.push(k)}else if(h<m.wires[0]){u.gates.push({id:k,matrix:W});var Y=u.gates.find(function(xe){return xe.id==k});Y||u.gates.push({id:k,matrix:W});for(var ie=!1,K=0;K<P.length;K++)P[K]==k&&(ie=!0);ie?P.push(1):P.push(k)}}}else{var re=[];if(U=!1,m.connector==0){var oe=c.gates.find(function(ne){return ne&&ne[0]&&ne[0].name==m.name});if(!oe){var ce=m.wires[0];m.wires.map(function(ne){re.push(ne-ce)}),c.registerGate(m.name,e.customGates[m.name]),c.appendGate(m.name,re)}P.push("~"+m.name)}else P.push(1)}}}u.cols.push(P)}if(!t){var me=s.usedGates();me.map(function(Se){var le=s.basicGates[Se];if(!le){var Q=e.customGates[Se];if(Q){var Ee=new Ne;for(customCol=0;customCol<c.numCols();customCol++)for(customWire=0;customWire<c.numGates();customWire++){var ne=c.getGateAt(customCol,customWire);ne&&ne.name==Se&&(customGateObj=c.decomposeGateAt(customCol,customWire),Ee.load(customGateObj))}u.gates.push({id:"~"+Se,circuit:Ee.exportQuirk(!0)})}}})}return u};Ne.prototype.exportCirq=function(t,e,n,r,a,s,o){var u={comment:t,decompose:e,versionStr:r,asJupyter:a,shots:s,exportTfq:o};return this.exportToCirq(u,n)};Ne.prototype.exportQSharp=function(t,e,n,r,a,s,o){var u={comment:t,decompose:e,versionStr:r,asJupyter:a,circuitName:s,indentDepth:o};return this.exportToQSharp(u,n)};Ne.prototype.exportQobj=function(t,e,n,r){var a={circuitName:t,experimentName:e,numShots:n};return this.exportToQobj(a,r)};Ne.prototype.importQobj=function(t,e){var n=this;if(this.init(),!t||!t.experiments||!t.experiments.length){e&&e([{msg:"Invalid input file: no experiments found."}]);return}var r=t.experiments[0],a=r.header||{};this.init(parseInt(a.n_qubits||0));var s={};if(a.creg_sizes&&a.creg_sizes.length)for(var o=0,u=0;u<a.creg_sizes.length;u++){var l=a.creg_sizes[u];if(l.length>1){var f=l[0]+"",c=parseInt(l[1]);this.createCreg(f,c);var p=(1<<o+c)-(1<<o);s[f]={mask:p,offset:o},o+=c}}function d(I,U){for(var q in s){var z=s[q];if(z.mask==I)return{creg:q,value:U>>z.offset}}}function h(I){var U=0;for(var q in n.cregs){var z=n.cregs[q];if(U+z.length>I)return{name:q,bit:I-U};U+=z.length}return null}r.instructions;for(var m={},v=0;v<r.instructions.length;v++){var g=r.instructions[v];switch(g.name){case"bfunc":{var y=d(parseInt(g.mask),parseInt(g.val));if(!y){var _="Invalid classical condition.";if(e){e([{msg:_}]);return}else throw new Error(_)}m[g.register]=y}break;case"measure":for(var x=0;x<g.qubits.length;x++){var M=g.qubits[x],A=g.memory[x],E=h(A);if(!E){var _="Invalid measurement destination.";if(e){e([{msg:_}]);return}else throw new Error(_)}var N={creg:E};this.appendGate("measure",M,N)}break;case"barrier":break;default:{var N={params:{},condition:{}},D=g.name;switch(D){case"iden":D="id";break}var C=this.basicGates[D];if(!C){var _='Unknown gate "'+g.name+'".';if(e){e([{msg:_}]);return}else throw new Error(_)}if(C.params&&C.params.length){if(!g.params||!g.params.length||g.params.length!=C.params.length){var _='Invalid number of params for gate "'+g.name+'".';if(e){e([{msg:_}]);return}else throw new Error(_)}for(var T=0;T<C.params.length;T++){var P=C.params[T];N.params[P]=g.params[T]}}if(typeof g.conditional<"u"){var y=m[g.conditional];if(!y){var _="Invalid classical condition.";if(e){e([{msg:_}]);return}else throw new Error(_)}N.condition=y}this.appendGate(D,g.qubits,N)}}}e&&e([])};Ne.prototype.exportTFQ=function(t,e,n,r,a,s){var o={comment:t,decompose:e,versionStr:r,asJupyter:a,shots:s};return this.exportToTFQ(o,n)};Ne.prototype.exportBraket=function(t,e,n,r,a,s,o,u,l){var f={comment:t,decompose:e,versionStr:r,asJupyter:a,shots:s,hybrid:o,encoderDecoder:u,indentDepth:l};return this.exportToBraket(f,n)};Ne.prototype.exportSVG=function(t,e){var n=e||{};return n.embedded=!!t,this.exportToSVG(n)};Ne.prototype.exportToSVG=function(n){var e=this,n=n||{};n.embedded=n.embedded||!1,n.cellWidth=n.cellWidth||40,n.cellHeight=n.cellHeight||40,n.hSpacing=n.hSpacing||28,n.vSpacing=n.vSpacing||34,n.blackboxPaddingX=n.blackboxPaddingX||2,n.blackboxPaddingY=n.blackboxPaddingY||2,n.blackboxLineColor=n.blackboxLineColor||"black",n.blackboxSelectedLineColor=n.blackboxSelectedLineColor||"black",n.wireColor=n.wireColor||"black",n.gateLineColor=n.gateLineColor||"black",n.gateSelectedLineColor=n.gateSelectedLineColor||"black",n.cWireColor=n.cWireColor||"silver",n.cWireSelectedColor=n.cWireSelectedColor||"silver",n.cArrowSize=n.cArrowSize||10,n.hWireColor=n.hWireColor||"black",n.edWireColor=n.edWireColor||"black",n.wireWidth=n.wireWidth||1,n.wireTextHeight=n.wireTextHeight||8,n.wireTextDown=n.wireTextDown||16,n.wireMargin=n.wireMargin||20,n.wireLabelWidth=n.wireLabelWidth||40,n.dotRadius=n.dotRadius||5,n.paramTextHeight=n.paramTextHeight||6,n.selectionPaddingX=n.selectionPaddingX||4,n.selectionPaddingY=n.selectionPaddingY||4,n.selectionLineColor=n.selectionLineColor||"#2185D0",n.drawBlochSpheres=n.drawBlochSpheres||!1,typeof n.drawHybrid>"u"&&(n.drawHybrid=this.options?!!this.options.hybrid:!1),typeof n.encoderDecoder>"u"&&(n.drawEncoderDecoder=this.options?!!this.options.encoderDecoder:!1);var r=this.numQubits,a=this.numCols(),s=this.cregCount(),o=0,u=0,l=a;n.drawBlochSpheres&&l++;var f=l;n.drawHybrid&&(l+=2),n.drawEncoderDecoder&&(o=1,l+=2,f+=1,u=n.cellHeight+n.vSpacing);var c=function(j){return n.wireLabelWidth+(n.cellWidth+n.hSpacing)*j+n.hSpacing},p=function(j){return(n.cellHeight+n.vSpacing)*j+n.vSpacing+u},d=c(l),h=c(f),m=(n.cellHeight+n.vSpacing)*(r+s+(n.drawHybrid?1:0))+n.vSpacing+u,v=(n.cellHeight+n.vSpacing)*(r+s)+n.vSpacing+n.cellHeight/2+u,g=function(j){var pe=0;for(var he in e.cregs){if(he==j)return pe;pe++}return pe},y=function(j,pe,he,Ae){var Fe=(Ae-90)*Math.PI/180;return{x:j+he*Math.cos(Fe),y:pe+he*Math.sin(Fe)}},_=function(j,pe,he,Ae,Fe){var qe=y(j,pe,he,Fe),Ze=y(j,pe,he,Ae),it="0",ot=["M",qe.x,qe.y,"A",he,he,0,it,0,Ze.x,Ze.y].join(" ");return ot},x=function(j){return(n.cellHeight+n.vSpacing)*j+(n.vSpacing+n.cellHeight/2)+u},M=function(j){return(n.cellHeight+n.vSpacing)*j+n.vSpacing+u},A=function(j){return(n.cellHeight+n.vSpacing)*(r+g(j))+(n.vSpacing+n.cellHeight/2)+u},E=function(j,pe,he,Ae,Fe){var qe=n.cellWidth,Ze=n.cellHeight,it="";return it+='<rect class="qc-gate-box" x="'+j+'" y="'+pe+'" width="'+qe+'" height="'+Ze+'" stroke="'+(Fe?n.gateSelectedLineColor:n.gateLineColor)+'" fill="white" stroke-width="1" />',Ae&&(it+='<text class="qc-gate-label" x="'+(j+qe/2)+'" y="'+(pe+Ze/2)+'" dominant-baseline="middle" text-anchor="middle" fill="'+(Fe?n.gateSelectedLineColor:n.gateLineColor)+'">'+Ae+"</text>"),it},N=function(j,pe,he,Ae,Fe){var qe=n.cellWidth*2,Ze=n.cellHeight,it="";return it+='<rect class="qc-gate-rect" x="'+j+'" y="'+pe+'" width="'+qe+'" height="'+Ze+'" stroke="'+n.gateLineColor+'" fill="white" stroke-width="1" />',Ae&&(it+='<text class="qc-gate-label" x="'+(j+qe/2)+'" y="'+(pe+Ze/2)+'" dominant-baseline="middle" text-anchor="middle">'+Ae+"</text>"),it},D=function(j,pe,he,Ae,Fe){var qe=j+n.cellWidth/2,Ze=pe+n.cellHeight/2,it=n.cellWidth*.8,ot=n.cellHeight*.8,tt=j+(n.cellWidth-it)/2,Nt=pe+(n.cellHeight-ot)/2,Xt="";return Xt+='<ellipse class="qc-gate-not" cx="'+qe+'" cy="'+Ze+'" rx="'+it/2+'" ry="'+ot/2+'" stroke="'+(Fe?n.gateSelectedLineColor:n.gateLineColor)+'" fill="white" stroke-width="1" />',Ae&&(Xt+='<text class="qc-gate-label" x="'+(tt+it/2)+'" y="'+(Nt+ot/2)+'" dominant-baseline="middle" text-anchor="middle">'+Ae+"</text>"),Xt},C=function(j,pe,he,Ae){var Fe=j+n.cellWidth/2,qe=pe+n.cellHeight/2,Ze=n.cellWidth*.8,it=n.cellHeight*.8,ot=j+(n.cellWidth-Ze)/2,tt=pe+(n.cellHeight-it)/2,Nt="";return Nt+='<ellipse class="qc-gate-not" cx="'+Fe+'" cy="'+qe+'" rx="'+Ze/2+'" ry="'+it/2+'" stroke="'+(Ae?n.gateSelectedLineColor:n.gateLineColor)+'" fill="white" stroke-width="1" />',Nt+='<line class="qc-gate-not-line" x1="'+Fe+'" x2="'+Fe+'" y1="'+tt+'" y2="'+(tt+it)+'" stroke="'+(Ae?n.gateSelectedLineColor:n.gateLineColor)+'" stroke-width="1" />',Nt+='<line class="qc-gate-not-line" x1="'+ot+'" x2="'+(ot+Ze)+'" y1="'+qe+'" y2="'+qe+'" stroke="'+(Ae?n.gateSelectedLineColor:n.gateLineColor)+'" stroke-width="1" />',Nt},T=function(j,pe,he,Ae){var Fe=n.cellWidth,qe=n.cellHeight,Ze=j+Fe/2,it=pe+qe/2,ot=qe/5,tt="";return tt+='<rect class="qc-gate-box" x="'+j+'" y="'+pe+'" width="'+Fe+'" height="'+qe+'" stroke="'+(Ae?n.gateSelectedLineColor:n.gateLineColor)+'" fill="white" stroke-width="1" />',tt+='<path class="gc-gate-gauge-arc" d="'+_(Ze,it+ot,Fe/2.3,300,60)+'" stroke="'+(Ae?n.gateSelectedLineColor:n.gateLineColor)+'" fill="none" stroke-width="1" />',tt+='<line class="qc-gate-gauge-scale" x1="'+Ze+'" x2="'+(j+Fe-ot)+'" y1="'+(it+ot)+'" y2="'+(pe+ot)+'" stroke="'+(Ae?n.gateSelectedLineColor:n.gateLineColor)+'" stroke-width="1" />',tt},P=function(j,pe,he,Ae){var Fe=n.cellWidth*.4,qe=n.cellHeight*.4,Ze=j+(n.cellWidth-Fe)/2,it=pe+(n.cellHeight-qe)/2,ot="";return ot+='<line class="qc-gate-x" x1="'+Ze+'" x2="'+(Ze+Fe)+'" y1="'+it+'" y2="'+(it+qe)+'" stroke="'+(Ae?n.gateSelectedLineColor:n.gateLineColor)+'" stroke-width="1" />',ot+='<line class="qc-gate-x" x1="'+Ze+'" x2="'+(Ze+Fe)+'" y1="'+(it+qe)+'" y2="'+it+'" stroke="'+(Ae?n.gateSelectedLineColor:n.gateLineColor)+'" stroke-width="1" />',ot},I=function(j,pe,he,Ae){var Fe=n.cellWidth,qe=n.cellHeight,Ze=j+Fe/2,it=pe+qe/2,ot="";return ot+='<circle class="qc-gate-dot" cx="'+Ze+'" cy="'+it+'" r="'+n.dotRadius+'" stroke="'+(Ae?n.gateSelectedLineColor:n.wireColor)+'" fill="'+(Ae?n.gateSelectedLineColor:n.wireColor)+'" stroke-width="1" />',ot},U=function(j,pe,he,Ae){var Fe=n.cellWidth,qe=n.cellHeight,Ze=j+Fe/2,it=pe+qe/2,ot="";return ot+='<circle class="qc-gate-ndot" cx="'+Ze+'" cy="'+it+'" r="'+n.dotRadius+'" stroke="'+(Ae?n.gateSelectedLineColor:n.wireColor)+'" fill="white" stroke-width="1" />',ot},q=function(j,pe,he,Ae,Fe,qe,Ze){var it="";switch(Fe!="box"&&qe&&(it+=E(j,pe,he,"",Ze)),Fe){case"box":it+=E(j,pe,he,Ae,Ze);break;case"rect":it+=N(j,pe,he,Ae);break;case"circle":it+=D(j,pe,he,Ae,Ze);break;case"not":it+=C(j,pe,he,Ze);break;case"x":it+=P(j,pe,he,Ze);break;case"dot":it+=I(j,pe,he,Ze);break;case"ndot":it+=U(j,pe,he,Ze);break;case"gauge":it+=T(j,pe,he,Ze);break}return it},z=function(j,pe,he){var Ae=e.basicGates[j.name]?e.basicGates[j.name].drawingInfo:null;Ae||(Ae=e.customGates[j.name]?e.customGates[j.name].drawingInfo:null);var Fe=!1,qe=n&&n.selection&&n.selection.indexOf(j.id)>=0;for(Ae||(j.wires.length==1?Ae={connectors:["box"]}:(Ae={connectors:[]},Fe=!0));Ae.connectors.length<j.wires.length;)Ae.connectors.push("box");var Ze=Math.min.apply(null,j.wires),it=Math.max.apply(null,j.wires),ot=A(it),tt="";if(tt+='<g class="qc-gate-group" data-id="'+j.id+'" data-gate="'+j.name+'">',Fe){var Nt=c(pe)-n.blackboxPaddingX,Xt=M(Ze)-n.blackboxPaddingY,Ln=n.cellWidth+2*n.blackboxPaddingX,Hn=M(it)+n.cellHeight-Xt+n.blackboxPaddingY,br=Nt+Ln/2;ot=Xt+Hn,tt+='<text class="qc-blackbox-label" x="'+br+'" y="'+(Xt-n.wireTextHeight-n.blackboxPaddingY*2)+'" dominant-baseline="hanging" text-anchor="middle" font-size="75%">'+(Ae.label||j.name)+"</text>",tt+='<rect class="qc-gate-blackbox" x="'+Nt+'" y="'+Xt+'" width="'+Ln+'" height="'+Hn+'" stroke="'+(qe?n.blackboxSelectedLineColor:n.blackboxLineColor)+'" fill="transparent" stroke-width="1" />'}if(qe){var Nt=c(pe)-n.selectionPaddingX,Xt=M(Ze)-n.selectionPaddingY,Ln=n.cellWidth+2*n.selectionPaddingX,Hn=M(it)+n.cellHeight-Xt+n.selectionPaddingY,br=Nt+Ln/2;ot=Xt+Hn,tt+='<rect class="qc-gate-selection" x="'+Nt+'" y="'+Xt+'" width="'+Ln+'" height="'+Hn+'" stroke="'+n.selectionLineColor+'" fill="transparent" stroke-dasharray="4" stroke-width="1" />'}if(Ze!=it&&!Fe){var Un=c(pe)+n.cellWidth/2,Rr=p(Ze)+n.cellHeight/2,ar=p(it)+n.cellHeight/2;tt+='<line class="qc-gate-link" x1="'+Un+'" x2="'+Un+'" y1="'+Rr+'" y2="'+ar+'" stroke="'+(qe?n.gateSelectedLineColor:n.wireColor)+'" stroke-width="1" />'}var Xr=Math.max.apply(null,j.wires);if(j.wires.map(function(Fn,sr){switch(Ae.connectors[sr]){case"box":{var Ir=c(pe),Sn=p(Fn);tt=tt+E(Ir,Sn,j.name,Fe?Hi(sr,r):Ae.label||j.name,qe),!Fe&&Fn==it&&(ot=Sn+n.cellHeight)}break;case"circle":{var Ir=c(pe),Sn=p(Fn);if(tt=tt+D(Ir,Sn,j.name,Fe?Hi(sr,r):Ae.label||j.name,qe),!Fe&&Fn==it){var er=n.cellHeight*.8;ot=Sn+er+(n.cellHeight-er)/2}}break;case"not":{var Pr=c(pe),Ha=p(Fn);if(tt=tt+C(Pr,Ha,j.name,qe),!Fe&&Fn==it){var er=n.cellHeight*.8;ot=Ha+er+(n.cellHeight-er)/2}}break;case"x":{var Pr=c(pe),Ha=p(Fn);tt=tt+P(Pr,Ha,j.name,qe),!Fe&&Fn==it&&(ot=x(it))}break;case"dot":{var Pr=c(pe),Ha=p(Fn);tt=tt+I(Pr,Ha,j.name,qe),!Fe&&Fn==it&&(ot=x(it)+n.dotRadius)}break;case"ndot":{var Pr=c(pe),Ha=p(Fn);tt=tt+U(Pr,Ha,j.name,qe),!Fe&&Fn==it&&(ot=x(it)+n.dotRadius)}break;case"gauge":{var Ir=c(pe),Sn=p(Fn);tt=tt+T(Ir,Sn,j.name,qe),!Fe&&Fn==it&&(ot=Sn+n.cellHeight)}break}if(j.options&&j.options.params&&Fn==Xr){var Ir=c(pe),Sn=p(Fn),de=Ir+n.cellWidth/2,Le="",Ve=0;for(var $e in j.options.params){Le&&(Le+=", ");var ke=j.options.params[$e];typeof ke=="string"&&ke.match(/^[\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?$/)&&(ke=parseFloat(ke)),typeof ke=="number"&&(ke=Ce.round(ke,3)),Le+=ke,Ve++}Le.length>26&&(Le="("+Ve+" params)"),tt+='<text class="qc-gate-params" x="'+de+'" y="'+(Sn+n.cellHeight+n.paramTextHeight)+'" dominant-baseline="hanging" text-anchor="middle" font-size="75%">'+Le+"</text>"}}),j.name=="measure"&&j.options&&j.options.creg&&j.options.creg.name){var Un=c(pe)+n.cellWidth/2,Rr=ot,ar=A(j.options.creg.name);tt+='<line class="qc-gate-link-c" x1="'+Un+'" x2="'+Un+'" y1="'+Rr+'" y2="'+ar+'" stroke="'+(qe?n.cWireSelectedColor:n.cWireColor)+'" stroke-width="1" />',tt+='<line class="qc-gate-link-c" x2="'+Un+'" x1="'+(Un-n.cArrowSize/2)+'" y1="'+(ar-n.cArrowSize)+'" y2="'+ar+'" stroke="'+(qe?n.cWireSelectedColor:n.cWireColor)+'" stroke-width="1" />',tt+='<line class="qc-gate-link-c" x2="'+Un+'" x1="'+(Un+n.cArrowSize/2)+'" y1="'+(ar-n.cArrowSize)+'" y2="'+ar+'" stroke="'+(qe?n.cWireSelectedColor:n.cWireColor)+'" stroke-width="1" />',tt+='<text class="qc-wire-label" x="'+Un+'" y="'+(ar+n.wireTextHeight)+'" dominant-baseline="hanging" text-anchor="middle" font-size="75%">'+j.options.creg.bit+"</text>"}if(j.options&&j.options.condition&&j.options.condition.creg){var Un=c(pe)+n.cellWidth/2,Rr=ot,ar=A(j.options.condition.creg);tt+='<line class="qc-gate-link-c" x1="'+Un+'" x2="'+Un+'" y1="'+Rr+'" y2="'+ar+'" stroke="'+(qe?n.cWireSelectedColor:n.cWireColor)+'" stroke-width="1" />',tt+='<circle class="qc-gate-dot-c" cx="'+Un+'" cy="'+ar+'" r="'+n.dotRadius+'" stroke="'+(qe?n.cWireSelectedColor:n.cWireColor)+'" fill="'+(qe?n.cWireSelectedColor:n.cWireColor)+'" stroke-width="1" />',tt+='<text class="qc-wire-label" x="'+Un+'" y="'+(ar+n.wireTextHeight)+'" dominant-baseline="hanging" text-anchor="middle" font-size="75%">== '+j.options.condition.value+"</text>"}return tt+="</g>",tt},G=function(j,pe,he){var Ae="",Fe=n.cellWidth+n.hSpacing,qe=n.cellHeight+n.vSpacing,Ze=c(j+pe)-n.hSpacing,it=p(he)-n.vSpacing;return he==r&&(qe=n.vSpacing),pe==a&&(Fe=n.hSpacing),Ae+='<rect class="qc-gate-placeholder" data-row="'+he+'" data-col="'+pe+'" x="'+Ze+'" y="'+it+'" width="'+Fe+'" height="'+qe+'" stroke="none" fill="transparent" stroke-width="0" />',Ae},F=function(j,pe,he,Ae){var Fe="",qe=n.cellWidth,Ze=n.cellHeight,it=c(pe+he),ot=p(Ae);return Fe+='<rect class="qc-gate-handle" data-id="'+j.id+'" data-gate="'+j.name+'" data-row="'+Ae+'" data-col="'+he+'" x="'+it+'" y="'+ot+'" width="'+qe+'" height="'+Ze+'" stroke="none" fill="transparent" stroke-width="0" />',Fe},k=function(j,pe,he,Ae){var Fe="",qe=n.cellWidth,Ze=n.cellHeight,it=c(j),ot=p(pe);return Fe+='<g class="'+he+'" data-row="'+pe+'">',Fe+='<rect class="qc-canvas-box" x="'+it+'" y="'+ot+'" width="'+qe+'" height="'+Ze+'" stroke="transparent" fill="white" stroke-width="1" />',Fe+='<foreignObject class="qc-canvas-object" x="'+it+'" y="'+ot+'" width="'+qe+'" height="'+Ze+'">',Fe+='<div style="position:relative;">',Fe+='<canvas id="'+Ae+"-"+pe+'" class="'+Ae+'" width="'+qe+'" height="'+Ze+'">',Fe+="</canvas>",Fe+="</div>",Fe+="</foreignObject>",Fe+="</g>",Fe},O=function(j){return j.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};if(n.gateGallery||n.gateGalleryRaw||n.customGateGallery){var W=[];if(n.gateGallery||n.gateGalleryRaw){var X=[];for(var ee in this.basicGates){var J=this.basicGates[ee],Y=JSON.parse(JSON.stringify(J.drawingInfo||{connectors:["box"]}));if(Y.connectors){var ie=Y.label||ee,K=Y.connectors?Y.connectors[Y.connectors.length-1]:"box";n.gateGallery&&(K=="x"||K=="dot")&&(K="box");var re=ie+"|"+K;if(X.indexOf(re)<0&&ee!="ccx"){X.push(re);var oe="";n.embedded||(oe+='<?xml version="1.0"?>',oe+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),oe+='<svg class="qc-gate-gallery-item" data-gate="'+O(ee)+'" data-content="'+O(J.description)+'" width="'+n.cellWidth+'" height="'+n.cellHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',oe=oe+q(0,0,ee,ie,K,!!n.gateGallery,!1),oe+="</svg>",n.gateGallery?W.push(oe):W.push({name:ee,svg:oe})}}}var ce="";n.embedded||(ce+='<?xml version="1.0"?>',ce+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),ce+='<svg class="qc-gate-gallery-item" data-gate="dot" data-content="Control" width="'+n.cellWidth+'" height="'+n.cellHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',ce=ce+q(0,0,"dot","dot","dot",!!n.gateGallery,!1),ce+="</svg>",n.gateGallery?W.push(ce):W.push({name:"dot",svg:ce});var me="";n.embedded||(me+='<?xml version="1.0"?>',me+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),me+='<svg class="qc-gate-gallery-item" data-gate="ndot" data-content="Control" width="'+n.cellWidth+'" height="'+n.cellHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',me=me+q(0,0,"ndot","ndot","ndot",!!n.gateGallery,!1),me+="</svg>",n.gateGallery?W.push(me):W.push({name:"dot",svg:me})}if(n.customGateGallery)for(var ee in this.customGates){var oe="";n.embedded||(oe+='<?xml version="1.0"?>',oe+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),oe+='<svg class="qc-custom-gate-gallery-item" data-gate="'+ee+'" width="'+n.cellWidth*2+'" height="'+n.cellHeight+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',oe=oe+q(0,0,ee,ee,"rect",!1,!1),oe+="</svg>",W.push(oe)}return W}else{var oe="";if(n.embedded||(oe+='<?xml version="1.0"?>',oe+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'),oe+='<svg class="qc-circuit" width="'+d+'" height="'+m+'" version="1.1" xmlns="http://www.w3.org/2000/svg">',n.placeholders)for(var Se=0;Se<=a;Se++)for(var le=0;le<=this.numQubits;le++)oe+=G(o,Se,le);for(var le=0;le<r;le++){var Q=x(le),Ee="0";n.customGate&&(Ee=Hi(le,r)),oe+='<text class="qc-wire-init" x="0" y="'+Q+'" dominant-baseline="middle" text-anchor="start">|'+Ee+"&#x27E9;</text>",oe+='<line class="qc-wire" x1="'+n.wireMargin+'" x2="'+h+'" y1="'+Q+'" y2="'+Q+'" stroke="'+n.wireColor+'" stroke-width="'+n.wireWidth+'" />',oe+='<text class="qc-wire-label" x="'+n.wireMargin+'" y="'+(Q-n.wireTextHeight*2)+'" dominant-baseline="hanging" text-anchor="start" font-size="75%">q'+le+"</text>"}for(var ne in this.cregs){var Q=A(ne);oe+='<text class="qc-wire-init" x="0" y="'+Q+'" dominant-baseline="middle" text-anchor="start">0</text>',oe+='<line class="qc-wire-c" x1="'+n.wireMargin+'" x2="'+h+'" y1="'+Q+'" y2="'+Q+'" stroke="'+n.cWireColor+'" stroke-width="'+n.wireWidth+'" />',oe+='<text class="qc-wire-label" x="'+n.wireMargin+'" y="'+(Q-n.wireTextHeight*2)+'" dominant-baseline="hanging" text-anchor="start" font-size="75%">'+ne+"</text>"}for(var Se=0;Se<a;Se++)for(var le=0;le<this.numQubits;le++){var J=this.getGateAt(Se,le);J&&J.connector==0&&(oe+=z(J,o+Se))}for(var Se=0;Se<a;Se++)for(var le=0;le<this.numQubits;le++){var J=this.getGateAt(Se,le);J&&n.placeholders&&(oe+=F(J,o,Se,le))}if(n.drawBlochSpheres){var se=l-1;n.drawHybrid&&(se-=2),n.drawEncoderDecoder&&(se-=1);for(var le=0;le<this.numQubits;le++)oe+=k(se,le,"qc-bloch-group","qc-bloch-canvas")}if(n.drawHybrid){var se=l-2,xe=se,ve=c(xe)+n.blackboxPaddingX,te=M(0)+n.blackboxPaddingY,$=n.cellWidth-2*n.blackboxPaddingX,B=M(r+s-1)+n.cellHeight-te-n.blackboxPaddingY,ae=ve+$/2,ue=te+B/2;cLinkTopY=te+B,oe+='<rect class="qc-cost-h" x="'+ve+'" y="'+te+'" width="'+$+'" height="'+B+'" stroke="'+n.hWireColor+'" fill="white" stroke-width="1" rx="8" />',oe+='<text class="qc-label-h" x="'+ae+'" y="'+ue+'" dominant-baseline="middle" text-anchor="middle" fill="'+n.hWireColor+'" transform="rotate(-90, '+ae+", "+ue+')">Cost</text>';var _e=c(xe+1)+n.blackboxPaddingX,be=_e+$/2;oe+='<marker id="qc-arrow-head" orient="auto" markerWidth="8" markerHeight="10" refX="8" refY="5"><path d="M0,0 V10 L8,5 Z" fill="'+n.hWireColor+'"/></marker>',oe+='<line class="qc-link-h" x1="'+(ve+$)+'" x2="'+_e+'" y1="'+ue+'" y2="'+ue+'" stroke="'+n.hWireColor+'" stroke-width="'+n.wireWidth+'" marker-end="url(#qc-arrow-head)" />',oe+='<rect class="qc-optimizer-h" x="'+_e+'" y="'+te+'" width="'+$+'" height="'+B+'" stroke="'+n.hWireColor+'" fill="white" stroke-width="1" rx="8" />',oe+='<text class="qc-label-h" x="'+be+'" y="'+ue+'" dominant-baseline="middle" text-anchor="middle" fill="'+n.hWireColor+'" transform="rotate(-90, '+be+", "+ue+')">Optimizer</text>';var Pe=be,Te=cLinkTopY,Ie=v;oe+='<line class="qc-wire-h" x1="'+Pe+'" x2="'+Pe+'" y1="'+Te+'" y2="'+Ie+'" stroke="'+n.hWireColor+'" stroke-dasharray="4" stroke-width="1" />';var Oe=0,Be=this.findGlobalParams();if(Be.globalParams.length){Oe=c(Be.cells[0][0])+n.cellWidth+n.hSpacing/2;for(var He=0;He<Be.cells.length;He++){var Qe=Be.cells[He],et=c(Qe[0])+n.cellWidth+n.hSpacing/2,Xe=p(Qe[1])+n.cellHeight+n.vSpacing-n.paramTextHeight/2,je=v,we=c(Qe[0])+n.cellWidth,V=p(Qe[1])+n.cellHeight+n.paramTextHeight*2+4;oe+='<line class="qc-wire-h" x1="'+et+'" x2="'+et+'" y1="'+je+'" y2="'+Xe+'" stroke="'+n.hWireColor+'" stroke-dasharray="4" stroke-width="1" />',oe+='<line class="qc-wire-h" x1="'+et+'" x2="'+we+'" y1="'+Xe+'" y2="'+V+'" stroke="'+n.hWireColor+'" stroke-dasharray="4" stroke-width="1" marker-end="url(#qc-arrow-head)" />'}var Q=v;oe+='<line class="qc-wire-h" x1="'+Oe+'" x2="'+be+'" y1="'+Q+'" y2="'+Q+'" stroke="'+n.hWireColor+'" stroke-dasharray="4" stroke-width="'+n.wireWidth+'" />'}else{Oe=c(f+1);var Q=v;oe+='<line class="qc-wire-h" x1="'+be+'" x2="'+Oe+'" y1="'+Q+'" y2="'+Q+'" stroke="'+n.hWireColor+'" stroke-dasharray="4" stroke-width="'+n.wireWidth+'"  marker-end="url(#qc-arrow-head)" />',oe+='<text class="qc-warning-params-h" x="'+(Oe-5)+'" y="'+Q+'" dominant-baseline="middle" text-anchor="end">(no global params)</text>'}}if(n.drawEncoderDecoder){var se=0,xe=se,ve=c(xe)+n.blackboxPaddingX,te=M(0)+n.blackboxPaddingY,$=n.cellWidth-2*n.blackboxPaddingX,B=M(r+s-1)+n.cellHeight-te-n.blackboxPaddingY,ae=ve+$/2,ue=te+B/2;cLinkTopY=te+B,oe+='<marker id="qc-arrow-head-ed" orient="auto" markerWidth="8" markerHeight="10" refX="8" refY="5"><path d="M0,0 V10 L8,5 Z" fill="'+n.hWireColor+'"/></marker>',oe+='<rect class="qc-encoder-ed" x="'+ve+'" y="'+te+'" width="'+$+'" height="'+B+'" stroke="'+n.edWireColor+'" fill="white" stroke-width="1" rx="8" />',oe+='<text class="qc-label-ed" x="'+ae+'" y="'+ue+'" dominant-baseline="middle" text-anchor="middle" fill="'+n.edWireColor+'" transform="rotate(-90, '+ae+", "+ue+')">Encoder</text>';var Pe=ae,Te=te-(n.cellHeight+n.vSpacing),Ie=te;oe+='<line class="qc-wire-ed" x1="'+Pe+'" x2="'+Pe+'" y1="'+Te+'" y2="'+Ie+'" stroke="'+n.edWireColor+'" stroke-width="1" marker-end="url(#qc-arrow-head-ed)" />',oe+='<text class="qc-label-input-ed" x="'+Pe+'" y="'+(Te-10)+'" dominant-baseline="middle" text-anchor="middle">Input</text>',se=l-1,xe=se,ve=c(xe)+n.blackboxPaddingX,te=M(0)+n.blackboxPaddingY,$=n.cellWidth-2*n.blackboxPaddingX,B=M(r+s-1)+n.cellHeight-te-n.blackboxPaddingY,ae=ve+$/2,ue=te+B/2,cLinkTopY=te,oe+='<rect class="qc-decoder-ed" x="'+ve+'" y="'+te+'" width="'+$+'" height="'+B+'" stroke="'+n.edWireColor+'" fill="white" stroke-width="1" rx="8" />',oe+='<text class="qc-label-ed" x="'+ae+'" y="'+ue+'" dominant-baseline="middle" text-anchor="middle" fill="'+n.edWireColor+'" transform="rotate(-90, '+ae+", "+ue+')">Decoder</text>',Pe=ae,Te=te,Ie=te-(n.cellHeight+n.vSpacing),oe+='<line class="qc-wire-ed" x1="'+Pe+'" x2="'+Pe+'" y1="'+Te+'" y2="'+Ie+'" stroke="'+n.edWireColor+'" stroke-width="1" marker-end="url(#qc-arrow-head-ed)" />',oe+='<text class="qc-label-output-ed" x="'+Pe+'" y="'+(Ie-10)+'" dominant-baseline="middle" text-anchor="middle">Output</text>'}oe+="</svg>"}return oe};Ne.prototype.exportToQiskit=function(t,e,n,r){t=t||{};var a=t.comment,s=t.decompose,o=t.versionStr,u=t.providerName,l=t.backendName,f=t.asJupyter,c=t.shots||1024,p=t.hybrid,d=!!t.encoderDecoder;typeof p>"u"&&(p=this.options?!!this.options.hybrid:!1),typeof d>"u"&&(d=this.options?!!this.options.encoderDecoder:!1);var h=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"",m=this.options&&this.options.encoderDecoderOptions?this.options.encoderDecoderOptions:{},v=m.inputEncoding?m.inputEncoding:{},g=m.outputDecoding?m.outputDecoding:{},y=this;u=u||"Aer",l=l||"",u=="Aer"&&(l||(p&&h.indexOf("state")>=0?l="statevector_simulator":l="qasm_simulator"),l=="aer_simulator"&&(l="qasm_simulator"),l=="aer_simulator_statevector"&&(l="statevector_simulator")),u=="IONQ"&&(l||(l="ionq_simulator"));var _=new Ne;_.load(this.save(s));var x="";if(a){var M=(a||"").split(`
`);M.map(function(Oe){Oe.length>=1&&Oe[0]!="#"&&(x+="# "),x+=Oe,x+=`
`})}var A=function(Oe,Be){if(Oe.isSymbolNode){var He=["pi","sin","cos","tan","asin","acos","atan"];if(He.indexOf(Oe.name)>=0)return"np."+Oe.name;var Qe=Oe.name;if(Be.replaceVars&&typeof Be.replaceVars[Qe]<"u")return Qe=Be.replaceVars[Qe],y.params.indexOf(Qe)>=0&&p?"params["+y.params.indexOf(Qe)+"]":Qe;if(y.params.indexOf(Oe.name)>=0&&p)return"params["+y.params.indexOf(Oe.name)+"]"}},E=function(Oe,Be){var He="",Qe=Oe.split(`
`),et=-1;Qe.map(function(we){var V=we.search(/\S/);V>=0&&(et<0||V<et)&&(et=V)}),et<0&&(et=0);var Xe="";if(et<Be.length)for(var je=0;je<Be.length-et;je++)Xe+=" ";return Qe.map(function(we){He+=Xe+we+`
`}),He};if(e){if(x+="def "+e+"(qc",_.params&&_.params.length)for(var N=0;N<_.params.length;N++)x+=", ",x+=_.params[N];for(var D=0;D<_.numQubits;D++)x+=", ",x+=Hi(D,_.numQubits);x+=`):
`}else if(!n){var C=_.usedGates();x+=`from qiskit import QuantumCircuit, QuantumRegister, ClassicalRegister
`;var T=!1,P=!1;switch(u){case"Aer":x+="from qiskit import execute, "+u+`
`,p&&h.indexOf("state")>=0&&l!="statevector_simulator"&&(x+=`from qiskit_experiments.library import StateTomography
`);break;case"IBMQ":x+="from qiskit import execute, "+u+`
from qiskit.providers.ibmq import least_busy
`,p&&h.indexOf("state")>=0&&(x+=`from qiskit_experiments.library import StateTomography
`);break;case"IONQ":T=!0,x+=`from qiskit_ionq import IonQProvider
`,p&&h.indexOf("state")>=0&&(x+=`from qiskit_experiments.library import StateTomography
`);break}(C.indexOf("ms")>=0||C.indexOf("gpi")>=0||C.indexOf("gpi2")>=0)&&(T=!0,x+=`from qiskit_ionq import GPIGate, GPI2Gate, MSGate
`),T&&(x+=`from qiskit import transpile
`),p&&(x+=`from scipy.optimize import minimize
`,x+=`from collections import Counter
`),d&&(x+=`from quantastica.encoder_decoder import encode_input, decode_output
`),x+=`import numpy as np
`,x+=`
`;var I="";switch(u){case"Aer":x+=I+'backend = Aer.get_backend("'+l+`")
`,x+=`
`;break;case"IBMQ":x+=I+`IBMQ.load_account()
`,x+=I+`provider = IBMQ.get_provider(hub="ibm-q", group="open", project="main")
`,l?x+=I+'backend = provider.get_backend("'+l+`")
`:(x+=I+`backends = provider.backends()
`,x+=I+`backend = least_busy(backends)
`),x+=`
`;break;case"IONQ":{var U=["measure","delay","barrier","reset","snapshot","ms","gpi2","gpi"];P=!0,C.map(function(Oe){U.indexOf(Oe)<0&&(P=!1)}),x+=I+`# Requires QISKIT_IONQ_API_TOKEN environment variable to be set
`,x+=I+`provider = IonQProvider()
`,x+=I+'backend = provider.get_backend("'+l+'"',P&&(x+=', gateset="native"'),x+=`)

`}break}c&&(x+="shots = "+c+`
`,x+=`
`);var q=this.options&&this.options.params?this.options.params:{};if(this.params.length){for(var D=0;D<this.params.length;D++){var z=this.params[D],G=Ce.parse(q[z]),F=G.toString({handler:A});x+=z+" = "+F+`
`}x+=`
`}if(p&&(x+="tolerance = "+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.tolerance&&this.options.hybridOptions.tolerance||"0.001")+`
`,x+=`
`),s||C.map(function(Oe){var Be=_.basicGates[Oe];if(!Be){var He=y.customGates[Oe];if(He){var Qe=new Ne;Qe.load(He);var et={comment:"",decompose:!0,versionStr:o,providerName:"",backendName:!1,asJupyter:!1,shots:!1,hybrid:null,encoderDecoder:!1};x+=Qe.exportToQiskit(et,Oe,n,r)}}}),p&&(I="  ",x+=`def objective_function(params):
`),d){if(I="  ",v.type=="custom"){var k=v.customFunction&&v.customFunction.python?v.customFunction.python:`def custom_encoder(input_data_row, input_encoding):
    pass
`;x+=k+`
`}if(g.type=="custom"){var O=g.customFunction&&g.customFunction.python?g.customFunction.python:`def custom_decoder(counts, output_decoding):
    pass
`;x+=O+`
`}var W=m.functionName||"my_function";x+="def "+W+"(",v.colDefs&&v.colDefs.map(function(Oe,Be){Be>0&&(x+=", "),x+=Oe.name}),x+=`):
`;var X=JSON.parse(JSON.stringify(v));X.colDefs&&X.colDefs.map(function(Oe){Oe.min&&(Oe.min=Ce.evaluate(Oe.min)),Oe.max&&(Oe.max=Ce.evaluate(Oe.max))}),typeof X.data<"u"&&delete X.data,X.type=="custom"?X.customFunction={python:"$custom_encoder$"}:X.customFunction&&delete X.customFunction;var ee=JSON.parse(JSON.stringify(g));ee.colDefs&&ee.colDefs.map(function(Oe){Oe.min&&(Oe.min=Ce.evaluate(Oe.min)),Oe.max&&(Oe.max=Ce.evaluate(Oe.max))}),ee.type=="custom"?ee.customFunction={python:"$custom_decoder$"}:ee.customFunction&&delete ee.customFunction;var J="input_encoding = "+JSON.stringify(X,null,4);J=J.replace('"$custom_encoder$"',"custom_encoder"),x+=E(J,I)+`
`;var Y="output_decoding = "+JSON.stringify(ee,null,4);Y=Y.replace('"$custom_decoder$"',"custom_decoder"),x+=E(Y,I)+`
`}x+=I+`qc = QuantumCircuit()
`,x+=`
`,x+=I+"q = QuantumRegister("+_.numQubits+`, 'q')
`;for(var ie in this.cregs)x+=I+ie+" = ClassicalRegister("+(this.cregs[ie].length||1)+", '"+ie+`')
`;x+=`
`,x+=I+`qc.add_register(q)
`;for(var ie in this.cregs)x+=I+"qc.add_register("+ie+`)
`;if(x+=`
`,d){var K="{";v.colDefs&&(v.colDefs.length&&(K+=" "),v.colDefs.map(function(Oe,Be){Be>0&&(K+=", "),K+='"'+Oe.name+'": '+Oe.name}),v.colDefs.length&&(K+=" ")),K+="}",x+=I+"input_data_row = "+K+`
`,x+=I+`input_qasm = encode_input(input_data_row, input_encoding)
`,x+=I+`input_qc = QuantumCircuit()
`,x+=I+`input_qc = input_qc.from_qasm_str(input_qasm)
`,x+=I+`qc = qc.compose(input_qc)
`,x+=I+`qc.barrier()
`,x+=`
`}}for(var re=_.numCols(),oe=0;oe<re;oe++)for(var ce=0;ce<this.numQubits;ce++){var me=_.getGateAt(oe,ce),Se=null,le=null,Q=null;if(me&&me.connector==0){Q=me.options&&me.options.condition&&me.options.condition.creg?me.options.condition:null;var Ee=_.getGateDef(me.name);if(Ee&&Ee.exportInfo&&!P&&(Ee.exportInfo.qiskit&&Ee.exportInfo.qiskit.replacement?(Se=Ee.exportInfo.qiskit.replacement,Se.map(function(Oe){var Be=new Ne;if(me.options&&me.options.params){var He=Object.keys(me.options.params),Qe=Object.keys(Oe.params);He.map(function(Xe){Qe.indexOf(Xe)>-1&&(Oe.params[Xe]=me.options.params[Xe])})}Be.addGate(Oe.name,oe,me.wires,{params:Oe.params,condition:Q});var et={comment:"",decompose:!1,versionStr:!1,providerName:!1,backendName:!1,asJupyter:!1,shots:!1,hybrid:null,encoderDecoder:!1};x+=E(Be.exportToQiskit(et,!1,!0,!!e||r),I)})):Ee.exportInfo.qiskit&&Ee.exportInfo.qiskit.equivalent&&(le=Ee.exportInfo.qiskit.equivalent,le.map(function(Oe){var Be=new Ne,He=Oe.wires.length>1?me.wires:me.wires[Oe.wires[0]],Qe={};if(Oe.params){var et={};if(me.options&&me.options.params)for(var Xe in me.options.params){var je=Ce.parse(me.options.params[Xe]),we=je.toString({handler:A});et[Xe]=we}for(var V in Oe.params){var je=Ce.parse(Oe.params[V]),we=je.toString({handler:A,replaceVars:et});Qe[V]=we}}Be.addGate(Oe.name,oe,He,{params:Qe,condition:Q});var j={comment:"",decompose:!1,versionStr:!1,providerName:!1,backendName:!1,asJupyter:!1,shots:!1,hybrid:null,encoderDecoder:!1};x+=E(Be.exportToQiskit(j,!1,!0,!!e||r),I)}))),!Se&&!le&&(e||r||p||d)&&(x+="  "),!Se&&!le){var ne=me.name,se=me.options&&me.options.params?me.options.params:{};l=="statevector_simulator"&&ne=="measure"&&p&&(x+="# "),this.basicGates[ne]&&(x+="qc."),Ee&&Ee.exportInfo&&Ee.exportInfo.qiskit&&Ee.exportInfo.qiskit.name?ne=Ee.exportInfo.qiskit.name:ne=me.name;var xe=!1,ve=!1;ne=="ms"&&(xe=!0,ve=!0,ne="MSGate"),ne=="gpi"&&P&&(xe=!0,ve=!0,ne="GPIGate"),ne=="gpi2"&&P&&(xe=!0,ve=!0,ne="GPI2Gate"),xe&&(x+="append("),x+=ne+"(";var te=0;if(se){var Ee=this.basicGates[me.name];if(Ee||(Ee=this.customGates[me.name],x+="qc",te++),Ee){var $=Ee.params||[],B=$.length;if(B){for(var ae=0;ae<B;ae++){te>0&&(x+=", ");var ue=$[ae];if(se[ue]||se[ue].toString()){var G=Ce.parse(se[ue]),_e=G.toString({handler:A});ve&&(_e="("+_e+") / (2*np.pi)"),x+=_e}te++}ne=="cu"&&!se.gamma&&(x+=", 0",te++)}}}if(xe){te&&(x+="), "),x+="[";for(var be=0;be<me.wires.length;be++)be>0&&(x+=", "),e||r?x+=Hi(me.wires[be],_.numQubits):x+=me.wires[be],te++;x+="]"}else for(var be=0;be<me.wires.length;be++)te>0&&(x+=", "),e||r?x+=Hi(me.wires[be],_.numQubits):x+="q["+me.wires[be]+"]",te++;ne=="measure"&&me.options&&me.options.creg&&(te>0&&(x+=", "),x+=me.options.creg.name+"["+me.options.creg.bit+"]",te++),x+=")",me.options&&me.options.condition&&me.options.condition.creg&&(x+=".c_if("+me.options.condition.creg+", "+me.options.condition.value+")"),x+=`
`}}}if(!n){if(e)x+=`
`;else{x+=`
`;var I="";if(p&&(I="  "),d&&(I="  ",x+=I+`qc.measure_all(q)
`,x+=`
`),T&&(x+=I+`qc = transpile(qc, backend)
`),u=="Aer"){var Pe="";Pe+=I+"job = execute(qc, backend=backend",c&&(Pe+=", shots=shots"),Pe+=`)
`,Pe+=I+`job_result = job.result()
`,p?(l=="statevector_simulator"?(x+=Pe,x+=I+`state = job_result.get_statevector(qc).data
`,x+=`
`):h.indexOf("state")>=0?(x+=I+`qst = StateTomography(qc)
`,x+=I+`qst_analysis = qst.run(backend).block_for_results()
`,x+=I+`density = qst_analysis.analysis_results("state").value
`,x+=I+`state = np.diag(density)
`):(x+=Pe,x+=I+`counts = Counter(job_result.get_counts(qc))
`,x+=`
`),h.trim()||(h=`# CALCULATE COST HERE
cost = 0`),x+=E(h,I),x+=`
`,x+=I+`return cost
`):d?(x+=Pe,x+=I+`counts = job_result.get_counts(qc)

`,x+=I+`output_data_row = decode_output(counts, output_decoding, unpack_values=True)
`,x+=I+`return output_data_row
`):(x+=Pe,x+=I+`print(job_result.get_counts(qc))
`)}if(u=="IBMQ"){var Pe="";Pe+=I+"job = execute(qc, backend=backend",c&&(Pe+=", shots=shots"),Pe+=`)
`,Pe+=I+`job_result = job.result()
`,p?(h.indexOf("state")>=0?(x+=I+`qst = StateTomography(qc)
`,x+=I+`qst_analysis = qst.run(backend).block_for_results()
`,x+=I+`density = qst_analysis.analysis_results("state").value
`,x+=I+`state = np.diag(density)
`,x+=`
`):(x+=Pe,x+=I+`counts = Counter(job_result.get_counts(qc))
`,x+=`
`),h.trim()||(h=`# CALCULATE COST HERE
cost = 0`),x+=E(h,I),x+=`
`,x+=I+`return cost
`):d?(x+=Pe,x+=I+`counts = job_result.get_counts(qc)

`,x+=I+`output_data_row = decode_output(counts, output_decoding, unpack_values=True)
`,x+=I+`return output_data_row
`):(x+=Pe,x+=I+`print(job_result.get_counts(qc))
`)}if(u=="IONQ"){var Pe="";Pe+=I+"job = backend.run(qc",c&&(Pe+=", shots=shots"),Pe+=`)
`,Pe+=I+`job_result = job.result()
`,p?(h.indexOf("state")>=0?(x+=I+`qst = StateTomography(qc)
`,x+=I+`qst_analysis = qst.run(backend).block_for_results()
`,x+=I+`density = qst_analysis.analysis_results("state").value
`,x+=I+`state = np.diag(density)
`):(x+=Pe,x+=I+`counts = Counter(job.get_counts())
`,x+=`
`),h.trim()||(h=`# CALCULATE COST HERE
cost = 0`),x+=E(h,I),x+=`
`,x+=I+`return cost
`):d?(x+=Pe,x+=I+`counts = job_result.get_counts(qc)

`,x+=I+`output_data_row = decode_output(counts, output_decoding, unpack_values=True)
`,x+=I+`return output_data_row
`):(x+=Pe,x+=I+`print(job.get_counts())
`)}if(p){var Te="";this.params.map(function(Be,He){He>0&&(Te+=", "),Te+=Be}),x+=`
`,x+="params = np.array(["+Te+`])
`,x+=`
`,x+='minimum = minimize(objective_function, params, method="'+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.optimizer?this.options.hybridOptions.optimizer:"Powell")+`", tol=tolerance)
`,x+=`print("cost:", minimum.fun, "params:", minimum.x)
`}}if(f){var Ie={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:x,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(Ie)}}return x};Ne.prototype.exportToQuEST=function(t,e,n){t=t||{};var r=t.comment,a=t.decompose,s=this;n=n||[];var u=null,o=["unitary","controlledUnitary"],u=new Ne;u.load(this.save(a));var l="";if(r){var f=(r||"").split(`
`);f.map(function(U){U.length>=2&&U[0]!="/"&&U[1]!="/"&&(l+="// "),l+=U,l+=`
`})}for(var c=0;c<this.numQubits;c++)for(var p=this.gates[c],d=0;d<p.length;d++){var h=p[d];if(!(!h||!this.basicGates[h.name])&&this.basicGates[h.name].exportInfo&&this.basicGates[h.name].exportInfo.quest){var m=this.basicGates[h.name].exportInfo.quest.name;if(n.includes(h.name))continue;(o.includes(m)||this.basicGates[h.name].exportInfo.quest.func)&&n.push(h.name)}}if(e){l+="Qureg "+e+"(Qureg qubits";for(var c=0;c<u.numQubits;c++)l+=", const int q",l+=c;if(u.params&&u.params.length)for(var c=0;c<u.params.length;c++)l+=", double "+u.params[c];l+=`) {
`}else{l+=`#include <math.h>
#include "QuEST.h"

`,l+=`#ifndef M_PI
#define M_PI 3.14159265
#endif

`;var v=[],g=u.usedGates();a||g.map(function(U){var q=u.basicGates[U];if(!q){var z=s.customGates[U];if(z){var G=new Ne;G.load(z);var F={comment:"",decompose:!1};v.push(G.exportToQuEST(F,U,n))}}});for(var c=0;c<n.length;c++){var y=n[c],m=this.basicGates[y].exportInfo.quest.name;switch(m){case"unitary":case"controlledUnitary":{matrix=this.basicGates[y].exportInfo.quest.matrix;var _=this.basicGates[y].exportInfo.quest.params;if(l+="void "+y+"(Qureg qubits, const int q",m=="controlledUnitary"&&(l+="1, const int q2"),_)for(var d=0;d<_.length;d++)l+=", double "+_[d];l+=`) {
`,l+=`    ComplexMatrix2 u;
`,l+="    u.r0c0 = (Complex) {.real="+matrix[0][0][0]+", .imag= "+matrix[0][0][1]+`};
`,l+="    u.r0c1 = (Complex) {.real="+matrix[0][1][0]+", .imag= "+matrix[0][1][1]+`};
`,l+="    u.r1c0 = (Complex) {.real="+matrix[1][0][0]+", .imag= "+matrix[1][0][1]+`};
`,l+="    u.r1c1 = (Complex) {.real="+matrix[1][1][0]+", .imag= "+matrix[1][1][1]+`};
`,l+="    "+m+"(qubits, q",m=="controlledUnitary"&&(l+="1, q2"),l+=`, u);
}

`}break;default:l+=this.basicGates[y].exportInfo.quest.func+`

`;break}}for(var c=0;c<v.length;c++)l+=v[c];l+=`int main(int argc, char *argv[]) {
`,l+=`    QuESTEnv env = createQuESTEnv();
`,l+="    Qureg qubits = createQureg("+u.numQubits+`, env);
`,l+="    int measured["+u.numQubits+`];

`}l+=`
`;for(var x=u.numCols(),M=0;M<x;M++)for(var A=0;A<this.numQubits;A++){var h=u.getGateAt(M,A);if(h&&h.connector==0){h.options&&h.options.condition&&h.options.condition.creg&&(l+="if("+h.options.condition.creg+"=="+h.options.condition.value+`) {
`);var y=h.name,E=h.options&&h.options.params?h.options.params:{},N=this.basicGates[y];if(y=="measure")l+="    measured["+h.wires[0]+"] = measure(qubits, "+h.wires[0];else if(N){var m=N.exportInfo.quest.name,_=N.exportInfo.quest.params;o.includes(m)?l+="    "+y+"(qubits":l+="    "+m+"(qubits";for(var D=0;D<h.wires.length;D++)e?l+=", q"+h.wires[D]:l+=", "+h.wires[D];if(_)switch(m){case"compactUnitary":l+=", "+_.alpha,l+=", "+_.beta;break;case"phaseShift":case"controlledPhaseShift":_.theta&&(l+=", "+_.theta);break}}else{N=this.customGates[y],l+="    qubits = "+y+"(qubits";for(var D=0;D<h.wires.length;D++)l+=", "+h.wires[D]}if(E){var N=this.basicGates[y];if(N||(N=this.customGates[y]),N){var C=N.params||[],T=C.length;if(T)for(var P=0;P<T;P++){var I=C[P];l+=", "+E[I]}}}l+=`);
`,h.options&&h.options.condition&&h.options.condition.creg&&(l+=`}
`)}}return e?l+=`
    return qubits;
}

`:(l+=`
    destroyQureg(qubits, env);
`,l+=`    destroyQuESTEnv(env);
`,l+=`    return 0;
}
`),l};Ne.prototype.exportToQASM=function(t,e,n,r){t=t||{};var a=t.comment,s=t.decompose,o=t.compatibilityMode,u=this,l=this.options&&this.options.params?this.options.params:{},f=function(k,O){if(k.isSymbolNode){var W=k.name;if(O.replaceVars&&typeof O.replaceVars[W]<"u"){var W=O.replaceVars[W];return!o&&u.params.indexOf(W)>=0?"("+l[W]+")":"("+W+")"}if(!o&&u.params.indexOf(k.name)>=0)return l[k.name]}},c=null,c=new Ne;c.load(this.save(s));var p="";if(a){var d=(a||"").split(`
`);d.map(function(k){k.length>=2&&k[0]!="/"&&k[1]!="/"&&(p+="// "),p+=k,p+=`
`})}if(e){if(p+="gate "+e,c.params&&c.params.length){p+="(";for(var h=0;h<c.params.length;h++)h>0&&(p+=", "),p+=c.params[h];p+=")"}for(var m=0;m<c.numQubits;m++)m==0&&(p+=" "),m>0&&(p+=", "),p+=Hi(m,c.numQubits);p+=`
{
`}else if(!n){p+=`OPENQASM 2.0;
`,p+=`include "qelib1.inc";
`,p+="qreg q["+c.numQubits+`];
`;for(var v in c.cregs)p+="creg "+v+"["+(c.cregs[v].length||1)+`];
`;var g=c.usedGates();s||g.map(function(k){var O=c.basicGates[k];if(!O){var W=u.customGates[k];if(W){var X=new Ne;X.load(W);var ee={comment:"",decompose:!1,compatibilityMode:o};p+=X.exportToQASM(ee,k,!1,!1)}}})}for(var y=c.numCols(),_=0;_<y;_++)for(var x=0;x<c.numQubits;x++){var M=c.getGateAt(_,x),A=null,E=null;if(M&&M.connector==0){var N=M.name;if(!o){var D=c.getGateDef(M.name);D&&D.exportInfo&&(D.exportInfo.qasm&&D.exportInfo.qasm.name?N=D.exportInfo.qasm.name:D.exportInfo.qasm&&D.exportInfo.qasm.replacement?(A=D.exportInfo.qasm.replacement,A.map(function(k){var O=new Ne;if(O.cregs=JSON.parse(JSON.stringify(u.cregs)),M.options&&M.options.params){var W=Object.keys(M.options.params),X=Object.keys(k.params);W.map(function(Y){X.indexOf(Y)>=0&&(k.params[Y]=M.options.params[Y])})}var ee=M.options&&M.options.condition?M.options.condition:{};O.addGate(k.name,_,M.wires,{params:k.params,condition:ee});var J={comment:"",decompose:!1,compatibilityMode:o};p+=O.exportToQASM(J,!1,!0,!!e||r)})):D.exportInfo.qasm&&D.exportInfo.qasm.equivalent&&(E=D.exportInfo.qasm.equivalent,E.map(function(k){var O=new Ne;O.cregs=JSON.parse(JSON.stringify(u.cregs));var W=k.wires.length>1?M.wires:M.wires[k.wires[0]],X={};if(k.params){var ee={};if(M.options&&M.options.params)for(var J in M.options.params){var Y=Ce.parse(M.options.params[J]),ie=Y.toString({handler:f});ee[J]=ie}for(var K in k.params){var Y=Ce.parse(k.params[K]),ie=Y.toString({handler:f,replaceVars:ee});X[K]=ie}}var re=M.options&&M.options.condition?M.options.condition:{};O.addGate(k.name,_,W,{params:X,condition:re});var oe={comment:"",decompose:!1,compatibilityMode:o};p+=O.exportToQASM(oe,"",!0,!!e||r)})))}if(!A&&!E&&((e||r)&&(p+="  "),M.options&&M.options.condition&&M.options.condition.creg&&(p+="if("+M.options.condition.creg+"=="+M.options.condition.value+") ")),!A&&!E||o){var C=M.name,T=M.options&&M.options.params?M.options.params:{};if(p+=o?M.name:N,T){var D=c.basicGates[C];if(D||(D=c.customGates[C]),D){var P=D.params||[],I=P.length;if(I){p+=" (";for(var U=0;U<I;U++){U>0&&(p+=", ");var q=P[U],z=T[q];if(!e&&!r&&!o){var G=Ce.parse(T[q]);z=G.toString({handler:f})}p+=z}p+=")"}}}for(var F=0;F<M.wires.length;F++)F>0&&(p+=","),e||r?p+=" "+Hi(M.wires[F],c.numQubits):p+=" q["+M.wires[F]+"]";C=="measure"&&M.options&&M.options.creg&&(p+=" -> ",p+=M.options.creg.name+"["+M.options.creg.bit+"]"),p+=`;
`}}}return e&&(p+=`}

`),p};Ne.prototype.exportToPyquil=function(t,e){t=t||{};var n=t.comment,r=t.decompose,a=t.versionStr,s=t.lattice,o=t.asQVM,u=t.asJupyter,l=t.shots,f=t.hybrid,c=this,p=parseFloat(a||"2.12");isNaN(p)&&(p=2.1),l||(l=1024),typeof f>"u"&&(f=this.options?!!this.options.hybrid:!1);var d=new Ne;d.load(this.save(r));var h=function(Te,Ie){if(Te.isSymbolNode){var Oe=["pi","sin","cos","tan","asin","acos","atan"];if(Oe.indexOf(Te.name)>=0)return"np."+Te.name;if(c.params.indexOf(Te.name)>=0&&f)return"params["+c.params.indexOf(Te.name)+"]"}},m=function(Te,Ie){var Oe="",Be=Te.split(`
`),He=-1;Be.map(function(Xe){var je=Xe.search(/\S/);je>=0&&(He<0||je<He)&&(He=je)}),He<0&&(He=0);var Qe="";if(He<Ie.length)for(var et=0;et<Ie.length-He;et++)Qe+=" ";return Be.map(function(Xe){Oe+=Qe+Xe+`
`}),Oe},v="",g=[],y="",_="",x="",M=d.usedGates(),A=d.gotMeasurement(),E=[],N=[];M.map(function(Te){var Ie=d.basicGates[Te];if(Ie){if(Ie.exportInfo&&Ie.exportInfo.pyquil){var Oe=Ie.exportInfo.pyquil;if(Oe.array){var Be="";Oe.params&&(Be+=", [",Oe.params.map(function(et,Xe){Xe>0&&(Be+=", "),Be+="p_"+et;var je="p_"+et+" = Parameter('"+et+"')";g.indexOf(je)<0&&g.push(je)}),Be+="]"),_+="p.inst("+Oe.name+`_defgate)
`,x+=Oe.name+"_array = np.array("+Oe.array+`)
`,y+=Oe.name+"_defgate = DefGate('"+Oe.name+"', "+Oe.name+"_array"+Be+`)
`,y+=Oe.name+" = "+Oe.name+`_defgate.get_constructor()
`,E.push(Oe.name)}else{var He="";if(Oe.replacement){var Qe=d.basicGates[Oe.replacement.name];Qe&&Qe.exportInfo&&(Qe.exportInfo.pyquil?He=Qe.exportInfo.pyquil.name:Qe.exportInfo.quil&&(He=Qe.exportInfo.quil.name))}else He=Oe.name;He&&(v&&(v+=", "),v+=He)}}else if(Ie.exportInfo&&Ie.exportInfo.quil){var Oe=Ie.exportInfo.quil;if(!Oe.defgate){var He="";if(Oe.replacement){var Qe=d.basicGates[Oe.replacement.name];Qe&&Qe.exportInfo&&(Qe.exportInfo.pyquil?He=Qe.exportInfo.pyquil.name:Qe.exportInfo.quil&&(He=Qe.exportInfo.quil.name))}else He=Oe.name;He&&(v&&(v+=", "),v+=He)}}}});var D=d.gotClassicalControl();D&&(v&&(v+=", "),p<2?v+="FALSE, NOT, OR, AND":v+="MOVE, NOT, IOR, AND");var C="";y&&(p<2.12?C=`from pyquil.parameters import Parameter, quil_sin, quil_cos, quil_sqrt, quil_exp, quil_cis
from pyquil.quilbase import DefGate`:C=`from pyquil.quilatom import Parameter, quil_sin, quil_cos, quil_sqrt, quil_exp, quil_cis
from pyquil.quilbase import DefGate`);var T="";if(n){var P=(n||"").split(`
`);P.map(function(Te){Te.length>=1&&Te[0]!="#"&&(T+="# "),T+=Te,T+=`
`})}var I="";if(e){for(var U="",q=0,z=0;z<d.params.length;z++)q>0&&(U+=", "),U+=d.params[z],q++;for(var z=0;z<d.numQubits;z++)q>0&&(U+=", "),U+="q"+z,q++;T+="def "+e+(U?"("+U+")":"")+`:
`,I="  "}else{p<2?(T+=`from pyquil.api import QVMConnection
`,T+=`from pyquil.quil import Program
`):T+=`from pyquil import Program, get_qc
`,v&&(T+="from pyquil.gates import "+v+`
`),C&&(T+=C+`
`),T+=`from functools import reduce
`,f&&(T+=`from scipy.optimize import minimize
`,T+=`from collections import Counter
`),T+=`import numpy as np
`,l&&(T+=`
`,T+="shots = "+l+`
`);var G=this.options&&this.options.params?this.options.params:{};if(this.params.length){T+=`
`;for(var z=0;z<this.params.length;z++){var F=this.params[z],k=Ce.parse(G[F]),O=k.toString({handler:h});T+=F+" = "+O+`
`}T+=`
`}f&&(T+="tolerance = "+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.tolerance&&this.options.hybridOptions.tolerance||"0.001")+`
`,T+=`
`),y&&(g.map(function(Ie,Oe){Oe==0&&(T+=`
`),T+=Ie+`
`}),T+=`
`,T+=x+`
`,T+=`
`,T+=y+`
`),T+=`
`;var M=d.usedGates();r||M.map(function(Ie){var Oe=d.basicGates[Ie];if(!Oe){var Be=c.customGates[Ie];if(Be){var He=new Ne;He.load(Be);var Qe={comment:"",decompose:!1,versionStr:a};T+=He.exportToPyquil(Qe,Ie),N.push(Ie)}}})}if(f&&(I+="  ",T+=`def objective_function(params):
`),p>=2&&!e){o||s?T+=I+`p = Program('PRAGMA INITIAL_REWIRING "PARTIAL"')

`:T+=I+`p = Program()

`;var W=d.cregTotalBits();D&&(W+=1),W&&(T+=I+"ro = p.declare('ro', memory_type='BIT', memory_size="+W+`)
`,T+=`
`)}else T+=I+`p = Program()

`;T+=_?I+_+`
`:"";for(var X=0;X<d.numCols();X++)for(var ee=0;ee<d.numQubits;ee++){var J=d.getGateAt(X,ee);if(J&&J.connector==0){var Y=d.getGateDef(J.name),ie=ie=J.options&&J.options.params?J.options.params:{},K=null;if(Y){Y.exportInfo&&(Y.exportInfo.pyquil&&Y.exportInfo.pyquil.replacement?(Y.exportInfo.pyquil.replacement.params&&(ie=Y.exportInfo.pyquil.replacement.params),Y=d.getGateDef(Y.exportInfo.pyquil.replacement.name)):Y.exportInfo.quil&&Y.exportInfo.quil.replacement&&(Y.exportInfo.quil.replacement.params&&(ie=Y.exportInfo.quil.replacement.params),Y=d.getGateDef(Y.exportInfo.quil.replacement.name)),Y&&Y.exportInfo&&(Y.exportInfo.pyquil?K=Y.exportInfo.pyquil:Y.exportInfo.quil&&(K=Y.exportInfo.quil)));var re=!1;K?(re=E.indexOf(K.name)>=0,N.indexOf(K.name)>=0):(re=E.indexOf(J.name)>=0,N.indexOf(J.name)>=0);var oe=!1;if(J.options&&J.options.condition&&J.options.condition.creg){oe=!0,T+=`
`;var ce=c.cregTotalBits(),me=J.options.condition,Se=me.value||0,le=c.cregBase(me.creg);if(Se==0){var Q=c.cregs[me.creg].length;if(p<2){T+=I+"p.inst(FALSE("+ce+`))
`;for(var Ee=0;Ee<Q;Ee++)T+=I+"p.inst(OR("+(Ee+le)+", "+ce+`))
`;T+=I+"p.inst(NOT("+ce+`))
`,T+=I+"p.if_then("+ce+", Program("}else{T+=I+"p.inst(MOVE(ro["+ce+`], 0))
`;for(var Ee=0;Ee<Q;Ee++)T+=I+"p.inst(IOR(ro["+ce+"], ro["+(Ee+le)+`]))
`;T+=I+"p.inst(NOT(ro["+ce+`]))
`,T+=I+"p.if_then(ro["+ce+"], Program("}}else{var ne=Se.toString(2).split("").reverse(),se=0,xe=0;if(ne.map(function(Te,Ie){var Oe=parseInt(Te);ne[Ie]=Oe,Oe&&(se++,xe=Ie)}),se==1)p<2?T+=I+"p.if_then("+(xe+le)+", Program(":T+=I+"p.if_then(ro["+(xe+le)+"], Program(";else if(p<2){T+=I+"p.inst(FALSE("+ce+`))
`;var ve=!0;ne.map(function(Te,Ie){Te&&(ve?(ve=!1,T+=I+"p.inst(OR("+(Ie+le)+", "+ce+`))
`):T+=I+"p.inst(AND("+(Ie+le)+", "+ce+`))
`)}),T+=I+"p.if_then("+ce+", Program("}else{T+=I+"p.inst(MOVE(ro["+ce+`], 0))
`;var ve=!0;ne.map(function(Ie,Oe){Ie&&(ve?(ve=!1,T+=I+"p.inst(IOR(ro["+ce+"], ro["+(Oe+le)+`]))
`):T+=I+"p.inst(AND(ro["+ce+"], ro["+(Oe+le)+`]))
`)}),T+=I+"p.if_then(ro["+ce+"], Program("}}}else T+=I+"p.inst(";K?T+=K.name:T+=J.name;var te=!1;if(K&&K.params&&K.params.length){var q=0;T+="(",te=!0;for(var $=0;$<K.params.length;$++){if(q>0&&(T+=", "),typeof ie[K.params[$]]<"u"){var k=Ce.parse(ie[K.params[$]]);T+=k.toString({handler:h})}q++}p<2||re?T+=")":T+=", "}else if(Y&&Y.params&&Y.params.length){var q=0;T+="(",te=!0;for(var $=0;$<Y.params.length;$++){if(q>0&&(T+=", "),typeof ie[Y.params[$]]<"u"){var k=Ce.parse(ie[Y.params[$]]);T+=k.toString({handler:h})}q++}p<2||re?T+=")":T+=", "}if(J.wires.length){var q=0;(p<2||!te||re)&&(T+="(",te=!0);for(var B=0;B<J.wires.length;B++)q>0&&(T+=", "),e?T+="q"+J.wires[B]:T+=""+J.wires[B],q++;if(J.name=="measure"&&J.options&&J.options.creg){var ae=parseInt(J.options.creg.bit)||0;isNaN(ae)&&(ae=0),q>0&&(T+=", "),p<2?T+=ae+c.cregBase(J.options.creg.name):T+="ro["+(ae+c.cregBase(J.options.creg.name))+"]",q++}T+=")"}T+=")",oe&&(T+=`)
`),T+=`
`}else T+=I+'# Export to pyquil WARNING: unknown gate "'+J.name+'".'}}if(e)T+=I+`return p
`,T+=`
`;else{if(T+=`
`,p<2)if(T+=I+`qvm = QVMConnection()
`,f){T+=`
`,T+=I+`# CALCULATE COST HERE
`;var ue=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"";ue.trim()||(ue="cost = 0"),T+=m(ue,I),T+=`
`,T+=I+`return cost
`}else T+=I+`print(qvm.run(p))
`;else{l&&(T+=I+`p.wrap_in_numshots_loop(shots)
`,T+=`
`);var _e=s;if(_e||(p<2.1?_e=this.numQubits+"q-generic-qvm":_e=this.numQubits+"q-qvm"),T+=I+"qc = get_qc('"+_e+"'"+(s?", as_qvm="+(o?"True":"False"):"")+`)
`,s)if(T+=I+`ep = qc.compile(p)
`,A)if(T+=I+`results_list = qc.run(ep).readout_data.get("ro")
`,T+=I+`results = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1], ""), results_list))
`,f){T+=I+`counts = Counter(dict(zip(results,[results.count(i) for i in results])))
`,T+=`
`,T+=I+`# CALCULATE COST HERE
`;var ue=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"";ue.trim()||(ue="cost = 0"),T+=m(ue,I),T+=`
`,T+=I+`return cost
`}else T+=I+`counts = dict(zip(results,[results.count(i) for i in results]))
`,T+=I+`print(counts)
`;else if(f){T+=I+`counts = Counter(dict(zip(results,[results.count(i) for i in results])))
`,T+=`
`,T+=I+`# CALCULATE COST HERE
`;var ue=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"";ue.trim()||(ue="cost = 0"),T+=m(ue,I),T+=`
`,T+=I+`return cost
`}else T+=I+`print(qc.run(ep).readout_data.get("ro"))
`;else if(A)if(T+=I+`results_list = qc.run(p).readout_data.get("ro")
`,T+=I+`results = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1], ""), results_list))
`,f){T+=I+`counts = Counter(dict(zip(results,[results.count(i) for i in results])))
`,T+=`
`,T+=I+`# CALCULATE COST HERE
`;var ue=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"";ue.trim()||(ue="cost = 0"),T+=m(ue,I),T+=`
`,T+=I+`return cost
`}else T+=I+`counts = dict(zip(results,[results.count(i) for i in results]))
`,T+=I+`print(counts)
`;else if(T+=I+`results_list = qc.run(p).readout_data.get("ro")
`,T+=I+`results = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1], ""), results_list))
`,f){T+=I+`counts = Counter(dict(zip(results,[results.count(i) for i in results])))
`,T+=`
`,T+=I+`# CALCULATE COST HERE
`;var ue=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"";ue.trim()||(ue="cost = 0"),T+=m(ue,I),T+=`
`,T+=I+`return cost
`}else T+=I+`print(results)
`}if(f){var be="";this.params.map(function(Te,Ie){Ie>0&&(be+=", "),be+=Te}),T+=`
`,T+="params = np.array(["+be+`])
`,T+=`
`,T+='minimum = minimize(objective_function, params, method="'+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.optimizer?this.options.hybridOptions.optimizer:"Powell")+`", tol=tolerance)
`,T+=`print("cost:", minimum.fun, "params:", minimum.x)
`}}if(u){var Pe={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:T,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(Pe)}return T};Ne.prototype.exportToQuil=function(t,e){t=t||{};var n=t.comment,r=!0,a=t.versionStr,s=this,o=parseFloat(a||"2.0");isNaN(o)&&(o=2);var u=new Ne;u.load(this.save(r));var l="";if(n){var f=(n||"").split(`
`);f.map(function(re){re.length>=1&&re[0]!="#"&&(l+="# "),l+=re,l+=`
`})}var c=u.usedGates();c.map(function(re){var oe=u.basicGates[re];oe&&oe.exportInfo&&oe.exportInfo.quil&&oe.exportInfo.quil.defgate&&(l+=oe.exportInfo.quil.defgate,l+=`

`)});var p=this.gotClassicalControl(),d="";if(e){var h="";if(u.params.length){h+="(";for(var m=0;m<u.params.length;m++)m>0&&(h+=", "),h+="%"+u.params[m];h+=")"}for(var v="",m=0;m<u.numQubits;m++)m>0&&(v+=" "),v+="q"+m;l+="DEFCIRCUIT "+e+(h?" "+h:"")+(v?" "+v:"")+`:
`,d="    "}else{if(l+=`
`,o>=2){var g=u.cregTotalBits();p&&(g+=1),g&&(l+="DECLARE ro BIT["+g+`]
`)}var y=this.options&&this.options.params?this.options.params:{};if(this.params.length){l+=`
`;for(var m=0;m<this.params.length;m++){var _=this.params[m],x=Ce.parse(y[_]);x.toString({handler:M}),l+="DECLARE "+_+` REAL[1]
`}l+=`
`}var c=u.usedGates()}for(var M=function(re,oe){if(re.isSymbolNode&&u.params.indexOf(re.name)>=0)return"%"+re.name},A=1,E=0;E<u.numCols();E++)for(var N=0;N<u.numQubits;N++){var D=u.getGateAt(E,N);if(D&&D.connector==0){var C=u.getGateDef(D.name),T=D.options&&D.options.params?D.options.params:{},P=null;if(C){C.exportInfo&&(C.exportInfo.quil&&C.exportInfo.quil.replacement&&(C.exportInfo.quil.replacement.params&&(T=C.exportInfo.quil.replacement.params),C=u.getGateDef(C.exportInfo.quil.replacement.name)),P=C&&C.exportInfo&&C.exportInfo.quil?C.exportInfo.quil:null);var I=!1;if(D.options&&D.options.condition&&D.options.condition.creg){I=!0,l+=`
`;var U=s.cregTotalBits(),q=D.options.condition,z=q.value||0,G=s.cregBase(q.creg);if(z==0){var F=s.cregs[q.creg].length;if(o<2){l+=d+"FALSE ["+U+`]
`;for(var k=0;k<F;k++)l+=d+"OR ["+(k+G)+"] ["+U+`]
`;l+=d+"NOT ["+U+`]
`,l+="JUMP-WHEN @THEN"+A+" ["+U+`]
`,l+="JUMP @END"+(A+1)+`
`,l+="LABEL @THEN"+A+`
`}else{l+=d+"FALSE ro["+U+`]
`;for(var k=0;k<F;k++)l+=d+"OR ro["+(k+G)+"] ro["+U+`]
`;l+=d+"NOT ro["+U+`]
`,l+="JUMP-WHEN @THEN"+A+" ro["+U+`]
`,l+="JUMP @END"+(A+1)+`
`,l+="LABEL @THEN"+A+`
`}}else{var O=z.toString(2).split("").reverse(),W=0,X=0;if(O.map(function(re,oe){var ce=parseInt(re);O[oe]=ce,ce&&(W++,X=oe)}),W==1)o<2?(l+="JUMP-WHEN @THEN"+A+" ["+(X+G)+`]
`,l+="JUMP @END"+(A+1)+`
`,l+="LABEL @THEN"+A+`
`):(l+="JUMP-WHEN @THEN"+A+" ro["+(X+G)+`]
`,l+="JUMP @END"+(A+1)+`
`,l+="LABEL @THEN"+A+`
`);else if(o<2){l+=d+"FALSE ["+U+`]
`;var ee=!0;O.map(function(re,oe){re&&(ee?(ee=!1,l+=d+"OR ["+(oe+G)+"] ["+U+`]
`):l+=d+"AND ["+(oe+G)+"] ["+U+`]
`)}),l+="JUMP-WHEN @THEN"+A+" ["+U+`]
`,l+="JUMP @END"+(A+1)+`
`,l+="LABEL @THEN"+A+`
`}else{l+=d+"FALSE ro["+U+`]
`;var ee=!0;O.map(function(oe,ce){oe&&(ee?(ee=!1,l+=d+"OR ro["+(ce+G)+"] ro["+U+`]
`):l+=d+"AND ro["+(ce+G)+"] ro["+U+`]
`)}),l+="JUMP-WHEN @THEN"+A+" ro["+U+`]
`,l+="JUMP @END"+(A+1)+`
`,l+="LABEL @THEN"+A+`
`}}}P?l+=d+P.name:l+=d+D.name,l+=" ";var J=0;if(P&&P.params&&P.params.length){l+="(";for(var Y=0;Y<P.params.length;Y++){if(J>0&&(l+=", "),typeof T[P.params[Y]]<"u"){var x=Ce.parse(T[P.params[Y]]);l+=x.toString({handler:M})}J++}l+=")"}else if(C&&C.params&&C.params.length){l+="(";for(var Y=0;Y<C.params.length;Y++){if(J>0&&(l+=", "),typeof T[C.params[Y]]<"u"){var x=Ce.parse(T[C.params[Y]]);l+=x.toString({handler:M})}J++}l+=")"}for(var ie=0;ie<D.wires.length;ie++)J>0&&(l+=" "),e?l+="q"+D.wires[ie]:l+=""+D.wires[ie],J++;if(D.name=="measure"&&D.options&&D.options.creg){var K=parseInt(D.options.creg.bit)||0;isNaN(K)&&(K=0),J>0&&(l+=" "),o<2?l+="["+(K+s.cregBase(D.options.creg.name))+"]":l+="ro["+(K+s.cregBase(D.options.creg.name))+"]",J++}l+=`
`,I&&(l+="LABEL @END"+(A+1)+`
`,l+=`
`,A+=2)}else console.log("unknown gate",D.name)}}return e&&(l+=`
`),l};Ne.prototype.exportToAQASM=function(t,e,n,r){var a=this;t=t||{},t.comment;var s=t.decompose,o=t.asJupyter,u=t.shots,l=e?t.hybrid:!1,f=null,c=null;u=u||1024,typeof l>"u"&&(l=this.options?!!this.options.hybrid:!1);var p=this.save(!!s);f=new Ne,c=new Ne,f.load(p),c.load(p);var d=function(Q,Ee){if(Q.isSymbolNode){var ne=["pi"];if(ne.indexOf(Q.name)>=0)return"np."+Q.name;var se=Q.name;if(Ee.replaceVars&&typeof Ee.replaceVars[se]<"u"){var se=Ee.replaceVars[se];return a.params.indexOf(se)>=0?"("+O[se]+")":"("+se+")"}if(a.params.indexOf(Q.name)>=0)return O[Q.name]}},h=function(Q,Ee){var ne="",se=Q.split(`
`),xe=-1;se.map(function($){var B=$.search(/\S/);B>=0&&(xe<0||B<xe)&&(xe=B)}),xe<0&&(xe=0);var ve="";if(xe<Ee.length)for(var te=0;te<Ee.length-xe;te++)ve+=" ";return se.map(function($){ne+=ve+$+`
`}),ne},m=function(Q){for(var Ee="",ne=0;ne<Q;ne++)Ee+="    ";return Ee};r=r||0;var v=[];if(!e){if(!s)for(var g=c.numCols(),y=g-1;y>=0;y--)for(var _=0;_<c.numQubits;_++){var x=c.gates[_][y];if(x&&x.connector==0&&!c.basicGates[x.name]){customDecomposedCircuit=c.decomposeGateAt(y,_);for(var M=0;M<customDecomposedCircuit.numCols();M++)for(var A=0;A<customDecomposedCircuit.numQubits;A++){var E=customDecomposedCircuit.getGateAt(M,A);E&&E.connector==0&&v.push(E),f.gates.map(function(Q,Ee){Q.map(function(ne){ne&&ne.name==x.name&&f.removeGate(ne.id)})})}}}v.map(function(Q){Q&&f.insertGate(Q.name,Q.column,Q.wires,Q.options)})}var N="",D=m(r),C=f.usedGates(),T=f.numQubits;if(e)if(n){for(var U="",q=0,z=0;z<f.params.length;z++)q>0&&(U+=", "),U+=f.params[z],q++;for(var z=0;z<f.numQubits;z++)q>0&&(U+=", "),U+=Hi(z,f.numQubits),q++}else{N+=D+`from qat.lang.AQASM import *
`,N+=D+`from qat.qpus import get_default_qpu
`,N+=D+`from collections import Counter
`,l&&(N+=D+`from scipy.optimize import minimize
`),N+=D+`import numpy as np
`,N+=`
`;var G="",F=0;C.map(function(Q){var Ee=f.basicGates[Q];if(Ee){if(!s&&f.basicGates[Q].exportInfo.aqasm&&f.basicGates[Q].exportInfo.aqasm.array){if(unsupportedAqasmInfo=f.basicGates[Q].exportInfo.aqasm,gateUnitary=Q+"_gate",N+=D+"def "+gateUnitary+"(",unsupportedAqasmInfo.params&&unsupportedAqasmInfo.params.length){var ne=0;unsupportedAqasmInfo.params.map(function(B){ne>0&&(N+=", "),N+=D+"p_"+B,ne++})}N+=`):
`,N+=m(r+1)+"return np.array("+unsupportedAqasmInfo.array+`)

`,G+=Q+' = AbstractGate("'+Q+'", [';var se=0;if(unsupportedAqasmInfo.params)for(var xe=0;xe<unsupportedAqasmInfo.params.length;xe++)se>0&&(G+=", "),G+="float",se++;Ee.matrix&&(arity=Ce.log2(Ee.matrix.length)),G+="], matrix_generator="+gateUnitary+", arity="+arity+`)
`}}else{var ve=a.customGates[Q];if(ve){var te=new Ne;te.load(ve);var $={comment:"",decompose:!0,asJupyter:!1,shots:null,hybrid:!1};N+=te.exportToAQASM($,e,Q,r),F++}}}),N+=G,N+=`
`,u&&(N+=D+"shots = "+u+`
`,N+=`
`),N+=D+`program = Program()
`,N+=D+"qubits_reg = program.qalloc("+f.numQubits+`)
`;for(var k in f.cregs)N+=D+k+" = program.calloc("+f.cregs[k].length+`)
`;N+=`
`;var O=this.options&&this.options.params?this.options.params:{};if(this.params.length){for(var z=0;z<this.params.length;z++){var W=this.params[z],X=Ce.parse(O[W]),ee=X.toString({handler:d});N+=W+" = "+ee+`
`}N+=`
`}l&&(N+=D+"tolerance = "+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.tolerance&&this.options.hybridOptions.tolerance||"0.001")+`
`,N+=`
`)}else if(N+=D+`BEGIN
`,N+=D+"qubits "+T+`
`,f.cregs){var P=0;for(var I in f.cregs)P+=f.cregs[I].length;N+=D+"cbits "+P+`
`}n?(N+="def "+n+(U?"("+U+")":"")+`:
`,r++,D=m(r),N+=D+`circuit = QRoutine()
`):l&&(N+=`def objective_function(params):
`,r++,D=m(r)),n||F&&(N+=`
`,C.map(function(Q){!f.basicGates[Q]&&f.customGates[Q]&&(N+=D+Q+"(")}));for(var y=0;y<f.numCols();y++)for(var _=0;_<f.numQubits;_++){var x=f.getGateAt(y,_);if(x&&x.connector==0){var J=f.getGateDef(x.name),Y="";if(x.options&&x.options.params&&(gateParams=x.options.params),x.name=="measure"&&(e?Y+="program.measure":Y+="MEAS"),x.name=="reset"&&(e?Y+="program.reset":Y+="RESET"),J&&J.exportInfo){if(J.exportInfo.aqasm){var ie=J.exportInfo.aqasm,K="";if(ie.name)J.params.length?J.params.map(function(xe){var ve=Ce.parse(gateParams[xe]),te=ve.toString({handler:d});K=ie.name,e?K+="("+te+")":K+="["+te+"]"}):K+=ie.name,ie.controlled&&ie.dagger?e?Y+=K+".dag().ctrl()":Y+="CTRL(DAG("+K+"))":ie.controlled?e?Y+=K+".ctrl()":Y+="CTRL("+K+")":ie.dagger?e?Y+=K+".dag()":Y+="DAG("+K+")":Y+=K;else if(ie.matrix)if(e){Y+=x.name+"(";var oe=0;J.params.map(function(xe){oe>0&&(Y+=", ");var ve=Ce.parse(gateParams[xe]),te=ve.toString({handler:d});Y+=te,oe++}),Y+=")"}else{Y="[";for(var re=0;re<ie.matrix.length;re++){row=ie.matrix[re],Y+="[";for(var z=0;z<row.length;z++)Y+="(",row_element=row[z],ie.params&&ie.params.map(function(ve){var te=gateParams[ve];row_element.toString().indexOf(ve)>0&&(row_element=row_element.replace(ve,te))}),evaluated_expression=Ce.evaluate(row_element,a.options.params),matrix_element=Ce.complex(evaluated_expression),matrix_element_real=matrix_element.re,matrix_element_im=matrix_element.im,Y+=matrix_element_real+", "+matrix_element_im+")",z<row.length-1&&(Y+=" ");Y+="]",re<ie.matrix.length-1&&(Y+=" ")}Y+="]"}}N+=D+Y,e?N+="(":N+=" "}for(var q=0,ce=0;ce<x.wires.length;ce++)q>0&&(N+=", "),e?n?N+=Hi(x.wires[ce],f.numQubits):N+="qubits_reg["+x.wires[ce]+"]":N+="q["+x.wires[ce]+"]",q=q+1;x.options&&x.options.creg&&(N+=", "+x.options.creg.name+"["+x.options.creg.bit+"]"),e&&(N+=")"),N+=`
`}}if(n&&(N+=D+`return circuit

`),!e)N+="END";else if(!n)if(N+=D+`
`,N+=D+`circuit = program.to_circ()
`,N+=D+`job = circuit.to_job(nbshots=shots, aggregate_data=False)
`,N+=D+`qpu = get_default_qpu()
`,N+=D+`job_result = qpu.submit(job)
`,N+=D+`counts = Counter()

`,N+=D+`for state in job_result:
`,N+=D+`    string_state = str(state.state)
`,N+=D+`    string_state = string_state[string_state.find('|') + 1: string_state.find('>')]
`,N+=D+`    string_state = string_state[::-1]
`,N+=D+`    counts[string_state] += 1

`,l){N+=D+`# CALCULATE COST HERE
`;var me=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"";if(me.trim()||(me="cost = 0"),N+=h(me,D),N+=`
`,N+=D+`return cost
`,r--,D=m(r),l){var Se="";this.params.map(function(Q,Ee){Ee>0&&(Se+=", "),Se+=Q}),N+=`
`,N+="params = np.array(["+Se+`])
`,N+=`
`,N+='minimum = minimize(objective_function, params, method="'+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.optimizer?this.options.hybridOptions.optimizer:"Powell")+`", tol=tolerance)
`,N+=`print("cost:", minimum.fun, "params:", minimum.x)
`}}else N+=D+"print(counts)";if(o&&e){var le={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:N,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(le)}return N};Ne.prototype.exportAQASM=function(t,e,n,r,a,s,o,u,l){var f={comment:t,decompose:e,asJupyter:a,shots:s,hybrid:o,encoderDecoder:u};return this.exportToAQASM(f,n,r,l)};Ne.prototype.exportToPyAQASM=function(t,e){return this.exportToAQASM(t,!0,e)};Ne.prototype.exportPyAQASM=function(t,e,n,r,a,s,o){var u={comment:t,decompose:e,asJupyter:r,shots:a,hybrid:s,encoderDecoder:o};return this.exportToPyAQASM(u,n)};Ne.prototype.exportToCirq=function(t,e){t=t||{};var n=t.comment,r=t.decompose,a=t.versionStr,s=t.asJupyter,o=t.shots,u=t.exportTfq,l=this,f="";u?f="TFQ":f="cirq";var c=parseFloat(a||"0.7");isNaN(c)&&(c=.7),typeof o>"u"&&(o=1024);var p=new Ne;p.load(this.save(r));var d="",h="";if(n){var m=(n||"").split(`
`);m.map(function(Se){Se.length>=1&&Se[0]!="#"&&(d+="# "),d+=Se,d+=`
`})}var v=function(Se,le){if(Se.isSymbolNode){var Q=["pi","sin","cos","tan","asin","acos","atan"];if(Q.indexOf(Se.name)>=0)return"np."+Se.name}};if(e){for(var g="",y=0,_=0;_<p.params.length;_++)y>0&&(g+=", "),g+=p.params[_],y++;for(var _=0;_<p.numQubits;_++)y>0&&(g+=", "),g+=Hi(_,p.numQubits),y++;d+="def "+e+(g?"("+g+")":"")+`:
`,d+=`    return [
`,h="        "}else{u&&(d+=`import tensorflow_quantum as tfq
`),d+=`import cirq
`,d+=`import numpy as np
`,d+=`from functools import reduce
`,d+=`
`;var x=this.options&&this.options.params?this.options.params:{};if(this.params.length){for(var _=0;_<this.params.length;_++){var M=this.params[_],A=Ce.parse(x[M]),E=A.toString({handler:v});d+=M+" = "+E+`
`}d+=`
`}var D=p.usedGates();r||D.map(function(Se){var le=p.basicGates[Se];if(!le){var Q=l.customGates[Se];if(Q){var Ee=new Ne;Ee.load(Q);var ne={comment:"",decompose:!0,versionStr:a};d+=Ee.exportToCirq(ne,e)}}});var N="",D=p.usedGates();D.map(function(Se){var le=p.basicGates[Se];if(le&&le.exportInfo&&le.exportInfo.cirq){var Q=le.exportInfo.cirq,Ee=!1;if(Q.replacement){var ne=p.getGateDef(Q.replacement.name);Q=ne.exportInfo.cirq,Ee=!0}if(Q.array&&!u){var se=Ee?Q.name:Se;if(N.indexOf(se)<0){if(N+="def "+se+"(",Q.params&&Q.params.map(function(xe,ve){ve>0&&(N+=", "),N+="p_"+xe}),N+=`):
`,le.matrix&&le.matrix.length)if(c<.7)switch(le.matrix.length){case 2:N+="    return cirq.SingleQubitMatrixGate(np.array("+Q.array+`))
`;break;case 4:N+="    return cirq.TwoQubitMatrixGate(np.array("+Q.array+`))
`;break;default:N+="    # Export to "+f+" WARNING: Cannot define "+le.matrix.length+" x "+le.matrix.length+` matrix gate
`}else N+="    return cirq.MatrixGate(np.array("+Q.array+`))
`;N+=`
`}}}}),d+=N,u?d+="q = cirq.GridQubit.rect(1, "+p.numQubits+`)
`:d+="q = [cirq.NamedQubit('q' + str(i)) for i in range("+p.numQubits+`)]
`,d+=`
`,c<.7?d+=`circuit = cirq.Circuit.from_ops(
`:d+=`circuit = cirq.Circuit(
`,h="    "}for(var C=p.numCols(),T=0,P="",I=!1,U=0;U<C;U++)for(var q=0;q<this.numQubits;q++){var z=p.getGateAt(U,q);if(z&&z.connector==0){T>0&&(d+=",",u&&I&&(d+=h+"# Export to TFQ WARNING: Gate not yet supported by Tensorflow Quantum"),d+=`
`);var G=p.getGateDef(z.name),F=z.options&&z.options.params?z.options.params:{},k=null,O=!1,W=!!p.basicGates[z.name];if(G){G.exportInfo&&(I=!!G.exportInfo.cirq.notTfqSupported,G.exportInfo.cirq&&G.exportInfo.cirq.replacement&&(G.exportInfo.cirq.replacement.params&&(F=G.exportInfo.cirq.replacement.params),O=!!(G.exportInfo.cirq.replacement.type&&G.exportInfo.cirq.replacement.type=="controlled"),I=!!G.exportInfo.cirq.replacement.notTfqSupported,G=p.getGateDef(G.exportInfo.cirq.replacement.name)),k=G&&G.exportInfo&&G.exportInfo.cirq?G.exportInfo.cirq:null),T++,z.options&&z.options.condition&&z.options.condition.creg&&(d+=h+"# Export to "+f+` WARNING: classical control not implemented yet.
`);var X=0,ee="";if(F){var J=G.params||[];z.name=="yy"&&(J=[]);var Y=J.length;if(Y)for(var ie=0;ie<Y;ie++){X==0&&(ee+="("),X>0&&(ee+=", ");var K=J[ie];if(F[K]){var A=Ce.parse(F[K]);if(!A.args)for(var re in z.options.params)A=Ce.parse(z.options.params[re]);ee+=A.toString({handler:v})}X==Y-1&&(W?ee+=")":ee+=", "),X++}}if(k){var oe=k.name.indexOf("**")>=0;d+=h,oe&&(d+="("),k.array||(d+="cirq."),u&&k.tfqReplacement&&k.tfqReplacement.name?d+="cirq."+k.tfqReplacement.name:d+=k.name,oe&&(d+=")")}else d+=h+z.name;d+=ee,O?d+=".controlled().on(":W&&(d+="(");for(var y=0,ce=0;ce<z.wires.length;ce++)y>0&&(d+=", "),e?d+=Hi(z.wires[ce],p.numQubits):d+="q["+z.wires[ce]+"]",y++;z.name=="measure"&&z.options&&z.options.creg&&(y>0&&(d+=", key="),d+="'"+z.options.creg.name+z.options.creg.bit+"'",U==C-1&&q==this.numQubits-1?P+="'"+z.options.creg.name+z.options.creg.bit+"'":P+="'"+z.options.creg.name+z.options.creg.bit+"', ",y++),d+=")"}else d+=h+"# Export to "+f+' WARNING: unknown gate "'+z.name+'".'}}if(u&&I&&(d+=h+"# Export to TFQ WARNING: Gate not yet supported by Tensorflow Quantu"),e?(d+=`
    ]
`,d+=`
`):(d+=`
)
`,d+=`
`,u||(d+=`simulator = cirq.Simulator()
`,d+="result = simulator.run(circuit, repetitions="+o+`)
`,d+="result_dict = dict(result.multi_measurement_histogram(keys=["+P+`]))
`,d+=`keys = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1]), result_dict.keys()))
`,d+=`counts = dict(zip(keys,[value for value in result_dict.values()]))
`,d+="print(counts)")),s){var me={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:d,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(me)}return d};Ne.prototype.exportToTFQ=function(t,e){t=t||{};var n=t.comment,r=t.decompose,a=t.versionStr,s=t.asJupyter,o=t.shots;typeof o>"u"&&(o=1024);var u=new Ne;u.load(this.save(r));var l="";if(n){var f=(n||"").split(`
`);f.map(function(d){d.length>=1&&d[0]!="#"&&(cirq+="# "),cirq+=d,cirq+=`
`})}var c={comment:n,decompose:r,versionStr:a,asJupyter:!1,shots:o,exportTfq:!0};if(l+=u.exportToCirq(c,e),l+="results_list = tfq.layers.Sample()(circuit, repetitions="+o+`).to_list()[0]
`,l+=`results = list(map(lambda arr: reduce(lambda x, y: str(x) + str(y), arr[::-1]), results_list))
`,l+=`counts = dict(zip(results,[results.count(i) for i in results]))
`,l+="print(counts)",s){var p={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:l,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(p)}return l};Ne.prototype.exportToQSharp=function(t,e){t=t||{},t.comment;var n=t.decompose,r=t.versionStr,a=t.asJupyter,s=t.circuitName,o=t.indentDepth,u=this,l=function(ee,J){if(ee.isSymbolNode){var Y={pi:"PI()"};if(Y[ee.name])return Y[ee.name]}if(ee.isConstantNode&&Number.isInteger(ee.value))return ee.value.toFixed(1)},f=s||"Circuit";o=o||0;function c(ee){for(var J="",Y=0;Y<ee;Y++)J+="    ";return J}var p=new Ne;p.load(this.save(n));var d="",h=c(o);if(e||(a||(d+=`namespace Quantum {
`,o++,h=c(o)),d+=h+`open Microsoft.Quantum.Intrinsic;
`,d+=h+`open Microsoft.Quantum.Canon;
`,d+=h+`open Microsoft.Quantum.Math;
`,d+=h+`open Microsoft.Quantum.Convert;
`,d+=`
`,d+=h+`function SetBitValue(reg: Int, bit: Int, value: Bool): Int {
`,d+=h+`    if(value) {
`,d+=h+`        return reg ||| (1 <<< bit);
`,d+=h+`    } else {
`,d+=h+`        return reg &&& ~~~(1 <<< bit);
`,d+=h+`    }
`,d+=h+`}
`,d+=h+`
`),e){for(var m="",v=0,g=0;g<p.params.length;g++)v>0&&(m+=", "),m+=p.params[g],v++;for(var g=0;g<p.numQubits;g++)v>0&&(m+=", "),m+=Hi(g,p.numQubits)+": Qubit",v++;d+=h+"operation "+e+(m?"("+m+")":"")}else{var x=p.usedGates();n||x.map(function(J){var Y=p.basicGates[J];if(!Y){var ie=u.customGates[J];if(ie){var K=new Ne;K.load(ie);var re={comment:"",decompose:!0,versionStr:r,asJupyter:!1,circuitName:null,indentDepth:o};d+=K.exportToQSharp(re,e)}}}),d+=h+"operation "+f+"()"}o++,h=c(o);var y=0;for(cregName in p.cregs)y++;var _="";if(y){d+=" : (";for(cregName in p.cregs)_&&(d+=", ",_+=", "),d+="Int",_+=cregName;d+=")"}else d+=" : Unit";if(d+=` {
`,y)for(cregName in p.cregs)d+=h+"mutable "+cregName+` = 0;
`;qreg_name="qubits",e||(d+=h+"using(",d+=qreg_name+" = Qubit["+p.numQubits+"]",d+=`) {
`,o++,h=c(o));for(var x=p.usedGates(),M=p.numCols(),A=0;A<M;A++)for(var E=0;E<p.numQubits;E++){var N=p.getGateAt(A,E);if(N&&N.connector==0){var D=p.getGateDef(N.name);D||(D=p.customGates[N.name]);var C=N.options&&N.options.params?N.options.params:{},T=null,P=!1,I=0;if(D){D.exportInfo&&(D.exportInfo.qsharp&&D.exportInfo.qsharp.replacement&&(D.exportInfo.qsharp.replacement.params&&(C=D.exportInfo.qsharp.replacement.params),D=p.getGateDef(D.exportInfo.qsharp.replacement.name)),T=D&&D.exportInfo&&D.exportInfo.qsharp?D.exportInfo.qsharp:null),D.drawingInfo&&D.drawingInfo.root&&N.name!="cx"&&N.name!="ccx"&&(P=!0);var U=0,q="";if(C){var z=D.params||[],G=z.length;if(G)for(var F=0;F<G;F++){U>0&&(q+=", ");var k=z[F];if(C[k]){var O=Ce.parse(C[k]);q+=O.toString({handler:l})}U++}}if(N.name=="measure")N.options&&N.options.creg?(d+=h+"set "+N.options.creg.name+" = SetBitValue("+N.options.creg.name+", "+N.options.creg.bit+", ResultAsBool(M(",e?d+=Hi(N.wires[0],p.numQubits)+`)));
`:d+=qreg_name+"["+N.wires[0]+`])));
`):d+=h+`// Export to qsharp WARNING: missing destination register
`;else{d+=h,N.options&&N.options.condition&&N.options.condition.creg&&(d+="if("+N.options.condition.creg+" == "+N.options.condition.value+`) {
`,o++,h=c(o),d+=h),T?d+=T.name+"(":d+=N.name+"(",P?(e?d+="["+Hi(N.wires[0],p.numQubits)+"], (":d+="["+qreg_name+"["+N.wires[0]+"]], (",I=1):I=0,q&&(d+=q+", ");for(var v=0,W=I;W<N.wires.length;W++)v>0&&(d+=", "),e?d+=Hi(N.wires[W],p.numQubits):d+=qreg_name+"["+N.wires[W]+"]",v++;P&&(d+=")"),d+=`);
`,N.options&&N.options.condition&&N.options.condition.creg&&(o--,h=c(o),d+=h+`}
`)}}}}if(e||(d+=h+"ResetAll("+qreg_name+`);
`,o--,h=c(o),d+=h+`}
`),y&&(d+=h+"return ("+_+`);
`),o--,h=c(o),d+=h+`}
`,e?d+=`
`:a||(d+=`}
`),a){var X={metadata:{kernelspec:{display_name:"Q#",language:"qsharp",name:"iqsharp"},language_info:{name:""}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:d,metadata:{},outputs:[],execution_count:null},{cell_type:"code",source:"%simulate "+f,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(X)}return d};Ne.prototype.exportToBraket=function(t,e){t=t||{},t.comment;var n=t.decompose,r=t.versionStr,a=t.asJupyter,s=t.shots,o=t.hybrid,u=t.indentDepth,l=this;s=s||1024,typeof o>"u"&&(o=this.options?!!this.options.hybrid:!1);var f=new Ne;f.load(this.save(n));var c=function(oe,ce){if(oe.isSymbolNode){var me=["pi","sin","cos","tan","asin","acos","atan"];if(me.indexOf(oe.name)>=0)return"np."+oe.name;if(l.params.indexOf(oe.name)>=0&&o)return"params["+l.params.indexOf(oe.name)+"]"}},p=function(oe,ce){var me="",Se=oe.split(`
`),le=-1;Se.map(function(ne){var se=ne.search(/\S/);se>=0&&(le<0||se<le)&&(le=se)}),le<0&&(le=0);var Q="";if(le<ce.length)for(var Ee=0;Ee<ce.length-le;Ee++)Q+=" ";return Se.map(function(ne){me+=Q+ne+`
`}),me},d=function(oe){for(var ce="",me=0;me<oe;me++)ce+="    ";return ce};u=u||0;var h="",m=d(u),v=f.usedGates();v.map(function(oe){f.basicGates[oe]});var g="",y=0;if(e){for(var _=0;_<f.numQubits;_++)y>0&&(g+=", "),g+=Hi(_,f.numQubits),y++;for(var _=0;_<f.params.length;_++)y>0&&(g+=", "),g+=f.params[_],y++}else{h+=m+`import numpy as np
`,h+=m+`from braket.devices import LocalSimulator
`,h+=m+`from braket.circuits import Circuit
`,h+=m+`from collections import Counter
`,o&&(h+=m+`from scipy.optimize import minimize
`),h+=`
`,s&&(h+=m+"shots = "+s+`
`,h+=`
`);var x=this.options&&this.options.params?this.options.params:{};if(this.params.length){for(var _=0;_<this.params.length;_++){var M=this.params[_],A=Ce.parse(x[M]),E=A.toString({handler:c});h+=M+" = "+E+`
`}h+=`
`}o&&(h+=m+"tolerance = "+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.tolerance&&this.options.hybridOptions.tolerance||"0.001")+`
`,h+=`
`)}var N=null,D=null,C=0;v.map(function(oe){var ce=f.basicGates[oe];if(ce){if(!n&&f.basicGates[oe].exportInfo.braket&&f.basicGates[oe].exportInfo.braket.array){if(N=f.basicGates[oe].exportInfo.braket,N.name=="unitary"&&(D=oe+"_unitary",h+=m+"def "+D+"("),N.params&&N.params.length){var me=0;N.params.map(function(Q){me>0&&(h+=", "),h+=m+"p_"+Q,me++})}h+=`):
`,h+=d(u+1)+"return np.array("+N.array+`);

`}}else{var Se=l.customGates[oe];if(Se){var le=new Ne;le.load(Se),h+=le.exportBraket("",!0,oe,r,!1,null,!1,!1,u),C++}}}),e?(h+="def "+e+(g?"("+g+")":"")+`:
`,u++,m=d(u)):o&&(h+=`def objective_function(params):
`,u++,m=d(u)),h+=m+`circuit = Circuit()
`,e||C&&(h+=`
`,v.map(function(oe){!f.basicGates[oe]&&f.customGates[oe]&&(h+=m+"circuit.register_subroutine("+oe+`)
`)}),h+=`
`);for(var T=f.numCols(),P=0;P<T;P++)for(var I=0;I<f.numQubits;I++){var U=f.getGateAt(P,I);if(U&&U.connector==0){var q=f.getGateDef(U.name),z=U.options&&U.options.params?U.options.params:{},G=q.params||[],F=null,k=U.name,O="",W=!1;if(q&&q.exportInfo&&q.exportInfo.braket&&(F=q.exportInfo.braket,F.params&&(Array.isArray(F.params)?G=F.params:(z=F.params,G=Object.keys(z))),F.name=="unitary"?W=!0:k=F.name),!F&&!f.customGates[U.name])h+=m+'# Unsupported gate "'+U.name+`".
`;else{var X=0;if(z){var ee=G.length;if(ee)for(var J=0;J<ee;J++){X>0&&(O+=", ");var Y=G[J];if(typeof z[Y]<"u"){var A=Ce.parse(z[Y]);O+=A.toString({handler:c})}X++}}h+=m+"circuit.",W?h+="unitary(matrix="+k+"_unitary("+O+"), targets=[":h+=k+"(";var y=0;for(w=0;w<U.wires.length;w++)y>0&&(h+=", "),e?h+=Hi(U.wires[w],f.numQubits):h+=U.wires[w],y++;W?h+="]":O&&(h+=", ",h+=O),h+=")",h+=`
`}}}if(e&&(h+=m+"return circuit"),h+=`

`,!e)if(h+=m+`local_sim = LocalSimulator()
`,h+=m+`result = local_sim.run(circuit, shots=shots).result()
`,h+=m+`counts = Counter({ "".join(reversed(k)): v for k, v in result.measurement_counts.items() })
`,h+=`
`,o){h+=m+`# CALCULATE COST HERE
`;var ie=this.options&&this.options.hybridOptions&&this.options.hybridOptions.costFunction&&this.options.hybridOptions.costFunction.python||"";if(ie.trim()||(ie="cost = 0"),h+=p(ie,m),h+=`
`,h+=m+`return cost
`,u--,m=d(u),o){var K="";this.params.map(function(oe,ce){ce>0&&(K+=", "),K+=oe}),h+=`
`,h+="params = np.array(["+K+`])
`,h+=`
`,h+='minimum = minimize(objective_function, params, method="'+(this.options&&this.options.hybridOptions&&this.options.hybridOptions.optimizer?this.options.hybridOptions.optimizer:"Powell")+`", tol=tolerance)
`,h+=`print("cost:", minimum.fun, "params:", minimum.x)
`}}else h+=m+"print(counts)";if(a){var re={metadata:{kernelspec:{display_name:"Python 3",language:"python",name:"python3"}},nbformat:4,nbformat_minor:0,cells:[{cell_type:"code",source:h,metadata:{},outputs:[],execution_count:null}]};return JSON.stringify(re)}return h};Ne.prototype.exportToQobj=function(t,e){t=t||{};var n=t.circuitName,r=t.experimentName,a=t.numShots,s=this,o=this.options&&this.options.params?this.options.params:{},o=JSON.parse(JSON.stringify(o));for(var u in o)o[u]=Ce.evaluate(o[u]);n=n||"",r=r||"",a=a||1;var l=new Ne;l.load(this.save(!0));var f=this.randomString(),c={qobj_id:"qobj_"+f,type:"QASM",schema_version:"1.0",experiments:[],header:{description:n},config:{shots:a,memory_slots:0}},p={header:{memory_slots:0,n_qubits:0,qreg_sizes:[],qubit_labels:[],creg_sizes:[],clbit_labels:[],name:"circuit0"},config:{n_qubits:0,memory_slots:0},instructions:[]},d=Object.keys(l.cregs),h=function(K,re){if(K.isSymbolNode){var oe=K.name;if(re.replaceVars&&typeof re.replaceVars[oe]<"u"){var oe=re.replaceVars[oe];return s.params.indexOf(oe)>=0?"("+o[oe]+")":"("+oe+")"}if(s.params.indexOf(K.name)>=0)return o[K.name]}};if(!e){r&&(p.header.description=r);for(cregName in l.cregs){var m=l.cregs[cregName].length;c.config.memory_slots+=m,p.header.creg_sizes.push([cregName,m]);for(var v=0;v<m;v++)p.header.clbit_labels.push([cregName,v])}p.header.memory_slots=c.config.memory_slots,p.header.n_qubits=l.numQubits,p.config.memory_slots=c.config.memory_slots,p.config.n_qubits=l.numQubits,p.header.qreg_sizes.push(["q",l.numQubits])}var g=c.config.memory_slots,y=l.usedGates();y.map(function(K){var re=l.basicGates[K];if(!re){var oe=s.customGates[K];if(oe){customCircuit=new Ne,customCircuit.load(oe);var ce={circuitName:n,experimentName:r,numShots:a};c+=customCircuit.exportToQobj(ce,!1)}}});for(var _=l.numCols(),x=0;x<_;x++)for(var M=0;M<l.numQubits;M++){var A=l.getGateAt(x,M),E={name:"",qubits:[]},N=null,D=null;if(x==0&&p.header.qubit_labels.push(["q",M]),A&&A.connector==0){var C=l.getGateDef(A.name);if(C&&C.exportInfo&&(C.exportInfo.qasm&&C.exportInfo.qasm.replacement?(N=C.exportInfo.qasm.replacement,N.map(function(K){var re=new Ne;if(re.cregs=JSON.parse(JSON.stringify(s.cregs)),A.options&&A.options.params){var oe=Object.keys(A.options.params),ce=Object.keys(K.params);oe.map(function(le){ce.indexOf(le)>-1&&(K.params[le]=A.options.params[le])})}var me=A.options&&A.options.condition?A.options.condition:{};re.addGate(K.name,x,A.wires,{params:K.params,condition:me});var Se={circuitName:"",experimentName:"",numShots:""};p.instructions=p.instructions.concat(re.exportToQobj(Se,!0))})):C.exportInfo.qasm&&C.exportInfo.qasm.equivalent&&(D=C.exportInfo.qasm.equivalent,D.map(function(K){var re=new Ne;re.cregs=JSON.parse(JSON.stringify(s.cregs));var oe=K.wires.length>1?A.wires:A.wires[K.wires[0]],ce={};if(K.params){var me={};if(A.options&&A.options.params)for(var Se in A.options.params){var le=Ce.parse(A.options.params[Se]),Q=le.toString({handler:h});me[Se]=Q}for(var Ee in K.params){var le=Ce.parse(K.params[Ee]),Q=le.toString({handler:h,replaceVars:me});ce[Ee]=Q}}var ne=A.options&&A.options.condition?A.options.condition:{};re.addGate(K.name,x,oe,{params:ce,condition:ne});var se={circuitName:"",experimentName:"",numShots:""};p.instructions=p.instructions.concat(re.exportToQobj(se,!0))}))),!N&&!D){var T=A.name,P=A.options&&A.options.params?A.options.params:{};if(this.basicGates[T]){switch(T){case"id":T="iden";break}if(E.name=T,E.qubits=A.wires,A.options&&A.options.condition&&A.options.condition.creg){for(var I={name:"",register:g,relation:"==",mask:"",val:""},U=l.cregs[A.options.condition.creg].length,q=0,z=0,G="",F="",k=d.indexOf(A.options.condition.creg),v=0;v<k;v++)q+=l.cregs[d[v]].length;var O=A.options.condition.value%Math.pow(2,U)*Math.pow(2,q);if(F="0x"+O.toString(16).toUpperCase(),q>0){for(var W=Math.pow(2,q),X=0;X<U;X++)z+=W,W*=2;G="0x"+z.toString(16).toUpperCase()}else G="0x"+(Math.pow(2,U)-1).toString(16).toUpperCase();I.name="bfunc",E.conditional=g,I.mask=G,I.val=F,p.instructions.push(I),g+=1}if(T=="measure"&&A.options&&A.options.creg){E.memory=[],E.register=[];for(var ee=0,k=d.indexOf(A.options.creg.name),v=0;v<k;v++)ee+=l.cregs[d[v]].length;var J=ee+A.options.creg.bit;E.memory.push(J),E.register.push(J)}if(P&&(C=this.basicGates[T],C||(C=this.customGates[T]),C&&(paramDef=C.params||[],paramCount=paramDef.length,paramCount))){E.params=[];for(var Y=0;Y<paramCount;Y++)if(paramName=paramDef[Y],P[paramName]||P[paramName].toString()){var ie=Ce.evaluate(P[paramName],o);E.params.push(ie)}}p.instructions.push(E)}}}}return e?p.instructions:(p.instructions.length&&c.experiments.push(p),c)};Ne.prototype.clearPartitions=function(){this.partitionMap=[],this.partitionCount=0,this.partitionInfo={};for(var t=this.numCols(),e=0;e<this.numQubits;e++){this.partitionMap.push([]);for(var n=0;n<t;n++)this.partitionMap[e].push(-1)}};Ne.prototype.createPartitions=function(){this.clearPartitions();for(var t=[],e=0;e<this.numQubits;e++)t.push(-1);for(var n=0,r=this.numCols(),a=0;a<r;a++){for(var s=0;s<this.numQubits;s++){var o=this.getGateAt(a,s);if(o&&o.wires){for(var u=[],l=0;l<o.wires.length;l++){var f=o.wires[l],c=t[f];u.indexOf(c)<0&&u.push(c)}var p=-1;u.length!=1||u[0]==-1?p=n++:p=u[0];for(var l=0;l<o.wires.length;l++){var f=o.wires[l];if(oldPartition=t[f],oldPartition==-1)t[f]=p;else for(var e=0;e<this.numQubits;e++)t[e]==oldPartition&&(t[e]=p)}}}for(var s=0;s<this.numQubits;s++)this.partitionMap[s][a]=t[s]}this.partitionCount=n;for(var p=0;p<n;p++)this.partitionInfo[p]=this.partitionBounds(p)};Ne.prototype.printPartitions=function(){for(var t=this.numCols(),e=0;e<this.numQubits;e++){for(var n="",r=0;r<t;r++){var a=this.partitionMap[e][r];for(a==-1&&(a=" "),this.getGateAt(r,e)?a=a+"*":a=a+" ";a.length<4;)a=" "+a;n+=a}for(var s=e+"";s.length<2;)s="0"+s;n="q"+s+n,console.log(n)}};Ne.prototype.partitionBounds=function(t){for(var e={wire:{top:-1,bottom:-1},column:{left:-1,right:-1},wireMap:{},parents:{}},n=!1,r=this.numCols(),a=0;a<r;a++)for(var s=0;s<this.numQubits;s++){var o=this.partitionMap[s][a];o==t&&(n=!0,e.wire.top<0&&(e.wire.top=s),e.wire.bottom<s&&(e.wire.bottom=s),e.column.left<0&&(e.column.left=a),e.column.right<a&&(e.column.right=a))}if(!n)return null;for(var u=0,s=e.wire.top;s<=e.wire.bottom;s++){var o=this.partitionMap[s][e.column.left];o==t&&(e.wireMap[s]=u,u++)}if(e.numQubits=u,e.column.left>0)for(var s in e.wireMap){var l=this.partitionMap[s][e.column.left-1];if(l>=0){e.parents[l]||(e.parents[l]={},e.parents[l].links=[]);var f=this.partitionInfo[l];for(var c in f.wireMap)c==s&&e.parents[l].links.push(e.wireMap[s])}}return e};Ne.prototype.partitionCircuit=function(t){var e=this.partitionInfo[t];if(!e)return null;var n=[],r=[];for(var a in e.parents){var s={};s.circuit=this.partitionCache[a],s.wires=[],s.wires=e.parents[a].links,r=r.concat(s.wires),n.push(s)}var o=new Ne;if(n.length>0){if(e.numQubits>r.length){var s={};s.circuit=new Ne(e.numQubits-r.length),s.wires=[];for(var u=0;u<e.numQubits;u++)r.indexOf(u)<0&&s.wires.push(u);n.push(s)}o.setCombinedState(n)}for(var l=e.column.left;l<=e.column.right;l++)for(var f=e.wire.top;f<=e.wire.bottom;f++){var c=this.partitionMap[f][l];if(c==t){var p=this.getGateAt(l,f);if(p&&p.connector==0){for(var d=[],h=0;h<p.wires.length;h++){var m=p.wires[h];d.push(e.wireMap[m])}o.addGate(p.name,l-e.column.left,d,p.options)}}}return o};Ne.prototype.run=function(t,e){if(e=e||{},this.measureResetsQubit=!!e.strictMode,e.continue||(this.initState(),this.stats.duration=0),e.initialState){if(Array.isArray(e.initialState)){this.state={};for(var n=0;n<e.initialState.length;n++){var r=e.initialState[n];Array.isArray(r)&&r.length==2&&(r=Ce.complex(r[0],r[1])),typeof r=="string"&&(r=this.evalMathString(r)),typeof r=="number"&&(r=Ce.complex(r,0)),this.state[n+""]=r}}else this.state=e.initialState;this.stateBits=0;for(var a in this.state)this.stateBits|=parseInt(a)}this.stats.start=new Date;var s=new Ne;if(s.load(this.save(!0)),t){s.insertColumn(0);for(var o=0;o<s.numQubits;o++)t[o]&&s.addGate("x",0,o,{})}var u=e.partitioning;u&&s.createPartitions();for(var l=s.numCols(),f=0,c=0;c<l;c++){for(var o=0;o<s.numQubits;o++){var p=s.getGateAt(c,o);if(p&&p.connector==0){f++;var d=!0;if(p.options&&p.options.condition&&p.options.condition.creg){var h=this.getCregValue(p.options.condition.creg);d=h===p.options.condition.value}if(d)if(u){var m=s.partitionMap[o][c];s.partitionCache[m]||(s.partitionCache[m]=s.partitionCircuit(m));var v=s.partitionCache[m],g=s.partitionInfo[m],y=c-g.column.left,_=v.getGateAt(y,g.wireMap[o]);v.cregs=JSON.parse(JSON.stringify(this.cregs)),v.applyGate(_.name,y,_.wires,_.options),this.cregs=JSON.parse(JSON.stringify(v.cregs))}else this.applyGate(p.name,c,p.wires,p.options);e&&e.onGate&&e.onGate(c,o,f)}}e&&e.onColumn&&e.onColumn(c)}if(u){for(var x=[],o=0;o<s.numQubits;o++){var m=s.partitionMap[o][l-1];m>=0&&x.indexOf(m)<0&&x.push(m)}if(x.length)if(x.length==1)this.state=s.partitionCache[x[0]].state,this.stateBits=s.partitionCache[x[0]].stateBits;else{for(var M=this.stats.start,A=[],E=0;E<x.length;E++){var N=x[E],D={};D.circuit=s.partitionCache[N],D.wires=[];var C=s.partitionInfo[N];for(var o in C.wireMap)D.wires.push(parseInt(o));A.push(D)}this.setCombinedState(A),this.stats.start=M}}this.stats.end=new Date,this.stats.duration+=this.stats.end-this.stats.start};Ne.prototype.continue=function(){this.run(null,{continue:!0})};Ne.prototype.stateAsArray=function(t,e,n,r){var a=[],s=this.numAmplitudes();e=e||0,n=n||(t?this.numAmplitudes(t):s);for(var o=0,u=0;u<s;u++){var l=u;r&&(l=JJ(u,this.numQubits));var f=Ce.round(this.state[l]||Ce.complex(0,0),14);if(!t||f.re||f.im){if(o>=e){for(var c=u.toString(2);c.length<this.numQubits;)c="0"+c;var p=this.formatComplex(f,{fixedWidth:!0,decimalPlaces:8,iotaChar:"i"}),d=Ce.pow(Ce.abs(f),2),h=d*100,m=h.toFixed(5),v=Ce.arg(f),g=v.toFixed(5);a.push({index:u,indexBinStr:c,amplitude:f,amplitudeStr:p,magnitude:d,chance:h,chanceStr:m,phase:v,phaseStr:g})}if(o++,a.length==n)return a}}return a};Ne.prototype.stateAsSimpleArray=function(t){var e=this.numAmplitudes();if(!this.state)return[];for(var n=[],r=0;r<e;r++){var a=r;t&&(a=JJ(r,this.numQubits)),n.push(Ce.round(this.state[a]||Ce.complex(0,0),14))}return n};Ne.prototype.stateAsString=function(t){var e=this.numAmplitudes();if(!this.state)return"Error: circuit is not initialized. Please call initState() or run() method.";for(var n="",r=0;r<e;r++){var a=Ce.round(this.state[r]||Ce.complex(0,0),14);if(!t||a.re||a.im){for(var s=Ce.pow(Ce.abs(a),2)*100,o=r.toString(2);o.length<this.numQubits;)o="0"+o;for(var u=s.toFixed(5);u.length<9;)u=" "+u;n+=this.formatComplex(a,{fixedWidth:!0,decimalPlaces:8,iotaChar:"i"})+"|"+o+">	"+u+`%
`}}return n};Ne.prototype.print=function(t){console.log(this.stateAsString(t))};Ne.prototype.gotClassicalControl=function(){for(var t=0;t<this.numCols();t++)for(var e=0;e<this.numQubits;e++){var n=this.getGateAt(t,e);if(n&&n.connector==0&&n.options&&n.options.condition&&n.options.condition.creg)return!0}return!1};Ne.prototype.gotMeasurement=function(){for(var t=0;t<this.numCols();t++)for(var e=0;e<this.numQubits;e++){var n=this.getGateAt(t,e);if(n&&n.connector==0&&n.name=="measure")return!0}return!1};Ne.prototype.cregCount=function(){var t=0;for(var e in this.cregs)t++;return t};Ne.prototype.getCregs=function(){var t={};for(var e in this.cregs)t[e]=this.getCregValue(e);return t};Ne.prototype.cregsAsString=function(){var t=`reg	bin	dec
`;for(var e in this.cregs){for(var n=this.getCregValue(e),r=n.toString(2),a=this.cregs[e]&&this.cregs[e].length||1;r.length<a;)r="0"+r;t+=e+"	"+r+"	"+n+`
`}return t};Ne.prototype.createCreg=function(t,e){for(this.cregs[t]=[];this.cregs[t].length<(e||1);)this.cregs[t].push(0)};Ne.prototype.removeCreg=function(t){for(var e=this.numCols(),n=[],r=0;r<e;r++)for(var a=0;a<this.numQubits;a++){var s=this.gates[a][r];s&&s.options&&(s.options.creg&&s.options.creg.name&&s.options.creg.name==t&&n.indexOf(s.id)<0&&n.push(s.id),s.options.condition&&s.options.condition.creg&&s.options.condition.creg==t&&delete s.options.condition)}delete this.cregs[t];for(var o=0;o<n.length;o++)this.removeGate(n[o])};Ne.prototype.renameCreg=function(t,e){for(var n=this.numCols(),r=0;r<n;r++)for(var a=0;a<this.numQubits;a++){var s=this.gates[a][r];s&&s.options&&(s.options.creg&&s.options.creg.name&&s.options.creg.name==t&&(s.options.creg.name=e),s.options.condition&&s.options.condition.creg&&s.options.condition.creg==t&&(s.options.condition.creg=e))}this.cregs[e]=JSON.parse(JSON.stringify(this.cregs[t])),delete this.cregs[t]};Ne.prototype.minCregSize=function(t){for(var e=0,n=this.numCols(),r=0;r<n;r++)for(var a=0;a<this.numQubits;a++){var s=this.gates[a][r];if(s&&s.options){if(s.options.creg&&s.options.creg.name&&s.options.creg.name==t){var o=parseInt(s.options.creg.bit||0);isNaN(o)&&(o=0),o>e&&(e=o)}if(s.options.condition&&s.options.condition.creg&&s.options.condition.creg==t){var u=Math.floor(Math.log2(s.options.condition.value));u>e&&(e=u)}}}return e+1};Ne.prototype.resizeCreg=function(t,e){if(!(e<this.minCregSize(t))){for(;this.cregs[t].length<e;)this.cregs[t].push(0);for(;this.cregs[t].length>e;)this.cregs[t].pop()}};Ne.prototype.getCreg=function(t){return this.cregs[t]};Ne.prototype.setCregBit=function(t,e,n){var r=parseInt(e);if(isNaN(r))throw'Error: invalid "cbit" argument to "setCregBit" method: expected "integer" got "'+typeof e+'".';for(this.cregs[t]||(this.cregs[t]=[]);r>=this.cregs[t].length;)this.cregs[t].push(0);this.cregs[t][r]=n?1:0};Ne.prototype.getCregBit=function(t,e){if(!this.cregs[t])throw'Error: "getCregBit": unknown register "'+t+'".';var n=parseInt(e);if(isNaN(n)||n>=this.cregs[t].length)throw'Error: "getCregBit": bit "'+e+'" not found.';return this.cregs[t][n]};Ne.prototype.cregBase=function(t){if(!this.cregs[t])throw'Error: "getCregBit": unknown register "'+t+'".';var e=0;for(var n in this.cregs){if(n==t)return e;e+=this.cregs[n].length}};Ne.prototype.cregTotalBits=function(){var t=0;for(var e in this.cregs)t+=this.cregs[e].length;return t};Ne.prototype.getCregValue=function(t){if(!this.cregs[t])throw'Error: "getCregBit": unknown register "'+t+'".';for(var e=this.cregs[t].length,n=0,r=0;r<e;r++)this.cregs[t][r]&&(n+=Ce.pow(2,r));return n};Ne.prototype.measureAll=function(t){if(this.collapsed&&this.collapsed.length==this.numQubits&&!t)return this.collapsed;this.collapsed=[];var e=Math.random();for(var n in this.state){var r=Ce.round(this.state[n],14);if(r.re||r.im){var a=Ce.round(Ce.pow(Ce.abs(r),2),14);if(e-=a,e<=0){var s=parseInt(n);if(this.reverseBitOrder)for(var o=this.numQubits-1;o>=0;o--)this.collapsed.push(1<<o&s?1:0);else for(var o=0;o<this.numQubits;o++)this.collapsed.push(1<<o&s?1:0);return this.collapsed}}}if(!this.collapsed.length)for(;this.collapsed.length<this.numQubits;)this.collapsed.push(0);return this.collapsed};Ne.prototype.measureAllMultishot=function(t){t=t||1;for(var e={},n=[],r=0;r<t;r++)n.push(Math.random());var a=0;do for(var s in this.state){var o=Ce.round(this.state[s],14);if(o.re||o.im){for(var u=Ce.round(Ce.pow(Ce.abs(o),2),14),l=0;l<t;l++)if(n[l]>0&&(n[l]-=u,n[l]<=0)){for(var f=parseInt(s).toString(2);f.length<this.numQubits;)f="0"+f;if(e[f]?e[f]++:e[f]=1,a++,a==t)return e}}}while(a<t)};Ne.prototype.measure=function(t,e,n,r){(r||!this.collapsed||this.collapsed.length!=this.numQubits)&&this.measureAll(r);var a=this.collapsed[t];return e&&typeof n<"u"&&this.setCregBit(e,n,a),a};Ne.prototype.probabilities=function(){this.prob=[];for(var t=0;t<this.numQubits;t++)this.prob.push(0);for(var e in this.state)for(var n=parseInt(e),t=0;t<this.numQubits;t++){var r=null;if(this.reverseBitOrder?r=Ce.pow(2,this.numQubits-1-t):r=Ce.pow(2,t),n&r){var a=this.state[e];(a.re||a.im)&&(this.prob[t]+=Ce.pow(Ce.abs(a),2))}}for(var t=0;t<this.numQubits;t++)this.prob[t]=Ce.round(this.prob[t],14);return this.prob};Ne.prototype.probability=function(t){return(!this.prob||this.prob.length!=this.numQubits)&&this.probabilities(),this.prob[t]};Ne.prototype.densityMatrix=function(){var t=[],e=this.numAmplitudes();for(row=0;row<e;row++){for(var n=[],r=this.state[row]||Ce.complex(0,0),a=0;a<e;a++){var s=this.state[a]||Ce.complex(0,0);(s.re||s.im)&&(s=Ce.conj(s)),n.push(Ce.multiply(r,s))}t.push(n)}return t};Ne.prototype.partialTrace=function(t){function e(c,p,d){var v=c<<1,h=(2<<p)-1,m=1<<p,v=v^(v^c)&h|m;return d||(v=v^m),v}var n=[],r=this.numQubits-1,a=Ce.pow(2,r),s=null;this.reverseBitOrder?s=this.numQubits-1-t:s=t;for(var o=0;o<4;o++){n.push(Ce.complex(0,0));for(var u=a;u--;){var l=e(u,s,o&2?1:0);if(this.state[l]){var f=e(u,s,o&1?1:0);this.state[f]&&(n[o]=Ce.add(n[o],Ce.multiply(this.state[l],Ce.conj(this.state[f]))))}}}return[[n[0],n[1]],[n[2],n[3]]]};Ne.prototype.angles=function(){for(var t=[],e=0;e<this.numQubits;e++)t.push({theta:0,phi:0});for(var e=0;e<this.numQubits;e++){var n=this.partialTrace(e),r=Ce.round(Ce.sqrt(n[0][0]),12),a=Ce.round(Ce.multiply(n[1][0],Ce.sqrt(2)),12),s=Ce.round(Ce.abs(Ce.sqrt(2*Ce.abs(Ce.trace(Ce.pow(n,2)))-1)),12),o=Ce.multiply(2,Ce.acos(r)),u=0;Ce.round(a.re,8)==0&&Ce.round(a.im,8)==0||(u=Ce.multiply(Ce.complex(0,-1),Ce.log(Ce.multiply(a,Ce.csc(Ce.divide(o,2))))).re,isNaN(u)&&(u=0)),t[e].theta=Ce.round(Ce.abs(o),12),t[e].phi=Ce.round(u,12),t[e].thetaDeg=Ce.round(Ce.multiply(Ce.abs(o),180/Ce.pi),7),t[e].phiDeg=Ce.round(Ce.multiply(u,180/Ce.pi),7),t[e].radius=Ce.round(s,7)}return t};Ne.prototype.randomCircuit=function(t,e,n){this.init(t),n=n||{};var r=n.useGates&&n.useGates.length?n.useGates:Object.keys(this.basicGates);n.noMeasure&&r.indexOf("measure")>=0&&r.splice(r.indexOf("measure"),1),n.noReset&&r.indexOf("reset")>=0&&r.splice(r.indexOf("reset"),1);for(var a=0;a<e;){var s=r[Math.floor(Math.random()*r.length)],o=this.basicGates[s];if(o){var u=o.matrix&&o.matrix.length?Ce.log2(o.matrix.length):1;if(u<=t){for(var l=[];l.length<u;){var f=-1;do f=Math.floor(Math.random()*t);while(l.indexOf(f)>=0);l.push(f)}var c={};if(o.params&&o.params.length){var p={};o.params.map(function(h){p[h]=Math.PI*2*Math.random(),p[h]>Math.PI&&(p[h]=Math.PI-p[h])}),c.params=p}if(s=="measure")c.creg={name:"c",bit:l[0]};else if(!n.noClassicControl&&Math.floor(Math.random()*4)==0){var d=this.cregTotalBits();d&&(c.condition={creg:"c",value:Math.floor(Math.random()*Ce.pow(2,d))})}this.appendGate(s,l,c),a++}}}};Ne.prototype.randomUnitary=function(t){var e=new Ne;return e.randomCircuit(t||1,(t||1)*8,{useGates:["rx","rz","cz"],noMeasure:!0,noReset:!0,noClassicControl:!0}),e.circuitMatrix()};Ne.prototype.eulerAnglesZYZ=function(t){var e={theta:null,phi:null,lambda:null,phase:null},n=Ce.pow(Ce.det(t),-.5);e.phase=-1*Ce.complex(n).toPolar().phi;var r=Ce.multiply(n,t);e.theta=2*Ce.atan2(Ce.abs(r[1][0]),Ce.abs(r[0][0]));var a=2*Ce.complex(r[1][1]).toPolar().phi,s=2*Ce.complex(r[1][0]).toPolar().phi;return e.phi=(a+s)/2,e.lambda=(a-s)/2,e};var jEe=Ne;const XEe=Au(jEe),T7={QASM:{name:"QASM"}},ig={h:{name:"h"},y:{name:"y"},x:{name:"x"},i:{name:"i"},z:{name:"z"}},YEe=(t,e=T7.QASM.name)=>{const n=new XEe;switch(e){case T7.QASM.name:{n.importQASM(t,function(a){if(a.length){a.forEach(s=>{vr(s.msg)});return}});break}default:{vr("Invalid input type");return}}console.log(n);const r=[];for(let a=0;a<n.numQubits;a++)r[a]=[],r[a][0]={gate:null,coord:[0,0,0]},r[a][1]={gate:"init",coord:[0,0,1]};return n.gates.forEach((a,s)=>{a.forEach(o=>{const u=r[s].at(-1).coord;let l=[];if(o){switch(o.name){case ig.h.name:{l=[u[2],u[1],u[0]];break}case ig.y.name:{l=[-u[0],u[1],-u[2]];break}case ig.x.name:{l=[u[0],-u[1],-u[2]];break}case ig.i.name:{l=[...u];break}case ig.z.name:{l=[-u[0],-u[1],u[2]];break}}console.log(o.name),console.log(s),console.log(l.length?"Value adding":"Value not adding"),l.length&&r[s].push({gate:o.name,coord:[...l]})}})}),console.log("Before plots",JSON.stringify(r)),r.forEach((a,s)=>{let o=[];a.forEach((u,l)=>{if(l===0)o.push({...u,coord:[...u.coord]});else{let f=o[l-1].coord;o[l]={...u,coord:[f[0]+u.coord[0],f[1]+u.coord[1],f[2]+u.coord[2]]}}}),r[s]=o}),console.log("After plots",JSON.stringify(r)),r};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const fD="169",gd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},KJ=0,hL=1,eK=2,QEe=3,tK=0,pD=1,ey=2,cu=3,Sl=0,Pa=1,ko=2,fc=0,Fd=1,mL=2,vL=3,gL=4,nK=5,Of=100,rK=101,iK=102,aK=103,sK=104,oK=200,uK=201,lK=202,cK=203,Ow=204,Lw=205,fK=206,pK=207,dK=208,hK=209,mK=210,vK=211,gK=212,yK=213,xK=214,kw=0,Uw=1,Fw=2,sh=3,Bw=4,zw=5,qw=6,Gw=7,gx=0,bK=1,SK=2,ol=0,wK=1,_K=2,MK=3,w4=4,EK=5,TK=6,AK=7,yL="attached",NK="detached",dD=300,Rc=301,fp=302,Qy=303,Zy=304,vv=306,Jy=1e3,Bo=1001,Ky=1002,Vi=1003,_4=1004,ZEe=1004,Z0=1005,JEe=1005,ni=1006,ty=1007,KEe=1007,tl=1008,eTe=1008,Mu=1009,M4=1010,E4=1011,zm=1012,hD=1013,Ic=1014,As=1015,gv=1016,mD=1017,vD=1018,oh=1020,T4=35902,A4=1021,N4=1022,Ra=1023,C4=1024,D4=1025,Bd=1026,uh=1027,gD=1028,yx=1029,R4=1030,yD=1031,tTe=1032,xD=1033,ny=33776,ry=33777,iy=33778,ay=33779,Hw=35840,Vw=35841,Ww=35842,$w=35843,jw=36196,Xw=37492,Yw=37496,Qw=37808,Zw=37809,Jw=37810,Kw=37811,e_=37812,t_=37813,n_=37814,r_=37815,i_=37816,a_=37817,s_=37818,o_=37819,u_=37820,l_=37821,sy=36492,c_=36494,f_=36495,I4=36283,p_=36284,d_=36285,h_=36286,CK=2200,DK=2201,RK=2202,e1=2300,m_=2301,x2=2302,Ad=2400,Nd=2401,t1=2402,bD=2500,P4=2501,nTe=0,rTe=1,iTe=2,IK=3200,O4=3201,aTe=3202,sTe=3203,kp=0,PK=1,nc="",Ro="srgb",Zc="srgb-linear",SD="display-p3",xx="display-p3-linear",n1="linear",wr="srgb",r1="rec709",i1="p3",oTe=0,xd=7680,uTe=7681,lTe=7682,cTe=7683,fTe=34055,pTe=34056,dTe=5386,hTe=512,mTe=513,vTe=514,gTe=515,yTe=516,xTe=517,bTe=518,xL=519,OK=512,LK=513,kK=514,L4=515,UK=516,FK=517,BK=518,zK=519,a1=35044,STe=35048,wTe=35040,_Te=35045,MTe=35049,ETe=35041,TTe=35046,ATe=35050,NTe=35042,CTe="100",bL="300 es",nl=2e3,s1=2001;class Lu{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const s=a.indexOf(n);s!==-1&&a.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const a=r.slice(0);for(let s=0,o=a.length;s<o;s++)a[s].call(this,e);e.target=null}}}const Ma=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let A7=1234567;const zd=Math.PI/180,qm=180/Math.PI;function no(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ma[t&255]+Ma[t>>8&255]+Ma[t>>16&255]+Ma[t>>24&255]+"-"+Ma[e&255]+Ma[e>>8&255]+"-"+Ma[e>>16&15|64]+Ma[e>>24&255]+"-"+Ma[n&63|128]+Ma[n>>8&255]+"-"+Ma[n>>16&255]+Ma[n>>24&255]+Ma[r&255]+Ma[r>>8&255]+Ma[r>>16&255]+Ma[r>>24&255]).toLowerCase()}function ti(t,e,n){return Math.max(e,Math.min(n,t))}function k4(t,e){return(t%e+e)%e}function DTe(t,e,n,r,a){return r+(t-e)*(a-r)/(n-e)}function RTe(t,e,n){return t!==e?(n-t)/(e-t):0}function oy(t,e,n){return(1-n)*t+n*e}function ITe(t,e,n,r){return oy(t,e,1-Math.exp(-n*r))}function PTe(t,e=1){return e-Math.abs(k4(t,e*2)-e)}function OTe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function LTe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function kTe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function UTe(t,e){return t+Math.random()*(e-t)}function FTe(t){return t*(.5-Math.random())}function BTe(t){t!==void 0&&(A7=t);let e=A7+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function zTe(t){return t*zd}function qTe(t){return t*qm}function GTe(t){return(t&t-1)===0&&t!==0}function HTe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function VTe(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function WTe(t,e,n,r,a){const s=Math.cos,o=Math.sin,u=s(n/2),l=o(n/2),f=s((e+r)/2),c=o((e+r)/2),p=s((e-r)/2),d=o((e-r)/2),h=s((r-e)/2),m=o((r-e)/2);switch(a){case"XYX":t.set(u*c,l*p,l*d,u*f);break;case"YZY":t.set(l*d,u*c,l*p,u*f);break;case"ZXZ":t.set(l*p,l*d,u*c,u*f);break;case"XZX":t.set(u*c,l*m,l*h,u*f);break;case"YXY":t.set(l*h,u*c,l*m,u*f);break;case"ZYZ":t.set(l*m,l*h,u*c,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function rs(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function cn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const $Te={DEG2RAD:zd,RAD2DEG:qm,generateUUID:no,clamp:ti,euclideanModulo:k4,mapLinear:DTe,inverseLerp:RTe,lerp:oy,damp:ITe,pingpong:PTe,smoothstep:OTe,smootherstep:LTe,randInt:kTe,randFloat:UTe,randFloatSpread:FTe,seededRandom:BTe,degToRad:zTe,radToDeg:qTe,isPowerOfTwo:GTe,ceilPowerOfTwo:HTe,floorPowerOfTwo:VTe,setQuaternionFromProperEuler:WTe,normalize:cn,denormalize:rs};class nt{constructor(e=0,n=0){nt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6],this.y=a[1]*n+a[4]*r+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ti(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),a=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*a+e.x,this.y=s*a+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class un{constructor(e,n,r,a,s,o,u,l,f){un.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,a,s,o,u,l,f)}set(e,n,r,a,s,o,u,l,f){const c=this.elements;return c[0]=e,c[1]=a,c[2]=u,c[3]=n,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,a=n.elements,s=this.elements,o=r[0],u=r[3],l=r[6],f=r[1],c=r[4],p=r[7],d=r[2],h=r[5],m=r[8],v=a[0],g=a[3],y=a[6],_=a[1],x=a[4],M=a[7],A=a[2],E=a[5],N=a[8];return s[0]=o*v+u*_+l*A,s[3]=o*g+u*x+l*E,s[6]=o*y+u*M+l*N,s[1]=f*v+c*_+p*A,s[4]=f*g+c*x+p*E,s[7]=f*y+c*M+p*N,s[2]=d*v+h*_+m*A,s[5]=d*g+h*x+m*E,s[8]=d*y+h*M+m*N,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8];return n*o*c-n*u*f-r*s*c+r*u*l+a*s*f-a*o*l}invert(){const e=this.elements,n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],p=c*o-u*f,d=u*l-c*s,h=f*s-o*l,m=n*p+r*d+a*h;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=p*v,e[1]=(a*f-c*r)*v,e[2]=(u*r-a*o)*v,e[3]=d*v,e[4]=(c*n-a*l)*v,e[5]=(a*s-u*n)*v,e[6]=h*v,e[7]=(r*l-f*n)*v,e[8]=(o*n-r*s)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,a,s,o,u){const l=Math.cos(s),f=Math.sin(s);return this.set(r*l,r*f,-r*(l*o+f*u)+o+e,-a*f,a*l,-a*(-f*o+l*u)+u+n,0,0,1),this}scale(e,n){return this.premultiply(NI.makeScale(e,n)),this}rotate(e){return this.premultiply(NI.makeRotation(-e)),this}translate(e,n){return this.premultiply(NI.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let a=0;a<9;a++)if(n[a]!==r[a])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const NI=new un;function qK(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const jTe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function J0(t,e){return new jTe[t](e)}function o1(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function GK(){const t=o1("canvas");return t.style.display="block",t}const N7={};function b2(t){t in N7||(N7[t]=!0,console.warn(t))}function XTe(t,e,n){return new Promise(function(r,a){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:a();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function YTe(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function QTe(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const C7=new un().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),D7=new un().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),ag={[Zc]:{transfer:n1,primaries:r1,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t,fromReference:t=>t},[Ro]:{transfer:wr,primaries:r1,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[xx]:{transfer:n1,primaries:i1,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.applyMatrix3(D7),fromReference:t=>t.applyMatrix3(C7)},[SD]:{transfer:wr,primaries:i1,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.convertSRGBToLinear().applyMatrix3(D7),fromReference:t=>t.applyMatrix3(C7).convertLinearToSRGB()}},ZTe=new Set([Zc,xx]),jn={enabled:!0,_workingColorSpace:Zc,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!ZTe.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=ag[e].toReference,a=ag[n].fromReference;return a(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return ag[t].primaries},getTransfer:function(t){return t===nc?n1:ag[t].transfer},getLuminanceCoefficients:function(t,e=this._workingColorSpace){return t.fromArray(ag[e].luminanceCoefficients)}};function hm(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function CI(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let c0;class HK{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{c0===void 0&&(c0=o1("canvas")),c0.width=e.width,c0.height=e.height;const r=c0.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=c0}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=o1("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const a=r.getImageData(0,0,e.width,e.height),s=a.data;for(let o=0;o<s.length;o++)s[o]=hm(s[o]/255)*255;return r.putImageData(a,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(hm(n[r]/255)*255):n[r]=hm(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let JTe=0;class Cd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:JTe++}),this.uuid=no(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},a=this.data;if(a!==null){let s;if(Array.isArray(a)){s=[];for(let o=0,u=a.length;o<u;o++)a[o].isDataTexture?s.push(DI(a[o].image)):s.push(DI(a[o]))}else s=DI(a);r.url=s}return n||(e.images[this.uuid]=r),r}}function DI(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?HK.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let KTe=0;class Ur extends Lu{constructor(e=Ur.DEFAULT_IMAGE,n=Ur.DEFAULT_MAPPING,r=Bo,a=Bo,s=ni,o=tl,u=Ra,l=Mu,f=Ur.DEFAULT_ANISOTROPY,c=nc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:KTe++}),this.uuid=no(),this.name="",this.source=new Cd(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=a,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=u,this.internalFormat=null,this.type=l,this.offset=new nt(0,0),this.repeat=new nt(1,1),this.center=new nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new un,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==dD)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Jy:e.x=e.x-Math.floor(e.x);break;case Bo:e.x=e.x<0?0:1;break;case Ky:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Jy:e.y=e.y-Math.floor(e.y);break;case Bo:e.y=e.y<0?0:1;break;case Ky:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ur.DEFAULT_IMAGE=null;Ur.DEFAULT_MAPPING=dD;Ur.DEFAULT_ANISOTROPY=1;class On{constructor(e=0,n=0,r=0,a=1){On.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,a){return this.x=e,this.y=n,this.z=r,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,a=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*a+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*a+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*a+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*a+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,a,s;const l=e.elements,f=l[0],c=l[4],p=l[8],d=l[1],h=l[5],m=l[9],v=l[2],g=l[6],y=l[10];if(Math.abs(c-d)<.01&&Math.abs(p-v)<.01&&Math.abs(m-g)<.01){if(Math.abs(c+d)<.1&&Math.abs(p+v)<.1&&Math.abs(m+g)<.1&&Math.abs(f+h+y-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(f+1)/2,M=(h+1)/2,A=(y+1)/2,E=(c+d)/4,N=(p+v)/4,D=(m+g)/4;return x>M&&x>A?x<.01?(r=0,a=.707106781,s=.707106781):(r=Math.sqrt(x),a=E/r,s=N/r):M>A?M<.01?(r=.707106781,a=0,s=.707106781):(a=Math.sqrt(M),r=E/a,s=D/a):A<.01?(r=.707106781,a=.707106781,s=0):(s=Math.sqrt(A),r=N/s,a=D/s),this.set(r,a,s,n),this}let _=Math.sqrt((g-m)*(g-m)+(p-v)*(p-v)+(d-c)*(d-c));return Math.abs(_)<.001&&(_=1),this.x=(g-m)/_,this.y=(p-v)/_,this.z=(d-c)/_,this.w=Math.acos((f+h+y-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class VK extends Lu{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new On(0,0,e,n),this.scissorTest=!1,this.viewport=new On(0,0,e,n);const a={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ni,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Ur(a,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let u=0;u<o;u++)this.textures[u]=s.clone(),this.textures[u].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let a=0,s=this.textures.length;a<s;a++)this.textures[a].image.width=e,this.textures[a].image.height=n,this.textures[a].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,a=e.textures.length;r<a;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Cd(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Eu extends VK{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class wD extends Ur{constructor(e=null,n=1,r=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:a},this.magFilter=Vi,this.minFilter=Vi,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class eAe extends Eu{constructor(e=1,n=1,r=1,a={}){super(e,n,a),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new wD(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class U4 extends Ur{constructor(e=null,n=1,r=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:a},this.magFilter=Vi,this.minFilter=Vi,this.wrapR=Bo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tAe extends Eu{constructor(e=1,n=1,r=1,a={}){super(e,n,a),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new U4(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Oa{constructor(e=0,n=0,r=0,a=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=a}static slerpFlat(e,n,r,a,s,o,u){let l=r[a+0],f=r[a+1],c=r[a+2],p=r[a+3];const d=s[o+0],h=s[o+1],m=s[o+2],v=s[o+3];if(u===0){e[n+0]=l,e[n+1]=f,e[n+2]=c,e[n+3]=p;return}if(u===1){e[n+0]=d,e[n+1]=h,e[n+2]=m,e[n+3]=v;return}if(p!==v||l!==d||f!==h||c!==m){let g=1-u;const y=l*d+f*h+c*m+p*v,_=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const A=Math.sqrt(x),E=Math.atan2(A,y*_);g=Math.sin(g*E)/A,u=Math.sin(u*E)/A}const M=u*_;if(l=l*g+d*M,f=f*g+h*M,c=c*g+m*M,p=p*g+v*M,g===1-u){const A=1/Math.sqrt(l*l+f*f+c*c+p*p);l*=A,f*=A,c*=A,p*=A}}e[n]=l,e[n+1]=f,e[n+2]=c,e[n+3]=p}static multiplyQuaternionsFlat(e,n,r,a,s,o){const u=r[a],l=r[a+1],f=r[a+2],c=r[a+3],p=s[o],d=s[o+1],h=s[o+2],m=s[o+3];return e[n]=u*m+c*p+l*h-f*d,e[n+1]=l*m+c*d+f*p-u*h,e[n+2]=f*m+c*h+u*d-l*p,e[n+3]=c*m-u*p-l*d-f*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,a){return this._x=e,this._y=n,this._z=r,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,a=e._y,s=e._z,o=e._order,u=Math.cos,l=Math.sin,f=u(r/2),c=u(a/2),p=u(s/2),d=l(r/2),h=l(a/2),m=l(s/2);switch(o){case"XYZ":this._x=d*c*p+f*h*m,this._y=f*h*p-d*c*m,this._z=f*c*m+d*h*p,this._w=f*c*p-d*h*m;break;case"YXZ":this._x=d*c*p+f*h*m,this._y=f*h*p-d*c*m,this._z=f*c*m-d*h*p,this._w=f*c*p+d*h*m;break;case"ZXY":this._x=d*c*p-f*h*m,this._y=f*h*p+d*c*m,this._z=f*c*m+d*h*p,this._w=f*c*p-d*h*m;break;case"ZYX":this._x=d*c*p-f*h*m,this._y=f*h*p+d*c*m,this._z=f*c*m-d*h*p,this._w=f*c*p+d*h*m;break;case"YZX":this._x=d*c*p+f*h*m,this._y=f*h*p+d*c*m,this._z=f*c*m-d*h*p,this._w=f*c*p-d*h*m;break;case"XZY":this._x=d*c*p-f*h*m,this._y=f*h*p-d*c*m,this._z=f*c*m+d*h*p,this._w=f*c*p+d*h*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,a=Math.sin(r);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],a=n[4],s=n[8],o=n[1],u=n[5],l=n[9],f=n[2],c=n[6],p=n[10],d=r+u+p;if(d>0){const h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-l)*h,this._y=(s-f)*h,this._z=(o-a)*h}else if(r>u&&r>p){const h=2*Math.sqrt(1+r-u-p);this._w=(c-l)/h,this._x=.25*h,this._y=(a+o)/h,this._z=(s+f)/h}else if(u>p){const h=2*Math.sqrt(1+u-r-p);this._w=(s-f)/h,this._x=(a+o)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+p-r-u);this._w=(o-a)/h,this._x=(s+f)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ti(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const a=Math.min(1,n/r);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,a=e._y,s=e._z,o=e._w,u=n._x,l=n._y,f=n._z,c=n._w;return this._x=r*c+o*u+a*f-s*l,this._y=a*c+o*l+s*u-r*f,this._z=s*c+o*f+r*l-a*u,this._w=o*c-r*u-a*l-s*f,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,a=this._y,s=this._z,o=this._w;let u=o*e._w+r*e._x+a*e._y+s*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=o,this._x=r,this._y=a,this._z=s,this;const l=1-u*u;if(l<=Number.EPSILON){const h=1-n;return this._w=h*o+n*this._w,this._x=h*r+n*this._x,this._y=h*a+n*this._y,this._z=h*s+n*this._z,this.normalize(),this}const f=Math.sqrt(l),c=Math.atan2(f,u),p=Math.sin((1-n)*c)/f,d=Math.sin(n*c)/f;return this._w=o*p+this._w*d,this._x=r*p+this._x*d,this._y=a*p+this._y*d,this._z=s*p+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),a=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(a*Math.sin(e),a*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ge{constructor(e=0,n=0,r=0){ge.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(R7.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(R7.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,a=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*a,this.y=s[1]*n+s[4]*r+s[7]*a,this.z=s[2]*n+s[5]*r+s[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,a=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*a+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*a+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*a+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*a+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,a=this.z,s=e.x,o=e.y,u=e.z,l=e.w,f=2*(o*a-u*r),c=2*(u*n-s*a),p=2*(s*r-o*n);return this.x=n+l*f+o*p-u*c,this.y=r+l*c+u*f-s*p,this.z=a+l*p+s*c-o*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,a=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*a,this.y=s[1]*n+s[5]*r+s[9]*a,this.z=s[2]*n+s[6]*r+s[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,a=e.y,s=e.z,o=n.x,u=n.y,l=n.z;return this.x=a*l-s*u,this.y=s*o-r*l,this.z=r*u-a*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return RI.copy(this).projectOnVector(e),this.sub(RI)}reflect(e){return this.sub(RI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ti(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,a=this.z-e.z;return n*n+r*r+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const a=Math.sin(n)*e;return this.x=a*Math.sin(r),this.y=Math.cos(n)*e,this.z=a*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=a,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const RI=new ge,R7=new Oa;class La{constructor(e=new ge(1/0,1/0,1/0),n=new ge(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(su.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(su.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=su.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,u=s.count;o<u;o++)e.isMesh===!0?e.getVertexPosition(o,su):su.fromBufferAttribute(s,o),su.applyMatrix4(e.matrixWorld),this.expandByPoint(su);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Qb.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Qb.copy(r.boundingBox)),Qb.applyMatrix4(e.matrixWorld),this.union(Qb)}const a=e.children;for(let s=0,o=a.length;s<o;s++)this.expandByObject(a[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,su),su.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(sg),Zb.subVectors(this.max,sg),f0.subVectors(e.a,sg),p0.subVectors(e.b,sg),d0.subVectors(e.c,sg),yf.subVectors(p0,f0),xf.subVectors(d0,p0),ed.subVectors(f0,d0);let n=[0,-yf.z,yf.y,0,-xf.z,xf.y,0,-ed.z,ed.y,yf.z,0,-yf.x,xf.z,0,-xf.x,ed.z,0,-ed.x,-yf.y,yf.x,0,-xf.y,xf.x,0,-ed.y,ed.x,0];return!II(n,f0,p0,d0,Zb)||(n=[1,0,0,0,1,0,0,0,1],!II(n,f0,p0,d0,Zb))?!1:(Jb.crossVectors(yf,xf),n=[Jb.x,Jb.y,Jb.z],II(n,f0,p0,d0,Zb))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,su).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(su).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Hl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Hl=[new ge,new ge,new ge,new ge,new ge,new ge,new ge,new ge],su=new ge,Qb=new La,f0=new ge,p0=new ge,d0=new ge,yf=new ge,xf=new ge,ed=new ge,sg=new ge,Zb=new ge,Jb=new ge,td=new ge;function II(t,e,n,r,a){for(let s=0,o=t.length-3;s<=o;s+=3){td.fromArray(t,s);const u=a.x*Math.abs(td.x)+a.y*Math.abs(td.y)+a.z*Math.abs(td.z),l=e.dot(td),f=n.dot(td),c=r.dot(td);if(Math.max(-Math.max(l,f,c),Math.min(l,f,c))>u)return!1}return!0}const nAe=new La,og=new ge,PI=new ge;class fa{constructor(e=new ge,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):nAe.setFromPoints(e).getCenter(r);let a=0;for(let s=0,o=e.length;s<o;s++)a=Math.max(a,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;og.subVectors(e,this.center);const n=og.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),a=(r-this.radius)*.5;this.center.addScaledVector(og,a/r),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(PI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(og.copy(e.center).add(PI)),this.expandByPoint(og.copy(e.center).sub(PI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Vl=new ge,OI=new ge,Kb=new ge,bf=new ge,LI=new ge,eS=new ge,kI=new ge;class Ph{constructor(e=new ge,n=new ge(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Vl)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Vl.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Vl.copy(this.origin).addScaledVector(this.direction,n),Vl.distanceToSquared(e))}distanceSqToSegment(e,n,r,a){OI.copy(e).add(n).multiplyScalar(.5),Kb.copy(n).sub(e).normalize(),bf.copy(this.origin).sub(OI);const s=e.distanceTo(n)*.5,o=-this.direction.dot(Kb),u=bf.dot(this.direction),l=-bf.dot(Kb),f=bf.lengthSq(),c=Math.abs(1-o*o);let p,d,h,m;if(c>0)if(p=o*l-u,d=o*u-l,m=s*c,p>=0)if(d>=-m)if(d<=m){const v=1/c;p*=v,d*=v,h=p*(p+o*d+2*u)+d*(o*p+d+2*l)+f}else d=s,p=Math.max(0,-(o*d+u)),h=-p*p+d*(d+2*l)+f;else d=-s,p=Math.max(0,-(o*d+u)),h=-p*p+d*(d+2*l)+f;else d<=-m?(p=Math.max(0,-(-o*s+u)),d=p>0?-s:Math.min(Math.max(-s,-l),s),h=-p*p+d*(d+2*l)+f):d<=m?(p=0,d=Math.min(Math.max(-s,-l),s),h=d*(d+2*l)+f):(p=Math.max(0,-(o*s+u)),d=p>0?s:Math.min(Math.max(-s,-l),s),h=-p*p+d*(d+2*l)+f);else d=o>0?-s:s,p=Math.max(0,-(o*d+u)),h=-p*p+d*(d+2*l)+f;return r&&r.copy(this.origin).addScaledVector(this.direction,p),a&&a.copy(OI).addScaledVector(Kb,d),h}intersectSphere(e,n){Vl.subVectors(e.center,this.origin);const r=Vl.dot(this.direction),a=Vl.dot(Vl)-r*r,s=e.radius*e.radius;if(a>s)return null;const o=Math.sqrt(s-a),u=r-o,l=r+o;return l<0?null:u<0?this.at(l,n):this.at(u,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,a,s,o,u,l;const f=1/this.direction.x,c=1/this.direction.y,p=1/this.direction.z,d=this.origin;return f>=0?(r=(e.min.x-d.x)*f,a=(e.max.x-d.x)*f):(r=(e.max.x-d.x)*f,a=(e.min.x-d.x)*f),c>=0?(s=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(s=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),r>o||s>a||((s>r||isNaN(r))&&(r=s),(o<a||isNaN(a))&&(a=o),p>=0?(u=(e.min.z-d.z)*p,l=(e.max.z-d.z)*p):(u=(e.max.z-d.z)*p,l=(e.min.z-d.z)*p),r>l||u>a)||((u>r||r!==r)&&(r=u),(l<a||a!==a)&&(a=l),a<0)?null:this.at(r>=0?r:a,n)}intersectsBox(e){return this.intersectBox(e,Vl)!==null}intersectTriangle(e,n,r,a,s){LI.subVectors(n,e),eS.subVectors(r,e),kI.crossVectors(LI,eS);let o=this.direction.dot(kI),u;if(o>0){if(a)return null;u=1}else if(o<0)u=-1,o=-o;else return null;bf.subVectors(this.origin,e);const l=u*this.direction.dot(eS.crossVectors(bf,eS));if(l<0)return null;const f=u*this.direction.dot(LI.cross(bf));if(f<0||l+f>o)return null;const c=-u*bf.dot(kI);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ht{constructor(e,n,r,a,s,o,u,l,f,c,p,d,h,m,v,g){Ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,a,s,o,u,l,f,c,p,d,h,m,v,g)}set(e,n,r,a,s,o,u,l,f,c,p,d,h,m,v,g){const y=this.elements;return y[0]=e,y[4]=n,y[8]=r,y[12]=a,y[1]=s,y[5]=o,y[9]=u,y[13]=l,y[2]=f,y[6]=c,y[10]=p,y[14]=d,y[3]=h,y[7]=m,y[11]=v,y[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ht().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,a=1/h0.setFromMatrixColumn(e,0).length(),s=1/h0.setFromMatrixColumn(e,1).length(),o=1/h0.setFromMatrixColumn(e,2).length();return n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,a=e.y,s=e.z,o=Math.cos(r),u=Math.sin(r),l=Math.cos(a),f=Math.sin(a),c=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const d=o*c,h=o*p,m=u*c,v=u*p;n[0]=l*c,n[4]=-l*p,n[8]=f,n[1]=h+m*f,n[5]=d-v*f,n[9]=-u*l,n[2]=v-d*f,n[6]=m+h*f,n[10]=o*l}else if(e.order==="YXZ"){const d=l*c,h=l*p,m=f*c,v=f*p;n[0]=d+v*u,n[4]=m*u-h,n[8]=o*f,n[1]=o*p,n[5]=o*c,n[9]=-u,n[2]=h*u-m,n[6]=v+d*u,n[10]=o*l}else if(e.order==="ZXY"){const d=l*c,h=l*p,m=f*c,v=f*p;n[0]=d-v*u,n[4]=-o*p,n[8]=m+h*u,n[1]=h+m*u,n[5]=o*c,n[9]=v-d*u,n[2]=-o*f,n[6]=u,n[10]=o*l}else if(e.order==="ZYX"){const d=o*c,h=o*p,m=u*c,v=u*p;n[0]=l*c,n[4]=m*f-h,n[8]=d*f+v,n[1]=l*p,n[5]=v*f+d,n[9]=h*f-m,n[2]=-f,n[6]=u*l,n[10]=o*l}else if(e.order==="YZX"){const d=o*l,h=o*f,m=u*l,v=u*f;n[0]=l*c,n[4]=v-d*p,n[8]=m*p+h,n[1]=p,n[5]=o*c,n[9]=-u*c,n[2]=-f*c,n[6]=h*p+m,n[10]=d-v*p}else if(e.order==="XZY"){const d=o*l,h=o*f,m=u*l,v=u*f;n[0]=l*c,n[4]=-p,n[8]=f*c,n[1]=d*p+v,n[5]=o*c,n[9]=h*p-m,n[2]=m*p-h,n[6]=u*c,n[10]=v*p+d}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rAe,e,iAe)}lookAt(e,n,r){const a=this.elements;return Vs.subVectors(e,n),Vs.lengthSq()===0&&(Vs.z=1),Vs.normalize(),Sf.crossVectors(r,Vs),Sf.lengthSq()===0&&(Math.abs(r.z)===1?Vs.x+=1e-4:Vs.z+=1e-4,Vs.normalize(),Sf.crossVectors(r,Vs)),Sf.normalize(),tS.crossVectors(Vs,Sf),a[0]=Sf.x,a[4]=tS.x,a[8]=Vs.x,a[1]=Sf.y,a[5]=tS.y,a[9]=Vs.y,a[2]=Sf.z,a[6]=tS.z,a[10]=Vs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,a=n.elements,s=this.elements,o=r[0],u=r[4],l=r[8],f=r[12],c=r[1],p=r[5],d=r[9],h=r[13],m=r[2],v=r[6],g=r[10],y=r[14],_=r[3],x=r[7],M=r[11],A=r[15],E=a[0],N=a[4],D=a[8],C=a[12],T=a[1],P=a[5],I=a[9],U=a[13],q=a[2],z=a[6],G=a[10],F=a[14],k=a[3],O=a[7],W=a[11],X=a[15];return s[0]=o*E+u*T+l*q+f*k,s[4]=o*N+u*P+l*z+f*O,s[8]=o*D+u*I+l*G+f*W,s[12]=o*C+u*U+l*F+f*X,s[1]=c*E+p*T+d*q+h*k,s[5]=c*N+p*P+d*z+h*O,s[9]=c*D+p*I+d*G+h*W,s[13]=c*C+p*U+d*F+h*X,s[2]=m*E+v*T+g*q+y*k,s[6]=m*N+v*P+g*z+y*O,s[10]=m*D+v*I+g*G+y*W,s[14]=m*C+v*U+g*F+y*X,s[3]=_*E+x*T+M*q+A*k,s[7]=_*N+x*P+M*z+A*O,s[11]=_*D+x*I+M*G+A*W,s[15]=_*C+x*U+M*F+A*X,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],a=e[8],s=e[12],o=e[1],u=e[5],l=e[9],f=e[13],c=e[2],p=e[6],d=e[10],h=e[14],m=e[3],v=e[7],g=e[11],y=e[15];return m*(+s*l*p-a*f*p-s*u*d+r*f*d+a*u*h-r*l*h)+v*(+n*l*h-n*f*d+s*o*d-a*o*h+a*f*c-s*l*c)+g*(+n*f*p-n*u*h-s*o*p+r*o*h+s*u*c-r*f*c)+y*(-a*u*c-n*l*p+n*u*d+a*o*p-r*o*d+r*l*c)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=n,a[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],p=e[9],d=e[10],h=e[11],m=e[12],v=e[13],g=e[14],y=e[15],_=p*g*f-v*d*f+v*l*h-u*g*h-p*l*y+u*d*y,x=m*d*f-c*g*f-m*l*h+o*g*h+c*l*y-o*d*y,M=c*v*f-m*p*f+m*u*h-o*v*h-c*u*y+o*p*y,A=m*p*l-c*v*l-m*u*d+o*v*d+c*u*g-o*p*g,E=n*_+r*x+a*M+s*A;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/E;return e[0]=_*N,e[1]=(v*d*s-p*g*s-v*a*h+r*g*h+p*a*y-r*d*y)*N,e[2]=(u*g*s-v*l*s+v*a*f-r*g*f-u*a*y+r*l*y)*N,e[3]=(p*l*s-u*d*s-p*a*f+r*d*f+u*a*h-r*l*h)*N,e[4]=x*N,e[5]=(c*g*s-m*d*s+m*a*h-n*g*h-c*a*y+n*d*y)*N,e[6]=(m*l*s-o*g*s-m*a*f+n*g*f+o*a*y-n*l*y)*N,e[7]=(o*d*s-c*l*s+c*a*f-n*d*f-o*a*h+n*l*h)*N,e[8]=M*N,e[9]=(m*p*s-c*v*s-m*r*h+n*v*h+c*r*y-n*p*y)*N,e[10]=(o*v*s-m*u*s+m*r*f-n*v*f-o*r*y+n*u*y)*N,e[11]=(c*u*s-o*p*s-c*r*f+n*p*f+o*r*h-n*u*h)*N,e[12]=A*N,e[13]=(c*v*a-m*p*a+m*r*d-n*v*d-c*r*g+n*p*g)*N,e[14]=(m*u*a-o*v*a-m*r*l+n*v*l+o*r*g-n*u*g)*N,e[15]=(o*p*a-c*u*a+c*r*l-n*p*l-o*r*d+n*u*d)*N,this}scale(e){const n=this.elements,r=e.x,a=e.y,s=e.z;return n[0]*=r,n[4]*=a,n[8]*=s,n[1]*=r,n[5]*=a,n[9]*=s,n[2]*=r,n[6]*=a,n[10]*=s,n[3]*=r,n[7]*=a,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,a))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),a=Math.sin(n),s=1-r,o=e.x,u=e.y,l=e.z,f=s*o,c=s*u;return this.set(f*o+r,f*u-a*l,f*l+a*u,0,f*u+a*l,c*u+r,c*l-a*o,0,f*l-a*u,c*l+a*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,a,s,o){return this.set(1,r,s,0,e,1,o,0,n,a,1,0,0,0,0,1),this}compose(e,n,r){const a=this.elements,s=n._x,o=n._y,u=n._z,l=n._w,f=s+s,c=o+o,p=u+u,d=s*f,h=s*c,m=s*p,v=o*c,g=o*p,y=u*p,_=l*f,x=l*c,M=l*p,A=r.x,E=r.y,N=r.z;return a[0]=(1-(v+y))*A,a[1]=(h+M)*A,a[2]=(m-x)*A,a[3]=0,a[4]=(h-M)*E,a[5]=(1-(d+y))*E,a[6]=(g+_)*E,a[7]=0,a[8]=(m+x)*N,a[9]=(g-_)*N,a[10]=(1-(d+v))*N,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,n,r){const a=this.elements;let s=h0.set(a[0],a[1],a[2]).length();const o=h0.set(a[4],a[5],a[6]).length(),u=h0.set(a[8],a[9],a[10]).length();this.determinant()<0&&(s=-s),e.x=a[12],e.y=a[13],e.z=a[14],ou.copy(this);const f=1/s,c=1/o,p=1/u;return ou.elements[0]*=f,ou.elements[1]*=f,ou.elements[2]*=f,ou.elements[4]*=c,ou.elements[5]*=c,ou.elements[6]*=c,ou.elements[8]*=p,ou.elements[9]*=p,ou.elements[10]*=p,n.setFromRotationMatrix(ou),r.x=s,r.y=o,r.z=u,this}makePerspective(e,n,r,a,s,o,u=nl){const l=this.elements,f=2*s/(n-e),c=2*s/(r-a),p=(n+e)/(n-e),d=(r+a)/(r-a);let h,m;if(u===nl)h=-(o+s)/(o-s),m=-2*o*s/(o-s);else if(u===s1)h=-o/(o-s),m=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return l[0]=f,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,a,s,o,u=nl){const l=this.elements,f=1/(n-e),c=1/(r-a),p=1/(o-s),d=(n+e)*f,h=(r+a)*c;let m,v;if(u===nl)m=(o+s)*p,v=-2*p;else if(u===s1)m=s*p,v=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return l[0]=2*f,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=v,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let a=0;a<16;a++)if(n[a]!==r[a])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const h0=new ge,ou=new Ht,rAe=new ge(0,0,0),iAe=new ge(1,1,1),Sf=new ge,tS=new ge,Vs=new ge,I7=new Ht,P7=new Oa;class uo{constructor(e=0,n=0,r=0,a=uo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,a=this._order){return this._x=e,this._y=n,this._z=r,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const a=e.elements,s=a[0],o=a[4],u=a[8],l=a[1],f=a[5],c=a[9],p=a[2],d=a[6],h=a[10];switch(n){case"XYZ":this._y=Math.asin(ti(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,f),this._z=0);break;case"YXZ":this._x=Math.asin(-ti(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(u,h),this._z=Math.atan2(l,f)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(ti(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-p,h),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ti(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin(ti(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,f),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(u,h));break;case"XZY":this._z=Math.asin(-ti(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,f),this._y=Math.atan2(u,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return I7.makeRotationFromQuaternion(e),this.setFromRotationMatrix(I7,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return P7.setFromEuler(this),this.setFromQuaternion(P7,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}uo.DEFAULT_ORDER="XYZ";class qd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let aAe=0;const O7=new ge,m0=new Oa,Wl=new Ht,nS=new ge,ug=new ge,sAe=new ge,oAe=new Oa,L7=new ge(1,0,0),k7=new ge(0,1,0),U7=new ge(0,0,1),F7={type:"added"},uAe={type:"removed"},v0={type:"childadded",child:null},UI={type:"childremoved",child:null};class Gn extends Lu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:aAe++}),this.uuid=no(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gn.DEFAULT_UP.clone();const e=new ge,n=new uo,r=new Oa,a=new ge(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Ht},normalMatrix:{value:new un}}),this.matrix=new Ht,this.matrixWorld=new Ht,this.matrixAutoUpdate=Gn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Gn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new qd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return m0.setFromAxisAngle(e,n),this.quaternion.multiply(m0),this}rotateOnWorldAxis(e,n){return m0.setFromAxisAngle(e,n),this.quaternion.premultiply(m0),this}rotateX(e){return this.rotateOnAxis(L7,e)}rotateY(e){return this.rotateOnAxis(k7,e)}rotateZ(e){return this.rotateOnAxis(U7,e)}translateOnAxis(e,n){return O7.copy(e).applyQuaternion(this.quaternion),this.position.add(O7.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(L7,e)}translateY(e){return this.translateOnAxis(k7,e)}translateZ(e){return this.translateOnAxis(U7,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Wl.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?nS.copy(e):nS.set(e,n,r);const a=this.parent;this.updateWorldMatrix(!0,!1),ug.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wl.lookAt(ug,nS,this.up):Wl.lookAt(nS,ug,this.up),this.quaternion.setFromRotationMatrix(Wl),a&&(Wl.extractRotation(a.matrixWorld),m0.setFromRotationMatrix(Wl),this.quaternion.premultiply(m0.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(F7),v0.child=e,this.dispatchEvent(v0),v0.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(uAe),UI.child=e,this.dispatchEvent(UI),UI.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Wl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Wl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Wl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(F7),v0.child=e,this.dispatchEvent(v0),v0.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,a=this.children.length;r<a;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ug,e,sAe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ug,oAe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,a=n.length;r<a;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,a=n.length;r<a;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,a=n.length;r<a;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.visibility=this._visibility,a.active=this._active,a.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.geometryCount=this._geometryCount,a.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere={center:a.boundingSphere.center.toArray(),radius:a.boundingSphere.radius}),this.boundingBox!==null&&(a.boundingBox={min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()}));function s(u,l){return u[l.uuid]===void 0&&(u[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const l=u.shapes;if(Array.isArray(l))for(let f=0,c=l.length;f<c;f++){const p=l[f];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let l=0,f=this.material.length;l<f;l++)u.push(s(e.materials,this.material[l]));a.material=u}else a.material=s(e.materials,this.material);if(this.children.length>0){a.children=[];for(let u=0;u<this.children.length;u++)a.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let u=0;u<this.animations.length;u++){const l=this.animations[u];a.animations.push(s(e.animations,l))}}if(n){const u=o(e.geometries),l=o(e.materials),f=o(e.textures),c=o(e.images),p=o(e.shapes),d=o(e.skeletons),h=o(e.animations),m=o(e.nodes);u.length>0&&(r.geometries=u),l.length>0&&(r.materials=l),f.length>0&&(r.textures=f),c.length>0&&(r.images=c),p.length>0&&(r.shapes=p),d.length>0&&(r.skeletons=d),h.length>0&&(r.animations=h),m.length>0&&(r.nodes=m)}return r.object=a,r;function o(u){const l=[];for(const f in u){const c=u[f];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const a=e.children[r];this.add(a.clone())}return this}}Gn.DEFAULT_UP=new ge(0,1,0);Gn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const uu=new ge,$l=new ge,FI=new ge,jl=new ge,g0=new ge,y0=new ge,B7=new ge,BI=new ge,zI=new ge,qI=new ge,GI=new On,HI=new On,VI=new On;class Es{constructor(e=new ge,n=new ge,r=new ge){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,a){a.subVectors(r,n),uu.subVectors(e,n),a.cross(uu);const s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static getBarycoord(e,n,r,a,s){uu.subVectors(a,n),$l.subVectors(r,n),FI.subVectors(e,n);const o=uu.dot(uu),u=uu.dot($l),l=uu.dot(FI),f=$l.dot($l),c=$l.dot(FI),p=o*f-u*u;if(p===0)return s.set(0,0,0),null;const d=1/p,h=(f*l-u*c)*d,m=(o*c-u*l)*d;return s.set(1-h-m,m,h)}static containsPoint(e,n,r,a){return this.getBarycoord(e,n,r,a,jl)===null?!1:jl.x>=0&&jl.y>=0&&jl.x+jl.y<=1}static getInterpolation(e,n,r,a,s,o,u,l){return this.getBarycoord(e,n,r,a,jl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,jl.x),l.addScaledVector(o,jl.y),l.addScaledVector(u,jl.z),l)}static getInterpolatedAttribute(e,n,r,a,s,o){return GI.setScalar(0),HI.setScalar(0),VI.setScalar(0),GI.fromBufferAttribute(e,n),HI.fromBufferAttribute(e,r),VI.fromBufferAttribute(e,a),o.setScalar(0),o.addScaledVector(GI,s.x),o.addScaledVector(HI,s.y),o.addScaledVector(VI,s.z),o}static isFrontFacing(e,n,r,a){return uu.subVectors(r,n),$l.subVectors(e,n),uu.cross($l).dot(a)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,a){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,n,r,a){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return uu.subVectors(this.c,this.b),$l.subVectors(this.a,this.b),uu.cross($l).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Es.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Es.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,a,s){return Es.getInterpolation(e,this.a,this.b,this.c,n,r,a,s)}containsPoint(e){return Es.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Es.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,a=this.b,s=this.c;let o,u;g0.subVectors(a,r),y0.subVectors(s,r),BI.subVectors(e,r);const l=g0.dot(BI),f=y0.dot(BI);if(l<=0&&f<=0)return n.copy(r);zI.subVectors(e,a);const c=g0.dot(zI),p=y0.dot(zI);if(c>=0&&p<=c)return n.copy(a);const d=l*p-c*f;if(d<=0&&l>=0&&c<=0)return o=l/(l-c),n.copy(r).addScaledVector(g0,o);qI.subVectors(e,s);const h=g0.dot(qI),m=y0.dot(qI);if(m>=0&&h<=m)return n.copy(s);const v=h*f-l*m;if(v<=0&&f>=0&&m<=0)return u=f/(f-m),n.copy(r).addScaledVector(y0,u);const g=c*m-h*p;if(g<=0&&p-c>=0&&h-m>=0)return B7.subVectors(s,a),u=(p-c)/(p-c+(h-m)),n.copy(a).addScaledVector(B7,u);const y=1/(g+v+d);return o=v*y,u=d*y,n.copy(r).addScaledVector(g0,o).addScaledVector(y0,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const WK={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wf={h:0,s:0,l:0},rS={h:0,s:0,l:0};function WI(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class gt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Ro){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,jn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,a=jn.workingColorSpace){return this.r=e,this.g=n,this.b=r,jn.toWorkingColorSpace(this,a),this}setHSL(e,n,r,a=jn.workingColorSpace){if(e=k4(e,1),n=ti(n,0,1),r=ti(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=WI(o,s,e+1/3),this.g=WI(o,s,e),this.b=WI(o,s,e-1/3)}return jn.toWorkingColorSpace(this,a),this}setStyle(e,n=Ro){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=a[1],u=a[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=a[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Ro){const r=WK[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=hm(e.r),this.g=hm(e.g),this.b=hm(e.b),this}copyLinearToSRGB(e){return this.r=CI(e.r),this.g=CI(e.g),this.b=CI(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ro){return jn.fromWorkingColorSpace(Ea.copy(this),e),Math.round(ti(Ea.r*255,0,255))*65536+Math.round(ti(Ea.g*255,0,255))*256+Math.round(ti(Ea.b*255,0,255))}getHexString(e=Ro){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=jn.workingColorSpace){jn.fromWorkingColorSpace(Ea.copy(this),n);const r=Ea.r,a=Ea.g,s=Ea.b,o=Math.max(r,a,s),u=Math.min(r,a,s);let l,f;const c=(u+o)/2;if(u===o)l=0,f=0;else{const p=o-u;switch(f=c<=.5?p/(o+u):p/(2-o-u),o){case r:l=(a-s)/p+(a<s?6:0);break;case a:l=(s-r)/p+2;break;case s:l=(r-a)/p+4;break}l/=6}return e.h=l,e.s=f,e.l=c,e}getRGB(e,n=jn.workingColorSpace){return jn.fromWorkingColorSpace(Ea.copy(this),n),e.r=Ea.r,e.g=Ea.g,e.b=Ea.b,e}getStyle(e=Ro){jn.fromWorkingColorSpace(Ea.copy(this),e);const n=Ea.r,r=Ea.g,a=Ea.b;return e!==Ro?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(a*255)})`}offsetHSL(e,n,r){return this.getHSL(wf),this.setHSL(wf.h+e,wf.s+n,wf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(wf),e.getHSL(rS);const r=oy(wf.h,rS.h,n),a=oy(wf.s,rS.s,n),s=oy(wf.l,rS.l,n);return this.setHSL(r,a,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,a=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*a,this.g=s[1]*n+s[4]*r+s[7]*a,this.b=s[2]*n+s[5]*r+s[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ea=new gt;gt.NAMES=WK;let lAe=0;class va extends Lu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lAe++}),this.uuid=no(),this.name="",this.type="Material",this.blending=Fd,this.side=Sl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ow,this.blendDst=Lw,this.blendEquation=Of,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gt(0,0,0),this.blendAlpha=0,this.depthFunc=sh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=xd,this.stencilZFail=xd,this.stencilZPass=xd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const a=this[n];if(a===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(r):a&&a.isVector3&&r&&r.isVector3?a.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Fd&&(r.blending=this.blending),this.side!==Sl&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Ow&&(r.blendSrc=this.blendSrc),this.blendDst!==Lw&&(r.blendDst=this.blendDst),this.blendEquation!==Of&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==sh&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==xL&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==xd&&(r.stencilFail=this.stencilFail),this.stencilZFail!==xd&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==xd&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function a(s){const o=[];for(const u in s){const l=s[u];delete l.metadata,o.push(l)}return o}if(n){const s=a(e.textures),o=a(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const a=n.length;r=new Array(a);for(let s=0;s!==a;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Jc extends va{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new uo,this.combine=gx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rc=cAe();function cAe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),a=new Uint32Array(512);for(let l=0;l<256;++l){const f=l-127;f<-27?(r[l]=0,r[l|256]=32768,a[l]=24,a[l|256]=24):f<-14?(r[l]=1024>>-f-14,r[l|256]=1024>>-f-14|32768,a[l]=-f-1,a[l|256]=-f-1):f<=15?(r[l]=f+15<<10,r[l|256]=f+15<<10|32768,a[l]=13,a[l|256]=13):f<128?(r[l]=31744,r[l|256]=64512,a[l]=24,a[l|256]=24):(r[l]=31744,r[l|256]=64512,a[l]=13,a[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),u=new Uint32Array(64);for(let l=1;l<1024;++l){let f=l<<13,c=0;for(;!(f&8388608);)f<<=1,c-=8388608;f&=-8388609,c+=947912704,s[l]=f|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(u[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:a,mantissaTable:s,exponentTable:o,offsetTable:u}}function _s(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=ti(t,-65504,65504),rc.floatView[0]=t;const e=rc.uint32View[0],n=e>>23&511;return rc.baseTable[n]+((e&8388607)>>rc.shiftTable[n])}function Rg(t){const e=t>>10;return rc.uint32View[0]=rc.mantissaTable[rc.offsetTable[e]+(t&1023)]+rc.exponentTable[e],rc.floatView[0]}const fAe={toHalfFloat:_s,fromHalfFloat:Rg},xi=new ge,iS=new nt;class lr{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=a1,this.updateRanges=[],this.gpuType=As,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let a=0,s=this.itemSize;a<s;a++)this.array[e+a]=n.array[r+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)iS.fromBufferAttribute(this,n),iS.applyMatrix3(e),this.setXY(n,iS.x,iS.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)xi.fromBufferAttribute(this,n),xi.applyMatrix3(e),this.setXYZ(n,xi.x,xi.y,xi.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)xi.fromBufferAttribute(this,n),xi.applyMatrix4(e),this.setXYZ(n,xi.x,xi.y,xi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)xi.fromBufferAttribute(this,n),xi.applyNormalMatrix(e),this.setXYZ(n,xi.x,xi.y,xi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)xi.fromBufferAttribute(this,n),xi.transformDirection(e),this.setXYZ(n,xi.x,xi.y,xi.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=rs(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=cn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=rs(n,this.array)),n}setX(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=rs(n,this.array)),n}setY(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=rs(n,this.array)),n}setZ(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=rs(n,this.array)),n}setW(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,a){return e*=this.itemSize,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),a=cn(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=a,this}setXYZW(e,n,r,a,s){return e*=this.itemSize,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),a=cn(a,this.array),s=cn(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=a,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==a1&&(e.usage=this.usage),e}}class pAe extends lr{constructor(e,n,r){super(new Int8Array(e),n,r)}}class dAe extends lr{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class hAe extends lr{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class mAe extends lr{constructor(e,n,r){super(new Int16Array(e),n,r)}}class F4 extends lr{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class vAe extends lr{constructor(e,n,r){super(new Int32Array(e),n,r)}}class B4 extends lr{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class gAe extends lr{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Rg(this.array[e*this.itemSize]);return this.normalized&&(n=rs(n,this.array)),n}setX(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize]=_s(n),this}getY(e){let n=Rg(this.array[e*this.itemSize+1]);return this.normalized&&(n=rs(n,this.array)),n}setY(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+1]=_s(n),this}getZ(e){let n=Rg(this.array[e*this.itemSize+2]);return this.normalized&&(n=rs(n,this.array)),n}setZ(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+2]=_s(n),this}getW(e){let n=Rg(this.array[e*this.itemSize+3]);return this.normalized&&(n=rs(n,this.array)),n}setW(e,n){return this.normalized&&(n=cn(n,this.array)),this.array[e*this.itemSize+3]=_s(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array)),this.array[e+0]=_s(n),this.array[e+1]=_s(r),this}setXYZ(e,n,r,a){return e*=this.itemSize,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),a=cn(a,this.array)),this.array[e+0]=_s(n),this.array[e+1]=_s(r),this.array[e+2]=_s(a),this}setXYZW(e,n,r,a,s){return e*=this.itemSize,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),a=cn(a,this.array),s=cn(s,this.array)),this.array[e+0]=_s(n),this.array[e+1]=_s(r),this.array[e+2]=_s(a),this.array[e+3]=_s(s),this}}class Rt extends lr{constructor(e,n,r){super(new Float32Array(e),n,r)}}let yAe=0;const Co=new Ht,$I=new Gn,x0=new ge,Ws=new La,lg=new La,zi=new ge;class fn extends Lu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:yAe++}),this.uuid=no(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(qK(e)?B4:F4)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new un().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Co.makeRotationFromQuaternion(e),this.applyMatrix4(Co),this}rotateX(e){return Co.makeRotationX(e),this.applyMatrix4(Co),this}rotateY(e){return Co.makeRotationY(e),this.applyMatrix4(Co),this}rotateZ(e){return Co.makeRotationZ(e),this.applyMatrix4(Co),this}translate(e,n,r){return Co.makeTranslation(e,n,r),this.applyMatrix4(Co),this}scale(e,n,r){return Co.makeScale(e,n,r),this.applyMatrix4(Co),this}lookAt(e){return $I.lookAt(e),$I.updateMatrix(),this.applyMatrix4($I.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(x0).negate(),this.translate(x0.x,x0.y,x0.z),this}setFromPoints(e){const n=[];for(let r=0,a=e.length;r<a;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Rt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new La);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ge(-1/0,-1/0,-1/0),new ge(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,a=n.length;r<a;r++){const s=n[r];Ws.setFromBufferAttribute(s),this.morphTargetsRelative?(zi.addVectors(this.boundingBox.min,Ws.min),this.boundingBox.expandByPoint(zi),zi.addVectors(this.boundingBox.max,Ws.max),this.boundingBox.expandByPoint(zi)):(this.boundingBox.expandByPoint(Ws.min),this.boundingBox.expandByPoint(Ws.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new fa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ge,1/0);return}if(e){const r=this.boundingSphere.center;if(Ws.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const u=n[s];lg.setFromBufferAttribute(u),this.morphTargetsRelative?(zi.addVectors(Ws.min,lg.min),Ws.expandByPoint(zi),zi.addVectors(Ws.max,lg.max),Ws.expandByPoint(zi)):(Ws.expandByPoint(lg.min),Ws.expandByPoint(lg.max))}Ws.getCenter(r);let a=0;for(let s=0,o=e.count;s<o;s++)zi.fromBufferAttribute(e,s),a=Math.max(a,r.distanceToSquared(zi));if(n)for(let s=0,o=n.length;s<o;s++){const u=n[s],l=this.morphTargetsRelative;for(let f=0,c=u.count;f<c;f++)zi.fromBufferAttribute(u,f),l&&(x0.fromBufferAttribute(e,f),zi.add(x0)),a=Math.max(a,r.distanceToSquared(zi))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,a=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new lr(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),u=[],l=[];for(let D=0;D<r.count;D++)u[D]=new ge,l[D]=new ge;const f=new ge,c=new ge,p=new ge,d=new nt,h=new nt,m=new nt,v=new ge,g=new ge;function y(D,C,T){f.fromBufferAttribute(r,D),c.fromBufferAttribute(r,C),p.fromBufferAttribute(r,T),d.fromBufferAttribute(s,D),h.fromBufferAttribute(s,C),m.fromBufferAttribute(s,T),c.sub(f),p.sub(f),h.sub(d),m.sub(d);const P=1/(h.x*m.y-m.x*h.y);isFinite(P)&&(v.copy(c).multiplyScalar(m.y).addScaledVector(p,-h.y).multiplyScalar(P),g.copy(p).multiplyScalar(h.x).addScaledVector(c,-m.x).multiplyScalar(P),u[D].add(v),u[C].add(v),u[T].add(v),l[D].add(g),l[C].add(g),l[T].add(g))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let D=0,C=_.length;D<C;++D){const T=_[D],P=T.start,I=T.count;for(let U=P,q=P+I;U<q;U+=3)y(e.getX(U+0),e.getX(U+1),e.getX(U+2))}const x=new ge,M=new ge,A=new ge,E=new ge;function N(D){A.fromBufferAttribute(a,D),E.copy(A);const C=u[D];x.copy(C),x.sub(A.multiplyScalar(A.dot(C))).normalize(),M.crossVectors(E,C);const P=M.dot(l[D])<0?-1:1;o.setXYZW(D,x.x,x.y,x.z,P)}for(let D=0,C=_.length;D<C;++D){const T=_[D],P=T.start,I=T.count;for(let U=P,q=P+I;U<q;U+=3)N(e.getX(U+0)),N(e.getX(U+1)),N(e.getX(U+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new lr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let d=0,h=r.count;d<h;d++)r.setXYZ(d,0,0,0);const a=new ge,s=new ge,o=new ge,u=new ge,l=new ge,f=new ge,c=new ge,p=new ge;if(e)for(let d=0,h=e.count;d<h;d+=3){const m=e.getX(d+0),v=e.getX(d+1),g=e.getX(d+2);a.fromBufferAttribute(n,m),s.fromBufferAttribute(n,v),o.fromBufferAttribute(n,g),c.subVectors(o,s),p.subVectors(a,s),c.cross(p),u.fromBufferAttribute(r,m),l.fromBufferAttribute(r,v),f.fromBufferAttribute(r,g),u.add(c),l.add(c),f.add(c),r.setXYZ(m,u.x,u.y,u.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(g,f.x,f.y,f.z)}else for(let d=0,h=n.count;d<h;d+=3)a.fromBufferAttribute(n,d+0),s.fromBufferAttribute(n,d+1),o.fromBufferAttribute(n,d+2),c.subVectors(o,s),p.subVectors(a,s),c.cross(p),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)zi.fromBufferAttribute(e,n),zi.normalize(),e.setXYZ(n,zi.x,zi.y,zi.z)}toNonIndexed(){function e(u,l){const f=u.array,c=u.itemSize,p=u.normalized,d=new f.constructor(l.length*c);let h=0,m=0;for(let v=0,g=l.length;v<g;v++){u.isInterleavedBufferAttribute?h=l[v]*u.data.stride+u.offset:h=l[v]*c;for(let y=0;y<c;y++)d[m++]=f[h++]}return new lr(d,c,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new fn,r=this.index.array,a=this.attributes;for(const u in a){const l=a[u],f=e(l,r);n.setAttribute(u,f)}const s=this.morphAttributes;for(const u in s){const l=[],f=s[u];for(let c=0,p=f.length;c<p;c++){const d=f[c],h=e(d,r);l.push(h)}n.morphAttributes[u]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let u=0,l=o.length;u<l;u++){const f=o[u];n.addGroup(f.start,f.count,f.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const f in l)l[f]!==void 0&&(e[f]=l[f]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const f=r[l];e.data.attributes[l]=f.toJSON(e.data)}const a={};let s=!1;for(const l in this.morphAttributes){const f=this.morphAttributes[l],c=[];for(let p=0,d=f.length;p<d;p++){const h=f[p];c.push(h.toJSON(e.data))}c.length>0&&(a[l]=c,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const a=e.attributes;for(const f in a){const c=a[f];this.setAttribute(f,c.clone(n))}const s=e.morphAttributes;for(const f in s){const c=[],p=s[f];for(let d=0,h=p.length;d<h;d++)c.push(p[d].clone(n));this.morphAttributes[f]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,c=o.length;f<c;f++){const p=o[f];this.addGroup(p.start,p.count,p.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const z7=new Ht,nd=new Ph,aS=new fa,q7=new ge,sS=new ge,oS=new ge,uS=new ge,jI=new ge,lS=new ge,G7=new ge,cS=new ge;class Wr extends Gn{constructor(e=new fn,n=new Jc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const a=n[r[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const u=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}getVertexPosition(e,n){const r=this.geometry,a=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(a,e);const u=this.morphTargetInfluences;if(s&&u){lS.set(0,0,0);for(let l=0,f=s.length;l<f;l++){const c=u[l],p=s[l];c!==0&&(jI.fromBufferAttribute(p,e),o?lS.addScaledVector(jI,c):lS.addScaledVector(jI.sub(n),c))}n.add(lS)}return n}raycast(e,n){const r=this.geometry,a=this.material,s=this.matrixWorld;a!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),aS.copy(r.boundingSphere),aS.applyMatrix4(s),nd.copy(e.ray).recast(e.near),!(aS.containsPoint(nd.origin)===!1&&(nd.intersectSphere(aS,q7)===null||nd.origin.distanceToSquared(q7)>(e.far-e.near)**2))&&(z7.copy(s).invert(),nd.copy(e.ray).applyMatrix4(z7),!(r.boundingBox!==null&&nd.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,nd)))}_computeIntersections(e,n,r){let a;const s=this.geometry,o=this.material,u=s.index,l=s.attributes.position,f=s.attributes.uv,c=s.attributes.uv1,p=s.attributes.normal,d=s.groups,h=s.drawRange;if(u!==null)if(Array.isArray(o))for(let m=0,v=d.length;m<v;m++){const g=d[m],y=o[g.materialIndex],_=Math.max(g.start,h.start),x=Math.min(u.count,Math.min(g.start+g.count,h.start+h.count));for(let M=_,A=x;M<A;M+=3){const E=u.getX(M),N=u.getX(M+1),D=u.getX(M+2);a=fS(this,y,e,r,f,c,p,E,N,D),a&&(a.faceIndex=Math.floor(M/3),a.face.materialIndex=g.materialIndex,n.push(a))}}else{const m=Math.max(0,h.start),v=Math.min(u.count,h.start+h.count);for(let g=m,y=v;g<y;g+=3){const _=u.getX(g),x=u.getX(g+1),M=u.getX(g+2);a=fS(this,o,e,r,f,c,p,_,x,M),a&&(a.faceIndex=Math.floor(g/3),n.push(a))}}else if(l!==void 0)if(Array.isArray(o))for(let m=0,v=d.length;m<v;m++){const g=d[m],y=o[g.materialIndex],_=Math.max(g.start,h.start),x=Math.min(l.count,Math.min(g.start+g.count,h.start+h.count));for(let M=_,A=x;M<A;M+=3){const E=M,N=M+1,D=M+2;a=fS(this,y,e,r,f,c,p,E,N,D),a&&(a.faceIndex=Math.floor(M/3),a.face.materialIndex=g.materialIndex,n.push(a))}}else{const m=Math.max(0,h.start),v=Math.min(l.count,h.start+h.count);for(let g=m,y=v;g<y;g+=3){const _=g,x=g+1,M=g+2;a=fS(this,o,e,r,f,c,p,_,x,M),a&&(a.faceIndex=Math.floor(g/3),n.push(a))}}}}function xAe(t,e,n,r,a,s,o,u){let l;if(e.side===Pa?l=r.intersectTriangle(o,s,a,!0,u):l=r.intersectTriangle(a,s,o,e.side===Sl,u),l===null)return null;cS.copy(u),cS.applyMatrix4(t.matrixWorld);const f=n.ray.origin.distanceTo(cS);return f<n.near||f>n.far?null:{distance:f,point:cS.clone(),object:t}}function fS(t,e,n,r,a,s,o,u,l,f){t.getVertexPosition(u,sS),t.getVertexPosition(l,oS),t.getVertexPosition(f,uS);const c=xAe(t,e,n,r,sS,oS,uS,G7);if(c){const p=new ge;Es.getBarycoord(G7,sS,oS,uS,p),a&&(c.uv=Es.getInterpolatedAttribute(a,u,l,f,p,new nt)),s&&(c.uv1=Es.getInterpolatedAttribute(s,u,l,f,p,new nt)),o&&(c.normal=Es.getInterpolatedAttribute(o,u,l,f,p,new ge),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const d={a:u,b:l,c:f,normal:new ge,materialIndex:0};Es.getNormal(sS,oS,uS,d.normal),c.face=d,c.barycoord=p}return c}class Oh extends fn{constructor(e=1,n=1,r=1,a=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:a,heightSegments:s,depthSegments:o};const u=this;a=Math.floor(a),s=Math.floor(s),o=Math.floor(o);const l=[],f=[],c=[],p=[];let d=0,h=0;m("z","y","x",-1,-1,r,n,e,o,s,0),m("z","y","x",1,-1,r,n,-e,o,s,1),m("x","z","y",1,1,e,r,n,a,o,2),m("x","z","y",1,-1,e,r,-n,a,o,3),m("x","y","z",1,-1,e,n,r,a,s,4),m("x","y","z",-1,-1,e,n,-r,a,s,5),this.setIndex(l),this.setAttribute("position",new Rt(f,3)),this.setAttribute("normal",new Rt(c,3)),this.setAttribute("uv",new Rt(p,2));function m(v,g,y,_,x,M,A,E,N,D,C){const T=M/N,P=A/D,I=M/2,U=A/2,q=E/2,z=N+1,G=D+1;let F=0,k=0;const O=new ge;for(let W=0;W<G;W++){const X=W*P-U;for(let ee=0;ee<z;ee++){const J=ee*T-I;O[v]=J*_,O[g]=X*x,O[y]=q,f.push(O.x,O.y,O.z),O[v]=0,O[g]=0,O[y]=E>0?1:-1,c.push(O.x,O.y,O.z),p.push(ee/N),p.push(1-W/D),F+=1}}for(let W=0;W<D;W++)for(let X=0;X<N;X++){const ee=d+X+z*W,J=d+X+z*(W+1),Y=d+(X+1)+z*(W+1),ie=d+(X+1)+z*W;l.push(ee,J,ie),l.push(J,Y,ie),k+=6}u.addGroup(h,k,C),h+=k,d+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Gm(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const a=t[n][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=a.clone():Array.isArray(a)?e[n][r]=a.slice():e[n][r]=a}}return e}function es(t){const e={};for(let n=0;n<t.length;n++){const r=Gm(t[n]);for(const a in r)e[a]=r[a]}return e}function bAe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function $K(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:jn.workingColorSpace}const z4={clone:Gm,merge:es};var SAe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,wAe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Tu extends va{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=SAe,this.fragmentShader=wAe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gm(e.uniforms),this.uniformsGroups=bAe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const a in this.uniforms){const o=this.uniforms[a].value;o&&o.isTexture?n.uniforms[a]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[a]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[a]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[a]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[a]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[a]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[a]={type:"m4",value:o.toArray()}:n.uniforms[a]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const a in this.extensions)this.extensions[a]===!0&&(r[a]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class bx extends Gn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ht,this.projectionMatrix=new Ht,this.projectionMatrixInverse=new Ht,this.coordinateSystem=nl}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _f=new ge,H7=new nt,V7=new nt;class fi extends bx{constructor(e=50,n=1,r=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=a,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=qm*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(zd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return qm*2*Math.atan(Math.tan(zd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){_f.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(_f.x,_f.y).multiplyScalar(-e/_f.z),_f.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(_f.x,_f.y).multiplyScalar(-e/_f.z)}getViewSize(e,n){return this.getViewBounds(e,H7,V7),n.subVectors(V7,H7)}setViewOffset(e,n,r,a,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(zd*.5*this.fov)/this.zoom,r=2*n,a=this.aspect*r,s=-.5*a;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,f=o.fullHeight;s+=o.offsetX*a/l,n-=o.offsetY*r/f,a*=o.width/l,r*=o.height/f}const u=this.filmOffset;u!==0&&(s+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+a,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const b0=-90,S0=1;class jK extends Gn{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new fi(b0,S0,e,n);a.layers=this.layers,this.add(a);const s=new fi(b0,S0,e,n);s.layers=this.layers,this.add(s);const o=new fi(b0,S0,e,n);o.layers=this.layers,this.add(o);const u=new fi(b0,S0,e,n);u.layers=this.layers,this.add(u);const l=new fi(b0,S0,e,n);l.layers=this.layers,this.add(l);const f=new fi(b0,S0,e,n);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,a,s,o,u,l]=n;for(const f of n)this.remove(f);if(e===nl)r.up.set(0,1,0),r.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===s1)r.up.set(0,-1,0),r.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of n)this.add(f),f.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,u,l,f,c]=this.children,p=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,a),e.render(n,s),e.setRenderTarget(r,1,a),e.render(n,o),e.setRenderTarget(r,2,a),e.render(n,u),e.setRenderTarget(r,3,a),e.render(n,l),e.setRenderTarget(r,4,a),e.render(n,f),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,a),e.render(n,c),e.setRenderTarget(p,d,h),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class Sx extends Ur{constructor(e,n,r,a,s,o,u,l,f,c){e=e!==void 0?e:[],n=n!==void 0?n:Rc,super(e,n,r,a,s,o,u,l,f,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class XK extends Eu{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},a=[r,r,r,r,r,r];this.texture=new Sx(a,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ni}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Oh(5,5,5),s=new Tu({name:"CubemapFromEquirect",uniforms:Gm(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Pa,blending:fc});s.uniforms.tEquirect.value=n;const o=new Wr(a,s),u=n.minFilter;return n.minFilter===tl&&(n.minFilter=ni),new jK(1,10,this).update(e,o),n.minFilter=u,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,a){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,a);e.setRenderTarget(s)}}const XI=new ge,_Ae=new ge,MAe=new un;class ec{constructor(e=new ge(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,a){return this.normal.set(e,n,r),this.constant=a,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const a=XI.subVectors(r,n).cross(_Ae.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(XI),a=this.normal.dot(r);if(a===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/a;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||MAe.getNormalMatrix(e),a=this.coplanarPoint(XI).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const rd=new fa,pS=new ge;class wx{constructor(e=new ec,n=new ec,r=new ec,a=new ec,s=new ec,o=new ec){this.planes=[e,n,r,a,s,o]}set(e,n,r,a,s,o){const u=this.planes;return u[0].copy(e),u[1].copy(n),u[2].copy(r),u[3].copy(a),u[4].copy(s),u[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=nl){const r=this.planes,a=e.elements,s=a[0],o=a[1],u=a[2],l=a[3],f=a[4],c=a[5],p=a[6],d=a[7],h=a[8],m=a[9],v=a[10],g=a[11],y=a[12],_=a[13],x=a[14],M=a[15];if(r[0].setComponents(l-s,d-f,g-h,M-y).normalize(),r[1].setComponents(l+s,d+f,g+h,M+y).normalize(),r[2].setComponents(l+o,d+c,g+m,M+_).normalize(),r[3].setComponents(l-o,d-c,g-m,M-_).normalize(),r[4].setComponents(l-u,d-p,g-v,M-x).normalize(),n===nl)r[5].setComponents(l+u,d+p,g+v,M+x).normalize();else if(n===s1)r[5].setComponents(u,p,v,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),rd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),rd.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(rd)}intersectsSprite(e){return rd.center.set(0,0,0),rd.radius=.7071067811865476,rd.applyMatrix4(e.matrixWorld),this.intersectsSphere(rd)}intersectsSphere(e){const n=this.planes,r=e.center,a=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<a)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const a=n[r];if(pS.x=a.normal.x>0?e.max.x:e.min.x,pS.y=a.normal.y>0?e.max.y:e.min.y,pS.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(pS)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function YK(){let t=null,e=!1,n=null,r=null;function a(s,o){n(s,o),r=t.requestAnimationFrame(a)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(a),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function EAe(t){const e=new WeakMap;function n(u,l){const f=u.array,c=u.usage,p=f.byteLength,d=t.createBuffer();t.bindBuffer(l,d),t.bufferData(l,f,c),u.onUploadCallback();let h;if(f instanceof Float32Array)h=t.FLOAT;else if(f instanceof Uint16Array)u.isFloat16BufferAttribute?h=t.HALF_FLOAT:h=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)h=t.SHORT;else if(f instanceof Uint32Array)h=t.UNSIGNED_INT;else if(f instanceof Int32Array)h=t.INT;else if(f instanceof Int8Array)h=t.BYTE;else if(f instanceof Uint8Array)h=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)h=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:d,type:h,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version,size:p}}function r(u,l,f){const c=l.array,p=l.updateRanges;if(t.bindBuffer(f,u),p.length===0)t.bufferSubData(f,0,c);else{p.sort((h,m)=>h.start-m.start);let d=0;for(let h=1;h<p.length;h++){const m=p[d],v=p[h];v.start<=m.start+m.count+1?m.count=Math.max(m.count,v.start+v.count-m.start):(++d,p[d]=v)}p.length=d+1;for(let h=0,m=p.length;h<m;h++){const v=p[h];t.bufferSubData(f,v.start*c.BYTES_PER_ELEMENT,c,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),e.get(u)}function s(u){u.isInterleavedBufferAttribute&&(u=u.data);const l=e.get(u);l&&(t.deleteBuffer(l.buffer),e.delete(u))}function o(u,l){if(u.isInterleavedBufferAttribute&&(u=u.data),u.isGLBufferAttribute){const c=e.get(u);(!c||c.version<u.version)&&e.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}const f=e.get(u);if(f===void 0)e.set(u,n(u,l));else if(f.version<u.version){if(f.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(f.buffer,u,l),f.version=u.version}}return{get:a,remove:s,update:o}}class Kc extends fn{constructor(e=1,n=1,r=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:a};const s=e/2,o=n/2,u=Math.floor(r),l=Math.floor(a),f=u+1,c=l+1,p=e/u,d=n/l,h=[],m=[],v=[],g=[];for(let y=0;y<c;y++){const _=y*d-o;for(let x=0;x<f;x++){const M=x*p-s;m.push(M,-_,0),v.push(0,0,1),g.push(x/u),g.push(1-y/l)}}for(let y=0;y<l;y++)for(let _=0;_<u;_++){const x=_+f*y,M=_+f*(y+1),A=_+1+f*(y+1),E=_+1+f*y;h.push(x,M,E),h.push(M,A,E)}this.setIndex(h),this.setAttribute("position",new Rt(m,3)),this.setAttribute("normal",new Rt(v,3)),this.setAttribute("uv",new Rt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kc(e.width,e.height,e.widthSegments,e.heightSegments)}}var TAe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,AAe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,NAe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,CAe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DAe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,RAe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,IAe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,PAe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,OAe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,LAe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,kAe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,UAe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,FAe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,BAe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,zAe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,qAe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,GAe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,HAe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,VAe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,WAe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$Ae=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,jAe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,XAe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,YAe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,QAe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ZAe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,JAe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,KAe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,eNe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,tNe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,nNe="gl_FragColor = linearToOutputTexel( gl_FragColor );",rNe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,iNe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,aNe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,sNe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,oNe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,uNe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,lNe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,cNe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fNe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,pNe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dNe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,hNe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,mNe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,vNe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,gNe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,yNe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,xNe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bNe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,SNe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,wNe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,_Ne=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,MNe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ENe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,TNe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ANe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,NNe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,CNe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DNe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,RNe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,INe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,PNe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ONe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,LNe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kNe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,UNe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,FNe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,BNe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,zNe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,qNe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,GNe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,HNe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,VNe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,WNe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$Ne=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jNe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,XNe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,YNe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,QNe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ZNe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,JNe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,KNe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,eCe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,tCe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,nCe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,rCe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,iCe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,aCe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,sCe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,oCe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,uCe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lCe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,cCe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,fCe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,pCe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,dCe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hCe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,mCe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,vCe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,gCe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,yCe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,xCe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,bCe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,SCe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wCe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_Ce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,MCe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ECe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,TCe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ACe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,NCe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,CCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,DCe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RCe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ICe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,PCe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,OCe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,LCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,kCe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UCe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,FCe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,BCe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,zCe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qCe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GCe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HCe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,VCe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WCe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$Ce=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,jCe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XCe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YCe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,QCe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZCe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JCe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KCe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,e3e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,t3e=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,n3e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,r3e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,i3e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ln={alphahash_fragment:TAe,alphahash_pars_fragment:AAe,alphamap_fragment:NAe,alphamap_pars_fragment:CAe,alphatest_fragment:DAe,alphatest_pars_fragment:RAe,aomap_fragment:IAe,aomap_pars_fragment:PAe,batching_pars_vertex:OAe,batching_vertex:LAe,begin_vertex:kAe,beginnormal_vertex:UAe,bsdfs:FAe,iridescence_fragment:BAe,bumpmap_pars_fragment:zAe,clipping_planes_fragment:qAe,clipping_planes_pars_fragment:GAe,clipping_planes_pars_vertex:HAe,clipping_planes_vertex:VAe,color_fragment:WAe,color_pars_fragment:$Ae,color_pars_vertex:jAe,color_vertex:XAe,common:YAe,cube_uv_reflection_fragment:QAe,defaultnormal_vertex:ZAe,displacementmap_pars_vertex:JAe,displacementmap_vertex:KAe,emissivemap_fragment:eNe,emissivemap_pars_fragment:tNe,colorspace_fragment:nNe,colorspace_pars_fragment:rNe,envmap_fragment:iNe,envmap_common_pars_fragment:aNe,envmap_pars_fragment:sNe,envmap_pars_vertex:oNe,envmap_physical_pars_fragment:yNe,envmap_vertex:uNe,fog_vertex:lNe,fog_pars_vertex:cNe,fog_fragment:fNe,fog_pars_fragment:pNe,gradientmap_pars_fragment:dNe,lightmap_pars_fragment:hNe,lights_lambert_fragment:mNe,lights_lambert_pars_fragment:vNe,lights_pars_begin:gNe,lights_toon_fragment:xNe,lights_toon_pars_fragment:bNe,lights_phong_fragment:SNe,lights_phong_pars_fragment:wNe,lights_physical_fragment:_Ne,lights_physical_pars_fragment:MNe,lights_fragment_begin:ENe,lights_fragment_maps:TNe,lights_fragment_end:ANe,logdepthbuf_fragment:NNe,logdepthbuf_pars_fragment:CNe,logdepthbuf_pars_vertex:DNe,logdepthbuf_vertex:RNe,map_fragment:INe,map_pars_fragment:PNe,map_particle_fragment:ONe,map_particle_pars_fragment:LNe,metalnessmap_fragment:kNe,metalnessmap_pars_fragment:UNe,morphinstance_vertex:FNe,morphcolor_vertex:BNe,morphnormal_vertex:zNe,morphtarget_pars_vertex:qNe,morphtarget_vertex:GNe,normal_fragment_begin:HNe,normal_fragment_maps:VNe,normal_pars_fragment:WNe,normal_pars_vertex:$Ne,normal_vertex:jNe,normalmap_pars_fragment:XNe,clearcoat_normal_fragment_begin:YNe,clearcoat_normal_fragment_maps:QNe,clearcoat_pars_fragment:ZNe,iridescence_pars_fragment:JNe,opaque_fragment:KNe,packing:eCe,premultiplied_alpha_fragment:tCe,project_vertex:nCe,dithering_fragment:rCe,dithering_pars_fragment:iCe,roughnessmap_fragment:aCe,roughnessmap_pars_fragment:sCe,shadowmap_pars_fragment:oCe,shadowmap_pars_vertex:uCe,shadowmap_vertex:lCe,shadowmask_pars_fragment:cCe,skinbase_vertex:fCe,skinning_pars_vertex:pCe,skinning_vertex:dCe,skinnormal_vertex:hCe,specularmap_fragment:mCe,specularmap_pars_fragment:vCe,tonemapping_fragment:gCe,tonemapping_pars_fragment:yCe,transmission_fragment:xCe,transmission_pars_fragment:bCe,uv_pars_fragment:SCe,uv_pars_vertex:wCe,uv_vertex:_Ce,worldpos_vertex:MCe,background_vert:ECe,background_frag:TCe,backgroundCube_vert:ACe,backgroundCube_frag:NCe,cube_vert:CCe,cube_frag:DCe,depth_vert:RCe,depth_frag:ICe,distanceRGBA_vert:PCe,distanceRGBA_frag:OCe,equirect_vert:LCe,equirect_frag:kCe,linedashed_vert:UCe,linedashed_frag:FCe,meshbasic_vert:BCe,meshbasic_frag:zCe,meshlambert_vert:qCe,meshlambert_frag:GCe,meshmatcap_vert:HCe,meshmatcap_frag:VCe,meshnormal_vert:WCe,meshnormal_frag:$Ce,meshphong_vert:jCe,meshphong_frag:XCe,meshphysical_vert:YCe,meshphysical_frag:QCe,meshtoon_vert:ZCe,meshtoon_frag:JCe,points_vert:KCe,points_frag:e3e,shadow_vert:t3e,shadow_frag:n3e,sprite_vert:r3e,sprite_frag:i3e},dt={common:{diffuse:{value:new gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new un},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new un}},envmap:{envMap:{value:null},envMapRotation:{value:new un},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new un}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new un}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new un},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new un},normalScale:{value:new nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new un},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new un}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new un}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new un}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0},uvTransform:{value:new un}},sprite:{diffuse:{value:new gt(16777215)},opacity:{value:1},center:{value:new nt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new un},alphaMap:{value:null},alphaMapTransform:{value:new un},alphaTest:{value:0}}},du={basic:{uniforms:es([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:ln.meshbasic_vert,fragmentShader:ln.meshbasic_frag},lambert:{uniforms:es([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new gt(0)}}]),vertexShader:ln.meshlambert_vert,fragmentShader:ln.meshlambert_frag},phong:{uniforms:es([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new gt(0)},specular:{value:new gt(1118481)},shininess:{value:30}}]),vertexShader:ln.meshphong_vert,fragmentShader:ln.meshphong_frag},standard:{uniforms:es([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag},toon:{uniforms:es([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new gt(0)}}]),vertexShader:ln.meshtoon_vert,fragmentShader:ln.meshtoon_frag},matcap:{uniforms:es([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:ln.meshmatcap_vert,fragmentShader:ln.meshmatcap_frag},points:{uniforms:es([dt.points,dt.fog]),vertexShader:ln.points_vert,fragmentShader:ln.points_frag},dashed:{uniforms:es([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ln.linedashed_vert,fragmentShader:ln.linedashed_frag},depth:{uniforms:es([dt.common,dt.displacementmap]),vertexShader:ln.depth_vert,fragmentShader:ln.depth_frag},normal:{uniforms:es([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:ln.meshnormal_vert,fragmentShader:ln.meshnormal_frag},sprite:{uniforms:es([dt.sprite,dt.fog]),vertexShader:ln.sprite_vert,fragmentShader:ln.sprite_frag},background:{uniforms:{uvTransform:{value:new un},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ln.background_vert,fragmentShader:ln.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new un}},vertexShader:ln.backgroundCube_vert,fragmentShader:ln.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ln.cube_vert,fragmentShader:ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ln.equirect_vert,fragmentShader:ln.equirect_frag},distanceRGBA:{uniforms:es([dt.common,dt.displacementmap,{referencePosition:{value:new ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ln.distanceRGBA_vert,fragmentShader:ln.distanceRGBA_frag},shadow:{uniforms:es([dt.lights,dt.fog,{color:{value:new gt(0)},opacity:{value:1}}]),vertexShader:ln.shadow_vert,fragmentShader:ln.shadow_frag}};du.physical={uniforms:es([du.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new un},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new un},clearcoatNormalScale:{value:new nt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new un},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new un},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new un},sheen:{value:0},sheenColor:{value:new gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new un},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new un},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new un},transmissionSamplerSize:{value:new nt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new un},attenuationDistance:{value:0},attenuationColor:{value:new gt(0)},specularColor:{value:new gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new un},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new un},anisotropyVector:{value:new nt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new un}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag};const dS={r:0,b:0,g:0},id=new uo,a3e=new Ht;function s3e(t,e,n,r,a,s,o){const u=new gt(0);let l=s===!0?0:1,f,c,p=null,d=0,h=null;function m(_){let x=_.isScene===!0?_.background:null;return x&&x.isTexture&&(x=(_.backgroundBlurriness>0?n:e).get(x)),x}function v(_){let x=!1;const M=m(_);M===null?y(u,l):M&&M.isColor&&(y(M,1),x=!0);const A=t.xr.getEnvironmentBlendMode();A==="additive"?r.buffers.color.setClear(0,0,0,1,o):A==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||x)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function g(_,x){const M=m(x);M&&(M.isCubeTexture||M.mapping===vv)?(c===void 0&&(c=new Wr(new Oh(1,1,1),new Tu({name:"BackgroundCubeMaterial",uniforms:Gm(du.backgroundCube.uniforms),vertexShader:du.backgroundCube.vertexShader,fragmentShader:du.backgroundCube.fragmentShader,side:Pa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(A,E,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(c)),id.copy(x.backgroundRotation),id.x*=-1,id.y*=-1,id.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(id.y*=-1,id.z*=-1),c.material.uniforms.envMap.value=M,c.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(a3e.makeRotationFromEuler(id)),c.material.toneMapped=jn.getTransfer(M.colorSpace)!==wr,(p!==M||d!==M.version||h!==t.toneMapping)&&(c.material.needsUpdate=!0,p=M,d=M.version,h=t.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null)):M&&M.isTexture&&(f===void 0&&(f=new Wr(new Kc(2,2),new Tu({name:"BackgroundMaterial",uniforms:Gm(du.background.uniforms),vertexShader:du.background.vertexShader,fragmentShader:du.background.fragmentShader,side:Sl,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(f)),f.material.uniforms.t2D.value=M,f.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,f.material.toneMapped=jn.getTransfer(M.colorSpace)!==wr,M.matrixAutoUpdate===!0&&M.updateMatrix(),f.material.uniforms.uvTransform.value.copy(M.matrix),(p!==M||d!==M.version||h!==t.toneMapping)&&(f.material.needsUpdate=!0,p=M,d=M.version,h=t.toneMapping),f.layers.enableAll(),_.unshift(f,f.geometry,f.material,0,0,null))}function y(_,x){_.getRGB(dS,$K(t)),r.buffers.color.setClear(dS.r,dS.g,dS.b,x,o)}return{getClearColor:function(){return u},setClearColor:function(_,x=1){u.set(_),l=x,y(u,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,y(u,l)},render:v,addToRenderList:g}}function o3e(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},a=d(null);let s=a,o=!1;function u(T,P,I,U,q){let z=!1;const G=p(U,I,P);s!==G&&(s=G,f(s.object)),z=h(T,U,I,q),z&&m(T,U,I,q),q!==null&&e.update(q,t.ELEMENT_ARRAY_BUFFER),(z||o)&&(o=!1,M(T,P,I,U),q!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(q).buffer))}function l(){return t.createVertexArray()}function f(T){return t.bindVertexArray(T)}function c(T){return t.deleteVertexArray(T)}function p(T,P,I){const U=I.wireframe===!0;let q=r[T.id];q===void 0&&(q={},r[T.id]=q);let z=q[P.id];z===void 0&&(z={},q[P.id]=z);let G=z[U];return G===void 0&&(G=d(l()),z[U]=G),G}function d(T){const P=[],I=[],U=[];for(let q=0;q<n;q++)P[q]=0,I[q]=0,U[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:I,attributeDivisors:U,object:T,attributes:{},index:null}}function h(T,P,I,U){const q=s.attributes,z=P.attributes;let G=0;const F=I.getAttributes();for(const k in F)if(F[k].location>=0){const W=q[k];let X=z[k];if(X===void 0&&(k==="instanceMatrix"&&T.instanceMatrix&&(X=T.instanceMatrix),k==="instanceColor"&&T.instanceColor&&(X=T.instanceColor)),W===void 0||W.attribute!==X||X&&W.data!==X.data)return!0;G++}return s.attributesNum!==G||s.index!==U}function m(T,P,I,U){const q={},z=P.attributes;let G=0;const F=I.getAttributes();for(const k in F)if(F[k].location>=0){let W=z[k];W===void 0&&(k==="instanceMatrix"&&T.instanceMatrix&&(W=T.instanceMatrix),k==="instanceColor"&&T.instanceColor&&(W=T.instanceColor));const X={};X.attribute=W,W&&W.data&&(X.data=W.data),q[k]=X,G++}s.attributes=q,s.attributesNum=G,s.index=U}function v(){const T=s.newAttributes;for(let P=0,I=T.length;P<I;P++)T[P]=0}function g(T){y(T,0)}function y(T,P){const I=s.newAttributes,U=s.enabledAttributes,q=s.attributeDivisors;I[T]=1,U[T]===0&&(t.enableVertexAttribArray(T),U[T]=1),q[T]!==P&&(t.vertexAttribDivisor(T,P),q[T]=P)}function _(){const T=s.newAttributes,P=s.enabledAttributes;for(let I=0,U=P.length;I<U;I++)P[I]!==T[I]&&(t.disableVertexAttribArray(I),P[I]=0)}function x(T,P,I,U,q,z,G){G===!0?t.vertexAttribIPointer(T,P,I,q,z):t.vertexAttribPointer(T,P,I,U,q,z)}function M(T,P,I,U){v();const q=U.attributes,z=I.getAttributes(),G=P.defaultAttributeValues;for(const F in z){const k=z[F];if(k.location>=0){let O=q[F];if(O===void 0&&(F==="instanceMatrix"&&T.instanceMatrix&&(O=T.instanceMatrix),F==="instanceColor"&&T.instanceColor&&(O=T.instanceColor)),O!==void 0){const W=O.normalized,X=O.itemSize,ee=e.get(O);if(ee===void 0)continue;const J=ee.buffer,Y=ee.type,ie=ee.bytesPerElement,K=Y===t.INT||Y===t.UNSIGNED_INT||O.gpuType===hD;if(O.isInterleavedBufferAttribute){const re=O.data,oe=re.stride,ce=O.offset;if(re.isInstancedInterleavedBuffer){for(let me=0;me<k.locationSize;me++)y(k.location+me,re.meshPerAttribute);T.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let me=0;me<k.locationSize;me++)g(k.location+me);t.bindBuffer(t.ARRAY_BUFFER,J);for(let me=0;me<k.locationSize;me++)x(k.location+me,X/k.locationSize,Y,W,oe*ie,(ce+X/k.locationSize*me)*ie,K)}else{if(O.isInstancedBufferAttribute){for(let re=0;re<k.locationSize;re++)y(k.location+re,O.meshPerAttribute);T.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=O.meshPerAttribute*O.count)}else for(let re=0;re<k.locationSize;re++)g(k.location+re);t.bindBuffer(t.ARRAY_BUFFER,J);for(let re=0;re<k.locationSize;re++)x(k.location+re,X/k.locationSize,Y,W,X*ie,X/k.locationSize*re*ie,K)}}else if(G!==void 0){const W=G[F];if(W!==void 0)switch(W.length){case 2:t.vertexAttrib2fv(k.location,W);break;case 3:t.vertexAttrib3fv(k.location,W);break;case 4:t.vertexAttrib4fv(k.location,W);break;default:t.vertexAttrib1fv(k.location,W)}}}}_()}function A(){D();for(const T in r){const P=r[T];for(const I in P){const U=P[I];for(const q in U)c(U[q].object),delete U[q];delete P[I]}delete r[T]}}function E(T){if(r[T.id]===void 0)return;const P=r[T.id];for(const I in P){const U=P[I];for(const q in U)c(U[q].object),delete U[q];delete P[I]}delete r[T.id]}function N(T){for(const P in r){const I=r[P];if(I[T.id]===void 0)continue;const U=I[T.id];for(const q in U)c(U[q].object),delete U[q];delete I[T.id]}}function D(){C(),o=!0,s!==a&&(s=a,f(s.object))}function C(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:u,reset:D,resetDefaultState:C,dispose:A,releaseStatesOfGeometry:E,releaseStatesOfProgram:N,initAttributes:v,enableAttribute:g,disableUnusedAttributes:_}}function u3e(t,e,n){let r;function a(f){r=f}function s(f,c){t.drawArrays(r,f,c),n.update(c,r,1)}function o(f,c,p){p!==0&&(t.drawArraysInstanced(r,f,c,p),n.update(c,r,p))}function u(f,c,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,f,0,c,0,p);let h=0;for(let m=0;m<p;m++)h+=c[m];n.update(h,r,1)}function l(f,c,p,d){if(p===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let m=0;m<f.length;m++)o(f[m],c[m],d[m]);else{h.multiDrawArraysInstancedWEBGL(r,f,0,c,0,d,0,p);let m=0;for(let v=0;v<p;v++)m+=c[v];for(let v=0;v<d.length;v++)n.update(m,r,d[v])}}this.setMode=a,this.render=s,this.renderInstances=o,this.renderMultiDraw=u,this.renderMultiDrawInstances=l}function l3e(t,e,n,r){let a;function s(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");a=t.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function o(N){return!(N!==Ra&&r.convert(N)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(N){const D=N===gv&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==Mu&&r.convert(N)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==As&&!D)}function l(N){if(N==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=n.precision!==void 0?n.precision:"highp";const c=l(f);c!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",c,"instead."),f=c);const p=n.logarithmicDepthBuffer===!0,d=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(d===!0){const N=e.get("EXT_clip_control");N.clipControlEXT(N.LOWER_LEFT_EXT,N.ZERO_TO_ONE_EXT)}const h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),_=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),x=t.getParameter(t.MAX_VARYING_VECTORS),M=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),A=m>0,E=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:u,precision:f,logarithmicDepthBuffer:p,reverseDepthBuffer:d,maxTextures:h,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:g,maxAttributes:y,maxVertexUniforms:_,maxVaryings:x,maxFragmentUniforms:M,vertexTextures:A,maxSamples:E}}function c3e(t){const e=this;let n=null,r=0,a=!1,s=!1;const o=new ec,u=new un,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,d){const h=p.length!==0||d||r!==0||a;return a=d,r=p.length,h},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,d){n=c(p,d,0)},this.setState=function(p,d,h){const m=p.clippingPlanes,v=p.clipIntersection,g=p.clipShadows,y=t.get(p);if(!a||m===null||m.length===0||s&&!g)s?c(null):f();else{const _=s?0:r,x=_*4;let M=y.clippingState||null;l.value=M,M=c(m,d,x,h);for(let A=0;A!==x;++A)M[A]=n[A];y.clippingState=M,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=_}};function f(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(p,d,h,m){const v=p!==null?p.length:0;let g=null;if(v!==0){if(g=l.value,m!==!0||g===null){const y=h+v*4,_=d.matrixWorldInverse;u.getNormalMatrix(_),(g===null||g.length<y)&&(g=new Float32Array(y));for(let x=0,M=h;x!==v;++x,M+=4)o.copy(p[x]).applyMatrix4(_,u),o.normal.toArray(g,M),g[M+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function f3e(t){let e=new WeakMap;function n(o,u){return u===Qy?o.mapping=Rc:u===Zy&&(o.mapping=fp),o}function r(o){if(o&&o.isTexture){const u=o.mapping;if(u===Qy||u===Zy)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const f=new XK(l.height);return f.fromEquirectangularTexture(t,o),e.set(o,f),o.addEventListener("dispose",a),n(f.texture,o.mapping)}else return null}}return o}function a(o){const u=o.target;u.removeEventListener("dispose",a);const l=e.get(u);l!==void 0&&(e.delete(u),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Qf extends bx{constructor(e=-1,n=1,r=1,a=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=a,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,a,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let s=r-e,o=r+e,u=a+n,l=a-n;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,u-=c*this.view.offsetY,l=u-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,u,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const K0=4,W7=[.125,.215,.35,.446,.526,.582],Sd=20,YI=new Qf,$7=new gt;let QI=null,ZI=0,JI=0,KI=!1;const bd=(1+Math.sqrt(5))/2,w0=1/bd,j7=[new ge(-bd,w0,0),new ge(bd,w0,0),new ge(-w0,0,bd),new ge(w0,0,bd),new ge(0,bd,-w0),new ge(0,bd,w0),new ge(-1,1,-1),new ge(1,1,-1),new ge(-1,1,1),new ge(1,1,1)];class SL{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,a=100){QI=this._renderer.getRenderTarget(),ZI=this._renderer.getActiveCubeFace(),JI=this._renderer.getActiveMipmapLevel(),KI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,a,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Q7(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Y7(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(QI,ZI,JI),this._renderer.xr.enabled=KI,e.scissorTest=!1,hS(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Rc||e.mapping===fp?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),QI=this._renderer.getRenderTarget(),ZI=this._renderer.getActiveCubeFace(),JI=this._renderer.getActiveMipmapLevel(),KI=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:ni,minFilter:ni,generateMipmaps:!1,type:gv,format:Ra,colorSpace:Zc,depthBuffer:!1},a=X7(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=X7(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=p3e(s)),this._blurMaterial=d3e(s,e,n)}return a}_compileMaterial(e){const n=new Wr(this._lodPlanes[0],e);this._renderer.compile(n,YI)}_sceneToCubeUV(e,n,r,a){const u=new fi(90,1,n,r),l=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],c=this._renderer,p=c.autoClear,d=c.toneMapping;c.getClearColor($7),c.toneMapping=ol,c.autoClear=!1;const h=new Jc({name:"PMREM.Background",side:Pa,depthWrite:!1,depthTest:!1}),m=new Wr(new Oh,h);let v=!1;const g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,v=!0):(h.color.copy($7),v=!0);for(let y=0;y<6;y++){const _=y%3;_===0?(u.up.set(0,l[y],0),u.lookAt(f[y],0,0)):_===1?(u.up.set(0,0,l[y]),u.lookAt(0,f[y],0)):(u.up.set(0,l[y],0),u.lookAt(0,0,f[y]));const x=this._cubeSize;hS(a,_*x,y>2?x:0,x,x),c.setRenderTarget(a),v&&c.render(m,u),c.render(e,u)}m.geometry.dispose(),m.material.dispose(),c.toneMapping=d,c.autoClear=p,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,a=e.mapping===Rc||e.mapping===fp;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=Q7()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Y7());const s=a?this._cubemapMaterial:this._equirectMaterial,o=new Wr(this._lodPlanes[0],s),u=s.uniforms;u.envMap.value=e;const l=this._cubeSize;hS(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,YI)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const a=this._lodPlanes.length;for(let s=1;s<a;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),u=j7[(a-s-1)%j7.length];this._blur(e,s-1,s,o,u)}n.autoClear=r}_blur(e,n,r,a,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,a,"latitudinal",s),this._halfBlur(o,e,r,r,a,"longitudinal",s)}_halfBlur(e,n,r,a,s,o,u){const l=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,p=new Wr(this._lodPlanes[a],f),d=f.uniforms,h=this._sizeLods[r]-1,m=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*Sd-1),v=s/m,g=isFinite(s)?1+Math.floor(c*v):Sd;g>Sd&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Sd}`);const y=[];let _=0;for(let N=0;N<Sd;++N){const D=N/v,C=Math.exp(-D*D/2);y.push(C),N===0?_+=C:N<g&&(_+=2*C)}for(let N=0;N<y.length;N++)y[N]=y[N]/_;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=y,d.latitudinal.value=o==="latitudinal",u&&(d.poleAxis.value=u);const{_lodMax:x}=this;d.dTheta.value=m,d.mipInt.value=x-r;const M=this._sizeLods[a],A=3*M*(a>x-K0?a-x+K0:0),E=4*(this._cubeSize-M);hS(n,A,E,3*M,2*M),l.setRenderTarget(n),l.render(p,YI)}}function p3e(t){const e=[],n=[],r=[];let a=t;const s=t-K0+1+W7.length;for(let o=0;o<s;o++){const u=Math.pow(2,a);n.push(u);let l=1/u;o>t-K0?l=W7[o-t+K0-1]:o===0&&(l=0),r.push(l);const f=1/(u-2),c=-f,p=1+f,d=[c,c,p,c,p,p,c,c,p,p,c,p],h=6,m=6,v=3,g=2,y=1,_=new Float32Array(v*m*h),x=new Float32Array(g*m*h),M=new Float32Array(y*m*h);for(let E=0;E<h;E++){const N=E%3*2/3-1,D=E>2?0:-1,C=[N,D,0,N+2/3,D,0,N+2/3,D+1,0,N,D,0,N+2/3,D+1,0,N,D+1,0];_.set(C,v*m*E),x.set(d,g*m*E);const T=[E,E,E,E,E,E];M.set(T,y*m*E)}const A=new fn;A.setAttribute("position",new lr(_,v)),A.setAttribute("uv",new lr(x,g)),A.setAttribute("faceIndex",new lr(M,y)),e.push(A),a>K0&&a--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function X7(t,e,n){const r=new Eu(t,e,n);return r.texture.mapping=vv,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function hS(t,e,n,r,a){t.viewport.set(e,n,r,a),t.scissor.set(e,n,r,a)}function d3e(t,e,n){const r=new Float32Array(Sd),a=new ge(0,1,0);return new Tu({name:"SphericalGaussianBlur",defines:{n:Sd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:q4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fc,depthTest:!1,depthWrite:!1})}function Y7(){return new Tu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:q4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fc,depthTest:!1,depthWrite:!1})}function Q7(){return new Tu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:q4(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fc,depthTest:!1,depthWrite:!1})}function q4(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function h3e(t){let e=new WeakMap,n=null;function r(u){if(u&&u.isTexture){const l=u.mapping,f=l===Qy||l===Zy,c=l===Rc||l===fp;if(f||c){let p=e.get(u);const d=p!==void 0?p.texture.pmremVersion:0;if(u.isRenderTargetTexture&&u.pmremVersion!==d)return n===null&&(n=new SL(t)),p=f?n.fromEquirectangular(u,p):n.fromCubemap(u,p),p.texture.pmremVersion=u.pmremVersion,e.set(u,p),p.texture;if(p!==void 0)return p.texture;{const h=u.image;return f&&h&&h.height>0||c&&h&&a(h)?(n===null&&(n=new SL(t)),p=f?n.fromEquirectangular(u):n.fromCubemap(u),p.texture.pmremVersion=u.pmremVersion,e.set(u,p),u.addEventListener("dispose",s),p.texture):null}}}return u}function a(u){let l=0;const f=6;for(let c=0;c<f;c++)u[c]!==void 0&&l++;return l===f}function s(u){const l=u.target;l.removeEventListener("dispose",s);const f=e.get(l);f!==void 0&&(e.delete(l),f.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function m3e(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let a;switch(r){case"WEBGL_depth_texture":a=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=t.getExtension(r)}return e[r]=a,a}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const a=n(r);return a===null&&b2("THREE.WebGLRenderer: "+r+" extension not supported."),a}}}function v3e(t,e,n,r){const a={},s=new WeakMap;function o(p){const d=p.target;d.index!==null&&e.remove(d.index);for(const m in d.attributes)e.remove(d.attributes[m]);for(const m in d.morphAttributes){const v=d.morphAttributes[m];for(let g=0,y=v.length;g<y;g++)e.remove(v[g])}d.removeEventListener("dispose",o),delete a[d.id];const h=s.get(d);h&&(e.remove(h),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function u(p,d){return a[d.id]===!0||(d.addEventListener("dispose",o),a[d.id]=!0,n.memory.geometries++),d}function l(p){const d=p.attributes;for(const m in d)e.update(d[m],t.ARRAY_BUFFER);const h=p.morphAttributes;for(const m in h){const v=h[m];for(let g=0,y=v.length;g<y;g++)e.update(v[g],t.ARRAY_BUFFER)}}function f(p){const d=[],h=p.index,m=p.attributes.position;let v=0;if(h!==null){const _=h.array;v=h.version;for(let x=0,M=_.length;x<M;x+=3){const A=_[x+0],E=_[x+1],N=_[x+2];d.push(A,E,E,N,N,A)}}else if(m!==void 0){const _=m.array;v=m.version;for(let x=0,M=_.length/3-1;x<M;x+=3){const A=x+0,E=x+1,N=x+2;d.push(A,E,E,N,N,A)}}else return;const g=new(qK(d)?B4:F4)(d,1);g.version=v;const y=s.get(p);y&&e.remove(y),s.set(p,g)}function c(p){const d=s.get(p);if(d){const h=p.index;h!==null&&d.version<h.version&&f(p)}else f(p);return s.get(p)}return{get:u,update:l,getWireframeAttribute:c}}function g3e(t,e,n){let r;function a(d){r=d}let s,o;function u(d){s=d.type,o=d.bytesPerElement}function l(d,h){t.drawElements(r,h,s,d*o),n.update(h,r,1)}function f(d,h,m){m!==0&&(t.drawElementsInstanced(r,h,s,d*o,m),n.update(h,r,m))}function c(d,h,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,h,0,s,d,0,m);let g=0;for(let y=0;y<m;y++)g+=h[y];n.update(g,r,1)}function p(d,h,m,v){if(m===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let y=0;y<d.length;y++)f(d[y]/o,h[y],v[y]);else{g.multiDrawElementsInstancedWEBGL(r,h,0,s,d,0,v,0,m);let y=0;for(let _=0;_<m;_++)y+=h[_];for(let _=0;_<v.length;_++)n.update(y,r,v[_])}}this.setMode=a,this.setIndex=u,this.render=l,this.renderInstances=f,this.renderMultiDraw=c,this.renderMultiDrawInstances=p}function y3e(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,u){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=u*(s/3);break;case t.LINES:n.lines+=u*(s/2);break;case t.LINE_STRIP:n.lines+=u*(s-1);break;case t.LINE_LOOP:n.lines+=u*s;break;case t.POINTS:n.points+=u*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function a(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:a,update:r}}function x3e(t,e,n){const r=new WeakMap,a=new On;function s(o,u,l){const f=o.morphTargetInfluences,c=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=c!==void 0?c.length:0;let d=r.get(u);if(d===void 0||d.count!==p){let T=function(){D.dispose(),r.delete(u),u.removeEventListener("dispose",T)};var h=T;d!==void 0&&d.texture.dispose();const m=u.morphAttributes.position!==void 0,v=u.morphAttributes.normal!==void 0,g=u.morphAttributes.color!==void 0,y=u.morphAttributes.position||[],_=u.morphAttributes.normal||[],x=u.morphAttributes.color||[];let M=0;m===!0&&(M=1),v===!0&&(M=2),g===!0&&(M=3);let A=u.attributes.position.count*M,E=1;A>e.maxTextureSize&&(E=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const N=new Float32Array(A*E*4*p),D=new wD(N,A,E,p);D.type=As,D.needsUpdate=!0;const C=M*4;for(let P=0;P<p;P++){const I=y[P],U=_[P],q=x[P],z=A*E*4*P;for(let G=0;G<I.count;G++){const F=G*C;m===!0&&(a.fromBufferAttribute(I,G),N[z+F+0]=a.x,N[z+F+1]=a.y,N[z+F+2]=a.z,N[z+F+3]=0),v===!0&&(a.fromBufferAttribute(U,G),N[z+F+4]=a.x,N[z+F+5]=a.y,N[z+F+6]=a.z,N[z+F+7]=0),g===!0&&(a.fromBufferAttribute(q,G),N[z+F+8]=a.x,N[z+F+9]=a.y,N[z+F+10]=a.z,N[z+F+11]=q.itemSize===4?a.w:1)}}d={count:p,texture:D,size:new nt(A,E)},r.set(u,d),u.addEventListener("dispose",T)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let m=0;for(let g=0;g<f.length;g++)m+=f[g];const v=u.morphTargetsRelative?1:1-m;l.getUniforms().setValue(t,"morphTargetBaseInfluence",v),l.getUniforms().setValue(t,"morphTargetInfluences",f)}l.getUniforms().setValue(t,"morphTargetsTexture",d.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",d.size)}return{update:s}}function b3e(t,e,n,r){let a=new WeakMap;function s(l){const f=r.render.frame,c=l.geometry,p=e.get(l,c);if(a.get(p)!==f&&(e.update(p),a.set(p,f)),l.isInstancedMesh&&(l.hasEventListener("dispose",u)===!1&&l.addEventListener("dispose",u),a.get(l)!==f&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),a.set(l,f))),l.isSkinnedMesh){const d=l.skeleton;a.get(d)!==f&&(d.update(),a.set(d,f))}return p}function o(){a=new WeakMap}function u(l){const f=l.target;f.removeEventListener("dispose",u),n.remove(f.instanceMatrix),f.instanceColor!==null&&n.remove(f.instanceColor)}return{update:s,dispose:o}}class G4 extends Ur{constructor(e,n,r,a,s,o,u,l,f,c=Bd){if(c!==Bd&&c!==uh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Bd&&(r=Ic),r===void 0&&c===uh&&(r=oh),super(null,a,s,o,u,l,c,r,f),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=u!==void 0?u:Vi,this.minFilter=l!==void 0?l:Vi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const QK=new Ur,Z7=new G4(1,1),ZK=new wD,JK=new U4,KK=new Sx,J7=[],K7=[],eG=new Float32Array(16),tG=new Float32Array(9),nG=new Float32Array(4);function yv(t,e,n){const r=t[0];if(r<=0||r>0)return t;const a=e*n;let s=J7[a];if(s===void 0&&(s=new Float32Array(a),J7[a]=s),e!==0){r.toArray(s,0);for(let o=1,u=0;o!==e;++o)u+=n,t[o].toArray(s,u)}return s}function Ii(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Pi(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function _D(t,e){let n=K7[e];n===void 0&&(n=new Int32Array(e),K7[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function S3e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function w3e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ii(n,e))return;t.uniform2fv(this.addr,e),Pi(n,e)}}function _3e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ii(n,e))return;t.uniform3fv(this.addr,e),Pi(n,e)}}function M3e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ii(n,e))return;t.uniform4fv(this.addr,e),Pi(n,e)}}function E3e(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ii(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Pi(n,e)}else{if(Ii(n,r))return;nG.set(r),t.uniformMatrix2fv(this.addr,!1,nG),Pi(n,r)}}function T3e(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ii(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Pi(n,e)}else{if(Ii(n,r))return;tG.set(r),t.uniformMatrix3fv(this.addr,!1,tG),Pi(n,r)}}function A3e(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ii(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Pi(n,e)}else{if(Ii(n,r))return;eG.set(r),t.uniformMatrix4fv(this.addr,!1,eG),Pi(n,r)}}function N3e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function C3e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ii(n,e))return;t.uniform2iv(this.addr,e),Pi(n,e)}}function D3e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ii(n,e))return;t.uniform3iv(this.addr,e),Pi(n,e)}}function R3e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ii(n,e))return;t.uniform4iv(this.addr,e),Pi(n,e)}}function I3e(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function P3e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ii(n,e))return;t.uniform2uiv(this.addr,e),Pi(n,e)}}function O3e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ii(n,e))return;t.uniform3uiv(this.addr,e),Pi(n,e)}}function L3e(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ii(n,e))return;t.uniform4uiv(this.addr,e),Pi(n,e)}}function k3e(t,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(t.uniform1i(this.addr,a),r[0]=a);let s;this.type===t.SAMPLER_2D_SHADOW?(Z7.compareFunction=L4,s=Z7):s=QK,n.setTexture2D(e||s,a)}function U3e(t,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(t.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(e||JK,a)}function F3e(t,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(t.uniform1i(this.addr,a),r[0]=a),n.setTextureCube(e||KK,a)}function B3e(t,e,n){const r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(t.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(e||ZK,a)}function z3e(t){switch(t){case 5126:return S3e;case 35664:return w3e;case 35665:return _3e;case 35666:return M3e;case 35674:return E3e;case 35675:return T3e;case 35676:return A3e;case 5124:case 35670:return N3e;case 35667:case 35671:return C3e;case 35668:case 35672:return D3e;case 35669:case 35673:return R3e;case 5125:return I3e;case 36294:return P3e;case 36295:return O3e;case 36296:return L3e;case 35678:case 36198:case 36298:case 36306:case 35682:return k3e;case 35679:case 36299:case 36307:return U3e;case 35680:case 36300:case 36308:case 36293:return F3e;case 36289:case 36303:case 36311:case 36292:return B3e}}function q3e(t,e){t.uniform1fv(this.addr,e)}function G3e(t,e){const n=yv(e,this.size,2);t.uniform2fv(this.addr,n)}function H3e(t,e){const n=yv(e,this.size,3);t.uniform3fv(this.addr,n)}function V3e(t,e){const n=yv(e,this.size,4);t.uniform4fv(this.addr,n)}function W3e(t,e){const n=yv(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function $3e(t,e){const n=yv(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function j3e(t,e){const n=yv(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function X3e(t,e){t.uniform1iv(this.addr,e)}function Y3e(t,e){t.uniform2iv(this.addr,e)}function Q3e(t,e){t.uniform3iv(this.addr,e)}function Z3e(t,e){t.uniform4iv(this.addr,e)}function J3e(t,e){t.uniform1uiv(this.addr,e)}function K3e(t,e){t.uniform2uiv(this.addr,e)}function eDe(t,e){t.uniform3uiv(this.addr,e)}function tDe(t,e){t.uniform4uiv(this.addr,e)}function nDe(t,e,n){const r=this.cache,a=e.length,s=_D(n,a);Ii(r,s)||(t.uniform1iv(this.addr,s),Pi(r,s));for(let o=0;o!==a;++o)n.setTexture2D(e[o]||QK,s[o])}function rDe(t,e,n){const r=this.cache,a=e.length,s=_D(n,a);Ii(r,s)||(t.uniform1iv(this.addr,s),Pi(r,s));for(let o=0;o!==a;++o)n.setTexture3D(e[o]||JK,s[o])}function iDe(t,e,n){const r=this.cache,a=e.length,s=_D(n,a);Ii(r,s)||(t.uniform1iv(this.addr,s),Pi(r,s));for(let o=0;o!==a;++o)n.setTextureCube(e[o]||KK,s[o])}function aDe(t,e,n){const r=this.cache,a=e.length,s=_D(n,a);Ii(r,s)||(t.uniform1iv(this.addr,s),Pi(r,s));for(let o=0;o!==a;++o)n.setTexture2DArray(e[o]||ZK,s[o])}function sDe(t){switch(t){case 5126:return q3e;case 35664:return G3e;case 35665:return H3e;case 35666:return V3e;case 35674:return W3e;case 35675:return $3e;case 35676:return j3e;case 5124:case 35670:return X3e;case 35667:case 35671:return Y3e;case 35668:case 35672:return Q3e;case 35669:case 35673:return Z3e;case 5125:return J3e;case 36294:return K3e;case 36295:return eDe;case 36296:return tDe;case 35678:case 36198:case 36298:case 36306:case 35682:return nDe;case 35679:case 36299:case 36307:return rDe;case 35680:case 36300:case 36308:case 36293:return iDe;case 36289:case 36303:case 36311:case 36292:return aDe}}class oDe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=z3e(n.type)}}class uDe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=sDe(n.type)}}class lDe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const a=this.seq;for(let s=0,o=a.length;s!==o;++s){const u=a[s];u.setValue(e,n[u.id],r)}}}const eP=/(\w+)(\])?(\[|\.)?/g;function rG(t,e){t.seq.push(e),t.map[e.id]=e}function cDe(t,e,n){const r=t.name,a=r.length;for(eP.lastIndex=0;;){const s=eP.exec(r),o=eP.lastIndex;let u=s[1];const l=s[2]==="]",f=s[3];if(l&&(u=u|0),f===void 0||f==="["&&o+2===a){rG(n,f===void 0?new oDe(u,t,e):new uDe(u,t,e));break}else{let p=n.map[u];p===void 0&&(p=new lDe(u),rG(n,p)),n=p}}}class S2{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let a=0;a<r;++a){const s=e.getActiveUniform(n,a),o=e.getUniformLocation(n,s.name);cDe(s,o,this)}}setValue(e,n,r,a){const s=this.map[n];s!==void 0&&s.setValue(e,r,a)}setOptional(e,n,r){const a=n[r];a!==void 0&&this.setValue(e,r,a)}static upload(e,n,r,a){for(let s=0,o=n.length;s!==o;++s){const u=n[s],l=r[u.id];l.needsUpdate!==!1&&u.setValue(e,l.value,a)}}static seqWithValue(e,n){const r=[];for(let a=0,s=e.length;a!==s;++a){const o=e[a];o.id in n&&r.push(o)}return r}}function iG(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const fDe=37297;let pDe=0;function dDe(t,e){const n=t.split(`
`),r=[],a=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=a;o<s;o++){const u=o+1;r.push(`${u===e?">":" "} ${u}: ${n[o]}`)}return r.join(`
`)}function hDe(t){const e=jn.getPrimaries(jn.workingColorSpace),n=jn.getPrimaries(t);let r;switch(e===n?r="":e===i1&&n===r1?r="LinearDisplayP3ToLinearSRGB":e===r1&&n===i1&&(r="LinearSRGBToLinearDisplayP3"),t){case Zc:case xx:return[r,"LinearTransferOETF"];case Ro:case SD:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function aG(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),a=t.getShaderInfoLog(e).trim();if(r&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+a+`

`+dDe(t.getShaderSource(e),o)}else return a}function mDe(t,e){const n=hDe(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function vDe(t,e){let n;switch(e){case wK:n="Linear";break;case _K:n="Reinhard";break;case MK:n="Cineon";break;case w4:n="ACESFilmic";break;case TK:n="AgX";break;case AK:n="Neutral";break;case EK:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const mS=new ge;function gDe(){jn.getLuminanceCoefficients(mS);const t=mS.x.toFixed(4),e=mS.y.toFixed(4),n=mS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function yDe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ig).join(`
`)}function xDe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function bDe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let a=0;a<r;a++){const s=t.getActiveAttrib(e,a),o=s.name;let u=1;s.type===t.FLOAT_MAT2&&(u=2),s.type===t.FLOAT_MAT3&&(u=3),s.type===t.FLOAT_MAT4&&(u=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:u}}return n}function Ig(t){return t!==""}function sG(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function oG(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const SDe=/^[ \t]*#include +<([\w\d./]+)>/gm;function wL(t){return t.replace(SDe,_De)}const wDe=new Map;function _De(t,e){let n=ln[e];if(n===void 0){const r=wDe.get(e);if(r!==void 0)n=ln[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return wL(n)}const MDe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function uG(t){return t.replace(MDe,EDe)}function EDe(t,e,n,r){let a="";for(let s=parseInt(e);s<parseInt(n);s++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return a}function lG(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function TDe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===pD?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===ey?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===cu&&(e="SHADOWMAP_TYPE_VSM"),e}function ADe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Rc:case fp:e="ENVMAP_TYPE_CUBE";break;case vv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function NDe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case fp:e="ENVMAP_MODE_REFRACTION";break}return e}function CDe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case gx:e="ENVMAP_BLENDING_MULTIPLY";break;case bK:e="ENVMAP_BLENDING_MIX";break;case SK:e="ENVMAP_BLENDING_ADD";break}return e}function DDe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function RDe(t,e,n,r){const a=t.getContext(),s=n.defines;let o=n.vertexShader,u=n.fragmentShader;const l=TDe(n),f=ADe(n),c=NDe(n),p=CDe(n),d=DDe(n),h=yDe(n),m=xDe(s),v=a.createProgram();let g,y,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Ig).join(`
`),g.length>0&&(g+=`
`),y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Ig).join(`
`),y.length>0&&(y+=`
`)):(g=[lG(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ig).join(`
`),y=[lG(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+c:"",n.envMap?"#define "+p:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ol?"#define TONE_MAPPING":"",n.toneMapping!==ol?ln.tonemapping_pars_fragment:"",n.toneMapping!==ol?vDe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ln.colorspace_pars_fragment,mDe("linearToOutputTexel",n.outputColorSpace),gDe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Ig).join(`
`)),o=wL(o),o=sG(o,n),o=oG(o,n),u=wL(u),u=sG(u,n),u=oG(u,n),o=uG(o),u=uG(u),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,g=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,y=["#define varying in",n.glslVersion===bL?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===bL?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const x=_+g+o,M=_+y+u,A=iG(a,a.VERTEX_SHADER,x),E=iG(a,a.FRAGMENT_SHADER,M);a.attachShader(v,A),a.attachShader(v,E),n.index0AttributeName!==void 0?a.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v);function N(P){if(t.debug.checkShaderErrors){const I=a.getProgramInfoLog(v).trim(),U=a.getShaderInfoLog(A).trim(),q=a.getShaderInfoLog(E).trim();let z=!0,G=!0;if(a.getProgramParameter(v,a.LINK_STATUS)===!1)if(z=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(a,v,A,E);else{const F=aG(a,A,"vertex"),k=aG(a,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(v,a.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+I+`
`+F+`
`+k)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(U===""||q==="")&&(G=!1);G&&(P.diagnostics={runnable:z,programLog:I,vertexShader:{log:U,prefix:g},fragmentShader:{log:q,prefix:y}})}a.deleteShader(A),a.deleteShader(E),D=new S2(a,v),C=bDe(a,v)}let D;this.getUniforms=function(){return D===void 0&&N(this),D};let C;this.getAttributes=function(){return C===void 0&&N(this),C};let T=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=a.getProgramParameter(v,fDe)),T},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=pDe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=A,this.fragmentShader=E,this}let IDe=0;class PDe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,a=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(a)===!1&&(o.add(a),a.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new ODe(e),n.set(e,r)),r}}class ODe{constructor(e){this.id=IDe++,this.code=e,this.usedTimes=0}}function LDe(t,e,n,r,a,s,o){const u=new qd,l=new PDe,f=new Set,c=[],p=a.logarithmicDepthBuffer,d=a.reverseDepthBuffer,h=a.vertexTextures;let m=a.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(T){return f.add(T),T===0?"uv":`uv${T}`}function y(T,P,I,U,q){const z=U.fog,G=q.geometry,F=T.isMeshStandardMaterial?U.environment:null,k=(T.isMeshStandardMaterial?n:e).get(T.envMap||F),O=k&&k.mapping===vv?k.image.height:null,W=v[T.type];T.precision!==null&&(m=a.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));const X=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,ee=X!==void 0?X.length:0;let J=0;G.morphAttributes.position!==void 0&&(J=1),G.morphAttributes.normal!==void 0&&(J=2),G.morphAttributes.color!==void 0&&(J=3);let Y,ie,K,re;if(W){const Nt=du[W];Y=Nt.vertexShader,ie=Nt.fragmentShader}else Y=T.vertexShader,ie=T.fragmentShader,l.update(T),K=l.getVertexShaderID(T),re=l.getFragmentShaderID(T);const oe=t.getRenderTarget(),ce=q.isInstancedMesh===!0,me=q.isBatchedMesh===!0,Se=!!T.map,le=!!T.matcap,Q=!!k,Ee=!!T.aoMap,ne=!!T.lightMap,se=!!T.bumpMap,xe=!!T.normalMap,ve=!!T.displacementMap,te=!!T.emissiveMap,$=!!T.metalnessMap,B=!!T.roughnessMap,ae=T.anisotropy>0,ue=T.clearcoat>0,_e=T.dispersion>0,be=T.iridescence>0,Pe=T.sheen>0,Te=T.transmission>0,Ie=ae&&!!T.anisotropyMap,Oe=ue&&!!T.clearcoatMap,Be=ue&&!!T.clearcoatNormalMap,He=ue&&!!T.clearcoatRoughnessMap,Qe=be&&!!T.iridescenceMap,et=be&&!!T.iridescenceThicknessMap,Xe=Pe&&!!T.sheenColorMap,je=Pe&&!!T.sheenRoughnessMap,we=!!T.specularMap,V=!!T.specularColorMap,j=!!T.specularIntensityMap,pe=Te&&!!T.transmissionMap,he=Te&&!!T.thicknessMap,Ae=!!T.gradientMap,Fe=!!T.alphaMap,qe=T.alphaTest>0,Ze=!!T.alphaHash,it=!!T.extensions;let ot=ol;T.toneMapped&&(oe===null||oe.isXRRenderTarget===!0)&&(ot=t.toneMapping);const tt={shaderID:W,shaderType:T.type,shaderName:T.name,vertexShader:Y,fragmentShader:ie,defines:T.defines,customVertexShaderID:K,customFragmentShaderID:re,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:m,batching:me,batchingColor:me&&q._colorsTexture!==null,instancing:ce,instancingColor:ce&&q.instanceColor!==null,instancingMorph:ce&&q.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:oe===null?t.outputColorSpace:oe.isXRRenderTarget===!0?oe.texture.colorSpace:Zc,alphaToCoverage:!!T.alphaToCoverage,map:Se,matcap:le,envMap:Q,envMapMode:Q&&k.mapping,envMapCubeUVHeight:O,aoMap:Ee,lightMap:ne,bumpMap:se,normalMap:xe,displacementMap:h&&ve,emissiveMap:te,normalMapObjectSpace:xe&&T.normalMapType===PK,normalMapTangentSpace:xe&&T.normalMapType===kp,metalnessMap:$,roughnessMap:B,anisotropy:ae,anisotropyMap:Ie,clearcoat:ue,clearcoatMap:Oe,clearcoatNormalMap:Be,clearcoatRoughnessMap:He,dispersion:_e,iridescence:be,iridescenceMap:Qe,iridescenceThicknessMap:et,sheen:Pe,sheenColorMap:Xe,sheenRoughnessMap:je,specularMap:we,specularColorMap:V,specularIntensityMap:j,transmission:Te,transmissionMap:pe,thicknessMap:he,gradientMap:Ae,opaque:T.transparent===!1&&T.blending===Fd&&T.alphaToCoverage===!1,alphaMap:Fe,alphaTest:qe,alphaHash:Ze,combine:T.combine,mapUv:Se&&g(T.map.channel),aoMapUv:Ee&&g(T.aoMap.channel),lightMapUv:ne&&g(T.lightMap.channel),bumpMapUv:se&&g(T.bumpMap.channel),normalMapUv:xe&&g(T.normalMap.channel),displacementMapUv:ve&&g(T.displacementMap.channel),emissiveMapUv:te&&g(T.emissiveMap.channel),metalnessMapUv:$&&g(T.metalnessMap.channel),roughnessMapUv:B&&g(T.roughnessMap.channel),anisotropyMapUv:Ie&&g(T.anisotropyMap.channel),clearcoatMapUv:Oe&&g(T.clearcoatMap.channel),clearcoatNormalMapUv:Be&&g(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:He&&g(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Qe&&g(T.iridescenceMap.channel),iridescenceThicknessMapUv:et&&g(T.iridescenceThicknessMap.channel),sheenColorMapUv:Xe&&g(T.sheenColorMap.channel),sheenRoughnessMapUv:je&&g(T.sheenRoughnessMap.channel),specularMapUv:we&&g(T.specularMap.channel),specularColorMapUv:V&&g(T.specularColorMap.channel),specularIntensityMapUv:j&&g(T.specularIntensityMap.channel),transmissionMapUv:pe&&g(T.transmissionMap.channel),thicknessMapUv:he&&g(T.thicknessMap.channel),alphaMapUv:Fe&&g(T.alphaMap.channel),vertexTangents:!!G.attributes.tangent&&(xe||ae),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!G.attributes.uv&&(Se||Fe),fog:!!z,useFog:T.fog===!0,fogExp2:!!z&&z.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:d,skinning:q.isSkinnedMesh===!0,morphTargets:G.morphAttributes.position!==void 0,morphNormals:G.morphAttributes.normal!==void 0,morphColors:G.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:J,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:t.shadowMap.enabled&&I.length>0,shadowMapType:t.shadowMap.type,toneMapping:ot,decodeVideoTexture:Se&&T.map.isVideoTexture===!0&&jn.getTransfer(T.map.colorSpace)===wr,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===ko,flipSided:T.side===Pa,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:it&&T.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(it&&T.extensions.multiDraw===!0||me)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return tt.vertexUv1s=f.has(1),tt.vertexUv2s=f.has(2),tt.vertexUv3s=f.has(3),f.clear(),tt}function _(T){const P=[];if(T.shaderID?P.push(T.shaderID):(P.push(T.customVertexShaderID),P.push(T.customFragmentShaderID)),T.defines!==void 0)for(const I in T.defines)P.push(I),P.push(T.defines[I]);return T.isRawShaderMaterial===!1&&(x(P,T),M(P,T),P.push(t.outputColorSpace)),P.push(T.customProgramCacheKey),P.join()}function x(T,P){T.push(P.precision),T.push(P.outputColorSpace),T.push(P.envMapMode),T.push(P.envMapCubeUVHeight),T.push(P.mapUv),T.push(P.alphaMapUv),T.push(P.lightMapUv),T.push(P.aoMapUv),T.push(P.bumpMapUv),T.push(P.normalMapUv),T.push(P.displacementMapUv),T.push(P.emissiveMapUv),T.push(P.metalnessMapUv),T.push(P.roughnessMapUv),T.push(P.anisotropyMapUv),T.push(P.clearcoatMapUv),T.push(P.clearcoatNormalMapUv),T.push(P.clearcoatRoughnessMapUv),T.push(P.iridescenceMapUv),T.push(P.iridescenceThicknessMapUv),T.push(P.sheenColorMapUv),T.push(P.sheenRoughnessMapUv),T.push(P.specularMapUv),T.push(P.specularColorMapUv),T.push(P.specularIntensityMapUv),T.push(P.transmissionMapUv),T.push(P.thicknessMapUv),T.push(P.combine),T.push(P.fogExp2),T.push(P.sizeAttenuation),T.push(P.morphTargetsCount),T.push(P.morphAttributeCount),T.push(P.numDirLights),T.push(P.numPointLights),T.push(P.numSpotLights),T.push(P.numSpotLightMaps),T.push(P.numHemiLights),T.push(P.numRectAreaLights),T.push(P.numDirLightShadows),T.push(P.numPointLightShadows),T.push(P.numSpotLightShadows),T.push(P.numSpotLightShadowsWithMaps),T.push(P.numLightProbes),T.push(P.shadowMapType),T.push(P.toneMapping),T.push(P.numClippingPlanes),T.push(P.numClipIntersection),T.push(P.depthPacking)}function M(T,P){u.disableAll(),P.supportsVertexTextures&&u.enable(0),P.instancing&&u.enable(1),P.instancingColor&&u.enable(2),P.instancingMorph&&u.enable(3),P.matcap&&u.enable(4),P.envMap&&u.enable(5),P.normalMapObjectSpace&&u.enable(6),P.normalMapTangentSpace&&u.enable(7),P.clearcoat&&u.enable(8),P.iridescence&&u.enable(9),P.alphaTest&&u.enable(10),P.vertexColors&&u.enable(11),P.vertexAlphas&&u.enable(12),P.vertexUv1s&&u.enable(13),P.vertexUv2s&&u.enable(14),P.vertexUv3s&&u.enable(15),P.vertexTangents&&u.enable(16),P.anisotropy&&u.enable(17),P.alphaHash&&u.enable(18),P.batching&&u.enable(19),P.dispersion&&u.enable(20),P.batchingColor&&u.enable(21),T.push(u.mask),u.disableAll(),P.fog&&u.enable(0),P.useFog&&u.enable(1),P.flatShading&&u.enable(2),P.logarithmicDepthBuffer&&u.enable(3),P.reverseDepthBuffer&&u.enable(4),P.skinning&&u.enable(5),P.morphTargets&&u.enable(6),P.morphNormals&&u.enable(7),P.morphColors&&u.enable(8),P.premultipliedAlpha&&u.enable(9),P.shadowMapEnabled&&u.enable(10),P.doubleSided&&u.enable(11),P.flipSided&&u.enable(12),P.useDepthPacking&&u.enable(13),P.dithering&&u.enable(14),P.transmission&&u.enable(15),P.sheen&&u.enable(16),P.opaque&&u.enable(17),P.pointsUvs&&u.enable(18),P.decodeVideoTexture&&u.enable(19),P.alphaToCoverage&&u.enable(20),T.push(u.mask)}function A(T){const P=v[T.type];let I;if(P){const U=du[P];I=z4.clone(U.uniforms)}else I=T.uniforms;return I}function E(T,P){let I;for(let U=0,q=c.length;U<q;U++){const z=c[U];if(z.cacheKey===P){I=z,++I.usedTimes;break}}return I===void 0&&(I=new RDe(t,P,T,s),c.push(I)),I}function N(T){if(--T.usedTimes===0){const P=c.indexOf(T);c[P]=c[c.length-1],c.pop(),T.destroy()}}function D(T){l.remove(T)}function C(){l.dispose()}return{getParameters:y,getProgramCacheKey:_,getUniforms:A,acquireProgram:E,releaseProgram:N,releaseShaderCache:D,programs:c,dispose:C}}function kDe(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let u=t.get(o);return u===void 0&&(u={},t.set(o,u)),u}function r(o){t.delete(o)}function a(o,u,l){t.get(o)[u]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:a,dispose:s}}function UDe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function cG(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function fG(){const t=[];let e=0;const n=[],r=[],a=[];function s(){e=0,n.length=0,r.length=0,a.length=0}function o(p,d,h,m,v,g){let y=t[e];return y===void 0?(y={id:p.id,object:p,geometry:d,material:h,groupOrder:m,renderOrder:p.renderOrder,z:v,group:g},t[e]=y):(y.id=p.id,y.object=p,y.geometry=d,y.material=h,y.groupOrder=m,y.renderOrder=p.renderOrder,y.z=v,y.group=g),e++,y}function u(p,d,h,m,v,g){const y=o(p,d,h,m,v,g);h.transmission>0?r.push(y):h.transparent===!0?a.push(y):n.push(y)}function l(p,d,h,m,v,g){const y=o(p,d,h,m,v,g);h.transmission>0?r.unshift(y):h.transparent===!0?a.unshift(y):n.unshift(y)}function f(p,d){n.length>1&&n.sort(p||UDe),r.length>1&&r.sort(d||cG),a.length>1&&a.sort(d||cG)}function c(){for(let p=e,d=t.length;p<d;p++){const h=t[p];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:n,transmissive:r,transparent:a,init:s,push:u,unshift:l,finish:c,sort:f}}function FDe(){let t=new WeakMap;function e(r,a){const s=t.get(r);let o;return s===void 0?(o=new fG,t.set(r,[o])):a>=s.length?(o=new fG,s.push(o)):o=s[a],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function BDe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ge,color:new gt};break;case"SpotLight":n={position:new ge,direction:new ge,color:new gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ge,color:new gt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ge,skyColor:new gt,groundColor:new gt};break;case"RectAreaLight":n={color:new gt,position:new ge,halfWidth:new ge,halfHeight:new ge};break}return t[e.id]=n,n}}}function zDe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let qDe=0;function GDe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function HDe(t){const e=new BDe,n=zDe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)r.probe.push(new ge);const a=new ge,s=new Ht,o=new Ht;function u(f){let c=0,p=0,d=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let h=0,m=0,v=0,g=0,y=0,_=0,x=0,M=0,A=0,E=0,N=0;f.sort(GDe);for(let C=0,T=f.length;C<T;C++){const P=f[C],I=P.color,U=P.intensity,q=P.distance,z=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)c+=I.r*U,p+=I.g*U,d+=I.b*U;else if(P.isLightProbe){for(let G=0;G<9;G++)r.probe[G].addScaledVector(P.sh.coefficients[G],U);N++}else if(P.isDirectionalLight){const G=e.get(P);if(G.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const F=P.shadow,k=n.get(P);k.shadowIntensity=F.intensity,k.shadowBias=F.bias,k.shadowNormalBias=F.normalBias,k.shadowRadius=F.radius,k.shadowMapSize=F.mapSize,r.directionalShadow[h]=k,r.directionalShadowMap[h]=z,r.directionalShadowMatrix[h]=P.shadow.matrix,_++}r.directional[h]=G,h++}else if(P.isSpotLight){const G=e.get(P);G.position.setFromMatrixPosition(P.matrixWorld),G.color.copy(I).multiplyScalar(U),G.distance=q,G.coneCos=Math.cos(P.angle),G.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),G.decay=P.decay,r.spot[v]=G;const F=P.shadow;if(P.map&&(r.spotLightMap[A]=P.map,A++,F.updateMatrices(P),P.castShadow&&E++),r.spotLightMatrix[v]=F.matrix,P.castShadow){const k=n.get(P);k.shadowIntensity=F.intensity,k.shadowBias=F.bias,k.shadowNormalBias=F.normalBias,k.shadowRadius=F.radius,k.shadowMapSize=F.mapSize,r.spotShadow[v]=k,r.spotShadowMap[v]=z,M++}v++}else if(P.isRectAreaLight){const G=e.get(P);G.color.copy(I).multiplyScalar(U),G.halfWidth.set(P.width*.5,0,0),G.halfHeight.set(0,P.height*.5,0),r.rectArea[g]=G,g++}else if(P.isPointLight){const G=e.get(P);if(G.color.copy(P.color).multiplyScalar(P.intensity),G.distance=P.distance,G.decay=P.decay,P.castShadow){const F=P.shadow,k=n.get(P);k.shadowIntensity=F.intensity,k.shadowBias=F.bias,k.shadowNormalBias=F.normalBias,k.shadowRadius=F.radius,k.shadowMapSize=F.mapSize,k.shadowCameraNear=F.camera.near,k.shadowCameraFar=F.camera.far,r.pointShadow[m]=k,r.pointShadowMap[m]=z,r.pointShadowMatrix[m]=P.shadow.matrix,x++}r.point[m]=G,m++}else if(P.isHemisphereLight){const G=e.get(P);G.skyColor.copy(P.color).multiplyScalar(U),G.groundColor.copy(P.groundColor).multiplyScalar(U),r.hemi[y]=G,y++}}g>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=dt.LTC_FLOAT_1,r.rectAreaLTC2=dt.LTC_FLOAT_2):(r.rectAreaLTC1=dt.LTC_HALF_1,r.rectAreaLTC2=dt.LTC_HALF_2)),r.ambient[0]=c,r.ambient[1]=p,r.ambient[2]=d;const D=r.hash;(D.directionalLength!==h||D.pointLength!==m||D.spotLength!==v||D.rectAreaLength!==g||D.hemiLength!==y||D.numDirectionalShadows!==_||D.numPointShadows!==x||D.numSpotShadows!==M||D.numSpotMaps!==A||D.numLightProbes!==N)&&(r.directional.length=h,r.spot.length=v,r.rectArea.length=g,r.point.length=m,r.hemi.length=y,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=M,r.spotShadowMap.length=M,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=x,r.spotLightMatrix.length=M+A-E,r.spotLightMap.length=A,r.numSpotLightShadowsWithMaps=E,r.numLightProbes=N,D.directionalLength=h,D.pointLength=m,D.spotLength=v,D.rectAreaLength=g,D.hemiLength=y,D.numDirectionalShadows=_,D.numPointShadows=x,D.numSpotShadows=M,D.numSpotMaps=A,D.numLightProbes=N,r.version=qDe++)}function l(f,c){let p=0,d=0,h=0,m=0,v=0;const g=c.matrixWorldInverse;for(let y=0,_=f.length;y<_;y++){const x=f[y];if(x.isDirectionalLight){const M=r.directional[p];M.direction.setFromMatrixPosition(x.matrixWorld),a.setFromMatrixPosition(x.target.matrixWorld),M.direction.sub(a),M.direction.transformDirection(g),p++}else if(x.isSpotLight){const M=r.spot[h];M.position.setFromMatrixPosition(x.matrixWorld),M.position.applyMatrix4(g),M.direction.setFromMatrixPosition(x.matrixWorld),a.setFromMatrixPosition(x.target.matrixWorld),M.direction.sub(a),M.direction.transformDirection(g),h++}else if(x.isRectAreaLight){const M=r.rectArea[m];M.position.setFromMatrixPosition(x.matrixWorld),M.position.applyMatrix4(g),o.identity(),s.copy(x.matrixWorld),s.premultiply(g),o.extractRotation(s),M.halfWidth.set(x.width*.5,0,0),M.halfHeight.set(0,x.height*.5,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),m++}else if(x.isPointLight){const M=r.point[d];M.position.setFromMatrixPosition(x.matrixWorld),M.position.applyMatrix4(g),d++}else if(x.isHemisphereLight){const M=r.hemi[v];M.direction.setFromMatrixPosition(x.matrixWorld),M.direction.transformDirection(g),v++}}}return{setup:u,setupView:l,state:r}}function pG(t){const e=new HDe(t),n=[],r=[];function a(c){f.camera=c,n.length=0,r.length=0}function s(c){n.push(c)}function o(c){r.push(c)}function u(){e.setup(n)}function l(c){e.setupView(n,c)}const f={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:f,setupLights:u,setupLightsView:l,pushLight:s,pushShadow:o}}function VDe(t){let e=new WeakMap;function n(a,s=0){const o=e.get(a);let u;return o===void 0?(u=new pG(t),e.set(a,[u])):s>=o.length?(u=new pG(t),o.push(u)):u=o[s],u}function r(){e=new WeakMap}return{get:n,dispose:r}}class MD extends va{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=IK,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ED extends va{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const WDe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,$De=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jDe(t,e,n){let r=new wx;const a=new nt,s=new nt,o=new On,u=new MD({depthPacking:O4}),l=new ED,f={},c=n.maxTextureSize,p={[Sl]:Pa,[Pa]:Sl,[ko]:ko},d=new Tu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new nt},radius:{value:4}},vertexShader:WDe,fragmentShader:$De}),h=d.clone();h.defines.HORIZONTAL_PASS=1;const m=new fn;m.setAttribute("position",new lr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Wr(m,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pD;let y=this.type;this.render=function(E,N,D){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||E.length===0)return;const C=t.getRenderTarget(),T=t.getActiveCubeFace(),P=t.getActiveMipmapLevel(),I=t.state;I.setBlending(fc),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const U=y!==cu&&this.type===cu,q=y===cu&&this.type!==cu;for(let z=0,G=E.length;z<G;z++){const F=E[z],k=F.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;a.copy(k.mapSize);const O=k.getFrameExtents();if(a.multiply(O),s.copy(k.mapSize),(a.x>c||a.y>c)&&(a.x>c&&(s.x=Math.floor(c/O.x),a.x=s.x*O.x,k.mapSize.x=s.x),a.y>c&&(s.y=Math.floor(c/O.y),a.y=s.y*O.y,k.mapSize.y=s.y)),k.map===null||U===!0||q===!0){const X=this.type!==cu?{minFilter:Vi,magFilter:Vi}:{};k.map!==null&&k.map.dispose(),k.map=new Eu(a.x,a.y,X),k.map.texture.name=F.name+".shadowMap",k.camera.updateProjectionMatrix()}t.setRenderTarget(k.map),t.clear();const W=k.getViewportCount();for(let X=0;X<W;X++){const ee=k.getViewport(X);o.set(s.x*ee.x,s.y*ee.y,s.x*ee.z,s.y*ee.w),I.viewport(o),k.updateMatrices(F,X),r=k.getFrustum(),M(N,D,k.camera,F,this.type)}k.isPointLightShadow!==!0&&this.type===cu&&_(k,D),k.needsUpdate=!1}y=this.type,g.needsUpdate=!1,t.setRenderTarget(C,T,P)};function _(E,N){const D=e.update(v);d.defines.VSM_SAMPLES!==E.blurSamples&&(d.defines.VSM_SAMPLES=E.blurSamples,h.defines.VSM_SAMPLES=E.blurSamples,d.needsUpdate=!0,h.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new Eu(a.x,a.y)),d.uniforms.shadow_pass.value=E.map.texture,d.uniforms.resolution.value=E.mapSize,d.uniforms.radius.value=E.radius,t.setRenderTarget(E.mapPass),t.clear(),t.renderBufferDirect(N,null,D,d,v,null),h.uniforms.shadow_pass.value=E.mapPass.texture,h.uniforms.resolution.value=E.mapSize,h.uniforms.radius.value=E.radius,t.setRenderTarget(E.map),t.clear(),t.renderBufferDirect(N,null,D,h,v,null)}function x(E,N,D,C){let T=null;const P=D.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(P!==void 0)T=P;else if(T=D.isPointLight===!0?l:u,t.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const I=T.uuid,U=N.uuid;let q=f[I];q===void 0&&(q={},f[I]=q);let z=q[U];z===void 0&&(z=T.clone(),q[U]=z,N.addEventListener("dispose",A)),T=z}if(T.visible=N.visible,T.wireframe=N.wireframe,C===cu?T.side=N.shadowSide!==null?N.shadowSide:N.side:T.side=N.shadowSide!==null?N.shadowSide:p[N.side],T.alphaMap=N.alphaMap,T.alphaTest=N.alphaTest,T.map=N.map,T.clipShadows=N.clipShadows,T.clippingPlanes=N.clippingPlanes,T.clipIntersection=N.clipIntersection,T.displacementMap=N.displacementMap,T.displacementScale=N.displacementScale,T.displacementBias=N.displacementBias,T.wireframeLinewidth=N.wireframeLinewidth,T.linewidth=N.linewidth,D.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const I=t.properties.get(T);I.light=D}return T}function M(E,N,D,C,T){if(E.visible===!1)return;if(E.layers.test(N.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&T===cu)&&(!E.frustumCulled||r.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,E.matrixWorld);const U=e.update(E),q=E.material;if(Array.isArray(q)){const z=U.groups;for(let G=0,F=z.length;G<F;G++){const k=z[G],O=q[k.materialIndex];if(O&&O.visible){const W=x(E,O,C,T);E.onBeforeShadow(t,E,N,D,U,W,k),t.renderBufferDirect(D,null,U,W,E,k),E.onAfterShadow(t,E,N,D,U,W,k)}}}else if(q.visible){const z=x(E,q,C,T);E.onBeforeShadow(t,E,N,D,U,z,null),t.renderBufferDirect(D,null,U,z,E,null),E.onAfterShadow(t,E,N,D,U,z,null)}}const I=E.children;for(let U=0,q=I.length;U<q;U++)M(I[U],N,D,C,T)}function A(E){E.target.removeEventListener("dispose",A);for(const D in f){const C=f[D],T=E.target.uuid;T in C&&(C[T].dispose(),delete C[T])}}}const XDe={[kw]:Uw,[Fw]:qw,[Bw]:Gw,[sh]:zw,[Uw]:kw,[qw]:Fw,[Gw]:Bw,[zw]:sh};function YDe(t){function e(){let j=!1;const pe=new On;let he=null;const Ae=new On(0,0,0,0);return{setMask:function(Fe){he!==Fe&&!j&&(t.colorMask(Fe,Fe,Fe,Fe),he=Fe)},setLocked:function(Fe){j=Fe},setClear:function(Fe,qe,Ze,it,ot){ot===!0&&(Fe*=it,qe*=it,Ze*=it),pe.set(Fe,qe,Ze,it),Ae.equals(pe)===!1&&(t.clearColor(Fe,qe,Ze,it),Ae.copy(pe))},reset:function(){j=!1,he=null,Ae.set(-1,0,0,0)}}}function n(){let j=!1,pe=!1,he=null,Ae=null,Fe=null;return{setReversed:function(qe){pe=qe},setTest:function(qe){qe?K(t.DEPTH_TEST):re(t.DEPTH_TEST)},setMask:function(qe){he!==qe&&!j&&(t.depthMask(qe),he=qe)},setFunc:function(qe){if(pe&&(qe=XDe[qe]),Ae!==qe){switch(qe){case kw:t.depthFunc(t.NEVER);break;case Uw:t.depthFunc(t.ALWAYS);break;case Fw:t.depthFunc(t.LESS);break;case sh:t.depthFunc(t.LEQUAL);break;case Bw:t.depthFunc(t.EQUAL);break;case zw:t.depthFunc(t.GEQUAL);break;case qw:t.depthFunc(t.GREATER);break;case Gw:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ae=qe}},setLocked:function(qe){j=qe},setClear:function(qe){Fe!==qe&&(t.clearDepth(qe),Fe=qe)},reset:function(){j=!1,he=null,Ae=null,Fe=null}}}function r(){let j=!1,pe=null,he=null,Ae=null,Fe=null,qe=null,Ze=null,it=null,ot=null;return{setTest:function(tt){j||(tt?K(t.STENCIL_TEST):re(t.STENCIL_TEST))},setMask:function(tt){pe!==tt&&!j&&(t.stencilMask(tt),pe=tt)},setFunc:function(tt,Nt,Xt){(he!==tt||Ae!==Nt||Fe!==Xt)&&(t.stencilFunc(tt,Nt,Xt),he=tt,Ae=Nt,Fe=Xt)},setOp:function(tt,Nt,Xt){(qe!==tt||Ze!==Nt||it!==Xt)&&(t.stencilOp(tt,Nt,Xt),qe=tt,Ze=Nt,it=Xt)},setLocked:function(tt){j=tt},setClear:function(tt){ot!==tt&&(t.clearStencil(tt),ot=tt)},reset:function(){j=!1,pe=null,he=null,Ae=null,Fe=null,qe=null,Ze=null,it=null,ot=null}}}const a=new e,s=new n,o=new r,u=new WeakMap,l=new WeakMap;let f={},c={},p=new WeakMap,d=[],h=null,m=!1,v=null,g=null,y=null,_=null,x=null,M=null,A=null,E=new gt(0,0,0),N=0,D=!1,C=null,T=null,P=null,I=null,U=null;const q=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,G=0;const F=t.getParameter(t.VERSION);F.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(F)[1]),z=G>=1):F.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),z=G>=2);let k=null,O={};const W=t.getParameter(t.SCISSOR_BOX),X=t.getParameter(t.VIEWPORT),ee=new On().fromArray(W),J=new On().fromArray(X);function Y(j,pe,he,Ae){const Fe=new Uint8Array(4),qe=t.createTexture();t.bindTexture(j,qe),t.texParameteri(j,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(j,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ze=0;Ze<he;Ze++)j===t.TEXTURE_3D||j===t.TEXTURE_2D_ARRAY?t.texImage3D(pe,0,t.RGBA,1,1,Ae,0,t.RGBA,t.UNSIGNED_BYTE,Fe):t.texImage2D(pe+Ze,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Fe);return qe}const ie={};ie[t.TEXTURE_2D]=Y(t.TEXTURE_2D,t.TEXTURE_2D,1),ie[t.TEXTURE_CUBE_MAP]=Y(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ie[t.TEXTURE_2D_ARRAY]=Y(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ie[t.TEXTURE_3D]=Y(t.TEXTURE_3D,t.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),K(t.DEPTH_TEST),s.setFunc(sh),ne(!1),se(hL),K(t.CULL_FACE),Q(fc);function K(j){f[j]!==!0&&(t.enable(j),f[j]=!0)}function re(j){f[j]!==!1&&(t.disable(j),f[j]=!1)}function oe(j,pe){return c[j]!==pe?(t.bindFramebuffer(j,pe),c[j]=pe,j===t.DRAW_FRAMEBUFFER&&(c[t.FRAMEBUFFER]=pe),j===t.FRAMEBUFFER&&(c[t.DRAW_FRAMEBUFFER]=pe),!0):!1}function ce(j,pe){let he=d,Ae=!1;if(j){he=p.get(pe),he===void 0&&(he=[],p.set(pe,he));const Fe=j.textures;if(he.length!==Fe.length||he[0]!==t.COLOR_ATTACHMENT0){for(let qe=0,Ze=Fe.length;qe<Ze;qe++)he[qe]=t.COLOR_ATTACHMENT0+qe;he.length=Fe.length,Ae=!0}}else he[0]!==t.BACK&&(he[0]=t.BACK,Ae=!0);Ae&&t.drawBuffers(he)}function me(j){return h!==j?(t.useProgram(j),h=j,!0):!1}const Se={[Of]:t.FUNC_ADD,[rK]:t.FUNC_SUBTRACT,[iK]:t.FUNC_REVERSE_SUBTRACT};Se[aK]=t.MIN,Se[sK]=t.MAX;const le={[oK]:t.ZERO,[uK]:t.ONE,[lK]:t.SRC_COLOR,[Ow]:t.SRC_ALPHA,[mK]:t.SRC_ALPHA_SATURATE,[dK]:t.DST_COLOR,[fK]:t.DST_ALPHA,[cK]:t.ONE_MINUS_SRC_COLOR,[Lw]:t.ONE_MINUS_SRC_ALPHA,[hK]:t.ONE_MINUS_DST_COLOR,[pK]:t.ONE_MINUS_DST_ALPHA,[vK]:t.CONSTANT_COLOR,[gK]:t.ONE_MINUS_CONSTANT_COLOR,[yK]:t.CONSTANT_ALPHA,[xK]:t.ONE_MINUS_CONSTANT_ALPHA};function Q(j,pe,he,Ae,Fe,qe,Ze,it,ot,tt){if(j===fc){m===!0&&(re(t.BLEND),m=!1);return}if(m===!1&&(K(t.BLEND),m=!0),j!==nK){if(j!==v||tt!==D){if((g!==Of||x!==Of)&&(t.blendEquation(t.FUNC_ADD),g=Of,x=Of),tt)switch(j){case Fd:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case mL:t.blendFunc(t.ONE,t.ONE);break;case vL:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case gL:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case Fd:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case mL:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case vL:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case gL:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}y=null,_=null,M=null,A=null,E.set(0,0,0),N=0,v=j,D=tt}return}Fe=Fe||pe,qe=qe||he,Ze=Ze||Ae,(pe!==g||Fe!==x)&&(t.blendEquationSeparate(Se[pe],Se[Fe]),g=pe,x=Fe),(he!==y||Ae!==_||qe!==M||Ze!==A)&&(t.blendFuncSeparate(le[he],le[Ae],le[qe],le[Ze]),y=he,_=Ae,M=qe,A=Ze),(it.equals(E)===!1||ot!==N)&&(t.blendColor(it.r,it.g,it.b,ot),E.copy(it),N=ot),v=j,D=!1}function Ee(j,pe){j.side===ko?re(t.CULL_FACE):K(t.CULL_FACE);let he=j.side===Pa;pe&&(he=!he),ne(he),j.blending===Fd&&j.transparent===!1?Q(fc):Q(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),s.setFunc(j.depthFunc),s.setTest(j.depthTest),s.setMask(j.depthWrite),a.setMask(j.colorWrite);const Ae=j.stencilWrite;o.setTest(Ae),Ae&&(o.setMask(j.stencilWriteMask),o.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),o.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),ve(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?K(t.SAMPLE_ALPHA_TO_COVERAGE):re(t.SAMPLE_ALPHA_TO_COVERAGE)}function ne(j){C!==j&&(j?t.frontFace(t.CW):t.frontFace(t.CCW),C=j)}function se(j){j!==KJ?(K(t.CULL_FACE),j!==T&&(j===hL?t.cullFace(t.BACK):j===eK?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):re(t.CULL_FACE),T=j}function xe(j){j!==P&&(z&&t.lineWidth(j),P=j)}function ve(j,pe,he){j?(K(t.POLYGON_OFFSET_FILL),(I!==pe||U!==he)&&(t.polygonOffset(pe,he),I=pe,U=he)):re(t.POLYGON_OFFSET_FILL)}function te(j){j?K(t.SCISSOR_TEST):re(t.SCISSOR_TEST)}function $(j){j===void 0&&(j=t.TEXTURE0+q-1),k!==j&&(t.activeTexture(j),k=j)}function B(j,pe,he){he===void 0&&(k===null?he=t.TEXTURE0+q-1:he=k);let Ae=O[he];Ae===void 0&&(Ae={type:void 0,texture:void 0},O[he]=Ae),(Ae.type!==j||Ae.texture!==pe)&&(k!==he&&(t.activeTexture(he),k=he),t.bindTexture(j,pe||ie[j]),Ae.type=j,Ae.texture=pe)}function ae(){const j=O[k];j!==void 0&&j.type!==void 0&&(t.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function ue(){try{t.compressedTexImage2D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function _e(){try{t.compressedTexImage3D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function be(){try{t.texSubImage2D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Pe(){try{t.texSubImage3D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Te(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ie(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Oe(){try{t.texStorage2D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Be(){try{t.texStorage3D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function He(){try{t.texImage2D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Qe(){try{t.texImage3D.apply(t,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function et(j){ee.equals(j)===!1&&(t.scissor(j.x,j.y,j.z,j.w),ee.copy(j))}function Xe(j){J.equals(j)===!1&&(t.viewport(j.x,j.y,j.z,j.w),J.copy(j))}function je(j,pe){let he=l.get(pe);he===void 0&&(he=new WeakMap,l.set(pe,he));let Ae=he.get(j);Ae===void 0&&(Ae=t.getUniformBlockIndex(pe,j.name),he.set(j,Ae))}function we(j,pe){const Ae=l.get(pe).get(j);u.get(pe)!==Ae&&(t.uniformBlockBinding(pe,Ae,j.__bindingPointIndex),u.set(pe,Ae))}function V(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},k=null,O={},c={},p=new WeakMap,d=[],h=null,m=!1,v=null,g=null,y=null,_=null,x=null,M=null,A=null,E=new gt(0,0,0),N=0,D=!1,C=null,T=null,P=null,I=null,U=null,ee.set(0,0,t.canvas.width,t.canvas.height),J.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:K,disable:re,bindFramebuffer:oe,drawBuffers:ce,useProgram:me,setBlending:Q,setMaterial:Ee,setFlipSided:ne,setCullFace:se,setLineWidth:xe,setPolygonOffset:ve,setScissorTest:te,activeTexture:$,bindTexture:B,unbindTexture:ae,compressedTexImage2D:ue,compressedTexImage3D:_e,texImage2D:He,texImage3D:Qe,updateUBOMapping:je,uniformBlockBinding:we,texStorage2D:Oe,texStorage3D:Be,texSubImage2D:be,texSubImage3D:Pe,compressedTexSubImage2D:Te,compressedTexSubImage3D:Ie,scissor:et,viewport:Xe,reset:V}}function QDe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function ZDe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function JDe(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function _L(t,e,n,r){const a=KDe(r);switch(n){case A4:return t*e;case C4:return t*e;case D4:return t*e*2;case gD:return t*e/a.components*a.byteLength;case yx:return t*e/a.components*a.byteLength;case R4:return t*e*2/a.components*a.byteLength;case yD:return t*e*2/a.components*a.byteLength;case N4:return t*e*3/a.components*a.byteLength;case Ra:return t*e*4/a.components*a.byteLength;case xD:return t*e*4/a.components*a.byteLength;case ny:case ry:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case iy:case ay:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Vw:case $w:return Math.max(t,16)*Math.max(e,8)/4;case Hw:case Ww:return Math.max(t,8)*Math.max(e,8)/2;case jw:case Xw:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Yw:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Qw:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Zw:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case Jw:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Kw:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case e_:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case t_:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case n_:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case r_:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case i_:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case a_:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case s_:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case o_:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case u_:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case l_:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case sy:case c_:case f_:return Math.ceil(t/4)*Math.ceil(e/4)*16;case I4:case p_:return Math.ceil(t/4)*Math.ceil(e/4)*8;case d_:case h_:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function KDe(t){switch(t){case Mu:case M4:return{byteLength:1,components:1};case zm:case E4:case gv:return{byteLength:2,components:1};case mD:case vD:return{byteLength:2,components:4};case Ic:case hD:case As:return{byteLength:4,components:1};case T4:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}const eRe={contain:QDe,cover:ZDe,fill:JDe,getByteLength:_L};function tRe(t,e,n,r,a,s,o){const u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new nt,c=new WeakMap;let p;const d=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m($,B){return h?new OffscreenCanvas($,B):o1("canvas")}function v($,B,ae){let ue=1;const _e=te($);if((_e.width>ae||_e.height>ae)&&(ue=ae/Math.max(_e.width,_e.height)),ue<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const be=Math.floor(ue*_e.width),Pe=Math.floor(ue*_e.height);p===void 0&&(p=m(be,Pe));const Te=B?m(be,Pe):p;return Te.width=be,Te.height=Pe,Te.getContext("2d").drawImage($,0,0,be,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+_e.width+"x"+_e.height+") to ("+be+"x"+Pe+")."),Te}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+_e.width+"x"+_e.height+")."),$;return $}function g($){return $.generateMipmaps&&$.minFilter!==Vi&&$.minFilter!==ni}function y($){t.generateMipmap($)}function _($,B,ae,ue,_e=!1){if($!==null){if(t[$]!==void 0)return t[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let be=B;if(B===t.RED&&(ae===t.FLOAT&&(be=t.R32F),ae===t.HALF_FLOAT&&(be=t.R16F),ae===t.UNSIGNED_BYTE&&(be=t.R8)),B===t.RED_INTEGER&&(ae===t.UNSIGNED_BYTE&&(be=t.R8UI),ae===t.UNSIGNED_SHORT&&(be=t.R16UI),ae===t.UNSIGNED_INT&&(be=t.R32UI),ae===t.BYTE&&(be=t.R8I),ae===t.SHORT&&(be=t.R16I),ae===t.INT&&(be=t.R32I)),B===t.RG&&(ae===t.FLOAT&&(be=t.RG32F),ae===t.HALF_FLOAT&&(be=t.RG16F),ae===t.UNSIGNED_BYTE&&(be=t.RG8)),B===t.RG_INTEGER&&(ae===t.UNSIGNED_BYTE&&(be=t.RG8UI),ae===t.UNSIGNED_SHORT&&(be=t.RG16UI),ae===t.UNSIGNED_INT&&(be=t.RG32UI),ae===t.BYTE&&(be=t.RG8I),ae===t.SHORT&&(be=t.RG16I),ae===t.INT&&(be=t.RG32I)),B===t.RGB_INTEGER&&(ae===t.UNSIGNED_BYTE&&(be=t.RGB8UI),ae===t.UNSIGNED_SHORT&&(be=t.RGB16UI),ae===t.UNSIGNED_INT&&(be=t.RGB32UI),ae===t.BYTE&&(be=t.RGB8I),ae===t.SHORT&&(be=t.RGB16I),ae===t.INT&&(be=t.RGB32I)),B===t.RGBA_INTEGER&&(ae===t.UNSIGNED_BYTE&&(be=t.RGBA8UI),ae===t.UNSIGNED_SHORT&&(be=t.RGBA16UI),ae===t.UNSIGNED_INT&&(be=t.RGBA32UI),ae===t.BYTE&&(be=t.RGBA8I),ae===t.SHORT&&(be=t.RGBA16I),ae===t.INT&&(be=t.RGBA32I)),B===t.RGB&&ae===t.UNSIGNED_INT_5_9_9_9_REV&&(be=t.RGB9_E5),B===t.RGBA){const Pe=_e?n1:jn.getTransfer(ue);ae===t.FLOAT&&(be=t.RGBA32F),ae===t.HALF_FLOAT&&(be=t.RGBA16F),ae===t.UNSIGNED_BYTE&&(be=Pe===wr?t.SRGB8_ALPHA8:t.RGBA8),ae===t.UNSIGNED_SHORT_4_4_4_4&&(be=t.RGBA4),ae===t.UNSIGNED_SHORT_5_5_5_1&&(be=t.RGB5_A1)}return(be===t.R16F||be===t.R32F||be===t.RG16F||be===t.RG32F||be===t.RGBA16F||be===t.RGBA32F)&&e.get("EXT_color_buffer_float"),be}function x($,B){let ae;return $?B===null||B===Ic||B===oh?ae=t.DEPTH24_STENCIL8:B===As?ae=t.DEPTH32F_STENCIL8:B===zm&&(ae=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===Ic||B===oh?ae=t.DEPTH_COMPONENT24:B===As?ae=t.DEPTH_COMPONENT32F:B===zm&&(ae=t.DEPTH_COMPONENT16),ae}function M($,B){return g($)===!0||$.isFramebufferTexture&&$.minFilter!==Vi&&$.minFilter!==ni?Math.log2(Math.max(B.width,B.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?B.mipmaps.length:1}function A($){const B=$.target;B.removeEventListener("dispose",A),N(B),B.isVideoTexture&&c.delete(B)}function E($){const B=$.target;B.removeEventListener("dispose",E),C(B)}function N($){const B=r.get($);if(B.__webglInit===void 0)return;const ae=$.source,ue=d.get(ae);if(ue){const _e=ue[B.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&D($),Object.keys(ue).length===0&&d.delete(ae)}r.remove($)}function D($){const B=r.get($);t.deleteTexture(B.__webglTexture);const ae=$.source,ue=d.get(ae);delete ue[B.__cacheKey],o.memory.textures--}function C($){const B=r.get($);if($.depthTexture&&$.depthTexture.dispose(),$.isWebGLCubeRenderTarget)for(let ue=0;ue<6;ue++){if(Array.isArray(B.__webglFramebuffer[ue]))for(let _e=0;_e<B.__webglFramebuffer[ue].length;_e++)t.deleteFramebuffer(B.__webglFramebuffer[ue][_e]);else t.deleteFramebuffer(B.__webglFramebuffer[ue]);B.__webglDepthbuffer&&t.deleteRenderbuffer(B.__webglDepthbuffer[ue])}else{if(Array.isArray(B.__webglFramebuffer))for(let ue=0;ue<B.__webglFramebuffer.length;ue++)t.deleteFramebuffer(B.__webglFramebuffer[ue]);else t.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&t.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&t.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let ue=0;ue<B.__webglColorRenderbuffer.length;ue++)B.__webglColorRenderbuffer[ue]&&t.deleteRenderbuffer(B.__webglColorRenderbuffer[ue]);B.__webglDepthRenderbuffer&&t.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const ae=$.textures;for(let ue=0,_e=ae.length;ue<_e;ue++){const be=r.get(ae[ue]);be.__webglTexture&&(t.deleteTexture(be.__webglTexture),o.memory.textures--),r.remove(ae[ue])}r.remove($)}let T=0;function P(){T=0}function I(){const $=T;return $>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+a.maxTextures),T+=1,$}function U($){const B=[];return B.push($.wrapS),B.push($.wrapT),B.push($.wrapR||0),B.push($.magFilter),B.push($.minFilter),B.push($.anisotropy),B.push($.internalFormat),B.push($.format),B.push($.type),B.push($.generateMipmaps),B.push($.premultiplyAlpha),B.push($.flipY),B.push($.unpackAlignment),B.push($.colorSpace),B.join()}function q($,B){const ae=r.get($);if($.isVideoTexture&&xe($),$.isRenderTargetTexture===!1&&$.version>0&&ae.__version!==$.version){const ue=$.image;if(ue===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ue.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{J(ae,$,B);return}}n.bindTexture(t.TEXTURE_2D,ae.__webglTexture,t.TEXTURE0+B)}function z($,B){const ae=r.get($);if($.version>0&&ae.__version!==$.version){J(ae,$,B);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ae.__webglTexture,t.TEXTURE0+B)}function G($,B){const ae=r.get($);if($.version>0&&ae.__version!==$.version){J(ae,$,B);return}n.bindTexture(t.TEXTURE_3D,ae.__webglTexture,t.TEXTURE0+B)}function F($,B){const ae=r.get($);if($.version>0&&ae.__version!==$.version){Y(ae,$,B);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ae.__webglTexture,t.TEXTURE0+B)}const k={[Jy]:t.REPEAT,[Bo]:t.CLAMP_TO_EDGE,[Ky]:t.MIRRORED_REPEAT},O={[Vi]:t.NEAREST,[_4]:t.NEAREST_MIPMAP_NEAREST,[Z0]:t.NEAREST_MIPMAP_LINEAR,[ni]:t.LINEAR,[ty]:t.LINEAR_MIPMAP_NEAREST,[tl]:t.LINEAR_MIPMAP_LINEAR},W={[OK]:t.NEVER,[zK]:t.ALWAYS,[LK]:t.LESS,[L4]:t.LEQUAL,[kK]:t.EQUAL,[BK]:t.GEQUAL,[UK]:t.GREATER,[FK]:t.NOTEQUAL};function X($,B){if(B.type===As&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===ni||B.magFilter===ty||B.magFilter===Z0||B.magFilter===tl||B.minFilter===ni||B.minFilter===ty||B.minFilter===Z0||B.minFilter===tl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri($,t.TEXTURE_WRAP_S,k[B.wrapS]),t.texParameteri($,t.TEXTURE_WRAP_T,k[B.wrapT]),($===t.TEXTURE_3D||$===t.TEXTURE_2D_ARRAY)&&t.texParameteri($,t.TEXTURE_WRAP_R,k[B.wrapR]),t.texParameteri($,t.TEXTURE_MAG_FILTER,O[B.magFilter]),t.texParameteri($,t.TEXTURE_MIN_FILTER,O[B.minFilter]),B.compareFunction&&(t.texParameteri($,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri($,t.TEXTURE_COMPARE_FUNC,W[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===Vi||B.minFilter!==Z0&&B.minFilter!==tl||B.type===As&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||r.get(B).__currentAnisotropy){const ae=e.get("EXT_texture_filter_anisotropic");t.texParameterf($,ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,a.getMaxAnisotropy())),r.get(B).__currentAnisotropy=B.anisotropy}}}function ee($,B){let ae=!1;$.__webglInit===void 0&&($.__webglInit=!0,B.addEventListener("dispose",A));const ue=B.source;let _e=d.get(ue);_e===void 0&&(_e={},d.set(ue,_e));const be=U(B);if(be!==$.__cacheKey){_e[be]===void 0&&(_e[be]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,ae=!0),_e[be].usedTimes++;const Pe=_e[$.__cacheKey];Pe!==void 0&&(_e[$.__cacheKey].usedTimes--,Pe.usedTimes===0&&D(B)),$.__cacheKey=be,$.__webglTexture=_e[be].texture}return ae}function J($,B,ae){let ue=t.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(ue=t.TEXTURE_2D_ARRAY),B.isData3DTexture&&(ue=t.TEXTURE_3D);const _e=ee($,B),be=B.source;n.bindTexture(ue,$.__webglTexture,t.TEXTURE0+ae);const Pe=r.get(be);if(be.version!==Pe.__version||_e===!0){n.activeTexture(t.TEXTURE0+ae);const Te=jn.getPrimaries(jn.workingColorSpace),Ie=B.colorSpace===nc?null:jn.getPrimaries(B.colorSpace),Oe=B.colorSpace===nc||Te===Ie?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,B.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,B.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);let Be=v(B.image,!1,a.maxTextureSize);Be=ve(B,Be);const He=s.convert(B.format,B.colorSpace),Qe=s.convert(B.type);let et=_(B.internalFormat,He,Qe,B.colorSpace,B.isVideoTexture);X(ue,B);let Xe;const je=B.mipmaps,we=B.isVideoTexture!==!0,V=Pe.__version===void 0||_e===!0,j=be.dataReady,pe=M(B,Be);if(B.isDepthTexture)et=x(B.format===uh,B.type),V&&(we?n.texStorage2D(t.TEXTURE_2D,1,et,Be.width,Be.height):n.texImage2D(t.TEXTURE_2D,0,et,Be.width,Be.height,0,He,Qe,null));else if(B.isDataTexture)if(je.length>0){we&&V&&n.texStorage2D(t.TEXTURE_2D,pe,et,je[0].width,je[0].height);for(let he=0,Ae=je.length;he<Ae;he++)Xe=je[he],we?j&&n.texSubImage2D(t.TEXTURE_2D,he,0,0,Xe.width,Xe.height,He,Qe,Xe.data):n.texImage2D(t.TEXTURE_2D,he,et,Xe.width,Xe.height,0,He,Qe,Xe.data);B.generateMipmaps=!1}else we?(V&&n.texStorage2D(t.TEXTURE_2D,pe,et,Be.width,Be.height),j&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Be.width,Be.height,He,Qe,Be.data)):n.texImage2D(t.TEXTURE_2D,0,et,Be.width,Be.height,0,He,Qe,Be.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){we&&V&&n.texStorage3D(t.TEXTURE_2D_ARRAY,pe,et,je[0].width,je[0].height,Be.depth);for(let he=0,Ae=je.length;he<Ae;he++)if(Xe=je[he],B.format!==Ra)if(He!==null)if(we){if(j)if(B.layerUpdates.size>0){const Fe=_L(Xe.width,Xe.height,B.format,B.type);for(const qe of B.layerUpdates){const Ze=Xe.data.subarray(qe*Fe/Xe.data.BYTES_PER_ELEMENT,(qe+1)*Fe/Xe.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,he,0,0,qe,Xe.width,Xe.height,1,He,Ze,0,0)}B.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,he,0,0,0,Xe.width,Xe.height,Be.depth,He,Xe.data,0,0)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,he,et,Xe.width,Xe.height,Be.depth,0,Xe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else we?j&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,he,0,0,0,Xe.width,Xe.height,Be.depth,He,Qe,Xe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,he,et,Xe.width,Xe.height,Be.depth,0,He,Qe,Xe.data)}else{we&&V&&n.texStorage2D(t.TEXTURE_2D,pe,et,je[0].width,je[0].height);for(let he=0,Ae=je.length;he<Ae;he++)Xe=je[he],B.format!==Ra?He!==null?we?j&&n.compressedTexSubImage2D(t.TEXTURE_2D,he,0,0,Xe.width,Xe.height,He,Xe.data):n.compressedTexImage2D(t.TEXTURE_2D,he,et,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?j&&n.texSubImage2D(t.TEXTURE_2D,he,0,0,Xe.width,Xe.height,He,Qe,Xe.data):n.texImage2D(t.TEXTURE_2D,he,et,Xe.width,Xe.height,0,He,Qe,Xe.data)}else if(B.isDataArrayTexture)if(we){if(V&&n.texStorage3D(t.TEXTURE_2D_ARRAY,pe,et,Be.width,Be.height,Be.depth),j)if(B.layerUpdates.size>0){const he=_L(Be.width,Be.height,B.format,B.type);for(const Ae of B.layerUpdates){const Fe=Be.data.subarray(Ae*he/Be.data.BYTES_PER_ELEMENT,(Ae+1)*he/Be.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Ae,Be.width,Be.height,1,He,Qe,Fe)}B.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Be.width,Be.height,Be.depth,He,Qe,Be.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,et,Be.width,Be.height,Be.depth,0,He,Qe,Be.data);else if(B.isData3DTexture)we?(V&&n.texStorage3D(t.TEXTURE_3D,pe,et,Be.width,Be.height,Be.depth),j&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Be.width,Be.height,Be.depth,He,Qe,Be.data)):n.texImage3D(t.TEXTURE_3D,0,et,Be.width,Be.height,Be.depth,0,He,Qe,Be.data);else if(B.isFramebufferTexture){if(V)if(we)n.texStorage2D(t.TEXTURE_2D,pe,et,Be.width,Be.height);else{let he=Be.width,Ae=Be.height;for(let Fe=0;Fe<pe;Fe++)n.texImage2D(t.TEXTURE_2D,Fe,et,he,Ae,0,He,Qe,null),he>>=1,Ae>>=1}}else if(je.length>0){if(we&&V){const he=te(je[0]);n.texStorage2D(t.TEXTURE_2D,pe,et,he.width,he.height)}for(let he=0,Ae=je.length;he<Ae;he++)Xe=je[he],we?j&&n.texSubImage2D(t.TEXTURE_2D,he,0,0,He,Qe,Xe):n.texImage2D(t.TEXTURE_2D,he,et,He,Qe,Xe);B.generateMipmaps=!1}else if(we){if(V){const he=te(Be);n.texStorage2D(t.TEXTURE_2D,pe,et,he.width,he.height)}j&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,He,Qe,Be)}else n.texImage2D(t.TEXTURE_2D,0,et,He,Qe,Be);g(B)&&y(ue),Pe.__version=be.version,B.onUpdate&&B.onUpdate(B)}$.__version=B.version}function Y($,B,ae){if(B.image.length!==6)return;const ue=ee($,B),_e=B.source;n.bindTexture(t.TEXTURE_CUBE_MAP,$.__webglTexture,t.TEXTURE0+ae);const be=r.get(_e);if(_e.version!==be.__version||ue===!0){n.activeTexture(t.TEXTURE0+ae);const Pe=jn.getPrimaries(jn.workingColorSpace),Te=B.colorSpace===nc?null:jn.getPrimaries(B.colorSpace),Ie=B.colorSpace===nc||Pe===Te?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,B.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,B.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ie);const Oe=B.isCompressedTexture||B.image[0].isCompressedTexture,Be=B.image[0]&&B.image[0].isDataTexture,He=[];for(let Ae=0;Ae<6;Ae++)!Oe&&!Be?He[Ae]=v(B.image[Ae],!0,a.maxCubemapSize):He[Ae]=Be?B.image[Ae].image:B.image[Ae],He[Ae]=ve(B,He[Ae]);const Qe=He[0],et=s.convert(B.format,B.colorSpace),Xe=s.convert(B.type),je=_(B.internalFormat,et,Xe,B.colorSpace),we=B.isVideoTexture!==!0,V=be.__version===void 0||ue===!0,j=_e.dataReady;let pe=M(B,Qe);X(t.TEXTURE_CUBE_MAP,B);let he;if(Oe){we&&V&&n.texStorage2D(t.TEXTURE_CUBE_MAP,pe,je,Qe.width,Qe.height);for(let Ae=0;Ae<6;Ae++){he=He[Ae].mipmaps;for(let Fe=0;Fe<he.length;Fe++){const qe=he[Fe];B.format!==Ra?et!==null?we?j&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe,0,0,qe.width,qe.height,et,qe.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe,je,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):we?j&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe,0,0,qe.width,qe.height,et,Xe,qe.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe,je,qe.width,qe.height,0,et,Xe,qe.data)}}}else{if(he=B.mipmaps,we&&V){he.length>0&&pe++;const Ae=te(He[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,pe,je,Ae.width,Ae.height)}for(let Ae=0;Ae<6;Ae++)if(Be){we?j&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,He[Ae].width,He[Ae].height,et,Xe,He[Ae].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,je,He[Ae].width,He[Ae].height,0,et,Xe,He[Ae].data);for(let Fe=0;Fe<he.length;Fe++){const Ze=he[Fe].image[Ae].image;we?j&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe+1,0,0,Ze.width,Ze.height,et,Xe,Ze.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe+1,je,Ze.width,Ze.height,0,et,Xe,Ze.data)}}else{we?j&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,et,Xe,He[Ae]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,je,et,Xe,He[Ae]);for(let Fe=0;Fe<he.length;Fe++){const qe=he[Fe];we?j&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe+1,0,0,et,Xe,qe.image[Ae]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe+1,je,et,Xe,qe.image[Ae])}}}g(B)&&y(t.TEXTURE_CUBE_MAP),be.__version=_e.version,B.onUpdate&&B.onUpdate(B)}$.__version=B.version}function ie($,B,ae,ue,_e,be){const Pe=s.convert(ae.format,ae.colorSpace),Te=s.convert(ae.type),Ie=_(ae.internalFormat,Pe,Te,ae.colorSpace);if(!r.get(B).__hasExternalTextures){const Be=Math.max(1,B.width>>be),He=Math.max(1,B.height>>be);_e===t.TEXTURE_3D||_e===t.TEXTURE_2D_ARRAY?n.texImage3D(_e,be,Ie,Be,He,B.depth,0,Pe,Te,null):n.texImage2D(_e,be,Ie,Be,He,0,Pe,Te,null)}n.bindFramebuffer(t.FRAMEBUFFER,$),se(B)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ue,_e,r.get(ae).__webglTexture,0,ne(B)):(_e===t.TEXTURE_2D||_e>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&_e<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ue,_e,r.get(ae).__webglTexture,be),n.bindFramebuffer(t.FRAMEBUFFER,null)}function K($,B,ae){if(t.bindRenderbuffer(t.RENDERBUFFER,$),B.depthBuffer){const ue=B.depthTexture,_e=ue&&ue.isDepthTexture?ue.type:null,be=x(B.stencilBuffer,_e),Pe=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Te=ne(B);se(B)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Te,be,B.width,B.height):ae?t.renderbufferStorageMultisample(t.RENDERBUFFER,Te,be,B.width,B.height):t.renderbufferStorage(t.RENDERBUFFER,be,B.width,B.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Pe,t.RENDERBUFFER,$)}else{const ue=B.textures;for(let _e=0;_e<ue.length;_e++){const be=ue[_e],Pe=s.convert(be.format,be.colorSpace),Te=s.convert(be.type),Ie=_(be.internalFormat,Pe,Te,be.colorSpace),Oe=ne(B);ae&&se(B)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Oe,Ie,B.width,B.height):se(B)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Oe,Ie,B.width,B.height):t.renderbufferStorage(t.RENDERBUFFER,Ie,B.width,B.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function re($,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,$),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),q(B.depthTexture,0);const ue=r.get(B.depthTexture).__webglTexture,_e=ne(B);if(B.depthTexture.format===Bd)se(B)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ue,0,_e):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ue,0);else if(B.depthTexture.format===uh)se(B)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ue,0,_e):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ue,0);else throw new Error("Unknown depthTexture format")}function oe($){const B=r.get($),ae=$.isWebGLCubeRenderTarget===!0;if(B.__boundDepthTexture!==$.depthTexture){const ue=$.depthTexture;if(B.__depthDisposeCallback&&B.__depthDisposeCallback(),ue){const _e=()=>{delete B.__boundDepthTexture,delete B.__depthDisposeCallback,ue.removeEventListener("dispose",_e)};ue.addEventListener("dispose",_e),B.__depthDisposeCallback=_e}B.__boundDepthTexture=ue}if($.depthTexture&&!B.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");re(B.__webglFramebuffer,$)}else if(ae){B.__webglDepthbuffer=[];for(let ue=0;ue<6;ue++)if(n.bindFramebuffer(t.FRAMEBUFFER,B.__webglFramebuffer[ue]),B.__webglDepthbuffer[ue]===void 0)B.__webglDepthbuffer[ue]=t.createRenderbuffer(),K(B.__webglDepthbuffer[ue],$,!1);else{const _e=$.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,be=B.__webglDepthbuffer[ue];t.bindRenderbuffer(t.RENDERBUFFER,be),t.framebufferRenderbuffer(t.FRAMEBUFFER,_e,t.RENDERBUFFER,be)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer===void 0)B.__webglDepthbuffer=t.createRenderbuffer(),K(B.__webglDepthbuffer,$,!1);else{const ue=$.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,_e=B.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,_e),t.framebufferRenderbuffer(t.FRAMEBUFFER,ue,t.RENDERBUFFER,_e)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function ce($,B,ae){const ue=r.get($);B!==void 0&&ie(ue.__webglFramebuffer,$,$.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ae!==void 0&&oe($)}function me($){const B=$.texture,ae=r.get($),ue=r.get(B);$.addEventListener("dispose",E);const _e=$.textures,be=$.isWebGLCubeRenderTarget===!0,Pe=_e.length>1;if(Pe||(ue.__webglTexture===void 0&&(ue.__webglTexture=t.createTexture()),ue.__version=B.version,o.memory.textures++),be){ae.__webglFramebuffer=[];for(let Te=0;Te<6;Te++)if(B.mipmaps&&B.mipmaps.length>0){ae.__webglFramebuffer[Te]=[];for(let Ie=0;Ie<B.mipmaps.length;Ie++)ae.__webglFramebuffer[Te][Ie]=t.createFramebuffer()}else ae.__webglFramebuffer[Te]=t.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){ae.__webglFramebuffer=[];for(let Te=0;Te<B.mipmaps.length;Te++)ae.__webglFramebuffer[Te]=t.createFramebuffer()}else ae.__webglFramebuffer=t.createFramebuffer();if(Pe)for(let Te=0,Ie=_e.length;Te<Ie;Te++){const Oe=r.get(_e[Te]);Oe.__webglTexture===void 0&&(Oe.__webglTexture=t.createTexture(),o.memory.textures++)}if($.samples>0&&se($)===!1){ae.__webglMultisampledFramebuffer=t.createFramebuffer(),ae.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ae.__webglMultisampledFramebuffer);for(let Te=0;Te<_e.length;Te++){const Ie=_e[Te];ae.__webglColorRenderbuffer[Te]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ae.__webglColorRenderbuffer[Te]);const Oe=s.convert(Ie.format,Ie.colorSpace),Be=s.convert(Ie.type),He=_(Ie.internalFormat,Oe,Be,Ie.colorSpace,$.isXRRenderTarget===!0),Qe=ne($);t.renderbufferStorageMultisample(t.RENDERBUFFER,Qe,He,$.width,$.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Te,t.RENDERBUFFER,ae.__webglColorRenderbuffer[Te])}t.bindRenderbuffer(t.RENDERBUFFER,null),$.depthBuffer&&(ae.__webglDepthRenderbuffer=t.createRenderbuffer(),K(ae.__webglDepthRenderbuffer,$,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(be){n.bindTexture(t.TEXTURE_CUBE_MAP,ue.__webglTexture),X(t.TEXTURE_CUBE_MAP,B);for(let Te=0;Te<6;Te++)if(B.mipmaps&&B.mipmaps.length>0)for(let Ie=0;Ie<B.mipmaps.length;Ie++)ie(ae.__webglFramebuffer[Te][Ie],$,B,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ie);else ie(ae.__webglFramebuffer[Te],$,B,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0);g(B)&&y(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Pe){for(let Te=0,Ie=_e.length;Te<Ie;Te++){const Oe=_e[Te],Be=r.get(Oe);n.bindTexture(t.TEXTURE_2D,Be.__webglTexture),X(t.TEXTURE_2D,Oe),ie(ae.__webglFramebuffer,$,Oe,t.COLOR_ATTACHMENT0+Te,t.TEXTURE_2D,0),g(Oe)&&y(t.TEXTURE_2D)}n.unbindTexture()}else{let Te=t.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(Te=$.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Te,ue.__webglTexture),X(Te,B),B.mipmaps&&B.mipmaps.length>0)for(let Ie=0;Ie<B.mipmaps.length;Ie++)ie(ae.__webglFramebuffer[Ie],$,B,t.COLOR_ATTACHMENT0,Te,Ie);else ie(ae.__webglFramebuffer,$,B,t.COLOR_ATTACHMENT0,Te,0);g(B)&&y(Te),n.unbindTexture()}$.depthBuffer&&oe($)}function Se($){const B=$.textures;for(let ae=0,ue=B.length;ae<ue;ae++){const _e=B[ae];if(g(_e)){const be=$.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Pe=r.get(_e).__webglTexture;n.bindTexture(be,Pe),y(be),n.unbindTexture()}}}const le=[],Q=[];function Ee($){if($.samples>0){if(se($)===!1){const B=$.textures,ae=$.width,ue=$.height;let _e=t.COLOR_BUFFER_BIT;const be=$.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Pe=r.get($),Te=B.length>1;if(Te)for(let Ie=0;Ie<B.length;Ie++)n.bindFramebuffer(t.FRAMEBUFFER,Pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Pe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Pe.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Pe.__webglFramebuffer);for(let Ie=0;Ie<B.length;Ie++){if($.resolveDepthBuffer&&($.depthBuffer&&(_e|=t.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(_e|=t.STENCIL_BUFFER_BIT)),Te){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Pe.__webglColorRenderbuffer[Ie]);const Oe=r.get(B[Ie]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Oe,0)}t.blitFramebuffer(0,0,ae,ue,0,0,ae,ue,_e,t.NEAREST),l===!0&&(le.length=0,Q.length=0,le.push(t.COLOR_ATTACHMENT0+Ie),$.depthBuffer&&$.resolveDepthBuffer===!1&&(le.push(be),Q.push(be),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Q)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,le))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Te)for(let Ie=0;Ie<B.length;Ie++){n.bindFramebuffer(t.FRAMEBUFFER,Pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.RENDERBUFFER,Pe.__webglColorRenderbuffer[Ie]);const Oe=r.get(B[Ie]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Pe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.TEXTURE_2D,Oe,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Pe.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&l){const B=$.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[B])}}}function ne($){return Math.min(a.maxSamples,$.samples)}function se($){const B=r.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function xe($){const B=o.render.frame;c.get($)!==B&&(c.set($,B),$.update())}function ve($,B){const ae=$.colorSpace,ue=$.format,_e=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||ae!==Zc&&ae!==nc&&(jn.getTransfer(ae)===wr?(ue!==Ra||_e!==Mu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ae)),B}function te($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(f.width=$.naturalWidth||$.width,f.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(f.width=$.displayWidth,f.height=$.displayHeight):(f.width=$.width,f.height=$.height),f}this.allocateTextureUnit=I,this.resetTextureUnits=P,this.setTexture2D=q,this.setTexture2DArray=z,this.setTexture3D=G,this.setTextureCube=F,this.rebindTextures=ce,this.setupRenderTarget=me,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=Ee,this.setupDepthRenderbuffer=oe,this.setupFrameBufferTexture=ie,this.useMultisampledRTT=se}function eee(t,e){function n(r,a=nc){let s;const o=jn.getTransfer(a);if(r===Mu)return t.UNSIGNED_BYTE;if(r===mD)return t.UNSIGNED_SHORT_4_4_4_4;if(r===vD)return t.UNSIGNED_SHORT_5_5_5_1;if(r===T4)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===M4)return t.BYTE;if(r===E4)return t.SHORT;if(r===zm)return t.UNSIGNED_SHORT;if(r===hD)return t.INT;if(r===Ic)return t.UNSIGNED_INT;if(r===As)return t.FLOAT;if(r===gv)return t.HALF_FLOAT;if(r===A4)return t.ALPHA;if(r===N4)return t.RGB;if(r===Ra)return t.RGBA;if(r===C4)return t.LUMINANCE;if(r===D4)return t.LUMINANCE_ALPHA;if(r===Bd)return t.DEPTH_COMPONENT;if(r===uh)return t.DEPTH_STENCIL;if(r===gD)return t.RED;if(r===yx)return t.RED_INTEGER;if(r===R4)return t.RG;if(r===yD)return t.RG_INTEGER;if(r===xD)return t.RGBA_INTEGER;if(r===ny||r===ry||r===iy||r===ay)if(o===wr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===ny)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===ry)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===iy)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===ay)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===ny)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===ry)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===iy)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===ay)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Hw||r===Vw||r===Ww||r===$w)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===Hw)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Vw)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Ww)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===$w)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===jw||r===Xw||r===Yw)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===jw||r===Xw)return o===wr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===Yw)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Qw||r===Zw||r===Jw||r===Kw||r===e_||r===t_||r===n_||r===r_||r===i_||r===a_||r===s_||r===o_||r===u_||r===l_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===Qw)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Zw)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Jw)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Kw)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===e_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===t_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===n_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===r_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===i_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===a_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===s_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===o_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===u_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===l_)return o===wr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===sy||r===c_||r===f_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===sy)return o===wr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===c_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===f_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===I4||r===p_||r===d_||r===h_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===sy)return s.COMPRESSED_RED_RGTC1_EXT;if(r===p_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===d_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===h_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===oh?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}class tee extends fi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class em extends Gn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const nRe={type:"move"};class tP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new em,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new em,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ge),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new em,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ge),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let a=null,s=null,o=null;const u=this._targetRay,l=this._grip,f=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const v of e.hand.values()){const g=n.getJointPose(v,r),y=this._getHandJoint(f,v);g!==null&&(y.matrix.fromArray(g.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=g.radius),y.visible=g!==null}const c=f.joints["index-finger-tip"],p=f.joints["thumb-tip"],d=c.position.distanceTo(p.position),h=.02,m=.005;f.inputState.pinching&&d>h+m?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&d<=h-m&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));u!==null&&(a=n.getPose(e.targetRaySpace,r),a===null&&s!==null&&(a=s),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(nRe)))}return u!==null&&(u.visible=a!==null),l!==null&&(l.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new em;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const rRe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,iRe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class aRe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const a=new Ur,s=e.properties.get(a);s.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=a}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new Tu({vertexShader:rRe,fragmentShader:iRe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Wr(new Kc(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class sRe extends Lu{constructor(e,n){super();const r=this;let a=null,s=1,o=null,u="local-floor",l=1,f=null,c=null,p=null,d=null,h=null,m=null;const v=new aRe,g=n.getContextAttributes();let y=null,_=null;const x=[],M=[],A=new nt;let E=null;const N=new fi;N.layers.enable(1),N.viewport=new On;const D=new fi;D.layers.enable(2),D.viewport=new On;const C=[N,D],T=new tee;T.layers.enable(1),T.layers.enable(2);let P=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let ie=x[Y];return ie===void 0&&(ie=new tP,x[Y]=ie),ie.getTargetRaySpace()},this.getControllerGrip=function(Y){let ie=x[Y];return ie===void 0&&(ie=new tP,x[Y]=ie),ie.getGripSpace()},this.getHand=function(Y){let ie=x[Y];return ie===void 0&&(ie=new tP,x[Y]=ie),ie.getHandSpace()};function U(Y){const ie=M.indexOf(Y.inputSource);if(ie===-1)return;const K=x[ie];K!==void 0&&(K.update(Y.inputSource,Y.frame,f||o),K.dispatchEvent({type:Y.type,data:Y.inputSource}))}function q(){a.removeEventListener("select",U),a.removeEventListener("selectstart",U),a.removeEventListener("selectend",U),a.removeEventListener("squeeze",U),a.removeEventListener("squeezestart",U),a.removeEventListener("squeezeend",U),a.removeEventListener("end",q),a.removeEventListener("inputsourceschange",z);for(let Y=0;Y<x.length;Y++){const ie=M[Y];ie!==null&&(M[Y]=null,x[Y].disconnect(ie))}P=null,I=null,v.reset(),e.setRenderTarget(y),h=null,d=null,p=null,a=null,_=null,J.stop(),r.isPresenting=!1,e.setPixelRatio(E),e.setSize(A.width,A.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){s=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){u=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(Y){f=Y},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return p},this.getFrame=function(){return m},this.getSession=function(){return a},this.setSession=async function(Y){if(a=Y,a!==null){if(y=e.getRenderTarget(),a.addEventListener("select",U),a.addEventListener("selectstart",U),a.addEventListener("selectend",U),a.addEventListener("squeeze",U),a.addEventListener("squeezestart",U),a.addEventListener("squeezeend",U),a.addEventListener("end",q),a.addEventListener("inputsourceschange",z),g.xrCompatible!==!0&&await n.makeXRCompatible(),E=e.getPixelRatio(),e.getSize(A),a.renderState.layers===void 0){const ie={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(a,n,ie),a.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),_=new Eu(h.framebufferWidth,h.framebufferHeight,{format:Ra,type:Mu,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let ie=null,K=null,re=null;g.depth&&(re=g.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ie=g.stencil?uh:Bd,K=g.stencil?oh:Ic);const oe={colorFormat:n.RGBA8,depthFormat:re,scaleFactor:s};p=new XRWebGLBinding(a,n),d=p.createProjectionLayer(oe),a.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),_=new Eu(d.textureWidth,d.textureHeight,{format:Ra,type:Mu,depthTexture:new G4(d.textureWidth,d.textureHeight,K,void 0,void 0,void 0,void 0,void 0,void 0,ie),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),f=null,o=await a.requestReferenceSpace(u),J.setContext(a),J.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function z(Y){for(let ie=0;ie<Y.removed.length;ie++){const K=Y.removed[ie],re=M.indexOf(K);re>=0&&(M[re]=null,x[re].disconnect(K))}for(let ie=0;ie<Y.added.length;ie++){const K=Y.added[ie];let re=M.indexOf(K);if(re===-1){for(let ce=0;ce<x.length;ce++)if(ce>=M.length){M.push(K),re=ce;break}else if(M[ce]===null){M[ce]=K,re=ce;break}if(re===-1)break}const oe=x[re];oe&&oe.connect(K)}}const G=new ge,F=new ge;function k(Y,ie,K){G.setFromMatrixPosition(ie.matrixWorld),F.setFromMatrixPosition(K.matrixWorld);const re=G.distanceTo(F),oe=ie.projectionMatrix.elements,ce=K.projectionMatrix.elements,me=oe[14]/(oe[10]-1),Se=oe[14]/(oe[10]+1),le=(oe[9]+1)/oe[5],Q=(oe[9]-1)/oe[5],Ee=(oe[8]-1)/oe[0],ne=(ce[8]+1)/ce[0],se=me*Ee,xe=me*ne,ve=re/(-Ee+ne),te=ve*-Ee;if(ie.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(te),Y.translateZ(ve),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),oe[10]===-1)Y.projectionMatrix.copy(ie.projectionMatrix),Y.projectionMatrixInverse.copy(ie.projectionMatrixInverse);else{const $=me+ve,B=Se+ve,ae=se-te,ue=xe+(re-te),_e=le*Se/B*$,be=Q*Se/B*$;Y.projectionMatrix.makePerspective(ae,ue,_e,be,$,B),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}}function O(Y,ie){ie===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(ie.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(a===null)return;let ie=Y.near,K=Y.far;v.texture!==null&&(v.depthNear>0&&(ie=v.depthNear),v.depthFar>0&&(K=v.depthFar)),T.near=D.near=N.near=ie,T.far=D.far=N.far=K,(P!==T.near||I!==T.far)&&(a.updateRenderState({depthNear:T.near,depthFar:T.far}),P=T.near,I=T.far);const re=Y.parent,oe=T.cameras;O(T,re);for(let ce=0;ce<oe.length;ce++)O(oe[ce],re);oe.length===2?k(T,N,D):T.projectionMatrix.copy(N.projectionMatrix),W(Y,T,re)};function W(Y,ie,K){K===null?Y.matrix.copy(ie.matrixWorld):(Y.matrix.copy(K.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(ie.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(ie.projectionMatrix),Y.projectionMatrixInverse.copy(ie.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=qm*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(d===null&&h===null))return l},this.setFoveation=function(Y){l=Y,d!==null&&(d.fixedFoveation=Y),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=Y)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(T)};let X=null;function ee(Y,ie){if(c=ie.getViewerPose(f||o),m=ie,c!==null){const K=c.views;h!==null&&(e.setRenderTargetFramebuffer(_,h.framebuffer),e.setRenderTarget(_));let re=!1;K.length!==T.cameras.length&&(T.cameras.length=0,re=!0);for(let ce=0;ce<K.length;ce++){const me=K[ce];let Se=null;if(h!==null)Se=h.getViewport(me);else{const Q=p.getViewSubImage(d,me);Se=Q.viewport,ce===0&&(e.setRenderTargetTextures(_,Q.colorTexture,d.ignoreDepthValues?void 0:Q.depthStencilTexture),e.setRenderTarget(_))}let le=C[ce];le===void 0&&(le=new fi,le.layers.enable(ce),le.viewport=new On,C[ce]=le),le.matrix.fromArray(me.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(me.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(Se.x,Se.y,Se.width,Se.height),ce===0&&(T.matrix.copy(le.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),re===!0&&T.cameras.push(le)}const oe=a.enabledFeatures;if(oe&&oe.includes("depth-sensing")){const ce=p.getDepthInformation(K[0]);ce&&ce.isValid&&ce.texture&&v.init(e,ce,a.renderState)}}for(let K=0;K<x.length;K++){const re=M[K],oe=x[K];re!==null&&oe!==void 0&&oe.update(re,ie,f||o)}X&&X(Y,ie),ie.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ie}),m=null}const J=new YK;J.setAnimationLoop(ee),this.setAnimationLoop=function(Y){X=Y},this.dispose=function(){}}}const ad=new uo,oRe=new Ht;function uRe(t,e){function n(g,y){g.matrixAutoUpdate===!0&&g.updateMatrix(),y.value.copy(g.matrix)}function r(g,y){y.color.getRGB(g.fogColor.value,$K(t)),y.isFog?(g.fogNear.value=y.near,g.fogFar.value=y.far):y.isFogExp2&&(g.fogDensity.value=y.density)}function a(g,y,_,x,M){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(g,y):y.isMeshToonMaterial?(s(g,y),p(g,y)):y.isMeshPhongMaterial?(s(g,y),c(g,y)):y.isMeshStandardMaterial?(s(g,y),d(g,y),y.isMeshPhysicalMaterial&&h(g,y,M)):y.isMeshMatcapMaterial?(s(g,y),m(g,y)):y.isMeshDepthMaterial?s(g,y):y.isMeshDistanceMaterial?(s(g,y),v(g,y)):y.isMeshNormalMaterial?s(g,y):y.isLineBasicMaterial?(o(g,y),y.isLineDashedMaterial&&u(g,y)):y.isPointsMaterial?l(g,y,_,x):y.isSpriteMaterial?f(g,y):y.isShadowMaterial?(g.color.value.copy(y.color),g.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(g,y){g.opacity.value=y.opacity,y.color&&g.diffuse.value.copy(y.color),y.emissive&&g.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(g.map.value=y.map,n(y.map,g.mapTransform)),y.alphaMap&&(g.alphaMap.value=y.alphaMap,n(y.alphaMap,g.alphaMapTransform)),y.bumpMap&&(g.bumpMap.value=y.bumpMap,n(y.bumpMap,g.bumpMapTransform),g.bumpScale.value=y.bumpScale,y.side===Pa&&(g.bumpScale.value*=-1)),y.normalMap&&(g.normalMap.value=y.normalMap,n(y.normalMap,g.normalMapTransform),g.normalScale.value.copy(y.normalScale),y.side===Pa&&g.normalScale.value.negate()),y.displacementMap&&(g.displacementMap.value=y.displacementMap,n(y.displacementMap,g.displacementMapTransform),g.displacementScale.value=y.displacementScale,g.displacementBias.value=y.displacementBias),y.emissiveMap&&(g.emissiveMap.value=y.emissiveMap,n(y.emissiveMap,g.emissiveMapTransform)),y.specularMap&&(g.specularMap.value=y.specularMap,n(y.specularMap,g.specularMapTransform)),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest);const _=e.get(y),x=_.envMap,M=_.envMapRotation;x&&(g.envMap.value=x,ad.copy(M),ad.x*=-1,ad.y*=-1,ad.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(ad.y*=-1,ad.z*=-1),g.envMapRotation.value.setFromMatrix4(oRe.makeRotationFromEuler(ad)),g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=y.reflectivity,g.ior.value=y.ior,g.refractionRatio.value=y.refractionRatio),y.lightMap&&(g.lightMap.value=y.lightMap,g.lightMapIntensity.value=y.lightMapIntensity,n(y.lightMap,g.lightMapTransform)),y.aoMap&&(g.aoMap.value=y.aoMap,g.aoMapIntensity.value=y.aoMapIntensity,n(y.aoMap,g.aoMapTransform))}function o(g,y){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,y.map&&(g.map.value=y.map,n(y.map,g.mapTransform))}function u(g,y){g.dashSize.value=y.dashSize,g.totalSize.value=y.dashSize+y.gapSize,g.scale.value=y.scale}function l(g,y,_,x){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,g.size.value=y.size*_,g.scale.value=x*.5,y.map&&(g.map.value=y.map,n(y.map,g.uvTransform)),y.alphaMap&&(g.alphaMap.value=y.alphaMap,n(y.alphaMap,g.alphaMapTransform)),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest)}function f(g,y){g.diffuse.value.copy(y.color),g.opacity.value=y.opacity,g.rotation.value=y.rotation,y.map&&(g.map.value=y.map,n(y.map,g.mapTransform)),y.alphaMap&&(g.alphaMap.value=y.alphaMap,n(y.alphaMap,g.alphaMapTransform)),y.alphaTest>0&&(g.alphaTest.value=y.alphaTest)}function c(g,y){g.specular.value.copy(y.specular),g.shininess.value=Math.max(y.shininess,1e-4)}function p(g,y){y.gradientMap&&(g.gradientMap.value=y.gradientMap)}function d(g,y){g.metalness.value=y.metalness,y.metalnessMap&&(g.metalnessMap.value=y.metalnessMap,n(y.metalnessMap,g.metalnessMapTransform)),g.roughness.value=y.roughness,y.roughnessMap&&(g.roughnessMap.value=y.roughnessMap,n(y.roughnessMap,g.roughnessMapTransform)),y.envMap&&(g.envMapIntensity.value=y.envMapIntensity)}function h(g,y,_){g.ior.value=y.ior,y.sheen>0&&(g.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),g.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(g.sheenColorMap.value=y.sheenColorMap,n(y.sheenColorMap,g.sheenColorMapTransform)),y.sheenRoughnessMap&&(g.sheenRoughnessMap.value=y.sheenRoughnessMap,n(y.sheenRoughnessMap,g.sheenRoughnessMapTransform))),y.clearcoat>0&&(g.clearcoat.value=y.clearcoat,g.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(g.clearcoatMap.value=y.clearcoatMap,n(y.clearcoatMap,g.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,n(y.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(g.clearcoatNormalMap.value=y.clearcoatNormalMap,n(y.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Pa&&g.clearcoatNormalScale.value.negate())),y.dispersion>0&&(g.dispersion.value=y.dispersion),y.iridescence>0&&(g.iridescence.value=y.iridescence,g.iridescenceIOR.value=y.iridescenceIOR,g.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(g.iridescenceMap.value=y.iridescenceMap,n(y.iridescenceMap,g.iridescenceMapTransform)),y.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=y.iridescenceThicknessMap,n(y.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),y.transmission>0&&(g.transmission.value=y.transmission,g.transmissionSamplerMap.value=_.texture,g.transmissionSamplerSize.value.set(_.width,_.height),y.transmissionMap&&(g.transmissionMap.value=y.transmissionMap,n(y.transmissionMap,g.transmissionMapTransform)),g.thickness.value=y.thickness,y.thicknessMap&&(g.thicknessMap.value=y.thicknessMap,n(y.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=y.attenuationDistance,g.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(g.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(g.anisotropyMap.value=y.anisotropyMap,n(y.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=y.specularIntensity,g.specularColor.value.copy(y.specularColor),y.specularColorMap&&(g.specularColorMap.value=y.specularColorMap,n(y.specularColorMap,g.specularColorMapTransform)),y.specularIntensityMap&&(g.specularIntensityMap.value=y.specularIntensityMap,n(y.specularIntensityMap,g.specularIntensityMapTransform))}function m(g,y){y.matcap&&(g.matcap.value=y.matcap)}function v(g,y){const _=e.get(y).light;g.referencePosition.value.setFromMatrixPosition(_.matrixWorld),g.nearDistance.value=_.shadow.camera.near,g.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:a}}function lRe(t,e,n,r){let a={},s={},o=[];const u=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,x){const M=x.program;r.uniformBlockBinding(_,M)}function f(_,x){let M=a[_.id];M===void 0&&(m(_),M=c(_),a[_.id]=M,_.addEventListener("dispose",g));const A=x.program;r.updateUBOMapping(_,A);const E=e.render.frame;s[_.id]!==E&&(d(_),s[_.id]=E)}function c(_){const x=p();_.__bindingPointIndex=x;const M=t.createBuffer(),A=_.__size,E=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,M),t.bufferData(t.UNIFORM_BUFFER,A,E),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,x,M),M}function p(){for(let _=0;_<u;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(_){const x=a[_.id],M=_.uniforms,A=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,x);for(let E=0,N=M.length;E<N;E++){const D=Array.isArray(M[E])?M[E]:[M[E]];for(let C=0,T=D.length;C<T;C++){const P=D[C];if(h(P,E,C,A)===!0){const I=P.__offset,U=Array.isArray(P.value)?P.value:[P.value];let q=0;for(let z=0;z<U.length;z++){const G=U[z],F=v(G);typeof G=="number"||typeof G=="boolean"?(P.__data[0]=G,t.bufferSubData(t.UNIFORM_BUFFER,I+q,P.__data)):G.isMatrix3?(P.__data[0]=G.elements[0],P.__data[1]=G.elements[1],P.__data[2]=G.elements[2],P.__data[3]=0,P.__data[4]=G.elements[3],P.__data[5]=G.elements[4],P.__data[6]=G.elements[5],P.__data[7]=0,P.__data[8]=G.elements[6],P.__data[9]=G.elements[7],P.__data[10]=G.elements[8],P.__data[11]=0):(G.toArray(P.__data,q),q+=F.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,I,P.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function h(_,x,M,A){const E=_.value,N=x+"_"+M;if(A[N]===void 0)return typeof E=="number"||typeof E=="boolean"?A[N]=E:A[N]=E.clone(),!0;{const D=A[N];if(typeof E=="number"||typeof E=="boolean"){if(D!==E)return A[N]=E,!0}else if(D.equals(E)===!1)return D.copy(E),!0}return!1}function m(_){const x=_.uniforms;let M=0;const A=16;for(let N=0,D=x.length;N<D;N++){const C=Array.isArray(x[N])?x[N]:[x[N]];for(let T=0,P=C.length;T<P;T++){const I=C[T],U=Array.isArray(I.value)?I.value:[I.value];for(let q=0,z=U.length;q<z;q++){const G=U[q],F=v(G),k=M%A,O=k%F.boundary,W=k+O;M+=O,W!==0&&A-W<F.storage&&(M+=A-W),I.__data=new Float32Array(F.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=M,M+=F.storage}}}const E=M%A;return E>0&&(M+=A-E),_.__size=M,_.__cache={},this}function v(_){const x={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(x.boundary=4,x.storage=4):_.isVector2?(x.boundary=8,x.storage=8):_.isVector3||_.isColor?(x.boundary=16,x.storage=12):_.isVector4?(x.boundary=16,x.storage=16):_.isMatrix3?(x.boundary=48,x.storage=48):_.isMatrix4?(x.boundary=64,x.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),x}function g(_){const x=_.target;x.removeEventListener("dispose",g);const M=o.indexOf(x.__bindingPointIndex);o.splice(M,1),t.deleteBuffer(a[x.id]),delete a[x.id],delete s[x.id]}function y(){for(const _ in a)t.deleteBuffer(a[_]);o=[],a={},s={}}return{bind:l,update:f,dispose:y}}class nee{constructor(e={}){const{canvas:n=GK(),context:r=null,depth:a=!0,stencil:s=!1,alpha:o=!1,antialias:u=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:f=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let d;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=r.getContextAttributes().alpha}else d=o;const h=new Uint32Array(4),m=new Int32Array(4);let v=null,g=null;const y=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ro,this.toneMapping=ol,this.toneMappingExposure=1;const x=this;let M=!1,A=0,E=0,N=null,D=-1,C=null;const T=new On,P=new On;let I=null;const U=new gt(0);let q=0,z=n.width,G=n.height,F=1,k=null,O=null;const W=new On(0,0,z,G),X=new On(0,0,z,G);let ee=!1;const J=new wx;let Y=!1,ie=!1;const K=new Ht,re=new Ht,oe=new ge,ce=new On,me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Se=!1;function le(){return N===null?F:1}let Q=r;function Ee(de,Le){return n.getContext(de,Le)}try{const de={alpha:!0,depth:a,stencil:s,antialias:u,premultipliedAlpha:l,preserveDrawingBuffer:f,powerPreference:c,failIfMajorPerformanceCaveat:p};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${fD}`),n.addEventListener("webglcontextlost",Ae,!1),n.addEventListener("webglcontextrestored",Fe,!1),n.addEventListener("webglcontextcreationerror",qe,!1),Q===null){const Le="webgl2";if(Q=Ee(Le,de),Q===null)throw Ee(Le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(de){throw console.error("THREE.WebGLRenderer: "+de.message),de}let ne,se,xe,ve,te,$,B,ae,ue,_e,be,Pe,Te,Ie,Oe,Be,He,Qe,et,Xe,je,we,V,j;function pe(){ne=new m3e(Q),ne.init(),we=new eee(Q,ne),se=new l3e(Q,ne,e,we),xe=new YDe(Q),se.reverseDepthBuffer&&xe.buffers.depth.setReversed(!0),ve=new y3e(Q),te=new kDe,$=new tRe(Q,ne,xe,te,se,we,ve),B=new f3e(x),ae=new h3e(x),ue=new EAe(Q),V=new o3e(Q,ue),_e=new v3e(Q,ue,ve,V),be=new b3e(Q,_e,ue,ve),et=new x3e(Q,se,$),Be=new c3e(te),Pe=new LDe(x,B,ae,ne,se,V,Be),Te=new uRe(x,te),Ie=new FDe,Oe=new VDe(ne),Qe=new s3e(x,B,ae,xe,be,d,l),He=new jDe(x,be,se),j=new lRe(Q,ve,se,xe),Xe=new u3e(Q,ne,ve),je=new g3e(Q,ne,ve),ve.programs=Pe.programs,x.capabilities=se,x.extensions=ne,x.properties=te,x.renderLists=Ie,x.shadowMap=He,x.state=xe,x.info=ve}pe();const he=new sRe(x,Q);this.xr=he,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const de=ne.get("WEBGL_lose_context");de&&de.loseContext()},this.forceContextRestore=function(){const de=ne.get("WEBGL_lose_context");de&&de.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(de){de!==void 0&&(F=de,this.setSize(z,G,!1))},this.getSize=function(de){return de.set(z,G)},this.setSize=function(de,Le,Ve=!0){if(he.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=de,G=Le,n.width=Math.floor(de*F),n.height=Math.floor(Le*F),Ve===!0&&(n.style.width=de+"px",n.style.height=Le+"px"),this.setViewport(0,0,de,Le)},this.getDrawingBufferSize=function(de){return de.set(z*F,G*F).floor()},this.setDrawingBufferSize=function(de,Le,Ve){z=de,G=Le,F=Ve,n.width=Math.floor(de*Ve),n.height=Math.floor(Le*Ve),this.setViewport(0,0,de,Le)},this.getCurrentViewport=function(de){return de.copy(T)},this.getViewport=function(de){return de.copy(W)},this.setViewport=function(de,Le,Ve,$e){de.isVector4?W.set(de.x,de.y,de.z,de.w):W.set(de,Le,Ve,$e),xe.viewport(T.copy(W).multiplyScalar(F).round())},this.getScissor=function(de){return de.copy(X)},this.setScissor=function(de,Le,Ve,$e){de.isVector4?X.set(de.x,de.y,de.z,de.w):X.set(de,Le,Ve,$e),xe.scissor(P.copy(X).multiplyScalar(F).round())},this.getScissorTest=function(){return ee},this.setScissorTest=function(de){xe.setScissorTest(ee=de)},this.setOpaqueSort=function(de){k=de},this.setTransparentSort=function(de){O=de},this.getClearColor=function(de){return de.copy(Qe.getClearColor())},this.setClearColor=function(){Qe.setClearColor.apply(Qe,arguments)},this.getClearAlpha=function(){return Qe.getClearAlpha()},this.setClearAlpha=function(){Qe.setClearAlpha.apply(Qe,arguments)},this.clear=function(de=!0,Le=!0,Ve=!0){let $e=0;if(de){let ke=!1;if(N!==null){const ft=N.texture.format;ke=ft===xD||ft===yD||ft===yx}if(ke){const ft=N.texture.type,ht=ft===Mu||ft===Ic||ft===zm||ft===oh||ft===mD||ft===vD,rt=Qe.getClearColor(),bt=Qe.getClearAlpha(),zt=rt.r,Lt=rt.g,Ct=rt.b;ht?(h[0]=zt,h[1]=Lt,h[2]=Ct,h[3]=bt,Q.clearBufferuiv(Q.COLOR,0,h)):(m[0]=zt,m[1]=Lt,m[2]=Ct,m[3]=bt,Q.clearBufferiv(Q.COLOR,0,m))}else $e|=Q.COLOR_BUFFER_BIT}Le&&($e|=Q.DEPTH_BUFFER_BIT,Q.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),Ve&&($e|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear($e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ae,!1),n.removeEventListener("webglcontextrestored",Fe,!1),n.removeEventListener("webglcontextcreationerror",qe,!1),Ie.dispose(),Oe.dispose(),te.dispose(),B.dispose(),ae.dispose(),be.dispose(),V.dispose(),j.dispose(),Pe.dispose(),he.dispose(),he.removeEventListener("sessionstart",Ln),he.removeEventListener("sessionend",Hn),br.stop()};function Ae(de){de.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const de=ve.autoReset,Le=He.enabled,Ve=He.autoUpdate,$e=He.needsUpdate,ke=He.type;pe(),ve.autoReset=de,He.enabled=Le,He.autoUpdate=Ve,He.needsUpdate=$e,He.type=ke}function qe(de){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",de.statusMessage)}function Ze(de){const Le=de.target;Le.removeEventListener("dispose",Ze),it(Le)}function it(de){ot(de),te.remove(de)}function ot(de){const Le=te.get(de).programs;Le!==void 0&&(Le.forEach(function(Ve){Pe.releaseProgram(Ve)}),de.isShaderMaterial&&Pe.releaseShaderCache(de))}this.renderBufferDirect=function(de,Le,Ve,$e,ke,ft){Le===null&&(Le=me);const ht=ke.isMesh&&ke.matrixWorld.determinant()<0,rt=er(de,Le,Ve,$e,ke);xe.setMaterial($e,ht);let bt=Ve.index,zt=1;if($e.wireframe===!0){if(bt=_e.getWireframeAttribute(Ve),bt===void 0)return;zt=2}const Lt=Ve.drawRange,Ct=Ve.attributes.position;let Tn=Lt.start*zt,An=(Lt.start+Lt.count)*zt;ft!==null&&(Tn=Math.max(Tn,ft.start*zt),An=Math.min(An,(ft.start+ft.count)*zt)),bt!==null?(Tn=Math.max(Tn,0),An=Math.min(An,bt.count)):Ct!=null&&(Tn=Math.max(Tn,0),An=Math.min(An,Ct.count));const Nn=An-Tn;if(Nn<0||Nn===1/0)return;V.setup(ke,$e,rt,Ve,bt);let an,It=Xe;if(bt!==null&&(an=ue.get(bt),It=je,It.setIndex(an)),ke.isMesh)$e.wireframe===!0?(xe.setLineWidth($e.wireframeLinewidth*le()),It.setMode(Q.LINES)):It.setMode(Q.TRIANGLES);else if(ke.isLine){let _t=$e.linewidth;_t===void 0&&(_t=1),xe.setLineWidth(_t*le()),ke.isLineSegments?It.setMode(Q.LINES):ke.isLineLoop?It.setMode(Q.LINE_LOOP):It.setMode(Q.LINE_STRIP)}else ke.isPoints?It.setMode(Q.POINTS):ke.isSprite&&It.setMode(Q.TRIANGLES);if(ke.isBatchedMesh)if(ke._multiDrawInstances!==null)It.renderMultiDrawInstances(ke._multiDrawStarts,ke._multiDrawCounts,ke._multiDrawCount,ke._multiDrawInstances);else if(ne.get("WEBGL_multi_draw"))It.renderMultiDraw(ke._multiDrawStarts,ke._multiDrawCounts,ke._multiDrawCount);else{const _t=ke._multiDrawStarts,wn=ke._multiDrawCounts,Yt=ke._multiDrawCount,Yr=bt?ue.get(bt).bytesPerElement:1,Ai=te.get($e).currentProgram.getUniforms();for(let Vn=0;Vn<Yt;Vn++)Ai.setValue(Q,"_gl_DrawID",Vn),It.render(_t[Vn]/Yr,wn[Vn])}else if(ke.isInstancedMesh)It.renderInstances(Tn,Nn,ke.count);else if(Ve.isInstancedBufferGeometry){const _t=Ve._maxInstanceCount!==void 0?Ve._maxInstanceCount:1/0,wn=Math.min(Ve.instanceCount,_t);It.renderInstances(Tn,Nn,wn)}else It.render(Tn,Nn)};function tt(de,Le,Ve){de.transparent===!0&&de.side===ko&&de.forceSinglePass===!1?(de.side=Pa,de.needsUpdate=!0,sr(de,Le,Ve),de.side=Sl,de.needsUpdate=!0,sr(de,Le,Ve),de.side=ko):sr(de,Le,Ve)}this.compile=function(de,Le,Ve=null){Ve===null&&(Ve=de),g=Oe.get(Ve),g.init(Le),_.push(g),Ve.traverseVisible(function(ke){ke.isLight&&ke.layers.test(Le.layers)&&(g.pushLight(ke),ke.castShadow&&g.pushShadow(ke))}),de!==Ve&&de.traverseVisible(function(ke){ke.isLight&&ke.layers.test(Le.layers)&&(g.pushLight(ke),ke.castShadow&&g.pushShadow(ke))}),g.setupLights();const $e=new Set;return de.traverse(function(ke){if(!(ke.isMesh||ke.isPoints||ke.isLine||ke.isSprite))return;const ft=ke.material;if(ft)if(Array.isArray(ft))for(let ht=0;ht<ft.length;ht++){const rt=ft[ht];tt(rt,Ve,ke),$e.add(rt)}else tt(ft,Ve,ke),$e.add(ft)}),_.pop(),g=null,$e},this.compileAsync=function(de,Le,Ve=null){const $e=this.compile(de,Le,Ve);return new Promise(ke=>{function ft(){if($e.forEach(function(ht){te.get(ht).currentProgram.isReady()&&$e.delete(ht)}),$e.size===0){ke(de);return}setTimeout(ft,10)}ne.get("KHR_parallel_shader_compile")!==null?ft():setTimeout(ft,10)})};let Nt=null;function Xt(de){Nt&&Nt(de)}function Ln(){br.stop()}function Hn(){br.start()}const br=new YK;br.setAnimationLoop(Xt),typeof self<"u"&&br.setContext(self),this.setAnimationLoop=function(de){Nt=de,he.setAnimationLoop(de),de===null?br.stop():br.start()},he.addEventListener("sessionstart",Ln),he.addEventListener("sessionend",Hn),this.render=function(de,Le){if(Le!==void 0&&Le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;if(de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),Le.parent===null&&Le.matrixWorldAutoUpdate===!0&&Le.updateMatrixWorld(),he.enabled===!0&&he.isPresenting===!0&&(he.cameraAutoUpdate===!0&&he.updateCamera(Le),Le=he.getCamera()),de.isScene===!0&&de.onBeforeRender(x,de,Le,N),g=Oe.get(de,_.length),g.init(Le),_.push(g),re.multiplyMatrices(Le.projectionMatrix,Le.matrixWorldInverse),J.setFromProjectionMatrix(re),ie=this.localClippingEnabled,Y=Be.init(this.clippingPlanes,ie),v=Ie.get(de,y.length),v.init(),y.push(v),he.enabled===!0&&he.isPresenting===!0){const ft=x.xr.getDepthSensingMesh();ft!==null&&Un(ft,Le,-1/0,x.sortObjects)}Un(de,Le,0,x.sortObjects),v.finish(),x.sortObjects===!0&&v.sort(k,O),Se=he.enabled===!1||he.isPresenting===!1||he.hasDepthSensing()===!1,Se&&Qe.addToRenderList(v,de),this.info.render.frame++,Y===!0&&Be.beginShadows();const Ve=g.state.shadowsArray;He.render(Ve,de,Le),Y===!0&&Be.endShadows(),this.info.autoReset===!0&&this.info.reset();const $e=v.opaque,ke=v.transmissive;if(g.setupLights(),Le.isArrayCamera){const ft=Le.cameras;if(ke.length>0)for(let ht=0,rt=ft.length;ht<rt;ht++){const bt=ft[ht];ar($e,ke,de,bt)}Se&&Qe.render(de);for(let ht=0,rt=ft.length;ht<rt;ht++){const bt=ft[ht];Rr(v,de,bt,bt.viewport)}}else ke.length>0&&ar($e,ke,de,Le),Se&&Qe.render(de),Rr(v,de,Le);N!==null&&($.updateMultisampleRenderTarget(N),$.updateRenderTargetMipmap(N)),de.isScene===!0&&de.onAfterRender(x,de,Le),V.resetDefaultState(),D=-1,C=null,_.pop(),_.length>0?(g=_[_.length-1],Y===!0&&Be.setGlobalState(x.clippingPlanes,g.state.camera)):g=null,y.pop(),y.length>0?v=y[y.length-1]:v=null};function Un(de,Le,Ve,$e){if(de.visible===!1)return;if(de.layers.test(Le.layers)){if(de.isGroup)Ve=de.renderOrder;else if(de.isLOD)de.autoUpdate===!0&&de.update(Le);else if(de.isLight)g.pushLight(de),de.castShadow&&g.pushShadow(de);else if(de.isSprite){if(!de.frustumCulled||J.intersectsSprite(de)){$e&&ce.setFromMatrixPosition(de.matrixWorld).applyMatrix4(re);const ht=be.update(de),rt=de.material;rt.visible&&v.push(de,ht,rt,Ve,ce.z,null)}}else if((de.isMesh||de.isLine||de.isPoints)&&(!de.frustumCulled||J.intersectsObject(de))){const ht=be.update(de),rt=de.material;if($e&&(de.boundingSphere!==void 0?(de.boundingSphere===null&&de.computeBoundingSphere(),ce.copy(de.boundingSphere.center)):(ht.boundingSphere===null&&ht.computeBoundingSphere(),ce.copy(ht.boundingSphere.center)),ce.applyMatrix4(de.matrixWorld).applyMatrix4(re)),Array.isArray(rt)){const bt=ht.groups;for(let zt=0,Lt=bt.length;zt<Lt;zt++){const Ct=bt[zt],Tn=rt[Ct.materialIndex];Tn&&Tn.visible&&v.push(de,ht,Tn,Ve,ce.z,Ct)}}else rt.visible&&v.push(de,ht,rt,Ve,ce.z,null)}}const ft=de.children;for(let ht=0,rt=ft.length;ht<rt;ht++)Un(ft[ht],Le,Ve,$e)}function Rr(de,Le,Ve,$e){const ke=de.opaque,ft=de.transmissive,ht=de.transparent;g.setupLightsView(Ve),Y===!0&&Be.setGlobalState(x.clippingPlanes,Ve),$e&&xe.viewport(T.copy($e)),ke.length>0&&Xr(ke,Le,Ve),ft.length>0&&Xr(ft,Le,Ve),ht.length>0&&Xr(ht,Le,Ve),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1)}function ar(de,Le,Ve,$e){if((Ve.isScene===!0?Ve.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[$e.id]===void 0&&(g.state.transmissionRenderTarget[$e.id]=new Eu(1,1,{generateMipmaps:!0,type:ne.has("EXT_color_buffer_half_float")||ne.has("EXT_color_buffer_float")?gv:Mu,minFilter:tl,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:jn.workingColorSpace}));const ft=g.state.transmissionRenderTarget[$e.id],ht=$e.viewport||T;ft.setSize(ht.z,ht.w);const rt=x.getRenderTarget();x.setRenderTarget(ft),x.getClearColor(U),q=x.getClearAlpha(),q<1&&x.setClearColor(16777215,.5),x.clear(),Se&&Qe.render(Ve);const bt=x.toneMapping;x.toneMapping=ol;const zt=$e.viewport;if($e.viewport!==void 0&&($e.viewport=void 0),g.setupLightsView($e),Y===!0&&Be.setGlobalState(x.clippingPlanes,$e),Xr(de,Ve,$e),$.updateMultisampleRenderTarget(ft),$.updateRenderTargetMipmap(ft),ne.has("WEBGL_multisampled_render_to_texture")===!1){let Lt=!1;for(let Ct=0,Tn=Le.length;Ct<Tn;Ct++){const An=Le[Ct],Nn=An.object,an=An.geometry,It=An.material,_t=An.group;if(It.side===ko&&Nn.layers.test($e.layers)){const wn=It.side;It.side=Pa,It.needsUpdate=!0,Fn(Nn,Ve,$e,an,It,_t),It.side=wn,It.needsUpdate=!0,Lt=!0}}Lt===!0&&($.updateMultisampleRenderTarget(ft),$.updateRenderTargetMipmap(ft))}x.setRenderTarget(rt),x.setClearColor(U,q),zt!==void 0&&($e.viewport=zt),x.toneMapping=bt}function Xr(de,Le,Ve){const $e=Le.isScene===!0?Le.overrideMaterial:null;for(let ke=0,ft=de.length;ke<ft;ke++){const ht=de[ke],rt=ht.object,bt=ht.geometry,zt=$e===null?ht.material:$e,Lt=ht.group;rt.layers.test(Ve.layers)&&Fn(rt,Le,Ve,bt,zt,Lt)}}function Fn(de,Le,Ve,$e,ke,ft){de.onBeforeRender(x,Le,Ve,$e,ke,ft),de.modelViewMatrix.multiplyMatrices(Ve.matrixWorldInverse,de.matrixWorld),de.normalMatrix.getNormalMatrix(de.modelViewMatrix),ke.onBeforeRender(x,Le,Ve,$e,de,ft),ke.transparent===!0&&ke.side===ko&&ke.forceSinglePass===!1?(ke.side=Pa,ke.needsUpdate=!0,x.renderBufferDirect(Ve,Le,$e,ke,de,ft),ke.side=Sl,ke.needsUpdate=!0,x.renderBufferDirect(Ve,Le,$e,ke,de,ft),ke.side=ko):x.renderBufferDirect(Ve,Le,$e,ke,de,ft),de.onAfterRender(x,Le,Ve,$e,ke,ft)}function sr(de,Le,Ve){Le.isScene!==!0&&(Le=me);const $e=te.get(de),ke=g.state.lights,ft=g.state.shadowsArray,ht=ke.state.version,rt=Pe.getParameters(de,ke.state,ft,Le,Ve),bt=Pe.getProgramCacheKey(rt);let zt=$e.programs;$e.environment=de.isMeshStandardMaterial?Le.environment:null,$e.fog=Le.fog,$e.envMap=(de.isMeshStandardMaterial?ae:B).get(de.envMap||$e.environment),$e.envMapRotation=$e.environment!==null&&de.envMap===null?Le.environmentRotation:de.envMapRotation,zt===void 0&&(de.addEventListener("dispose",Ze),zt=new Map,$e.programs=zt);let Lt=zt.get(bt);if(Lt!==void 0){if($e.currentProgram===Lt&&$e.lightsStateVersion===ht)return Sn(de,rt),Lt}else rt.uniforms=Pe.getUniforms(de),de.onBeforeCompile(rt,x),Lt=Pe.acquireProgram(rt,bt),zt.set(bt,Lt),$e.uniforms=rt.uniforms;const Ct=$e.uniforms;return(!de.isShaderMaterial&&!de.isRawShaderMaterial||de.clipping===!0)&&(Ct.clippingPlanes=Be.uniform),Sn(de,rt),$e.needsLights=Ha(de),$e.lightsStateVersion=ht,$e.needsLights&&(Ct.ambientLightColor.value=ke.state.ambient,Ct.lightProbe.value=ke.state.probe,Ct.directionalLights.value=ke.state.directional,Ct.directionalLightShadows.value=ke.state.directionalShadow,Ct.spotLights.value=ke.state.spot,Ct.spotLightShadows.value=ke.state.spotShadow,Ct.rectAreaLights.value=ke.state.rectArea,Ct.ltc_1.value=ke.state.rectAreaLTC1,Ct.ltc_2.value=ke.state.rectAreaLTC2,Ct.pointLights.value=ke.state.point,Ct.pointLightShadows.value=ke.state.pointShadow,Ct.hemisphereLights.value=ke.state.hemi,Ct.directionalShadowMap.value=ke.state.directionalShadowMap,Ct.directionalShadowMatrix.value=ke.state.directionalShadowMatrix,Ct.spotShadowMap.value=ke.state.spotShadowMap,Ct.spotLightMatrix.value=ke.state.spotLightMatrix,Ct.spotLightMap.value=ke.state.spotLightMap,Ct.pointShadowMap.value=ke.state.pointShadowMap,Ct.pointShadowMatrix.value=ke.state.pointShadowMatrix),$e.currentProgram=Lt,$e.uniformsList=null,Lt}function Ir(de){if(de.uniformsList===null){const Le=de.currentProgram.getUniforms();de.uniformsList=S2.seqWithValue(Le.seq,de.uniforms)}return de.uniformsList}function Sn(de,Le){const Ve=te.get(de);Ve.outputColorSpace=Le.outputColorSpace,Ve.batching=Le.batching,Ve.batchingColor=Le.batchingColor,Ve.instancing=Le.instancing,Ve.instancingColor=Le.instancingColor,Ve.instancingMorph=Le.instancingMorph,Ve.skinning=Le.skinning,Ve.morphTargets=Le.morphTargets,Ve.morphNormals=Le.morphNormals,Ve.morphColors=Le.morphColors,Ve.morphTargetsCount=Le.morphTargetsCount,Ve.numClippingPlanes=Le.numClippingPlanes,Ve.numIntersection=Le.numClipIntersection,Ve.vertexAlphas=Le.vertexAlphas,Ve.vertexTangents=Le.vertexTangents,Ve.toneMapping=Le.toneMapping}function er(de,Le,Ve,$e,ke){Le.isScene!==!0&&(Le=me),$.resetTextureUnits();const ft=Le.fog,ht=$e.isMeshStandardMaterial?Le.environment:null,rt=N===null?x.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:Zc,bt=($e.isMeshStandardMaterial?ae:B).get($e.envMap||ht),zt=$e.vertexColors===!0&&!!Ve.attributes.color&&Ve.attributes.color.itemSize===4,Lt=!!Ve.attributes.tangent&&(!!$e.normalMap||$e.anisotropy>0),Ct=!!Ve.morphAttributes.position,Tn=!!Ve.morphAttributes.normal,An=!!Ve.morphAttributes.color;let Nn=ol;$e.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(Nn=x.toneMapping);const an=Ve.morphAttributes.position||Ve.morphAttributes.normal||Ve.morphAttributes.color,It=an!==void 0?an.length:0,_t=te.get($e),wn=g.state.lights;if(Y===!0&&(ie===!0||de!==C)){const Sr=de===C&&$e.id===D;Be.setState($e,de,Sr)}let Yt=!1;$e.version===_t.__version?(_t.needsLights&&_t.lightsStateVersion!==wn.state.version||_t.outputColorSpace!==rt||ke.isBatchedMesh&&_t.batching===!1||!ke.isBatchedMesh&&_t.batching===!0||ke.isBatchedMesh&&_t.batchingColor===!0&&ke.colorTexture===null||ke.isBatchedMesh&&_t.batchingColor===!1&&ke.colorTexture!==null||ke.isInstancedMesh&&_t.instancing===!1||!ke.isInstancedMesh&&_t.instancing===!0||ke.isSkinnedMesh&&_t.skinning===!1||!ke.isSkinnedMesh&&_t.skinning===!0||ke.isInstancedMesh&&_t.instancingColor===!0&&ke.instanceColor===null||ke.isInstancedMesh&&_t.instancingColor===!1&&ke.instanceColor!==null||ke.isInstancedMesh&&_t.instancingMorph===!0&&ke.morphTexture===null||ke.isInstancedMesh&&_t.instancingMorph===!1&&ke.morphTexture!==null||_t.envMap!==bt||$e.fog===!0&&_t.fog!==ft||_t.numClippingPlanes!==void 0&&(_t.numClippingPlanes!==Be.numPlanes||_t.numIntersection!==Be.numIntersection)||_t.vertexAlphas!==zt||_t.vertexTangents!==Lt||_t.morphTargets!==Ct||_t.morphNormals!==Tn||_t.morphColors!==An||_t.toneMapping!==Nn||_t.morphTargetsCount!==It)&&(Yt=!0):(Yt=!0,_t.__version=$e.version);let Yr=_t.currentProgram;Yt===!0&&(Yr=sr($e,Le,ke));let Ai=!1,Vn=!1,Va=!1;const or=Yr.getUniforms(),Wa=_t.uniforms;if(xe.useProgram(Yr.program)&&(Ai=!0,Vn=!0,Va=!0),$e.id!==D&&(D=$e.id,Vn=!0),Ai||C!==de){se.reverseDepthBuffer?(K.copy(de.projectionMatrix),YTe(K),QTe(K),or.setValue(Q,"projectionMatrix",K)):or.setValue(Q,"projectionMatrix",de.projectionMatrix),or.setValue(Q,"viewMatrix",de.matrixWorldInverse);const Sr=or.map.cameraPosition;Sr!==void 0&&Sr.setValue(Q,oe.setFromMatrixPosition(de.matrixWorld)),se.logarithmicDepthBuffer&&or.setValue(Q,"logDepthBufFC",2/(Math.log(de.far+1)/Math.LN2)),($e.isMeshPhongMaterial||$e.isMeshToonMaterial||$e.isMeshLambertMaterial||$e.isMeshBasicMaterial||$e.isMeshStandardMaterial||$e.isShaderMaterial)&&or.setValue(Q,"isOrthographic",de.isOrthographicCamera===!0),C!==de&&(C=de,Vn=!0,Va=!0)}if(ke.isSkinnedMesh){or.setOptional(Q,ke,"bindMatrix"),or.setOptional(Q,ke,"bindMatrixInverse");const Sr=ke.skeleton;Sr&&(Sr.boneTexture===null&&Sr.computeBoneTexture(),or.setValue(Q,"boneTexture",Sr.boneTexture,$))}ke.isBatchedMesh&&(or.setOptional(Q,ke,"batchingTexture"),or.setValue(Q,"batchingTexture",ke._matricesTexture,$),or.setOptional(Q,ke,"batchingIdTexture"),or.setValue(Q,"batchingIdTexture",ke._indirectTexture,$),or.setOptional(Q,ke,"batchingColorTexture"),ke._colorsTexture!==null&&or.setValue(Q,"batchingColorTexture",ke._colorsTexture,$));const bo=Ve.morphAttributes;if((bo.position!==void 0||bo.normal!==void 0||bo.color!==void 0)&&et.update(ke,Ve,Yr),(Vn||_t.receiveShadow!==ke.receiveShadow)&&(_t.receiveShadow=ke.receiveShadow,or.setValue(Q,"receiveShadow",ke.receiveShadow)),$e.isMeshGouraudMaterial&&$e.envMap!==null&&(Wa.envMap.value=bt,Wa.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1),$e.isMeshStandardMaterial&&$e.envMap===null&&Le.environment!==null&&(Wa.envMapIntensity.value=Le.environmentIntensity),Vn&&(or.setValue(Q,"toneMappingExposure",x.toneMappingExposure),_t.needsLights&&Pr(Wa,Va),ft&&$e.fog===!0&&Te.refreshFogUniforms(Wa,ft),Te.refreshMaterialUniforms(Wa,$e,F,G,g.state.transmissionRenderTarget[de.id]),S2.upload(Q,Ir(_t),Wa,$)),$e.isShaderMaterial&&$e.uniformsNeedUpdate===!0&&(S2.upload(Q,Ir(_t),Wa,$),$e.uniformsNeedUpdate=!1),$e.isSpriteMaterial&&or.setValue(Q,"center",ke.center),or.setValue(Q,"modelViewMatrix",ke.modelViewMatrix),or.setValue(Q,"normalMatrix",ke.normalMatrix),or.setValue(Q,"modelMatrix",ke.matrixWorld),$e.isShaderMaterial||$e.isRawShaderMaterial){const Sr=$e.uniformsGroups;for(let ea=0,ef=Sr.length;ea<ef;ea++){const Fu=Sr[ea];j.update(Fu,Yr),j.bind(Fu,Yr)}}return Yr}function Pr(de,Le){de.ambientLightColor.needsUpdate=Le,de.lightProbe.needsUpdate=Le,de.directionalLights.needsUpdate=Le,de.directionalLightShadows.needsUpdate=Le,de.pointLights.needsUpdate=Le,de.pointLightShadows.needsUpdate=Le,de.spotLights.needsUpdate=Le,de.spotLightShadows.needsUpdate=Le,de.rectAreaLights.needsUpdate=Le,de.hemisphereLights.needsUpdate=Le}function Ha(de){return de.isMeshLambertMaterial||de.isMeshToonMaterial||de.isMeshPhongMaterial||de.isMeshStandardMaterial||de.isShadowMaterial||de.isShaderMaterial&&de.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(de,Le,Ve){te.get(de.texture).__webglTexture=Le,te.get(de.depthTexture).__webglTexture=Ve;const $e=te.get(de);$e.__hasExternalTextures=!0,$e.__autoAllocateDepthBuffer=Ve===void 0,$e.__autoAllocateDepthBuffer||ne.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$e.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(de,Le){const Ve=te.get(de);Ve.__webglFramebuffer=Le,Ve.__useDefaultFramebuffer=Le===void 0},this.setRenderTarget=function(de,Le=0,Ve=0){N=de,A=Le,E=Ve;let $e=!0,ke=null,ft=!1,ht=!1;if(de){const bt=te.get(de);if(bt.__useDefaultFramebuffer!==void 0)xe.bindFramebuffer(Q.FRAMEBUFFER,null),$e=!1;else if(bt.__webglFramebuffer===void 0)$.setupRenderTarget(de);else if(bt.__hasExternalTextures)$.rebindTextures(de,te.get(de.texture).__webglTexture,te.get(de.depthTexture).__webglTexture);else if(de.depthBuffer){const Ct=de.depthTexture;if(bt.__boundDepthTexture!==Ct){if(Ct!==null&&te.has(Ct)&&(de.width!==Ct.image.width||de.height!==Ct.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(de)}}const zt=de.texture;(zt.isData3DTexture||zt.isDataArrayTexture||zt.isCompressedArrayTexture)&&(ht=!0);const Lt=te.get(de).__webglFramebuffer;de.isWebGLCubeRenderTarget?(Array.isArray(Lt[Le])?ke=Lt[Le][Ve]:ke=Lt[Le],ft=!0):de.samples>0&&$.useMultisampledRTT(de)===!1?ke=te.get(de).__webglMultisampledFramebuffer:Array.isArray(Lt)?ke=Lt[Ve]:ke=Lt,T.copy(de.viewport),P.copy(de.scissor),I=de.scissorTest}else T.copy(W).multiplyScalar(F).floor(),P.copy(X).multiplyScalar(F).floor(),I=ee;if(xe.bindFramebuffer(Q.FRAMEBUFFER,ke)&&$e&&xe.drawBuffers(de,ke),xe.viewport(T),xe.scissor(P),xe.setScissorTest(I),ft){const bt=te.get(de.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+Le,bt.__webglTexture,Ve)}else if(ht){const bt=te.get(de.texture),zt=Le||0;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,bt.__webglTexture,Ve||0,zt)}D=-1},this.readRenderTargetPixels=function(de,Le,Ve,$e,ke,ft,ht){if(!(de&&de.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let rt=te.get(de).__webglFramebuffer;if(de.isWebGLCubeRenderTarget&&ht!==void 0&&(rt=rt[ht]),rt){xe.bindFramebuffer(Q.FRAMEBUFFER,rt);try{const bt=de.texture,zt=bt.format,Lt=bt.type;if(!se.textureFormatReadable(zt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!se.textureTypeReadable(Lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Le>=0&&Le<=de.width-$e&&Ve>=0&&Ve<=de.height-ke&&Q.readPixels(Le,Ve,$e,ke,we.convert(zt),we.convert(Lt),ft)}finally{const bt=N!==null?te.get(N).__webglFramebuffer:null;xe.bindFramebuffer(Q.FRAMEBUFFER,bt)}}},this.readRenderTargetPixelsAsync=async function(de,Le,Ve,$e,ke,ft,ht){if(!(de&&de.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let rt=te.get(de).__webglFramebuffer;if(de.isWebGLCubeRenderTarget&&ht!==void 0&&(rt=rt[ht]),rt){const bt=de.texture,zt=bt.format,Lt=bt.type;if(!se.textureFormatReadable(zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!se.textureTypeReadable(Lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Le>=0&&Le<=de.width-$e&&Ve>=0&&Ve<=de.height-ke){xe.bindFramebuffer(Q.FRAMEBUFFER,rt);const Ct=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Ct),Q.bufferData(Q.PIXEL_PACK_BUFFER,ft.byteLength,Q.STREAM_READ),Q.readPixels(Le,Ve,$e,ke,we.convert(zt),we.convert(Lt),0);const Tn=N!==null?te.get(N).__webglFramebuffer:null;xe.bindFramebuffer(Q.FRAMEBUFFER,Tn);const An=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),await XTe(Q,An,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Ct),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,ft),Q.deleteBuffer(Ct),Q.deleteSync(An),ft}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(de,Le=null,Ve=0){de.isTexture!==!0&&(b2("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Le=arguments[0]||null,de=arguments[1]);const $e=Math.pow(2,-Ve),ke=Math.floor(de.image.width*$e),ft=Math.floor(de.image.height*$e),ht=Le!==null?Le.x:0,rt=Le!==null?Le.y:0;$.setTexture2D(de,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,Ve,0,0,ht,rt,ke,ft),xe.unbindTexture()},this.copyTextureToTexture=function(de,Le,Ve=null,$e=null,ke=0){de.isTexture!==!0&&(b2("WebGLRenderer: copyTextureToTexture function signature has changed."),$e=arguments[0]||null,de=arguments[1],Le=arguments[2],ke=arguments[3]||0,Ve=null);let ft,ht,rt,bt,zt,Lt;Ve!==null?(ft=Ve.max.x-Ve.min.x,ht=Ve.max.y-Ve.min.y,rt=Ve.min.x,bt=Ve.min.y):(ft=de.image.width,ht=de.image.height,rt=0,bt=0),$e!==null?(zt=$e.x,Lt=$e.y):(zt=0,Lt=0);const Ct=we.convert(Le.format),Tn=we.convert(Le.type);$.setTexture2D(Le,0),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,Le.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Le.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,Le.unpackAlignment);const An=Q.getParameter(Q.UNPACK_ROW_LENGTH),Nn=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),an=Q.getParameter(Q.UNPACK_SKIP_PIXELS),It=Q.getParameter(Q.UNPACK_SKIP_ROWS),_t=Q.getParameter(Q.UNPACK_SKIP_IMAGES),wn=de.isCompressedTexture?de.mipmaps[ke]:de.image;Q.pixelStorei(Q.UNPACK_ROW_LENGTH,wn.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,wn.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,rt),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,bt),de.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,ke,zt,Lt,ft,ht,Ct,Tn,wn.data):de.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,ke,zt,Lt,wn.width,wn.height,Ct,wn.data):Q.texSubImage2D(Q.TEXTURE_2D,ke,zt,Lt,ft,ht,Ct,Tn,wn),Q.pixelStorei(Q.UNPACK_ROW_LENGTH,An),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Nn),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,an),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,It),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,_t),ke===0&&Le.generateMipmaps&&Q.generateMipmap(Q.TEXTURE_2D),xe.unbindTexture()},this.copyTextureToTexture3D=function(de,Le,Ve=null,$e=null,ke=0){de.isTexture!==!0&&(b2("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ve=arguments[0]||null,$e=arguments[1]||null,de=arguments[2],Le=arguments[3],ke=arguments[4]||0);let ft,ht,rt,bt,zt,Lt,Ct,Tn,An;const Nn=de.isCompressedTexture?de.mipmaps[ke]:de.image;Ve!==null?(ft=Ve.max.x-Ve.min.x,ht=Ve.max.y-Ve.min.y,rt=Ve.max.z-Ve.min.z,bt=Ve.min.x,zt=Ve.min.y,Lt=Ve.min.z):(ft=Nn.width,ht=Nn.height,rt=Nn.depth,bt=0,zt=0,Lt=0),$e!==null?(Ct=$e.x,Tn=$e.y,An=$e.z):(Ct=0,Tn=0,An=0);const an=we.convert(Le.format),It=we.convert(Le.type);let _t;if(Le.isData3DTexture)$.setTexture3D(Le,0),_t=Q.TEXTURE_3D;else if(Le.isDataArrayTexture||Le.isCompressedArrayTexture)$.setTexture2DArray(Le,0),_t=Q.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,Le.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Le.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,Le.unpackAlignment);const wn=Q.getParameter(Q.UNPACK_ROW_LENGTH),Yt=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Yr=Q.getParameter(Q.UNPACK_SKIP_PIXELS),Ai=Q.getParameter(Q.UNPACK_SKIP_ROWS),Vn=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Nn.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Nn.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,bt),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,zt),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Lt),de.isDataTexture||de.isData3DTexture?Q.texSubImage3D(_t,ke,Ct,Tn,An,ft,ht,rt,an,It,Nn.data):Le.isCompressedArrayTexture?Q.compressedTexSubImage3D(_t,ke,Ct,Tn,An,ft,ht,rt,an,Nn.data):Q.texSubImage3D(_t,ke,Ct,Tn,An,ft,ht,rt,an,It,Nn),Q.pixelStorei(Q.UNPACK_ROW_LENGTH,wn),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Yt),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Yr),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,Ai),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Vn),ke===0&&Le.generateMipmaps&&Q.generateMipmap(_t),xe.unbindTexture()},this.initRenderTarget=function(de){te.get(de).__webglFramebuffer===void 0&&$.setupRenderTarget(de)},this.initTexture=function(de){de.isCubeTexture?$.setTextureCube(de,0):de.isData3DTexture?$.setTexture3D(de,0):de.isDataArrayTexture||de.isCompressedArrayTexture?$.setTexture2DArray(de,0):$.setTexture2D(de,0),xe.unbindTexture()},this.resetState=function(){A=0,E=0,N=null,xe.reset(),V.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return nl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===SD?"display-p3":"srgb",n.unpackColorSpace=jn.workingColorSpace===xx?"display-p3":"srgb"}}class TD{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new gt(e),this.density=n}clone(){return new TD(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class AD{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new gt(e),this.near=n,this.far=r}clone(){return new AD(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class v_ extends Gn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new uo,this.environmentIntensity=1,this.environmentRotation=new uo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class ND{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=a1,this.updateRanges=[],this.version=0,this.uuid=no()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let a=0,s=this.stride;a<s;a++)this.array[e+a]=n.array[r+a];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=no()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=no()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ja=new ge;class lh{constructor(e,n,r,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Ja.fromBufferAttribute(this,n),Ja.applyMatrix4(e),this.setXYZ(n,Ja.x,Ja.y,Ja.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ja.fromBufferAttribute(this,n),Ja.applyNormalMatrix(e),this.setXYZ(n,Ja.x,Ja.y,Ja.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ja.fromBufferAttribute(this,n),Ja.transformDirection(e),this.setXYZ(n,Ja.x,Ja.y,Ja.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=rs(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=cn(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=rs(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=rs(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=rs(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=rs(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),a=cn(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=a,this}setXYZW(e,n,r,a,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=cn(n,this.array),r=cn(r,this.array),a=cn(a,this.array),s=cn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=a,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const a=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[a+s])}return new lr(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new lh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const a=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[a+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class H4 extends va{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _0;const cg=new ge,M0=new ge,E0=new ge,T0=new nt,fg=new nt,ree=new Ht,vS=new ge,pg=new ge,gS=new ge,dG=new nt,nP=new nt,hG=new nt;class iee extends Gn{constructor(e=new H4){if(super(),this.isSprite=!0,this.type="Sprite",_0===void 0){_0=new fn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new ND(n,5);_0.setIndex([0,1,2,0,2,3]),_0.setAttribute("position",new lh(r,3,0,!1)),_0.setAttribute("uv",new lh(r,2,3,!1))}this.geometry=_0,this.material=e,this.center=new nt(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),M0.setFromMatrixScale(this.matrixWorld),ree.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),E0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&M0.multiplyScalar(-E0.z);const r=this.material.rotation;let a,s;r!==0&&(s=Math.cos(r),a=Math.sin(r));const o=this.center;yS(vS.set(-.5,-.5,0),E0,o,M0,a,s),yS(pg.set(.5,-.5,0),E0,o,M0,a,s),yS(gS.set(.5,.5,0),E0,o,M0,a,s),dG.set(0,0),nP.set(1,0),hG.set(1,1);let u=e.ray.intersectTriangle(vS,pg,gS,!1,cg);if(u===null&&(yS(pg.set(-.5,.5,0),E0,o,M0,a,s),nP.set(0,1),u=e.ray.intersectTriangle(vS,gS,pg,!1,cg),u===null))return;const l=e.ray.origin.distanceTo(cg);l<e.near||l>e.far||n.push({distance:l,point:cg.clone(),uv:Es.getInterpolation(cg,vS,pg,gS,dG,nP,hG,new nt),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function yS(t,e,n,r,a,s){T0.subVectors(t,n).addScalar(.5).multiply(r),a!==void 0?(fg.x=s*T0.x-a*T0.y,fg.y=a*T0.x+s*T0.y):fg.copy(T0),t.copy(e),t.x+=fg.x,t.y+=fg.y,t.applyMatrix4(ree)}const xS=new ge,mG=new ge;class aee extends Gn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,a=n.length;r<a;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const a=this.levels;let s;for(s=0;s<a.length&&!(n<a[s].distance);s++);return a.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===e){const a=n.splice(r,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,a;for(r=1,a=n.length;r<a;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){xS.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(xS);this.getObjectForDistance(a).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){xS.setFromMatrixPosition(e.matrixWorld),mG.setFromMatrixPosition(this.matrixWorld);const r=xS.distanceTo(mG)/e.zoom;n[0].object.visible=!0;let a,s;for(a=1,s=n.length;a<s;a++){let o=n[a].distance;if(n[a].object.visible&&(o-=o*n[a].hysteresis),r>=o)n[a-1].object.visible=!1,n[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<s;a++)n[a].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let a=0,s=r.length;a<s;a++){const o=r[a];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const vG=new ge,gG=new On,yG=new On,cRe=new ge,xG=new Ht,bS=new ge,rP=new fa,bG=new Ht,iP=new Ph;class see extends Wr{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yL,this.bindMatrix=new Ht,this.bindMatrixInverse=new Ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new La),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,bS),this.boundingBox.expandByPoint(bS)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new fa),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,bS),this.boundingSphere.expandByPoint(bS)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,a=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rP.copy(this.boundingSphere),rP.applyMatrix4(a),e.ray.intersectsSphere(rP)!==!1&&(bG.copy(a).invert(),iP.copy(e.ray).applyMatrix4(bG),!(this.boundingBox!==null&&iP.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,iP)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new On,n=this.geometry.attributes.skinWeight;for(let r=0,a=n.count;r<a;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===yL?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===NK?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,a=this.geometry;gG.fromBufferAttribute(a.attributes.skinIndex,e),yG.fromBufferAttribute(a.attributes.skinWeight,e),vG.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=yG.getComponent(s);if(o!==0){const u=gG.getComponent(s);xG.multiplyMatrices(r.bones[u].matrixWorld,r.boneInverses[u]),n.addScaledVector(cRe.copy(vG).applyMatrix4(xG),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class V4 extends Gn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ul extends Ur{constructor(e=null,n=1,r=1,a,s,o,u,l,f=Vi,c=Vi,p,d){super(null,o,u,l,f,c,a,s,p,d),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const SG=new Ht,fRe=new Ht;class CD{constructor(e=[],n=[]){this.uuid=no(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,a=this.bones.length;r<a;r++)this.boneInverses.push(new Ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Ht;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,a=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const u=e[s]?e[s].matrixWorld:fRe;SG.multiplyMatrices(u,n[s]),SG.toArray(r,s*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new CD(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new ul(n,e,e,Ra,As);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const a=this.bones[n];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,a=e.bones.length;r<a;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new V4),this.bones.push(o),this.boneInverses.push(new Ht().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let a=0,s=n.length;a<s;a++){const o=n[a];e.bones.push(o.uuid);const u=r[a];e.boneInverses.push(u.toArray())}return e}}class ch extends lr{constructor(e,n,r,a=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const A0=new Ht,wG=new Ht,SS=[],_G=new La,pRe=new Ht,dg=new Wr,hg=new fa;class oee extends Wr{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new ch(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<r;a++)this.setMatrixAt(a,pRe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new La),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,A0),_G.copy(e.boundingBox).applyMatrix4(A0),this.boundingBox.union(_G)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new fa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,A0),hg.copy(e.boundingSphere).applyMatrix4(A0),this.boundingSphere.union(hg)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,a=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let u=0;u<r.length;u++)r[u]=a[o+u]}raycast(e,n){const r=this.matrixWorld,a=this.count;if(dg.geometry=this.geometry,dg.material=this.material,dg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),hg.copy(this.boundingSphere),hg.applyMatrix4(r),e.ray.intersectsSphere(hg)!==!1))for(let s=0;s<a;s++){this.getMatrixAt(s,A0),wG.multiplyMatrices(r,A0),dg.matrixWorld=wG,dg.raycast(e,SS);for(let o=0,u=SS.length;o<u;o++){const l=SS[o];l.instanceId=s,l.object=this,n.push(l)}SS.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new ch(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,a=r.length+1;this.morphTexture===null&&(this.morphTexture=new ul(new Float32Array(a*this.count),a,this.count,gD,As));const s=this.morphTexture.source.data.data;let o=0;for(let f=0;f<r.length;f++)o+=r[f];const u=this.geometry.morphTargetsRelative?1:1-o,l=a*e;s[l]=u,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function dRe(t,e){return t.z-e.z}function hRe(t,e){return e.z-t.z}class mRe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,r){const a=this.pool,s=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const o=a[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=n,o.index=r}reset(){this.list.length=0,this.index=0}}const Mf=new Ht,aP=new Ht,vRe=new Ht,gRe=new gt(1,1,1),MG=new Ht,sP=new wx,wS=new La,sd=new fa,mg=new ge,EG=new ge,yRe=new ge,oP=new mRe,Ta=new Wr,_S=[];function xRe(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const a=t.count;for(let s=0;s<a;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class uee extends Wr{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,n,r=n*2,a){super(new fn,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new ul(n,e,e,Ra,As);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),r=new ul(n,e,e,yx,Ic);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),r=new ul(n,e,e,Ra,As);r.colorSpace=jn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:u,itemSize:l,normalized:f}=o,c=new u.constructor(r*l),p=new lr(c,l,f);n.setAttribute(s,p)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(a):new Uint16Array(a);n.setIndex(new lr(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const a=e.getAttribute(r),s=n.getAttribute(r);if(a.itemSize!==s.itemSize||a.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new La);const e=this.boundingBox,n=this._drawInfo;e.makeEmpty();for(let r=0,a=n.length;r<a;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Mf),this.getBoundingBoxAt(s,wS).applyMatrix4(Mf),e.union(wS)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new fa);const e=this.boundingSphere,n=this._drawInfo;e.makeEmpty();for(let r=0,a=n.length;r<a;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Mf),this.getBoundingSphereAt(s,sd).applyMatrix4(Mf),e.union(sd)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let a=null;this._availableInstanceIds.length>0?(a=this._availableInstanceIds.pop(),this._drawInfo[a]=r):(a=this._drawInfo.length,this._drawInfo.push(r));const s=this._matricesTexture,o=s.image.data;vRe.toArray(o,a*16),s.needsUpdate=!0;const u=this._colorsTexture;return u&&(gRe.toArray(u.image.data,a*4),u.needsUpdate=!0),a}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const a={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,u=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?a.vertexCount=e.getAttribute("position").count:a.vertexCount=n,s===null?a.vertexStart=0:a.vertexStart=s.vertexStart+s.vertexCount;const f=e.getIndex(),c=f!==null;if(c&&(r===-1?a.indexCount=f.count:a.indexCount=r,s===null?a.indexStart=0:a.indexStart=s.indexStart+s.indexCount),a.indexStart!==-1&&a.indexStart+a.indexCount>this._maxIndexCount||a.vertexStart+a.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._geometryCount;return this._geometryCount++,o.push(a),u.push({start:c?a.indexStart:a.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new La,sphereInitialized:!1,sphere:new fa}),this.setGeometryAt(p,e),p}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,a=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),u=this._reservedRanges[e];if(a&&o.count>u.indexCount||n.attributes.position.count>u.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=u.vertexStart,f=u.vertexCount;for(const h in r.attributes){const m=n.getAttribute(h),v=r.getAttribute(h);xRe(m,v,l);const g=m.itemSize;for(let y=m.count,_=f;y<_;y++){const x=l+y;for(let M=0;M<g;M++)v.setComponent(x,M,0)}v.needsUpdate=!0,v.addUpdateRange(l*g,f*g)}if(a){const h=u.indexStart;for(let m=0;m<o.count;m++)s.setX(h+m,l+o.getX(m));for(let m=o.count,v=u.indexCount;m<v;m++)s.setX(h+m,l);s.needsUpdate=!0,s.addUpdateRange(h,u.indexCount)}const c=this._bounds[e];n.boundingBox!==null?(c.box.copy(n.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,n.boundingSphere!==null?(c.sphere.copy(n.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const p=this._drawRanges[e],d=n.getAttribute("position");return p.count=a?o.count:d.count,this._visibilityChanged=!0,e}deleteInstance(e){const n=this._drawInfo;return e>=n.length||n[e].active===!1?this:(n[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this._bounds[e],a=r.box,s=this.geometry;if(r.boxInitialized===!1){a.makeEmpty();const o=s.index,u=s.attributes.position,l=this._drawRanges[e];for(let f=l.start,c=l.start+l.count;f<c;f++){let p=f;o&&(p=o.getX(p)),a.expandByPoint(mg.fromBufferAttribute(u,p))}r.boxInitialized=!0}return n.copy(a),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this._bounds[e],a=r.sphere,s=this.geometry;if(r.sphereInitialized===!1){a.makeEmpty(),this.getBoundingBoxAt(e,wS),wS.getCenter(a.center);const o=s.index,u=s.attributes.position,l=this._drawRanges[e];let f=0;for(let c=l.start,p=l.start+l.count;c<p;c++){let d=c;o&&(d=o.getX(d)),mg.fromBufferAttribute(u,d),f=Math.max(f,a.center.distanceToSquared(mg))}a.radius=Math.sqrt(f),r.sphereInitialized=!0}return n.copy(a),n}setMatrixAt(e,n){const r=this._drawInfo,a=this._matricesTexture,s=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?this:(n.toArray(s,e*16),a.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._drawInfo,a=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?null:n.fromArray(a,e*16)}setColorAt(e,n){this._colorsTexture===null&&this._initColorsTexture();const r=this._colorsTexture,a=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(n.toArray(a,e*4),r.needsUpdate=!0,this)}getColorAt(e,n){const r=this._colorsTexture.image.data,a=this._drawInfo;return e>=a.length||a[e].active===!1?null:n.fromArray(r,e*4)}setVisibleAt(e,n){const r=this._drawInfo;return e>=r.length||r[e].active===!1||r[e].visible===n?this:(r[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._drawInfo;return e>=n.length||n[e].active===!1?!1:n[e].visible}setGeometryIdAt(e,n){const r=this._drawInfo;return e>=r.length||r[e].active===!1||n<0||n>=this._geometryCount?null:(r[e].geometryIndex=n,this)}getGeometryIdAt(e){const n=this._drawInfo;return e>=n.length||n[e].active===!1?-1:n[e].geometryIndex}getGeometryRangeAt(e,n={}){if(e<0||e>=this._geometryCount)return null;const r=this._drawRanges[e];return n.start=r.start,n.count=r.count,n}raycast(e,n){const r=this._drawInfo,a=this._drawRanges,s=this.matrixWorld,o=this.geometry;Ta.material=this.material,Ta.geometry.index=o.index,Ta.geometry.attributes=o.attributes,Ta.geometry.boundingBox===null&&(Ta.geometry.boundingBox=new La),Ta.geometry.boundingSphere===null&&(Ta.geometry.boundingSphere=new fa);for(let u=0,l=r.length;u<l;u++){if(!r[u].visible||!r[u].active)continue;const f=r[u].geometryIndex,c=a[f];Ta.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(u,Ta.matrixWorld).premultiply(s),this.getBoundingBoxAt(f,Ta.geometry.boundingBox),this.getBoundingSphereAt(f,Ta.geometry.boundingSphere),Ta.raycast(e,_S);for(let p=0,d=_S.length;p<d;p++){const h=_S[p];h.object=this,h.batchId=u,n.push(h)}_S.length=0}Ta.material=null,Ta.geometry.index=null,Ta.geometry.attributes={},Ta.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._drawInfo=e._drawInfo.map(n=>({...n})),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,n,r,a,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=a.getIndex(),u=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,f=this._multiDrawStarts,c=this._multiDrawCounts,p=this._drawRanges,d=this.perObjectFrustumCulled,h=this._indirectTexture,m=h.image.data;d&&(MG.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),sP.setFromProjectionMatrix(MG,e.coordinateSystem));let v=0;if(this.sortObjects){aP.copy(this.matrixWorld).invert(),mg.setFromMatrixPosition(r.matrixWorld).applyMatrix4(aP),EG.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(aP);for(let _=0,x=l.length;_<x;_++)if(l[_].visible&&l[_].active){const M=l[_].geometryIndex;this.getMatrixAt(_,Mf),this.getBoundingSphereAt(M,sd).applyMatrix4(Mf);let A=!1;if(d&&(A=!sP.intersectsSphere(sd)),!A){const E=yRe.subVectors(sd.center,mg).dot(EG);oP.push(p[M],E,_)}}const g=oP.list,y=this.customSort;y===null?g.sort(s.transparent?hRe:dRe):y.call(this,g,r);for(let _=0,x=g.length;_<x;_++){const M=g[_];f[v]=M.start*u,c[v]=M.count,m[v]=M.index,v++}oP.reset()}else for(let g=0,y=l.length;g<y;g++)if(l[g].visible&&l[g].active){const _=l[g].geometryIndex;let x=!1;if(d&&(this.getMatrixAt(g,Mf),this.getBoundingSphereAt(_,sd).applyMatrix4(Mf),x=!sP.intersectsSphere(sd)),!x){const M=p[_];f[v]=M.start*u,c[v]=M.count,m[v]=g,v++}}h.needsUpdate=!0,this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,n,r,a,s,o){this.onBeforeRender(e,null,a,s,o)}}class gs extends va{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const g_=new ge,y_=new ge,TG=new Ht,vg=new Ph,MS=new fa,uP=new ge,AG=new ge;class pp extends Gn{constructor(e=new fn,n=new gs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let a=1,s=n.count;a<s;a++)g_.fromBufferAttribute(n,a-1),y_.fromBufferAttribute(n,a),r[a]=r[a-1],r[a]+=g_.distanceTo(y_);e.setAttribute("lineDistance",new Rt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,a=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),MS.copy(r.boundingSphere),MS.applyMatrix4(a),MS.radius+=s,e.ray.intersectsSphere(MS)===!1)return;TG.copy(a).invert(),vg.copy(e.ray).applyMatrix4(TG);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,f=this.isLineSegments?2:1,c=r.index,d=r.attributes.position;if(c!==null){const h=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=h,g=m-1;v<g;v+=f){const y=c.getX(v),_=c.getX(v+1),x=ES(this,e,vg,l,y,_);x&&n.push(x)}if(this.isLineLoop){const v=c.getX(m-1),g=c.getX(h),y=ES(this,e,vg,l,v,g);y&&n.push(y)}}else{const h=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let v=h,g=m-1;v<g;v+=f){const y=ES(this,e,vg,l,v,v+1);y&&n.push(y)}if(this.isLineLoop){const v=ES(this,e,vg,l,m-1,h);v&&n.push(v)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const a=n[r[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const u=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}}function ES(t,e,n,r,a,s){const o=t.geometry.attributes.position;if(g_.fromBufferAttribute(o,a),y_.fromBufferAttribute(o,s),n.distanceSqToSegment(g_,y_,uP,AG)>r)return;uP.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(uP);if(!(l<e.near||l>e.far))return{distance:l,point:AG.clone().applyMatrix4(t.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:t}}const NG=new ge,CG=new ge;class Cl extends pp{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let a=0,s=n.count;a<s;a+=2)NG.fromBufferAttribute(n,a),CG.fromBufferAttribute(n,a+1),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+NG.distanceTo(CG);e.setAttribute("lineDistance",new Rt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lee extends pp{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class W4 extends va{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const DG=new Ht,ML=new Ph,TS=new fa,AS=new ge;class cee extends Gn{constructor(e=new fn,n=new W4){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,a=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),TS.copy(r.boundingSphere),TS.applyMatrix4(a),TS.radius+=s,e.ray.intersectsSphere(TS)===!1)return;DG.copy(a).invert(),ML.copy(e.ray).applyMatrix4(DG);const u=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,f=r.index,p=r.attributes.position;if(f!==null){const d=Math.max(0,o.start),h=Math.min(f.count,o.start+o.count);for(let m=d,v=h;m<v;m++){const g=f.getX(m);AS.fromBufferAttribute(p,g),RG(AS,g,l,a,e,n,this)}}else{const d=Math.max(0,o.start),h=Math.min(p.count,o.start+o.count);for(let m=d,v=h;m<v;m++)AS.fromBufferAttribute(p,m),RG(AS,m,l,a,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const a=n[r[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s<o;s++){const u=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}}function RG(t,e,n,r,a,s,o){const u=ML.distanceSqToPoint(t);if(u<n){const l=new ge;ML.closestPointToPoint(t,l),l.applyMatrix4(r);const f=a.ray.origin.distanceTo(l);if(f<a.near||f>a.far)return;s.push({distance:f,distanceToRay:Math.sqrt(u),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class bRe extends Ur{constructor(e,n,r,a,s,o,u,l,f){super(e,n,r,a,s,o,u,l,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:ni,this.magFilter=s!==void 0?s:ni,this.generateMipmaps=!1;const c=this;function p(){c.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class SRe extends Ur{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Vi,this.minFilter=Vi,this.generateMipmaps=!1,this.needsUpdate=!0}}class DD extends Ur{constructor(e,n,r,a,s,o,u,l,f,c,p,d){super(null,o,u,l,f,c,a,s,p,d),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class wRe extends DD{constructor(e,n,r,a,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=Bo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _Re extends DD{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Rc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class MRe extends Ur{constructor(e,n,r,a,s,o,u,l,f){super(e,n,r,a,s,o,u,l,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ku{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,a=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(a),n.push(s),a=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let a=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let u=0,l=s-1,f;for(;u<=l;)if(a=Math.floor(u+(l-u)/2),f=r[a]-o,f<0)u=a+1;else if(f>0)l=a-1;else{l=a;break}if(a=l,r[a]===o)return a/(s-1);const c=r[a],d=r[a+1]-c,h=(o-c)/d;return(a+h)/(s-1)}getTangent(e,n){let a=e-1e-4,s=e+1e-4;a<0&&(a=0),s>1&&(s=1);const o=this.getPoint(a),u=this.getPoint(s),l=n||(o.isVector2?new nt:new ge);return l.copy(u).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new ge,a=[],s=[],o=[],u=new ge,l=new Ht;for(let h=0;h<=e;h++){const m=h/e;a[h]=this.getTangentAt(m,new ge)}s[0]=new ge,o[0]=new ge;let f=Number.MAX_VALUE;const c=Math.abs(a[0].x),p=Math.abs(a[0].y),d=Math.abs(a[0].z);c<=f&&(f=c,r.set(1,0,0)),p<=f&&(f=p,r.set(0,1,0)),d<=f&&r.set(0,0,1),u.crossVectors(a[0],r).normalize(),s[0].crossVectors(a[0],u),o[0].crossVectors(a[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),o[h]=o[h-1].clone(),u.crossVectors(a[h-1],a[h]),u.length()>Number.EPSILON){u.normalize();const m=Math.acos(ti(a[h-1].dot(a[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(u,m))}o[h].crossVectors(a[h],s[h])}if(n===!0){let h=Math.acos(ti(s[0].dot(s[e]),-1,1));h/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(h=-h);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(a[m],h*m)),o[m].crossVectors(a[m],s[m])}return{tangents:a,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class RD extends ku{constructor(e=0,n=0,r=1,a=1,s=0,o=Math.PI*2,u=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=a,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=u,this.aRotation=l}getPoint(e,n=new nt){const r=n,a=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=a;for(;s>a;)s-=a;s<Number.EPSILON&&(o?s=0:s=a),this.aClockwise===!0&&!o&&(s===a?s=-a:s=s-a);const u=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(u),f=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const c=Math.cos(this.aRotation),p=Math.sin(this.aRotation),d=l-this.aX,h=f-this.aY;l=d*c-h*p+this.aX,f=d*p+h*c+this.aY}return r.set(l,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class fee extends RD{constructor(e,n,r,a,s,o){super(e,n,r,r,a,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function $4(){let t=0,e=0,n=0,r=0;function a(s,o,u,l){t=s,e=u,n=-3*s+3*o-2*u-l,r=2*s-2*o+u+l}return{initCatmullRom:function(s,o,u,l,f){a(o,u,f*(u-s),f*(l-o))},initNonuniformCatmullRom:function(s,o,u,l,f,c,p){let d=(o-s)/f-(u-s)/(f+c)+(u-o)/c,h=(u-o)/c-(l-o)/(c+p)+(l-u)/p;d*=c,h*=c,a(o,u,d,h)},calc:function(s){const o=s*s,u=o*s;return t+e*s+n*o+r*u}}}const NS=new ge,lP=new $4,cP=new $4,fP=new $4;class pee extends ku{constructor(e=[],n=!1,r="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=a}getPoint(e,n=new ge){const r=n,a=this.points,s=a.length,o=(s-(this.closed?0:1))*e;let u=Math.floor(o),l=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/s)+1)*s:l===0&&u===s-1&&(u=s-2,l=1);let f,c;this.closed||u>0?f=a[(u-1)%s]:(NS.subVectors(a[0],a[1]).add(a[0]),f=NS);const p=a[u%s],d=a[(u+1)%s];if(this.closed||u+2<s?c=a[(u+2)%s]:(NS.subVectors(a[s-1],a[s-2]).add(a[s-1]),c=NS),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let m=Math.pow(f.distanceToSquared(p),h),v=Math.pow(p.distanceToSquared(d),h),g=Math.pow(d.distanceToSquared(c),h);v<1e-4&&(v=1),m<1e-4&&(m=v),g<1e-4&&(g=v),lP.initNonuniformCatmullRom(f.x,p.x,d.x,c.x,m,v,g),cP.initNonuniformCatmullRom(f.y,p.y,d.y,c.y,m,v,g),fP.initNonuniformCatmullRom(f.z,p.z,d.z,c.z,m,v,g)}else this.curveType==="catmullrom"&&(lP.initCatmullRom(f.x,p.x,d.x,c.x,this.tension),cP.initCatmullRom(f.y,p.y,d.y,c.y,this.tension),fP.initCatmullRom(f.z,p.z,d.z,c.z,this.tension));return r.set(lP.calc(l),cP.calc(l),fP.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const a=this.points[n];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(new ge().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function IG(t,e,n,r,a){const s=(r-e)*.5,o=(a-n)*.5,u=t*t,l=t*u;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*u+s*t+n}function ERe(t,e){const n=1-t;return n*n*e}function TRe(t,e){return 2*(1-t)*t*e}function ARe(t,e){return t*t*e}function uy(t,e,n,r){return ERe(t,e)+TRe(t,n)+ARe(t,r)}function NRe(t,e){const n=1-t;return n*n*n*e}function CRe(t,e){const n=1-t;return 3*n*n*t*e}function DRe(t,e){return 3*(1-t)*t*t*e}function RRe(t,e){return t*t*t*e}function ly(t,e,n,r,a){return NRe(t,e)+CRe(t,n)+DRe(t,r)+RRe(t,a)}class j4 extends ku{constructor(e=new nt,n=new nt,r=new nt,a=new nt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=a}getPoint(e,n=new nt){const r=n,a=this.v0,s=this.v1,o=this.v2,u=this.v3;return r.set(ly(e,a.x,s.x,o.x,u.x),ly(e,a.y,s.y,o.y,u.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dee extends ku{constructor(e=new ge,n=new ge,r=new ge,a=new ge){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=a}getPoint(e,n=new ge){const r=n,a=this.v0,s=this.v1,o=this.v2,u=this.v3;return r.set(ly(e,a.x,s.x,o.x,u.x),ly(e,a.y,s.y,o.y,u.y),ly(e,a.z,s.z,o.z,u.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class X4 extends ku{constructor(e=new nt,n=new nt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new nt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new nt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hee extends ku{constructor(e=new ge,n=new ge){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new ge){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ge){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Y4 extends ku{constructor(e=new nt,n=new nt,r=new nt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new nt){const r=n,a=this.v0,s=this.v1,o=this.v2;return r.set(uy(e,a.x,s.x,o.x),uy(e,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Q4 extends ku{constructor(e=new ge,n=new ge,r=new ge){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new ge){const r=n,a=this.v0,s=this.v1,o=this.v2;return r.set(uy(e,a.x,s.x,o.x),uy(e,a.y,s.y,o.y),uy(e,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Z4 extends ku{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new nt){const r=n,a=this.points,s=(a.length-1)*e,o=Math.floor(s),u=s-o,l=a[o===0?o:o-1],f=a[o],c=a[o>a.length-2?a.length-1:o+1],p=a[o>a.length-3?a.length-1:o+2];return r.set(IG(u,l.x,f.x,c.x,p.x),IG(u,l.y,f.y,c.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const a=this.points[n];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const a=e.points[n];this.points.push(new nt().fromArray(a))}return this}}var x_=Object.freeze({__proto__:null,ArcCurve:fee,CatmullRomCurve3:pee,CubicBezierCurve:j4,CubicBezierCurve3:dee,EllipseCurve:RD,LineCurve:X4,LineCurve3:hee,QuadraticBezierCurve:Y4,QuadraticBezierCurve3:Q4,SplineCurve:Z4});class mee extends ku{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new x_[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),a=this.getCurveLengths();let s=0;for(;s<a.length;){if(a[s]>=r){const o=a[s]-r,u=this.curves[s],l=u.getLength(),f=l===0?0:1-o/l;return u.getPointAt(f,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,a=this.curves.length;r<a;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let a=0,s=this.curves;a<s.length;a++){const o=s[a],u=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(u);for(let f=0;f<l.length;f++){const c=l[f];r&&r.equals(c)||(n.push(c),r=c)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const a=e.curves[n];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const a=this.curves[n];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const a=e.curves[n];this.curves.push(new x_[a.type]().fromJSON(a))}return this}}class u1 extends mee{constructor(e){super(),this.type="Path",this.currentPoint=new nt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new X4(this.currentPoint.clone(),new nt(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,a){const s=new Y4(this.currentPoint.clone(),new nt(e,n),new nt(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this}bezierCurveTo(e,n,r,a,s,o){const u=new j4(this.currentPoint.clone(),new nt(e,n),new nt(r,a),new nt(s,o));return this.curves.push(u),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new Z4(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,a,s,o){const u=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+u,n+l,r,a,s,o),this}absarc(e,n,r,a,s,o){return this.absellipse(e,n,r,r,a,s,o),this}ellipse(e,n,r,a,s,o,u,l){const f=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+f,n+c,r,a,s,o,u,l),this}absellipse(e,n,r,a,s,o,u,l){const f=new RD(e,n,r,a,s,o,u,l);if(this.curves.length>0){const p=f.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(f);const c=f.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class _x extends fn{constructor(e=[new nt(0,-.5),new nt(.5,0),new nt(0,.5)],n=12,r=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:a},n=Math.floor(n),a=ti(a,0,Math.PI*2);const s=[],o=[],u=[],l=[],f=[],c=1/n,p=new ge,d=new nt,h=new ge,m=new ge,v=new ge;let g=0,y=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:g=e[_+1].x-e[_].x,y=e[_+1].y-e[_].y,h.x=y*1,h.y=-g,h.z=y*0,v.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:g=e[_+1].x-e[_].x,y=e[_+1].y-e[_].y,h.x=y*1,h.y=-g,h.z=y*0,m.copy(h),h.x+=v.x,h.y+=v.y,h.z+=v.z,h.normalize(),l.push(h.x,h.y,h.z),v.copy(m)}for(let _=0;_<=n;_++){const x=r+_*c*a,M=Math.sin(x),A=Math.cos(x);for(let E=0;E<=e.length-1;E++){p.x=e[E].x*M,p.y=e[E].y,p.z=e[E].x*A,o.push(p.x,p.y,p.z),d.x=_/n,d.y=E/(e.length-1),u.push(d.x,d.y);const N=l[3*E+0]*M,D=l[3*E+1],C=l[3*E+0]*A;f.push(N,D,C)}}for(let _=0;_<n;_++)for(let x=0;x<e.length-1;x++){const M=x+_*e.length,A=M,E=M+e.length,N=M+e.length+1,D=M+1;s.push(A,E,D),s.push(N,D,E)}this.setIndex(s),this.setAttribute("position",new Rt(o,3)),this.setAttribute("uv",new Rt(u,2)),this.setAttribute("normal",new Rt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _x(e.points,e.segments,e.phiStart,e.phiLength)}}class ID extends _x{constructor(e=1,n=1,r=4,a=8){const s=new u1;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),a),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:a}}static fromJSON(e){return new ID(e.radius,e.length,e.capSegments,e.radialSegments)}}class PD extends fn{constructor(e=1,n=32,r=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:a},n=Math.max(3,n);const s=[],o=[],u=[],l=[],f=new ge,c=new nt;o.push(0,0,0),u.push(0,0,1),l.push(.5,.5);for(let p=0,d=3;p<=n;p++,d+=3){const h=r+p/n*a;f.x=e*Math.cos(h),f.y=e*Math.sin(h),o.push(f.x,f.y,f.z),u.push(0,0,1),c.x=(o[d]/e+1)/2,c.y=(o[d+1]/e+1)/2,l.push(c.x,c.y)}for(let p=1;p<=n;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new Rt(o,3)),this.setAttribute("normal",new Rt(u,3)),this.setAttribute("uv",new Rt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PD(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class xv extends fn{constructor(e=1,n=1,r=1,a=32,s=1,o=!1,u=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:a,heightSegments:s,openEnded:o,thetaStart:u,thetaLength:l};const f=this;a=Math.floor(a),s=Math.floor(s);const c=[],p=[],d=[],h=[];let m=0;const v=[],g=r/2;let y=0;_(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(c),this.setAttribute("position",new Rt(p,3)),this.setAttribute("normal",new Rt(d,3)),this.setAttribute("uv",new Rt(h,2));function _(){const M=new ge,A=new ge;let E=0;const N=(n-e)/r;for(let D=0;D<=s;D++){const C=[],T=D/s,P=T*(n-e)+e;for(let I=0;I<=a;I++){const U=I/a,q=U*l+u,z=Math.sin(q),G=Math.cos(q);A.x=P*z,A.y=-T*r+g,A.z=P*G,p.push(A.x,A.y,A.z),M.set(z,N,G).normalize(),d.push(M.x,M.y,M.z),h.push(U,1-T),C.push(m++)}v.push(C)}for(let D=0;D<a;D++)for(let C=0;C<s;C++){const T=v[C][D],P=v[C+1][D],I=v[C+1][D+1],U=v[C][D+1];e>0&&(c.push(T,P,U),E+=3),n>0&&(c.push(P,I,U),E+=3)}f.addGroup(y,E,0),y+=E}function x(M){const A=m,E=new nt,N=new ge;let D=0;const C=M===!0?e:n,T=M===!0?1:-1;for(let I=1;I<=a;I++)p.push(0,g*T,0),d.push(0,T,0),h.push(.5,.5),m++;const P=m;for(let I=0;I<=a;I++){const q=I/a*l+u,z=Math.cos(q),G=Math.sin(q);N.x=C*G,N.y=g*T,N.z=C*z,p.push(N.x,N.y,N.z),d.push(0,T,0),E.x=z*.5+.5,E.y=G*.5*T+.5,h.push(E.x,E.y),m++}for(let I=0;I<a;I++){const U=A+I,q=P+I;M===!0?c.push(q,q+1,U):c.push(q+1,q,U),D+=3}f.addGroup(y,D,M===!0?1:2),y+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class OD extends xv{constructor(e=1,n=1,r=32,a=1,s=!1,o=0,u=Math.PI*2){super(0,e,n,r,a,s,o,u),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:u}}static fromJSON(e){return new OD(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Up extends fn{constructor(e=[],n=[],r=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:a};const s=[],o=[];u(a),f(r),c(),this.setAttribute("position",new Rt(s,3)),this.setAttribute("normal",new Rt(s.slice(),3)),this.setAttribute("uv",new Rt(o,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function u(_){const x=new ge,M=new ge,A=new ge;for(let E=0;E<n.length;E+=3)h(n[E+0],x),h(n[E+1],M),h(n[E+2],A),l(x,M,A,_)}function l(_,x,M,A){const E=A+1,N=[];for(let D=0;D<=E;D++){N[D]=[];const C=_.clone().lerp(M,D/E),T=x.clone().lerp(M,D/E),P=E-D;for(let I=0;I<=P;I++)I===0&&D===E?N[D][I]=C:N[D][I]=C.clone().lerp(T,I/P)}for(let D=0;D<E;D++)for(let C=0;C<2*(E-D)-1;C++){const T=Math.floor(C/2);C%2===0?(d(N[D][T+1]),d(N[D+1][T]),d(N[D][T])):(d(N[D][T+1]),d(N[D+1][T+1]),d(N[D+1][T]))}}function f(_){const x=new ge;for(let M=0;M<s.length;M+=3)x.x=s[M+0],x.y=s[M+1],x.z=s[M+2],x.normalize().multiplyScalar(_),s[M+0]=x.x,s[M+1]=x.y,s[M+2]=x.z}function c(){const _=new ge;for(let x=0;x<s.length;x+=3){_.x=s[x+0],_.y=s[x+1],_.z=s[x+2];const M=g(_)/2/Math.PI+.5,A=y(_)/Math.PI+.5;o.push(M,1-A)}m(),p()}function p(){for(let _=0;_<o.length;_+=6){const x=o[_+0],M=o[_+2],A=o[_+4],E=Math.max(x,M,A),N=Math.min(x,M,A);E>.9&&N<.1&&(x<.2&&(o[_+0]+=1),M<.2&&(o[_+2]+=1),A<.2&&(o[_+4]+=1))}}function d(_){s.push(_.x,_.y,_.z)}function h(_,x){const M=_*3;x.x=e[M+0],x.y=e[M+1],x.z=e[M+2]}function m(){const _=new ge,x=new ge,M=new ge,A=new ge,E=new nt,N=new nt,D=new nt;for(let C=0,T=0;C<s.length;C+=9,T+=6){_.set(s[C+0],s[C+1],s[C+2]),x.set(s[C+3],s[C+4],s[C+5]),M.set(s[C+6],s[C+7],s[C+8]),E.set(o[T+0],o[T+1]),N.set(o[T+2],o[T+3]),D.set(o[T+4],o[T+5]),A.copy(_).add(x).add(M).divideScalar(3);const P=g(A);v(E,T+0,_,P),v(N,T+2,x,P),v(D,T+4,M,P)}}function v(_,x,M,A){A<0&&_.x===1&&(o[x]=_.x-1),M.x===0&&M.z===0&&(o[x]=A/2/Math.PI+.5)}function g(_){return Math.atan2(_.z,-_.x)}function y(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Up(e.vertices,e.indices,e.radius,e.details)}}class LD extends Up{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,a=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-r,0,-a,r,0,a,-r,0,a,r,-a,-r,0,-a,r,0,a,-r,0,a,r,0,-r,0,-a,r,0,-a,-r,0,a,r,0,a],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new LD(e.radius,e.detail)}}const CS=new ge,DS=new ge,pP=new ge,RS=new Es;class vee extends fn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const a=Math.pow(10,4),s=Math.cos(zd*n),o=e.getIndex(),u=e.getAttribute("position"),l=o?o.count:u.count,f=[0,0,0],c=["a","b","c"],p=new Array(3),d={},h=[];for(let m=0;m<l;m+=3){o?(f[0]=o.getX(m),f[1]=o.getX(m+1),f[2]=o.getX(m+2)):(f[0]=m,f[1]=m+1,f[2]=m+2);const{a:v,b:g,c:y}=RS;if(v.fromBufferAttribute(u,f[0]),g.fromBufferAttribute(u,f[1]),y.fromBufferAttribute(u,f[2]),RS.getNormal(pP),p[0]=`${Math.round(v.x*a)},${Math.round(v.y*a)},${Math.round(v.z*a)}`,p[1]=`${Math.round(g.x*a)},${Math.round(g.y*a)},${Math.round(g.z*a)}`,p[2]=`${Math.round(y.x*a)},${Math.round(y.y*a)},${Math.round(y.z*a)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let _=0;_<3;_++){const x=(_+1)%3,M=p[_],A=p[x],E=RS[c[_]],N=RS[c[x]],D=`${M}_${A}`,C=`${A}_${M}`;C in d&&d[C]?(pP.dot(d[C].normal)<=s&&(h.push(E.x,E.y,E.z),h.push(N.x,N.y,N.z)),d[C]=null):D in d||(d[D]={index0:f[_],index1:f[x],normal:pP.clone()})}}for(const m in d)if(d[m]){const{index0:v,index1:g}=d[m];CS.fromBufferAttribute(u,v),DS.fromBufferAttribute(u,g),h.push(CS.x,CS.y,CS.z),h.push(DS.x,DS.y,DS.z)}this.setAttribute("position",new Rt(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Gd extends u1{constructor(e){super(e),this.uuid=no(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,a=this.holes.length;r<a;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const a=e.holes[n];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const a=this.holes[n];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const a=e.holes[n];this.holes.push(new u1().fromJSON(a))}return this}}const IRe={triangulate:function(t,e,n=2){const r=e&&e.length,a=r?e[0]*n:t.length;let s=gee(t,0,a,n,!0);const o=[];if(!s||s.next===s.prev)return o;let u,l,f,c,p,d,h;if(r&&(s=URe(t,e,s,n)),t.length>80*n){u=f=t[0],l=c=t[1];for(let m=n;m<a;m+=n)p=t[m],d=t[m+1],p<u&&(u=p),d<l&&(l=d),p>f&&(f=p),d>c&&(c=d);h=Math.max(f-u,c-l),h=h!==0?32767/h:0}return l1(s,o,n,u,l,h,0),o}};function gee(t,e,n,r,a){let s,o;if(a===XRe(t,e,n,r)>0)for(s=e;s<n;s+=r)o=PG(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=PG(s,t[s],t[s+1],o);return o&&kD(o,o.next)&&(f1(o),o=o.next),o}function fh(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(kD(n,n.next)||Vr(n.prev,n,n.next)===0)){if(f1(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function l1(t,e,n,r,a,s,o){if(!t)return;!o&&s&&GRe(t,r,a,s);let u=t,l,f;for(;t.prev!==t.next;){if(l=t.prev,f=t.next,s?ORe(t,r,a,s):PRe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(f.i/n|0),f1(t),t=f.next,u=f.next;continue}if(t=f,t===u){o?o===1?(t=LRe(fh(t),e,n),l1(t,e,n,r,a,s,2)):o===2&&kRe(t,e,n,r,a,s):l1(fh(t),e,n,r,a,s,1);break}}}function PRe(t){const e=t.prev,n=t,r=t.next;if(Vr(e,n,r)>=0)return!1;const a=e.x,s=n.x,o=r.x,u=e.y,l=n.y,f=r.y,c=a<s?a<o?a:o:s<o?s:o,p=u<l?u<f?u:f:l<f?l:f,d=a>s?a>o?a:o:s>o?s:o,h=u>l?u>f?u:f:l>f?l:f;let m=r.next;for(;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=p&&m.y<=h&&tm(a,u,s,l,o,f,m.x,m.y)&&Vr(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function ORe(t,e,n,r){const a=t.prev,s=t,o=t.next;if(Vr(a,s,o)>=0)return!1;const u=a.x,l=s.x,f=o.x,c=a.y,p=s.y,d=o.y,h=u<l?u<f?u:f:l<f?l:f,m=c<p?c<d?c:d:p<d?p:d,v=u>l?u>f?u:f:l>f?l:f,g=c>p?c>d?c:d:p>d?p:d,y=EL(h,m,e,n,r),_=EL(v,g,e,n,r);let x=t.prevZ,M=t.nextZ;for(;x&&x.z>=y&&M&&M.z<=_;){if(x.x>=h&&x.x<=v&&x.y>=m&&x.y<=g&&x!==a&&x!==o&&tm(u,c,l,p,f,d,x.x,x.y)&&Vr(x.prev,x,x.next)>=0||(x=x.prevZ,M.x>=h&&M.x<=v&&M.y>=m&&M.y<=g&&M!==a&&M!==o&&tm(u,c,l,p,f,d,M.x,M.y)&&Vr(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;x&&x.z>=y;){if(x.x>=h&&x.x<=v&&x.y>=m&&x.y<=g&&x!==a&&x!==o&&tm(u,c,l,p,f,d,x.x,x.y)&&Vr(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;M&&M.z<=_;){if(M.x>=h&&M.x<=v&&M.y>=m&&M.y<=g&&M!==a&&M!==o&&tm(u,c,l,p,f,d,M.x,M.y)&&Vr(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function LRe(t,e,n){let r=t;do{const a=r.prev,s=r.next.next;!kD(a,s)&&yee(a,r,r.next,s)&&c1(a,s)&&c1(s,a)&&(e.push(a.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),f1(r),f1(r.next),r=t=s),r=r.next}while(r!==t);return fh(r)}function kRe(t,e,n,r,a,s){let o=t;do{let u=o.next.next;for(;u!==o.prev;){if(o.i!==u.i&&WRe(o,u)){let l=xee(o,u);o=fh(o,o.next),l=fh(l,l.next),l1(o,e,n,r,a,s,0),l1(l,e,n,r,a,s,0);return}u=u.next}o=o.next}while(o!==t)}function URe(t,e,n,r){const a=[];let s,o,u,l,f;for(s=0,o=e.length;s<o;s++)u=e[s]*r,l=s<o-1?e[s+1]*r:t.length,f=gee(t,u,l,r,!1),f===f.next&&(f.steiner=!0),a.push(VRe(f));for(a.sort(FRe),s=0;s<a.length;s++)n=BRe(a[s],n);return n}function FRe(t,e){return t.x-e.x}function BRe(t,e){const n=zRe(t,e);if(!n)return e;const r=xee(n,t);return fh(r,r.next),fh(n,n.next)}function zRe(t,e){let n=e,r=-1/0,a;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const d=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=s&&d>r&&(r=d,a=n.x<n.next.x?n:n.next,d===s))return a}n=n.next}while(n!==e);if(!a)return null;const u=a,l=a.x,f=a.y;let c=1/0,p;n=a;do s>=n.x&&n.x>=l&&s!==n.x&&tm(o<f?s:r,o,l,f,o<f?r:s,o,n.x,n.y)&&(p=Math.abs(o-n.y)/(s-n.x),c1(n,t)&&(p<c||p===c&&(n.x>a.x||n.x===a.x&&qRe(a,n)))&&(a=n,c=p)),n=n.next;while(n!==u);return a}function qRe(t,e){return Vr(t.prev,t,e.prev)<0&&Vr(e.next,t,t.next)<0}function GRe(t,e,n,r){let a=t;do a.z===0&&(a.z=EL(a.x,a.y,e,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,HRe(a)}function HRe(t){let e,n,r,a,s,o,u,l,f=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,u=0,e=0;e<f&&(u++,r=r.nextZ,!!r);e++);for(l=f;u>0||l>0&&r;)u!==0&&(l===0||!r||n.z<=r.z)?(a=n,n=n.nextZ,u--):(a=r,r=r.nextZ,l--),s?s.nextZ=a:t=a,a.prevZ=s,s=a;n=r}s.nextZ=null,f*=2}while(o>1);return t}function EL(t,e,n,r,a){return t=(t-n)*a|0,e=(e-r)*a|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function VRe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function tm(t,e,n,r,a,s,o,u){return(a-o)*(e-u)>=(t-o)*(s-u)&&(t-o)*(r-u)>=(n-o)*(e-u)&&(n-o)*(s-u)>=(a-o)*(r-u)}function WRe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!$Re(t,e)&&(c1(t,e)&&c1(e,t)&&jRe(t,e)&&(Vr(t.prev,t,e.prev)||Vr(t,e.prev,e))||kD(t,e)&&Vr(t.prev,t,t.next)>0&&Vr(e.prev,e,e.next)>0)}function Vr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function kD(t,e){return t.x===e.x&&t.y===e.y}function yee(t,e,n,r){const a=PS(Vr(t,e,n)),s=PS(Vr(t,e,r)),o=PS(Vr(n,r,t)),u=PS(Vr(n,r,e));return!!(a!==s&&o!==u||a===0&&IS(t,n,e)||s===0&&IS(t,r,e)||o===0&&IS(n,t,r)||u===0&&IS(n,e,r))}function IS(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function PS(t){return t>0?1:t<0?-1:0}function $Re(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&yee(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function c1(t,e){return Vr(t.prev,t,t.next)<0?Vr(t,e,t.next)>=0&&Vr(t,t.prev,e)>=0:Vr(t,e,t.prev)<0||Vr(t,t.next,e)<0}function jRe(t,e){let n=t,r=!1;const a=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&a<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function xee(t,e){const n=new TL(t.i,t.x,t.y),r=new TL(e.i,e.x,e.y),a=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=a,a.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function PG(t,e,n,r){const a=new TL(t,e,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function f1(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function TL(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function XRe(t,e,n,r){let a=0;for(let s=e,o=n-r;s<n;s+=r)a+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return a}class ll{static area(e){const n=e.length;let r=0;for(let a=n-1,s=0;s<n;a=s++)r+=e[a].x*e[s].y-e[s].x*e[a].y;return r*.5}static isClockWise(e){return ll.area(e)<0}static triangulateShape(e,n){const r=[],a=[],s=[];OG(e),LG(r,e);let o=e.length;n.forEach(OG);for(let l=0;l<n.length;l++)a.push(o),o+=n[l].length,LG(r,n[l]);const u=IRe.triangulate(r,a);for(let l=0;l<u.length;l+=3)s.push(u.slice(l,l+3));return s}}function OG(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function LG(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class UD extends fn{constructor(e=new Gd([new nt(.5,.5),new nt(-.5,.5),new nt(-.5,-.5),new nt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,a=[],s=[];for(let u=0,l=e.length;u<l;u++){const f=e[u];o(f)}this.setAttribute("position",new Rt(a,3)),this.setAttribute("uv",new Rt(s,2)),this.computeVertexNormals();function o(u){const l=[],f=n.curveSegments!==void 0?n.curveSegments:12,c=n.steps!==void 0?n.steps:1,p=n.depth!==void 0?n.depth:1;let d=n.bevelEnabled!==void 0?n.bevelEnabled:!0,h=n.bevelThickness!==void 0?n.bevelThickness:.2,m=n.bevelSize!==void 0?n.bevelSize:h-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,g=n.bevelSegments!==void 0?n.bevelSegments:3;const y=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:YRe;let x,M=!1,A,E,N,D;y&&(x=y.getSpacedPoints(c),M=!0,d=!1,A=y.computeFrenetFrames(c,!1),E=new ge,N=new ge,D=new ge),d||(g=0,h=0,m=0,v=0);const C=u.extractPoints(f);let T=C.shape;const P=C.holes;if(!ll.isClockWise(T)){T=T.reverse();for(let le=0,Q=P.length;le<Q;le++){const Ee=P[le];ll.isClockWise(Ee)&&(P[le]=Ee.reverse())}}const U=ll.triangulateShape(T,P),q=T;for(let le=0,Q=P.length;le<Q;le++){const Ee=P[le];T=T.concat(Ee)}function z(le,Q,Ee){return Q||console.error("THREE.ExtrudeGeometry: vec does not exist"),le.clone().addScaledVector(Q,Ee)}const G=T.length,F=U.length;function k(le,Q,Ee){let ne,se,xe;const ve=le.x-Q.x,te=le.y-Q.y,$=Ee.x-le.x,B=Ee.y-le.y,ae=ve*ve+te*te,ue=ve*B-te*$;if(Math.abs(ue)>Number.EPSILON){const _e=Math.sqrt(ae),be=Math.sqrt($*$+B*B),Pe=Q.x-te/_e,Te=Q.y+ve/_e,Ie=Ee.x-B/be,Oe=Ee.y+$/be,Be=((Ie-Pe)*B-(Oe-Te)*$)/(ve*B-te*$);ne=Pe+ve*Be-le.x,se=Te+te*Be-le.y;const He=ne*ne+se*se;if(He<=2)return new nt(ne,se);xe=Math.sqrt(He/2)}else{let _e=!1;ve>Number.EPSILON?$>Number.EPSILON&&(_e=!0):ve<-Number.EPSILON?$<-Number.EPSILON&&(_e=!0):Math.sign(te)===Math.sign(B)&&(_e=!0),_e?(ne=-te,se=ve,xe=Math.sqrt(ae)):(ne=ve,se=te,xe=Math.sqrt(ae/2))}return new nt(ne/xe,se/xe)}const O=[];for(let le=0,Q=q.length,Ee=Q-1,ne=le+1;le<Q;le++,Ee++,ne++)Ee===Q&&(Ee=0),ne===Q&&(ne=0),O[le]=k(q[le],q[Ee],q[ne]);const W=[];let X,ee=O.concat();for(let le=0,Q=P.length;le<Q;le++){const Ee=P[le];X=[];for(let ne=0,se=Ee.length,xe=se-1,ve=ne+1;ne<se;ne++,xe++,ve++)xe===se&&(xe=0),ve===se&&(ve=0),X[ne]=k(Ee[ne],Ee[xe],Ee[ve]);W.push(X),ee=ee.concat(X)}for(let le=0;le<g;le++){const Q=le/g,Ee=h*Math.cos(Q*Math.PI/2),ne=m*Math.sin(Q*Math.PI/2)+v;for(let se=0,xe=q.length;se<xe;se++){const ve=z(q[se],O[se],ne);re(ve.x,ve.y,-Ee)}for(let se=0,xe=P.length;se<xe;se++){const ve=P[se];X=W[se];for(let te=0,$=ve.length;te<$;te++){const B=z(ve[te],X[te],ne);re(B.x,B.y,-Ee)}}}const J=m+v;for(let le=0;le<G;le++){const Q=d?z(T[le],ee[le],J):T[le];M?(N.copy(A.normals[0]).multiplyScalar(Q.x),E.copy(A.binormals[0]).multiplyScalar(Q.y),D.copy(x[0]).add(N).add(E),re(D.x,D.y,D.z)):re(Q.x,Q.y,0)}for(let le=1;le<=c;le++)for(let Q=0;Q<G;Q++){const Ee=d?z(T[Q],ee[Q],J):T[Q];M?(N.copy(A.normals[le]).multiplyScalar(Ee.x),E.copy(A.binormals[le]).multiplyScalar(Ee.y),D.copy(x[le]).add(N).add(E),re(D.x,D.y,D.z)):re(Ee.x,Ee.y,p/c*le)}for(let le=g-1;le>=0;le--){const Q=le/g,Ee=h*Math.cos(Q*Math.PI/2),ne=m*Math.sin(Q*Math.PI/2)+v;for(let se=0,xe=q.length;se<xe;se++){const ve=z(q[se],O[se],ne);re(ve.x,ve.y,p+Ee)}for(let se=0,xe=P.length;se<xe;se++){const ve=P[se];X=W[se];for(let te=0,$=ve.length;te<$;te++){const B=z(ve[te],X[te],ne);M?re(B.x,B.y+x[c-1].y,x[c-1].x+Ee):re(B.x,B.y,p+Ee)}}}Y(),ie();function Y(){const le=a.length/3;if(d){let Q=0,Ee=G*Q;for(let ne=0;ne<F;ne++){const se=U[ne];oe(se[2]+Ee,se[1]+Ee,se[0]+Ee)}Q=c+g*2,Ee=G*Q;for(let ne=0;ne<F;ne++){const se=U[ne];oe(se[0]+Ee,se[1]+Ee,se[2]+Ee)}}else{for(let Q=0;Q<F;Q++){const Ee=U[Q];oe(Ee[2],Ee[1],Ee[0])}for(let Q=0;Q<F;Q++){const Ee=U[Q];oe(Ee[0]+G*c,Ee[1]+G*c,Ee[2]+G*c)}}r.addGroup(le,a.length/3-le,0)}function ie(){const le=a.length/3;let Q=0;K(q,Q),Q+=q.length;for(let Ee=0,ne=P.length;Ee<ne;Ee++){const se=P[Ee];K(se,Q),Q+=se.length}r.addGroup(le,a.length/3-le,1)}function K(le,Q){let Ee=le.length;for(;--Ee>=0;){const ne=Ee;let se=Ee-1;se<0&&(se=le.length-1);for(let xe=0,ve=c+g*2;xe<ve;xe++){const te=G*xe,$=G*(xe+1),B=Q+ne+te,ae=Q+se+te,ue=Q+se+$,_e=Q+ne+$;ce(B,ae,ue,_e)}}}function re(le,Q,Ee){l.push(le),l.push(Q),l.push(Ee)}function oe(le,Q,Ee){me(le),me(Q),me(Ee);const ne=a.length/3,se=_.generateTopUV(r,a,ne-3,ne-2,ne-1);Se(se[0]),Se(se[1]),Se(se[2])}function ce(le,Q,Ee,ne){me(le),me(Q),me(ne),me(Q),me(Ee),me(ne);const se=a.length/3,xe=_.generateSideWallUV(r,a,se-6,se-3,se-2,se-1);Se(xe[0]),Se(xe[1]),Se(xe[3]),Se(xe[1]),Se(xe[2]),Se(xe[3])}function me(le){a.push(l[le*3+0]),a.push(l[le*3+1]),a.push(l[le*3+2])}function Se(le){s.push(le.x),s.push(le.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return QRe(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const u=n[e.shapes[s]];r.push(u)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new x_[a.type]().fromJSON(a)),new UD(r,e.options)}}const YRe={generateTopUV:function(t,e,n,r,a){const s=e[n*3],o=e[n*3+1],u=e[r*3],l=e[r*3+1],f=e[a*3],c=e[a*3+1];return[new nt(s,o),new nt(u,l),new nt(f,c)]},generateSideWallUV:function(t,e,n,r,a,s){const o=e[n*3],u=e[n*3+1],l=e[n*3+2],f=e[r*3],c=e[r*3+1],p=e[r*3+2],d=e[a*3],h=e[a*3+1],m=e[a*3+2],v=e[s*3],g=e[s*3+1],y=e[s*3+2];return Math.abs(u-c)<Math.abs(o-f)?[new nt(o,1-l),new nt(f,1-p),new nt(d,1-m),new nt(v,1-y)]:[new nt(u,1-l),new nt(c,1-p),new nt(h,1-m),new nt(g,1-y)]}};function QRe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,a=t.length;r<a;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class FD extends Up{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,a=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new FD(e.radius,e.detail)}}class Mx extends Up{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,a,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Mx(e.radius,e.detail)}}class BD extends fn{constructor(e=.5,n=1,r=32,a=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:a,thetaStart:s,thetaLength:o},r=Math.max(3,r),a=Math.max(1,a);const u=[],l=[],f=[],c=[];let p=e;const d=(n-e)/a,h=new ge,m=new nt;for(let v=0;v<=a;v++){for(let g=0;g<=r;g++){const y=s+g/r*o;h.x=p*Math.cos(y),h.y=p*Math.sin(y),l.push(h.x,h.y,h.z),f.push(0,0,1),m.x=(h.x/n+1)/2,m.y=(h.y/n+1)/2,c.push(m.x,m.y)}p+=d}for(let v=0;v<a;v++){const g=v*(r+1);for(let y=0;y<r;y++){const _=y+g,x=_,M=_+r+1,A=_+r+2,E=_+1;u.push(x,M,E),u.push(M,A,E)}}this.setIndex(u),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(f,3)),this.setAttribute("uv",new Rt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BD(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zD extends fn{constructor(e=new Gd([new nt(0,.5),new nt(-.5,-.5),new nt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],a=[],s=[],o=[];let u=0,l=0;if(Array.isArray(e)===!1)f(e);else for(let c=0;c<e.length;c++)f(e[c]),this.addGroup(u,l,c),u+=l,l=0;this.setIndex(r),this.setAttribute("position",new Rt(a,3)),this.setAttribute("normal",new Rt(s,3)),this.setAttribute("uv",new Rt(o,2));function f(c){const p=a.length/3,d=c.extractPoints(n);let h=d.shape;const m=d.holes;ll.isClockWise(h)===!1&&(h=h.reverse());for(let g=0,y=m.length;g<y;g++){const _=m[g];ll.isClockWise(_)===!0&&(m[g]=_.reverse())}const v=ll.triangulateShape(h,m);for(let g=0,y=m.length;g<y;g++){const _=m[g];h=h.concat(_)}for(let g=0,y=h.length;g<y;g++){const _=h[g];a.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let g=0,y=v.length;g<y;g++){const _=v[g],x=_[0]+p,M=_[1]+p,A=_[2]+p;r.push(x,M,A),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return ZRe(n,e)}static fromJSON(e,n){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=n[e.shapes[a]];r.push(o)}return new zD(r,e.curveSegments)}}function ZRe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const a=t[n];e.shapes.push(a.uuid)}else e.shapes.push(t.uuid);return e}class Ex extends fn{constructor(e=1,n=32,r=16,a=0,s=Math.PI*2,o=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:a,phiLength:s,thetaStart:o,thetaLength:u},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+u,Math.PI);let f=0;const c=[],p=new ge,d=new ge,h=[],m=[],v=[],g=[];for(let y=0;y<=r;y++){const _=[],x=y/r;let M=0;y===0&&o===0?M=.5/n:y===r&&l===Math.PI&&(M=-.5/n);for(let A=0;A<=n;A++){const E=A/n;p.x=-e*Math.cos(a+E*s)*Math.sin(o+x*u),p.y=e*Math.cos(o+x*u),p.z=e*Math.sin(a+E*s)*Math.sin(o+x*u),m.push(p.x,p.y,p.z),d.copy(p).normalize(),v.push(d.x,d.y,d.z),g.push(E+M,1-x),_.push(f++)}c.push(_)}for(let y=0;y<r;y++)for(let _=0;_<n;_++){const x=c[y][_+1],M=c[y][_],A=c[y+1][_],E=c[y+1][_+1];(y!==0||o>0)&&h.push(x,M,E),(y!==r-1||l<Math.PI)&&h.push(M,A,E)}this.setIndex(h),this.setAttribute("position",new Rt(m,3)),this.setAttribute("normal",new Rt(v,3)),this.setAttribute("uv",new Rt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ex(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class qD extends Up{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,a,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new qD(e.radius,e.detail)}}class GD extends fn{constructor(e=1,n=.4,r=12,a=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:a,arc:s},r=Math.floor(r),a=Math.floor(a);const o=[],u=[],l=[],f=[],c=new ge,p=new ge,d=new ge;for(let h=0;h<=r;h++)for(let m=0;m<=a;m++){const v=m/a*s,g=h/r*Math.PI*2;p.x=(e+n*Math.cos(g))*Math.cos(v),p.y=(e+n*Math.cos(g))*Math.sin(v),p.z=n*Math.sin(g),u.push(p.x,p.y,p.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),d.subVectors(p,c).normalize(),l.push(d.x,d.y,d.z),f.push(m/a),f.push(h/r)}for(let h=1;h<=r;h++)for(let m=1;m<=a;m++){const v=(a+1)*h+m-1,g=(a+1)*(h-1)+m-1,y=(a+1)*(h-1)+m,_=(a+1)*h+m;o.push(v,g,_),o.push(g,y,_)}this.setIndex(o),this.setAttribute("position",new Rt(u,3)),this.setAttribute("normal",new Rt(l,3)),this.setAttribute("uv",new Rt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new GD(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class HD extends fn{constructor(e=1,n=.4,r=64,a=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:a,p:s,q:o},r=Math.floor(r),a=Math.floor(a);const u=[],l=[],f=[],c=[],p=new ge,d=new ge,h=new ge,m=new ge,v=new ge,g=new ge,y=new ge;for(let x=0;x<=r;++x){const M=x/r*s*Math.PI*2;_(M,s,o,e,h),_(M+.01,s,o,e,m),g.subVectors(m,h),y.addVectors(m,h),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize();for(let A=0;A<=a;++A){const E=A/a*Math.PI*2,N=-n*Math.cos(E),D=n*Math.sin(E);p.x=h.x+(N*y.x+D*v.x),p.y=h.y+(N*y.y+D*v.y),p.z=h.z+(N*y.z+D*v.z),l.push(p.x,p.y,p.z),d.subVectors(p,h).normalize(),f.push(d.x,d.y,d.z),c.push(x/r),c.push(A/a)}}for(let x=1;x<=r;x++)for(let M=1;M<=a;M++){const A=(a+1)*(x-1)+(M-1),E=(a+1)*x+(M-1),N=(a+1)*x+M,D=(a+1)*(x-1)+M;u.push(A,E,D),u.push(E,N,D)}this.setIndex(u),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(f,3)),this.setAttribute("uv",new Rt(c,2));function _(x,M,A,E,N){const D=Math.cos(x),C=Math.sin(x),T=A/M*x,P=Math.cos(T);N.x=E*(2+P)*.5*D,N.y=E*(2+P)*C*.5,N.z=E*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new HD(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class VD extends fn{constructor(e=new Q4(new ge(-1,-1,0),new ge(-1,1,0),new ge(1,1,0)),n=64,r=1,a=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:a,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const u=new ge,l=new ge,f=new nt;let c=new ge;const p=[],d=[],h=[],m=[];v(),this.setIndex(m),this.setAttribute("position",new Rt(p,3)),this.setAttribute("normal",new Rt(d,3)),this.setAttribute("uv",new Rt(h,2));function v(){for(let x=0;x<n;x++)g(x);g(s===!1?n:0),_(),y()}function g(x){c=e.getPointAt(x/n,c);const M=o.normals[x],A=o.binormals[x];for(let E=0;E<=a;E++){const N=E/a*Math.PI*2,D=Math.sin(N),C=-Math.cos(N);l.x=C*M.x+D*A.x,l.y=C*M.y+D*A.y,l.z=C*M.z+D*A.z,l.normalize(),d.push(l.x,l.y,l.z),u.x=c.x+r*l.x,u.y=c.y+r*l.y,u.z=c.z+r*l.z,p.push(u.x,u.y,u.z)}}function y(){for(let x=1;x<=n;x++)for(let M=1;M<=a;M++){const A=(a+1)*(x-1)+(M-1),E=(a+1)*x+(M-1),N=(a+1)*x+M,D=(a+1)*(x-1)+M;m.push(A,E,D),m.push(E,N,D)}}function _(){for(let x=0;x<=n;x++)for(let M=0;M<=a;M++)f.x=x/n,f.y=M/a,h.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new VD(new x_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class bee extends fn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,a=new ge,s=new ge;if(e.index!==null){const o=e.attributes.position,u=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:u.count,materialIndex:0}]);for(let f=0,c=l.length;f<c;++f){const p=l[f],d=p.start,h=p.count;for(let m=d,v=d+h;m<v;m+=3)for(let g=0;g<3;g++){const y=u.getX(m+g),_=u.getX(m+(g+1)%3);a.fromBufferAttribute(o,y),s.fromBufferAttribute(o,_),kG(a,s,r)===!0&&(n.push(a.x,a.y,a.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let u=0,l=o.count/3;u<l;u++)for(let f=0;f<3;f++){const c=3*u+f,p=3*u+(f+1)%3;a.fromBufferAttribute(o,c),s.fromBufferAttribute(o,p),kG(a,s,r)===!0&&(n.push(a.x,a.y,a.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Rt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function kG(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(a)===!0?!1:(n.add(r),n.add(a),!0)}var UG=Object.freeze({__proto__:null,BoxGeometry:Oh,CapsuleGeometry:ID,CircleGeometry:PD,ConeGeometry:OD,CylinderGeometry:xv,DodecahedronGeometry:LD,EdgesGeometry:vee,ExtrudeGeometry:UD,IcosahedronGeometry:FD,LatheGeometry:_x,OctahedronGeometry:Mx,PlaneGeometry:Kc,PolyhedronGeometry:Up,RingGeometry:BD,ShapeGeometry:zD,SphereGeometry:Ex,TetrahedronGeometry:qD,TorusGeometry:GD,TorusKnotGeometry:HD,TubeGeometry:VD,WireframeGeometry:bee});class See extends va{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new gt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class wee extends Tu{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class J4 extends va{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kp,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new uo,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _ee extends J4{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new nt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ti(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Mee extends va{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gt(16777215),this.specular=new gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kp,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new uo,this.combine=gx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Eee extends va{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new gt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kp,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Tee extends va{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kp,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Aee extends va{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kp,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new uo,this.combine=gx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Nee extends va{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new gt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kp,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Cee extends gs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Dd(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function Dee(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ree(t){function e(a,s){return t[a]-t[s]}const n=t.length,r=new Array(n);for(let a=0;a!==n;++a)r[a]=a;return r.sort(e),r}function AL(t,e,n){const r=t.length,a=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const u=n[s]*e;for(let l=0;l!==e;++l)a[o++]=t[u+l]}return a}function K4(t,e,n,r){let a=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[a++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[a++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[a++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[a++];while(s!==void 0)}function JRe(t,e,n,r,a=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const f=s.tracks[l],c=f.getValueSize(),p=[],d=[];for(let h=0;h<f.times.length;++h){const m=f.times[h]*a;if(!(m<n||m>=r)){p.push(f.times[h]);for(let v=0;v<c;++v)d.push(f.values[h*c+v])}}p.length!==0&&(f.times=Dd(p,f.times.constructor),f.values=Dd(d,f.values.constructor),o.push(f))}s.tracks=o;let u=1/0;for(let l=0;l<s.tracks.length;++l)u>s.tracks[l].times[0]&&(u=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*u);return s.resetDuration(),s}function KRe(t,e=0,n=t,r=30){r<=0&&(r=30);const a=n.tracks.length,s=e/r;for(let o=0;o<a;++o){const u=n.tracks[o],l=u.ValueTypeName;if(l==="bool"||l==="string")continue;const f=t.tracks.find(function(y){return y.name===u.name&&y.ValueTypeName===l});if(f===void 0)continue;let c=0;const p=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=p/3);let d=0;const h=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);const m=u.times.length-1;let v;if(s<=u.times[0]){const y=c,_=p-c;v=u.values.slice(y,_)}else if(s>=u.times[m]){const y=m*p+c,_=y+p-c;v=u.values.slice(y,_)}else{const y=u.createInterpolant(),_=c,x=p-c;y.evaluate(s),v=y.resultBuffer.slice(_,x)}l==="quaternion"&&new Oa().fromArray(v).normalize().conjugate().toArray(v);const g=f.times.length;for(let y=0;y<g;++y){const _=y*h+d;if(l==="quaternion")Oa.multiplyQuaternionsFlat(f.values,_,v,0,f.values,_);else{const x=h-d*2;for(let M=0;M<x;++M)f.values[_+M]-=v[M]}}}return t.blendMode=P4,t}const eIe={convertArray:Dd,isTypedArray:Dee,getKeyframeOrder:Ree,sortedArray:AL,flattenJSON:K4,subclip:JRe,makeClipAdditive:KRe};class Tx{constructor(e,n,r,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,a=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<a)){for(let u=r+2;;){if(a===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===u)break;if(s=a,a=n[++r],e<a)break t}o=n.length;break n}if(!(e>=s)){const u=n[1];e<u&&(r=2,s=u);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(a=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const u=r+o>>>1;e<n[u]?o=u:r=u+1}if(a=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,a)}return this.interpolate_(r,s,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,a=this.valueSize,s=e*a;for(let o=0;o!==a;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Iee extends Tx{constructor(e,n,r,a){super(e,n,r,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ad,endingEnd:Ad}}intervalChanged_(e,n,r){const a=this.parameterPositions;let s=e-2,o=e+1,u=a[s],l=a[o];if(u===void 0)switch(this.getSettings_().endingStart){case Nd:s=e,u=2*n-r;break;case t1:s=a.length-2,u=n+a[s]-a[s+1];break;default:s=e,u=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Nd:o=e,l=2*r-n;break;case t1:o=1,l=r+a[1]-a[0];break;default:o=e-1,l=n}const f=(r-n)*.5,c=this.valueSize;this._weightPrev=f/(n-u),this._weightNext=f/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,n,r,a){const s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,l=e*u,f=l-u,c=this._offsetPrev,p=this._offsetNext,d=this._weightPrev,h=this._weightNext,m=(r-n)/(a-n),v=m*m,g=v*m,y=-d*g+2*d*v-d*m,_=(1+d)*g+(-1.5-2*d)*v+(-.5+d)*m+1,x=(-1-h)*g+(1.5+h)*v+.5*m,M=h*g-h*v;for(let A=0;A!==u;++A)s[A]=y*o[c+A]+_*o[f+A]+x*o[l+A]+M*o[p+A];return s}}class eF extends Tx{constructor(e,n,r,a){super(e,n,r,a)}interpolate_(e,n,r,a){const s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,l=e*u,f=l-u,c=(r-n)/(a-n),p=1-c;for(let d=0;d!==u;++d)s[d]=o[f+d]*p+o[l+d]*c;return s}}class Pee extends Tx{constructor(e,n,r,a){super(e,n,r,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Uu{constructor(e,n,r,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Dd(n,this.TimeBufferType),this.values=Dd(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Dd(e.times,Array),values:Dd(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(r.interpolation=a)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Pee(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new eF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Iee(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case e1:n=this.InterpolantFactoryMethodDiscrete;break;case m_:n=this.InterpolantFactoryMethodLinear;break;case x2:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return e1;case this.InterpolantFactoryMethodLinear:return m_;case this.InterpolantFactoryMethodSmooth:return x2}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,a=n.length;r!==a;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,a=n.length;r!==a;++r)n[r]*=e}return this}trim(e,n){const r=this.times,a=r.length;let s=0,o=a-1;for(;s!==a&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==a){s>=o&&(o=Math.max(o,1),s=o-1);const u=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*u,o*u)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,a=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let u=0;u!==s;u++){const l=r[u];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,l,o),e=!1;break}o=l}if(a!==void 0&&Dee(a))for(let u=0,l=a.length;u!==l;++u){const f=a[u];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),a=this.getInterpolation()===x2,s=e.length-1;let o=1;for(let u=1;u<s;++u){let l=!1;const f=e[u],c=e[u+1];if(f!==c&&(u!==1||f!==e[0]))if(a)l=!0;else{const p=u*r,d=p-r,h=p+r;for(let m=0;m!==r;++m){const v=n[p+m];if(v!==n[d+m]||v!==n[h+m]){l=!0;break}}}if(l){if(u!==o){e[o]=e[u];const p=u*r,d=o*r;for(let h=0;h!==r;++h)n[d+h]=n[p+h]}++o}}if(s>0){e[o]=e[s];for(let u=s*r,l=o*r,f=0;f!==r;++f)n[l+f]=n[u+f];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,a=new r(this.name,e,n);return a.createInterpolant=this.createInterpolant,a}}Uu.prototype.TimeBufferType=Float32Array;Uu.prototype.ValueBufferType=Float32Array;Uu.prototype.DefaultInterpolation=m_;class Lh extends Uu{constructor(e,n,r){super(e,n,r)}}Lh.prototype.ValueTypeName="bool";Lh.prototype.ValueBufferType=Array;Lh.prototype.DefaultInterpolation=e1;Lh.prototype.InterpolantFactoryMethodLinear=void 0;Lh.prototype.InterpolantFactoryMethodSmooth=void 0;class tF extends Uu{}tF.prototype.ValueTypeName="color";class p1 extends Uu{}p1.prototype.ValueTypeName="number";class Oee extends Tx{constructor(e,n,r,a){super(e,n,r,a)}interpolate_(e,n,r,a){const s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,l=(r-n)/(a-n);let f=e*u;for(let c=f+u;f!==c;f+=4)Oa.slerpFlat(s,0,o,f-u,o,f,l);return s}}class Ax extends Uu{InterpolantFactoryMethodLinear(e){return new Oee(this.times,this.values,this.getValueSize(),e)}}Ax.prototype.ValueTypeName="quaternion";Ax.prototype.InterpolantFactoryMethodSmooth=void 0;class kh extends Uu{constructor(e,n,r){super(e,n,r)}}kh.prototype.ValueTypeName="string";kh.prototype.ValueBufferType=Array;kh.prototype.DefaultInterpolation=e1;kh.prototype.InterpolantFactoryMethodLinear=void 0;kh.prototype.InterpolantFactoryMethodSmooth=void 0;class d1 extends Uu{}d1.prototype.ValueTypeName="vector";class h1{constructor(e="",n=-1,r=[],a=bD){this.name=e,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=no(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,a=1/(e.fps||1);for(let o=0,u=r.length;o!==u;++o)n.push(nIe(r[o]).scale(a));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,a={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Uu.toJSON(r[s]));return a}static CreateFromMorphTargetSequence(e,n,r,a){const s=n.length,o=[];for(let u=0;u<s;u++){let l=[],f=[];l.push((u+s-1)%s,u,(u+1)%s),f.push(0,1,0);const c=Ree(l);l=AL(l,1,c),f=AL(f,1,c),!a&&l[0]===0&&(l.push(s),f.push(f[0])),o.push(new p1(".morphTargetInfluences["+n[u].name+"]",l,f).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const a=e;r=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<r.length;a++)if(r[a].name===n)return r[a];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const a={},s=/^([\w-]*?)([\d]+)$/;for(let u=0,l=e.length;u<l;u++){const f=e[u],c=f.name.match(s);if(c&&c.length>1){const p=c[1];let d=a[p];d||(a[p]=d=[]),d.push(f)}}const o=[];for(const u in a)o.push(this.CreateFromMorphTargetSequence(u,a[u],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,d,h,m,v){if(h.length!==0){const g=[],y=[];K4(h,g,y,m),g.length!==0&&v.push(new p(d,g,y))}},a=[],s=e.name||"default",o=e.fps||30,u=e.blendMode;let l=e.length||-1;const f=e.hierarchy||[];for(let p=0;p<f.length;p++){const d=f[p].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const h={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let v=0;v<d[m].morphTargets.length;v++)h[d[m].morphTargets[v]]=-1;for(const v in h){const g=[],y=[];for(let _=0;_!==d[m].morphTargets.length;++_){const x=d[m];g.push(x.time),y.push(x.morphTarget===v?1:0)}a.push(new p1(".morphTargetInfluence["+v+"]",g,y))}l=h.length*o}else{const h=".bones["+n[p].name+"]";r(d1,h+".position",d,"pos",a),r(Ax,h+".quaternion",d,"rot",a),r(d1,h+".scale",d,"scl",a)}}return a.length===0?null:new this(s,l,a,u)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,a=e.length;r!==a;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function tIe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return p1;case"vector":case"vector2":case"vector3":case"vector4":return d1;case"color":return tF;case"quaternion":return Ax;case"bool":case"boolean":return Lh;case"string":return kh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function nIe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=tIe(t.type);if(t.times===void 0){const n=[],r=[];K4(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const lc={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class nF{constructor(e,n,r){const a=this;let s=!1,o=0,u=0,l;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(c){u++,s===!1&&a.onStart!==void 0&&a.onStart(c,o,u),s=!0},this.itemEnd=function(c){o++,a.onProgress!==void 0&&a.onProgress(c,o,u),o===u&&(s=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(c){a.onError!==void 0&&a.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,p){return f.push(c,p),this},this.removeHandler=function(c){const p=f.indexOf(c);return p!==-1&&f.splice(p,2),this},this.getHandler=function(c){for(let p=0,d=f.length;p<d;p+=2){const h=f[p],m=f[p+1];if(h.global&&(h.lastIndex=0),h.test(c))return m}return null}}}const Lee=new nF;class ks{constructor(e){this.manager=e!==void 0?e:Lee,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(a,s){r.load(e,a,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ks.DEFAULT_MATERIAL_NAME="__DEFAULT";const Xl={};class rIe extends Error{constructor(e,n){super(e),this.response=n}}class Pc extends ks{constructor(e){super(e)}load(e,n,r,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=lc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Xl[e]!==void 0){Xl[e].push({onLoad:n,onProgress:r,onError:a});return}Xl[e]=[],Xl[e].push({onLoad:n,onProgress:r,onError:a});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,l=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const c=Xl[e],p=f.body.getReader(),d=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),h=d?parseInt(d):0,m=h!==0;let v=0;const g=new ReadableStream({start(y){_();function _(){p.read().then(({done:x,value:M})=>{if(x)y.close();else{v+=M.byteLength;const A=new ProgressEvent("progress",{lengthComputable:m,loaded:v,total:h});for(let E=0,N=c.length;E<N;E++){const D=c[E];D.onProgress&&D.onProgress(A)}y.enqueue(M),_()}},x=>{y.error(x)})}}});return new Response(g)}else throw new rIe(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(l){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(c=>new DOMParser().parseFromString(c,u));case"json":return f.json();default:if(u===void 0)return f.text();{const p=/charset="?([^;"\s]*)"?/i.exec(u),d=p&&p[1]?p[1].toLowerCase():void 0,h=new TextDecoder(d);return f.arrayBuffer().then(m=>h.decode(m))}}}).then(f=>{lc.add(e,f);const c=Xl[e];delete Xl[e];for(let p=0,d=c.length;p<d;p++){const h=c[p];h.onLoad&&h.onLoad(f)}}).catch(f=>{const c=Xl[e];if(c===void 0)throw this.manager.itemError(e),f;delete Xl[e];for(let p=0,d=c.length;p<d;p++){const h=c[p];h.onError&&h.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class iIe extends ks{constructor(e){super(e)}load(e,n,r,a){const s=this,o=new Pc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{n(s.parse(JSON.parse(u)))}catch(l){a?a(l):console.error(l),s.manager.itemError(e)}},r,a)}parse(e){const n=[];for(let r=0;r<e.length;r++){const a=h1.parse(e[r]);n.push(a)}return n}}class aIe extends ks{constructor(e){super(e)}load(e,n,r,a){const s=this,o=[],u=new DD,l=new Pc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let f=0;function c(p){l.load(e[p],function(d){const h=s.parse(d,!0);o[p]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},f+=1,f===6&&(h.mipmapCount===1&&(u.minFilter=ni),u.image=o,u.format=h.format,u.needsUpdate=!0,n&&n(u))},r,a)}if(Array.isArray(e))for(let p=0,d=e.length;p<d;++p)c(p);else l.load(e,function(p){const d=s.parse(p,!0);if(d.isCubemap){const h=d.mipmaps.length/d.mipmapCount;for(let m=0;m<h;m++){o[m]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)o[m].mipmaps.push(d.mipmaps[m*d.mipmapCount+v]),o[m].format=d.format,o[m].width=d.width,o[m].height=d.height}u.image=o}else u.image.width=d.width,u.image.height=d.height,u.mipmaps=d.mipmaps;d.mipmapCount===1&&(u.minFilter=ni),u.format=d.format,u.needsUpdate=!0,n&&n(u)},r,a);return u}}class m1 extends ks{constructor(e){super(e)}load(e,n,r,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const u=o1("img");function l(){c(),lc.add(e,this),n&&n(this),s.manager.itemEnd(e)}function f(p){c(),a&&a(p),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){u.removeEventListener("load",l,!1),u.removeEventListener("error",f,!1)}return u.addEventListener("load",l,!1),u.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),s.manager.itemStart(e),u.src=e,u}}class sIe extends ks{constructor(e){super(e)}load(e,n,r,a){const s=new Sx;s.colorSpace=Ro;const o=new m1(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let u=0;function l(f){o.load(e[f],function(c){s.images[f]=c,u++,u===6&&(s.needsUpdate=!0,n&&n(s))},void 0,a)}for(let f=0;f<e.length;++f)l(f);return s}}class oIe extends ks{constructor(e){super(e)}load(e,n,r,a){const s=this,o=new ul,u=new Pc(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(s.withCredentials),u.load(e,function(l){let f;try{f=s.parse(l)}catch(c){if(a!==void 0)a(c);else{console.error(c);return}}f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:Bo,o.wrapT=f.wrapT!==void 0?f.wrapT:Bo,o.magFilter=f.magFilter!==void 0?f.magFilter:ni,o.minFilter=f.minFilter!==void 0?f.minFilter:ni,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(o.colorSpace=f.colorSpace),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=tl),f.mipmapCount===1&&(o.minFilter=ni),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,n&&n(o,f)},r,a),o}}class uIe extends ks{constructor(e){super(e)}load(e,n,r,a){const s=new Ur,o=new m1(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(u){s.image=u,s.needsUpdate=!0,n!==void 0&&n(s)},r,a),s}}class Fp extends Gn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new gt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class kee extends Fp{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const dP=new Ht,FG=new ge,BG=new ge;class rF{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new nt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wx,this._frameExtents=new nt(1,1),this._viewportCount=1,this._viewports=[new On(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;FG.setFromMatrixPosition(e.matrixWorld),n.position.copy(FG),BG.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(BG),n.updateMatrixWorld(),dP.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dP),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(dP)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class lIe extends rF{constructor(){super(new fi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=qm*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||a!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=a,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Uee extends Fp{constructor(e,n,r=0,a=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gn.DEFAULT_UP),this.updateMatrix(),this.target=new Gn,this.distance=r,this.angle=a,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new lIe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const zG=new Ht,gg=new ge,hP=new ge;class cIe extends rF{constructor(){super(new fi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new nt(4,2),this._viewportCount=6,this._viewports=[new On(2,1,1,1),new On(0,1,1,1),new On(3,1,1,1),new On(1,1,1,1),new On(3,0,1,1),new On(1,0,1,1)],this._cubeDirections=[new ge(1,0,0),new ge(-1,0,0),new ge(0,0,1),new ge(0,0,-1),new ge(0,1,0),new ge(0,-1,0)],this._cubeUps=[new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,0,1),new ge(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,a=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),gg.setFromMatrixPosition(e.matrixWorld),r.position.copy(gg),hP.copy(r.position),hP.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(hP),r.updateMatrixWorld(),a.makeTranslation(-gg.x,-gg.y,-gg.z),zG.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zG)}}class Fee extends Fp{constructor(e,n,r=0,a=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=a,this.shadow=new cIe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class fIe extends rF{constructor(){super(new Qf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Bee extends Fp{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gn.DEFAULT_UP),this.updateMatrix(),this.target=new Gn,this.shadow=new fIe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class zee extends Fp{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class qee extends Fp{constructor(e,n,r=10,a=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Gee{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ge)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,a=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*a),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*a)),n.addScaledVector(o[5],1.092548*(a*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-a*a)),n}getIrradianceAt(e,n){const r=e.x,a=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*a),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*a),n.addScaledVector(o[5],2*.429043*a*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-a*a)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let a=0;a<9;a++)r[a].fromArray(e,n+a*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let a=0;a<9;a++)r[a].toArray(e,n+a*3);return e}static getBasisAt(e,n){const r=e.x,a=e.y,s=e.z;n[0]=.282095,n[1]=.488603*a,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*a,n[5]=1.092548*a*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-a*a)}}class Hee extends Fp{constructor(e=new Gee,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class WD extends ks{constructor(e){super(e),this.textures={}}load(e,n,r,a){const s=this,o=new Pc(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(u){try{n(s.parse(JSON.parse(u)))}catch(l){a?a(l):console.error(l),s.manager.itemError(e)}},r,a)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const a=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new gt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(a.dispersion=e.dispersion),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(a.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(a.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(a.depthFunc=e.depthFunc),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(a.blendSrc=e.blendSrc),e.blendDst!==void 0&&(a.blendDst=e.blendDst),e.blendEquation!==void 0&&(a.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(a.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(a.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==void 0&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(a.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(a.uniforms[s]={},o.type){case"t":a.uniforms[s].value=r(o.value);break;case"c":a.uniforms[s].value=new gt().setHex(o.value);break;case"v2":a.uniforms[s].value=new nt().fromArray(o.value);break;case"v3":a.uniforms[s].value=new ge().fromArray(o.value);break;case"v4":a.uniforms[s].value=new On().fromArray(o.value);break;case"m3":a.uniforms[s].value=new un().fromArray(o.value);break;case"m4":a.uniforms[s].value=new Ht().fromArray(o.value);break;default:a.uniforms[s].value=o.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)a.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(a.lights=e.lights),e.clipping!==void 0&&(a.clipping=e.clipping),e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=r(e.map)),e.matcap!==void 0&&(a.matcap=r(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),a.normalScale=new nt().fromArray(s)}return e.displacementMap!==void 0&&(a.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=r(e.envMap)),e.envMapRotation!==void 0&&a.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new nt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(a.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=r(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return WD.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:See,SpriteMaterial:H4,RawShaderMaterial:wee,ShaderMaterial:Tu,PointsMaterial:W4,MeshPhysicalMaterial:_ee,MeshStandardMaterial:J4,MeshPhongMaterial:Mee,MeshToonMaterial:Eee,MeshNormalMaterial:Tee,MeshLambertMaterial:Aee,MeshDepthMaterial:MD,MeshDistanceMaterial:ED,MeshBasicMaterial:Jc,MeshMatcapMaterial:Nee,LineDashedMaterial:Cee,LineBasicMaterial:gs,Material:va};return new n[e]}}class NL{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,a=e.length;r<a;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class iF extends fn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Vee extends ks{constructor(e){super(e)}load(e,n,r,a){const s=this,o=new Pc(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(u){try{n(s.parse(JSON.parse(u)))}catch(l){a?a(l):console.error(l),s.manager.itemError(e)}},r,a)}parse(e){const n={},r={};function a(h,m){if(n[m]!==void 0)return n[m];const g=h.interleavedBuffers[m],y=s(h,g.buffer),_=J0(g.type,y),x=new ND(_,g.stride);return x.uuid=g.uuid,n[m]=x,x}function s(h,m){if(r[m]!==void 0)return r[m];const g=h.arrayBuffers[m],y=new Uint32Array(g).buffer;return r[m]=y,y}const o=e.isInstancedBufferGeometry?new iF:new fn,u=e.data.index;if(u!==void 0){const h=J0(u.type,u.array);o.setIndex(new lr(h,1))}const l=e.data.attributes;for(const h in l){const m=l[h];let v;if(m.isInterleavedBufferAttribute){const g=a(e.data,m.data);v=new lh(g,m.itemSize,m.offset,m.normalized)}else{const g=J0(m.type,m.array),y=m.isInstancedBufferAttribute?ch:lr;v=new y(g,m.itemSize,m.normalized)}m.name!==void 0&&(v.name=m.name),m.usage!==void 0&&v.setUsage(m.usage),o.setAttribute(h,v)}const f=e.data.morphAttributes;if(f)for(const h in f){const m=f[h],v=[];for(let g=0,y=m.length;g<y;g++){const _=m[g];let x;if(_.isInterleavedBufferAttribute){const M=a(e.data,_.data);x=new lh(M,_.itemSize,_.offset,_.normalized)}else{const M=J0(_.type,_.array);x=new lr(M,_.itemSize,_.normalized)}_.name!==void 0&&(x.name=_.name),v.push(x)}o.morphAttributes[h]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let h=0,m=p.length;h!==m;++h){const v=p[h];o.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const h=new ge;d.center!==void 0&&h.fromArray(d.center),o.boundingSphere=new fa(h,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class pIe extends ks{constructor(e){super(e)}load(e,n,r,a){const s=this,o=this.path===""?NL.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const u=new Pc(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(l){let f=null;try{f=JSON.parse(l)}catch(p){a!==void 0&&a(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const c=f.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,n)},r,a)}async loadAsync(e,n){const r=this,a=this.path===""?NL.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new Pc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),u=JSON.parse(o),l=u.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(u)}parse(e,n){const r=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,a),o=this.parseImages(e.images,function(){n!==void 0&&n(f)}),u=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,u),f=this.parseObject(e.object,s,l,u,r),c=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,c),this.bindLightTargets(f),n!==void 0){let p=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){p=!0;break}p===!1&&n(f)}return f}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),u=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,a,u,o,n),f=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,f),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,a=e.length;r<a;r++){const s=new Gd().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},a={};if(n.traverse(function(s){s.isBone&&(a[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const u=new CD().fromJSON(e[s],a);r[u.uuid]=u}return r}parseGeometries(e,n){const r={};if(e!==void 0){const a=new Vee;for(let s=0,o=e.length;s<o;s++){let u;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":u=a.parse(l);break;default:l.type in UG?u=UG[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}u.uuid=l.uuid,l.name!==void 0&&(u.name=l.name),l.userData!==void 0&&(u.userData=l.userData),r[l.uuid]=u}}return r}parseMaterials(e,n){const r={},a={};if(e!==void 0){const s=new WD;s.setTextures(n);for(let o=0,u=e.length;o<u;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),a[l.uuid]=r[l.uuid]}}return a}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const a=e[r],s=h1.parse(a);n[s.uuid]=s}return n}parseImages(e,n){const r=this,a={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function u(l){if(typeof l=="string"){const f=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:r.resourcePath+f;return o(c)}else return l.data?{data:J0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new nF(n);s=new m1(l),s.setCrossOrigin(this.crossOrigin);for(let f=0,c=e.length;f<c;f++){const p=e[f],d=p.url;if(Array.isArray(d)){const h=[];for(let m=0,v=d.length;m<v;m++){const g=d[m],y=u(g);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new ul(y.data,y.width,y.height)))}a[p.uuid]=new Cd(h)}else{const h=u(p.url);a[p.uuid]=new Cd(h)}}}return a}async parseImagesAsync(e){const n=this,r={};let a;async function s(o){if(typeof o=="string"){const u=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return await a.loadAsync(l)}else return o.data?{data:J0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){a=new m1(this.manager),a.setCrossOrigin(this.crossOrigin);for(let o=0,u=e.length;o<u;o++){const l=e[o],f=l.url;if(Array.isArray(f)){const c=[];for(let p=0,d=f.length;p<d;p++){const h=f[p],m=await s(h);m!==null&&(m instanceof HTMLImageElement?c.push(m):c.push(new ul(m.data,m.width,m.height)))}r[l.uuid]=new Cd(c)}else{const c=await s(l.url);r[l.uuid]=new Cd(c)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const a={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const u=e[s];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),n[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const l=n[u.image],f=l.data;let c;Array.isArray(f)?(c=new Sx,f.length===6&&(c.needsUpdate=!0)):(f&&f.data?c=new ul:c=new Ur,f&&(c.needsUpdate=!0)),c.source=l,c.uuid=u.uuid,u.name!==void 0&&(c.name=u.name),u.mapping!==void 0&&(c.mapping=r(u.mapping,dIe)),u.channel!==void 0&&(c.channel=u.channel),u.offset!==void 0&&c.offset.fromArray(u.offset),u.repeat!==void 0&&c.repeat.fromArray(u.repeat),u.center!==void 0&&c.center.fromArray(u.center),u.rotation!==void 0&&(c.rotation=u.rotation),u.wrap!==void 0&&(c.wrapS=r(u.wrap[0],qG),c.wrapT=r(u.wrap[1],qG)),u.format!==void 0&&(c.format=u.format),u.internalFormat!==void 0&&(c.internalFormat=u.internalFormat),u.type!==void 0&&(c.type=u.type),u.colorSpace!==void 0&&(c.colorSpace=u.colorSpace),u.minFilter!==void 0&&(c.minFilter=r(u.minFilter,GG)),u.magFilter!==void 0&&(c.magFilter=r(u.magFilter,GG)),u.anisotropy!==void 0&&(c.anisotropy=u.anisotropy),u.flipY!==void 0&&(c.flipY=u.flipY),u.generateMipmaps!==void 0&&(c.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(c.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&&(c.compareFunction=u.compareFunction),u.userData!==void 0&&(c.userData=u.userData),a[u.uuid]=c}return a}parseObject(e,n,r,a,s){let o;function u(d){return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),n[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const h=[];for(let m=0,v=d.length;m<v;m++){const g=d[m];r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),h.push(r[g])}return h}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function f(d){return a[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),a[d]}let c,p;switch(e.type){case"Scene":o=new v_,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new gt(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new AD(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new TD(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new fi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Qf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new zee(e.color,e.intensity);break;case"DirectionalLight":o=new Bee(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Fee(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new qee(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Uee(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new kee(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Hee().fromJSON(e);break;case"SkinnedMesh":c=u(e.geometry),p=l(e.material),o=new see(c,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=u(e.geometry),p=l(e.material),o=new Wr(c,p);break;case"InstancedMesh":c=u(e.geometry),p=l(e.material);const d=e.count,h=e.instanceMatrix,m=e.instanceColor;o=new oee(c,p,d),o.instanceMatrix=new ch(new Float32Array(h.array),16),m!==void 0&&(o.instanceColor=new ch(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":c=u(e.geometry),p=l(e.material),o=new uee(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const g=new La;g.min.fromArray(v.boxMin),g.max.fromArray(v.boxMax);const y=new fa;return y.radius=v.sphereRadius,y.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:g,sphereInitialized:v.sphereInitialized,sphere:y}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=f(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=f(e.colorsTexture.uuid));break;case"LOD":o=new aee;break;case"Line":o=new pp(u(e.geometry),l(e.material));break;case"LineLoop":o=new lee(u(e.geometry),l(e.material));break;case"LineSegments":o=new Cl(u(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new cee(u(e.geometry),l(e.material));break;case"Sprite":o=new iee(l(e.material));break;case"Group":o=new em;break;case"Bone":o=new V4;break;default:o=new Gn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let h=0;h<d.length;h++)o.add(this.parseObject(d[h],n,r,a,s))}if(e.animations!==void 0){const d=e.animations;for(let h=0;h<d.length;h++){const m=d[h];o.animations.push(s[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let h=0;h<d.length;h++){const m=d[h],v=o.getObjectByProperty("uuid",m.object);v!==void 0&&o.addLevel(v,m.distance,m.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const a=n[r.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(a,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,a=e.getObjectByProperty("uuid",r);a!==void 0?n.target=a:n.target=new Gn}})}}const dIe={UVMapping:dD,CubeReflectionMapping:Rc,CubeRefractionMapping:fp,EquirectangularReflectionMapping:Qy,EquirectangularRefractionMapping:Zy,CubeUVReflectionMapping:vv},qG={RepeatWrapping:Jy,ClampToEdgeWrapping:Bo,MirroredRepeatWrapping:Ky},GG={NearestFilter:Vi,NearestMipmapNearestFilter:_4,NearestMipmapLinearFilter:Z0,LinearFilter:ni,LinearMipmapNearestFilter:ty,LinearMipmapLinearFilter:tl};class hIe extends ks{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lc.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(f=>{n&&n(f),s.manager.itemEnd(e)}).catch(f=>{a&&a(f)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const l=fetch(e,u).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return lc.add(e,f),n&&n(f),s.manager.itemEnd(e),f}).catch(function(f){a&&a(f),lc.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});lc.add(e,l),s.manager.itemStart(e)}}let OS;class aF{static getContext(){return OS===void 0&&(OS=new(window.AudioContext||window.webkitAudioContext)),OS}static setContext(e){OS=e}}class mIe extends ks{constructor(e){super(e)}load(e,n,r,a){const s=this,o=new Pc(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const f=l.slice(0);aF.getContext().decodeAudioData(f,function(p){n(p)}).catch(u)}catch(f){u(f)}},r,a);function u(l){a?a(l):console.error(l),s.manager.itemError(e)}}}const HG=new Ht,VG=new Ht,od=new Ht;class vIe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,od.copy(e.projectionMatrix);const a=n.eyeSep/2,s=a*n.near/n.focus,o=n.near*Math.tan(zd*n.fov*.5)/n.zoom;let u,l;VG.elements[12]=-a,HG.elements[12]=a,u=-o*n.aspect+s,l=o*n.aspect+s,od.elements[0]=2*n.near/(l-u),od.elements[8]=(l+u)/(l-u),this.cameraL.projectionMatrix.copy(od),u=-o*n.aspect-s,l=o*n.aspect-s,od.elements[0]=2*n.near/(l-u),od.elements[8]=(l+u)/(l-u),this.cameraR.projectionMatrix.copy(od)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(VG),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(HG)}}class sF{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=WG(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=WG();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function WG(){return performance.now()}const ud=new ge,$G=new Oa,gIe=new ge,ld=new ge;class yIe extends Gn{constructor(){super(),this.type="AudioListener",this.context=aF.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new sF}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ud,$G,gIe),ld.set(0,0,-1).applyQuaternion($G),n.positionX){const a=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(ud.x,a),n.positionY.linearRampToValueAtTime(ud.y,a),n.positionZ.linearRampToValueAtTime(ud.z,a),n.forwardX.linearRampToValueAtTime(ld.x,a),n.forwardY.linearRampToValueAtTime(ld.y,a),n.forwardZ.linearRampToValueAtTime(ld.z,a),n.upX.linearRampToValueAtTime(r.x,a),n.upY.linearRampToValueAtTime(r.y,a),n.upZ.linearRampToValueAtTime(r.z,a)}else n.setPosition(ud.x,ud.y,ud.z),n.setOrientation(ld.x,ld.y,ld.z,r.x,r.y,r.z)}}class Wee extends Gn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const cd=new ge,jG=new Oa,xIe=new ge,fd=new ge;class bIe extends Wee{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(cd,jG,xIe),fd.set(0,0,1).applyQuaternion(jG);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(cd.x,r),n.positionY.linearRampToValueAtTime(cd.y,r),n.positionZ.linearRampToValueAtTime(cd.z,r),n.orientationX.linearRampToValueAtTime(fd.x,r),n.orientationY.linearRampToValueAtTime(fd.y,r),n.orientationZ.linearRampToValueAtTime(fd.z,r)}else n.setPosition(cd.x,cd.y,cd.z),n.setOrientation(fd.x,fd.y,fd.z)}}class SIe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class $ee{constructor(e,n,r){this.binding=e,this.valueSize=r;let a,s,o;switch(n){case"quaternion":a=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":a=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:a=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,a=this.valueSize,s=e*a+a;let o=this.cumulativeWeight;if(o===0){for(let u=0;u!==a;++u)r[s+u]=r[u];o=n}else{o+=n;const u=n/o;this._mixBufferRegion(r,s,0,u,a)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,a=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,a,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,a=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,a,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,a,this._addIndex*n,1,n);for(let l=n,f=n+n;l!==f;++l)if(r[l]!==r[l+n]){u.setValue(r,a);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,a=r*this._origIndex;e.getValue(n,a);for(let s=r,o=a;s!==o;++s)n[s]=n[a+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,a,s){if(a>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,a){Oa.slerpFlat(e,n,e,n,e,r,a)}_slerpAdditive(e,n,r,a,s){const o=this._workIndex*s;Oa.multiplyQuaternionsFlat(e,o,e,n,e,r),Oa.slerpFlat(e,n,e,n,e,o,a)}_lerp(e,n,r,a,s){const o=1-a;for(let u=0;u!==s;++u){const l=n+u;e[l]=e[l]*o+e[r+u]*a}}_lerpAdditive(e,n,r,a,s){for(let o=0;o!==s;++o){const u=n+o;e[u]=e[u]+e[r+o]*a}}}const oF="\\[\\]\\.:\\/",wIe=new RegExp("["+oF+"]","g"),uF="[^"+oF+"]",_Ie="[^"+oF.replace("\\.","")+"]",MIe=/((?:WC+[\/:])*)/.source.replace("WC",uF),EIe=/(WCOD+)?/.source.replace("WCOD",_Ie),TIe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uF),AIe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uF),NIe=new RegExp("^"+MIe+EIe+TIe+AIe+"$"),CIe=["material","materials","bones","map"];class DIe{constructor(e,n,r){const a=r||Bn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,a)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,a=this._bindings[r];a!==void 0&&a.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=r.length;a!==s;++a)r[a].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Bn{constructor(e,n,r){this.path=n,this.parsedPath=r||Bn.parseTrackName(n),this.node=Bn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Bn.Composite(e,n,r):new Bn(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(wIe,"")}static parseTrackName(e){const n=NIe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},a=r.nodeName&&r.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const s=r.nodeName.substring(a+1);CIe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,a),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const u=s[o];if(u.name===n||u.uuid===n)return u;const l=r(u.children);if(l)return l}return null},a=r(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let a=0,s=r.length;a!==s;++a)e[n++]=r[a]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let a=0,s=r.length;a!==s;++a)r[a]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let a=0,s=r.length;a!==s;++a)r[a]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let a=0,s=r.length;a!==s;++a)r[a]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,a=n.propertyName;let s=n.propertyIndex;if(e||(e=Bn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===f){f=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[a];if(o===void 0){const f=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+a+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=a;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Bn.Composite=DIe;Bn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Bn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Bn.prototype.GetterByBindingType=[Bn.prototype._getValue_direct,Bn.prototype._getValue_array,Bn.prototype._getValue_arrayElement,Bn.prototype._getValue_toArray];Bn.prototype.SetterByBindingTypeAndVersioning=[[Bn.prototype._setValue_direct,Bn.prototype._setValue_direct_setNeedsUpdate,Bn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Bn.prototype._setValue_array,Bn.prototype._setValue_array_setNeedsUpdate,Bn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Bn.prototype._setValue_arrayElement,Bn.prototype._setValue_arrayElement_setNeedsUpdate,Bn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Bn.prototype._setValue_fromArray,Bn.prototype._setValue_fromArray_setNeedsUpdate,Bn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class RIe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=no(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,a=arguments.length;r!==a;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length;let u,l=e.length,f=this.nCachedObjects_;for(let c=0,p=arguments.length;c!==p;++c){const d=arguments[c],h=d.uuid;let m=n[h];if(m===void 0){m=l++,n[h]=m,e.push(d);for(let v=0,g=o;v!==g;++v)s[v].push(new Bn(d,r[v],a[v]))}else if(m<f){u=e[m];const v=--f,g=e[v];n[g.uuid]=m,e[m]=g,n[h]=v,e[v]=d;for(let y=0,_=o;y!==_;++y){const x=s[y],M=x[v];let A=x[m];x[m]=M,A===void 0&&(A=new Bn(d,r[y],a[y])),x[v]=A}}else e[m]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,a=r.length;let s=this.nCachedObjects_;for(let o=0,u=arguments.length;o!==u;++o){const l=arguments[o],f=l.uuid,c=n[f];if(c!==void 0&&c>=s){const p=s++,d=e[p];n[d.uuid]=c,e[c]=d,n[f]=p,e[p]=l;for(let h=0,m=a;h!==m;++h){const v=r[h],g=v[p],y=v[c];v[c]=g,v[p]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,a=r.length;let s=this.nCachedObjects_,o=e.length;for(let u=0,l=arguments.length;u!==l;++u){const f=arguments[u],c=f.uuid,p=n[c];if(p!==void 0)if(delete n[c],p<s){const d=--s,h=e[d],m=--o,v=e[m];n[h.uuid]=p,e[p]=h,n[v.uuid]=d,e[d]=v,e.pop();for(let g=0,y=a;g!==y;++g){const _=r[g],x=_[d],M=_[m];_[p]=x,_[d]=M,_.pop()}}else{const d=--o,h=e[d];d>0&&(n[h.uuid]=p),e[p]=h,e.pop();for(let m=0,v=a;m!==v;++m){const g=r[m];g[p]=g[d],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let a=r[e];const s=this._bindings;if(a!==void 0)return s[a];const o=this._paths,u=this._parsedPaths,l=this._objects,f=l.length,c=this.nCachedObjects_,p=new Array(f);a=s.length,r[e]=a,o.push(e),u.push(n),s.push(p);for(let d=c,h=l.length;d!==h;++d){const m=l[d];p[d]=new Bn(m,e,n)}return p}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const a=this._paths,s=this._parsedPaths,o=this._bindings,u=o.length-1,l=o[u],f=e[u];n[f]=r,o[r]=l,o.pop(),s[r]=s[u],s.pop(),a[r]=a[u],a.pop()}}}class jee{constructor(e,n,r=null,a=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=a;const s=n.tracks,o=s.length,u=new Array(o),l={endingStart:Ad,endingEnd:Ad};for(let f=0;f!==o;++f){const c=s[f].createInterpolant(null);u[f]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=u,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=DK,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const a=this._clip.duration,s=e._clip.duration,o=s/a,u=a/s;e.warp(1,o,n),this.warp(u,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const a=this._mixer,s=a.time,o=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=a._lendControlInterpolant(),this._timeScaleInterpolant=u);const l=u.parameterPositions,f=u.sampleValues;return l[0]=s,l[1]=s+r,f[0]=e/o,f[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,a){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),u=this._updateWeight(e);if(u>0){const l=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case P4:for(let c=0,p=l.length;c!==p;++c)l[c].evaluate(o),f[c].accumulateAdditive(u);break;case bD:default:for(let c=0,p=l.length;c!==p;++c)l[c].evaluate(o),f[c].accumulate(a,u)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const a=r.evaluate(e)[0];n*=a,e>r.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const a=r.evaluate(e)[0];n*=a,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let a=this.time+e,s=this._loopCount;const o=r===RK;if(e===0)return s===-1?a:o&&(s&1)===1?n-a:a;if(r===CK){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=n)a=n;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),a>=n||a<0){const u=Math.floor(a/n);a-=n*u,s+=Math.abs(u);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?n:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=a;if(o&&(s&1)===1)return n-a}return a}_setEndings(e,n,r){const a=this._interpolantSettings;r?(a.endingStart=Nd,a.endingEnd=Nd):(e?a.endingStart=this.zeroSlopeAtStart?Nd:Ad:a.endingStart=t1,n?a.endingEnd=this.zeroSlopeAtEnd?Nd:Ad:a.endingEnd=t1)}_scheduleFading(e,n,r){const a=this._mixer,s=a.time;let o=this._weightInterpolant;o===null&&(o=a._lendControlInterpolant(),this._weightInterpolant=o);const u=o.parameterPositions,l=o.sampleValues;return u[0]=s,l[0]=n,u[1]=s+e,l[1]=r,this}}const IIe=new Float32Array(1);class PIe extends Lu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,a=e._clip.tracks,s=a.length,o=e._propertyBindings,u=e._interpolants,l=r.uuid,f=this._bindingsByRootAndName;let c=f[l];c===void 0&&(c={},f[l]=c);for(let p=0;p!==s;++p){const d=a[p],h=d.name;let m=c[h];if(m!==void 0)++m.referenceCount,o[p]=m;else{if(m=o[p],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,h));continue}const v=n&&n._propertyBindings[p].binding.parsedPath;m=new $ee(Bn.create(r,h,v),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,h),o[p]=m}u[p].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,a=e._clip.uuid,s=this._actionsByClip[a];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,a,r)}const n=e._propertyBindings;for(let r=0,a=n.length;r!==a;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,a=n.length;r!==a;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const a=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const u=o.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=a.length,a.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],a=e._cacheIndex;r._cacheIndex=a,n[a]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,u=o[s],l=u.knownActions,f=l[l.length-1],c=e._byClipCacheIndex;f._byClipCacheIndex=c,l[c]=f,l.pop(),e._byClipCacheIndex=null;const p=u.actionByRoot,d=(e._localRoot||this._root).uuid;delete p[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,a=n.length;r!==a;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,a=this._nActiveActions++,s=n[a];e._cacheIndex=a,n[a]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,a=--this._nActiveActions,s=n[a];e._cacheIndex=a,n[a]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const a=this._bindingsByRootAndName,s=this._bindings;let o=a[n];o===void 0&&(o={},a[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,a=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,u=o[a],l=n[n.length-1],f=e._cacheIndex;l._cacheIndex=f,n[f]=l,n.pop(),delete u[s],Object.keys(u).length===0&&delete o[a]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,a=this._nActiveBindings++,s=n[a];e._cacheIndex=a,n[a]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,a=--this._nActiveBindings,s=n[a];e._cacheIndex=a,n[a]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new eF(new Float32Array(2),new Float32Array(2),1,IIe),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,a=--this._nActiveControlInterpolants,s=n[a];e.__cacheIndex=a,n[a]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const a=n||this._root,s=a.uuid;let o=typeof e=="string"?h1.findByName(a,e):e;const u=o!==null?o.uuid:e,l=this._actionsByClip[u];let f=null;if(r===void 0&&(o!==null?r=o.blendMode:r=bD),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===r)return p;f=l.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const c=new jee(this,o,n,r);return this._bindAction(c,f),this._addInactiveAction(c,u,s),c}existingAction(e,n){const r=n||this._root,a=r.uuid,s=typeof e=="string"?h1.findByName(r,e):e,o=s?s.uuid:e,u=this._actionsByClip[o];return u!==void 0&&u.actionByRoot[a]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,a=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==r;++f)n[f]._update(a,e,s,o);const u=this._bindings,l=this._nActiveBindings;for(let f=0;f!==l;++f)u[f].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,a=this._actionsByClip,s=a[r];if(s!==void 0){const o=s.knownActions;for(let u=0,l=o.length;u!==l;++u){const f=o[u];this._deactivateAction(f);const c=f._cacheIndex,p=n[n.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,p._cacheIndex=c,n[c]=p,n.pop(),this._removeInactiveBindingsForAction(f)}delete a[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const u=r[o].actionByRoot,l=u[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const a=this._bindingsByRootAndName,s=a[n];if(s!==void 0)for(const o in s){const u=s[o];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class lF{constructor(e){this.value=e}clone(){return new lF(this.value.clone===void 0?this.value:this.value.clone())}}let OIe=0;class LIe extends Lu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:OIe++}),this.name="",this.usage=a1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,a=n.length;r<a;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class kIe extends ND{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class UIe{constructor(e,n,r,a,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=a,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const XG=new Ht;class Xee{constructor(e,n,r=0,a=1/0){this.ray=new Ph(e,n),this.near=r,this.far=a,this.camera=null,this.layers=new qd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return XG.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(XG),this}intersectObject(e,n=!0,r=[]){return CL(e,this,r,n),r.sort(YG),r}intersectObjects(e,n=!0,r=[]){for(let a=0,s=e.length;a<s;a++)CL(e[a],this,r,n);return r.sort(YG),r}}function YG(t,e){return t.distance-e.distance}function CL(t,e,n,r){let a=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(a=!1),a===!0&&r===!0){const s=t.children;for(let o=0,u=s.length;o<u;o++)CL(s[o],e,n,!0)}}class DL{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(ti(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class FIe{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class cF{constructor(e,n,r,a){cF.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,a)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,a){const s=this.elements;return s[0]=e,s[2]=n,s[1]=r,s[3]=a,this}}const QG=new nt;class BIe{constructor(e=new nt(1/0,1/0),n=new nt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=QG.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,QG).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ZG=new ge,LS=new ge;class zIe{constructor(e=new ge,n=new ge){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){ZG.subVectors(e,this.start),LS.subVectors(this.end,this.start);const r=LS.dot(LS);let s=LS.dot(ZG)/r;return n&&(s=ti(s,0,1)),s}closestPointToPoint(e,n,r){const a=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(a).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const JG=new ge;class qIe extends Gn{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new fn,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,u=1,l=32;o<l;o++,u++){const f=o/l*Math.PI*2,c=u/l*Math.PI*2;a.push(Math.cos(f),Math.sin(f),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Rt(a,3));const s=new gs({fog:!1,toneMapped:!1});this.cone=new Cl(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),JG.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(JG),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ef=new ge,kS=new Ht,mP=new Ht;class GIe extends Cl{constructor(e){const n=Yee(e),r=new fn,a=[],s=[],o=new gt(0,0,1),u=new gt(0,1,0);for(let f=0;f<n.length;f++){const c=n[f];c.parent&&c.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(o.r,o.g,o.b),s.push(u.r,u.g,u.b))}r.setAttribute("position",new Rt(a,3)),r.setAttribute("color",new Rt(s,3));const l=new gs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,a=r.getAttribute("position");mP.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const u=n[s];u.parent&&u.parent.isBone&&(kS.multiplyMatrices(mP,u.matrixWorld),Ef.setFromMatrixPosition(kS),a.setXYZ(o,Ef.x,Ef.y,Ef.z),kS.multiplyMatrices(mP,u.parent.matrixWorld),Ef.setFromMatrixPosition(kS),a.setXYZ(o+1,Ef.x,Ef.y,Ef.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Yee(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Yee(t.children[n]));return e}class HIe extends Wr{constructor(e,n,r){const a=new Ex(n,4,2),s=new Jc({wireframe:!0,fog:!1,toneMapped:!1});super(a,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const VIe=new ge,KG=new gt,eH=new gt;class WIe extends Gn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const a=new Mx(n);a.rotateY(Math.PI*.5),this.material=new Jc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=a.getAttribute("position"),o=new Float32Array(s.count*3);a.setAttribute("color",new lr(o,3)),this.add(new Wr(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");KG.copy(this.light.color),eH.copy(this.light.groundColor);for(let r=0,a=n.count;r<a;r++){const s=r<a/2?KG:eH;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(VIe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class $Ie extends Cl{constructor(e=10,n=10,r=4473924,a=8947848){r=new gt(r),a=new gt(a);const s=n/2,o=e/n,u=e/2,l=[],f=[];for(let d=0,h=0,m=-u;d<=n;d++,m+=o){l.push(-u,0,m,u,0,m),l.push(m,0,-u,m,0,u);const v=d===s?r:a;v.toArray(f,h),h+=3,v.toArray(f,h),h+=3,v.toArray(f,h),h+=3,v.toArray(f,h),h+=3}const c=new fn;c.setAttribute("position",new Rt(l,3)),c.setAttribute("color",new Rt(f,3));const p=new gs({vertexColors:!0,toneMapped:!1});super(c,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class jIe extends Cl{constructor(e=10,n=16,r=8,a=64,s=4473924,o=8947848){s=new gt(s),o=new gt(o);const u=[],l=[];if(n>1)for(let p=0;p<n;p++){const d=p/n*(Math.PI*2),h=Math.sin(d)*e,m=Math.cos(d)*e;u.push(0,0,0),u.push(h,0,m);const v=p&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let p=0;p<r;p++){const d=p&1?s:o,h=e-e/r*p;for(let m=0;m<a;m++){let v=m/a*(Math.PI*2),g=Math.sin(v)*h,y=Math.cos(v)*h;u.push(g,0,y),l.push(d.r,d.g,d.b),v=(m+1)/a*(Math.PI*2),g=Math.sin(v)*h,y=Math.cos(v)*h,u.push(g,0,y),l.push(d.r,d.g,d.b)}}const f=new fn;f.setAttribute("position",new Rt(u,3)),f.setAttribute("color",new Rt(l,3));const c=new gs({vertexColors:!0,toneMapped:!1});super(f,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const tH=new ge,US=new ge,nH=new ge;class XIe extends Gn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let a=new fn;a.setAttribute("position",new Rt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new gs({fog:!1,toneMapped:!1});this.lightPlane=new pp(a,s),this.add(this.lightPlane),a=new fn,a.setAttribute("position",new Rt([0,0,0,0,0,1],3)),this.targetLine=new pp(a,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),tH.setFromMatrixPosition(this.light.matrixWorld),US.setFromMatrixPosition(this.light.target.matrixWorld),nH.subVectors(US,tH),this.lightPlane.lookAt(US),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(US),this.targetLine.scale.z=nH.length()}}const FS=new ge,Zr=new bx;class YIe extends Cl{constructor(e){const n=new fn,r=new gs({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],o={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(m,v){l(m),l(v)}function l(m){a.push(0,0,0),s.push(0,0,0),o[m]===void 0&&(o[m]=[]),o[m].push(a.length/3-1)}n.setAttribute("position",new Rt(a,3)),n.setAttribute("color",new Rt(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new gt(16755200),c=new gt(16711680),p=new gt(43775),d=new gt(16777215),h=new gt(3355443);this.setColors(f,c,p,d,h)}setColors(e,n,r,a,s){const u=this.geometry.getAttribute("color");u.setXYZ(0,e.r,e.g,e.b),u.setXYZ(1,e.r,e.g,e.b),u.setXYZ(2,e.r,e.g,e.b),u.setXYZ(3,e.r,e.g,e.b),u.setXYZ(4,e.r,e.g,e.b),u.setXYZ(5,e.r,e.g,e.b),u.setXYZ(6,e.r,e.g,e.b),u.setXYZ(7,e.r,e.g,e.b),u.setXYZ(8,e.r,e.g,e.b),u.setXYZ(9,e.r,e.g,e.b),u.setXYZ(10,e.r,e.g,e.b),u.setXYZ(11,e.r,e.g,e.b),u.setXYZ(12,e.r,e.g,e.b),u.setXYZ(13,e.r,e.g,e.b),u.setXYZ(14,e.r,e.g,e.b),u.setXYZ(15,e.r,e.g,e.b),u.setXYZ(16,e.r,e.g,e.b),u.setXYZ(17,e.r,e.g,e.b),u.setXYZ(18,e.r,e.g,e.b),u.setXYZ(19,e.r,e.g,e.b),u.setXYZ(20,e.r,e.g,e.b),u.setXYZ(21,e.r,e.g,e.b),u.setXYZ(22,e.r,e.g,e.b),u.setXYZ(23,e.r,e.g,e.b),u.setXYZ(24,n.r,n.g,n.b),u.setXYZ(25,n.r,n.g,n.b),u.setXYZ(26,n.r,n.g,n.b),u.setXYZ(27,n.r,n.g,n.b),u.setXYZ(28,n.r,n.g,n.b),u.setXYZ(29,n.r,n.g,n.b),u.setXYZ(30,n.r,n.g,n.b),u.setXYZ(31,n.r,n.g,n.b),u.setXYZ(32,r.r,r.g,r.b),u.setXYZ(33,r.r,r.g,r.b),u.setXYZ(34,r.r,r.g,r.b),u.setXYZ(35,r.r,r.g,r.b),u.setXYZ(36,r.r,r.g,r.b),u.setXYZ(37,r.r,r.g,r.b),u.setXYZ(38,a.r,a.g,a.b),u.setXYZ(39,a.r,a.g,a.b),u.setXYZ(40,s.r,s.g,s.b),u.setXYZ(41,s.r,s.g,s.b),u.setXYZ(42,s.r,s.g,s.b),u.setXYZ(43,s.r,s.g,s.b),u.setXYZ(44,s.r,s.g,s.b),u.setXYZ(45,s.r,s.g,s.b),u.setXYZ(46,s.r,s.g,s.b),u.setXYZ(47,s.r,s.g,s.b),u.setXYZ(48,s.r,s.g,s.b),u.setXYZ(49,s.r,s.g,s.b),u.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,a=1;Zr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),li("c",n,e,Zr,0,0,-1),li("t",n,e,Zr,0,0,1),li("n1",n,e,Zr,-r,-a,-1),li("n2",n,e,Zr,r,-a,-1),li("n3",n,e,Zr,-r,a,-1),li("n4",n,e,Zr,r,a,-1),li("f1",n,e,Zr,-r,-a,1),li("f2",n,e,Zr,r,-a,1),li("f3",n,e,Zr,-r,a,1),li("f4",n,e,Zr,r,a,1),li("u1",n,e,Zr,r*.7,a*1.1,-1),li("u2",n,e,Zr,-r*.7,a*1.1,-1),li("u3",n,e,Zr,0,a*2,-1),li("cf1",n,e,Zr,-r,0,1),li("cf2",n,e,Zr,r,0,1),li("cf3",n,e,Zr,0,-a,1),li("cf4",n,e,Zr,0,a,1),li("cn1",n,e,Zr,-r,0,-1),li("cn2",n,e,Zr,r,0,-1),li("cn3",n,e,Zr,0,-a,-1),li("cn4",n,e,Zr,0,a,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function li(t,e,n,r,a,s,o){FS.set(a,s,o).unproject(r);const u=e[t];if(u!==void 0){const l=n.getAttribute("position");for(let f=0,c=u.length;f<c;f++)l.setXYZ(u[f],FS.x,FS.y,FS.z)}}const BS=new La;class QIe extends Cl{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(8*3),s=new fn;s.setIndex(new lr(r,1)),s.setAttribute("position",new lr(a,3)),super(s,new gs({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&BS.setFromObject(this.object),BS.isEmpty())return;const n=BS.min,r=BS.max,a=this.geometry.attributes.position,s=a.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,a.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ZIe extends Cl{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new fn;s.setIndex(new lr(r,1)),s.setAttribute("position",new Rt(a,3)),super(s,new gs({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class JIe extends pp{constructor(e,n=1,r=16776960){const a=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new fn;o.setAttribute("position",new Rt(s,3)),o.computeBoundingSphere(),super(o,new gs({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new fn;l.setAttribute("position",new Rt(u,3)),l.computeBoundingSphere(),this.add(new Wr(l,new Jc({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const rH=new ge;let zS,vP;class KIe extends Gn{constructor(e=new ge(0,0,1),n=new ge(0,0,0),r=1,a=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",zS===void 0&&(zS=new fn,zS.setAttribute("position",new Rt([0,0,0,0,1,0],3)),vP=new xv(0,.5,1,5,1),vP.translate(0,-.5,0)),this.position.copy(n),this.line=new pp(zS,new gs({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Wr(vP,new Jc({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{rH.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(rH,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ePe extends Cl{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new fn;a.setAttribute("position",new Rt(n,3)),a.setAttribute("color",new Rt(r,3));const s=new gs({vertexColors:!0,toneMapped:!1});super(a,s),this.type="AxesHelper"}setColors(e,n,r){const a=new gt,s=this.geometry.attributes.color.array;return a.set(e),a.toArray(s,0),a.toArray(s,3),a.set(n),a.toArray(s,6),a.toArray(s,9),a.set(r),a.toArray(s,12),a.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tPe{constructor(){this.type="ShapePath",this.color=new gt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new u1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,a){return this.currentPath.quadraticCurveTo(e,n,r,a),this}bezierCurveTo(e,n,r,a,s,o){return this.currentPath.bezierCurveTo(e,n,r,a,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(y){const _=[];for(let x=0,M=y.length;x<M;x++){const A=y[x],E=new Gd;E.curves=A.curves,_.push(E)}return _}function r(y,_){const x=_.length;let M=!1;for(let A=x-1,E=0;E<x;A=E++){let N=_[A],D=_[E],C=D.x-N.x,T=D.y-N.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(N=_[E],C=-C,D=_[A],T=-T),y.y<N.y||y.y>D.y)continue;if(y.y===N.y){if(y.x===N.x)return!0}else{const P=T*(y.x-N.x)-C*(y.y-N.y);if(P===0)return!0;if(P<0)continue;M=!M}}else{if(y.y!==N.y)continue;if(D.x<=y.x&&y.x<=N.x||N.x<=y.x&&y.x<=D.x)return!0}}return M}const a=ll.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,u,l;const f=[];if(s.length===1)return u=s[0],l=new Gd,l.curves=u.curves,f.push(l),f;let c=!a(s[0].getPoints());c=e?!c:c;const p=[],d=[];let h=[],m=0,v;d[m]=void 0,h[m]=[];for(let y=0,_=s.length;y<_;y++)u=s[y],v=u.getPoints(),o=a(v),o=e?!o:o,o?(!c&&d[m]&&m++,d[m]={s:new Gd,p:v},d[m].s.curves=u.curves,c&&m++,h[m]=[]):h[m].push({h:u,p:v[0]});if(!d[0])return n(s);if(d.length>1){let y=!1,_=0;for(let x=0,M=d.length;x<M;x++)p[x]=[];for(let x=0,M=d.length;x<M;x++){const A=h[x];for(let E=0;E<A.length;E++){const N=A[E];let D=!0;for(let C=0;C<d.length;C++)r(N.p,d[C].p)&&(x!==C&&_++,D?(D=!1,p[C].push(N)):y=!0);D&&p[x].push(N)}}_>0&&y===!1&&(h=p)}let g;for(let y=0,_=d.length;y<_;y++){l=d[y].s,f.push(l),g=h[y];for(let x=0,M=g.length;x<M;x++)l.holes.push(g[x].h)}return f}}class nPe extends Lu{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class rPe extends Eu{constructor(e=1,n=1,r=1,a={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...a,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:fD}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=fD);const iPe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:w4,AddEquation:Of,AddOperation:SK,AdditiveAnimationBlendMode:P4,AdditiveBlending:mL,AgXToneMapping:TK,AlphaFormat:A4,AlwaysCompare:zK,AlwaysDepth:Uw,AlwaysStencilFunc:xL,AmbientLight:zee,AnimationAction:jee,AnimationClip:h1,AnimationLoader:iIe,AnimationMixer:PIe,AnimationObjectGroup:RIe,AnimationUtils:eIe,ArcCurve:fee,ArrayCamera:tee,ArrowHelper:KIe,AttachedBindMode:yL,Audio:Wee,AudioAnalyser:SIe,AudioContext:aF,AudioListener:yIe,AudioLoader:mIe,AxesHelper:ePe,BackSide:Pa,BasicDepthPacking:IK,BasicShadowMap:tK,BatchedMesh:uee,Bone:V4,BooleanKeyframeTrack:Lh,Box2:BIe,Box3:La,Box3Helper:ZIe,BoxGeometry:Oh,BoxHelper:QIe,BufferAttribute:lr,BufferGeometry:fn,BufferGeometryLoader:Vee,ByteType:M4,Cache:lc,Camera:bx,CameraHelper:YIe,CanvasTexture:MRe,CapsuleGeometry:ID,CatmullRomCurve3:pee,CineonToneMapping:MK,CircleGeometry:PD,ClampToEdgeWrapping:Bo,Clock:sF,Color:gt,ColorKeyframeTrack:tF,ColorManagement:jn,CompressedArrayTexture:wRe,CompressedCubeTexture:_Re,CompressedTexture:DD,CompressedTextureLoader:aIe,ConeGeometry:OD,ConstantAlphaFactor:yK,ConstantColorFactor:vK,Controls:nPe,CubeCamera:jK,CubeReflectionMapping:Rc,CubeRefractionMapping:fp,CubeTexture:Sx,CubeTextureLoader:sIe,CubeUVReflectionMapping:vv,CubicBezierCurve:j4,CubicBezierCurve3:dee,CubicInterpolant:Iee,CullFaceBack:hL,CullFaceFront:eK,CullFaceFrontBack:QEe,CullFaceNone:KJ,Curve:ku,CurvePath:mee,CustomBlending:nK,CustomToneMapping:EK,CylinderGeometry:xv,Cylindrical:FIe,Data3DTexture:U4,DataArrayTexture:wD,DataTexture:ul,DataTextureLoader:oIe,DataUtils:fAe,DecrementStencilOp:cTe,DecrementWrapStencilOp:pTe,DefaultLoadingManager:Lee,DepthFormat:Bd,DepthStencilFormat:uh,DepthTexture:G4,DetachedBindMode:NK,DirectionalLight:Bee,DirectionalLightHelper:XIe,DiscreteInterpolant:Pee,DisplayP3ColorSpace:SD,DodecahedronGeometry:LD,DoubleSide:ko,DstAlphaFactor:fK,DstColorFactor:dK,DynamicCopyUsage:ATe,DynamicDrawUsage:STe,DynamicReadUsage:MTe,EdgesGeometry:vee,EllipseCurve:RD,EqualCompare:kK,EqualDepth:Bw,EqualStencilFunc:vTe,EquirectangularReflectionMapping:Qy,EquirectangularRefractionMapping:Zy,Euler:uo,EventDispatcher:Lu,ExtrudeGeometry:UD,FileLoader:Pc,Float16BufferAttribute:gAe,Float32BufferAttribute:Rt,FloatType:As,Fog:AD,FogExp2:TD,FramebufferTexture:SRe,FrontSide:Sl,Frustum:wx,GLBufferAttribute:UIe,GLSL1:CTe,GLSL3:bL,GreaterCompare:UK,GreaterDepth:qw,GreaterEqualCompare:BK,GreaterEqualDepth:zw,GreaterEqualStencilFunc:bTe,GreaterStencilFunc:yTe,GridHelper:$Ie,Group:em,HalfFloatType:gv,HemisphereLight:kee,HemisphereLightHelper:WIe,IcosahedronGeometry:FD,ImageBitmapLoader:hIe,ImageLoader:m1,ImageUtils:HK,IncrementStencilOp:lTe,IncrementWrapStencilOp:fTe,InstancedBufferAttribute:ch,InstancedBufferGeometry:iF,InstancedInterleavedBuffer:kIe,InstancedMesh:oee,Int16BufferAttribute:mAe,Int32BufferAttribute:vAe,Int8BufferAttribute:pAe,IntType:hD,InterleavedBuffer:ND,InterleavedBufferAttribute:lh,Interpolant:Tx,InterpolateDiscrete:e1,InterpolateLinear:m_,InterpolateSmooth:x2,InvertStencilOp:dTe,KeepStencilOp:xd,KeyframeTrack:Uu,LOD:aee,LatheGeometry:_x,Layers:qd,LessCompare:LK,LessDepth:Fw,LessEqualCompare:L4,LessEqualDepth:sh,LessEqualStencilFunc:gTe,LessStencilFunc:mTe,Light:Fp,LightProbe:Hee,Line:pp,Line3:zIe,LineBasicMaterial:gs,LineCurve:X4,LineCurve3:hee,LineDashedMaterial:Cee,LineLoop:lee,LineSegments:Cl,LinearDisplayP3ColorSpace:xx,LinearFilter:ni,LinearInterpolant:eF,LinearMipMapLinearFilter:eTe,LinearMipMapNearestFilter:KEe,LinearMipmapLinearFilter:tl,LinearMipmapNearestFilter:ty,LinearSRGBColorSpace:Zc,LinearToneMapping:wK,LinearTransfer:n1,Loader:ks,LoaderUtils:NL,LoadingManager:nF,LoopOnce:CK,LoopPingPong:RK,LoopRepeat:DK,LuminanceAlphaFormat:D4,LuminanceFormat:C4,MOUSE:gd,Material:va,MaterialLoader:WD,MathUtils:$Te,Matrix2:cF,Matrix3:un,Matrix4:Ht,MaxEquation:sK,Mesh:Wr,MeshBasicMaterial:Jc,MeshDepthMaterial:MD,MeshDistanceMaterial:ED,MeshLambertMaterial:Aee,MeshMatcapMaterial:Nee,MeshNormalMaterial:Tee,MeshPhongMaterial:Mee,MeshPhysicalMaterial:_ee,MeshStandardMaterial:J4,MeshToonMaterial:Eee,MinEquation:aK,MirroredRepeatWrapping:Ky,MixOperation:bK,MultiplyBlending:gL,MultiplyOperation:gx,NearestFilter:Vi,NearestMipMapLinearFilter:JEe,NearestMipMapNearestFilter:ZEe,NearestMipmapLinearFilter:Z0,NearestMipmapNearestFilter:_4,NeutralToneMapping:AK,NeverCompare:OK,NeverDepth:kw,NeverStencilFunc:hTe,NoBlending:fc,NoColorSpace:nc,NoToneMapping:ol,NormalAnimationBlendMode:bD,NormalBlending:Fd,NotEqualCompare:FK,NotEqualDepth:Gw,NotEqualStencilFunc:xTe,NumberKeyframeTrack:p1,Object3D:Gn,ObjectLoader:pIe,ObjectSpaceNormalMap:PK,OctahedronGeometry:Mx,OneFactor:uK,OneMinusConstantAlphaFactor:xK,OneMinusConstantColorFactor:gK,OneMinusDstAlphaFactor:pK,OneMinusDstColorFactor:hK,OneMinusSrcAlphaFactor:Lw,OneMinusSrcColorFactor:cK,OrthographicCamera:Qf,P3Primaries:i1,PCFShadowMap:pD,PCFSoftShadowMap:ey,PMREMGenerator:SL,Path:u1,PerspectiveCamera:fi,Plane:ec,PlaneGeometry:Kc,PlaneHelper:JIe,PointLight:Fee,PointLightHelper:HIe,Points:cee,PointsMaterial:W4,PolarGridHelper:jIe,PolyhedronGeometry:Up,PositionalAudio:bIe,PropertyBinding:Bn,PropertyMixer:$ee,QuadraticBezierCurve:Y4,QuadraticBezierCurve3:Q4,Quaternion:Oa,QuaternionKeyframeTrack:Ax,QuaternionLinearInterpolant:Oee,RED_GREEN_RGTC2_Format:d_,RED_RGTC1_Format:I4,REVISION:fD,RGBADepthPacking:O4,RGBAFormat:Ra,RGBAIntegerFormat:xD,RGBA_ASTC_10x10_Format:o_,RGBA_ASTC_10x5_Format:i_,RGBA_ASTC_10x6_Format:a_,RGBA_ASTC_10x8_Format:s_,RGBA_ASTC_12x10_Format:u_,RGBA_ASTC_12x12_Format:l_,RGBA_ASTC_4x4_Format:Qw,RGBA_ASTC_5x4_Format:Zw,RGBA_ASTC_5x5_Format:Jw,RGBA_ASTC_6x5_Format:Kw,RGBA_ASTC_6x6_Format:e_,RGBA_ASTC_8x5_Format:t_,RGBA_ASTC_8x6_Format:n_,RGBA_ASTC_8x8_Format:r_,RGBA_BPTC_Format:sy,RGBA_ETC2_EAC_Format:Yw,RGBA_PVRTC_2BPPV1_Format:$w,RGBA_PVRTC_4BPPV1_Format:Ww,RGBA_S3TC_DXT1_Format:ry,RGBA_S3TC_DXT3_Format:iy,RGBA_S3TC_DXT5_Format:ay,RGBDepthPacking:aTe,RGBFormat:N4,RGBIntegerFormat:tTe,RGB_BPTC_SIGNED_Format:c_,RGB_BPTC_UNSIGNED_Format:f_,RGB_ETC1_Format:jw,RGB_ETC2_Format:Xw,RGB_PVRTC_2BPPV1_Format:Vw,RGB_PVRTC_4BPPV1_Format:Hw,RGB_S3TC_DXT1_Format:ny,RGDepthPacking:sTe,RGFormat:R4,RGIntegerFormat:yD,RawShaderMaterial:wee,Ray:Ph,Raycaster:Xee,Rec709Primaries:r1,RectAreaLight:qee,RedFormat:gD,RedIntegerFormat:yx,ReinhardToneMapping:_K,RenderTarget:VK,RepeatWrapping:Jy,ReplaceStencilOp:uTe,ReverseSubtractEquation:iK,RingGeometry:BD,SIGNED_RED_GREEN_RGTC2_Format:h_,SIGNED_RED_RGTC1_Format:p_,SRGBColorSpace:Ro,SRGBTransfer:wr,Scene:v_,ShaderChunk:ln,ShaderLib:du,ShaderMaterial:Tu,ShadowMaterial:See,Shape:Gd,ShapeGeometry:zD,ShapePath:tPe,ShapeUtils:ll,ShortType:E4,Skeleton:CD,SkeletonHelper:GIe,SkinnedMesh:see,Source:Cd,Sphere:fa,SphereGeometry:Ex,Spherical:DL,SphericalHarmonics3:Gee,SplineCurve:Z4,SpotLight:Uee,SpotLightHelper:qIe,Sprite:iee,SpriteMaterial:H4,SrcAlphaFactor:Ow,SrcAlphaSaturateFactor:mK,SrcColorFactor:lK,StaticCopyUsage:TTe,StaticDrawUsage:a1,StaticReadUsage:_Te,StereoCamera:vIe,StreamCopyUsage:NTe,StreamDrawUsage:wTe,StreamReadUsage:ETe,StringKeyframeTrack:kh,SubtractEquation:rK,SubtractiveBlending:vL,TOUCH:yd,TangentSpaceNormalMap:kp,TetrahedronGeometry:qD,Texture:Ur,TextureLoader:uIe,TextureUtils:eRe,TorusGeometry:GD,TorusKnotGeometry:HD,Triangle:Es,TriangleFanDrawMode:iTe,TriangleStripDrawMode:rTe,TrianglesDrawMode:nTe,TubeGeometry:VD,UVMapping:dD,Uint16BufferAttribute:F4,Uint32BufferAttribute:B4,Uint8BufferAttribute:dAe,Uint8ClampedBufferAttribute:hAe,Uniform:lF,UniformsGroup:LIe,UniformsLib:dt,UniformsUtils:z4,UnsignedByteType:Mu,UnsignedInt248Type:oh,UnsignedInt5999Type:T4,UnsignedIntType:Ic,UnsignedShort4444Type:mD,UnsignedShort5551Type:vD,UnsignedShortType:zm,VSMShadowMap:cu,Vector2:nt,Vector3:ge,Vector4:On,VectorKeyframeTrack:d1,VideoTexture:bRe,WebGL3DRenderTarget:tAe,WebGLArrayRenderTarget:eAe,WebGLCoordinateSystem:nl,WebGLCubeRenderTarget:XK,WebGLMultipleRenderTargets:rPe,WebGLRenderTarget:Eu,WebGLRenderer:nee,WebGLUtils:eee,WebGPUCoordinateSystem:s1,WireframeGeometry:bee,WrapAroundEnding:t1,ZeroCurvatureEnding:Ad,ZeroFactor:oK,ZeroSlopeEnding:Nd,ZeroStencilOp:oTe,createCanvasElement:GK},Symbol.toStringTag,{value:"Module"}));var Qee={exports:{}},Uh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Uh.ConcurrentRoot=1;Uh.ContinuousEventPriority=4;Uh.DefaultEventPriority=16;Uh.DiscreteEventPriority=1;Uh.IdleEventPriority=536870912;Uh.LegacyRoot=0;Qee.exports=Uh;var nm=Qee.exports;function aPe(t){let e;const n=new Set,r=(f,c)=>{const p=typeof f=="function"?f(e):f;if(p!==e){const d=e;e=c?p:Object.assign({},e,p),n.forEach(h=>h(e,d))}},a=()=>e,s=(f,c=a,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function h(){const m=c(e);if(!p(d,m)){const v=d;f(d=m,v)}}return n.add(h),()=>n.delete(h)},l={setState:r,getState:a,subscribe:(f,c,p)=>c||p?s(f,c,p):(n.add(f),()=>n.delete(f)),destroy:()=>n.clear()};return e=t(r,a,l),l}const sPe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),iH=sPe?Ge.useEffect:Ge.useLayoutEffect;function oPe(t){const e=typeof t=="function"?aPe(t):t,n=(r=e.getState,a=Object.is)=>{const[,s]=Ge.useReducer(g=>g+1,0),o=e.getState(),u=Ge.useRef(o),l=Ge.useRef(r),f=Ge.useRef(a),c=Ge.useRef(!1),p=Ge.useRef();p.current===void 0&&(p.current=r(o));let d,h=!1;(u.current!==o||l.current!==r||f.current!==a||c.current)&&(d=r(o),h=!a(p.current,d)),iH(()=>{h&&(p.current=d),u.current=o,l.current=r,f.current=a,c.current=!1});const m=Ge.useRef(o);iH(()=>{const g=()=>{try{const _=e.getState(),x=l.current(_);f.current(p.current,x)||(u.current=_,p.current=x,s())}catch{c.current=!0,s()}},y=e.subscribe(g);return e.getState()!==m.current&&g(),y},[]);const v=h?d:p.current;return Ge.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const a=r.length<=0;return{value:r.shift(),done:a}}}},n}const uPe=t=>typeof t=="object"&&typeof t.then=="function",qS=[];function lPe(t,e,n=(r,a)=>r===a){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let a=0;a<r;a++)if(!n(t[a],e[a]))return!1;return!0}function cPe(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const s of qS)if(lPe(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const a={keys:e,equal:r.equal,remove:()=>{const s=qS.indexOf(a);s!==-1&&qS.splice(s,1)},promise:(uPe(t)?t:t(...e)).then(s=>{a.response=s,r.lifespan&&r.lifespan>0&&(a.timeout=setTimeout(a.remove,r.lifespan))}).catch(s=>a.error=s)};if(qS.push(a),!n)throw a.promise}const fPe=(t,e,n)=>cPe(t,e,!1,n);var Zee={exports:{}},gP={exports:{}},yP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aH;function pPe(){return aH||(aH=1,function(t){function e(k,O){var W=k.length;k.push(O);e:for(;0<W;){var X=W-1>>>1,ee=k[X];if(0<a(ee,O))k[X]=O,k[W]=ee,W=X;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var O=k[0],W=k.pop();if(W!==O){k[0]=W;e:for(var X=0,ee=k.length,J=ee>>>1;X<J;){var Y=2*(X+1)-1,ie=k[Y],K=Y+1,re=k[K];if(0>a(ie,W))K<ee&&0>a(re,ie)?(k[X]=re,k[K]=W,X=K):(k[X]=ie,k[Y]=W,X=Y);else if(K<ee&&0>a(re,W))k[X]=re,k[K]=W,X=K;else break e}}return O}function a(k,O){var W=k.sortIndex-O.sortIndex;return W!==0?W:k.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var l=[],f=[],c=1,p=null,d=3,h=!1,m=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(k){for(var O=n(f);O!==null;){if(O.callback===null)r(f);else if(O.startTime<=k)r(f),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(f)}}function M(k){if(v=!1,x(k),!m)if(n(l)!==null)m=!0,G(A);else{var O=n(f);O!==null&&F(M,O.startTime-k)}}function A(k,O){m=!1,v&&(v=!1,y(D),D=-1),h=!0;var W=d;try{for(x(O),p=n(l);p!==null&&(!(p.expirationTime>O)||k&&!P());){var X=p.callback;if(typeof X=="function"){p.callback=null,d=p.priorityLevel;var ee=X(p.expirationTime<=O);O=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(l)&&r(l),x(O)}else r(l);p=n(l)}if(p!==null)var J=!0;else{var Y=n(f);Y!==null&&F(M,Y.startTime-O),J=!1}return J}finally{p=null,d=W,h=!1}}var E=!1,N=null,D=-1,C=5,T=-1;function P(){return!(t.unstable_now()-T<C)}function I(){if(N!==null){var k=t.unstable_now();T=k;var O=!0;try{O=N(!0,k)}finally{O?U():(E=!1,N=null)}}else E=!1}var U;if(typeof _=="function")U=function(){_(I)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,z=q.port2;q.port1.onmessage=I,U=function(){z.postMessage(null)}}else U=function(){g(I,0)};function G(k){N=k,E||(E=!0,U())}function F(k,O){D=g(function(){k(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,G(A))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(k){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var W=d;d=O;try{return k()}finally{d=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,O){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var W=d;d=k;try{return O()}finally{d=W}},t.unstable_scheduleCallback=function(k,O,W){var X=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?X+W:X):W=X,k){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=W+ee,k={id:c++,callback:O,priorityLevel:k,startTime:W,expirationTime:ee,sortIndex:-1},W>X?(k.sortIndex=W,e(f,k),n(l)===null&&k===n(f)&&(v?(y(D),D=-1):v=!0,F(M,W-X))):(k.sortIndex=ee,e(l,k),m||h||(m=!0,G(A))),k},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(k){var O=d;return function(){var W=d;d=O;try{return k.apply(this,arguments)}finally{d=W}}}}(yP)),yP}var sH;function dPe(){return sH||(sH=1,gP.exports=pPe()),gP.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hPe=function(e){var n={},r=Ge,a=dPe(),s=Object.assign;function o(b){for(var S="https://reactjs.org/docs/error-decoder.html?invariant="+b,R=1;R<arguments.length;R++)S+="&args[]="+encodeURIComponent(arguments[R]);return"Minified React error #"+b+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),f=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),A=Symbol.iterator;function E(b){return b===null||typeof b!="object"?null:(b=A&&b[A]||b["@@iterator"],typeof b=="function"?b:null)}function N(b){if(b==null)return null;if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case c:return"Fragment";case f:return"Portal";case d:return"Profiler";case p:return"StrictMode";case g:return"Suspense";case y:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case m:return(b.displayName||"Context")+".Consumer";case h:return(b._context.displayName||"Context")+".Provider";case v:var S=b.render;return b=b.displayName,b||(b=S.displayName||S.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case _:return S=b.displayName||null,S!==null?S:N(b.type)||"Memo";case x:S=b._payload,b=b._init;try{return N(b(S))}catch{}}return null}function D(b){var S=b.type;switch(b.tag){case 24:return"Cache";case 9:return(S.displayName||"Context")+".Consumer";case 10:return(S._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return b=S.render,b=b.displayName||b.name||"",S.displayName||(b!==""?"ForwardRef("+b+")":"ForwardRef");case 7:return"Fragment";case 5:return S;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(S);case 8:return S===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S}return null}function C(b){var S=b,R=b;if(b.alternate)for(;S.return;)S=S.return;else{b=S;do S=b,S.flags&4098&&(R=S.return),b=S.return;while(b)}return S.tag===3?R:null}function T(b){if(C(b)!==b)throw Error(o(188))}function P(b){var S=b.alternate;if(!S){if(S=C(b),S===null)throw Error(o(188));return S!==b?null:b}for(var R=b,L=S;;){var H=R.return;if(H===null)break;var Z=H.alternate;if(Z===null){if(L=H.return,L!==null){R=L;continue}break}if(H.child===Z.child){for(Z=H.child;Z;){if(Z===R)return T(H),b;if(Z===L)return T(H),S;Z=Z.sibling}throw Error(o(188))}if(R.return!==L.return)R=H,L=Z;else{for(var Me=!1,Ue=H.child;Ue;){if(Ue===R){Me=!0,R=H,L=Z;break}if(Ue===L){Me=!0,L=H,R=Z;break}Ue=Ue.sibling}if(!Me){for(Ue=Z.child;Ue;){if(Ue===R){Me=!0,R=Z,L=H;break}if(Ue===L){Me=!0,L=Z,R=H;break}Ue=Ue.sibling}if(!Me)throw Error(o(189))}}if(R.alternate!==L)throw Error(o(190))}if(R.tag!==3)throw Error(o(188));return R.stateNode.current===R?b:S}function I(b){return b=P(b),b!==null?U(b):null}function U(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){var S=U(b);if(S!==null)return S;b=b.sibling}return null}function q(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){if(b.tag!==4){var S=q(b);if(S!==null)return S}b=b.sibling}return null}var z=Array.isArray,G=e.getPublicInstance,F=e.getRootHostContext,k=e.getChildHostContext,O=e.prepareForCommit,W=e.resetAfterCommit,X=e.createInstance,ee=e.appendInitialChild,J=e.finalizeInitialChildren,Y=e.prepareUpdate,ie=e.shouldSetTextContent,K=e.createTextInstance,re=e.scheduleTimeout,oe=e.cancelTimeout,ce=e.noTimeout,me=e.isPrimaryRenderer,Se=e.supportsMutation,le=e.supportsPersistence,Q=e.supportsHydration,Ee=e.getInstanceFromNode,ne=e.preparePortalMount,se=e.getCurrentEventPriority,xe=e.detachDeletedInstance,ve=e.supportsMicrotasks,te=e.scheduleMicrotask,$=e.supportsTestSelectors,B=e.findFiberRoot,ae=e.getBoundingRect,ue=e.getTextContent,_e=e.isHiddenSubtree,be=e.matchAccessibilityRole,Pe=e.setFocusIfFocusable,Te=e.setupIntersectionObserver,Ie=e.appendChild,Oe=e.appendChildToContainer,Be=e.commitTextUpdate,He=e.commitMount,Qe=e.commitUpdate,et=e.insertBefore,Xe=e.insertInContainerBefore,je=e.removeChild,we=e.removeChildFromContainer,V=e.resetTextContent,j=e.hideInstance,pe=e.hideTextInstance,he=e.unhideInstance,Ae=e.unhideTextInstance,Fe=e.clearContainer,qe=e.cloneInstance,Ze=e.createContainerChildSet,it=e.appendChildToContainerChildSet,ot=e.finalizeContainerChildren,tt=e.replaceContainerChildren,Nt=e.cloneHiddenInstance,Xt=e.cloneHiddenTextInstance,Ln=e.canHydrateInstance,Hn=e.canHydrateTextInstance,br=e.canHydrateSuspenseInstance,Un=e.isSuspenseInstancePending,Rr=e.isSuspenseInstanceFallback,ar=e.registerSuspenseInstanceRetry,Xr=e.getNextHydratableSibling,Fn=e.getFirstHydratableChild,sr=e.getFirstHydratableChildWithinContainer,Ir=e.getFirstHydratableChildWithinSuspenseInstance,Sn=e.hydrateInstance,er=e.hydrateTextInstance,Pr=e.hydrateSuspenseInstance,Ha=e.getNextHydratableInstanceAfterSuspenseInstance,de=e.commitHydratedContainer,Le=e.commitHydratedSuspenseInstance,Ve=e.clearSuspenseBoundary,$e=e.clearSuspenseBoundaryFromContainer,ke=e.shouldDeleteUnhydratedTailInstances,ft=e.didNotMatchHydratedContainerTextInstance,ht=e.didNotMatchHydratedTextInstance,rt;function bt(b){if(rt===void 0)try{throw Error()}catch(R){var S=R.stack.trim().match(/\n( *(at )?)/);rt=S&&S[1]||""}return`
`+rt+b}var zt=!1;function Lt(b,S){if(!b||zt)return"";zt=!0;var R=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(S)if(S=function(){throw Error()},Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch(pt){var L=pt}Reflect.construct(b,[],S)}else{try{S.call()}catch(pt){L=pt}b.call(S.prototype)}else{try{throw Error()}catch(pt){L=pt}b()}}catch(pt){if(pt&&L&&typeof pt.stack=="string"){for(var H=pt.stack.split(`
`),Z=L.stack.split(`
`),Me=H.length-1,Ue=Z.length-1;1<=Me&&0<=Ue&&H[Me]!==Z[Ue];)Ue--;for(;1<=Me&&0<=Ue;Me--,Ue--)if(H[Me]!==Z[Ue]){if(Me!==1||Ue!==1)do if(Me--,Ue--,0>Ue||H[Me]!==Z[Ue]){var Je=`
`+H[Me].replace(" at new "," at ");return b.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",b.displayName)),Je}while(1<=Me&&0<=Ue);break}}}finally{zt=!1,Error.prepareStackTrace=R}return(b=b?b.displayName||b.name:"")?bt(b):""}var Ct=Object.prototype.hasOwnProperty,Tn=[],An=-1;function Nn(b){return{current:b}}function an(b){0>An||(b.current=Tn[An],Tn[An]=null,An--)}function It(b,S){An++,Tn[An]=b.current,b.current=S}var _t={},wn=Nn(_t),Yt=Nn(!1),Yr=_t;function Ai(b,S){var R=b.type.contextTypes;if(!R)return _t;var L=b.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===S)return L.__reactInternalMemoizedMaskedChildContext;var H={},Z;for(Z in R)H[Z]=S[Z];return L&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=S,b.__reactInternalMemoizedMaskedChildContext=H),H}function Vn(b){return b=b.childContextTypes,b!=null}function Va(){an(Yt),an(wn)}function or(b,S,R){if(wn.current!==_t)throw Error(o(168));It(wn,S),It(Yt,R)}function Wa(b,S,R){var L=b.stateNode;if(S=S.childContextTypes,typeof L.getChildContext!="function")return R;L=L.getChildContext();for(var H in L)if(!(H in S))throw Error(o(108,D(b)||"Unknown",H));return s({},R,L)}function bo(b){return b=(b=b.stateNode)&&b.__reactInternalMemoizedMergedChildContext||_t,Yr=wn.current,It(wn,b),It(Yt,Yt.current),!0}function Sr(b,S,R){var L=b.stateNode;if(!L)throw Error(o(169));R?(b=Wa(b,S,Yr),L.__reactInternalMemoizedMergedChildContext=b,an(Yt),an(wn),It(wn,b)):an(Yt),It(Yt,R)}var ea=Math.clz32?Math.clz32:Cx,ef=Math.log,Fu=Math.LN2;function Cx(b){return b>>>=0,b===0?32:31-(ef(b)/Fu|0)|0}var Dl=64,Rl=4194304;function Il(b){switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return b&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return b}}function Bp(b,S){var R=b.pendingLanes;if(R===0)return 0;var L=0,H=b.suspendedLanes,Z=b.pingedLanes,Me=R&268435455;if(Me!==0){var Ue=Me&~H;Ue!==0?L=Il(Ue):(Z&=Me,Z!==0&&(L=Il(Z)))}else Me=R&~H,Me!==0?L=Il(Me):Z!==0&&(L=Il(Z));if(L===0)return 0;if(S!==0&&S!==L&&!(S&H)&&(H=L&-L,Z=S&-S,H>=Z||H===16&&(Z&4194240)!==0))return S;if(L&4&&(L|=R&16),S=b.entangledLanes,S!==0)for(b=b.entanglements,S&=L;0<S;)R=31-ea(S),H=1<<R,L|=b[R],S&=~H;return L}function Dx(b,S){switch(b){case 1:case 2:case 4:return S+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sv(b,S){for(var R=b.suspendedLanes,L=b.pingedLanes,H=b.expirationTimes,Z=b.pendingLanes;0<Z;){var Me=31-ea(Z),Ue=1<<Me,Je=H[Me];Je===-1?(!(Ue&R)||Ue&L)&&(H[Me]=Dx(Ue,S)):Je<=S&&(b.expiredLanes|=Ue),Z&=~Ue}}function Pl(b){return b=b.pendingLanes&-1073741825,b!==0?b:b&1073741824?1073741824:0}function Fh(b){for(var S=[],R=0;31>R;R++)S.push(b);return S}function Bu(b,S,R){b.pendingLanes|=S,S!==536870912&&(b.suspendedLanes=0,b.pingedLanes=0),b=b.eventTimes,S=31-ea(S),b[S]=R}function tf(b,S){var R=b.pendingLanes&~S;b.pendingLanes=S,b.suspendedLanes=0,b.pingedLanes=0,b.expiredLanes&=S,b.mutableReadLanes&=S,b.entangledLanes&=S,S=b.entanglements;var L=b.eventTimes;for(b=b.expirationTimes;0<R;){var H=31-ea(R),Z=1<<H;S[H]=0,L[H]=-1,b[H]=-1,R&=~Z}}function zu(b,S){var R=b.entangledLanes|=S;for(b=b.entanglements;R;){var L=31-ea(R),H=1<<L;H&S|b[L]&S&&(b[L]|=S),R&=~H}}var xn=0;function wv(b){return b&=-b,1<b?4<b?b&268435455?16:536870912:4:1}var Ol=a.unstable_scheduleCallback,Bh=a.unstable_cancelCallback,_v=a.unstable_shouldYield,Rx=a.unstable_requestPaint,zr=a.unstable_now,zp=a.unstable_ImmediatePriority,Ix=a.unstable_UserBlockingPriority,$a=a.unstable_NormalPriority,Mv=a.unstable_IdlePriority,qp=null,Us=null;function Ev(b){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(qp,b,void 0,(b.current.flags&128)===128)}catch{}}function Px(b,S){return b===S&&(b!==0||1/b===1/S)||b!==b&&S!==S}var Fs=typeof Object.is=="function"?Object.is:Px,ja=null,qu=!1,So=!1;function Tv(b){ja===null?ja=[b]:ja.push(b)}function Av(b){qu=!0,Tv(b)}function ys(){if(!So&&ja!==null){So=!0;var b=0,S=xn;try{var R=ja;for(xn=1;b<R.length;b++){var L=R[b];do L=L(!0);while(L!==null)}ja=null,qu=!1}catch(H){throw ja!==null&&(ja=ja.slice(b+1)),Ol(zp,ys),H}finally{xn=S,So=!1}}return null}var Gp=u.ReactCurrentBatchConfig;function Hp(b,S){if(Fs(b,S))return!0;if(typeof b!="object"||b===null||typeof S!="object"||S===null)return!1;var R=Object.keys(b),L=Object.keys(S);if(R.length!==L.length)return!1;for(L=0;L<R.length;L++){var H=R[L];if(!Ct.call(S,H)||!Fs(b[H],S[H]))return!1}return!0}function Vp(b){switch(b.tag){case 5:return bt(b.type);case 16:return bt("Lazy");case 13:return bt("Suspense");case 19:return bt("SuspenseList");case 0:case 2:case 15:return b=Lt(b.type,!1),b;case 11:return b=Lt(b.type.render,!1),b;case 1:return b=Lt(b.type,!0),b;default:return""}}function Xa(b,S){if(b&&b.defaultProps){S=s({},S),b=b.defaultProps;for(var R in b)S[R]===void 0&&(S[R]=b[R]);return S}return S}var ki=Nn(null),zh=null,ru=null,nf=null;function qh(){nf=ru=zh=null}function Ox(b,S,R){me?(It(ki,S._currentValue),S._currentValue=R):(It(ki,S._currentValue2),S._currentValue2=R)}function Ui(b){var S=ki.current;an(ki),me?b._currentValue=S:b._currentValue2=S}function Ya(b,S,R){for(;b!==null;){var L=b.alternate;if((b.childLanes&S)!==S?(b.childLanes|=S,L!==null&&(L.childLanes|=S)):L!==null&&(L.childLanes&S)!==S&&(L.childLanes|=S),b===R)break;b=b.return}}function si(b,S){zh=b,nf=ru=null,b=b.dependencies,b!==null&&b.firstContext!==null&&(b.lanes&S&&(Gs=!0),b.firstContext=null)}function oi(b){var S=me?b._currentValue:b._currentValue2;if(nf!==b)if(b={context:b,memoizedValue:S,next:null},ru===null){if(zh===null)throw Error(o(308));ru=b,zh.dependencies={lanes:0,firstContext:b}}else ru=ru.next=b;return S}var Bs=null,rf=!1;function jD(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hF(b,S){b=b.updateQueue,S.updateQueue===b&&(S.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,effects:b.effects})}function Ll(b,S){return{eventTime:b,lane:S,tag:0,payload:null,callback:null,next:null}}function af(b,S){var R=b.updateQueue;R!==null&&(R=R.shared,gi!==null&&b.mode&1&&!(gn&2)?(b=R.interleaved,b===null?(S.next=S,Bs===null?Bs=[R]:Bs.push(R)):(S.next=b.next,b.next=S),R.interleaved=S):(b=R.pending,b===null?S.next=S:(S.next=b.next,b.next=S),R.pending=S))}function Lx(b,S,R){if(S=S.updateQueue,S!==null&&(S=S.shared,(R&4194240)!==0)){var L=S.lanes;L&=b.pendingLanes,R|=L,S.lanes=R,zu(b,R)}}function mF(b,S){var R=b.updateQueue,L=b.alternate;if(L!==null&&(L=L.updateQueue,R===L)){var H=null,Z=null;if(R=R.firstBaseUpdate,R!==null){do{var Me={eventTime:R.eventTime,lane:R.lane,tag:R.tag,payload:R.payload,callback:R.callback,next:null};Z===null?H=Z=Me:Z=Z.next=Me,R=R.next}while(R!==null);Z===null?H=Z=S:Z=Z.next=S}else H=Z=S;R={baseState:L.baseState,firstBaseUpdate:H,lastBaseUpdate:Z,shared:L.shared,effects:L.effects},b.updateQueue=R;return}b=R.lastBaseUpdate,b===null?R.firstBaseUpdate=S:b.next=S,R.lastBaseUpdate=S}function kx(b,S,R,L){var H=b.updateQueue;rf=!1;var Z=H.firstBaseUpdate,Me=H.lastBaseUpdate,Ue=H.shared.pending;if(Ue!==null){H.shared.pending=null;var Je=Ue,pt=Je.next;Je.next=null,Me===null?Z=pt:Me.next=pt,Me=Je;var At=b.alternate;At!==null&&(At=At.updateQueue,Ue=At.lastBaseUpdate,Ue!==Me&&(Ue===null?At.firstBaseUpdate=pt:Ue.next=pt,At.lastBaseUpdate=Je))}if(Z!==null){var sn=H.baseState;Me=0,At=pt=Je=null,Ue=Z;do{var qt=Ue.lane,dr=Ue.eventTime;if((L&qt)===qt){At!==null&&(At=At.next={eventTime:dr,lane:0,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null});e:{var kt=b,ba=Ue;switch(qt=S,dr=R,ba.tag){case 1:if(kt=ba.payload,typeof kt=="function"){sn=kt.call(dr,sn,qt);break e}sn=kt;break e;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=ba.payload,qt=typeof kt=="function"?kt.call(dr,sn,qt):kt,qt==null)break e;sn=s({},sn,qt);break e;case 2:rf=!0}}Ue.callback!==null&&Ue.lane!==0&&(b.flags|=64,qt=H.effects,qt===null?H.effects=[Ue]:qt.push(Ue))}else dr={eventTime:dr,lane:qt,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null},At===null?(pt=At=dr,Je=sn):At=At.next=dr,Me|=qt;if(Ue=Ue.next,Ue===null){if(Ue=H.shared.pending,Ue===null)break;qt=Ue,Ue=qt.next,qt.next=null,H.lastBaseUpdate=qt,H.shared.pending=null}}while(!0);if(At===null&&(Je=sn),H.baseState=Je,H.firstBaseUpdate=pt,H.lastBaseUpdate=At,S=H.shared.interleaved,S!==null){H=S;do Me|=H.lane,H=H.next;while(H!==S)}else Z===null&&(H.shared.lanes=0);Qh|=Me,b.lanes=Me,b.memoizedState=sn}}function vF(b,S,R){if(b=S.effects,S.effects=null,b!==null)for(S=0;S<b.length;S++){var L=b[S],H=L.callback;if(H!==null){if(L.callback=null,L=R,typeof H!="function")throw Error(o(191,H));H.call(L)}}}var gF=new r.Component().refs;function XD(b,S,R,L){S=b.memoizedState,R=R(L,S),R=R==null?S:s({},S,R),b.memoizedState=R,b.lanes===0&&(b.updateQueue.baseState=R)}var Ux={isMounted:function(b){return(b=b._reactInternals)?C(b)===b:!1},enqueueSetState:function(b,S,R){b=b._reactInternals;var L=Za(),H=uf(b),Z=Ll(L,H);Z.payload=S,R!=null&&(Z.callback=R),af(b,Z),S=To(b,H,L),S!==null&&Lx(S,b,H)},enqueueReplaceState:function(b,S,R){b=b._reactInternals;var L=Za(),H=uf(b),Z=Ll(L,H);Z.tag=1,Z.payload=S,R!=null&&(Z.callback=R),af(b,Z),S=To(b,H,L),S!==null&&Lx(S,b,H)},enqueueForceUpdate:function(b,S){b=b._reactInternals;var R=Za(),L=uf(b),H=Ll(R,L);H.tag=2,S!=null&&(H.callback=S),af(b,H),S=To(b,L,R),S!==null&&Lx(S,b,L)}};function yF(b,S,R,L,H,Z,Me){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(L,Z,Me):S.prototype&&S.prototype.isPureReactComponent?!Hp(R,L)||!Hp(H,Z):!0}function xF(b,S,R){var L=!1,H=_t,Z=S.contextType;return typeof Z=="object"&&Z!==null?Z=oi(Z):(H=Vn(S)?Yr:wn.current,L=S.contextTypes,Z=(L=L!=null)?Ai(b,H):_t),S=new S(R,Z),b.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Ux,b.stateNode=S,S._reactInternals=b,L&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=H,b.__reactInternalMemoizedMaskedChildContext=Z),S}function bF(b,S,R,L){b=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(R,L),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(R,L),S.state!==b&&Ux.enqueueReplaceState(S,S.state,null)}function YD(b,S,R,L){var H=b.stateNode;H.props=R,H.state=b.memoizedState,H.refs=gF,jD(b);var Z=S.contextType;typeof Z=="object"&&Z!==null?H.context=oi(Z):(Z=Vn(S)?Yr:wn.current,H.context=Ai(b,Z)),H.state=b.memoizedState,Z=S.getDerivedStateFromProps,typeof Z=="function"&&(XD(b,S,Z,R),H.state=b.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(S=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),S!==H.state&&Ux.enqueueReplaceState(H,H.state,null),kx(b,R,H,L),H.state=b.memoizedState),typeof H.componentDidMount=="function"&&(b.flags|=4194308)}var Gh=[],Hh=0,Fx=null,Bx=0,wo=[],_o=0,Wp=null,kl=1,Ul="";function $p(b,S){Gh[Hh++]=Bx,Gh[Hh++]=Fx,Fx=b,Bx=S}function SF(b,S,R){wo[_o++]=kl,wo[_o++]=Ul,wo[_o++]=Wp,Wp=b;var L=kl;b=Ul;var H=32-ea(L)-1;L&=~(1<<H),R+=1;var Z=32-ea(S)+H;if(30<Z){var Me=H-H%5;Z=(L&(1<<Me)-1).toString(32),L>>=Me,H-=Me,kl=1<<32-ea(S)+H|R<<H|L,Ul=Z+b}else kl=1<<Z|R<<H|L,Ul=b}function QD(b){b.return!==null&&($p(b,1),SF(b,1,0))}function ZD(b){for(;b===Fx;)Fx=Gh[--Hh],Gh[Hh]=null,Bx=Gh[--Hh],Gh[Hh]=null;for(;b===Wp;)Wp=wo[--_o],wo[_o]=null,Ul=wo[--_o],wo[_o]=null,kl=wo[--_o],wo[_o]=null}var zs=null,qs=null,Or=!1,Nv=!1,iu=null;function wF(b,S){var R=Ao(5,null,null,0);R.elementType="DELETED",R.stateNode=S,R.return=b,S=b.deletions,S===null?(b.deletions=[R],b.flags|=16):S.push(R)}function _F(b,S){switch(b.tag){case 5:return S=Ln(S,b.type,b.pendingProps),S!==null?(b.stateNode=S,zs=b,qs=Fn(S),!0):!1;case 6:return S=Hn(S,b.pendingProps),S!==null?(b.stateNode=S,zs=b,qs=null,!0):!1;case 13:if(S=br(S),S!==null){var R=Wp!==null?{id:kl,overflow:Ul}:null;return b.memoizedState={dehydrated:S,treeContext:R,retryLane:1073741824},R=Ao(18,null,null,0),R.stateNode=S,R.return=b,b.child=R,zs=b,qs=null,!0}return!1;default:return!1}}function JD(b){return(b.mode&1)!==0&&(b.flags&128)===0}function KD(b){if(Or){var S=qs;if(S){var R=S;if(!_F(b,S)){if(JD(b))throw Error(o(418));S=Xr(R);var L=zs;S&&_F(b,S)?wF(L,R):(b.flags=b.flags&-4097|2,Or=!1,zs=b)}}else{if(JD(b))throw Error(o(418));b.flags=b.flags&-4097|2,Or=!1,zs=b}}}function MF(b){for(b=b.return;b!==null&&b.tag!==5&&b.tag!==3&&b.tag!==13;)b=b.return;zs=b}function Cv(b){if(!Q||b!==zs)return!1;if(!Or)return MF(b),Or=!0,!1;if(b.tag!==3&&(b.tag!==5||ke(b.type)&&!ie(b.type,b.memoizedProps))){var S=qs;if(S){if(JD(b)){for(b=qs;b;)b=Xr(b);throw Error(o(418))}for(;S;)wF(b,S),S=Xr(S)}}if(MF(b),b.tag===13){if(!Q)throw Error(o(316));if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(o(317));qs=Ha(b)}else qs=zs?Xr(b.stateNode):null;return!0}function Vh(){Q&&(qs=zs=null,Nv=Or=!1)}function eR(b){iu===null?iu=[b]:iu.push(b)}function Dv(b,S,R){if(b=R.ref,b!==null&&typeof b!="function"&&typeof b!="object"){if(R._owner){if(R=R._owner,R){if(R.tag!==1)throw Error(o(309));var L=R.stateNode}if(!L)throw Error(o(147,b));var H=L,Z=""+b;return S!==null&&S.ref!==null&&typeof S.ref=="function"&&S.ref._stringRef===Z?S.ref:(S=function(Me){var Ue=H.refs;Ue===gF&&(Ue=H.refs={}),Me===null?delete Ue[Z]:Ue[Z]=Me},S._stringRef=Z,S)}if(typeof b!="string")throw Error(o(284));if(!R._owner)throw Error(o(290,b))}return b}function zx(b,S){throw b=Object.prototype.toString.call(S),Error(o(31,b==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":b))}function EF(b){var S=b._init;return S(b._payload)}function TF(b){function S(We,ze){if(b){var Ye=We.deletions;Ye===null?(We.deletions=[ze],We.flags|=16):Ye.push(ze)}}function R(We,ze){if(!b)return null;for(;ze!==null;)S(We,ze),ze=ze.sibling;return null}function L(We,ze){for(We=new Map;ze!==null;)ze.key!==null?We.set(ze.key,ze):We.set(ze.index,ze),ze=ze.sibling;return We}function H(We,ze){return We=cf(We,ze),We.index=0,We.sibling=null,We}function Z(We,ze,Ye){return We.index=Ye,b?(Ye=We.alternate,Ye!==null?(Ye=Ye.index,Ye<ze?(We.flags|=2,ze):Ye):(We.flags|=2,ze)):(We.flags|=1048576,ze)}function Me(We){return b&&We.alternate===null&&(We.flags|=2),We}function Ue(We,ze,Ye,yt){return ze===null||ze.tag!==6?(ze=UR(Ye,We.mode,yt),ze.return=We,ze):(ze=H(ze,Ye),ze.return=We,ze)}function Je(We,ze,Ye,yt){var Pt=Ye.type;return Pt===c?At(We,ze,Ye.props.children,yt,Ye.key):ze!==null&&(ze.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===x&&EF(Pt)===ze.type)?(yt=H(ze,Ye.props),yt.ref=Dv(We,ze,Ye),yt.return=We,yt):(yt=gb(Ye.type,Ye.key,Ye.props,null,We.mode,yt),yt.ref=Dv(We,ze,Ye),yt.return=We,yt)}function pt(We,ze,Ye,yt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==Ye.containerInfo||ze.stateNode.implementation!==Ye.implementation?(ze=FR(Ye,We.mode,yt),ze.return=We,ze):(ze=H(ze,Ye.children||[]),ze.return=We,ze)}function At(We,ze,Ye,yt,Pt){return ze===null||ze.tag!==7?(ze=Kp(Ye,We.mode,yt,Pt),ze.return=We,ze):(ze=H(ze,Ye),ze.return=We,ze)}function sn(We,ze,Ye){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=UR(""+ze,We.mode,Ye),ze.return=We,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return Ye=gb(ze.type,ze.key,ze.props,null,We.mode,Ye),Ye.ref=Dv(We,null,ze),Ye.return=We,Ye;case f:return ze=FR(ze,We.mode,Ye),ze.return=We,ze;case x:var yt=ze._init;return sn(We,yt(ze._payload),Ye)}if(z(ze)||E(ze))return ze=Kp(ze,We.mode,Ye,null),ze.return=We,ze;zx(We,ze)}return null}function qt(We,ze,Ye,yt){var Pt=ze!==null?ze.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return Pt!==null?null:Ue(We,ze,""+Ye,yt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case l:return Ye.key===Pt?Je(We,ze,Ye,yt):null;case f:return Ye.key===Pt?pt(We,ze,Ye,yt):null;case x:return Pt=Ye._init,qt(We,ze,Pt(Ye._payload),yt)}if(z(Ye)||E(Ye))return Pt!==null?null:At(We,ze,Ye,yt,null);zx(We,Ye)}return null}function dr(We,ze,Ye,yt,Pt){if(typeof yt=="string"&&yt!==""||typeof yt=="number")return We=We.get(Ye)||null,Ue(ze,We,""+yt,Pt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case l:return We=We.get(yt.key===null?Ye:yt.key)||null,Je(ze,We,yt,Pt);case f:return We=We.get(yt.key===null?Ye:yt.key)||null,pt(ze,We,yt,Pt);case x:var hn=yt._init;return dr(We,ze,Ye,hn(yt._payload),Pt)}if(z(yt)||E(yt))return We=We.get(Ye)||null,At(ze,We,yt,Pt,null);zx(ze,yt)}return null}function kt(We,ze,Ye,yt){for(var Pt=null,hn=null,on=ze,Wn=ze=0,Bi=null;on!==null&&Wn<Ye.length;Wn++){on.index>Wn?(Bi=on,on=null):Bi=on.sibling;var $n=qt(We,on,Ye[Wn],yt);if($n===null){on===null&&(on=Bi);break}b&&on&&$n.alternate===null&&S(We,on),ze=Z($n,ze,Wn),hn===null?Pt=$n:hn.sibling=$n,hn=$n,on=Bi}if(Wn===Ye.length)return R(We,on),Or&&$p(We,Wn),Pt;if(on===null){for(;Wn<Ye.length;Wn++)on=sn(We,Ye[Wn],yt),on!==null&&(ze=Z(on,ze,Wn),hn===null?Pt=on:hn.sibling=on,hn=on);return Or&&$p(We,Wn),Pt}for(on=L(We,on);Wn<Ye.length;Wn++)Bi=dr(on,We,Wn,Ye[Wn],yt),Bi!==null&&(b&&Bi.alternate!==null&&on.delete(Bi.key===null?Wn:Bi.key),ze=Z(Bi,ze,Wn),hn===null?Pt=Bi:hn.sibling=Bi,hn=Bi);return b&&on.forEach(function(ff){return S(We,ff)}),Or&&$p(We,Wn),Pt}function ba(We,ze,Ye,yt){var Pt=E(Ye);if(typeof Pt!="function")throw Error(o(150));if(Ye=Pt.call(Ye),Ye==null)throw Error(o(151));for(var hn=Pt=null,on=ze,Wn=ze=0,Bi=null,$n=Ye.next();on!==null&&!$n.done;Wn++,$n=Ye.next()){on.index>Wn?(Bi=on,on=null):Bi=on.sibling;var ff=qt(We,on,$n.value,yt);if(ff===null){on===null&&(on=Bi);break}b&&on&&ff.alternate===null&&S(We,on),ze=Z(ff,ze,Wn),hn===null?Pt=ff:hn.sibling=ff,hn=ff,on=Bi}if($n.done)return R(We,on),Or&&$p(We,Wn),Pt;if(on===null){for(;!$n.done;Wn++,$n=Ye.next())$n=sn(We,$n.value,yt),$n!==null&&(ze=Z($n,ze,Wn),hn===null?Pt=$n:hn.sibling=$n,hn=$n);return Or&&$p(We,Wn),Pt}for(on=L(We,on);!$n.done;Wn++,$n=Ye.next())$n=dr(on,We,Wn,$n.value,yt),$n!==null&&(b&&$n.alternate!==null&&on.delete($n.key===null?Wn:$n.key),ze=Z($n,ze,Wn),hn===null?Pt=$n:hn.sibling=$n,hn=$n);return b&&on.forEach(function(nne){return S(We,nne)}),Or&&$p(We,Wn),Pt}function No(We,ze,Ye,yt){if(typeof Ye=="object"&&Ye!==null&&Ye.type===c&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case l:e:{for(var Pt=Ye.key,hn=ze;hn!==null;){if(hn.key===Pt){if(Pt=Ye.type,Pt===c){if(hn.tag===7){R(We,hn.sibling),ze=H(hn,Ye.props.children),ze.return=We,We=ze;break e}}else if(hn.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===x&&EF(Pt)===hn.type){R(We,hn.sibling),ze=H(hn,Ye.props),ze.ref=Dv(We,hn,Ye),ze.return=We,We=ze;break e}R(We,hn);break}else S(We,hn);hn=hn.sibling}Ye.type===c?(ze=Kp(Ye.props.children,We.mode,yt,Ye.key),ze.return=We,We=ze):(yt=gb(Ye.type,Ye.key,Ye.props,null,We.mode,yt),yt.ref=Dv(We,ze,Ye),yt.return=We,We=yt)}return Me(We);case f:e:{for(hn=Ye.key;ze!==null;){if(ze.key===hn)if(ze.tag===4&&ze.stateNode.containerInfo===Ye.containerInfo&&ze.stateNode.implementation===Ye.implementation){R(We,ze.sibling),ze=H(ze,Ye.children||[]),ze.return=We,We=ze;break e}else{R(We,ze);break}else S(We,ze);ze=ze.sibling}ze=FR(Ye,We.mode,yt),ze.return=We,We=ze}return Me(We);case x:return hn=Ye._init,No(We,ze,hn(Ye._payload),yt)}if(z(Ye))return kt(We,ze,Ye,yt);if(E(Ye))return ba(We,ze,Ye,yt);zx(We,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"?(Ye=""+Ye,ze!==null&&ze.tag===6?(R(We,ze.sibling),ze=H(ze,Ye),ze.return=We,We=ze):(R(We,ze),ze=UR(Ye,We.mode,yt),ze.return=We,We=ze),Me(We)):R(We,ze)}return No}var Wh=TF(!0),AF=TF(!1),Rv={},Mo=Nn(Rv),Iv=Nn(Rv),$h=Nn(Rv);function Gu(b){if(b===Rv)throw Error(o(174));return b}function tR(b,S){It($h,S),It(Iv,b),It(Mo,Rv),b=F(S),an(Mo),It(Mo,b)}function jh(){an(Mo),an(Iv),an($h)}function NF(b){var S=Gu($h.current),R=Gu(Mo.current);S=k(R,b.type,S),R!==S&&(It(Iv,b),It(Mo,S))}function nR(b){Iv.current===b&&(an(Mo),an(Iv))}var qr=Nn(0);function qx(b){for(var S=b;S!==null;){if(S.tag===13){var R=S.memoizedState;if(R!==null&&(R=R.dehydrated,R===null||Un(R)||Rr(R)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if(S.flags&128)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===b)break;for(;S.sibling===null;){if(S.return===null||S.return===b)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var rR=[];function iR(){for(var b=0;b<rR.length;b++){var S=rR[b];me?S._workInProgressVersionPrimary=null:S._workInProgressVersionSecondary=null}rR.length=0}var Gx=u.ReactCurrentDispatcher,Eo=u.ReactCurrentBatchConfig,Xh=0,Qr=null,ga=null,Fi=null,Hx=!1,Pv=!1,Ov=0,Ate=0;function ya(){throw Error(o(321))}function aR(b,S){if(S===null)return!1;for(var R=0;R<S.length&&R<b.length;R++)if(!Fs(b[R],S[R]))return!1;return!0}function sR(b,S,R,L,H,Z){if(Xh=Z,Qr=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,Gx.current=b===null||b.memoizedState===null?Rte:Ite,b=R(L,H),Pv){Z=0;do{if(Pv=!1,Ov=0,25<=Z)throw Error(o(301));Z+=1,Fi=ga=null,S.updateQueue=null,Gx.current=Pte,b=R(L,H)}while(Pv)}if(Gx.current=Xx,S=ga!==null&&ga.next!==null,Xh=0,Fi=ga=Qr=null,Hx=!1,S)throw Error(o(300));return b}function oR(){var b=Ov!==0;return Ov=0,b}function Fl(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fi===null?Qr.memoizedState=Fi=b:Fi=Fi.next=b,Fi}function Hu(){if(ga===null){var b=Qr.alternate;b=b!==null?b.memoizedState:null}else b=ga.next;var S=Fi===null?Qr.memoizedState:Fi.next;if(S!==null)Fi=S,ga=b;else{if(b===null)throw Error(o(310));ga=b,b={memoizedState:ga.memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},Fi===null?Qr.memoizedState=Fi=b:Fi=Fi.next=b}return Fi}function jp(b,S){return typeof S=="function"?S(b):S}function Vx(b){var S=Hu(),R=S.queue;if(R===null)throw Error(o(311));R.lastRenderedReducer=b;var L=ga,H=L.baseQueue,Z=R.pending;if(Z!==null){if(H!==null){var Me=H.next;H.next=Z.next,Z.next=Me}L.baseQueue=H=Z,R.pending=null}if(H!==null){Z=H.next,L=L.baseState;var Ue=Me=null,Je=null,pt=Z;do{var At=pt.lane;if((Xh&At)===At)Je!==null&&(Je=Je.next={lane:0,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null}),L=pt.hasEagerState?pt.eagerState:b(L,pt.action);else{var sn={lane:At,action:pt.action,hasEagerState:pt.hasEagerState,eagerState:pt.eagerState,next:null};Je===null?(Ue=Je=sn,Me=L):Je=Je.next=sn,Qr.lanes|=At,Qh|=At}pt=pt.next}while(pt!==null&&pt!==Z);Je===null?Me=L:Je.next=Ue,Fs(L,S.memoizedState)||(Gs=!0),S.memoizedState=L,S.baseState=Me,S.baseQueue=Je,R.lastRenderedState=L}if(b=R.interleaved,b!==null){H=b;do Z=H.lane,Qr.lanes|=Z,Qh|=Z,H=H.next;while(H!==b)}else H===null&&(R.lanes=0);return[S.memoizedState,R.dispatch]}function Wx(b){var S=Hu(),R=S.queue;if(R===null)throw Error(o(311));R.lastRenderedReducer=b;var L=R.dispatch,H=R.pending,Z=S.memoizedState;if(H!==null){R.pending=null;var Me=H=H.next;do Z=b(Z,Me.action),Me=Me.next;while(Me!==H);Fs(Z,S.memoizedState)||(Gs=!0),S.memoizedState=Z,S.baseQueue===null&&(S.baseState=Z),R.lastRenderedState=Z}return[Z,L]}function CF(){}function DF(b,S){var R=Qr,L=Hu(),H=S(),Z=!Fs(L.memoizedState,H);if(Z&&(L.memoizedState=H,Gs=!0),L=L.queue,kv(PF.bind(null,R,L,b),[b]),L.getSnapshot!==S||Z||Fi!==null&&Fi.memoizedState.tag&1){if(R.flags|=2048,Lv(9,IF.bind(null,R,L,H,S),void 0,null),gi===null)throw Error(o(349));Xh&30||RF(R,S,H)}return H}function RF(b,S,R){b.flags|=16384,b={getSnapshot:S,value:R},S=Qr.updateQueue,S===null?(S={lastEffect:null,stores:null},Qr.updateQueue=S,S.stores=[b]):(R=S.stores,R===null?S.stores=[b]:R.push(b))}function IF(b,S,R,L){S.value=R,S.getSnapshot=L,OF(S)&&To(b,1,-1)}function PF(b,S,R){return R(function(){OF(S)&&To(b,1,-1)})}function OF(b){var S=b.getSnapshot;b=b.value;try{var R=S();return!Fs(b,R)}catch{return!0}}function uR(b){var S=Fl();return typeof b=="function"&&(b=b()),S.memoizedState=S.baseState=b,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jp,lastRenderedState:b},S.queue=b,b=b.dispatch=Dte.bind(null,Qr,b),[S.memoizedState,b]}function Lv(b,S,R,L){return b={tag:b,create:S,destroy:R,deps:L,next:null},S=Qr.updateQueue,S===null?(S={lastEffect:null,stores:null},Qr.updateQueue=S,S.lastEffect=b.next=b):(R=S.lastEffect,R===null?S.lastEffect=b.next=b:(L=R.next,R.next=b,b.next=L,S.lastEffect=b)),b}function LF(){return Hu().memoizedState}function $x(b,S,R,L){var H=Fl();Qr.flags|=b,H.memoizedState=Lv(1|S,R,void 0,L===void 0?null:L)}function jx(b,S,R,L){var H=Hu();L=L===void 0?null:L;var Z=void 0;if(ga!==null){var Me=ga.memoizedState;if(Z=Me.destroy,L!==null&&aR(L,Me.deps)){H.memoizedState=Lv(S,R,Z,L);return}}Qr.flags|=b,H.memoizedState=Lv(1|S,R,Z,L)}function lR(b,S){return $x(8390656,8,b,S)}function kv(b,S){return jx(2048,8,b,S)}function kF(b,S){return jx(4,2,b,S)}function UF(b,S){return jx(4,4,b,S)}function FF(b,S){if(typeof S=="function")return b=b(),S(b),function(){S(null)};if(S!=null)return b=b(),S.current=b,function(){S.current=null}}function BF(b,S,R){return R=R!=null?R.concat([b]):null,jx(4,4,FF.bind(null,S,b),R)}function cR(){}function zF(b,S){var R=Hu();S=S===void 0?null:S;var L=R.memoizedState;return L!==null&&S!==null&&aR(S,L[1])?L[0]:(R.memoizedState=[b,S],b)}function qF(b,S){var R=Hu();S=S===void 0?null:S;var L=R.memoizedState;return L!==null&&S!==null&&aR(S,L[1])?L[0]:(b=b(),R.memoizedState=[b,S],b)}function Nte(b,S){var R=xn;xn=R!==0&&4>R?R:4,b(!0);var L=Eo.transition;Eo.transition={};try{b(!1),S()}finally{xn=R,Eo.transition=L}}function GF(){return Hu().memoizedState}function Cte(b,S,R){var L=uf(b);R={lane:L,action:R,hasEagerState:!1,eagerState:null,next:null},HF(b)?VF(S,R):(WF(b,S,R),R=Za(),b=To(b,L,R),b!==null&&$F(b,S,L))}function Dte(b,S,R){var L=uf(b),H={lane:L,action:R,hasEagerState:!1,eagerState:null,next:null};if(HF(b))VF(S,H);else{WF(b,S,H);var Z=b.alternate;if(b.lanes===0&&(Z===null||Z.lanes===0)&&(Z=S.lastRenderedReducer,Z!==null))try{var Me=S.lastRenderedState,Ue=Z(Me,R);if(H.hasEagerState=!0,H.eagerState=Ue,Fs(Ue,Me))return}catch{}finally{}R=Za(),b=To(b,L,R),b!==null&&$F(b,S,L)}}function HF(b){var S=b.alternate;return b===Qr||S!==null&&S===Qr}function VF(b,S){Pv=Hx=!0;var R=b.pending;R===null?S.next=S:(S.next=R.next,R.next=S),b.pending=S}function WF(b,S,R){gi!==null&&b.mode&1&&!(gn&2)?(b=S.interleaved,b===null?(R.next=R,Bs===null?Bs=[S]:Bs.push(S)):(R.next=b.next,b.next=R),S.interleaved=R):(b=S.pending,b===null?R.next=R:(R.next=b.next,b.next=R),S.pending=R)}function $F(b,S,R){if(R&4194240){var L=S.lanes;L&=b.pendingLanes,R|=L,S.lanes=R,zu(b,R)}}var Xx={readContext:oi,useCallback:ya,useContext:ya,useEffect:ya,useImperativeHandle:ya,useInsertionEffect:ya,useLayoutEffect:ya,useMemo:ya,useReducer:ya,useRef:ya,useState:ya,useDebugValue:ya,useDeferredValue:ya,useTransition:ya,useMutableSource:ya,useSyncExternalStore:ya,useId:ya,unstable_isNewReconciler:!1},Rte={readContext:oi,useCallback:function(b,S){return Fl().memoizedState=[b,S===void 0?null:S],b},useContext:oi,useEffect:lR,useImperativeHandle:function(b,S,R){return R=R!=null?R.concat([b]):null,$x(4194308,4,FF.bind(null,S,b),R)},useLayoutEffect:function(b,S){return $x(4194308,4,b,S)},useInsertionEffect:function(b,S){return $x(4,2,b,S)},useMemo:function(b,S){var R=Fl();return S=S===void 0?null:S,b=b(),R.memoizedState=[b,S],b},useReducer:function(b,S,R){var L=Fl();return S=R!==void 0?R(S):S,L.memoizedState=L.baseState=S,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:S},L.queue=b,b=b.dispatch=Cte.bind(null,Qr,b),[L.memoizedState,b]},useRef:function(b){var S=Fl();return b={current:b},S.memoizedState=b},useState:uR,useDebugValue:cR,useDeferredValue:function(b){var S=uR(b),R=S[0],L=S[1];return lR(function(){var H=Eo.transition;Eo.transition={};try{L(b)}finally{Eo.transition=H}},[b]),R},useTransition:function(){var b=uR(!1),S=b[0];return b=Nte.bind(null,b[1]),Fl().memoizedState=b,[S,b]},useMutableSource:function(){},useSyncExternalStore:function(b,S,R){var L=Qr,H=Fl();if(Or){if(R===void 0)throw Error(o(407));R=R()}else{if(R=S(),gi===null)throw Error(o(349));Xh&30||RF(L,S,R)}H.memoizedState=R;var Z={value:R,getSnapshot:S};return H.queue=Z,lR(PF.bind(null,L,Z,b),[b]),L.flags|=2048,Lv(9,IF.bind(null,L,Z,R,S),void 0,null),R},useId:function(){var b=Fl(),S=gi.identifierPrefix;if(Or){var R=Ul,L=kl;R=(L&~(1<<32-ea(L)-1)).toString(32)+R,S=":"+S+"R"+R,R=Ov++,0<R&&(S+="H"+R.toString(32)),S+=":"}else R=Ate++,S=":"+S+"r"+R.toString(32)+":";return b.memoizedState=S},unstable_isNewReconciler:!1},Ite={readContext:oi,useCallback:zF,useContext:oi,useEffect:kv,useImperativeHandle:BF,useInsertionEffect:kF,useLayoutEffect:UF,useMemo:qF,useReducer:Vx,useRef:LF,useState:function(){return Vx(jp)},useDebugValue:cR,useDeferredValue:function(b){var S=Vx(jp),R=S[0],L=S[1];return kv(function(){var H=Eo.transition;Eo.transition={};try{L(b)}finally{Eo.transition=H}},[b]),R},useTransition:function(){var b=Vx(jp)[0],S=Hu().memoizedState;return[b,S]},useMutableSource:CF,useSyncExternalStore:DF,useId:GF,unstable_isNewReconciler:!1},Pte={readContext:oi,useCallback:zF,useContext:oi,useEffect:kv,useImperativeHandle:BF,useInsertionEffect:kF,useLayoutEffect:UF,useMemo:qF,useReducer:Wx,useRef:LF,useState:function(){return Wx(jp)},useDebugValue:cR,useDeferredValue:function(b){var S=Wx(jp),R=S[0],L=S[1];return kv(function(){var H=Eo.transition;Eo.transition={};try{L(b)}finally{Eo.transition=H}},[b]),R},useTransition:function(){var b=Wx(jp)[0],S=Hu().memoizedState;return[b,S]},useMutableSource:CF,useSyncExternalStore:DF,useId:GF,unstable_isNewReconciler:!1};function fR(b,S){try{var R="",L=S;do R+=Vp(L),L=L.return;while(L);var H=R}catch(Z){H=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:b,source:S,stack:H}}function pR(b,S){try{console.error(S.value)}catch(R){setTimeout(function(){throw R})}}var Ote=typeof WeakMap=="function"?WeakMap:Map;function jF(b,S,R){R=Ll(-1,R),R.tag=3,R.payload={element:null};var L=S.value;return R.callback=function(){cb||(cb=!0,DR=L),pR(b,S)},R}function XF(b,S,R){R=Ll(-1,R),R.tag=3;var L=b.type.getDerivedStateFromError;if(typeof L=="function"){var H=S.value;R.payload=function(){return L(H)},R.callback=function(){pR(b,S)}}var Z=b.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(R.callback=function(){pR(b,S),typeof L!="function"&&(sf===null?sf=new Set([this]):sf.add(this));var Me=S.stack;this.componentDidCatch(S.value,{componentStack:Me!==null?Me:""})}),R}function YF(b,S,R){var L=b.pingCache;if(L===null){L=b.pingCache=new Ote;var H=new Set;L.set(S,H)}else H=L.get(S),H===void 0&&(H=new Set,L.set(S,H));H.has(R)||(H.add(R),b=Xte.bind(null,b,S,R),S.then(b,b))}function QF(b){do{var S;if((S=b.tag===13)&&(S=b.memoizedState,S=S!==null?S.dehydrated!==null:!0),S)return b;b=b.return}while(b!==null);return null}function ZF(b,S,R,L,H){return b.mode&1?(b.flags|=65536,b.lanes=H,b):(b===S?b.flags|=65536:(b.flags|=128,R.flags|=131072,R.flags&=-52805,R.tag===1&&(R.alternate===null?R.tag=17:(S=Ll(-1,1),S.tag=2,af(R,S))),R.lanes|=1),b)}function Vu(b){b.flags|=4}function JF(b,S){if(b!==null&&b.child===S.child)return!0;if(S.flags&16)return!1;for(b=S.child;b!==null;){if(b.flags&12854||b.subtreeFlags&12854)return!1;b=b.sibling}return!0}var Uv,Fv,Yx,Qx;if(Se)Uv=function(b,S){for(var R=S.child;R!==null;){if(R.tag===5||R.tag===6)ee(b,R.stateNode);else if(R.tag!==4&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===S)break;for(;R.sibling===null;){if(R.return===null||R.return===S)return;R=R.return}R.sibling.return=R.return,R=R.sibling}},Fv=function(){},Yx=function(b,S,R,L,H){if(b=b.memoizedProps,b!==L){var Z=S.stateNode,Me=Gu(Mo.current);R=Y(Z,R,b,L,H,Me),(S.updateQueue=R)&&Vu(S)}},Qx=function(b,S,R,L){R!==L&&Vu(S)};else if(le){Uv=function(b,S,R,L){for(var H=S.child;H!==null;){if(H.tag===5){var Z=H.stateNode;R&&L&&(Z=Nt(Z,H.type,H.memoizedProps,H)),ee(b,Z)}else if(H.tag===6)Z=H.stateNode,R&&L&&(Z=Xt(Z,H.memoizedProps,H)),ee(b,Z);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)Z=H.child,Z!==null&&(Z.return=H),Uv(b,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===S)break;for(;H.sibling===null;){if(H.return===null||H.return===S)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};var KF=function(b,S,R,L){for(var H=S.child;H!==null;){if(H.tag===5){var Z=H.stateNode;R&&L&&(Z=Nt(Z,H.type,H.memoizedProps,H)),it(b,Z)}else if(H.tag===6)Z=H.stateNode,R&&L&&(Z=Xt(Z,H.memoizedProps,H)),it(b,Z);else if(H.tag!==4){if(H.tag===22&&H.memoizedState!==null)Z=H.child,Z!==null&&(Z.return=H),KF(b,H,!0,!0);else if(H.child!==null){H.child.return=H,H=H.child;continue}}if(H===S)break;for(;H.sibling===null;){if(H.return===null||H.return===S)return;H=H.return}H.sibling.return=H.return,H=H.sibling}};Fv=function(b,S){var R=S.stateNode;if(!JF(b,S)){b=R.containerInfo;var L=Ze(b);KF(L,S,!1,!1),R.pendingChildren=L,Vu(S),ot(b,L)}},Yx=function(b,S,R,L,H){var Z=b.stateNode,Me=b.memoizedProps;if((b=JF(b,S))&&Me===L)S.stateNode=Z;else{var Ue=S.stateNode,Je=Gu(Mo.current),pt=null;Me!==L&&(pt=Y(Ue,R,Me,L,H,Je)),b&&pt===null?S.stateNode=Z:(Z=qe(Z,pt,R,Me,L,S,b,Ue),J(Z,R,L,H,Je)&&Vu(S),S.stateNode=Z,b?Vu(S):Uv(Z,S,!1,!1))}},Qx=function(b,S,R,L){R!==L?(b=Gu($h.current),R=Gu(Mo.current),S.stateNode=K(L,b,R,S),Vu(S)):S.stateNode=b.stateNode}}else Fv=function(){},Yx=function(){},Qx=function(){};function Bv(b,S){if(!Or)switch(b.tailMode){case"hidden":S=b.tail;for(var R=null;S!==null;)S.alternate!==null&&(R=S),S=S.sibling;R===null?b.tail=null:R.sibling=null;break;case"collapsed":R=b.tail;for(var L=null;R!==null;)R.alternate!==null&&(L=R),R=R.sibling;L===null?S||b.tail===null?b.tail=null:b.tail.sibling=null:L.sibling=null}}function xa(b){var S=b.alternate!==null&&b.alternate.child===b.child,R=0,L=0;if(S)for(var H=b.child;H!==null;)R|=H.lanes|H.childLanes,L|=H.subtreeFlags&14680064,L|=H.flags&14680064,H.return=b,H=H.sibling;else for(H=b.child;H!==null;)R|=H.lanes|H.childLanes,L|=H.subtreeFlags,L|=H.flags,H.return=b,H=H.sibling;return b.subtreeFlags|=L,b.childLanes=R,S}function Lte(b,S,R){var L=S.pendingProps;switch(ZD(S),S.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xa(S),null;case 1:return Vn(S.type)&&Va(),xa(S),null;case 3:return L=S.stateNode,jh(),an(Yt),an(wn),iR(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(b===null||b.child===null)&&(Cv(S)?Vu(S):b===null||b.memoizedState.isDehydrated&&!(S.flags&256)||(S.flags|=1024,iu!==null&&(PR(iu),iu=null))),Fv(b,S),xa(S),null;case 5:nR(S),R=Gu($h.current);var H=S.type;if(b!==null&&S.stateNode!=null)Yx(b,S,H,L,R),b.ref!==S.ref&&(S.flags|=512,S.flags|=2097152);else{if(!L){if(S.stateNode===null)throw Error(o(166));return xa(S),null}if(b=Gu(Mo.current),Cv(S)){if(!Q)throw Error(o(175));b=Sn(S.stateNode,S.type,S.memoizedProps,R,b,S,!Nv),S.updateQueue=b,b!==null&&Vu(S)}else{var Z=X(H,L,R,b,S);Uv(Z,S,!1,!1),S.stateNode=Z,J(Z,H,L,R,b)&&Vu(S)}S.ref!==null&&(S.flags|=512,S.flags|=2097152)}return xa(S),null;case 6:if(b&&S.stateNode!=null)Qx(b,S,b.memoizedProps,L);else{if(typeof L!="string"&&S.stateNode===null)throw Error(o(166));if(b=Gu($h.current),R=Gu(Mo.current),Cv(S)){if(!Q)throw Error(o(176));if(b=S.stateNode,L=S.memoizedProps,(R=er(b,L,S,!Nv))&&(H=zs,H!==null))switch(Z=(H.mode&1)!==0,H.tag){case 3:ft(H.stateNode.containerInfo,b,L,Z);break;case 5:ht(H.type,H.memoizedProps,H.stateNode,b,L,Z)}R&&Vu(S)}else S.stateNode=K(L,b,R,S)}return xa(S),null;case 13:if(an(qr),L=S.memoizedState,Or&&qs!==null&&S.mode&1&&!(S.flags&128)){for(b=qs;b;)b=Xr(b);return Vh(),S.flags|=98560,S}if(L!==null&&L.dehydrated!==null){if(L=Cv(S),b===null){if(!L)throw Error(o(318));if(!Q)throw Error(o(344));if(b=S.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(o(317));Pr(b,S)}else Vh(),!(S.flags&128)&&(S.memoizedState=null),S.flags|=4;return xa(S),null}return iu!==null&&(PR(iu),iu=null),S.flags&128?(S.lanes=R,S):(L=L!==null,R=!1,b===null?Cv(S):R=b.memoizedState!==null,L&&!R&&(S.child.flags|=8192,S.mode&1&&(b===null||qr.current&1?Ni===0&&(Ni=3):LR())),S.updateQueue!==null&&(S.flags|=4),xa(S),null);case 4:return jh(),Fv(b,S),b===null&&ne(S.stateNode.containerInfo),xa(S),null;case 10:return Ui(S.type._context),xa(S),null;case 17:return Vn(S.type)&&Va(),xa(S),null;case 19:if(an(qr),H=S.memoizedState,H===null)return xa(S),null;if(L=(S.flags&128)!==0,Z=H.rendering,Z===null)if(L)Bv(H,!1);else{if(Ni!==0||b!==null&&b.flags&128)for(b=S.child;b!==null;){if(Z=qx(b),Z!==null){for(S.flags|=128,Bv(H,!1),b=Z.updateQueue,b!==null&&(S.updateQueue=b,S.flags|=4),S.subtreeFlags=0,b=R,L=S.child;L!==null;)R=L,H=b,R.flags&=14680066,Z=R.alternate,Z===null?(R.childLanes=0,R.lanes=H,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=Z.childLanes,R.lanes=Z.lanes,R.child=Z.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=Z.memoizedProps,R.memoizedState=Z.memoizedState,R.updateQueue=Z.updateQueue,R.type=Z.type,H=Z.dependencies,R.dependencies=H===null?null:{lanes:H.lanes,firstContext:H.firstContext}),L=L.sibling;return It(qr,qr.current&1|2),S.child}b=b.sibling}H.tail!==null&&zr()>CR&&(S.flags|=128,L=!0,Bv(H,!1),S.lanes=4194304)}else{if(!L)if(b=qx(Z),b!==null){if(S.flags|=128,L=!0,b=b.updateQueue,b!==null&&(S.updateQueue=b,S.flags|=4),Bv(H,!0),H.tail===null&&H.tailMode==="hidden"&&!Z.alternate&&!Or)return xa(S),null}else 2*zr()-H.renderingStartTime>CR&&R!==1073741824&&(S.flags|=128,L=!0,Bv(H,!1),S.lanes=4194304);H.isBackwards?(Z.sibling=S.child,S.child=Z):(b=H.last,b!==null?b.sibling=Z:S.child=Z,H.last=Z)}return H.tail!==null?(S=H.tail,H.rendering=S,H.tail=S.sibling,H.renderingStartTime=zr(),S.sibling=null,b=qr.current,It(qr,L?b&1|2:b&1),S):(xa(S),null);case 22:case 23:return OR(),L=S.memoizedState!==null,b!==null&&b.memoizedState!==null!==L&&(S.flags|=8192),L&&S.mode&1?Hs&1073741824&&(xa(S),Se&&S.subtreeFlags&6&&(S.flags|=8192)):xa(S),null;case 24:return null;case 25:return null}throw Error(o(156,S.tag))}var kte=u.ReactCurrentOwner,Gs=!1;function Qa(b,S,R,L){S.child=b===null?AF(S,null,R,L):Wh(S,b.child,R,L)}function eB(b,S,R,L,H){R=R.render;var Z=S.ref;return si(S,H),L=sR(b,S,R,L,Z,H),R=oR(),b!==null&&!Gs?(S.updateQueue=b.updateQueue,S.flags&=-2053,b.lanes&=~H,Bl(b,S,H)):(Or&&R&&QD(S),S.flags|=1,Qa(b,S,L,H),S.child)}function tB(b,S,R,L,H){if(b===null){var Z=R.type;return typeof Z=="function"&&!kR(Z)&&Z.defaultProps===void 0&&R.compare===null&&R.defaultProps===void 0?(S.tag=15,S.type=Z,nB(b,S,Z,L,H)):(b=gb(R.type,null,L,S,S.mode,H),b.ref=S.ref,b.return=S,S.child=b)}if(Z=b.child,!(b.lanes&H)){var Me=Z.memoizedProps;if(R=R.compare,R=R!==null?R:Hp,R(Me,L)&&b.ref===S.ref)return Bl(b,S,H)}return S.flags|=1,b=cf(Z,L),b.ref=S.ref,b.return=S,S.child=b}function nB(b,S,R,L,H){if(b!==null&&Hp(b.memoizedProps,L)&&b.ref===S.ref)if(Gs=!1,(b.lanes&H)!==0)b.flags&131072&&(Gs=!0);else return S.lanes=b.lanes,Bl(b,S,H);return dR(b,S,R,L,H)}function rB(b,S,R){var L=S.pendingProps,H=L.children,Z=b!==null?b.memoizedState:null;if(L.mode==="hidden")if(!(S.mode&1))S.memoizedState={baseLanes:0,cachePool:null},It(Yh,Hs),Hs|=R;else if(R&1073741824)S.memoizedState={baseLanes:0,cachePool:null},L=Z!==null?Z.baseLanes:R,It(Yh,Hs),Hs|=L;else return b=Z!==null?Z.baseLanes|R:R,S.lanes=S.childLanes=1073741824,S.memoizedState={baseLanes:b,cachePool:null},S.updateQueue=null,It(Yh,Hs),Hs|=b,null;else Z!==null?(L=Z.baseLanes|R,S.memoizedState=null):L=R,It(Yh,Hs),Hs|=L;return Qa(b,S,H,R),S.child}function iB(b,S){var R=S.ref;(b===null&&R!==null||b!==null&&b.ref!==R)&&(S.flags|=512,S.flags|=2097152)}function dR(b,S,R,L,H){var Z=Vn(R)?Yr:wn.current;return Z=Ai(S,Z),si(S,H),R=sR(b,S,R,L,Z,H),L=oR(),b!==null&&!Gs?(S.updateQueue=b.updateQueue,S.flags&=-2053,b.lanes&=~H,Bl(b,S,H)):(Or&&L&&QD(S),S.flags|=1,Qa(b,S,R,H),S.child)}function aB(b,S,R,L,H){if(Vn(R)){var Z=!0;bo(S)}else Z=!1;if(si(S,H),S.stateNode===null)b!==null&&(b.alternate=null,S.alternate=null,S.flags|=2),xF(S,R,L),YD(S,R,L,H),L=!0;else if(b===null){var Me=S.stateNode,Ue=S.memoizedProps;Me.props=Ue;var Je=Me.context,pt=R.contextType;typeof pt=="object"&&pt!==null?pt=oi(pt):(pt=Vn(R)?Yr:wn.current,pt=Ai(S,pt));var At=R.getDerivedStateFromProps,sn=typeof At=="function"||typeof Me.getSnapshotBeforeUpdate=="function";sn||typeof Me.UNSAFE_componentWillReceiveProps!="function"&&typeof Me.componentWillReceiveProps!="function"||(Ue!==L||Je!==pt)&&bF(S,Me,L,pt),rf=!1;var qt=S.memoizedState;Me.state=qt,kx(S,L,Me,H),Je=S.memoizedState,Ue!==L||qt!==Je||Yt.current||rf?(typeof At=="function"&&(XD(S,R,At,L),Je=S.memoizedState),(Ue=rf||yF(S,R,Ue,L,qt,Je,pt))?(sn||typeof Me.UNSAFE_componentWillMount!="function"&&typeof Me.componentWillMount!="function"||(typeof Me.componentWillMount=="function"&&Me.componentWillMount(),typeof Me.UNSAFE_componentWillMount=="function"&&Me.UNSAFE_componentWillMount()),typeof Me.componentDidMount=="function"&&(S.flags|=4194308)):(typeof Me.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=L,S.memoizedState=Je),Me.props=L,Me.state=Je,Me.context=pt,L=Ue):(typeof Me.componentDidMount=="function"&&(S.flags|=4194308),L=!1)}else{Me=S.stateNode,hF(b,S),Ue=S.memoizedProps,pt=S.type===S.elementType?Ue:Xa(S.type,Ue),Me.props=pt,sn=S.pendingProps,qt=Me.context,Je=R.contextType,typeof Je=="object"&&Je!==null?Je=oi(Je):(Je=Vn(R)?Yr:wn.current,Je=Ai(S,Je));var dr=R.getDerivedStateFromProps;(At=typeof dr=="function"||typeof Me.getSnapshotBeforeUpdate=="function")||typeof Me.UNSAFE_componentWillReceiveProps!="function"&&typeof Me.componentWillReceiveProps!="function"||(Ue!==sn||qt!==Je)&&bF(S,Me,L,Je),rf=!1,qt=S.memoizedState,Me.state=qt,kx(S,L,Me,H);var kt=S.memoizedState;Ue!==sn||qt!==kt||Yt.current||rf?(typeof dr=="function"&&(XD(S,R,dr,L),kt=S.memoizedState),(pt=rf||yF(S,R,pt,L,qt,kt,Je)||!1)?(At||typeof Me.UNSAFE_componentWillUpdate!="function"&&typeof Me.componentWillUpdate!="function"||(typeof Me.componentWillUpdate=="function"&&Me.componentWillUpdate(L,kt,Je),typeof Me.UNSAFE_componentWillUpdate=="function"&&Me.UNSAFE_componentWillUpdate(L,kt,Je)),typeof Me.componentDidUpdate=="function"&&(S.flags|=4),typeof Me.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof Me.componentDidUpdate!="function"||Ue===b.memoizedProps&&qt===b.memoizedState||(S.flags|=4),typeof Me.getSnapshotBeforeUpdate!="function"||Ue===b.memoizedProps&&qt===b.memoizedState||(S.flags|=1024),S.memoizedProps=L,S.memoizedState=kt),Me.props=L,Me.state=kt,Me.context=Je,L=pt):(typeof Me.componentDidUpdate!="function"||Ue===b.memoizedProps&&qt===b.memoizedState||(S.flags|=4),typeof Me.getSnapshotBeforeUpdate!="function"||Ue===b.memoizedProps&&qt===b.memoizedState||(S.flags|=1024),L=!1)}return hR(b,S,R,L,Z,H)}function hR(b,S,R,L,H,Z){iB(b,S);var Me=(S.flags&128)!==0;if(!L&&!Me)return H&&Sr(S,R,!1),Bl(b,S,Z);L=S.stateNode,kte.current=S;var Ue=Me&&typeof R.getDerivedStateFromError!="function"?null:L.render();return S.flags|=1,b!==null&&Me?(S.child=Wh(S,b.child,null,Z),S.child=Wh(S,null,Ue,Z)):Qa(b,S,Ue,Z),S.memoizedState=L.state,H&&Sr(S,R,!0),S.child}function sB(b){var S=b.stateNode;S.pendingContext?or(b,S.pendingContext,S.pendingContext!==S.context):S.context&&or(b,S.context,!1),tR(b,S.containerInfo)}function oB(b,S,R,L,H){return Vh(),eR(H),S.flags|=256,Qa(b,S,R,L),S.child}var Zx={dehydrated:null,treeContext:null,retryLane:0};function Jx(b){return{baseLanes:b,cachePool:null}}function uB(b,S,R){var L=S.pendingProps,H=qr.current,Z=!1,Me=(S.flags&128)!==0,Ue;if((Ue=Me)||(Ue=b!==null&&b.memoizedState===null?!1:(H&2)!==0),Ue?(Z=!0,S.flags&=-129):(b===null||b.memoizedState!==null)&&(H|=1),It(qr,H&1),b===null)return KD(S),b=S.memoizedState,b!==null&&(b=b.dehydrated,b!==null)?(S.mode&1?Rr(b)?S.lanes=8:S.lanes=1073741824:S.lanes=1,null):(H=L.children,b=L.fallback,Z?(L=S.mode,Z=S.child,H={mode:"hidden",children:H},!(L&1)&&Z!==null?(Z.childLanes=0,Z.pendingProps=H):Z=yb(H,L,0,null),b=Kp(b,L,R,null),Z.return=S,b.return=S,Z.sibling=b,S.child=Z,S.child.memoizedState=Jx(R),S.memoizedState=Zx,b):mR(S,H));if(H=b.memoizedState,H!==null){if(Ue=H.dehydrated,Ue!==null){if(Me)return S.flags&256?(S.flags&=-257,Kx(b,S,R,Error(o(422)))):S.memoizedState!==null?(S.child=b.child,S.flags|=128,null):(Z=L.fallback,H=S.mode,L=yb({mode:"visible",children:L.children},H,0,null),Z=Kp(Z,H,R,null),Z.flags|=2,L.return=S,Z.return=S,L.sibling=Z,S.child=L,S.mode&1&&Wh(S,b.child,null,R),S.child.memoizedState=Jx(R),S.memoizedState=Zx,Z);if(!(S.mode&1))S=Kx(b,S,R,null);else if(Rr(Ue))S=Kx(b,S,R,Error(o(419)));else if(L=(R&b.childLanes)!==0,Gs||L){if(L=gi,L!==null){switch(R&-R){case 4:Z=2;break;case 16:Z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Z=32;break;case 536870912:Z=268435456;break;default:Z=0}L=Z&(L.suspendedLanes|R)?0:Z,L!==0&&L!==H.retryLane&&(H.retryLane=L,To(b,L,-1))}LR(),S=Kx(b,S,R,Error(o(421)))}else Un(Ue)?(S.flags|=128,S.child=b.child,S=Yte.bind(null,b),ar(Ue,S),S=null):(R=H.treeContext,Q&&(qs=Ir(Ue),zs=S,Or=!0,iu=null,Nv=!1,R!==null&&(wo[_o++]=kl,wo[_o++]=Ul,wo[_o++]=Wp,kl=R.id,Ul=R.overflow,Wp=S)),S=mR(S,S.pendingProps.children),S.flags|=4096);return S}return Z?(L=cB(b,S,L.children,L.fallback,R),Z=S.child,H=b.child.memoizedState,Z.memoizedState=H===null?Jx(R):{baseLanes:H.baseLanes|R,cachePool:null},Z.childLanes=b.childLanes&~R,S.memoizedState=Zx,L):(R=lB(b,S,L.children,R),S.memoizedState=null,R)}return Z?(L=cB(b,S,L.children,L.fallback,R),Z=S.child,H=b.child.memoizedState,Z.memoizedState=H===null?Jx(R):{baseLanes:H.baseLanes|R,cachePool:null},Z.childLanes=b.childLanes&~R,S.memoizedState=Zx,L):(R=lB(b,S,L.children,R),S.memoizedState=null,R)}function mR(b,S){return S=yb({mode:"visible",children:S},b.mode,0,null),S.return=b,b.child=S}function lB(b,S,R,L){var H=b.child;return b=H.sibling,R=cf(H,{mode:"visible",children:R}),!(S.mode&1)&&(R.lanes=L),R.return=S,R.sibling=null,b!==null&&(L=S.deletions,L===null?(S.deletions=[b],S.flags|=16):L.push(b)),S.child=R}function cB(b,S,R,L,H){var Z=S.mode;b=b.child;var Me=b.sibling,Ue={mode:"hidden",children:R};return!(Z&1)&&S.child!==b?(R=S.child,R.childLanes=0,R.pendingProps=Ue,S.deletions=null):(R=cf(b,Ue),R.subtreeFlags=b.subtreeFlags&14680064),Me!==null?L=cf(Me,L):(L=Kp(L,Z,H,null),L.flags|=2),L.return=S,R.return=S,R.sibling=L,S.child=R,L}function Kx(b,S,R,L){return L!==null&&eR(L),Wh(S,b.child,null,R),b=mR(S,S.pendingProps.children),b.flags|=2,S.memoizedState=null,b}function fB(b,S,R){b.lanes|=S;var L=b.alternate;L!==null&&(L.lanes|=S),Ya(b.return,S,R)}function vR(b,S,R,L,H){var Z=b.memoizedState;Z===null?b.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:L,tail:R,tailMode:H}:(Z.isBackwards=S,Z.rendering=null,Z.renderingStartTime=0,Z.last=L,Z.tail=R,Z.tailMode=H)}function pB(b,S,R){var L=S.pendingProps,H=L.revealOrder,Z=L.tail;if(Qa(b,S,L.children,R),L=qr.current,L&2)L=L&1|2,S.flags|=128;else{if(b!==null&&b.flags&128)e:for(b=S.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&fB(b,R,S);else if(b.tag===19)fB(b,R,S);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===S)break e;for(;b.sibling===null;){if(b.return===null||b.return===S)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}L&=1}if(It(qr,L),!(S.mode&1))S.memoizedState=null;else switch(H){case"forwards":for(R=S.child,H=null;R!==null;)b=R.alternate,b!==null&&qx(b)===null&&(H=R),R=R.sibling;R=H,R===null?(H=S.child,S.child=null):(H=R.sibling,R.sibling=null),vR(S,!1,H,R,Z);break;case"backwards":for(R=null,H=S.child,S.child=null;H!==null;){if(b=H.alternate,b!==null&&qx(b)===null){S.child=H;break}b=H.sibling,H.sibling=R,R=H,H=b}vR(S,!0,R,null,Z);break;case"together":vR(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function Bl(b,S,R){if(b!==null&&(S.dependencies=b.dependencies),Qh|=S.lanes,!(R&S.childLanes))return null;if(b!==null&&S.child!==b.child)throw Error(o(153));if(S.child!==null){for(b=S.child,R=cf(b,b.pendingProps),S.child=R,R.return=S;b.sibling!==null;)b=b.sibling,R=R.sibling=cf(b,b.pendingProps),R.return=S;R.sibling=null}return S.child}function Ute(b,S,R){switch(S.tag){case 3:sB(S),Vh();break;case 5:NF(S);break;case 1:Vn(S.type)&&bo(S);break;case 4:tR(S,S.stateNode.containerInfo);break;case 10:Ox(S,S.type._context,S.memoizedProps.value);break;case 13:var L=S.memoizedState;if(L!==null)return L.dehydrated!==null?(It(qr,qr.current&1),S.flags|=128,null):R&S.child.childLanes?uB(b,S,R):(It(qr,qr.current&1),b=Bl(b,S,R),b!==null?b.sibling:null);It(qr,qr.current&1);break;case 19:if(L=(R&S.childLanes)!==0,b.flags&128){if(L)return pB(b,S,R);S.flags|=128}var H=S.memoizedState;if(H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),It(qr,qr.current),L)break;return null;case 22:case 23:return S.lanes=0,rB(b,S,R)}return Bl(b,S,R)}function Fte(b,S){switch(ZD(S),S.tag){case 1:return Vn(S.type)&&Va(),b=S.flags,b&65536?(S.flags=b&-65537|128,S):null;case 3:return jh(),an(Yt),an(wn),iR(),b=S.flags,b&65536&&!(b&128)?(S.flags=b&-65537|128,S):null;case 5:return nR(S),null;case 13:if(an(qr),b=S.memoizedState,b!==null&&b.dehydrated!==null){if(S.alternate===null)throw Error(o(340));Vh()}return b=S.flags,b&65536?(S.flags=b&-65537|128,S):null;case 19:return an(qr),null;case 4:return jh(),null;case 10:return Ui(S.type._context),null;case 22:case 23:return OR(),null;case 24:return null;default:return null}}var eb=!1,Xp=!1,Bte=typeof WeakSet=="function"?WeakSet:Set,mt=null;function tb(b,S){var R=b.ref;if(R!==null)if(typeof R=="function")try{R(null)}catch(L){Ss(b,S,L)}else R.current=null}function gR(b,S,R){try{R()}catch(L){Ss(b,S,L)}}var dB=!1;function zte(b,S){for(O(b.containerInfo),mt=S;mt!==null;)if(b=mt,S=b.child,(b.subtreeFlags&1028)!==0&&S!==null)S.return=b,mt=S;else for(;mt!==null;){b=mt;try{var R=b.alternate;if(b.flags&1024)switch(b.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var L=R.memoizedProps,H=R.memoizedState,Z=b.stateNode,Me=Z.getSnapshotBeforeUpdate(b.elementType===b.type?L:Xa(b.type,L),H);Z.__reactInternalSnapshotBeforeUpdate=Me}break;case 3:Se&&Fe(b.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ue){Ss(b,b.return,Ue)}if(S=b.sibling,S!==null){S.return=b.return,mt=S;break}mt=b.return}return R=dB,dB=!1,R}function Yp(b,S,R){var L=S.updateQueue;if(L=L!==null?L.lastEffect:null,L!==null){var H=L=L.next;do{if((H.tag&b)===b){var Z=H.destroy;H.destroy=void 0,Z!==void 0&&gR(S,R,Z)}H=H.next}while(H!==L)}}function zv(b,S){if(S=S.updateQueue,S=S!==null?S.lastEffect:null,S!==null){var R=S=S.next;do{if((R.tag&b)===b){var L=R.create;R.destroy=L()}R=R.next}while(R!==S)}}function yR(b){var S=b.ref;if(S!==null){var R=b.stateNode;switch(b.tag){case 5:b=G(R);break;default:b=R}typeof S=="function"?S(b):S.current=b}}function hB(b,S,R){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(qp,S)}catch{}switch(S.tag){case 0:case 11:case 14:case 15:if(b=S.updateQueue,b!==null&&(b=b.lastEffect,b!==null)){var L=b=b.next;do{var H=L,Z=H.destroy;H=H.tag,Z!==void 0&&(H&2||H&4)&&gR(S,R,Z),L=L.next}while(L!==b)}break;case 1:if(tb(S,R),b=S.stateNode,typeof b.componentWillUnmount=="function")try{b.props=S.memoizedProps,b.state=S.memoizedState,b.componentWillUnmount()}catch(Me){Ss(S,R,Me)}break;case 5:tb(S,R);break;case 4:Se?bB(b,S,R):le&&le&&(S=S.stateNode.containerInfo,R=Ze(S),tt(S,R))}}function mB(b,S,R){for(var L=S;;)if(hB(b,L,R),L.child===null||Se&&L.tag===4){if(L===S)break;for(;L.sibling===null;){if(L.return===null||L.return===S)return;L=L.return}L.sibling.return=L.return,L=L.sibling}else L.child.return=L,L=L.child}function vB(b){var S=b.alternate;S!==null&&(b.alternate=null,vB(S)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(S=b.stateNode,S!==null&&xe(S)),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function gB(b){return b.tag===5||b.tag===3||b.tag===4}function yB(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||gB(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function xB(b){if(Se){e:{for(var S=b.return;S!==null;){if(gB(S))break e;S=S.return}throw Error(o(160))}var R=S;switch(R.tag){case 5:S=R.stateNode,R.flags&32&&(V(S),R.flags&=-33),R=yB(b),bR(b,R,S);break;case 3:case 4:S=R.stateNode.containerInfo,R=yB(b),xR(b,R,S);break;default:throw Error(o(161))}}}function xR(b,S,R){var L=b.tag;if(L===5||L===6)b=b.stateNode,S?Xe(R,b,S):Oe(R,b);else if(L!==4&&(b=b.child,b!==null))for(xR(b,S,R),b=b.sibling;b!==null;)xR(b,S,R),b=b.sibling}function bR(b,S,R){var L=b.tag;if(L===5||L===6)b=b.stateNode,S?et(R,b,S):Ie(R,b);else if(L!==4&&(b=b.child,b!==null))for(bR(b,S,R),b=b.sibling;b!==null;)bR(b,S,R),b=b.sibling}function bB(b,S,R){for(var L=S,H=!1,Z,Me;;){if(!H){H=L.return;e:for(;;){if(H===null)throw Error(o(160));switch(Z=H.stateNode,H.tag){case 5:Me=!1;break e;case 3:Z=Z.containerInfo,Me=!0;break e;case 4:Z=Z.containerInfo,Me=!0;break e}H=H.return}H=!0}if(L.tag===5||L.tag===6)mB(b,L,R),Me?we(Z,L.stateNode):je(Z,L.stateNode);else if(L.tag===18)Me?$e(Z,L.stateNode):Ve(Z,L.stateNode);else if(L.tag===4){if(L.child!==null){Z=L.stateNode.containerInfo,Me=!0,L.child.return=L,L=L.child;continue}}else if(hB(b,L,R),L.child!==null){L.child.return=L,L=L.child;continue}if(L===S)break;for(;L.sibling===null;){if(L.return===null||L.return===S)return;L=L.return,L.tag===4&&(H=!1)}L.sibling.return=L.return,L=L.sibling}}function SR(b,S){if(Se){switch(S.tag){case 0:case 11:case 14:case 15:Yp(3,S,S.return),zv(3,S),Yp(5,S,S.return);return;case 1:return;case 5:var R=S.stateNode;if(R!=null){var L=S.memoizedProps;b=b!==null?b.memoizedProps:L;var H=S.type,Z=S.updateQueue;S.updateQueue=null,Z!==null&&Qe(R,Z,H,b,L,S)}return;case 6:if(S.stateNode===null)throw Error(o(162));R=S.memoizedProps,Be(S.stateNode,b!==null?b.memoizedProps:R,R);return;case 3:Q&&b!==null&&b.memoizedState.isDehydrated&&de(S.stateNode.containerInfo);return;case 12:return;case 13:nb(S);return;case 19:nb(S);return;case 17:return}throw Error(o(163))}switch(S.tag){case 0:case 11:case 14:case 15:Yp(3,S,S.return),zv(3,S),Yp(5,S,S.return);return;case 12:return;case 13:nb(S);return;case 19:nb(S);return;case 3:Q&&b!==null&&b.memoizedState.isDehydrated&&de(S.stateNode.containerInfo);break;case 22:case 23:return}e:if(le){switch(S.tag){case 1:case 5:case 6:break e;case 3:case 4:S=S.stateNode,tt(S.containerInfo,S.pendingChildren);break e}throw Error(o(163))}}function nb(b){var S=b.updateQueue;if(S!==null){b.updateQueue=null;var R=b.stateNode;R===null&&(R=b.stateNode=new Bte),S.forEach(function(L){var H=Qte.bind(null,b,L);R.has(L)||(R.add(L),L.then(H,H))})}}function qte(b,S){for(mt=S;mt!==null;){S=mt;var R=S.deletions;if(R!==null)for(var L=0;L<R.length;L++){var H=R[L];try{var Z=b;Se?bB(Z,H,S):mB(Z,H,S);var Me=H.alternate;Me!==null&&(Me.return=null),H.return=null}catch(Pt){Ss(H,S,Pt)}}if(R=S.child,S.subtreeFlags&12854&&R!==null)R.return=S,mt=R;else for(;mt!==null;){S=mt;try{var Ue=S.flags;if(Ue&32&&Se&&V(S.stateNode),Ue&512){var Je=S.alternate;if(Je!==null){var pt=Je.ref;pt!==null&&(typeof pt=="function"?pt(null):pt.current=null)}}if(Ue&8192)switch(S.tag){case 13:if(S.memoizedState!==null){var At=S.alternate;(At===null||At.memoizedState===null)&&(NR=zr())}break;case 22:var sn=S.memoizedState!==null,qt=S.alternate,dr=qt!==null&&qt.memoizedState!==null;if(R=S,Se){e:if(L=R,H=sn,Z=null,Se)for(var kt=L;;){if(kt.tag===5){if(Z===null){Z=kt;var ba=kt.stateNode;H?j(ba):he(kt.stateNode,kt.memoizedProps)}}else if(kt.tag===6){if(Z===null){var No=kt.stateNode;H?pe(No):Ae(No,kt.memoizedProps)}}else if((kt.tag!==22&&kt.tag!==23||kt.memoizedState===null||kt===L)&&kt.child!==null){kt.child.return=kt,kt=kt.child;continue}if(kt===L)break;for(;kt.sibling===null;){if(kt.return===null||kt.return===L)break e;Z===kt&&(Z=null),kt=kt.return}Z===kt&&(Z=null),kt.sibling.return=kt.return,kt=kt.sibling}}if(sn&&!dr&&R.mode&1){mt=R;for(var We=R.child;We!==null;){for(R=mt=We;mt!==null;){L=mt;var ze=L.child;switch(L.tag){case 0:case 11:case 14:case 15:Yp(4,L,L.return);break;case 1:tb(L,L.return);var Ye=L.stateNode;if(typeof Ye.componentWillUnmount=="function"){var yt=L.return;try{Ye.props=L.memoizedProps,Ye.state=L.memoizedState,Ye.componentWillUnmount()}catch(Pt){Ss(L,yt,Pt)}}break;case 5:tb(L,L.return);break;case 22:if(L.memoizedState!==null){_B(R);continue}}ze!==null?(ze.return=L,mt=ze):_B(R)}We=We.sibling}}}switch(Ue&4102){case 2:xB(S),S.flags&=-3;break;case 6:xB(S),S.flags&=-3,SR(S.alternate,S);break;case 4096:S.flags&=-4097;break;case 4100:S.flags&=-4097,SR(S.alternate,S);break;case 4:SR(S.alternate,S)}}catch(Pt){Ss(S,S.return,Pt)}if(R=S.sibling,R!==null){R.return=S.return,mt=R;break}mt=S.return}}}function Gte(b,S,R){mt=b,SB(b)}function SB(b,S,R){for(var L=(b.mode&1)!==0;mt!==null;){var H=mt,Z=H.child;if(H.tag===22&&L){var Me=H.memoizedState!==null||eb;if(!Me){var Ue=H.alternate,Je=Ue!==null&&Ue.memoizedState!==null||Xp;Ue=eb;var pt=Xp;if(eb=Me,(Xp=Je)&&!pt)for(mt=H;mt!==null;)Me=mt,Je=Me.child,Me.tag===22&&Me.memoizedState!==null?MB(H):Je!==null?(Je.return=Me,mt=Je):MB(H);for(;Z!==null;)mt=Z,SB(Z),Z=Z.sibling;mt=H,eb=Ue,Xp=pt}wB(b)}else H.subtreeFlags&8772&&Z!==null?(Z.return=H,mt=Z):wB(b)}}function wB(b){for(;mt!==null;){var S=mt;if(S.flags&8772){var R=S.alternate;try{if(S.flags&8772)switch(S.tag){case 0:case 11:case 15:Xp||zv(5,S);break;case 1:var L=S.stateNode;if(S.flags&4&&!Xp)if(R===null)L.componentDidMount();else{var H=S.elementType===S.type?R.memoizedProps:Xa(S.type,R.memoizedProps);L.componentDidUpdate(H,R.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var Z=S.updateQueue;Z!==null&&vF(S,Z,L);break;case 3:var Me=S.updateQueue;if(Me!==null){if(R=null,S.child!==null)switch(S.child.tag){case 5:R=G(S.child.stateNode);break;case 1:R=S.child.stateNode}vF(S,Me,R)}break;case 5:var Ue=S.stateNode;R===null&&S.flags&4&&He(Ue,S.type,S.memoizedProps,S);break;case 6:break;case 4:break;case 12:break;case 13:if(Q&&S.memoizedState===null){var Je=S.alternate;if(Je!==null){var pt=Je.memoizedState;if(pt!==null){var At=pt.dehydrated;At!==null&&Le(At)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Xp||S.flags&512&&yR(S)}catch(sn){Ss(S,S.return,sn)}}if(S===b){mt=null;break}if(R=S.sibling,R!==null){R.return=S.return,mt=R;break}mt=S.return}}function _B(b){for(;mt!==null;){var S=mt;if(S===b){mt=null;break}var R=S.sibling;if(R!==null){R.return=S.return,mt=R;break}mt=S.return}}function MB(b){for(;mt!==null;){var S=mt;try{switch(S.tag){case 0:case 11:case 15:var R=S.return;try{zv(4,S)}catch(Je){Ss(S,R,Je)}break;case 1:var L=S.stateNode;if(typeof L.componentDidMount=="function"){var H=S.return;try{L.componentDidMount()}catch(Je){Ss(S,H,Je)}}var Z=S.return;try{yR(S)}catch(Je){Ss(S,Z,Je)}break;case 5:var Me=S.return;try{yR(S)}catch(Je){Ss(S,Me,Je)}}}catch(Je){Ss(S,S.return,Je)}if(S===b){mt=null;break}var Ue=S.sibling;if(Ue!==null){Ue.return=S.return,mt=Ue;break}mt=S.return}}var rb=0,ib=1,ab=2,sb=3,ob=4;if(typeof Symbol=="function"&&Symbol.for){var qv=Symbol.for;rb=qv("selector.component"),ib=qv("selector.has_pseudo_class"),ab=qv("selector.role"),sb=qv("selector.test_id"),ob=qv("selector.text")}function wR(b){var S=Ee(b);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(o(364));return S}if(b=B(b),b===null)throw Error(o(362));return b.stateNode.current}function _R(b,S){switch(S.$$typeof){case rb:if(b.type===S.value)return!0;break;case ib:e:{S=S.value,b=[b,0];for(var R=0;R<b.length;){var L=b[R++],H=b[R++],Z=S[H];if(L.tag!==5||!_e(L)){for(;Z!=null&&_R(L,Z);)H++,Z=S[H];if(H===S.length){S=!0;break e}else for(L=L.child;L!==null;)b.push(L,H),L=L.sibling}}S=!1}return S;case ab:if(b.tag===5&&be(b.stateNode,S.value))return!0;break;case ob:if((b.tag===5||b.tag===6)&&(b=ue(b),b!==null&&0<=b.indexOf(S.value)))return!0;break;case sb:if(b.tag===5&&(b=b.memoizedProps["data-testname"],typeof b=="string"&&b.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function MR(b){switch(b.$$typeof){case rb:return"<"+(N(b.value)||"Unknown")+">";case ib:return":has("+(MR(b)||"")+")";case ab:return'[role="'+b.value+'"]';case ob:return'"'+b.value+'"';case sb:return'[data-testname="'+b.value+'"]';default:throw Error(o(365))}}function EB(b,S){var R=[];b=[b,0];for(var L=0;L<b.length;){var H=b[L++],Z=b[L++],Me=S[Z];if(H.tag!==5||!_e(H)){for(;Me!=null&&_R(H,Me);)Z++,Me=S[Z];if(Z===S.length)R.push(H);else for(H=H.child;H!==null;)b.push(H,Z),H=H.sibling}}return R}function ER(b,S){if(!$)throw Error(o(363));b=wR(b),b=EB(b,S),S=[],b=Array.from(b);for(var R=0;R<b.length;){var L=b[R++];if(L.tag===5)_e(L)||S.push(L.stateNode);else for(L=L.child;L!==null;)b.push(L),L=L.sibling}return S}var Hte=Math.ceil,ub=u.ReactCurrentDispatcher,TR=u.ReactCurrentOwner,ui=u.ReactCurrentBatchConfig,gn=0,gi=null,yi=null,ta=0,Hs=0,Yh=Nn(0),Ni=0,Gv=null,Qh=0,lb=0,AR=0,Hv=null,xs=null,NR=0,CR=1/0;function Zh(){CR=zr()+500}var cb=!1,DR=null,sf=null,fb=!1,of=null,pb=0,Vv=0,RR=null,db=-1,hb=0;function Za(){return gn&6?zr():db!==-1?db:db=zr()}function uf(b){return b.mode&1?gn&2&&ta!==0?ta&-ta:Gp.transition!==null?(hb===0&&(b=Dl,Dl<<=1,!(Dl&4194240)&&(Dl=64),hb=b),hb):(b=xn,b!==0?b:se()):1}function To(b,S,R){if(50<Vv)throw Vv=0,RR=null,Error(o(185));var L=mb(b,S);return L===null?null:(Bu(L,S,R),(!(gn&2)||L!==gi)&&(L===gi&&(!(gn&2)&&(lb|=S),Ni===4&&lf(L,ta)),bs(L,R),S===1&&gn===0&&!(b.mode&1)&&(Zh(),qu&&ys())),L)}function mb(b,S){b.lanes|=S;var R=b.alternate;for(R!==null&&(R.lanes|=S),R=b,b=b.return;b!==null;)b.childLanes|=S,R=b.alternate,R!==null&&(R.childLanes|=S),R=b,b=b.return;return R.tag===3?R.stateNode:null}function bs(b,S){var R=b.callbackNode;Sv(b,S);var L=Bp(b,b===gi?ta:0);if(L===0)R!==null&&Bh(R),b.callbackNode=null,b.callbackPriority=0;else if(S=L&-L,b.callbackPriority!==S){if(R!=null&&Bh(R),S===1)b.tag===0?Av(AB.bind(null,b)):Tv(AB.bind(null,b)),ve?te(function(){gn===0&&ys()}):Ol(zp,ys),R=null;else{switch(wv(L)){case 1:R=zp;break;case 4:R=Ix;break;case 16:R=$a;break;case 536870912:R=Mv;break;default:R=$a}R=kB(R,TB.bind(null,b))}b.callbackPriority=S,b.callbackNode=R}}function TB(b,S){if(db=-1,hb=0,gn&6)throw Error(o(327));var R=b.callbackNode;if(Jp()&&b.callbackNode!==R)return null;var L=Bp(b,b===gi?ta:0);if(L===0)return null;if(L&30||L&b.expiredLanes||S)S=vb(b,L);else{S=L;var H=gn;gn|=2;var Z=DB();(gi!==b||ta!==S)&&(Zh(),Qp(b,S));do try{$te();break}catch(Ue){CB(b,Ue)}while(!0);qh(),ub.current=Z,gn=H,yi!==null?S=0:(gi=null,ta=0,S=Ni)}if(S!==0){if(S===2&&(H=Pl(b),H!==0&&(L=H,S=IR(b,H))),S===1)throw R=Gv,Qp(b,0),lf(b,L),bs(b,zr()),R;if(S===6)lf(b,L);else{if(H=b.current.alternate,!(L&30)&&!Vte(H)&&(S=vb(b,L),S===2&&(Z=Pl(b),Z!==0&&(L=Z,S=IR(b,Z))),S===1))throw R=Gv,Qp(b,0),lf(b,L),bs(b,zr()),R;switch(b.finishedWork=H,b.finishedLanes=L,S){case 0:case 1:throw Error(o(345));case 2:Zp(b,xs);break;case 3:if(lf(b,L),(L&130023424)===L&&(S=NR+500-zr(),10<S)){if(Bp(b,0)!==0)break;if(H=b.suspendedLanes,(H&L)!==L){Za(),b.pingedLanes|=b.suspendedLanes&H;break}b.timeoutHandle=re(Zp.bind(null,b,xs),S);break}Zp(b,xs);break;case 4:if(lf(b,L),(L&4194240)===L)break;for(S=b.eventTimes,H=-1;0<L;){var Me=31-ea(L);Z=1<<Me,Me=S[Me],Me>H&&(H=Me),L&=~Z}if(L=H,L=zr()-L,L=(120>L?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*Hte(L/1960))-L,10<L){b.timeoutHandle=re(Zp.bind(null,b,xs),L);break}Zp(b,xs);break;case 5:Zp(b,xs);break;default:throw Error(o(329))}}}return bs(b,zr()),b.callbackNode===R?TB.bind(null,b):null}function IR(b,S){var R=Hv;return b.current.memoizedState.isDehydrated&&(Qp(b,S).flags|=256),b=vb(b,S),b!==2&&(S=xs,xs=R,S!==null&&PR(S)),b}function PR(b){xs===null?xs=b:xs.push.apply(xs,b)}function Vte(b){for(var S=b;;){if(S.flags&16384){var R=S.updateQueue;if(R!==null&&(R=R.stores,R!==null))for(var L=0;L<R.length;L++){var H=R[L],Z=H.getSnapshot;H=H.value;try{if(!Fs(Z(),H))return!1}catch{return!1}}}if(R=S.child,S.subtreeFlags&16384&&R!==null)R.return=S,S=R;else{if(S===b)break;for(;S.sibling===null;){if(S.return===null||S.return===b)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function lf(b,S){for(S&=~AR,S&=~lb,b.suspendedLanes|=S,b.pingedLanes&=~S,b=b.expirationTimes;0<S;){var R=31-ea(S),L=1<<R;b[R]=-1,S&=~L}}function AB(b){if(gn&6)throw Error(o(327));Jp();var S=Bp(b,0);if(!(S&1))return bs(b,zr()),null;var R=vb(b,S);if(b.tag!==0&&R===2){var L=Pl(b);L!==0&&(S=L,R=IR(b,L))}if(R===1)throw R=Gv,Qp(b,0),lf(b,S),bs(b,zr()),R;if(R===6)throw Error(o(345));return b.finishedWork=b.current.alternate,b.finishedLanes=S,Zp(b,xs),bs(b,zr()),null}function NB(b){of!==null&&of.tag===0&&!(gn&6)&&Jp();var S=gn;gn|=1;var R=ui.transition,L=xn;try{if(ui.transition=null,xn=1,b)return b()}finally{xn=L,ui.transition=R,gn=S,!(gn&6)&&ys()}}function OR(){Hs=Yh.current,an(Yh)}function Qp(b,S){b.finishedWork=null,b.finishedLanes=0;var R=b.timeoutHandle;if(R!==ce&&(b.timeoutHandle=ce,oe(R)),yi!==null)for(R=yi.return;R!==null;){var L=R;switch(ZD(L),L.tag){case 1:L=L.type.childContextTypes,L!=null&&Va();break;case 3:jh(),an(Yt),an(wn),iR();break;case 5:nR(L);break;case 4:jh();break;case 13:an(qr);break;case 19:an(qr);break;case 10:Ui(L.type._context);break;case 22:case 23:OR()}R=R.return}if(gi=b,yi=b=cf(b.current,null),ta=Hs=S,Ni=0,Gv=null,AR=lb=Qh=0,xs=Hv=null,Bs!==null){for(S=0;S<Bs.length;S++)if(R=Bs[S],L=R.interleaved,L!==null){R.interleaved=null;var H=L.next,Z=R.pending;if(Z!==null){var Me=Z.next;Z.next=H,L.next=Me}R.pending=L}Bs=null}return b}function CB(b,S){do{var R=yi;try{if(qh(),Gx.current=Xx,Hx){for(var L=Qr.memoizedState;L!==null;){var H=L.queue;H!==null&&(H.pending=null),L=L.next}Hx=!1}if(Xh=0,Fi=ga=Qr=null,Pv=!1,Ov=0,TR.current=null,R===null||R.return===null){Ni=1,Gv=S,yi=null;break}e:{var Z=b,Me=R.return,Ue=R,Je=S;if(S=ta,Ue.flags|=32768,Je!==null&&typeof Je=="object"&&typeof Je.then=="function"){var pt=Je,At=Ue,sn=At.tag;if(!(At.mode&1)&&(sn===0||sn===11||sn===15)){var qt=At.alternate;qt?(At.updateQueue=qt.updateQueue,At.memoizedState=qt.memoizedState,At.lanes=qt.lanes):(At.updateQueue=null,At.memoizedState=null)}var dr=QF(Me);if(dr!==null){dr.flags&=-257,ZF(dr,Me,Ue,Z,S),dr.mode&1&&YF(Z,pt,S),S=dr,Je=pt;var kt=S.updateQueue;if(kt===null){var ba=new Set;ba.add(Je),S.updateQueue=ba}else kt.add(Je);break e}else{if(!(S&1)){YF(Z,pt,S),LR();break e}Je=Error(o(426))}}else if(Or&&Ue.mode&1){var No=QF(Me);if(No!==null){!(No.flags&65536)&&(No.flags|=256),ZF(No,Me,Ue,Z,S),eR(Je);break e}}Z=Je,Ni!==4&&(Ni=2),Hv===null?Hv=[Z]:Hv.push(Z),Je=fR(Je,Ue),Ue=Me;do{switch(Ue.tag){case 3:Ue.flags|=65536,S&=-S,Ue.lanes|=S;var We=jF(Ue,Je,S);mF(Ue,We);break e;case 1:Z=Je;var ze=Ue.type,Ye=Ue.stateNode;if(!(Ue.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||Ye!==null&&typeof Ye.componentDidCatch=="function"&&(sf===null||!sf.has(Ye)))){Ue.flags|=65536,S&=-S,Ue.lanes|=S;var yt=XF(Ue,Z,S);mF(Ue,yt);break e}}Ue=Ue.return}while(Ue!==null)}IB(R)}catch(Pt){S=Pt,yi===R&&R!==null&&(yi=R=R.return);continue}break}while(!0)}function DB(){var b=ub.current;return ub.current=Xx,b===null?Xx:b}function LR(){(Ni===0||Ni===3||Ni===2)&&(Ni=4),gi===null||!(Qh&268435455)&&!(lb&268435455)||lf(gi,ta)}function vb(b,S){var R=gn;gn|=2;var L=DB();gi===b&&ta===S||Qp(b,S);do try{Wte();break}catch(H){CB(b,H)}while(!0);if(qh(),gn=R,ub.current=L,yi!==null)throw Error(o(261));return gi=null,ta=0,Ni}function Wte(){for(;yi!==null;)RB(yi)}function $te(){for(;yi!==null&&!_v();)RB(yi)}function RB(b){var S=LB(b.alternate,b,Hs);b.memoizedProps=b.pendingProps,S===null?IB(b):yi=S,TR.current=null}function IB(b){var S=b;do{var R=S.alternate;if(b=S.return,S.flags&32768){if(R=Fte(R,S),R!==null){R.flags&=32767,yi=R;return}if(b!==null)b.flags|=32768,b.subtreeFlags=0,b.deletions=null;else{Ni=6,yi=null;return}}else if(R=Lte(R,S,Hs),R!==null){yi=R;return}if(S=S.sibling,S!==null){yi=S;return}yi=S=b}while(S!==null);Ni===0&&(Ni=5)}function Zp(b,S){var R=xn,L=ui.transition;try{ui.transition=null,xn=1,jte(b,S,R)}finally{ui.transition=L,xn=R}return null}function jte(b,S,R){do Jp();while(of!==null);if(gn&6)throw Error(o(327));var L=b.finishedWork,H=b.finishedLanes;if(L===null)return null;if(b.finishedWork=null,b.finishedLanes=0,L===b.current)throw Error(o(177));b.callbackNode=null,b.callbackPriority=0;var Z=L.lanes|L.childLanes;if(tf(b,Z),b===gi&&(yi=gi=null,ta=0),!(L.subtreeFlags&2064)&&!(L.flags&2064)||fb||(fb=!0,kB($a,function(){return Jp(),null})),Z=(L.flags&15990)!==0,L.subtreeFlags&15990||Z){Z=ui.transition,ui.transition=null;var Me=xn;xn=1;var Ue=gn;gn|=4,TR.current=null,zte(b,L),qte(b,L),W(b.containerInfo),b.current=L,Gte(L),Rx(),gn=Ue,xn=Me,ui.transition=Z}else b.current=L;if(fb&&(fb=!1,of=b,pb=H),Z=b.pendingLanes,Z===0&&(sf=null),Ev(L.stateNode),bs(b,zr()),S!==null)for(R=b.onRecoverableError,L=0;L<S.length;L++)R(S[L]);if(cb)throw cb=!1,b=DR,DR=null,b;return pb&1&&b.tag!==0&&Jp(),Z=b.pendingLanes,Z&1?b===RR?Vv++:(Vv=0,RR=b):Vv=0,ys(),null}function Jp(){if(of!==null){var b=wv(pb),S=ui.transition,R=xn;try{if(ui.transition=null,xn=16>b?16:b,of===null)var L=!1;else{if(b=of,of=null,pb=0,gn&6)throw Error(o(331));var H=gn;for(gn|=4,mt=b.current;mt!==null;){var Z=mt,Me=Z.child;if(mt.flags&16){var Ue=Z.deletions;if(Ue!==null){for(var Je=0;Je<Ue.length;Je++){var pt=Ue[Je];for(mt=pt;mt!==null;){var At=mt;switch(At.tag){case 0:case 11:case 15:Yp(8,At,Z)}var sn=At.child;if(sn!==null)sn.return=At,mt=sn;else for(;mt!==null;){At=mt;var qt=At.sibling,dr=At.return;if(vB(At),At===pt){mt=null;break}if(qt!==null){qt.return=dr,mt=qt;break}mt=dr}}}var kt=Z.alternate;if(kt!==null){var ba=kt.child;if(ba!==null){kt.child=null;do{var No=ba.sibling;ba.sibling=null,ba=No}while(ba!==null)}}mt=Z}}if(Z.subtreeFlags&2064&&Me!==null)Me.return=Z,mt=Me;else e:for(;mt!==null;){if(Z=mt,Z.flags&2048)switch(Z.tag){case 0:case 11:case 15:Yp(9,Z,Z.return)}var We=Z.sibling;if(We!==null){We.return=Z.return,mt=We;break e}mt=Z.return}}var ze=b.current;for(mt=ze;mt!==null;){Me=mt;var Ye=Me.child;if(Me.subtreeFlags&2064&&Ye!==null)Ye.return=Me,mt=Ye;else e:for(Me=ze;mt!==null;){if(Ue=mt,Ue.flags&2048)try{switch(Ue.tag){case 0:case 11:case 15:zv(9,Ue)}}catch(Pt){Ss(Ue,Ue.return,Pt)}if(Ue===Me){mt=null;break e}var yt=Ue.sibling;if(yt!==null){yt.return=Ue.return,mt=yt;break e}mt=Ue.return}}if(gn=H,ys(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(qp,b)}catch{}L=!0}return L}finally{xn=R,ui.transition=S}}return!1}function PB(b,S,R){S=fR(R,S),S=jF(b,S,1),af(b,S),S=Za(),b=mb(b,1),b!==null&&(Bu(b,1,S),bs(b,S))}function Ss(b,S,R){if(b.tag===3)PB(b,b,R);else for(;S!==null;){if(S.tag===3){PB(S,b,R);break}else if(S.tag===1){var L=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(sf===null||!sf.has(L))){b=fR(R,b),b=XF(S,b,1),af(S,b),b=Za(),S=mb(S,1),S!==null&&(Bu(S,1,b),bs(S,b));break}}S=S.return}}function Xte(b,S,R){var L=b.pingCache;L!==null&&L.delete(S),S=Za(),b.pingedLanes|=b.suspendedLanes&R,gi===b&&(ta&R)===R&&(Ni===4||Ni===3&&(ta&130023424)===ta&&500>zr()-NR?Qp(b,0):AR|=R),bs(b,S)}function OB(b,S){S===0&&(b.mode&1?(S=Rl,Rl<<=1,!(Rl&130023424)&&(Rl=4194304)):S=1);var R=Za();b=mb(b,S),b!==null&&(Bu(b,S,R),bs(b,R))}function Yte(b){var S=b.memoizedState,R=0;S!==null&&(R=S.retryLane),OB(b,R)}function Qte(b,S){var R=0;switch(b.tag){case 13:var L=b.stateNode,H=b.memoizedState;H!==null&&(R=H.retryLane);break;case 19:L=b.stateNode;break;default:throw Error(o(314))}L!==null&&L.delete(S),OB(b,R)}var LB;LB=function(b,S,R){if(b!==null)if(b.memoizedProps!==S.pendingProps||Yt.current)Gs=!0;else{if(!(b.lanes&R)&&!(S.flags&128))return Gs=!1,Ute(b,S,R);Gs=!!(b.flags&131072)}else Gs=!1,Or&&S.flags&1048576&&SF(S,Bx,S.index);switch(S.lanes=0,S.tag){case 2:var L=S.type;b!==null&&(b.alternate=null,S.alternate=null,S.flags|=2),b=S.pendingProps;var H=Ai(S,wn.current);si(S,R),H=sR(null,S,L,b,H,R);var Z=oR();return S.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(S.tag=1,S.memoizedState=null,S.updateQueue=null,Vn(L)?(Z=!0,bo(S)):Z=!1,S.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,jD(S),H.updater=Ux,S.stateNode=H,H._reactInternals=S,YD(S,L,b,R),S=hR(null,S,L,!0,Z,R)):(S.tag=0,Or&&Z&&QD(S),Qa(null,S,H,R),S=S.child),S;case 16:L=S.elementType;e:{switch(b!==null&&(b.alternate=null,S.alternate=null,S.flags|=2),b=S.pendingProps,H=L._init,L=H(L._payload),S.type=L,H=S.tag=Jte(L),b=Xa(L,b),H){case 0:S=dR(null,S,L,b,R);break e;case 1:S=aB(null,S,L,b,R);break e;case 11:S=eB(null,S,L,b,R);break e;case 14:S=tB(null,S,L,Xa(L.type,b),R);break e}throw Error(o(306,L,""))}return S;case 0:return L=S.type,H=S.pendingProps,H=S.elementType===L?H:Xa(L,H),dR(b,S,L,H,R);case 1:return L=S.type,H=S.pendingProps,H=S.elementType===L?H:Xa(L,H),aB(b,S,L,H,R);case 3:e:{if(sB(S),b===null)throw Error(o(387));L=S.pendingProps,Z=S.memoizedState,H=Z.element,hF(b,S),kx(S,L,null,R);var Me=S.memoizedState;if(L=Me.element,Q&&Z.isDehydrated)if(Z={element:L,isDehydrated:!1,cache:Me.cache,transitions:Me.transitions},S.updateQueue.baseState=Z,S.memoizedState=Z,S.flags&256){H=Error(o(423)),S=oB(b,S,L,R,H);break e}else if(L!==H){H=Error(o(424)),S=oB(b,S,L,R,H);break e}else for(Q&&(qs=sr(S.stateNode.containerInfo),zs=S,Or=!0,iu=null,Nv=!1),R=AF(S,null,L,R),S.child=R;R;)R.flags=R.flags&-3|4096,R=R.sibling;else{if(Vh(),L===H){S=Bl(b,S,R);break e}Qa(b,S,L,R)}S=S.child}return S;case 5:return NF(S),b===null&&KD(S),L=S.type,H=S.pendingProps,Z=b!==null?b.memoizedProps:null,Me=H.children,ie(L,H)?Me=null:Z!==null&&ie(L,Z)&&(S.flags|=32),iB(b,S),Qa(b,S,Me,R),S.child;case 6:return b===null&&KD(S),null;case 13:return uB(b,S,R);case 4:return tR(S,S.stateNode.containerInfo),L=S.pendingProps,b===null?S.child=Wh(S,null,L,R):Qa(b,S,L,R),S.child;case 11:return L=S.type,H=S.pendingProps,H=S.elementType===L?H:Xa(L,H),eB(b,S,L,H,R);case 7:return Qa(b,S,S.pendingProps,R),S.child;case 8:return Qa(b,S,S.pendingProps.children,R),S.child;case 12:return Qa(b,S,S.pendingProps.children,R),S.child;case 10:e:{if(L=S.type._context,H=S.pendingProps,Z=S.memoizedProps,Me=H.value,Ox(S,L,Me),Z!==null)if(Fs(Z.value,Me)){if(Z.children===H.children&&!Yt.current){S=Bl(b,S,R);break e}}else for(Z=S.child,Z!==null&&(Z.return=S);Z!==null;){var Ue=Z.dependencies;if(Ue!==null){Me=Z.child;for(var Je=Ue.firstContext;Je!==null;){if(Je.context===L){if(Z.tag===1){Je=Ll(-1,R&-R),Je.tag=2;var pt=Z.updateQueue;if(pt!==null){pt=pt.shared;var At=pt.pending;At===null?Je.next=Je:(Je.next=At.next,At.next=Je),pt.pending=Je}}Z.lanes|=R,Je=Z.alternate,Je!==null&&(Je.lanes|=R),Ya(Z.return,R,S),Ue.lanes|=R;break}Je=Je.next}}else if(Z.tag===10)Me=Z.type===S.type?null:Z.child;else if(Z.tag===18){if(Me=Z.return,Me===null)throw Error(o(341));Me.lanes|=R,Ue=Me.alternate,Ue!==null&&(Ue.lanes|=R),Ya(Me,R,S),Me=Z.sibling}else Me=Z.child;if(Me!==null)Me.return=Z;else for(Me=Z;Me!==null;){if(Me===S){Me=null;break}if(Z=Me.sibling,Z!==null){Z.return=Me.return,Me=Z;break}Me=Me.return}Z=Me}Qa(b,S,H.children,R),S=S.child}return S;case 9:return H=S.type,L=S.pendingProps.children,si(S,R),H=oi(H),L=L(H),S.flags|=1,Qa(b,S,L,R),S.child;case 14:return L=S.type,H=Xa(L,S.pendingProps),H=Xa(L.type,H),tB(b,S,L,H,R);case 15:return nB(b,S,S.type,S.pendingProps,R);case 17:return L=S.type,H=S.pendingProps,H=S.elementType===L?H:Xa(L,H),b!==null&&(b.alternate=null,S.alternate=null,S.flags|=2),S.tag=1,Vn(L)?(b=!0,bo(S)):b=!1,si(S,R),xF(S,L,H),YD(S,L,H,R),hR(null,S,L,!0,b,R);case 19:return pB(b,S,R);case 22:return rB(b,S,R)}throw Error(o(156,S.tag))};function kB(b,S){return Ol(b,S)}function Zte(b,S,R,L){this.tag=b,this.key=R,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ao(b,S,R,L){return new Zte(b,S,R,L)}function kR(b){return b=b.prototype,!(!b||!b.isReactComponent)}function Jte(b){if(typeof b=="function")return kR(b)?1:0;if(b!=null){if(b=b.$$typeof,b===v)return 11;if(b===_)return 14}return 2}function cf(b,S){var R=b.alternate;return R===null?(R=Ao(b.tag,S,b.key,b.mode),R.elementType=b.elementType,R.type=b.type,R.stateNode=b.stateNode,R.alternate=b,b.alternate=R):(R.pendingProps=S,R.type=b.type,R.flags=0,R.subtreeFlags=0,R.deletions=null),R.flags=b.flags&14680064,R.childLanes=b.childLanes,R.lanes=b.lanes,R.child=b.child,R.memoizedProps=b.memoizedProps,R.memoizedState=b.memoizedState,R.updateQueue=b.updateQueue,S=b.dependencies,R.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},R.sibling=b.sibling,R.index=b.index,R.ref=b.ref,R}function gb(b,S,R,L,H,Z){var Me=2;if(L=b,typeof b=="function")kR(b)&&(Me=1);else if(typeof b=="string")Me=5;else e:switch(b){case c:return Kp(R.children,H,Z,S);case p:Me=8,H|=8;break;case d:return b=Ao(12,R,S,H|2),b.elementType=d,b.lanes=Z,b;case g:return b=Ao(13,R,S,H),b.elementType=g,b.lanes=Z,b;case y:return b=Ao(19,R,S,H),b.elementType=y,b.lanes=Z,b;case M:return yb(R,H,Z,S);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case h:Me=10;break e;case m:Me=9;break e;case v:Me=11;break e;case _:Me=14;break e;case x:Me=16,L=null;break e}throw Error(o(130,b==null?b:typeof b,""))}return S=Ao(Me,R,S,H),S.elementType=b,S.type=L,S.lanes=Z,S}function Kp(b,S,R,L){return b=Ao(7,b,L,S),b.lanes=R,b}function yb(b,S,R,L){return b=Ao(22,b,L,S),b.elementType=M,b.lanes=R,b.stateNode={},b}function UR(b,S,R){return b=Ao(6,b,null,S),b.lanes=R,b}function FR(b,S,R){return S=Ao(4,b.children!==null?b.children:[],b.key,S),S.lanes=R,S.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},S}function Kte(b,S,R,L,H){this.tag=S,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fh(0),this.expirationTimes=Fh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fh(0),this.identifierPrefix=L,this.onRecoverableError=H,Q&&(this.mutableSourceEagerHydrationData=null)}function UB(b,S,R,L,H,Z,Me,Ue,Je){return b=new Kte(b,S,R,Ue,Je),S===1?(S=1,Z===!0&&(S|=8)):S=0,Z=Ao(3,null,null,S),b.current=Z,Z.stateNode=b,Z.memoizedState={element:L,isDehydrated:R,cache:null,transitions:null},jD(Z),b}function FB(b){if(!b)return _t;b=b._reactInternals;e:{if(C(b)!==b||b.tag!==1)throw Error(o(170));var S=b;do{switch(S.tag){case 3:S=S.stateNode.context;break e;case 1:if(Vn(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break e}}S=S.return}while(S!==null);throw Error(o(171))}if(b.tag===1){var R=b.type;if(Vn(R))return Wa(b,R,S)}return S}function BB(b){var S=b._reactInternals;if(S===void 0)throw typeof b.render=="function"?Error(o(188)):(b=Object.keys(b).join(","),Error(o(268,b)));return b=I(S),b===null?null:b.stateNode}function zB(b,S){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var R=b.retryLane;b.retryLane=R!==0&&R<S?R:S}}function BR(b,S){zB(b,S),(b=b.alternate)&&zB(b,S)}function ene(b){return b=I(b),b===null?null:b.stateNode}function tne(){return null}return n.attemptContinuousHydration=function(b){if(b.tag===13){var S=Za();To(b,134217728,S),BR(b,134217728)}},n.attemptHydrationAtCurrentPriority=function(b){if(b.tag===13){var S=Za(),R=uf(b);To(b,R,S),BR(b,R)}},n.attemptSynchronousHydration=function(b){switch(b.tag){case 3:var S=b.stateNode;if(S.current.memoizedState.isDehydrated){var R=Il(S.pendingLanes);R!==0&&(zu(S,R|1),bs(S,zr()),!(gn&6)&&(Zh(),ys()))}break;case 13:var L=Za();NB(function(){return To(b,1,L)}),BR(b,1)}},n.batchedUpdates=function(b,S){var R=gn;gn|=1;try{return b(S)}finally{gn=R,gn===0&&(Zh(),qu&&ys())}},n.createComponentSelector=function(b){return{$$typeof:rb,value:b}},n.createContainer=function(b,S,R,L,H,Z,Me){return UB(b,S,!1,null,R,L,H,Z,Me)},n.createHasPseudoClassSelector=function(b){return{$$typeof:ib,value:b}},n.createHydrationContainer=function(b,S,R,L,H,Z,Me,Ue,Je){return b=UB(R,L,!0,b,H,Z,Me,Ue,Je),b.context=FB(null),R=b.current,L=Za(),H=uf(R),Z=Ll(L,H),Z.callback=S??null,af(R,Z),b.current.lanes=H,Bu(b,H,L),bs(b,L),b},n.createPortal=function(b,S,R){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:L==null?null:""+L,children:b,containerInfo:S,implementation:R}},n.createRoleSelector=function(b){return{$$typeof:ab,value:b}},n.createTestNameSelector=function(b){return{$$typeof:sb,value:b}},n.createTextSelector=function(b){return{$$typeof:ob,value:b}},n.deferredUpdates=function(b){var S=xn,R=ui.transition;try{return ui.transition=null,xn=16,b()}finally{xn=S,ui.transition=R}},n.discreteUpdates=function(b,S,R,L,H){var Z=xn,Me=ui.transition;try{return ui.transition=null,xn=1,b(S,R,L,H)}finally{xn=Z,ui.transition=Me,gn===0&&Zh()}},n.findAllNodes=ER,n.findBoundingRects=function(b,S){if(!$)throw Error(o(363));S=ER(b,S),b=[];for(var R=0;R<S.length;R++)b.push(ae(S[R]));for(S=b.length-1;0<S;S--){R=b[S];for(var L=R.x,H=L+R.width,Z=R.y,Me=Z+R.height,Ue=S-1;0<=Ue;Ue--)if(S!==Ue){var Je=b[Ue],pt=Je.x,At=pt+Je.width,sn=Je.y,qt=sn+Je.height;if(L>=pt&&Z>=sn&&H<=At&&Me<=qt){b.splice(S,1);break}else if(L!==pt||R.width!==Je.width||qt<Z||sn>Me){if(!(Z!==sn||R.height!==Je.height||At<L||pt>H)){pt>L&&(Je.width+=pt-L,Je.x=L),At<H&&(Je.width=H-pt),b.splice(S,1);break}}else{sn>Z&&(Je.height+=sn-Z,Je.y=Z),qt<Me&&(Je.height=Me-sn),b.splice(S,1);break}}}return b},n.findHostInstance=BB,n.findHostInstanceWithNoPortals=function(b){return b=P(b),b=b!==null?q(b):null,b===null?null:b.stateNode},n.findHostInstanceWithWarning=function(b){return BB(b)},n.flushControlled=function(b){var S=gn;gn|=1;var R=ui.transition,L=xn;try{ui.transition=null,xn=1,b()}finally{xn=L,ui.transition=R,gn=S,gn===0&&(Zh(),ys())}},n.flushPassiveEffects=Jp,n.flushSync=NB,n.focusWithin=function(b,S){if(!$)throw Error(o(363));for(b=wR(b),S=EB(b,S),S=Array.from(S),b=0;b<S.length;){var R=S[b++];if(!_e(R)){if(R.tag===5&&Pe(R.stateNode))return!0;for(R=R.child;R!==null;)S.push(R),R=R.sibling}}return!1},n.getCurrentUpdatePriority=function(){return xn},n.getFindAllNodesFailureDescription=function(b,S){if(!$)throw Error(o(363));var R=0,L=[];b=[wR(b),0];for(var H=0;H<b.length;){var Z=b[H++],Me=b[H++],Ue=S[Me];if((Z.tag!==5||!_e(Z))&&(_R(Z,Ue)&&(L.push(MR(Ue)),Me++,Me>R&&(R=Me)),Me<S.length))for(Z=Z.child;Z!==null;)b.push(Z,Me),Z=Z.sibling}if(R<S.length){for(b=[];R<S.length;R++)b.push(MR(S[R]));return`findAllNodes was able to match part of the selector:
  `+(L.join(" > ")+`

No matching component was found for:
  `)+b.join(" > ")}return null},n.getPublicRootInstance=function(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 5:return G(b.child.stateNode);default:return b.child.stateNode}},n.injectIntoDevTools=function(b){if(b={bundleType:b.bundleType,version:b.version,rendererPackageName:b.rendererPackageName,rendererConfig:b.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:ene,findFiberByHostInstance:b.findFiberByHostInstance||tne,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")b=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)b=!0;else{try{qp=S.inject(b),Us=S}catch{}b=!!S.checkDCE}}return b},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(b,S,R,L){if(!$)throw Error(o(363));b=ER(b,S);var H=Te(b,R,L).disconnect;return{disconnect:function(){H()}}},n.registerMutableSourceForHydration=function(b,S){var R=S._getVersion;R=R(S._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[S,R]:b.mutableSourceEagerHydrationData.push(S,R)},n.runWithPriority=function(b,S){var R=xn;try{return xn=b,S()}finally{xn=R}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(b,S,R,L){var H=S.current,Z=Za(),Me=uf(H);return R=FB(R),S.context===null?S.context=R:S.pendingContext=R,S=Ll(Z,Me),S.payload={element:b},L=L===void 0?null:L,L!==null&&(S.callback=L),af(H,S),b=To(H,Me,Z),b!==null&&Lx(b,H,Me),Me},n};Zee.exports=hPe;var mPe=Zee.exports;const vPe=Au(mPe);var Jee={exports:{}},Kee={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,O){var W=k.length;k.push(O);e:for(;0<W;){var X=W-1>>>1,ee=k[X];if(0<a(ee,O))k[X]=O,k[W]=ee,W=X;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var O=k[0],W=k.pop();if(W!==O){k[0]=W;e:for(var X=0,ee=k.length,J=ee>>>1;X<J;){var Y=2*(X+1)-1,ie=k[Y],K=Y+1,re=k[K];if(0>a(ie,W))K<ee&&0>a(re,ie)?(k[X]=re,k[K]=W,X=K):(k[X]=ie,k[Y]=W,X=Y);else if(K<ee&&0>a(re,W))k[X]=re,k[K]=W,X=K;else break e}}return O}function a(k,O){var W=k.sortIndex-O.sortIndex;return W!==0?W:k.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var l=[],f=[],c=1,p=null,d=3,h=!1,m=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(k){for(var O=n(f);O!==null;){if(O.callback===null)r(f);else if(O.startTime<=k)r(f),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(f)}}function M(k){if(v=!1,x(k),!m)if(n(l)!==null)m=!0,G(A);else{var O=n(f);O!==null&&F(M,O.startTime-k)}}function A(k,O){m=!1,v&&(v=!1,y(D),D=-1),h=!0;var W=d;try{for(x(O),p=n(l);p!==null&&(!(p.expirationTime>O)||k&&!P());){var X=p.callback;if(typeof X=="function"){p.callback=null,d=p.priorityLevel;var ee=X(p.expirationTime<=O);O=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(l)&&r(l),x(O)}else r(l);p=n(l)}if(p!==null)var J=!0;else{var Y=n(f);Y!==null&&F(M,Y.startTime-O),J=!1}return J}finally{p=null,d=W,h=!1}}var E=!1,N=null,D=-1,C=5,T=-1;function P(){return!(t.unstable_now()-T<C)}function I(){if(N!==null){var k=t.unstable_now();T=k;var O=!0;try{O=N(!0,k)}finally{O?U():(E=!1,N=null)}}else E=!1}var U;if(typeof _=="function")U=function(){_(I)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,z=q.port2;q.port1.onmessage=I,U=function(){z.postMessage(null)}}else U=function(){g(I,0)};function G(k){N=k,E||(E=!0,U())}function F(k,O){D=g(function(){k(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,G(A))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(k){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var W=d;d=O;try{return k()}finally{d=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,O){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var W=d;d=k;try{return O()}finally{d=W}},t.unstable_scheduleCallback=function(k,O,W){var X=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?X+W:X):W=X,k){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=W+ee,k={id:c++,callback:O,priorityLevel:k,startTime:W,expirationTime:ee,sortIndex:-1},W>X?(k.sortIndex=W,e(f,k),n(l)===null&&k===n(f)&&(v?(y(D),D=-1):v=!0,F(M,W-X))):(k.sortIndex=ee,e(l,k),m||h||(m=!0,G(A))),k},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(k){var O=d;return function(){var W=d;d=O;try{return k.apply(this,arguments)}finally{d=W}}}})(Kee);Jee.exports=Kee;var oH=Jee.exports;const fF={},gPe=t=>void Object.assign(fF,t);function yPe(t,e){function n(c,{args:p=[],attach:d,...h},m){let v=`${c[0].toUpperCase()}${c.slice(1)}`,g;if(c==="primitive"){if(h.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=h.object;g=O0(y,{type:c,root:m,attach:d,primitive:!0})}else{const y=fF[v];if(!y)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");g=O0(new y(...p),{type:c,root:m,attach:d,memoizedProps:{args:p}})}return g.__r3f.attach===void 0&&(g instanceof fn?g.__r3f.attach="geometry":g instanceof va&&(g.__r3f.attach="material")),v!=="inject"&&SP(g,h),g}function r(c,p){let d=!1;if(p){var h,m;(h=p.__r3f)!=null&&h.attach?bP(c,p,p.__r3f.attach):p.isObject3D&&c.isObject3D&&(c.add(p),d=!0),d||(m=c.__r3f)==null||m.objects.push(p),p.__r3f||O0(p,{}),p.__r3f.parent=c,IL(p),L0(p)}}function a(c,p,d){let h=!1;if(p){var m,v;if((m=p.__r3f)!=null&&m.attach)bP(c,p,p.__r3f.attach);else if(p.isObject3D&&c.isObject3D){p.parent=c,p.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:p});const g=c.children.filter(_=>_!==p),y=g.indexOf(d);c.children=[...g.slice(0,y),p,...g.slice(y)],h=!0}h||(v=c.__r3f)==null||v.objects.push(p),p.__r3f||O0(p,{}),p.__r3f.parent=c,IL(p),L0(p)}}function s(c,p,d=!1){c&&[...c].forEach(h=>o(p,h,d))}function o(c,p,d){if(p){var h,m,v;if(p.__r3f&&(p.__r3f.parent=null),(h=c.__r3f)!=null&&h.objects&&(c.__r3f.objects=c.__r3f.objects.filter(M=>M!==p)),(m=p.__r3f)!=null&&m.attach)pH(c,p,p.__r3f.attach);else if(p.isObject3D&&c.isObject3D){var g;c.remove(p),(g=p.__r3f)!=null&&g.root&&TPe(w2(p),p)}const _=(v=p.__r3f)==null?void 0:v.primitive,x=!_&&(d===void 0?p.dispose!==null:d);if(!_){var y;s((y=p.__r3f)==null?void 0:y.objects,p,x),s(p.children,p,x)}if(delete p.__r3f,x&&p.dispose&&p.type!=="Scene"){const M=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?oH.unstable_scheduleCallback(oH.unstable_IdlePriority,M):M()}L0(c)}}function u(c,p,d,h){var m;const v=(m=c.__r3f)==null?void 0:m.parent;if(!v)return;const g=n(p,d,c.__r3f.root);if(c.children){for(const y of c.children)y.__r3f&&r(g,y);c.children=c.children.filter(y=>!y.__r3f)}c.__r3f.objects.forEach(y=>r(g,y)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(v,c),g.parent&&(g.__r3f.autoRemovedBeforeAppend=!0),r(v,g),g.raycast&&g.__r3f.eventCount&&w2(g).getState().internal.interaction.push(g),[h,h.alternate].forEach(y=>{y!==null&&(y.stateNode=g,y.ref&&(typeof y.ref=="function"?y.ref(g):y.ref.current=g))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:vPe({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:a,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,p)=>{if(!p)return;const d=c.getState().scene;d.__r3f&&(d.__r3f.root=c,r(d,p))},removeChildFromContainer:(c,p)=>{p&&o(c.getState().scene,p)},insertInContainerBefore:(c,p,d)=>{if(!p||!d)return;const h=c.getState().scene;h.__r3f&&a(h,p,d)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var p;return!!((p=c==null?void 0:c.__r3f)!=null?p:{}).handlers},prepareUpdate(c,p,d,h){var m;if(((m=c==null?void 0:c.__r3f)!=null?m:{}).primitive&&h.object&&h.object!==c)return[!0];{const{args:g=[],children:y,..._}=h,{args:x=[],children:M,...A}=d;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((N,D)=>N!==x[D]))return[!0];const E=ste(c,_,A,!0);return E.changes.length?[!1,E]:null}},commitUpdate(c,[p,d],h,m,v,g){p?u(c,h,v,g):SP(c,d)},commitMount(c,p,d,h){var m;const v=(m=c.__r3f)!=null?m:{};c.raycast&&v.handlers&&v.eventCount&&w2(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>O0(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var p;const{attach:d,parent:h}=(p=c.__r3f)!=null?p:{};d&&h&&pH(h,c,d),c.isObject3D&&(c.visible=!1),L0(c)},unhideInstance(c,p){var d;const{attach:h,parent:m}=(d=c.__r3f)!=null?d:{};h&&m&&bP(m,c,h),(c.isObject3D&&p.visible==null||p.visible)&&(c.visible=!0),L0(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():nm.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Cr.fun(performance.now)?performance.now:Cr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Cr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Cr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:SP}}var uH,lH;const xP=t=>"colorSpace"in t||"outputColorSpace"in t,ete=()=>{var t;return(t=fF.ColorManagement)!=null?t:null},tte=t=>t&&t.isOrthographicCamera,xPe=t=>t&&t.hasOwnProperty("current"),Nx=typeof window<"u"&&((uH=window.document)!=null&&uH.createElement||((lH=window.navigator)==null?void 0:lH.product)==="ReactNative")?Ge.useLayoutEffect:Ge.useEffect;function nte(t){const e=Ge.useRef(t);return Nx(()=>void(e.current=t),[t]),e}function bPe({set:t}){return Nx(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class rte extends Ge.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}rte.getDerivedStateFromError=()=>({error:!0});const ite="__default",cH=new Map,SPe=t=>t&&!!t.memoized&&!!t.changes;function ate(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const yg=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function w2(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Cr={obj:t=>t===Object(t)&&!Cr.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:a=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Cr.str(t)||Cr.num(t)||Cr.boo(t))return t===e;const s=Cr.obj(t);if(s&&r==="reference")return t===e;const o=Cr.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let u;for(u in t)if(!(u in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(u in a?e:t)if(!Cr.equ(t[u],e[u],{strict:a,objects:"reference"}))return!1}else for(u in a?e:t)if(t[u]!==e[u])return!1;if(Cr.und(u)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function wPe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function O0(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function RL(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),a=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:a}}else return{target:n,key:e}}const fH=/-\d+$/;function bP(t,e,n){if(Cr.str(n)){if(fH.test(n)){const s=n.replace(fH,""),{target:o,key:u}=RL(t,s);Array.isArray(o[u])||(o[u]=[])}const{target:r,key:a}=RL(t,n);e.__r3f.previousAttach=r[a],r[a]=e}else e.__r3f.previousAttach=n(t,e)}function pH(t,e,n){var r,a;if(Cr.str(n)){const{target:s,key:o}=RL(t,n),u=e.__r3f.previousAttach;u===void 0?delete s[o]:s[o]=u}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(a=e.__r3f)==null||delete a.previousAttach}function ste(t,{children:e,key:n,ref:r,...a},{children:s,key:o,ref:u,...l}={},f=!1){const c=t.__r3f,p=Object.entries(a),d=[];if(f){const m=Object.keys(l);for(let v=0;v<m.length;v++)a.hasOwnProperty(m[v])||p.unshift([m[v],ite+"remove"])}p.forEach(([m,v])=>{var g;if((g=t.__r3f)!=null&&g.primitive&&m==="object"||Cr.equ(v,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return d.push([m,v,!0,[]]);let y=[];m.includes("-")&&(y=m.split("-")),d.push([m,v,!1,y]);for(const _ in a){const x=a[_];_.startsWith(`${m}-`)&&d.push([_,x,!1,_.split("-")])}});const h={...a};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(h.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(h.attach=c.memoizedProps.attach),{memoized:h,changes:d}}const _Pe=typeof process<"u"&&!1;function SP(t,e){var n;const r=t.__r3f,a=r==null?void 0:r.root,s=a==null||a.getState==null?void 0:a.getState(),{memoized:o,changes:u}=SPe(e)?e:ste(t,e),l=r==null?void 0:r.eventCount;t.__r3f&&(t.__r3f.memoizedProps=o);for(let c=0;c<u.length;c++){let[p,d,h,m]=u[c];if(xP(t)){const _="srgb",x="srgb-linear";p==="encoding"?(p="colorSpace",d=d===3001?_:x):p==="outputEncoding"&&(p="outputColorSpace",d=d===3001?_:x)}let v=t,g=v[p];if(m.length&&(g=m.reduce((y,_)=>y[_],t),!(g&&g.set))){const[y,..._]=m.reverse();v=_.reverse().reduce((x,M)=>x[M],t),p=y}if(d===ite+"remove")if(v.constructor){let y=cH.get(v.constructor);y||(y=new v.constructor,cH.set(v.constructor,y)),d=y[p]}else d=0;if(h&&r)d?r.handlers[p]=d:delete r.handlers[p],r.eventCount=Object.keys(r.handlers).length;else if(g&&g.set&&(g.copy||g instanceof qd)){if(Array.isArray(d))g.fromArray?g.fromArray(d):g.set(...d);else if(g.copy&&d&&d.constructor&&(_Pe?g.constructor.name===d.constructor.name:g.constructor===d.constructor))g.copy(d);else if(d!==void 0){const y=g instanceof gt;!y&&g.setScalar?g.setScalar(d):g instanceof qd&&d instanceof qd?g.mask=d.mask:g.set(d),!ete()&&s&&!s.linear&&y&&g.convertSRGBToLinear()}}else if(v[p]=d,v[p]instanceof Ur&&v[p].format===Ra&&v[p].type===Mu&&s){const y=v[p];xP(y)&&xP(s.gl)?y.colorSpace=s.gl.outputColorSpace:y.encoding=s.gl.outputEncoding}L0(t)}if(r&&r.parent&&t.raycast&&l!==r.eventCount){const c=w2(t).getState().internal,p=c.interaction.indexOf(t);p>-1&&c.interaction.splice(p,1),r.eventCount&&c.interaction.push(t)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(n=t.__r3f)!=null&&n.parent&&IL(t),t}function L0(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function IL(t){t.onUpdate==null||t.onUpdate(t)}function MPe(t,e){t.manual||(tte(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function GS(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function EPe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return nm.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return nm.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return nm.ContinuousEventPriority;default:return nm.DefaultEventPriority}}function ote(t,e,n,r){const a=n.get(e);a&&(n.delete(e),n.size===0&&(t.delete(r),a.target.releasePointerCapture(r)))}function TPe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,a)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(a)}),n.capturedMap.forEach((r,a)=>{ote(n.capturedMap,e,r,a)})}function APe(t){function e(l){const{internal:f}=t.getState(),c=l.offsetX-f.initialClick[0],p=l.offsetY-f.initialClick[1];return Math.round(Math.sqrt(c*c+p*p))}function n(l){return l.filter(f=>["Move","Over","Enter","Out","Leave"].some(c=>{var p;return(p=f.__r3f)==null?void 0:p.handlers["onPointer"+c]}))}function r(l,f){const c=t.getState(),p=new Set,d=[],h=f?f(c.internal.interaction):c.internal.interaction;for(let y=0;y<h.length;y++){const _=yg(h[y]);_&&(_.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function m(y){const _=yg(y);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var x;_.events.compute==null||_.events.compute(l,_,(x=_.previousRoot)==null?void 0:x.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(y,!0):[]}let v=h.flatMap(m).sort((y,_)=>{const x=yg(y.object),M=yg(_.object);return!x||!M?y.distance-_.distance:M.events.priority-x.events.priority||y.distance-_.distance}).filter(y=>{const _=GS(y);return p.has(_)?!1:(p.add(_),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const y of v){let _=y.object;for(;_;){var g;(g=_.__r3f)!=null&&g.eventCount&&d.push({...y,eventObject:_}),_=_.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let y of c.internal.capturedMap.get(l.pointerId).values())p.has(GS(y.intersection))||d.push(y.intersection);return d}function a(l,f,c,p){const d=t.getState();if(l.length){const h={stopped:!1};for(const m of l){const v=yg(m.object)||d,{raycaster:g,pointer:y,camera:_,internal:x}=v,M=new ge(y.x,y.y,0).unproject(_),A=T=>{var P,I;return(P=(I=x.capturedMap.get(T))==null?void 0:I.has(m.eventObject))!=null?P:!1},E=T=>{const P={intersection:m,target:f.target};x.capturedMap.has(T)?x.capturedMap.get(T).set(m.eventObject,P):x.capturedMap.set(T,new Map([[m.eventObject,P]])),f.target.setPointerCapture(T)},N=T=>{const P=x.capturedMap.get(T);P&&ote(x.capturedMap,m.eventObject,P,T)};let D={};for(let T in f){let P=f[T];typeof P!="function"&&(D[T]=P)}let C={...m,...D,pointer:y,intersections:l,stopped:h.stopped,delta:c,unprojectedPoint:M,ray:g.ray,camera:_,stopPropagation(){const T="pointerId"in f&&x.capturedMap.get(f.pointerId);if((!T||T.has(m.eventObject))&&(C.stopped=h.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(P=>P.eventObject===m.eventObject))){const P=l.slice(0,l.indexOf(m));s([...P,m])}},target:{hasPointerCapture:A,setPointerCapture:E,releasePointerCapture:N},currentTarget:{hasPointerCapture:A,setPointerCapture:E,releasePointerCapture:N},nativeEvent:f};if(p(C),h.stopped===!0)break}}return l}function s(l){const{internal:f}=t.getState();for(const c of f.hovered.values())if(!l.length||!l.find(p=>p.object===c.object&&p.index===c.index&&p.instanceId===c.instanceId)){const d=c.eventObject.__r3f,h=d==null?void 0:d.handlers;if(f.hovered.delete(GS(c)),d!=null&&d.eventCount){const m={...c,intersections:l};h.onPointerOut==null||h.onPointerOut(m),h.onPointerLeave==null||h.onPointerLeave(m)}}}function o(l,f){for(let c=0;c<f.length;c++){const p=f[c].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function u(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:c}=t.getState();"pointerId"in f&&c.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(f.pointerId)&&(c.capturedMap.delete(f.pointerId),s([]))})}}return function(c){const{onPointerMissed:p,internal:d}=t.getState();d.lastEvent.current=c;const h=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",g=r(c,h?n:void 0),y=m?e(c):0;l==="onPointerDown"&&(d.initialClick=[c.offsetX,c.offsetY],d.initialHits=g.map(x=>x.eventObject)),m&&!g.length&&y<=2&&(o(c,d.interaction),p&&p(c)),h&&s(g);function _(x){const M=x.eventObject,A=M.__r3f,E=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(h){if(E.onPointerOver||E.onPointerEnter||E.onPointerOut||E.onPointerLeave){const N=GS(x),D=d.hovered.get(N);D?D.stopped&&x.stopPropagation():(d.hovered.set(N,x),E.onPointerOver==null||E.onPointerOver(x),E.onPointerEnter==null||E.onPointerEnter(x))}E.onPointerMove==null||E.onPointerMove(x)}else{const N=E[l];N?(!m||d.initialHits.includes(M))&&(o(c,d.interaction.filter(D=>!d.initialHits.includes(D))),N(x)):m&&d.initialHits.includes(M)&&o(c,d.interaction.filter(D=>!d.initialHits.includes(D)))}}a(g,c,y,_)}}return{handlePointer:u}}const ute=t=>!!(t!=null&&t.render),lte=Ge.createContext(null),NPe=(t,e)=>{const n=oPe((u,l)=>{const f=new ge,c=new ge,p=new ge;function d(y=l().camera,_=c,x=l().size){const{width:M,height:A,top:E,left:N}=x,D=M/A;_ instanceof ge?p.copy(_):p.set(..._);const C=y.getWorldPosition(f).distanceTo(p);if(tte(y))return{width:M/y.zoom,height:A/y.zoom,top:E,left:N,factor:1,distance:C,aspect:D};{const T=y.fov*Math.PI/180,P=2*Math.tan(T/2)*C,I=P*(M/A);return{width:I,height:P,top:E,left:N,factor:M/I,distance:C,aspect:D}}}let h;const m=y=>u(_=>({performance:{..._.performance,current:y}})),v=new nt;return{set:u,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>t(l(),y),advance:(y,_)=>e(y,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new sF,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();h&&clearTimeout(h),y.performance.current!==y.performance.min&&m(y.performance.min),h=setTimeout(()=>m(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:y=>u(_=>({..._,events:{..._.events,...y}})),setSize:(y,_,x,M,A)=>{const E=l().camera,N={width:y,height:_,top:M||0,left:A||0,updateStyle:x};u(D=>({size:N,viewport:{...D.viewport,...d(E,c,N)}}))},setDpr:y=>u(_=>{const x=ate(y);return{viewport:{..._.viewport,dpr:x,initialDpr:_.viewport.initialDpr||x}}}),setFrameloop:(y="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,y!=="never"&&(_.start(),_.elapsedTime=0),u(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Ge.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,_,x)=>{const M=l().internal;return M.priority=M.priority+(_>0?1:0),M.subscribers.push({ref:y,priority:_,store:x}),M.subscribers=M.subscribers.sort((A,E)=>A.priority-E.priority),()=>{const A=l().internal;A!=null&&A.subscribers&&(A.priority=A.priority-(_>0?1:0),A.subscribers=A.subscribers.filter(E=>E.ref!==y))}}}}}),r=n.getState();let a=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:u,size:l,viewport:f,gl:c,set:p}=n.getState();if(l.width!==a.width||l.height!==a.height||f.dpr!==s){var d;a=l,s=f.dpr,MPe(u,l),c.setPixelRatio(f.dpr);const h=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,h)}u!==o&&(o=u,p(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(u)}})))}),n.subscribe(u=>t(u)),n};let HS,CPe=new Set,DPe=new Set,RPe=new Set;function wP(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function xg(t,e){switch(t){case"before":return wP(CPe,e);case"after":return wP(DPe,e);case"tail":return wP(RPe,e)}}let _P,MP;function EP(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),_P=e.internal.subscribers,HS=0;HS<_P.length;HS++)MP=_P[HS],MP.ref.current(MP.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function IPe(t){let e=!1,n=!1,r,a,s;function o(f){a=requestAnimationFrame(o),e=!0,r=0,xg("before",f),n=!0;for(const p of t.values()){var c;s=p.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((c=s.gl.xr)!=null&&c.isPresenting)&&(r+=EP(f,s))}if(n=!1,xg("after",f),r===0)return xg("tail",f),e=!1,cancelAnimationFrame(a)}function u(f,c=1){var p;if(!f)return t.forEach(d=>u(d.store.getState(),c));(p=f.gl.xr)!=null&&p.isPresenting||!f.internal.active||f.frameloop==="never"||(c>1?f.internal.frames=Math.min(60,f.internal.frames+c):n?f.internal.frames=2:f.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(f,c=!0,p,d){if(c&&xg("before",f),p)EP(f,p,d);else for(const h of t.values())EP(f,h.store.getState());c&&xg("after",f)}return{loop:o,invalidate:u,advance:l}}function cte(){const t=Ge.useContext(lte);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Yl(t=n=>n,e){return cte()(t,e)}function PPe(t,e=0){const n=cte(),r=n.getState().internal.subscribe,a=nte(t);return Nx(()=>r(a,e,n),[e,r,n]),null}const Hm=new Map,{invalidate:dH,advance:hH}=IPe(Hm),{reconciler:b_,applyProps:N0}=yPe(Hm,EPe),C0={objects:"shallow",strict:!1},OPe=(t,e)=>{const n=typeof t=="function"?t(e):t;return ute(n)?n:new nee({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function LPe(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:a,top:s,left:o,updateStyle:u=n}=e;return{width:r,height:a,top:s,left:o,updateStyle:u}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:a,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:a,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function kPe(t){const e=Hm.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,s=r||NPe(dH,hH),o=n||b_.createContainer(s,nm.ConcurrentRoot,null,!1,null,"",a,null);e||Hm.set(t,{fiber:o,store:s});let u,l=!1,f;return{configure(c={}){let{gl:p,size:d,scene:h,events:m,onCreated:v,shadows:g=!1,linear:y=!1,flat:_=!1,legacy:x=!1,orthographic:M=!1,frameloop:A="always",dpr:E=[1,2],performance:N,raycaster:D,camera:C,onPointerMissed:T}=c,P=s.getState(),I=P.gl;P.gl||P.set({gl:I=OPe(p,t)});let U=P.raycaster;U||P.set({raycaster:U=new Xee});const{params:q,...z}=D||{};if(Cr.equ(z,U,C0)||N0(U,{...z}),Cr.equ(q,U.params,C0)||N0(U,{params:{...U.params,...q}}),!P.camera||P.camera===f&&!Cr.equ(f,C,C0)){f=C;const W=C instanceof bx,X=W?C:M?new Qf(0,0,0,0,.1,1e3):new fi(75,0,.1,1e3);W||(X.position.z=5,C&&(N0(X,C),("aspect"in C||"left"in C||"right"in C||"bottom"in C||"top"in C)&&(X.manual=!0,X.updateProjectionMatrix())),!P.camera&&!(C!=null&&C.rotation)&&X.lookAt(0,0,0)),P.set({camera:X}),U.camera=X}if(!P.scene){let W;h instanceof v_?W=h:(W=new v_,h&&N0(W,h)),P.set({scene:O0(W)})}if(!P.xr){var G;const W=(J,Y)=>{const ie=s.getState();ie.frameloop!=="never"&&hH(J,!0,ie,Y)},X=()=>{const J=s.getState();J.gl.xr.enabled=J.gl.xr.isPresenting,J.gl.xr.setAnimationLoop(J.gl.xr.isPresenting?W:null),J.gl.xr.isPresenting||dH(J)},ee={connect(){const J=s.getState().gl;J.xr.addEventListener("sessionstart",X),J.xr.addEventListener("sessionend",X)},disconnect(){const J=s.getState().gl;J.xr.removeEventListener("sessionstart",X),J.xr.removeEventListener("sessionend",X)}};typeof((G=I.xr)==null?void 0:G.addEventListener)=="function"&&ee.connect(),P.set({xr:ee})}if(I.shadowMap){const W=I.shadowMap.enabled,X=I.shadowMap.type;if(I.shadowMap.enabled=!!g,Cr.boo(g))I.shadowMap.type=ey;else if(Cr.str(g)){var F;const ee={basic:tK,percentage:pD,soft:ey,variance:cu};I.shadowMap.type=(F=ee[g])!=null?F:ey}else Cr.obj(g)&&Object.assign(I.shadowMap,g);(W!==I.shadowMap.enabled||X!==I.shadowMap.type)&&(I.shadowMap.needsUpdate=!0)}const k=ete();k&&("enabled"in k?k.enabled=!x:"legacyMode"in k&&(k.legacyMode=x)),l||N0(I,{outputEncoding:y?3e3:3001,toneMapping:_?ol:w4}),P.legacy!==x&&P.set(()=>({legacy:x})),P.linear!==y&&P.set(()=>({linear:y})),P.flat!==_&&P.set(()=>({flat:_})),p&&!Cr.fun(p)&&!ute(p)&&!Cr.equ(p,I,C0)&&N0(I,p),m&&!P.events.handlers&&P.set({events:m(s)});const O=LPe(t,d);return Cr.equ(O,P.size,C0)||P.setSize(O.width,O.height,O.updateStyle,O.top,O.left),E&&P.viewport.dpr!==ate(E)&&P.setDpr(E),P.frameloop!==A&&P.setFrameloop(A),P.onPointerMissed||P.set({onPointerMissed:T}),N&&!Cr.equ(N,P.performance,C0)&&P.set(W=>({performance:{...W.performance,...N}})),u=v,l=!0,this},render(c){return l||this.configure(),b_.updateContainer(Mt.jsx(UPe,{store:s,children:c,onCreated:u,rootElement:t}),o,null,()=>{}),s},unmount(){fte(t)}}}function UPe({store:t,children:e,onCreated:n,rootElement:r}){return Nx(()=>{const a=t.getState();a.set(s=>({internal:{...s.internal,active:!0}})),n&&n(a),t.getState().events.connected||a.events.connect==null||a.events.connect(r)},[]),Mt.jsx(lte.Provider,{value:t,children:e})}function fte(t,e){const n=Hm.get(t),r=n==null?void 0:n.fiber;if(r){const a=n==null?void 0:n.store.getState();a&&(a.internal.active=!1),b_.updateContainer(null,r,null,()=>{a&&setTimeout(()=>{try{var s,o,u,l;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(u=a.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(l=a.gl)!=null&&l.xr&&a.xr.disconnect(),wPe(a),Hm.delete(t)}catch{}},500)})}}b_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ge.version});const TP={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function FPe(t){const{handlePointer:e}=APe(t);return{priority:1,enabled:!0,compute(n,r,a){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(TP).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:a}=t.getState();(n=a.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(a.lastEvent.current)},connect:n=>{var r;const{set:a,events:s}=t.getState();s.disconnect==null||s.disconnect(),a(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,u])=>{const[l,f]=TP[o];n.addEventListener(l,u,{passive:f})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var a;Object.entries((a=r.handlers)!=null?a:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[u]=TP[s];r.connected.removeEventListener(u,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}function PL(t,e,n){var r,a,s,o,u;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?r=setTimeout(l,e-c):(r=null,n||(u=t.apply(s,a),s=a=null))}var f=function(){s=this,a=arguments,o=Date.now();var c=n&&!r;return r||(r=setTimeout(l,e)),c&&(u=t.apply(s,a),s=a=null),u};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(u=t.apply(s,a),s=a=null,clearTimeout(r),r=null)},f}PL.debounce=PL;var BPe=PL;const mH=Au(BPe);var zPe=Object.defineProperty,qPe=Object.defineProperties,GPe=Object.getOwnPropertyDescriptors,vH=Object.getOwnPropertySymbols,HPe=Object.prototype.hasOwnProperty,VPe=Object.prototype.propertyIsEnumerable,gH=(t,e,n)=>e in t?zPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yH=(t,e)=>{for(var n in e||(e={}))HPe.call(e,n)&&gH(t,n,e[n]);if(vH)for(var n of vH(e))VPe.call(e,n)&&gH(t,n,e[n]);return t},WPe=(t,e)=>qPe(t,GPe(e)),xH,bH;typeof window<"u"&&((xH=window.document)!=null&&xH.createElement||((bH=window.navigator)==null?void 0:bH.product)==="ReactNative")?Ge.useLayoutEffect:Ge.useEffect;function pte(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const a=pte(r,e,n);if(a)return a;r=r.sibling}}function dte(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const SH=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=SH;return}return SH.apply(this,arguments)};const pF=dte(Ge.createContext(null));class hte extends Ge.Component{render(){return Ge.createElement(pF.Provider,{value:this._reactInternals},this.props.children)}}function $Pe(){const t=Ge.useContext(pF);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ge.useId();return Ge.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const a=pte(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(a)return a}},[t,e])}function jPe(){const t=$Pe(),[e]=Ge.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const a=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;a&&a!==pF&&!e.has(a)&&e.set(a,Ge.useContext(dte(a)))}n=n.return}return e}function XPe(){const t=jPe();return Ge.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>Ge.createElement(e,null,Ge.createElement(n.Provider,WPe(yH({},r),{value:t.get(n)}))),e=>Ge.createElement(hte,yH({},e))),[t])}function YPe({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const a=n||typeof window<"u"&&window.ResizeObserver,[s,o]=Ge.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!a)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const u=Ge.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),l=t?typeof t=="number"?t:t.scroll:null,f=t?typeof t=="number"?t:t.resize:null,c=Ge.useRef(!1);Ge.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[p,d,h]=Ge.useMemo(()=>{const y=()=>{if(!u.current.element)return;const{left:_,top:x,width:M,height:A,bottom:E,right:N,x:D,y:C}=u.current.element.getBoundingClientRect(),T={left:_,top:x,width:M,height:A,bottom:E,right:N,x:D,y:C};u.current.element instanceof HTMLElement&&r&&(T.height=u.current.element.offsetHeight,T.width=u.current.element.offsetWidth),Object.freeze(T),c.current&&!KPe(u.current.lastBounds,T)&&o(u.current.lastBounds=T)};return[y,f?mH(y,f):y,l?mH(y,l):y]},[o,r,l,f]);function m(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",h,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function v(){u.current.element&&(u.current.resizeObserver=new a(h),u.current.resizeObserver.observe(u.current.element),e&&u.current.scrollContainers&&u.current.scrollContainers.forEach(y=>y.addEventListener("scroll",h,{capture:!0,passive:!0})))}const g=y=>{!y||y===u.current.element||(m(),u.current.element=y,u.current.scrollContainers=mte(y),v())};return ZPe(h,!!e),QPe(d),Ge.useEffect(()=>{m(),v()},[e,h,d]),Ge.useEffect(()=>m,[]),[g,s,p]}function QPe(t){Ge.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function ZPe(t,e){Ge.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function mte(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:a}=window.getComputedStyle(t);return[n,r,a].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...mte(t.parentElement)]}const JPe=["x","y","top","bottom","left","right","width","height"],KPe=(t,e)=>JPe.every(n=>t[n]===e[n]),eOe=Ge.forwardRef(function({children:e,fallback:n,resize:r,style:a,gl:s,events:o=FPe,eventSource:u,eventPrefix:l,shadows:f,linear:c,flat:p,legacy:d,orthographic:h,frameloop:m,dpr:v,performance:g,raycaster:y,camera:_,scene:x,onPointerMissed:M,onCreated:A,...E},N){Ge.useMemo(()=>gPe(iPe),[]);const D=XPe(),[C,T]=YPe({scroll:!0,debounce:{scroll:50,resize:0},...r}),P=Ge.useRef(null),I=Ge.useRef(null);Ge.useImperativeHandle(N,()=>P.current);const U=nte(M),[q,z]=Ge.useState(!1),[G,F]=Ge.useState(!1);if(q)throw q;if(G)throw G;const k=Ge.useRef(null);Nx(()=>{const W=P.current;T.width>0&&T.height>0&&W&&(k.current||(k.current=kPe(W)),k.current.configure({gl:s,events:o,shadows:f,linear:c,flat:p,legacy:d,orthographic:h,frameloop:m,dpr:v,performance:g,raycaster:y,camera:_,scene:x,size:T,onPointerMissed:(...X)=>U.current==null?void 0:U.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(u?xPe(u)?u.current:u:I.current),l&&X.setEvents({compute:(ee,J)=>{const Y=ee[l+"X"],ie=ee[l+"Y"];J.pointer.set(Y/J.size.width*2-1,-(ie/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),A==null||A(X)}}),k.current.render(Mt.jsx(D,{children:Mt.jsx(rte,{set:F,children:Mt.jsx(Ge.Suspense,{fallback:Mt.jsx(bPe,{set:z}),children:e})})})))}),Ge.useEffect(()=>{const W=P.current;if(W)return()=>fte(W)},[]);const O=u?"none":"auto";return Mt.jsx("div",{ref:I,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:O,...a},...E,children:Mt.jsx("div",{ref:C,style:{width:"100%",height:"100%"},children:Mt.jsx("canvas",{ref:P,style:{display:"block"},children:n})})})}),tOe=Ge.forwardRef(function(e,n){return Mt.jsx(hte,{children:Mt.jsx(eOe,{...e,ref:n})})});var nOe=Object.defineProperty,rOe=(t,e,n)=>e in t?nOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gt=(t,e,n)=>(rOe(t,typeof e!="symbol"?e+"":e,n),n);const VS=new Ph,wH=new ec,iOe=Math.cos(70*(Math.PI/180)),_H=(t,e)=>(t%e+e)%e;let aOe=class extends Lu{constructor(e,n){super(),Gt(this,"object"),Gt(this,"domElement"),Gt(this,"enabled",!0),Gt(this,"target",new ge),Gt(this,"minDistance",0),Gt(this,"maxDistance",1/0),Gt(this,"minZoom",0),Gt(this,"maxZoom",1/0),Gt(this,"minPolarAngle",0),Gt(this,"maxPolarAngle",Math.PI),Gt(this,"minAzimuthAngle",-1/0),Gt(this,"maxAzimuthAngle",1/0),Gt(this,"enableDamping",!1),Gt(this,"dampingFactor",.05),Gt(this,"enableZoom",!0),Gt(this,"zoomSpeed",1),Gt(this,"enableRotate",!0),Gt(this,"rotateSpeed",1),Gt(this,"enablePan",!0),Gt(this,"panSpeed",1),Gt(this,"screenSpacePanning",!0),Gt(this,"keyPanSpeed",7),Gt(this,"zoomToCursor",!1),Gt(this,"autoRotate",!1),Gt(this,"autoRotateSpeed",2),Gt(this,"reverseOrbit",!1),Gt(this,"reverseHorizontalOrbit",!1),Gt(this,"reverseVerticalOrbit",!1),Gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Gt(this,"mouseButtons",{LEFT:gd.ROTATE,MIDDLE:gd.DOLLY,RIGHT:gd.PAN}),Gt(this,"touches",{ONE:yd.ROTATE,TWO:yd.DOLLY_PAN}),Gt(this,"target0"),Gt(this,"position0"),Gt(this,"zoom0"),Gt(this,"_domElementKeyEvents",null),Gt(this,"getPolarAngle"),Gt(this,"getAzimuthalAngle"),Gt(this,"setPolarAngle"),Gt(this,"setAzimuthalAngle"),Gt(this,"getDistance"),Gt(this,"getZoomScale"),Gt(this,"listenToKeyEvents"),Gt(this,"stopListenToKeyEvents"),Gt(this,"saveState"),Gt(this,"reset"),Gt(this,"update"),Gt(this,"connect"),Gt(this,"dispose"),Gt(this,"dollyIn"),Gt(this,"dollyOut"),Gt(this,"getScale"),Gt(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=we=>{let V=_H(we,2*Math.PI),j=c.phi;j<0&&(j+=2*Math.PI),V<0&&(V+=2*Math.PI);let pe=Math.abs(V-j);2*Math.PI-pe<pe&&(V<j?V+=2*Math.PI:j+=2*Math.PI),p.phi=V-j,r.update()},this.setAzimuthalAngle=we=>{let V=_H(we,2*Math.PI),j=c.theta;j<0&&(j+=2*Math.PI),V<0&&(V+=2*Math.PI);let pe=Math.abs(V-j);2*Math.PI-pe<pe&&(V<j?V+=2*Math.PI:j+=2*Math.PI),p.theta=V-j,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=we=>{we.addEventListener("keydown",Ie),this._domElementKeyEvents=we},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ie),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(a),r.update(),l=u.NONE},this.update=(()=>{const we=new ge,V=new ge(0,1,0),j=new Oa().setFromUnitVectors(e.up,V),pe=j.clone().invert(),he=new ge,Ae=new Oa,Fe=2*Math.PI;return function(){const Ze=r.object.position;j.setFromUnitVectors(e.up,V),pe.copy(j).invert(),we.copy(Ze).sub(r.target),we.applyQuaternion(j),c.setFromVector3(we),r.autoRotate&&l===u.NONE&&q(I()),r.enableDamping?(c.theta+=p.theta*r.dampingFactor,c.phi+=p.phi*r.dampingFactor):(c.theta+=p.theta,c.phi+=p.phi);let it=r.minAzimuthAngle,ot=r.maxAzimuthAngle;isFinite(it)&&isFinite(ot)&&(it<-Math.PI?it+=Fe:it>Math.PI&&(it-=Fe),ot<-Math.PI?ot+=Fe:ot>Math.PI&&(ot-=Fe),it<=ot?c.theta=Math.max(it,Math.min(ot,c.theta)):c.theta=c.theta>(it+ot)/2?Math.max(it,c.theta):Math.min(ot,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.zoomToCursor&&C||r.object.isOrthographicCamera?c.radius=J(c.radius):c.radius=J(c.radius*d),we.setFromSpherical(c),we.applyQuaternion(pe),Ze.copy(r.target).add(we),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),h.set(0,0,0));let tt=!1;if(r.zoomToCursor&&C){let Nt=null;if(r.object instanceof fi&&r.object.isPerspectiveCamera){const Xt=we.length();Nt=J(Xt*d);const Ln=Xt-Nt;r.object.position.addScaledVector(N,Ln),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Xt=new ge(D.x,D.y,0);Xt.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),tt=!0;const Ln=new ge(D.x,D.y,0);Ln.unproject(r.object),r.object.position.sub(Ln).add(Xt),r.object.updateMatrixWorld(),Nt=we.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Nt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Nt).add(r.object.position):(VS.origin.copy(r.object.position),VS.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(VS.direction))<iOe?e.lookAt(r.target):(wH.setFromNormalAndCoplanarPoint(r.object.up,r.target),VS.intersectPlane(wH,r.target))))}else r.object instanceof Qf&&r.object.isOrthographicCamera&&(tt=d!==1,tt&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix()));return d=1,C=!1,tt||he.distanceToSquared(r.object.position)>f||8*(1-Ae.dot(r.object.quaternion))>f?(r.dispatchEvent(a),he.copy(r.object.position),Ae.copy(r.object.quaternion),tt=!1,!0):!1}})(),this.connect=we=>{r.domElement=we,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",He),r.domElement.addEventListener("pointerdown",ae),r.domElement.addEventListener("pointercancel",_e),r.domElement.addEventListener("wheel",Te)},this.dispose=()=>{var we,V,j,pe,he,Ae;r.domElement&&(r.domElement.style.touchAction="auto"),(we=r.domElement)==null||we.removeEventListener("contextmenu",He),(V=r.domElement)==null||V.removeEventListener("pointerdown",ae),(j=r.domElement)==null||j.removeEventListener("pointercancel",_e),(pe=r.domElement)==null||pe.removeEventListener("wheel",Te),(he=r.domElement)==null||he.ownerDocument.removeEventListener("pointermove",ue),(Ae=r.domElement)==null||Ae.ownerDocument.removeEventListener("pointerup",_e),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ie)};const r=this,a={type:"change"},s={type:"start"},o={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=u.NONE;const f=1e-6,c=new DL,p=new DL;let d=1;const h=new ge,m=new nt,v=new nt,g=new nt,y=new nt,_=new nt,x=new nt,M=new nt,A=new nt,E=new nt,N=new ge,D=new nt;let C=!1;const T=[],P={};function I(){return 2*Math.PI/60/60*r.autoRotateSpeed}function U(){return Math.pow(.95,r.zoomSpeed)}function q(we){r.reverseOrbit||r.reverseHorizontalOrbit?p.theta+=we:p.theta-=we}function z(we){r.reverseOrbit||r.reverseVerticalOrbit?p.phi+=we:p.phi-=we}const G=(()=>{const we=new ge;return function(j,pe){we.setFromMatrixColumn(pe,0),we.multiplyScalar(-j),h.add(we)}})(),F=(()=>{const we=new ge;return function(j,pe){r.screenSpacePanning===!0?we.setFromMatrixColumn(pe,1):(we.setFromMatrixColumn(pe,0),we.crossVectors(r.object.up,we)),we.multiplyScalar(j),h.add(we)}})(),k=(()=>{const we=new ge;return function(j,pe){const he=r.domElement;if(he&&r.object instanceof fi&&r.object.isPerspectiveCamera){const Ae=r.object.position;we.copy(Ae).sub(r.target);let Fe=we.length();Fe*=Math.tan(r.object.fov/2*Math.PI/180),G(2*j*Fe/he.clientHeight,r.object.matrix),F(2*pe*Fe/he.clientHeight,r.object.matrix)}else he&&r.object instanceof Qf&&r.object.isOrthographicCamera?(G(j*(r.object.right-r.object.left)/r.object.zoom/he.clientWidth,r.object.matrix),F(pe*(r.object.top-r.object.bottom)/r.object.zoom/he.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function O(we){r.object instanceof fi&&r.object.isPerspectiveCamera||r.object instanceof Qf&&r.object.isOrthographicCamera?d=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function W(we){O(d/we)}function X(we){O(d*we)}function ee(we){if(!r.zoomToCursor||!r.domElement)return;C=!0;const V=r.domElement.getBoundingClientRect(),j=we.clientX-V.left,pe=we.clientY-V.top,he=V.width,Ae=V.height;D.x=j/he*2-1,D.y=-(pe/Ae)*2+1,N.set(D.x,D.y,1).unproject(r.object).sub(r.object.position).normalize()}function J(we){return Math.max(r.minDistance,Math.min(r.maxDistance,we))}function Y(we){m.set(we.clientX,we.clientY)}function ie(we){ee(we),M.set(we.clientX,we.clientY)}function K(we){y.set(we.clientX,we.clientY)}function re(we){v.set(we.clientX,we.clientY),g.subVectors(v,m).multiplyScalar(r.rotateSpeed);const V=r.domElement;V&&(q(2*Math.PI*g.x/V.clientHeight),z(2*Math.PI*g.y/V.clientHeight)),m.copy(v),r.update()}function oe(we){A.set(we.clientX,we.clientY),E.subVectors(A,M),E.y>0?W(U()):E.y<0&&X(U()),M.copy(A),r.update()}function ce(we){_.set(we.clientX,we.clientY),x.subVectors(_,y).multiplyScalar(r.panSpeed),k(x.x,x.y),y.copy(_),r.update()}function me(we){ee(we),we.deltaY<0?X(U()):we.deltaY>0&&W(U()),r.update()}function Se(we){let V=!1;switch(we.code){case r.keys.UP:k(0,r.keyPanSpeed),V=!0;break;case r.keys.BOTTOM:k(0,-r.keyPanSpeed),V=!0;break;case r.keys.LEFT:k(r.keyPanSpeed,0),V=!0;break;case r.keys.RIGHT:k(-r.keyPanSpeed,0),V=!0;break}V&&(we.preventDefault(),r.update())}function le(){if(T.length==1)m.set(T[0].pageX,T[0].pageY);else{const we=.5*(T[0].pageX+T[1].pageX),V=.5*(T[0].pageY+T[1].pageY);m.set(we,V)}}function Q(){if(T.length==1)y.set(T[0].pageX,T[0].pageY);else{const we=.5*(T[0].pageX+T[1].pageX),V=.5*(T[0].pageY+T[1].pageY);y.set(we,V)}}function Ee(){const we=T[0].pageX-T[1].pageX,V=T[0].pageY-T[1].pageY,j=Math.sqrt(we*we+V*V);M.set(0,j)}function ne(){r.enableZoom&&Ee(),r.enablePan&&Q()}function se(){r.enableZoom&&Ee(),r.enableRotate&&le()}function xe(we){if(T.length==1)v.set(we.pageX,we.pageY);else{const j=je(we),pe=.5*(we.pageX+j.x),he=.5*(we.pageY+j.y);v.set(pe,he)}g.subVectors(v,m).multiplyScalar(r.rotateSpeed);const V=r.domElement;V&&(q(2*Math.PI*g.x/V.clientHeight),z(2*Math.PI*g.y/V.clientHeight)),m.copy(v)}function ve(we){if(T.length==1)_.set(we.pageX,we.pageY);else{const V=je(we),j=.5*(we.pageX+V.x),pe=.5*(we.pageY+V.y);_.set(j,pe)}x.subVectors(_,y).multiplyScalar(r.panSpeed),k(x.x,x.y),y.copy(_)}function te(we){const V=je(we),j=we.pageX-V.x,pe=we.pageY-V.y,he=Math.sqrt(j*j+pe*pe);A.set(0,he),E.set(0,Math.pow(A.y/M.y,r.zoomSpeed)),W(E.y),M.copy(A)}function $(we){r.enableZoom&&te(we),r.enablePan&&ve(we)}function B(we){r.enableZoom&&te(we),r.enableRotate&&xe(we)}function ae(we){var V,j;r.enabled!==!1&&(T.length===0&&((V=r.domElement)==null||V.ownerDocument.addEventListener("pointermove",ue),(j=r.domElement)==null||j.ownerDocument.addEventListener("pointerup",_e)),Qe(we),we.pointerType==="touch"?Oe(we):be(we))}function ue(we){r.enabled!==!1&&(we.pointerType==="touch"?Be(we):Pe(we))}function _e(we){var V,j,pe;et(we),T.length===0&&((V=r.domElement)==null||V.releasePointerCapture(we.pointerId),(j=r.domElement)==null||j.ownerDocument.removeEventListener("pointermove",ue),(pe=r.domElement)==null||pe.ownerDocument.removeEventListener("pointerup",_e)),r.dispatchEvent(o),l=u.NONE}function be(we){let V;switch(we.button){case 0:V=r.mouseButtons.LEFT;break;case 1:V=r.mouseButtons.MIDDLE;break;case 2:V=r.mouseButtons.RIGHT;break;default:V=-1}switch(V){case gd.DOLLY:if(r.enableZoom===!1)return;ie(we),l=u.DOLLY;break;case gd.ROTATE:if(we.ctrlKey||we.metaKey||we.shiftKey){if(r.enablePan===!1)return;K(we),l=u.PAN}else{if(r.enableRotate===!1)return;Y(we),l=u.ROTATE}break;case gd.PAN:if(we.ctrlKey||we.metaKey||we.shiftKey){if(r.enableRotate===!1)return;Y(we),l=u.ROTATE}else{if(r.enablePan===!1)return;K(we),l=u.PAN}break;default:l=u.NONE}l!==u.NONE&&r.dispatchEvent(s)}function Pe(we){if(r.enabled!==!1)switch(l){case u.ROTATE:if(r.enableRotate===!1)return;re(we);break;case u.DOLLY:if(r.enableZoom===!1)return;oe(we);break;case u.PAN:if(r.enablePan===!1)return;ce(we);break}}function Te(we){r.enabled===!1||r.enableZoom===!1||l!==u.NONE&&l!==u.ROTATE||(we.preventDefault(),r.dispatchEvent(s),me(we),r.dispatchEvent(o))}function Ie(we){r.enabled===!1||r.enablePan===!1||Se(we)}function Oe(we){switch(Xe(we),T.length){case 1:switch(r.touches.ONE){case yd.ROTATE:if(r.enableRotate===!1)return;le(),l=u.TOUCH_ROTATE;break;case yd.PAN:if(r.enablePan===!1)return;Q(),l=u.TOUCH_PAN;break;default:l=u.NONE}break;case 2:switch(r.touches.TWO){case yd.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ne(),l=u.TOUCH_DOLLY_PAN;break;case yd.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;se(),l=u.TOUCH_DOLLY_ROTATE;break;default:l=u.NONE}break;default:l=u.NONE}l!==u.NONE&&r.dispatchEvent(s)}function Be(we){switch(Xe(we),l){case u.TOUCH_ROTATE:if(r.enableRotate===!1)return;xe(we),r.update();break;case u.TOUCH_PAN:if(r.enablePan===!1)return;ve(we),r.update();break;case u.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;$(we),r.update();break;case u.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;B(we),r.update();break;default:l=u.NONE}}function He(we){r.enabled!==!1&&we.preventDefault()}function Qe(we){T.push(we)}function et(we){delete P[we.pointerId];for(let V=0;V<T.length;V++)if(T[V].pointerId==we.pointerId){T.splice(V,1);return}}function Xe(we){let V=P[we.pointerId];V===void 0&&(V=new nt,P[we.pointerId]=V),V.set(we.pageX,we.pageY)}function je(we){const V=we.pointerId===T[0].pointerId?T[1]:T[0];return P[V.pointerId]}this.dollyIn=(we=U())=>{X(we),r.update()},this.dollyOut=(we=U())=>{W(we),r.update()},this.getScale=()=>d,this.setScale=we=>{O(we),r.update()},this.getZoomScale=()=>U(),n!==void 0&&this.connect(n),this.update()}};function sOe(){var t=Object.create(null);function e(a,s){var o=a.id,u=a.name,l=a.dependencies;l===void 0&&(l=[]);var f=a.init;f===void 0&&(f=function(){});var c=a.getTransferables;if(c===void 0&&(c=null),!t[o])try{l=l.map(function(d){return d&&d.isWorkerModule&&(e(d,function(h){if(h instanceof Error)throw h}),d=t[d.id].value),d}),f=r("<"+u+">.init",f),c&&(c=r("<"+u+">.getTransferables",c));var p=null;typeof f=="function"?p=f.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:p,getTransferables:c},s(p)}catch(d){d&&d.noLog||console.error(d),s(d)}}function n(a,s){var o,u=a.id,l=a.args;(!t[u]||typeof t[u].value!="function")&&s(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var f=(o=t[u]).value.apply(o,l);f&&typeof f.then=="function"?f.then(c,function(p){return s(p instanceof Error?p:new Error(""+p))}):c(f)}catch(p){s(p)}function c(p){try{var d=t[u].getTransferables&&t[u].getTransferables(p);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),s(p,d)}catch(h){console.error(h),s(h)}}}function r(a,s){var o=void 0;self.troikaDefine=function(l){return o=l};var u=URL.createObjectURL(new Blob(["/** "+a.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(l){console.error(l)}return URL.revokeObjectURL(u),delete self.troikaDefine,o}self.addEventListener("message",function(a){var s=a.data,o=s.messageId,u=s.action,l=s.data;try{u==="registerModule"&&e(l,function(f){f instanceof Error?postMessage({messageId:o,success:!1,error:f.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof f=="function"}})}),u==="callModule"&&n(l,function(f,c){f instanceof Error?postMessage({messageId:o,success:!1,error:f.message}):postMessage({messageId:o,success:!0,result:f},c||void 0)})}catch(f){postMessage({messageId:o,success:!1,error:f.stack})}})}function oOe(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(a){if(typeof a=="function")return a.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var a=Promise.all(n).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return a},a},e}var vte=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return vte=function(){return t},t},uOe=0,lOe=0,AP=!1,cy=Object.create(null),fy=Object.create(null),OL=Object.create(null);function bv(t){if((!t||typeof t.init!="function")&&!AP)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,a=t.workerId;if(!vte())return oOe(t);a==null&&(a="#default");var s="workerModule"+ ++uOe,o=t.name||s,u=null;e=e&&e.map(function(f){return typeof f=="function"&&!f.workerModuleData&&(AP=!0,f=bv({workerId:a,name:"<"+o+"> function dependency: "+f.name,init:`function(){return (
`+_2(f)+`
)}`}),AP=!1),f&&f.workerModuleData&&(f=f.workerModuleData),f});function l(){for(var f=[],c=arguments.length;c--;)f[c]=arguments[c];if(!u){u=MH(a,"registerModule",l.workerModuleData);var p=function(){u=null,fy[a].delete(p)};(fy[a]||(fy[a]=new Set)).add(p)}return u.then(function(d){var h=d.isCallable;if(h)return MH(a,"callModule",{id:s,args:f});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:_2(n),getTransferables:r&&_2(r)},l}function cOe(t){fy[t]&&fy[t].forEach(function(e){e()}),cy[t]&&(cy[t].terminate(),delete cy[t])}function _2(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function fOe(t){var e=cy[t];if(!e){var n=_2(sOe);e=cy[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var a=r.data,s=a.messageId,o=OL[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete OL[s],o(a)}}return e}function MH(t,e,n){return new Promise(function(r,a){var s=++lOe;OL[s]=function(o){o.success?r(o.result):a(new Error("Error in worker "+e+" call: "+o.error))},fOe(t).postMessage({messageId:s,action:e,data:n})})}function gte(){var t=function(e){function n(O,W,X,ee,J,Y,ie,K){var re=1-ie;K.x=re*re*O+2*re*ie*X+ie*ie*J,K.y=re*re*W+2*re*ie*ee+ie*ie*Y}function r(O,W,X,ee,J,Y,ie,K,re,oe){var ce=1-re;oe.x=ce*ce*ce*O+3*ce*ce*re*X+3*ce*re*re*J+re*re*re*ie,oe.y=ce*ce*ce*W+3*ce*ce*re*ee+3*ce*re*re*Y+re*re*re*K}function a(O,W){for(var X=/([MLQCZ])([^MLQCZ]*)/g,ee,J,Y,ie,K;ee=X.exec(O);){var re=ee[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(oe){return parseFloat(oe)});switch(ee[1]){case"M":ie=J=re[0],K=Y=re[1];break;case"L":(re[0]!==ie||re[1]!==K)&&W("L",ie,K,ie=re[0],K=re[1]);break;case"Q":{W("Q",ie,K,ie=re[2],K=re[3],re[0],re[1]);break}case"C":{W("C",ie,K,ie=re[4],K=re[5],re[0],re[1],re[2],re[3]);break}case"Z":(ie!==J||K!==Y)&&W("L",ie,K,J,Y);break}}}function s(O,W,X){X===void 0&&(X=16);var ee={x:0,y:0};a(O,function(J,Y,ie,K,re,oe,ce,me,Se){switch(J){case"L":W(Y,ie,K,re);break;case"Q":{for(var le=Y,Q=ie,Ee=1;Ee<X;Ee++)n(Y,ie,oe,ce,K,re,Ee/(X-1),ee),W(le,Q,ee.x,ee.y),le=ee.x,Q=ee.y;break}case"C":{for(var ne=Y,se=ie,xe=1;xe<X;xe++)r(Y,ie,oe,ce,me,Se,K,re,xe/(X-1),ee),W(ne,se,ee.x,ee.y),ne=ee.x,se=ee.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,f={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(O,W){var X=O.getContext?O.getContext("webgl",f):O,ee=l.get(X);if(!ee){let ne=function(B){var ae=Y[B];if(!ae&&(ae=Y[B]=X.getExtension(B),!ae))throw new Error(B+" not supported");return ae},se=function(B,ae){var ue=X.createShader(ae);return X.shaderSource(ue,B),X.compileShader(ue),ue},xe=function(B,ae,ue,_e){if(!ie[B]){var be={},Pe={},Te=X.createProgram();X.attachShader(Te,se(ae,X.VERTEX_SHADER)),X.attachShader(Te,se(ue,X.FRAGMENT_SHADER)),X.linkProgram(Te),ie[B]={program:Te,transaction:function(Oe){X.useProgram(Te),Oe({setUniform:function(He,Qe){for(var et=[],Xe=arguments.length-2;Xe-- >0;)et[Xe]=arguments[Xe+2];var je=Pe[Qe]||(Pe[Qe]=X.getUniformLocation(Te,Qe));X["uniform"+He].apply(X,[je].concat(et))},setAttribute:function(He,Qe,et,Xe,je){var we=be[He];we||(we=be[He]={buf:X.createBuffer(),loc:X.getAttribLocation(Te,He),data:null}),X.bindBuffer(X.ARRAY_BUFFER,we.buf),X.vertexAttribPointer(we.loc,Qe,X.FLOAT,!1,0,0),X.enableVertexAttribArray(we.loc),J?X.vertexAttribDivisor(we.loc,Xe):ne("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(we.loc,Xe),je!==we.data&&(X.bufferData(X.ARRAY_BUFFER,je,et),we.data=je)}})}}}ie[B].transaction(_e)},ve=function(B,ae){re++;try{X.activeTexture(X.TEXTURE0+re);var ue=K[B];ue||(ue=K[B]=X.createTexture(),X.bindTexture(X.TEXTURE_2D,ue),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.NEAREST),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.NEAREST)),X.bindTexture(X.TEXTURE_2D,ue),ae(ue,re)}finally{re--}},te=function(B,ae,ue){var _e=X.createFramebuffer();oe.push(_e),X.bindFramebuffer(X.FRAMEBUFFER,_e),X.activeTexture(X.TEXTURE0+ae),X.bindTexture(X.TEXTURE_2D,B),X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,B,0);try{ue(_e)}finally{X.deleteFramebuffer(_e),X.bindFramebuffer(X.FRAMEBUFFER,oe[--oe.length-1]||null)}},$=function(){Y={},ie={},K={},re=-1,oe.length=0};var ce=ne,me=se,Se=xe,le=ve,Q=te,Ee=$,J=typeof WebGL2RenderingContext<"u"&&X instanceof WebGL2RenderingContext,Y={},ie={},K={},re=-1,oe=[];X.canvas.addEventListener("webglcontextlost",function(B){$(),B.preventDefault()},!1),l.set(X,ee={gl:X,isWebGL2:J,getExtension:ne,withProgram:xe,withTexture:ve,withTextureFramebuffer:te,handleContextLoss:$})}W(ee)}function p(O,W,X,ee,J,Y,ie,K){ie===void 0&&(ie=15),K===void 0&&(K=null),c(O,function(re){var oe=re.gl,ce=re.withProgram,me=re.withTexture;me("copy",function(Se,le){oe.texImage2D(oe.TEXTURE_2D,0,oe.RGBA,J,Y,0,oe.RGBA,oe.UNSIGNED_BYTE,W),ce("copy",o,u,function(Q){var Ee=Q.setUniform,ne=Q.setAttribute;ne("aUV",2,oe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Ee("1i","image",le),oe.bindFramebuffer(oe.FRAMEBUFFER,K||null),oe.disable(oe.BLEND),oe.colorMask(ie&8,ie&4,ie&2,ie&1),oe.viewport(X,ee,J,Y),oe.scissor(X,ee,J,Y),oe.drawArrays(oe.TRIANGLES,0,3)})})})}function d(O,W,X){var ee=O.width,J=O.height;c(O,function(Y){var ie=Y.gl,K=new Uint8Array(ee*J*4);ie.readPixels(0,0,ee,J,ie.RGBA,ie.UNSIGNED_BYTE,K),O.width=W,O.height=X,p(ie,K,0,0,ee,J)})}var h=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:p,resizeWebGLCanvasWithoutClearing:d});function m(O,W,X,ee,J,Y){Y===void 0&&(Y=1);var ie=new Uint8Array(O*W),K=ee[2]-ee[0],re=ee[3]-ee[1],oe=[];s(X,function(ne,se,xe,ve){oe.push({x1:ne,y1:se,x2:xe,y2:ve,minX:Math.min(ne,xe),minY:Math.min(se,ve),maxX:Math.max(ne,xe),maxY:Math.max(se,ve)})}),oe.sort(function(ne,se){return ne.maxX-se.maxX});for(var ce=0;ce<O;ce++)for(var me=0;me<W;me++){var Se=Q(ee[0]+K*(ce+.5)/O,ee[1]+re*(me+.5)/W),le=Math.pow(1-Math.abs(Se)/J,Y)/2;Se<0&&(le=1-le),le=Math.max(0,Math.min(255,Math.round(le*255))),ie[me*O+ce]=le}return ie;function Q(ne,se){for(var xe=1/0,ve=1/0,te=oe.length;te--;){var $=oe[te];if($.maxX+ve<=ne)break;if(ne+ve>$.minX&&se-ve<$.maxY&&se+ve>$.minY){var B=y(ne,se,$.x1,$.y1,$.x2,$.y2);B<xe&&(xe=B,ve=Math.sqrt(xe))}}return Ee(ne,se)&&(ve=-ve),ve}function Ee(ne,se){for(var xe=0,ve=oe.length;ve--;){var te=oe[ve];if(te.maxX<=ne)break;var $=te.y1>se!=te.y2>se&&ne<(te.x2-te.x1)*(se-te.y1)/(te.y2-te.y1)+te.x1;$&&(xe+=te.y1<te.y2?1:-1)}return xe!==0}}function v(O,W,X,ee,J,Y,ie,K,re,oe){Y===void 0&&(Y=1),K===void 0&&(K=0),re===void 0&&(re=0),oe===void 0&&(oe=0),g(O,W,X,ee,J,Y,ie,null,K,re,oe)}function g(O,W,X,ee,J,Y,ie,K,re,oe,ce){Y===void 0&&(Y=1),re===void 0&&(re=0),oe===void 0&&(oe=0),ce===void 0&&(ce=0);for(var me=m(O,W,X,ee,J,Y),Se=new Uint8Array(me.length*4),le=0;le<me.length;le++)Se[le*4+ce]=me[le];p(ie,Se,re,oe,O,W,1<<3-ce,K)}function y(O,W,X,ee,J,Y){var ie=J-X,K=Y-ee,re=ie*ie+K*K,oe=re?Math.max(0,Math.min(1,((O-X)*ie+(W-ee)*K)/re)):0,ce=O-(X+oe*ie),me=W-(ee+oe*K);return ce*ce+me*me}var _=Object.freeze({__proto__:null,generate:m,generateIntoCanvas:v,generateIntoFramebuffer:g}),x="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",M="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",A="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",E=new Float32Array([0,0,2,0,0,2]),N=null,D=!1,C={},T=new WeakMap;function P(O){if(!D&&!z(O))throw new Error("WebGL generation not supported")}function I(O,W,X,ee,J,Y,ie){if(Y===void 0&&(Y=1),ie===void 0&&(ie=null),!ie&&(ie=N,!ie)){var K=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!K)throw new Error("OffscreenCanvas or DOM canvas not supported");ie=N=K.getContext("webgl",{depth:!1})}P(ie);var re=new Uint8Array(O*W*4);c(ie,function(Se){var le=Se.gl,Q=Se.withTexture,Ee=Se.withTextureFramebuffer;Q("readable",function(ne,se){le.texImage2D(le.TEXTURE_2D,0,le.RGBA,O,W,0,le.RGBA,le.UNSIGNED_BYTE,null),Ee(ne,se,function(xe){q(O,W,X,ee,J,Y,le,xe,0,0,0),le.readPixels(0,0,O,W,le.RGBA,le.UNSIGNED_BYTE,re)})})});for(var oe=new Uint8Array(O*W),ce=0,me=0;ce<re.length;ce+=4)oe[me++]=re[ce];return oe}function U(O,W,X,ee,J,Y,ie,K,re,oe){Y===void 0&&(Y=1),K===void 0&&(K=0),re===void 0&&(re=0),oe===void 0&&(oe=0),q(O,W,X,ee,J,Y,ie,null,K,re,oe)}function q(O,W,X,ee,J,Y,ie,K,re,oe,ce){Y===void 0&&(Y=1),re===void 0&&(re=0),oe===void 0&&(oe=0),ce===void 0&&(ce=0),P(ie);var me=[];s(X,function(Se,le,Q,Ee){me.push(Se,le,Q,Ee)}),me=new Float32Array(me),c(ie,function(Se){var le=Se.gl,Q=Se.isWebGL2,Ee=Se.getExtension,ne=Se.withProgram,se=Se.withTexture,xe=Se.withTextureFramebuffer,ve=Se.handleContextLoss;if(se("rawDistances",function(te,$){(O!==te._lastWidth||W!==te._lastHeight)&&le.texImage2D(le.TEXTURE_2D,0,le.RGBA,te._lastWidth=O,te._lastHeight=W,0,le.RGBA,le.UNSIGNED_BYTE,null),ne("main",x,M,function(B){var ae=B.setAttribute,ue=B.setUniform,_e=!Q&&Ee("ANGLE_instanced_arrays"),be=!Q&&Ee("EXT_blend_minmax");ae("aUV",2,le.STATIC_DRAW,0,E),ae("aLineSegment",4,le.DYNAMIC_DRAW,1,me),ue.apply(void 0,["4f","uGlyphBounds"].concat(ee)),ue("1f","uMaxDistance",J),ue("1f","uExponent",Y),xe(te,$,function(Pe){le.enable(le.BLEND),le.colorMask(!0,!0,!0,!0),le.viewport(0,0,O,W),le.scissor(0,0,O,W),le.blendFunc(le.ONE,le.ONE),le.blendEquationSeparate(le.FUNC_ADD,Q?le.MAX:be.MAX_EXT),le.clear(le.COLOR_BUFFER_BIT),Q?le.drawArraysInstanced(le.TRIANGLES,0,3,me.length/4):_e.drawArraysInstancedANGLE(le.TRIANGLES,0,3,me.length/4)})}),ne("post",o,A,function(B){B.setAttribute("aUV",2,le.STATIC_DRAW,0,E),B.setUniform("1i","tex",$),le.bindFramebuffer(le.FRAMEBUFFER,K),le.disable(le.BLEND),le.colorMask(ce===0,ce===1,ce===2,ce===3),le.viewport(re,oe,O,W),le.scissor(re,oe,O,W),le.drawArrays(le.TRIANGLES,0,3)})}),le.isContextLost())throw ve(),new Error("webgl context lost")})}function z(O){var W=!O||O===N?C:O.canvas||O,X=T.get(W);if(X===void 0){D=!0;var ee=null;try{var J=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Y=I(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,O);X=Y&&J.length===Y.length&&Y.every(function(ie,K){return ie===J[K]}),X||(ee="bad trial run results",console.info(J,Y))}catch(ie){X=!1,ee=ie.message}ee&&console.warn("WebGL SDF generation not supported:",ee),D=!1,T.set(W,X)}return X}var G=Object.freeze({__proto__:null,generate:I,generateIntoCanvas:U,generateIntoFramebuffer:q,isSupported:z});function F(O,W,X,ee,J,Y){J===void 0&&(J=Math.max(ee[2]-ee[0],ee[3]-ee[1])/2),Y===void 0&&(Y=1);try{return I.apply(G,arguments)}catch(ie){return console.info("WebGL SDF generation failed, falling back to JS",ie),m.apply(_,arguments)}}function k(O,W,X,ee,J,Y,ie,K,re,oe){J===void 0&&(J=Math.max(ee[2]-ee[0],ee[3]-ee[1])/2),Y===void 0&&(Y=1),K===void 0&&(K=0),re===void 0&&(re=0),oe===void 0&&(oe=0);try{return U.apply(G,arguments)}catch(ce){return console.info("WebGL SDF generation failed, falling back to JS",ce),v.apply(_,arguments)}}return e.forEachPathCommand=a,e.generate=F,e.generateIntoCanvas=k,e.javascript=_,e.pathToLineSegments=s,e.webgl=G,e.webglUtils=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function pOe(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},a={};r.L=1,a[1]="L",Object.keys(n).forEach(function(ve,te){r[ve]=1<<te+1,a[r[ve]]=ve}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,u=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,f=r.S|r.WS|r.B|s|r.PDI|l,c=null;function p(){if(!c){c=new Map;var ve=function($){if(n.hasOwnProperty($)){var B=0;n[$].split(",").forEach(function(ae){var ue=ae.split("+"),_e=ue[0],be=ue[1];_e=parseInt(_e,36),be=be?parseInt(be,36):0,c.set(B+=_e,r[$]);for(var Pe=0;Pe<be;Pe++)c.set(++B,r[$])})}};for(var te in n)ve(te)}}function d(ve){return p(),c.get(ve.codePointAt(0))||r.L}function h(ve){return a[d(ve)]}var m={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function v(ve,te){var $=36,B=0,ae=new Map,ue=te&&new Map,_e;return ve.split(",").forEach(function be(Pe){if(Pe.indexOf("+")!==-1)for(var Te=+Pe;Te--;)be(_e);else{_e=Pe;var Ie=Pe.split(">"),Oe=Ie[0],Be=Ie[1];Oe=String.fromCodePoint(B+=parseInt(Oe,$)),Be=String.fromCodePoint(B+=parseInt(Be,$)),ae.set(Oe,Be),te&&ue.set(Be,Oe)}}),{map:ae,reverseMap:ue}}var g,y,_;function x(){if(!g){var ve=v(m.pairs,!0),te=ve.map,$=ve.reverseMap;g=te,y=$,_=v(m.canonical,!1).map}}function M(ve){return x(),g.get(ve)||null}function A(ve){return x(),y.get(ve)||null}function E(ve){return x(),_.get(ve)||null}var N=r.L,D=r.R,C=r.EN,T=r.ES,P=r.ET,I=r.AN,U=r.CS,q=r.B,z=r.S,G=r.ON,F=r.BN,k=r.NSM,O=r.AL,W=r.LRO,X=r.RLO,ee=r.LRE,J=r.RLE,Y=r.PDF,ie=r.LRI,K=r.RLI,re=r.FSI,oe=r.PDI;function ce(ve,te){for(var $=125,B=new Uint32Array(ve.length),ae=0;ae<ve.length;ae++)B[ae]=d(ve[ae]);var ue=new Map;function _e(Ui,Ya){var si=B[Ui];B[Ui]=Ya,ue.set(si,ue.get(si)-1),si&u&&ue.set(u,ue.get(u)-1),ue.set(Ya,(ue.get(Ya)||0)+1),Ya&u&&ue.set(u,(ue.get(u)||0)+1)}for(var be=new Uint8Array(ve.length),Pe=new Map,Te=[],Ie=null,Oe=0;Oe<ve.length;Oe++)Ie||Te.push(Ie={start:Oe,end:ve.length-1,level:te==="rtl"?1:te==="ltr"?0:qh(Oe,!1)}),B[Oe]&q&&(Ie.end=Oe,Ie=null);for(var Be=J|ee|X|W|s|oe|Y|q,He=function(Ui){return Ui+(Ui&1?1:2)},Qe=function(Ui){return Ui+(Ui&1?2:1)},et=0;et<Te.length;et++){Ie=Te[et];var Xe=[{_level:Ie.level,_override:0,_isolate:0}],je=void 0,we=0,V=0,j=0;ue.clear();for(var pe=Ie.start;pe<=Ie.end;pe++){var he=B[pe];if(je=Xe[Xe.length-1],ue.set(he,(ue.get(he)||0)+1),he&u&&ue.set(u,(ue.get(u)||0)+1),he&Be)if(he&(J|ee)){be[pe]=je._level;var Ae=(he===J?Qe:He)(je._level);Ae<=$&&!we&&!V?Xe.push({_level:Ae,_override:0,_isolate:0}):we||V++}else if(he&(X|W)){be[pe]=je._level;var Fe=(he===X?Qe:He)(je._level);Fe<=$&&!we&&!V?Xe.push({_level:Fe,_override:he&X?D:N,_isolate:0}):we||V++}else if(he&s){he&re&&(he=qh(pe+1,!0)===1?K:ie),be[pe]=je._level,je._override&&_e(pe,je._override);var qe=(he===K?Qe:He)(je._level);qe<=$&&we===0&&V===0?(j++,Xe.push({_level:qe,_override:0,_isolate:1,_isolInitIndex:pe})):we++}else if(he&oe){if(we>0)we--;else if(j>0){for(V=0;!Xe[Xe.length-1]._isolate;)Xe.pop();var Ze=Xe[Xe.length-1]._isolInitIndex;Ze!=null&&(Pe.set(Ze,pe),Pe.set(pe,Ze)),Xe.pop(),j--}je=Xe[Xe.length-1],be[pe]=je._level,je._override&&_e(pe,je._override)}else he&Y?(we===0&&(V>0?V--:!je._isolate&&Xe.length>1&&(Xe.pop(),je=Xe[Xe.length-1])),be[pe]=je._level):he&q&&(be[pe]=Ie.level);else be[pe]=je._level,je._override&&he!==F&&_e(pe,je._override)}for(var it=[],ot=null,tt=Ie.start;tt<=Ie.end;tt++){var Nt=B[tt];if(!(Nt&l)){var Xt=be[tt],Ln=Nt&s,Hn=Nt===oe;ot&&Xt===ot._level?(ot._end=tt,ot._endsWithIsolInit=Ln):it.push(ot={_start:tt,_end:tt,_level:Xt,_startsWithPDI:Hn,_endsWithIsolInit:Ln})}}for(var br=[],Un=0;Un<it.length;Un++){var Rr=it[Un];if(!Rr._startsWithPDI||Rr._startsWithPDI&&!Pe.has(Rr._start)){for(var ar=[ot=Rr],Xr=void 0;ot&&ot._endsWithIsolInit&&(Xr=Pe.get(ot._end))!=null;)for(var Fn=Un+1;Fn<it.length;Fn++)if(it[Fn]._start===Xr){ar.push(ot=it[Fn]);break}for(var sr=[],Ir=0;Ir<ar.length;Ir++)for(var Sn=ar[Ir],er=Sn._start;er<=Sn._end;er++)sr.push(er);for(var Pr=be[sr[0]],Ha=Ie.level,de=sr[0]-1;de>=0;de--)if(!(B[de]&l)){Ha=be[de];break}var Le=sr[sr.length-1],Ve=be[Le],$e=Ie.level;if(!(B[Le]&s)){for(var ke=Le+1;ke<=Ie.end;ke++)if(!(B[ke]&l)){$e=be[ke];break}}br.push({_seqIndices:sr,_sosType:Math.max(Ha,Pr)%2?D:N,_eosType:Math.max($e,Ve)%2?D:N})}}for(var ft=0;ft<br.length;ft++){var ht=br[ft],rt=ht._seqIndices,bt=ht._sosType,zt=ht._eosType,Lt=be[rt[0]]&1?D:N;if(ue.get(k))for(var Ct=0;Ct<rt.length;Ct++){var Tn=rt[Ct];if(B[Tn]&k){for(var An=bt,Nn=Ct-1;Nn>=0;Nn--)if(!(B[rt[Nn]]&l)){An=B[rt[Nn]];break}_e(Tn,An&(s|oe)?G:An)}}if(ue.get(C))for(var an=0;an<rt.length;an++){var It=rt[an];if(B[It]&C)for(var _t=an-1;_t>=-1;_t--){var wn=_t===-1?bt:B[rt[_t]];if(wn&o){wn===O&&_e(It,I);break}}}if(ue.get(O))for(var Yt=0;Yt<rt.length;Yt++){var Yr=rt[Yt];B[Yr]&O&&_e(Yr,D)}if(ue.get(T)||ue.get(U))for(var Ai=1;Ai<rt.length-1;Ai++){var Vn=rt[Ai];if(B[Vn]&(T|U)){for(var Va=0,or=0,Wa=Ai-1;Wa>=0&&(Va=B[rt[Wa]],!!(Va&l));Wa--);for(var bo=Ai+1;bo<rt.length&&(or=B[rt[bo]],!!(or&l));bo++);Va===or&&(B[Vn]===T?Va===C:Va&(C|I))&&_e(Vn,Va)}}if(ue.get(C))for(var Sr=0;Sr<rt.length;Sr++){var ea=rt[Sr];if(B[ea]&C){for(var ef=Sr-1;ef>=0&&B[rt[ef]]&(P|l);ef--)_e(rt[ef],C);for(Sr++;Sr<rt.length&&B[rt[Sr]]&(P|l|C);Sr++)B[rt[Sr]]!==C&&_e(rt[Sr],C)}}if(ue.get(P)||ue.get(T)||ue.get(U))for(var Fu=0;Fu<rt.length;Fu++){var Cx=rt[Fu];if(B[Cx]&(P|T|U)){_e(Cx,G);for(var Dl=Fu-1;Dl>=0&&B[rt[Dl]]&l;Dl--)_e(rt[Dl],G);for(var Rl=Fu+1;Rl<rt.length&&B[rt[Rl]]&l;Rl++)_e(rt[Rl],G)}}if(ue.get(C))for(var Il=0,Bp=bt;Il<rt.length;Il++){var Dx=rt[Il],Sv=B[Dx];Sv&C?Bp===N&&_e(Dx,N):Sv&o&&(Bp=Sv)}if(ue.get(u)){var Pl=D|C|I,Fh=Pl|N,Bu=[];{for(var tf=[],zu=0;zu<rt.length;zu++)if(B[rt[zu]]&u){var xn=ve[rt[zu]],wv=void 0;if(M(xn)!==null)if(tf.length<63)tf.push({char:xn,seqIndex:zu});else break;else if((wv=A(xn))!==null)for(var Ol=tf.length-1;Ol>=0;Ol--){var Bh=tf[Ol].char;if(Bh===wv||Bh===A(E(xn))||M(E(Bh))===xn){Bu.push([tf[Ol].seqIndex,zu]),tf.length=Ol;break}}}Bu.sort(function(Ui,Ya){return Ui[0]-Ya[0]})}for(var _v=0;_v<Bu.length;_v++){for(var Rx=Bu[_v],zr=Rx[0],zp=Rx[1],Ix=!1,$a=0,Mv=zr+1;Mv<zp;Mv++){var qp=rt[Mv];if(B[qp]&Fh){Ix=!0;var Us=B[qp]&Pl?D:N;if(Us===Lt){$a=Us;break}}}if(Ix&&!$a){$a=bt;for(var Ev=zr-1;Ev>=0;Ev--){var Px=rt[Ev];if(B[Px]&Fh){var Fs=B[Px]&Pl?D:N;Fs!==Lt?$a=Fs:$a=Lt;break}}}if($a){if(B[rt[zr]]=B[rt[zp]]=$a,$a!==Lt){for(var ja=zr+1;ja<rt.length;ja++)if(!(B[rt[ja]]&l)){d(ve[rt[ja]])&k&&(B[rt[ja]]=$a);break}}if($a!==Lt){for(var qu=zp+1;qu<rt.length;qu++)if(!(B[rt[qu]]&l)){d(ve[rt[qu]])&k&&(B[rt[qu]]=$a);break}}}}for(var So=0;So<rt.length;So++)if(B[rt[So]]&u){for(var Tv=So,Av=So,ys=bt,Gp=So-1;Gp>=0;Gp--)if(B[rt[Gp]]&l)Tv=Gp;else{ys=B[rt[Gp]]&Pl?D:N;break}for(var Hp=zt,Vp=So+1;Vp<rt.length;Vp++)if(B[rt[Vp]]&(u|l))Av=Vp;else{Hp=B[rt[Vp]]&Pl?D:N;break}for(var Xa=Tv;Xa<=Av;Xa++)B[rt[Xa]]=ys===Hp?ys:Lt;So=Av}}}for(var ki=Ie.start;ki<=Ie.end;ki++){var zh=be[ki],ru=B[ki];if(zh&1?ru&(N|C|I)&&be[ki]++:ru&D?be[ki]++:ru&(I|C)&&(be[ki]+=2),ru&l&&(be[ki]=ki===0?Ie.level:be[ki-1]),ki===Ie.end||d(ve[ki])&(z|q))for(var nf=ki;nf>=0&&d(ve[nf])&f;nf--)be[nf]=Ie.level}}return{levels:be,paragraphs:Te};function qh(Ui,Ya){for(var si=Ui;si<ve.length;si++){var oi=B[si];if(oi&(D|O))return 1;if(oi&(q|N)||Ya&&oi===oe)return 0;if(oi&s){var Bs=Ox(si);si=Bs===-1?ve.length:Bs}}return 0}function Ox(Ui){for(var Ya=1,si=Ui+1;si<ve.length;si++){var oi=B[si];if(oi&q)break;if(oi&oe){if(--Ya===0)return si}else oi&s&&Ya++}return-1}}var me="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Se;function le(){if(!Se){var ve=v(me,!0),te=ve.map,$=ve.reverseMap;$.forEach(function(B,ae){te.set(ae,B)}),Se=te}}function Q(ve){return le(),Se.get(ve)||null}function Ee(ve,te,$,B){var ae=ve.length;$=Math.max(0,$==null?0:+$),B=Math.min(ae-1,B==null?ae-1:+B);for(var ue=new Map,_e=$;_e<=B;_e++)if(te[_e]&1){var be=Q(ve[_e]);be!==null&&ue.set(_e,be)}return ue}function ne(ve,te,$,B){var ae=ve.length;$=Math.max(0,$==null?0:+$),B=Math.min(ae-1,B==null?ae-1:+B);var ue=[];return te.paragraphs.forEach(function(_e){var be=Math.max($,_e.start),Pe=Math.min(B,_e.end);if(be<Pe){for(var Te=te.levels.slice(be,Pe+1),Ie=Pe;Ie>=be&&d(ve[Ie])&f;Ie--)Te[Ie]=_e.level;for(var Oe=_e.level,Be=1/0,He=0;He<Te.length;He++){var Qe=Te[He];Qe>Oe&&(Oe=Qe),Qe<Be&&(Be=Qe|1)}for(var et=Oe;et>=Be;et--)for(var Xe=0;Xe<Te.length;Xe++)if(Te[Xe]>=et){for(var je=Xe;Xe+1<Te.length&&Te[Xe+1]>=et;)Xe++;Xe>je&&ue.push([je+be,Xe+be])}}}),ue}function se(ve,te,$,B){var ae=xe(ve,te,$,B),ue=[].concat(ve);return ae.forEach(function(_e,be){ue[be]=(te.levels[_e]&1?Q(ve[_e]):null)||ve[_e]}),ue.join("")}function xe(ve,te,$,B){for(var ae=ne(ve,te,$,B),ue=[],_e=0;_e<ve.length;_e++)ue[_e]=_e;return ae.forEach(function(be){for(var Pe=be[0],Te=be[1],Ie=ue.slice(Pe,Te+1),Oe=Ie.length;Oe--;)ue[Te-Oe]=Ie[Oe]}),ue}return e.closingToOpeningBracket=A,e.getBidiCharType=d,e.getBidiCharTypeName=h,e.getCanonicalBracket=E,e.getEmbeddingLevels=ce,e.getMirroredCharacter=Q,e.getMirroredCharactersMap=Ee,e.getReorderSegments=ne,e.getReorderedIndices=xe,e.getReorderedString=se,e.openingToClosingBracket=M,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const yte=/\bvoid\s+main\s*\(\s*\)\s*{/g;function LL(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,a){let s=ln[a];return s?LL(s):r}return t.replace(e,n)}const na=[];for(let t=0;t<256;t++)na[t]=(t<16?"0":"")+t.toString(16);function dOe(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(na[t&255]+na[t>>8&255]+na[t>>16&255]+na[t>>24&255]+"-"+na[e&255]+na[e>>8&255]+"-"+na[e>>16&15|64]+na[e>>24&255]+"-"+na[n&63|128]+na[n>>8&255]+"-"+na[n>>16&255]+na[n>>24&255]+na[r&255]+na[r>>8&255]+na[r>>16&255]+na[r>>24&255]).toUpperCase()}const pd=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},hOe=Date.now(),EH=new WeakMap,TH=new Map;let mOe=1e10;function kL(t,e){const n=xOe(e);let r=EH.get(t);if(r||EH.set(t,r=Object.create(null)),r[n])return new r[n];const a=`_onBeforeCompile${n}`,s=function(f,c){t.onBeforeCompile.call(this,f,c);const p=this.customProgramCacheKey()+"|"+f.vertexShader+"|"+f.fragmentShader;let d=TH[p];if(!d){const h=vOe(this,f,e,n);d=TH[p]=h}f.vertexShader=d.vertexShader,f.fragmentShader=d.fragmentShader,pd(f.uniforms,this.uniforms),e.timeUniform&&(f.uniforms[e.timeUniform]={get value(){return Date.now()-hOe}}),this[a]&&this[a](f)},o=function(){return u(e.chained?t:t.clone())},u=function(f){const c=Object.create(f,l);return Object.defineProperty(c,"baseMaterial",{value:t}),Object.defineProperty(c,"id",{value:mOe++}),c.uuid=dOe(),c.uniforms=pd({},f.uniforms,e.uniforms),c.defines=pd({},f.defines,e.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",c.extensions=pd({},f.extensions,e.extensions),c._listeners=void 0,c},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(f){this[a]=f}},copy:{writable:!0,configurable:!0,value:function(f){return t.copy.call(this,f),!t.isShaderMaterial&&!t.isDerivedMaterial&&(pd(this.extensions,f.extensions),pd(this.defines,f.defines),pd(this.uniforms,z4.clone(f.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const f=new t.constructor;return u(f).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let f=this._depthMaterial;return f||(f=this._depthMaterial=kL(t.isDerivedMaterial?t.getDepthMaterial():new MD({depthPacking:O4}),e),f.defines.IS_DEPTH_MATERIAL="",f.uniforms=this.uniforms),f}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let f=this._distanceMaterial;return f||(f=this._distanceMaterial=kL(t.isDerivedMaterial?t.getDistanceMaterial():new ED,e),f.defines.IS_DISTANCE_MATERIAL="",f.uniforms=this.uniforms),f}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:f,_distanceMaterial:c}=this;f&&f.dispose(),c&&c.dispose(),t.dispose.call(this)}}};return r[n]=o,new o}function vOe(t,{vertexShader:e,fragmentShader:n},r,a){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:u,vertexTransform:l,fragmentDefs:f,fragmentMainIntro:c,fragmentMainOutro:p,fragmentColorTransform:d,customRewriter:h,timeUniform:m}=r;if(s=s||"",o=o||"",u=u||"",f=f||"",c=c||"",p=p||"",(l||h)&&(e=LL(e)),(d||h)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=LL(n)),h){let v=h({vertexShader:e,fragmentShader:n});e=v.vertexShader,n=v.fragmentShader}if(d){let v=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(v.push(g),"")),p=`${d}
${v.join(`
`)}
${p}`}if(m){const v=`
uniform float ${m};
`;s=v+s,f=v+f}return l&&(e=`vec3 troika_position_${a};
vec3 troika_normal_${a};
vec2 troika_uv_${a};
${e}
`,s=`${s}
void troikaVertexTransform${a}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${a} = vec3(position);
troika_normal_${a} = vec3(normal);
troika_uv_${a} = vec2(uv);
troikaVertexTransform${a}(troika_position_${a}, troika_normal_${a}, troika_uv_${a});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(v,g,y,_)=>/\battribute\s+vec[23]\s+$/.test(_.substr(0,y))?g:`troika_${g}_${a}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${a}`))),e=AH(e,a,s,o,u),n=AH(n,a,f,c,p),{vertexShader:e,fragmentShader:n}}function AH(t,e,n,r,a){return(r||a||n)&&(t=t.replace(yte,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${a}
}`),t}function gOe(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let yOe=0;const NH=new Map;function xOe(t){const e=JSON.stringify(t,gOe);let n=NH.get(e);return n==null&&NH.set(e,n=++yOe),n}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function bOe(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(a){var s=e._bin,o=new Uint8Array(a);if(s.readASCII(o,0,4)=="ttcf"){var u=4;s.readUshort(o,u),u+=2,s.readUshort(o,u),u+=2;var l=s.readUint(o,u);u+=4;for(var f=[],c=0;c<l;c++){var p=s.readUint(o,u);u+=4,f.push(e._readFont(o,p))}return f}return[e._readFont(o,0)]},_readFont:function(a,s){var o=e._bin,u=s;o.readFixed(a,s),s+=4;var l=o.readUshort(a,s);s+=2,o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2;for(var f=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],c={_data:a,_offset:u},p={},d=0;d<l;d++){var h=o.readASCII(a,s,4);s+=4,o.readUint(a,s),s+=4;var m=o.readUint(a,s);s+=4;var v=o.readUint(a,s);s+=4,p[h]={offset:m,length:v}}for(d=0;d<f.length;d++){var g=f[d];p[g]&&(c[g.trim()]=e[g.trim()].parse(a,p[g].offset,p[g].length,c))}return c},_tabOffset:function(a,s,o){for(var u=e._bin,l=u.readUshort(a,o+4),f=o+12,c=0;c<l;c++){var p=u.readASCII(a,f,4);f+=4,u.readUint(a,f),f+=4;var d=u.readUint(a,f);if(f+=4,u.readUint(a,f),f+=4,p==s)return d}return 0}};e._bin={readFixed:function(a,s){return(a[s]<<8|a[s+1])+(a[s+2]<<8|a[s+3])/65540},readF2dot14:function(a,s){return e._bin.readShort(a,s)/16384},readInt:function(a,s){return e._bin._view(a).getInt32(s)},readInt8:function(a,s){return e._bin._view(a).getInt8(s)},readShort:function(a,s){return e._bin._view(a).getInt16(s)},readUshort:function(a,s){return e._bin._view(a).getUint16(s)},readUshorts:function(a,s,o){for(var u=[],l=0;l<o;l++)u.push(e._bin.readUshort(a,s+2*l));return u},readUint:function(a,s){return e._bin._view(a).getUint32(s)},readUint64:function(a,s){return 4294967296*e._bin.readUint(a,s)+e._bin.readUint(a,s+4)},readASCII:function(a,s,o){for(var u="",l=0;l<o;l++)u+=String.fromCharCode(a[s+l]);return u},readUnicode:function(a,s,o){for(var u="",l=0;l<o;l++){var f=a[s++]<<8|a[s++];u+=String.fromCharCode(f)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(a,s,o){var u=e._bin._tdec;return u&&s==0&&o==a.length?u.decode(a):e._bin.readASCII(a,s,o)},readBytes:function(a,s,o){for(var u=[],l=0;l<o;l++)u.push(a[s+l]);return u},readASCIIArray:function(a,s,o){for(var u=[],l=0;l<o;l++)u.push(String.fromCharCode(a[s+l]));return u},_view:function(a){return a._dataView||(a._dataView=a.buffer?new DataView(a.buffer,a.byteOffset,a.byteLength):new DataView(new Uint8Array(a).buffer))}},e._lctf={},e._lctf.parse=function(a,s,o,u,l){var f=e._bin,c={},p=s;f.readFixed(a,s),s+=4;var d=f.readUshort(a,s);s+=2;var h=f.readUshort(a,s);s+=2;var m=f.readUshort(a,s);return s+=2,c.scriptList=e._lctf.readScriptList(a,p+d),c.featureList=e._lctf.readFeatureList(a,p+h),c.lookupList=e._lctf.readLookupList(a,p+m,l),c},e._lctf.readLookupList=function(a,s,o){var u=e._bin,l=s,f=[],c=u.readUshort(a,s);s+=2;for(var p=0;p<c;p++){var d=u.readUshort(a,s);s+=2;var h=e._lctf.readLookupTable(a,l+d,o);f.push(h)}return f},e._lctf.readLookupTable=function(a,s,o){var u=e._bin,l=s,f={tabs:[]};f.ltype=u.readUshort(a,s),s+=2,f.flag=u.readUshort(a,s),s+=2;var c=u.readUshort(a,s);s+=2;for(var p=f.ltype,d=0;d<c;d++){var h=u.readUshort(a,s);s+=2;var m=o(a,p,l+h,f);f.tabs.push(m)}return f},e._lctf.numOfOnes=function(a){for(var s=0,o=0;o<32;o++)a>>>o&1&&s++;return s},e._lctf.readClassDef=function(a,s){var o=e._bin,u=[],l=o.readUshort(a,s);if(s+=2,l==1){var f=o.readUshort(a,s);s+=2;var c=o.readUshort(a,s);s+=2;for(var p=0;p<c;p++)u.push(f+p),u.push(f+p),u.push(o.readUshort(a,s)),s+=2}if(l==2){var d=o.readUshort(a,s);for(s+=2,p=0;p<d;p++)u.push(o.readUshort(a,s)),s+=2,u.push(o.readUshort(a,s)),s+=2,u.push(o.readUshort(a,s)),s+=2}return u},e._lctf.getInterval=function(a,s){for(var o=0;o<a.length;o+=3){var u=a[o],l=a[o+1];if(a[o+2],u<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(a,s){var o=e._bin,u={};u.fmt=o.readUshort(a,s),s+=2;var l=o.readUshort(a,s);return s+=2,u.fmt==1&&(u.tab=o.readUshorts(a,s,l)),u.fmt==2&&(u.tab=o.readUshorts(a,s,3*l)),u},e._lctf.coverageIndex=function(a,s){var o=a.tab;if(a.fmt==1)return o.indexOf(s);if(a.fmt==2){var u=e._lctf.getInterval(o,s);if(u!=-1)return o[u+2]+(s-o[u])}return-1},e._lctf.readFeatureList=function(a,s){var o=e._bin,u=s,l=[],f=o.readUshort(a,s);s+=2;for(var c=0;c<f;c++){var p=o.readASCII(a,s,4);s+=4;var d=o.readUshort(a,s);s+=2;var h=e._lctf.readFeatureTable(a,u+d);h.tag=p.trim(),l.push(h)}return l},e._lctf.readFeatureTable=function(a,s){var o=e._bin,u=s,l={},f=o.readUshort(a,s);s+=2,f>0&&(l.featureParams=u+f);var c=o.readUshort(a,s);s+=2,l.tab=[];for(var p=0;p<c;p++)l.tab.push(o.readUshort(a,s+2*p));return l},e._lctf.readScriptList=function(a,s){var o=e._bin,u=s,l={},f=o.readUshort(a,s);s+=2;for(var c=0;c<f;c++){var p=o.readASCII(a,s,4);s+=4;var d=o.readUshort(a,s);s+=2,l[p.trim()]=e._lctf.readScriptTable(a,u+d)}return l},e._lctf.readScriptTable=function(a,s){var o=e._bin,u=s,l={},f=o.readUshort(a,s);s+=2,f>0&&(l.default=e._lctf.readLangSysTable(a,u+f));var c=o.readUshort(a,s);s+=2;for(var p=0;p<c;p++){var d=o.readASCII(a,s,4);s+=4;var h=o.readUshort(a,s);s+=2,l[d.trim()]=e._lctf.readLangSysTable(a,u+h)}return l},e._lctf.readLangSysTable=function(a,s){var o=e._bin,u={};o.readUshort(a,s),s+=2,u.reqFeature=o.readUshort(a,s),s+=2;var l=o.readUshort(a,s);return s+=2,u.features=o.readUshorts(a,s,l),u},e.CFF={},e.CFF.parse=function(a,s,o){var u=e._bin;(a=new Uint8Array(a.buffer,s,o))[s=0],a[++s],a[++s],a[++s],s++;var l=[];s=e.CFF.readIndex(a,s,l);for(var f=[],c=0;c<l.length-1;c++)f.push(u.readASCII(a,s+l[c],l[c+1]-l[c]));s+=l[l.length-1];var p=[];s=e.CFF.readIndex(a,s,p);var d=[];for(c=0;c<p.length-1;c++)d.push(e.CFF.readDict(a,s+p[c],s+p[c+1]));s+=p[p.length-1];var h=d[0],m=[];s=e.CFF.readIndex(a,s,m);var v=[];for(c=0;c<m.length-1;c++)v.push(u.readASCII(a,s+m[c],m[c+1]-m[c]));if(s+=m[m.length-1],e.CFF.readSubrs(a,s,h),h.CharStrings){s=h.CharStrings,m=[],s=e.CFF.readIndex(a,s,m);var g=[];for(c=0;c<m.length-1;c++)g.push(u.readBytes(a,s+m[c],m[c+1]-m[c]));h.CharStrings=g}if(h.ROS){s=h.FDArray;var y=[];for(s=e.CFF.readIndex(a,s,y),h.FDArray=[],c=0;c<y.length-1;c++){var _=e.CFF.readDict(a,s+y[c],s+y[c+1]);e.CFF._readFDict(a,_,v),h.FDArray.push(_)}s+=y[y.length-1],s=h.FDSelect,h.FDSelect=[];var x=a[s];if(s++,x!=3)throw x;var M=u.readUshort(a,s);for(s+=2,c=0;c<M+1;c++)h.FDSelect.push(u.readUshort(a,s),a[s+2]),s+=3}return h.Encoding&&(h.Encoding=e.CFF.readEncoding(a,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=e.CFF.readCharset(a,h.charset,h.CharStrings.length)),e.CFF._readFDict(a,h,v),h},e.CFF._readFDict=function(a,s,o){var u;for(var l in s.Private&&(u=s.Private[1],s.Private=e.CFF.readDict(a,u,u+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(a,u+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(a,s,o){var u=e._bin,l=[];s=e.CFF.readIndex(a,s,l);var f,c=l.length;f=c<1240?107:c<33900?1131:32768,o.Bias=f,o.Subrs=[];for(var p=0;p<l.length-1;p++)o.Subrs.push(u.readBytes(a,s+l[p],l[p+1]-l[p]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(a,s){for(var o=0;o<a.charset.length;o++)if(a.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(a,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(a,e.CFF.tableSE[s])},e.CFF.readEncoding=function(a,s,o){e._bin;var u=[".notdef"],l=a[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var f=a[s];s++;for(var c=0;c<f;c++)u.push(a[s+c]);return u},e.CFF.readCharset=function(a,s,o){var u=e._bin,l=[".notdef"],f=a[s];if(s++,f==0)for(var c=0;c<o;c++){var p=u.readUshort(a,s);s+=2,l.push(p)}else{if(f!=1&&f!=2)throw"error: format: "+f;for(;l.length<o;){p=u.readUshort(a,s),s+=2;var d=0;for(f==1?(d=a[s],s++):(d=u.readUshort(a,s),s+=2),c=0;c<=d;c++)l.push(p),p++}}return l},e.CFF.readIndex=function(a,s,o){var u=e._bin,l=u.readUshort(a,s)+1,f=a[s+=2];if(s++,f==1)for(var c=0;c<l;c++)o.push(a[s+c]);else if(f==2)for(c=0;c<l;c++)o.push(u.readUshort(a,s+2*c));else if(f==3)for(c=0;c<l;c++)o.push(16777215&u.readUint(a,s+3*c-1));else if(l!=1)throw"unsupported offset size: "+f+", count: "+l;return(s+=l*f)-1},e.CFF.getCharString=function(a,s,o){var u=e._bin,l=a[s],f=a[s+1];a[s+2],a[s+3],a[s+4];var c=1,p=null,d=null;l<=20&&(p=l,c=1),l==12&&(p=100*l+f,c=2),21<=l&&l<=27&&(p=l,c=1),l==28&&(d=u.readShort(a,s+1),c=3),29<=l&&l<=31&&(p=l,c=1),32<=l&&l<=246&&(d=l-139,c=1),247<=l&&l<=250&&(d=256*(l-247)+f+108,c=2),251<=l&&l<=254&&(d=256*-(l-251)-f-108,c=2),l==255&&(d=u.readInt(a,s+1)/65535,c=5),o.val=d??"o"+p,o.size=c},e.CFF.readCharString=function(a,s,o){for(var u=s+o,l=e._bin,f=[];s<u;){var c=a[s],p=a[s+1];a[s+2],a[s+3],a[s+4];var d=1,h=null,m=null;c<=20&&(h=c,d=1),c==12&&(h=100*c+p,d=2),c!=19&&c!=20||(h=c,d=2),21<=c&&c<=27&&(h=c,d=1),c==28&&(m=l.readShort(a,s+1),d=3),29<=c&&c<=31&&(h=c,d=1),32<=c&&c<=246&&(m=c-139,d=1),247<=c&&c<=250&&(m=256*(c-247)+p+108,d=2),251<=c&&c<=254&&(m=256*-(c-251)-p-108,d=2),c==255&&(m=l.readInt(a,s+1)/65535,d=5),f.push(m??"o"+h),s+=d}return f},e.CFF.readDict=function(a,s,o){for(var u=e._bin,l={},f=[];s<o;){var c=a[s],p=a[s+1];a[s+2],a[s+3],a[s+4];var d=1,h=null,m=null;if(c==28&&(m=u.readShort(a,s+1),d=3),c==29&&(m=u.readInt(a,s+1),d=5),32<=c&&c<=246&&(m=c-139,d=1),247<=c&&c<=250&&(m=256*(c-247)+p+108,d=2),251<=c&&c<=254&&(m=256*-(c-251)-p-108,d=2),c==255)throw m=u.readInt(a,s+1)/65535,d=5,"unknown number";if(c==30){var v=[];for(d=1;;){var g=a[s+d];d++;var y=g>>4,_=15&g;if(y!=15&&v.push(y),_!=15&&v.push(_),_==15)break}for(var x="",M=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],A=0;A<v.length;A++)x+=M[v[A]];m=parseFloat(x)}c<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],d=1,c==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][p],d=2)),h!=null?(l[h]=f.length==1?f[0]:f,f=[]):f.push(m),s+=d}return l},e.cmap={},e.cmap.parse=function(a,s,o){a=new Uint8Array(a.buffer,s,o),s=0;var u=e._bin,l={};u.readUshort(a,s),s+=2;var f=u.readUshort(a,s);s+=2;var c=[];l.tables=[];for(var p=0;p<f;p++){var d=u.readUshort(a,s);s+=2;var h=u.readUshort(a,s);s+=2;var m=u.readUint(a,s);s+=4;var v="p"+d+"e"+h,g=c.indexOf(m);if(g==-1){var y;g=l.tables.length,c.push(m);var _=u.readUshort(a,m);_==0?y=e.cmap.parse0(a,m):_==4?y=e.cmap.parse4(a,m):_==6?y=e.cmap.parse6(a,m):_==12?y=e.cmap.parse12(a,m):console.debug("unknown format: "+_,d,h,m),l.tables.push(y)}if(l[v]!=null)throw"multiple tables for one platform+encoding";l[v]=g}return l},e.cmap.parse0=function(a,s){var o=e._bin,u={};u.format=o.readUshort(a,s),s+=2;var l=o.readUshort(a,s);s+=2,o.readUshort(a,s),s+=2,u.map=[];for(var f=0;f<l-6;f++)u.map.push(a[s+f]);return u},e.cmap.parse4=function(a,s){var o=e._bin,u=s,l={};l.format=o.readUshort(a,s),s+=2;var f=o.readUshort(a,s);s+=2,o.readUshort(a,s),s+=2;var c=o.readUshort(a,s);s+=2;var p=c/2;l.searchRange=o.readUshort(a,s),s+=2,l.entrySelector=o.readUshort(a,s),s+=2,l.rangeShift=o.readUshort(a,s),s+=2,l.endCount=o.readUshorts(a,s,p),s+=2*p,s+=2,l.startCount=o.readUshorts(a,s,p),s+=2*p,l.idDelta=[];for(var d=0;d<p;d++)l.idDelta.push(o.readShort(a,s)),s+=2;for(l.idRangeOffset=o.readUshorts(a,s,p),s+=2*p,l.glyphIdArray=[];s<u+f;)l.glyphIdArray.push(o.readUshort(a,s)),s+=2;return l},e.cmap.parse6=function(a,s){var o=e._bin,u={};u.format=o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2,o.readUshort(a,s),s+=2,u.firstCode=o.readUshort(a,s),s+=2;var l=o.readUshort(a,s);s+=2,u.glyphIdArray=[];for(var f=0;f<l;f++)u.glyphIdArray.push(o.readUshort(a,s)),s+=2;return u},e.cmap.parse12=function(a,s){var o=e._bin,u={};u.format=o.readUshort(a,s),s+=2,s+=2,o.readUint(a,s),s+=4,o.readUint(a,s),s+=4;var l=o.readUint(a,s);s+=4,u.groups=[];for(var f=0;f<l;f++){var c=s+12*f,p=o.readUint(a,c+0),d=o.readUint(a,c+4),h=o.readUint(a,c+8);u.groups.push([p,d,h])}return u},e.glyf={},e.glyf.parse=function(a,s,o,u){for(var l=[],f=0;f<u.maxp.numGlyphs;f++)l.push(null);return l},e.glyf._parseGlyf=function(a,s){var o=e._bin,u=a._data,l=e._tabOffset(u,"glyf",a._offset)+a.loca[s];if(a.loca[s]==a.loca[s+1])return null;var f={};if(f.noc=o.readShort(u,l),l+=2,f.xMin=o.readShort(u,l),l+=2,f.yMin=o.readShort(u,l),l+=2,f.xMax=o.readShort(u,l),l+=2,f.yMax=o.readShort(u,l),l+=2,f.xMin>=f.xMax||f.yMin>=f.yMax)return null;if(f.noc>0){f.endPts=[];for(var c=0;c<f.noc;c++)f.endPts.push(o.readUshort(u,l)),l+=2;var p=o.readUshort(u,l);if(l+=2,u.length-l<p)return null;f.instructions=o.readBytes(u,l,p),l+=p;var d=f.endPts[f.noc-1]+1;for(f.flags=[],c=0;c<d;c++){var h=u[l];if(l++,f.flags.push(h),(8&h)!=0){var m=u[l];l++;for(var v=0;v<m;v++)f.flags.push(h),c++}}for(f.xs=[],c=0;c<d;c++){var g=(2&f.flags[c])!=0,y=(16&f.flags[c])!=0;g?(f.xs.push(y?u[l]:-u[l]),l++):y?f.xs.push(0):(f.xs.push(o.readShort(u,l)),l+=2)}for(f.ys=[],c=0;c<d;c++)g=(4&f.flags[c])!=0,y=(32&f.flags[c])!=0,g?(f.ys.push(y?u[l]:-u[l]),l++):y?f.ys.push(0):(f.ys.push(o.readShort(u,l)),l+=2);var _=0,x=0;for(c=0;c<d;c++)_+=f.xs[c],x+=f.ys[c],f.xs[c]=_,f.ys[c]=x}else{var M;f.parts=[];do{M=o.readUshort(u,l),l+=2;var A={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(f.parts.push(A),A.glyphIndex=o.readUshort(u,l),l+=2,1&M){var E=o.readShort(u,l);l+=2;var N=o.readShort(u,l);l+=2}else E=o.readInt8(u,l),l++,N=o.readInt8(u,l),l++;2&M?(A.m.tx=E,A.m.ty=N):(A.p1=E,A.p2=N),8&M?(A.m.a=A.m.d=o.readF2dot14(u,l),l+=2):64&M?(A.m.a=o.readF2dot14(u,l),l+=2,A.m.d=o.readF2dot14(u,l),l+=2):128&M&&(A.m.a=o.readF2dot14(u,l),l+=2,A.m.b=o.readF2dot14(u,l),l+=2,A.m.c=o.readF2dot14(u,l),l+=2,A.m.d=o.readF2dot14(u,l),l+=2)}while(32&M);if(256&M){var D=o.readUshort(u,l);for(l+=2,f.instr=[],c=0;c<D;c++)f.instr.push(u[l]),l++}}return f},e.GDEF={},e.GDEF.parse=function(a,s,o,u){var l=s;s+=4;var f=e._bin.readUshort(a,s);return{glyphClassDef:f===0?null:e._lctf.readClassDef(a,l+f)}},e.GPOS={},e.GPOS.parse=function(a,s,o,u){return e._lctf.parse(a,s,o,u,e.GPOS.subt)},e.GPOS.subt=function(a,s,o,u){var l=e._bin,f=o,c={};if(c.fmt=l.readUshort(a,o),o+=2,s==1||s==2||s==3||s==7||s==8&&c.fmt<=2){var p=l.readUshort(a,o);o+=2,c.coverage=e._lctf.readCoverage(a,p+f)}if(s==1&&c.fmt==1){var d=l.readUshort(a,o);o+=2,d!=0&&(c.pos=e.GPOS.readValueRecord(a,o,d))}else if(s==2&&c.fmt>=1&&c.fmt<=2){d=l.readUshort(a,o),o+=2;var h=l.readUshort(a,o);o+=2;var m=e._lctf.numOfOnes(d),v=e._lctf.numOfOnes(h);if(c.fmt==1){c.pairsets=[];var g=l.readUshort(a,o);o+=2;for(var y=0;y<g;y++){var _=f+l.readUshort(a,o);o+=2;var x=l.readUshort(a,_);_+=2;for(var M=[],A=0;A<x;A++){var E=l.readUshort(a,_);_+=2,d!=0&&(I=e.GPOS.readValueRecord(a,_,d),_+=2*m),h!=0&&(U=e.GPOS.readValueRecord(a,_,h),_+=2*v),M.push({gid2:E,val1:I,val2:U})}c.pairsets.push(M)}}if(c.fmt==2){var N=l.readUshort(a,o);o+=2;var D=l.readUshort(a,o);o+=2;var C=l.readUshort(a,o);o+=2;var T=l.readUshort(a,o);for(o+=2,c.classDef1=e._lctf.readClassDef(a,f+N),c.classDef2=e._lctf.readClassDef(a,f+D),c.matrix=[],y=0;y<C;y++){var P=[];for(A=0;A<T;A++){var I=null,U=null;d!=0&&(I=e.GPOS.readValueRecord(a,o,d),o+=2*m),h!=0&&(U=e.GPOS.readValueRecord(a,o,h),o+=2*v),P.push({val1:I,val2:U})}c.matrix.push(P)}}}else if(s==4&&c.fmt==1)c.markCoverage=e._lctf.readCoverage(a,l.readUshort(a,o)+f),c.baseCoverage=e._lctf.readCoverage(a,l.readUshort(a,o+2)+f),c.markClassCount=l.readUshort(a,o+4),c.markArray=e.GPOS.readMarkArray(a,l.readUshort(a,o+6)+f),c.baseArray=e.GPOS.readBaseArray(a,l.readUshort(a,o+8)+f,c.markClassCount);else if(s==6&&c.fmt==1)c.mark1Coverage=e._lctf.readCoverage(a,l.readUshort(a,o)+f),c.mark2Coverage=e._lctf.readCoverage(a,l.readUshort(a,o+2)+f),c.markClassCount=l.readUshort(a,o+4),c.mark1Array=e.GPOS.readMarkArray(a,l.readUshort(a,o+6)+f),c.mark2Array=e.GPOS.readBaseArray(a,l.readUshort(a,o+8)+f,c.markClassCount);else{if(s==9&&c.fmt==1){var q=l.readUshort(a,o);o+=2;var z=l.readUint(a,o);if(o+=4,u.ltype==9)u.ltype=q;else if(u.ltype!=q)throw"invalid extension substitution";return e.GPOS.subt(a,u.ltype,f+z)}console.debug("unsupported GPOS table LookupType",s,"format",c.fmt)}return c},e.GPOS.readValueRecord=function(a,s,o){var u=e._bin,l=[];return l.push(1&o?u.readShort(a,s):0),s+=1&o?2:0,l.push(2&o?u.readShort(a,s):0),s+=2&o?2:0,l.push(4&o?u.readShort(a,s):0),s+=4&o?2:0,l.push(8&o?u.readShort(a,s):0),s+=8&o?2:0,l},e.GPOS.readBaseArray=function(a,s,o){var u=e._bin,l=[],f=s,c=u.readUshort(a,s);s+=2;for(var p=0;p<c;p++){for(var d=[],h=0;h<o;h++)d.push(e.GPOS.readAnchorRecord(a,f+u.readUshort(a,s))),s+=2;l.push(d)}return l},e.GPOS.readMarkArray=function(a,s){var o=e._bin,u=[],l=s,f=o.readUshort(a,s);s+=2;for(var c=0;c<f;c++){var p=e.GPOS.readAnchorRecord(a,o.readUshort(a,s+2)+l);p.markClass=o.readUshort(a,s),u.push(p),s+=4}return u},e.GPOS.readAnchorRecord=function(a,s){var o=e._bin,u={};return u.fmt=o.readUshort(a,s),u.x=o.readShort(a,s+2),u.y=o.readShort(a,s+4),u},e.GSUB={},e.GSUB.parse=function(a,s,o,u){return e._lctf.parse(a,s,o,u,e.GSUB.subt)},e.GSUB.subt=function(a,s,o,u){var l=e._bin,f=o,c={};if(c.fmt=l.readUshort(a,o),o+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&c.fmt<=2||s==6&&c.fmt<=2){var p=l.readUshort(a,o);o+=2,c.coverage=e._lctf.readCoverage(a,f+p)}if(s==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=l.readShort(a,o),o+=2;else if(c.fmt==2){var d=l.readUshort(a,o);o+=2,c.newg=l.readUshorts(a,o,d),o+=2*c.newg.length}}else if(s==2&&c.fmt==1){d=l.readUshort(a,o),o+=2,c.seqs=[];for(var h=0;h<d;h++){var m=l.readUshort(a,o)+f;o+=2;var v=l.readUshort(a,m);c.seqs.push(l.readUshorts(a,m+2,v))}}else if(s==4)for(c.vals=[],d=l.readUshort(a,o),o+=2,h=0;h<d;h++){var g=l.readUshort(a,o);o+=2,c.vals.push(e.GSUB.readLigatureSet(a,f+g))}else if(s==5&&c.fmt==2){if(c.fmt==2){var y=l.readUshort(a,o);o+=2,c.cDef=e._lctf.readClassDef(a,f+y),c.scset=[];var _=l.readUshort(a,o);for(o+=2,h=0;h<_;h++){var x=l.readUshort(a,o);o+=2,c.scset.push(x==0?null:e.GSUB.readSubClassSet(a,f+x))}}}else if(s==6&&c.fmt==3){if(c.fmt==3){for(h=0;h<3;h++){d=l.readUshort(a,o),o+=2;for(var M=[],A=0;A<d;A++)M.push(e._lctf.readCoverage(a,f+l.readUshort(a,o+2*A)));o+=2*d,h==0&&(c.backCvg=M),h==1&&(c.inptCvg=M),h==2&&(c.ahedCvg=M)}d=l.readUshort(a,o),o+=2,c.lookupRec=e.GSUB.readSubstLookupRecords(a,o,d)}}else{if(s==7&&c.fmt==1){var E=l.readUshort(a,o);o+=2;var N=l.readUint(a,o);if(o+=4,u.ltype==9)u.ltype=E;else if(u.ltype!=E)throw"invalid extension substitution";return e.GSUB.subt(a,u.ltype,f+N)}console.debug("unsupported GSUB table LookupType",s,"format",c.fmt)}return c},e.GSUB.readSubClassSet=function(a,s){var o=e._bin.readUshort,u=s,l=[],f=o(a,s);s+=2;for(var c=0;c<f;c++){var p=o(a,s);s+=2,l.push(e.GSUB.readSubClassRule(a,u+p))}return l},e.GSUB.readSubClassRule=function(a,s){var o=e._bin.readUshort,u={},l=o(a,s),f=o(a,s+=2);s+=2,u.input=[];for(var c=0;c<l-1;c++)u.input.push(o(a,s)),s+=2;return u.substLookupRecords=e.GSUB.readSubstLookupRecords(a,s,f),u},e.GSUB.readSubstLookupRecords=function(a,s,o){for(var u=e._bin.readUshort,l=[],f=0;f<o;f++)l.push(u(a,s),u(a,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(a,s){var o=e._bin,u=s,l=[],f=o.readUshort(a,s);s+=2;for(var c=0;c<f;c++){var p=o.readUshort(a,s);s+=2,l.push(e.GSUB.readChainSubClassRule(a,u+p))}return l},e.GSUB.readChainSubClassRule=function(a,s){for(var o=e._bin,u={},l=["backtrack","input","lookahead"],f=0;f<l.length;f++){var c=o.readUshort(a,s);s+=2,f==1&&c--,u[l[f]]=o.readUshorts(a,s,c),s+=2*u[l[f]].length}return c=o.readUshort(a,s),s+=2,u.subst=o.readUshorts(a,s,2*c),s+=2*u.subst.length,u},e.GSUB.readLigatureSet=function(a,s){var o=e._bin,u=s,l=[],f=o.readUshort(a,s);s+=2;for(var c=0;c<f;c++){var p=o.readUshort(a,s);s+=2,l.push(e.GSUB.readLigature(a,u+p))}return l},e.GSUB.readLigature=function(a,s){var o=e._bin,u={chain:[]};u.nglyph=o.readUshort(a,s),s+=2;var l=o.readUshort(a,s);s+=2;for(var f=0;f<l-1;f++)u.chain.push(o.readUshort(a,s)),s+=2;return u},e.head={},e.head.parse=function(a,s,o){var u=e._bin,l={};return u.readFixed(a,s),s+=4,l.fontRevision=u.readFixed(a,s),s+=4,u.readUint(a,s),s+=4,u.readUint(a,s),s+=4,l.flags=u.readUshort(a,s),s+=2,l.unitsPerEm=u.readUshort(a,s),s+=2,l.created=u.readUint64(a,s),s+=8,l.modified=u.readUint64(a,s),s+=8,l.xMin=u.readShort(a,s),s+=2,l.yMin=u.readShort(a,s),s+=2,l.xMax=u.readShort(a,s),s+=2,l.yMax=u.readShort(a,s),s+=2,l.macStyle=u.readUshort(a,s),s+=2,l.lowestRecPPEM=u.readUshort(a,s),s+=2,l.fontDirectionHint=u.readShort(a,s),s+=2,l.indexToLocFormat=u.readShort(a,s),s+=2,l.glyphDataFormat=u.readShort(a,s),s+=2,l},e.hhea={},e.hhea.parse=function(a,s,o){var u=e._bin,l={};return u.readFixed(a,s),s+=4,l.ascender=u.readShort(a,s),s+=2,l.descender=u.readShort(a,s),s+=2,l.lineGap=u.readShort(a,s),s+=2,l.advanceWidthMax=u.readUshort(a,s),s+=2,l.minLeftSideBearing=u.readShort(a,s),s+=2,l.minRightSideBearing=u.readShort(a,s),s+=2,l.xMaxExtent=u.readShort(a,s),s+=2,l.caretSlopeRise=u.readShort(a,s),s+=2,l.caretSlopeRun=u.readShort(a,s),s+=2,l.caretOffset=u.readShort(a,s),s+=2,s+=8,l.metricDataFormat=u.readShort(a,s),s+=2,l.numberOfHMetrics=u.readUshort(a,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(a,s,o,u){for(var l=e._bin,f={aWidth:[],lsBearing:[]},c=0,p=0,d=0;d<u.maxp.numGlyphs;d++)d<u.hhea.numberOfHMetrics&&(c=l.readUshort(a,s),s+=2,p=l.readShort(a,s),s+=2),f.aWidth.push(c),f.lsBearing.push(p);return f},e.kern={},e.kern.parse=function(a,s,o,u){var l=e._bin,f=l.readUshort(a,s);if(s+=2,f==1)return e.kern.parseV1(a,s-2,o,u);var c=l.readUshort(a,s);s+=2;for(var p={glyph1:[],rval:[]},d=0;d<c;d++){s+=2,o=l.readUshort(a,s),s+=2;var h=l.readUshort(a,s);s+=2;var m=h>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(a,s,p)}return p},e.kern.parseV1=function(a,s,o,u){var l=e._bin;l.readFixed(a,s),s+=4;var f=l.readUint(a,s);s+=4;for(var c={glyph1:[],rval:[]},p=0;p<f;p++){l.readUint(a,s),s+=4;var d=l.readUshort(a,s);s+=2,l.readUshort(a,s),s+=2;var h=d>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;s=e.kern.readFormat0(a,s,c)}return c},e.kern.readFormat0=function(a,s,o){var u=e._bin,l=-1,f=u.readUshort(a,s);s+=2,u.readUshort(a,s),s+=2,u.readUshort(a,s),s+=2,u.readUshort(a,s),s+=2;for(var c=0;c<f;c++){var p=u.readUshort(a,s);s+=2;var d=u.readUshort(a,s);s+=2;var h=u.readShort(a,s);s+=2,p!=l&&(o.glyph1.push(p),o.rval.push({glyph2:[],vals:[]}));var m=o.rval[o.rval.length-1];m.glyph2.push(d),m.vals.push(h),l=p}return s},e.loca={},e.loca.parse=function(a,s,o,u){var l=e._bin,f=[],c=u.head.indexToLocFormat,p=u.maxp.numGlyphs+1;if(c==0)for(var d=0;d<p;d++)f.push(l.readUshort(a,s+(d<<1))<<1);if(c==1)for(d=0;d<p;d++)f.push(l.readUint(a,s+(d<<2)));return f},e.maxp={},e.maxp.parse=function(a,s,o){var u=e._bin,l={},f=u.readUint(a,s);return s+=4,l.numGlyphs=u.readUshort(a,s),s+=2,f==65536&&(l.maxPoints=u.readUshort(a,s),s+=2,l.maxContours=u.readUshort(a,s),s+=2,l.maxCompositePoints=u.readUshort(a,s),s+=2,l.maxCompositeContours=u.readUshort(a,s),s+=2,l.maxZones=u.readUshort(a,s),s+=2,l.maxTwilightPoints=u.readUshort(a,s),s+=2,l.maxStorage=u.readUshort(a,s),s+=2,l.maxFunctionDefs=u.readUshort(a,s),s+=2,l.maxInstructionDefs=u.readUshort(a,s),s+=2,l.maxStackElements=u.readUshort(a,s),s+=2,l.maxSizeOfInstructions=u.readUshort(a,s),s+=2,l.maxComponentElements=u.readUshort(a,s),s+=2,l.maxComponentDepth=u.readUshort(a,s),s+=2),l},e.name={},e.name.parse=function(a,s,o){var u=e._bin,l={};u.readUshort(a,s),s+=2;var f=u.readUshort(a,s);s+=2,u.readUshort(a,s);for(var c,p=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=s+=2,h=0;h<f;h++){var m=u.readUshort(a,s);s+=2;var v=u.readUshort(a,s);s+=2;var g=u.readUshort(a,s);s+=2;var y=u.readUshort(a,s);s+=2;var _=u.readUshort(a,s);s+=2;var x=u.readUshort(a,s);s+=2;var M,A=p[y],E=d+12*f+x;if(m==0)M=u.readUnicode(a,E,_/2);else if(m==3&&v==0)M=u.readUnicode(a,E,_/2);else if(v==0)M=u.readASCII(a,E,_);else if(v==1)M=u.readUnicode(a,E,_/2);else if(v==3)M=u.readUnicode(a,E,_/2);else{if(m!=1)throw"unknown encoding "+v+", platformID: "+m;M=u.readASCII(a,E,_),console.debug("reading unknown MAC encoding "+v+" as ASCII")}var N="p"+m+","+g.toString(16);l[N]==null&&(l[N]={}),l[N][A!==void 0?A:y]=M,l[N]._lang=g}for(var D in l)if(l[D].postScriptName!=null&&l[D]._lang==1033)return l[D];for(var D in l)if(l[D].postScriptName!=null&&l[D]._lang==0)return l[D];for(var D in l)if(l[D].postScriptName!=null&&l[D]._lang==3084)return l[D];for(var D in l)if(l[D].postScriptName!=null)return l[D];for(var D in l){c=D;break}return console.debug("returning name table with languageID "+l[c]._lang),l[c]},e["OS/2"]={},e["OS/2"].parse=function(a,s,o){var u=e._bin.readUshort(a,s);s+=2;var l={};if(u==0)e["OS/2"].version0(a,s,l);else if(u==1)e["OS/2"].version1(a,s,l);else if(u==2||u==3||u==4)e["OS/2"].version2(a,s,l);else{if(u!=5)throw"unknown OS/2 table version: "+u;e["OS/2"].version5(a,s,l)}return l},e["OS/2"].version0=function(a,s,o){var u=e._bin;return o.xAvgCharWidth=u.readShort(a,s),s+=2,o.usWeightClass=u.readUshort(a,s),s+=2,o.usWidthClass=u.readUshort(a,s),s+=2,o.fsType=u.readUshort(a,s),s+=2,o.ySubscriptXSize=u.readShort(a,s),s+=2,o.ySubscriptYSize=u.readShort(a,s),s+=2,o.ySubscriptXOffset=u.readShort(a,s),s+=2,o.ySubscriptYOffset=u.readShort(a,s),s+=2,o.ySuperscriptXSize=u.readShort(a,s),s+=2,o.ySuperscriptYSize=u.readShort(a,s),s+=2,o.ySuperscriptXOffset=u.readShort(a,s),s+=2,o.ySuperscriptYOffset=u.readShort(a,s),s+=2,o.yStrikeoutSize=u.readShort(a,s),s+=2,o.yStrikeoutPosition=u.readShort(a,s),s+=2,o.sFamilyClass=u.readShort(a,s),s+=2,o.panose=u.readBytes(a,s,10),s+=10,o.ulUnicodeRange1=u.readUint(a,s),s+=4,o.ulUnicodeRange2=u.readUint(a,s),s+=4,o.ulUnicodeRange3=u.readUint(a,s),s+=4,o.ulUnicodeRange4=u.readUint(a,s),s+=4,o.achVendID=[u.readInt8(a,s),u.readInt8(a,s+1),u.readInt8(a,s+2),u.readInt8(a,s+3)],s+=4,o.fsSelection=u.readUshort(a,s),s+=2,o.usFirstCharIndex=u.readUshort(a,s),s+=2,o.usLastCharIndex=u.readUshort(a,s),s+=2,o.sTypoAscender=u.readShort(a,s),s+=2,o.sTypoDescender=u.readShort(a,s),s+=2,o.sTypoLineGap=u.readShort(a,s),s+=2,o.usWinAscent=u.readUshort(a,s),s+=2,o.usWinDescent=u.readUshort(a,s),s+=2},e["OS/2"].version1=function(a,s,o){var u=e._bin;return s=e["OS/2"].version0(a,s,o),o.ulCodePageRange1=u.readUint(a,s),s+=4,o.ulCodePageRange2=u.readUint(a,s),s+=4},e["OS/2"].version2=function(a,s,o){var u=e._bin;return s=e["OS/2"].version1(a,s,o),o.sxHeight=u.readShort(a,s),s+=2,o.sCapHeight=u.readShort(a,s),s+=2,o.usDefault=u.readUshort(a,s),s+=2,o.usBreak=u.readUshort(a,s),s+=2,o.usMaxContext=u.readUshort(a,s),s+=2},e["OS/2"].version5=function(a,s,o){var u=e._bin;return s=e["OS/2"].version2(a,s,o),o.usLowerOpticalPointSize=u.readUshort(a,s),s+=2,o.usUpperOpticalPointSize=u.readUshort(a,s),s+=2},e.post={},e.post.parse=function(a,s,o){var u=e._bin,l={};return l.version=u.readFixed(a,s),s+=4,l.italicAngle=u.readFixed(a,s),s+=4,l.underlinePosition=u.readShort(a,s),s+=2,l.underlineThickness=u.readShort(a,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(a,s){var o=a.cmap,u=-1;if(o.p0e4!=null?u=o.p0e4:o.p3e1!=null?u=o.p3e1:o.p1e0!=null?u=o.p1e0:o.p0e3!=null&&(u=o.p0e3),u==-1)throw"no familiar platform and encoding!";var l=o.tables[u];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var f=-1,c=0;c<l.endCount.length;c++)if(s<=l.endCount[c]){f=c;break}return f==-1||l.startCount[f]>s?0:65535&(l.idRangeOffset[f]!=0?l.glyphIdArray[s-l.startCount[f]+(l.idRangeOffset[f]>>1)-(l.idRangeOffset.length-f)]:s+l.idDelta[f])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(c=0;c<l.groups.length;c++){var p=l.groups[c];if(p[0]<=s&&s<=p[1])return p[2]+(s-p[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(a,s){var o={cmds:[],crds:[]};if(a.SVG&&a.SVG.entries[s]){var u=a.SVG.entries[s];return u==null?o:(typeof u=="string"&&(u=e.SVG.toPath(u),a.SVG.entries[s]=u),u)}if(a.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:a.CFF.Private?a.CFF.Private.defaultWidthX:0,open:!1},f=a.CFF,c=a.CFF.Private;if(f.ROS){for(var p=0;f.FDSelect[p+2]<=s;)p+=2;c=f.FDArray[f.FDSelect[p+1]].Private}e.U._drawCFF(a.CFF.CharStrings[s],l,f,c,o)}else a.glyf&&e.U._drawGlyf(s,a,o);return o},e.U._drawGlyf=function(a,s,o){var u=s.glyf[a];u==null&&(u=s.glyf[a]=e.glyf._parseGlyf(s,a)),u!=null&&(u.noc>-1?e.U._simpleGlyph(u,o):e.U._compoGlyph(u,s,o))},e.U._simpleGlyph=function(a,s){for(var o=0;o<a.noc;o++){for(var u=o==0?0:a.endPts[o-1]+1,l=a.endPts[o],f=u;f<=l;f++){var c=f==u?l:f-1,p=f==l?u:f+1,d=1&a.flags[f],h=1&a.flags[c],m=1&a.flags[p],v=a.xs[f],g=a.ys[f];if(f==u)if(d){if(!h){e.U.P.moveTo(s,v,g);continue}e.U.P.moveTo(s,a.xs[c],a.ys[c])}else h?e.U.P.moveTo(s,a.xs[c],a.ys[c]):e.U.P.moveTo(s,(a.xs[c]+v)/2,(a.ys[c]+g)/2);d?h&&e.U.P.lineTo(s,v,g):m?e.U.P.qcurveTo(s,v,g,a.xs[p],a.ys[p]):e.U.P.qcurveTo(s,v,g,(v+a.xs[p])/2,(g+a.ys[p])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(a,s,o){for(var u=0;u<a.parts.length;u++){var l={cmds:[],crds:[]},f=a.parts[u];e.U._drawGlyf(f.glyphIndex,s,l);for(var c=f.m,p=0;p<l.crds.length;p+=2){var d=l.crds[p],h=l.crds[p+1];o.crds.push(d*c.a+h*c.b+c.tx),o.crds.push(d*c.c+h*c.d+c.ty)}for(p=0;p<l.cmds.length;p++)o.cmds.push(l.cmds[p])}},e.U._getGlyphClass=function(a,s){var o=e._lctf.getInterval(s,a);return o==-1?0:s[o+2]},e.U._applySubs=function(a,s,o,u){for(var l=a.length-s-1,f=0;f<o.tabs.length;f++)if(o.tabs[f]!=null){var c,p=o.tabs[f];if(!p.coverage||(c=e._lctf.coverageIndex(p.coverage,a[s]))!=-1){if(o.ltype==1)a[s],p.fmt==1?a[s]=a[s]+p.delta:a[s]=p.newg[c];else if(o.ltype==4)for(var d=p.vals[c],h=0;h<d.length;h++){var m=d[h],v=m.chain.length;if(!(v>l)){for(var g=!0,y=0,_=0;_<v;_++){for(;a[s+y+(1+_)]==-1;)y++;m.chain[_]!=a[s+y+(1+_)]&&(g=!1)}if(g){for(a[s]=m.nglyph,_=0;_<v+y;_++)a[s+_+1]=-1;break}}}else if(o.ltype==5&&p.fmt==2)for(var x=e._lctf.getInterval(p.cDef,a[s]),M=p.cDef[x+2],A=p.scset[M],E=0;E<A.length;E++){var N=A[E],D=N.input;if(!(D.length>l)){for(g=!0,_=0;_<D.length;_++){var C=e._lctf.getInterval(p.cDef,a[s+1+_]);if(x==-1&&p.cDef[C+2]!=D[_]){g=!1;break}}if(g){var T=N.substLookupRecords;for(h=0;h<T.length;h+=2)T[h],T[h+1]}}}else if(o.ltype==6&&p.fmt==3){if(!e.U._glsCovered(a,p.backCvg,s-p.backCvg.length)||!e.U._glsCovered(a,p.inptCvg,s)||!e.U._glsCovered(a,p.ahedCvg,s+p.inptCvg.length))continue;var P=p.lookupRec;for(E=0;E<P.length;E+=2){x=P[E];var I=u[P[E+1]];e.U._applySubs(a,s+x,I,u)}}}}},e.U._glsCovered=function(a,s,o){for(var u=0;u<s.length;u++)if(e._lctf.coverageIndex(s[u],a[o+u])==-1)return!1;return!0},e.U.glyphsToPath=function(a,s,o){for(var u={cmds:[],crds:[]},l=0,f=0;f<s.length;f++){var c=s[f];if(c!=-1){for(var p=f<s.length-1&&s[f+1]!=-1?s[f+1]:0,d=e.U.glyphToPath(a,c),h=0;h<d.crds.length;h+=2)u.crds.push(d.crds[h]+l),u.crds.push(d.crds[h+1]);for(o&&u.cmds.push(o),h=0;h<d.cmds.length;h++)u.cmds.push(d.cmds[h]);o&&u.cmds.push("X"),l+=a.hmtx.aWidth[c],f<s.length-1&&(l+=e.U.getPairAdjustment(a,c,p))}}return u},e.U.P={},e.U.P.moveTo=function(a,s,o){a.cmds.push("M"),a.crds.push(s,o)},e.U.P.lineTo=function(a,s,o){a.cmds.push("L"),a.crds.push(s,o)},e.U.P.curveTo=function(a,s,o,u,l,f,c){a.cmds.push("C"),a.crds.push(s,o,u,l,f,c)},e.U.P.qcurveTo=function(a,s,o,u,l){a.cmds.push("Q"),a.crds.push(s,o,u,l)},e.U.P.closePath=function(a){a.cmds.push("Z")},e.U._drawCFF=function(a,s,o,u,l){for(var f=s.stack,c=s.nStems,p=s.haveWidth,d=s.width,h=s.open,m=0,v=s.x,g=s.y,y=0,_=0,x=0,M=0,A=0,E=0,N=0,D=0,C=0,T=0,P={val:0,size:0};m<a.length;){e.CFF.getCharString(a,m,P);var I=P.val;if(m+=P.size,I=="o1"||I=="o18")f.length%2!=0&&!p&&(d=f.shift()+u.nominalWidthX),c+=f.length>>1,f.length=0,p=!0;else if(I=="o3"||I=="o23")f.length%2!=0&&!p&&(d=f.shift()+u.nominalWidthX),c+=f.length>>1,f.length=0,p=!0;else if(I=="o4")f.length>1&&!p&&(d=f.shift()+u.nominalWidthX,p=!0),h&&e.U.P.closePath(l),g+=f.pop(),e.U.P.moveTo(l,v,g),h=!0;else if(I=="o5")for(;f.length>0;)v+=f.shift(),g+=f.shift(),e.U.P.lineTo(l,v,g);else if(I=="o6"||I=="o7")for(var U=f.length,q=I=="o6",z=0;z<U;z++){var G=f.shift();q?v+=G:g+=G,q=!q,e.U.P.lineTo(l,v,g)}else if(I=="o8"||I=="o24"){U=f.length;for(var F=0;F+6<=U;)y=v+f.shift(),_=g+f.shift(),x=y+f.shift(),M=_+f.shift(),v=x+f.shift(),g=M+f.shift(),e.U.P.curveTo(l,y,_,x,M,v,g),F+=6;I=="o24"&&(v+=f.shift(),g+=f.shift(),e.U.P.lineTo(l,v,g))}else{if(I=="o11")break;if(I=="o1234"||I=="o1235"||I=="o1236"||I=="o1237")I=="o1234"&&(_=g,x=(y=v+f.shift())+f.shift(),T=M=_+f.shift(),E=M,D=g,v=(N=(A=(C=x+f.shift())+f.shift())+f.shift())+f.shift(),e.U.P.curveTo(l,y,_,x,M,C,T),e.U.P.curveTo(l,A,E,N,D,v,g)),I=="o1235"&&(y=v+f.shift(),_=g+f.shift(),x=y+f.shift(),M=_+f.shift(),C=x+f.shift(),T=M+f.shift(),A=C+f.shift(),E=T+f.shift(),N=A+f.shift(),D=E+f.shift(),v=N+f.shift(),g=D+f.shift(),f.shift(),e.U.P.curveTo(l,y,_,x,M,C,T),e.U.P.curveTo(l,A,E,N,D,v,g)),I=="o1236"&&(y=v+f.shift(),_=g+f.shift(),x=y+f.shift(),T=M=_+f.shift(),E=M,N=(A=(C=x+f.shift())+f.shift())+f.shift(),D=E+f.shift(),v=N+f.shift(),e.U.P.curveTo(l,y,_,x,M,C,T),e.U.P.curveTo(l,A,E,N,D,v,g)),I=="o1237"&&(y=v+f.shift(),_=g+f.shift(),x=y+f.shift(),M=_+f.shift(),C=x+f.shift(),T=M+f.shift(),A=C+f.shift(),E=T+f.shift(),N=A+f.shift(),D=E+f.shift(),Math.abs(N-v)>Math.abs(D-g)?v=N+f.shift():g=D+f.shift(),e.U.P.curveTo(l,y,_,x,M,C,T),e.U.P.curveTo(l,A,E,N,D,v,g));else if(I=="o14"){if(f.length>0&&!p&&(d=f.shift()+o.nominalWidthX,p=!0),f.length==4){var k=f.shift(),O=f.shift(),W=f.shift(),X=f.shift(),ee=e.CFF.glyphBySE(o,W),J=e.CFF.glyphBySE(o,X);e.U._drawCFF(o.CharStrings[ee],s,o,u,l),s.x=k,s.y=O,e.U._drawCFF(o.CharStrings[J],s,o,u,l)}h&&(e.U.P.closePath(l),h=!1)}else if(I=="o19"||I=="o20")f.length%2!=0&&!p&&(d=f.shift()+u.nominalWidthX),c+=f.length>>1,f.length=0,p=!0,m+=c+7>>3;else if(I=="o21")f.length>2&&!p&&(d=f.shift()+u.nominalWidthX,p=!0),g+=f.pop(),v+=f.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,v,g),h=!0;else if(I=="o22")f.length>1&&!p&&(d=f.shift()+u.nominalWidthX,p=!0),v+=f.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,v,g),h=!0;else if(I=="o25"){for(;f.length>6;)v+=f.shift(),g+=f.shift(),e.U.P.lineTo(l,v,g);y=v+f.shift(),_=g+f.shift(),x=y+f.shift(),M=_+f.shift(),v=x+f.shift(),g=M+f.shift(),e.U.P.curveTo(l,y,_,x,M,v,g)}else if(I=="o26")for(f.length%2&&(v+=f.shift());f.length>0;)y=v,_=g+f.shift(),v=x=y+f.shift(),g=(M=_+f.shift())+f.shift(),e.U.P.curveTo(l,y,_,x,M,v,g);else if(I=="o27")for(f.length%2&&(g+=f.shift());f.length>0;)_=g,x=(y=v+f.shift())+f.shift(),M=_+f.shift(),v=x+f.shift(),g=M,e.U.P.curveTo(l,y,_,x,M,v,g);else if(I=="o10"||I=="o29"){var Y=I=="o10"?u:o;if(f.length==0)console.debug("error: empty stack");else{var ie=f.pop(),K=Y.Subrs[ie+Y.Bias];s.x=v,s.y=g,s.nStems=c,s.haveWidth=p,s.width=d,s.open=h,e.U._drawCFF(K,s,o,u,l),v=s.x,g=s.y,c=s.nStems,p=s.haveWidth,d=s.width,h=s.open}}else if(I=="o30"||I=="o31"){var re=f.length,oe=(F=0,I=="o31");for(F+=re-(U=-3&re);F<U;)oe?(_=g,x=(y=v+f.shift())+f.shift(),g=(M=_+f.shift())+f.shift(),U-F==5?(v=x+f.shift(),F++):v=x,oe=!1):(y=v,_=g+f.shift(),x=y+f.shift(),M=_+f.shift(),v=x+f.shift(),U-F==5?(g=M+f.shift(),F++):g=M,oe=!0),e.U.P.curveTo(l,y,_,x,M,v,g),F+=4}else{if((I+"").charAt(0)=="o")throw console.debug("Unknown operation: "+I,a),I;f.push(I)}}}s.x=v,s.y=g,s.nStems=c,s.haveWidth=p,s.width=d,s.open=h};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function SOe(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,a=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(I,U){for(var q=new n(31),z=0;z<31;++z)q[z]=U+=1<<I[z-1];var G=new r(q[30]);for(z=1;z<30;++z)for(var F=q[z];F<q[z+1];++F)G[F]=F-q[z]<<5|z;return[q,G]},l=u(a,2),f=l[0],c=l[1];f[28]=258,c[258]=28;for(var p=u(s,0)[0],d=new n(32768),h=0;h<32768;++h){var m=(43690&h)>>>1|(21845&h)<<1;m=(61680&(m=(52428&m)>>>2|(13107&m)<<2))>>>4|(3855&m)<<4,d[h]=((65280&m)>>>8|(255&m)<<8)>>>1}var v=function(I,U,q){for(var z=I.length,G=0,F=new n(U);G<z;++G)++F[I[G]-1];var k,O=new n(U);for(G=0;G<U;++G)O[G]=O[G-1]+F[G-1]<<1;{k=new n(1<<U);var W=15-U;for(G=0;G<z;++G)if(I[G])for(var X=G<<4|I[G],ee=U-I[G],J=O[I[G]-1]++<<ee,Y=J|(1<<ee)-1;J<=Y;++J)k[d[J]>>>W]=X}return k},g=new e(288);for(h=0;h<144;++h)g[h]=8;for(h=144;h<256;++h)g[h]=9;for(h=256;h<280;++h)g[h]=7;for(h=280;h<288;++h)g[h]=8;var y=new e(32);for(h=0;h<32;++h)y[h]=5;var _=v(g,9),x=v(y,5),M=function(I){for(var U=I[0],q=1;q<I.length;++q)I[q]>U&&(U=I[q]);return U},A=function(I,U,q){var z=U/8|0;return(I[z]|I[z+1]<<8)>>(7&U)&q},E=function(I,U){var q=U/8|0;return(I[q]|I[q+1]<<8|I[q+2]<<16)>>(7&U)},N=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],D=function(I,U,q){var z=new Error(U||N[I]);if(z.code=I,Error.captureStackTrace&&Error.captureStackTrace(z,D),!q)throw z;return z},C=function(I,U,q){var z=I.length;if(!z||q&&!q.l&&z<5)return U||new e(0);var G=!U||q,F=!q||q.i;q||(q={}),U||(U=new e(3*z));var k,O=function(je){var we=U.length;if(je>we){var V=new e(Math.max(2*we,je));V.set(U),U=V}},W=q.f||0,X=q.p||0,ee=q.b||0,J=q.l,Y=q.d,ie=q.m,K=q.n,re=8*z;do{if(!J){q.f=W=A(I,X,1);var oe=A(I,X+1,3);if(X+=3,!oe){var ce=I[($=((k=X)/8|0)+(7&k&&1)+4)-4]|I[$-3]<<8,me=$+ce;if(me>z){F&&D(0);break}G&&O(ee+ce),U.set(I.subarray($,me),ee),q.b=ee+=ce,q.p=X=8*me;continue}if(oe==1)J=_,Y=x,ie=9,K=5;else if(oe==2){var Se=A(I,X,31)+257,le=A(I,X+10,15)+4,Q=Se+A(I,X+5,31)+1;X+=14;for(var Ee=new e(Q),ne=new e(19),se=0;se<le;++se)ne[o[se]]=A(I,X+3*se,7);X+=3*le;var xe=M(ne),ve=(1<<xe)-1,te=v(ne,xe);for(se=0;se<Q;){var $,B=te[A(I,X,ve)];if(X+=15&B,($=B>>>4)<16)Ee[se++]=$;else{var ae=0,ue=0;for($==16?(ue=3+A(I,X,3),X+=2,ae=Ee[se-1]):$==17?(ue=3+A(I,X,7),X+=3):$==18&&(ue=11+A(I,X,127),X+=7);ue--;)Ee[se++]=ae}}var _e=Ee.subarray(0,Se),be=Ee.subarray(Se);ie=M(_e),K=M(be),J=v(_e,ie),Y=v(be,K)}else D(1);if(X>re){F&&D(0);break}}G&&O(ee+131072);for(var Pe=(1<<ie)-1,Te=(1<<K)-1,Ie=X;;Ie=X){var Oe=(ae=J[E(I,X)&Pe])>>>4;if((X+=15&ae)>re){F&&D(0);break}if(ae||D(2),Oe<256)U[ee++]=Oe;else{if(Oe==256){Ie=X,J=null;break}var Be=Oe-254;if(Oe>264){var He=a[se=Oe-257];Be=A(I,X,(1<<He)-1)+f[se],X+=He}var Qe=Y[E(I,X)&Te],et=Qe>>>4;if(Qe||D(3),X+=15&Qe,be=p[et],et>3&&(He=s[et],be+=E(I,X)&(1<<He)-1,X+=He),X>re){F&&D(0);break}G&&O(ee+131072);for(var Xe=ee+Be;ee<Xe;ee+=4)U[ee]=U[ee-be],U[ee+1]=U[ee+1-be],U[ee+2]=U[ee+2-be],U[ee+3]=U[ee+3-be];ee=Xe}}q.l=J,q.p=Ie,q.b=ee,J&&(W=1,q.m=ie,q.d=Y,q.n=K)}while(!W);return ee==U.length?U:function(je,we,V){(V==null||V>je.length)&&(V=je.length);var j=new(je instanceof n?n:je instanceof r?r:e)(V-we);return j.set(je.subarray(we,V)),j}(U,0,ee)},T=new e(0),P=typeof TextDecoder<"u"&&new TextDecoder;try{P.decode(T,{stream:!0})}catch{}return t.convert_streams=function(I){var U=new DataView(I),q=0;function z(){var Se=U.getUint16(q);return q+=2,Se}function G(){var Se=U.getUint32(q);return q+=4,Se}function F(Se){ce.setUint16(me,Se),me+=2}function k(Se){ce.setUint32(me,Se),me+=4}for(var O={signature:G(),flavor:G(),length:G(),numTables:z(),reserved:z(),totalSfntSize:G(),majorVersion:z(),minorVersion:z(),metaOffset:G(),metaLength:G(),metaOrigLength:G(),privOffset:G(),privLength:G()},W=0;Math.pow(2,W)<=O.numTables;)W++;W--;for(var X=16*Math.pow(2,W),ee=16*O.numTables-X,J=12,Y=[],ie=0;ie<O.numTables;ie++)Y.push({tag:G(),offset:G(),compLength:G(),origLength:G(),origChecksum:G()}),J+=16;var K,re=new Uint8Array(12+16*Y.length+Y.reduce(function(Se,le){return Se+le.origLength+4},0)),oe=re.buffer,ce=new DataView(oe),me=0;return k(O.flavor),F(O.numTables),F(X),F(W),F(ee),Y.forEach(function(Se){k(Se.tag),k(Se.origChecksum),k(J),k(Se.origLength),Se.outOffset=J,(J+=Se.origLength)%4!=0&&(J+=4-J%4)}),Y.forEach(function(Se){var le,Q=I.slice(Se.offset,Se.offset+Se.compLength);if(Se.compLength!=Se.origLength){var Ee=new Uint8Array(Se.origLength);le=new Uint8Array(Q,2),C(le,Ee)}else Ee=new Uint8Array(Q);re.set(Ee,Se.outOffset);var ne=0;(J=Se.outOffset+Se.origLength)%4!=0&&(ne=4-J%4),re.set(new Uint8Array(ne).buffer,Se.outOffset+Se.origLength),K=J+ne}),oe.slice(0,K)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function wOe(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},a=1,s=2,o=4,u=8,l=16,f=32;let c;function p(N){if(!c){const D={R:s,L:a,D:o,C:l,U:f,T:u};c=new Map;for(let C in r){let T=0;r[C].split(",").forEach(P=>{let[I,U]=P.split("+");I=parseInt(I,36),U=U?parseInt(U,36):0,c.set(T+=I,D[C]);for(let q=U;q--;)c.set(++T,D[C])})}}return c.get(N)||f}const d=1,h=2,m=3,v=4,g=[null,"isol","init","fina","medi"];function y(N){const D=new Uint8Array(N.length);let C=f,T=d,P=-1;for(let I=0;I<N.length;I++){const U=N.codePointAt(I);let q=p(U)|0,z=d;q&u||(C&(a|o|l)?q&(s|o|l)?(z=m,(T===d||T===m)&&D[P]++):q&(a|f)&&(T===h||T===v)&&D[P]--:C&(s|f)&&(T===h||T===v)&&D[P]--,T=D[I]=z,C=q,P=I,U>65535&&I++)}return D}function _(N,D){const C=[];for(let P=0;P<D.length;P++){const I=D.codePointAt(P);I>65535&&P++,C.push(t.U.codeToGlyph(N,I))}const T=N.GSUB;if(T){const{lookupList:P,featureList:I}=T;let U;const q=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,z=[];I.forEach(G=>{if(q.test(G.tag))for(let F=0;F<G.tab.length;F++){if(z[G.tab[F]])continue;z[G.tab[F]]=!0;const k=P[G.tab[F]],O=/^(isol|init|fina|medi)$/.test(G.tag);O&&!U&&(U=y(D));for(let W=0;W<C.length;W++)(!U||!O||g[U[W]]===G.tag)&&t.U._applySubs(C,W,k,P)}})}return C}function x(N,D){const C=new Int16Array(D.length*3);let T=0;for(;T<D.length;T++){const q=D[T];if(q===-1)continue;C[T*3+2]=N.hmtx.aWidth[q];const z=N.GPOS;if(z){const G=z.lookupList;for(let F=0;F<G.length;F++){const k=G[F];for(let O=0;O<k.tabs.length;O++){const W=k.tabs[O];if(k.ltype===1){if(t._lctf.coverageIndex(W.coverage,q)!==-1&&W.pos){U(W.pos,T);break}}else if(k.ltype===2){let X=null,ee=P();if(ee!==-1){const J=t._lctf.coverageIndex(W.coverage,D[ee]);if(J!==-1){if(W.fmt===1){const Y=W.pairsets[J];for(let ie=0;ie<Y.length;ie++)Y[ie].gid2===q&&(X=Y[ie])}else if(W.fmt===2){const Y=t.U._getGlyphClass(D[ee],W.classDef1),ie=t.U._getGlyphClass(q,W.classDef2);X=W.matrix[Y][ie]}if(X){X.val1&&U(X.val1,ee),X.val2&&U(X.val2,T);break}}}}else if(k.ltype===4){const X=t._lctf.coverageIndex(W.markCoverage,q);if(X!==-1){const ee=P(I),J=ee===-1?-1:t._lctf.coverageIndex(W.baseCoverage,D[ee]);if(J!==-1){const Y=W.markArray[X],ie=W.baseArray[J][Y.markClass];C[T*3]=ie.x-Y.x+C[ee*3]-C[ee*3+2],C[T*3+1]=ie.y-Y.y+C[ee*3+1];break}}}else if(k.ltype===6){const X=t._lctf.coverageIndex(W.mark1Coverage,q);if(X!==-1){const ee=P();if(ee!==-1){const J=D[ee];if(M(N,J)===3){const Y=t._lctf.coverageIndex(W.mark2Coverage,J);if(Y!==-1){const ie=W.mark1Array[X],K=W.mark2Array[Y][ie.markClass];C[T*3]=K.x-ie.x+C[ee*3]-C[ee*3+2],C[T*3+1]=K.y-ie.y+C[ee*3+1];break}}}}}}}}else if(N.kern&&!N.cff){const G=P();if(G!==-1){const F=N.kern.glyph1.indexOf(D[G]);if(F!==-1){const k=N.kern.rval[F].glyph2.indexOf(q);k!==-1&&(C[G*3+2]+=N.kern.rval[F].vals[k])}}}}return C;function P(q){for(let z=T-1;z>=0;z--)if(D[z]!==-1&&(!q||q(D[z])))return z;return-1}function I(q){return M(N,q)===1}function U(q,z){for(let G=0;G<3;G++)C[z*3+G]+=q[G]||0}}function M(N,D){const C=N.GDEF&&N.GDEF.glyphClassDef;return C?t.U._getGlyphClass(D,C):0}function A(...N){for(let D=0;D<N.length;D++)if(typeof N[D]=="number")return N[D]}function E(N){const D=Object.create(null),C=N["OS/2"],T=N.hhea,P=N.head.unitsPerEm,I=A(C&&C.sTypoAscender,T&&T.ascender,P),U={unitsPerEm:P,ascender:I,descender:A(C&&C.sTypoDescender,T&&T.descender,0),capHeight:A(C&&C.sCapHeight,I),xHeight:A(C&&C.sxHeight,I),lineGap:A(C&&C.sTypoLineGap,T&&T.lineGap),supportsCodePoint(q){return t.U.codeToGlyph(N,q)>0},forEachGlyph(q,z,G,F){let k=0;const O=1/U.unitsPerEm*z,W=_(N,q);let X=0;const ee=x(N,W);return W.forEach((J,Y)=>{if(J!==-1){let ie=D[J];if(!ie){const{cmds:K,crds:re}=t.U.glyphToPath(N,J);let oe="",ce=0;for(let Ee=0,ne=K.length;Ee<ne;Ee++){const se=n[K[Ee]];oe+=K[Ee];for(let xe=1;xe<=se;xe++)oe+=(xe>1?",":"")+re[ce++]}let me,Se,le,Q;if(re.length){me=Se=1/0,le=Q=-1/0;for(let Ee=0,ne=re.length;Ee<ne;Ee+=2){let se=re[Ee],xe=re[Ee+1];se<me&&(me=se),xe<Se&&(Se=xe),se>le&&(le=se),xe>Q&&(Q=xe)}}else me=le=Se=Q=0;ie=D[J]={index:J,advanceWidth:N.hmtx.aWidth[J],xMin:me,yMin:Se,xMax:le,yMax:Q,path:oe}}F.call(null,ie,k+ee[Y*3]*O,ee[Y*3+1]*O,X),k+=ee[Y*3+2]*O,G&&(k+=G*z)}X+=q.codePointAt(X)>65535?2:1}),k}};return U}return function(D){const C=new Uint8Array(D,0,4),T=t._bin.readASCII(C,0,4);if(T==="wOFF")D=e(D);else if(T==="wOF2")throw new Error("woff2 fonts not supported");return E(t.parse(D)[0])}}const _Oe=bv({name:"Typr Font Parser",dependencies:[bOe,SOe,wOe],init(t,e,n){const r=t(),a=e();return n(r,a)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function MOe(){return function(t){var e=function(){this.buckets=new Map};e.prototype.add=function(x){var M=x>>5;this.buckets.set(M,(this.buckets.get(M)||0)|1<<(31&x))},e.prototype.has=function(x){var M=this.buckets.get(x>>5);return M!==void 0&&(M&1<<(31&x))!=0},e.prototype.serialize=function(){var x=[];return this.buckets.forEach(function(M,A){x.push((+A).toString(36)+":"+M.toString(36))}),x.join(",")},e.prototype.deserialize=function(x){var M=this;this.buckets.clear(),x.split(",").forEach(function(A){var E=A.split(":");M.buckets.set(parseInt(E[0],36),parseInt(E[1],36))})};var n=Math.pow(2,8),r=n-1,a=~r;function s(x){var M=function(E){return E&a}(x).toString(16),A=function(E){return(E&a)+n-1}(x).toString(16);return"codepoint-index/plane"+(x>>16)+"/"+M+"-"+A+".json"}function o(x,M){var A=x&r,E=M.codePointAt(A/6|0);return((E=(E||48)-48)&1<<A%6)!=0}function u(x,M){var A;(A=x,A.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(E){return E.split("-").map(function(N){return parseInt(N.trim(),16)})})).forEach(function(E){var N=E[0],D=E[1];D===void 0&&(D=N),M(N,D)})}function l(x,M){u(x,function(A,E){for(var N=A;N<=E;N++)M(N)})}var f={},c={},p=new WeakMap,d="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function h(x){var M=p.get(x);return M||(M=new e,l(x.ranges,function(A){return M.add(A)}),p.set(x,M)),M}var m,v=new Map;function g(x,M,A){return x[M]?M:x[A]?A:function(E){for(var N in E)return N}(x)}function y(x,M){var A=M;if(!x.includes(A)){A=1/0;for(var E=0;E<x.length;E++)Math.abs(x[E]-M)<Math.abs(A-M)&&(A=x[E])}return A}function _(x){return m||(m=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(M){m.add(M)})),m.has(x)}return t.CodePointSet=e,t.clearCache=function(){f={},c={}},t.getFontsForString=function(x,M){M===void 0&&(M={});var A,E=M.lang;E===void 0&&(E=new RegExp("\\p{Script=Hangul}","u").test(A=x)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(A)?"ja":"en");var N=M.category;N===void 0&&(N="sans-serif");var D=M.style;D===void 0&&(D="normal");var C=M.weight;C===void 0&&(C=400);var T=(M.dataUrl||d).replace(/\/$/g,""),P=new Map,I=new Uint8Array(x.length),U={},q={},z=new Array(x.length),G=new Map,F=!1;function k(X){var ee=v.get(X);return ee||(ee=fetch(T+"/"+X).then(function(J){if(!J.ok)throw new Error(J.statusText);return J.json().then(function(Y){if(!Array.isArray(Y)||Y[0]!==1)throw new Error("Incorrect schema version; need 1, got "+Y[0]);return Y[1]})}).catch(function(J){if(T!==d)return F||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+T+'", trying default CDN. '+J.message),F=!0),T=d,v.delete(X),k(X);throw J}),v.set(X,ee)),ee}for(var O=function(X){var ee=x.codePointAt(X),J=s(ee);z[X]=J,f[J]||G.has(J)||G.set(J,k(J).then(function(Y){f[J]=Y})),ee>65535&&(X++,W=X)},W=0;W<x.length;W++)O(W);return Promise.all(G.values()).then(function(){G.clear();for(var X=function(J){var Y=x.codePointAt(J),ie=null,K=f[z[J]],re=void 0;for(var oe in K){var ce=q[oe];if(ce===void 0&&(ce=q[oe]=new RegExp(oe).test(E||"en")),ce){for(var me in re=oe,K[oe])if(o(Y,K[oe][me])){ie=me;break}break}}if(!ie){e:for(var Se in K)if(Se!==re){for(var le in K[Se])if(o(Y,K[Se][le])){ie=le;break e}}}ie||(console.debug("No font coverage for U+"+Y.toString(16)),ie="latin"),z[J]=ie,c[ie]||G.has(ie)||G.set(ie,k("font-meta/"+ie+".json").then(function(Q){c[ie]=Q})),Y>65535&&(J++,ee=J)},ee=0;ee<x.length;ee++)X(ee);return Promise.all(G.values())}).then(function(){for(var X,ee=null,J=0;J<x.length;J++){var Y=x.codePointAt(J);if(ee&&(_(Y)||h(ee).has(Y)))I[J]=I[J-1];else{ee=c[z[J]];var ie=U[ee.id];if(!ie){var K=ee.typeforms,re=g(K,N,"sans-serif"),oe=g(K[re],D,"normal"),ce=y((X=K[re])===null||X===void 0?void 0:X[oe],C);ie=U[ee.id]=T+"/font-files/"+ee.id+"/"+re+"."+oe+"."+ce+".woff"}var me=P.get(ie);me==null&&(me=P.size,P.set(ie,me)),I[J]=me}Y>65535&&(J++,I[J]=I[J-1])}return{fontUrls:Array.from(P.keys()),chars:I}})},Object.defineProperty(t,"__esModule",{value:!0}),t}({})}function EOe(t,e){const n=Object.create(null),r=Object.create(null);function a(o,u){const l=f=>{console.error(`Failure loading font ${o}`,f)};try{const f=new XMLHttpRequest;f.open("get",o,!0),f.responseType="arraybuffer",f.onload=function(){if(f.status>=400)l(new Error(f.statusText));else if(f.status>0)try{const c=t(f.response);c.src=o,u(c)}catch(c){l(c)}},f.onerror=l,f.send()}catch(f){l(f)}}function s(o,u){let l=n[o];l?u(l):r[o]?r[o].push(u):(r[o]=[u],a(o,f=>{f.src=o,n[o]=f,r[o].forEach(c=>c(f)),delete r[o]}))}return function(o,u,{lang:l,fonts:f=[],style:c="normal",weight:p="normal",unicodeFontsURL:d}={}){const h=new Uint8Array(o.length),m=[];o.length||_();const v=new Map,g=[];if(c!=="italic"&&(c="normal"),typeof p!="number"&&(p=p==="bold"?700:400),f&&!Array.isArray(f)&&(f=[f]),f=f.slice().filter(M=>!M.lang||M.lang.test(l)).reverse(),f.length){let N=0;(function D(C=0){for(let T=C,P=o.length;T<P;T++){const I=o.codePointAt(T);if(N===1&&m[h[T-1]].supportsCodePoint(I)||/\s/.test(o[T]))h[T]=h[T-1],N===2&&(g[g.length-1][1]=T);else for(let U=h[T],q=f.length;U<=q;U++)if(U===q){const z=N===2?g[g.length-1]:g[g.length]=[T,T];z[1]=T,N=2}else{h[T]=U;const{src:z,unicodeRange:G}=f[U];if(!G||x(I,G)){const F=n[z];if(!F){s(z,()=>{D(T)});return}if(F.supportsCodePoint(I)){let k=v.get(F);typeof k!="number"&&(k=m.length,m.push(F),v.set(F,k)),h[T]=k,N=1;break}}}I>65535&&T+1<P&&(h[T+1]=h[T],T++,N===2&&(g[g.length-1][1]=T))}y()})()}else g.push([0,o.length-1]),y();function y(){if(g.length){const M=g.map(A=>o.substring(A[0],A[1]+1)).join(`
`);e.getFontsForString(M,{lang:l||void 0,style:c,weight:p,dataUrl:d}).then(({fontUrls:A,chars:E})=>{const N=m.length;let D=0;g.forEach(T=>{for(let P=0,I=T[1]-T[0];P<=I;P++)h[T[0]+P]=E[D++]+N;D++});let C=0;A.forEach((T,P)=>{s(T,I=>{m[P+N]=I,++C===A.length&&_()})})})}else _()}function _(){u({chars:h,fonts:m})}function x(M,A){for(let E=0;E<A.length;E++){const[N,D=N]=A[E];if(N<=M&&M<=D)return!0}return!1}}}const TOe=bv({name:"FontResolver",dependencies:[EOe,_Oe,MOe],init(t,e,n){return t(e,n())}});function AOe(t,e){const r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",s=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o({text:m,lang:v,fonts:g,style:y,weight:_,preResolvedFonts:x,unicodeFontsURL:M},A){const E=({chars:N,fonts:D})=>{let C,T;const P=[];for(let I=0;I<N.length;I++)N[I]!==T?(T=N[I],P.push(C={start:I,end:I,fontObj:D[N[I]]})):C.end=I;A(P)};x?E(x):t(m,E,{lang:v,fonts:g,style:y,weight:_,unicodeFontsURL:M})}function u({text:m="",font:v,lang:g,sdfGlyphSize:y=64,fontSize:_=400,fontWeight:x=1,fontStyle:M="normal",letterSpacing:A=0,lineHeight:E="normal",maxWidth:N=1/0,direction:D,textAlign:C="left",textIndent:T=0,whiteSpace:P="normal",overflowWrap:I="normal",anchorX:U=0,anchorY:q=0,metricsOnly:z=!1,unicodeFontsURL:G,preResolvedFonts:F=null,includeCaretPositions:k=!1,chunkedBoundsSize:O=8192,colorRanges:W=null},X){const ee=p(),J={fontLoad:0,typesetting:0};m.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),m=m.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),_=+_,A=+A,N=+N,E=E||"normal",T=+T,o({text:m,lang:g,style:M,weight:x,fonts:typeof v=="string"?[{src:v}]:v,unicodeFontsURL:G,preResolvedFonts:F},Y=>{J.fontLoad=p()-ee;const ie=isFinite(N);let K=null,re=null,oe=null,ce=null,me=null,Se=null,le=null,Q=null,Ee=0,ne=0,se=P!=="nowrap";const xe=new Map,ve=p();let te=T,$=0,B=new d;const ae=[B];Y.forEach(Te=>{const{fontObj:Ie}=Te,{ascender:Oe,descender:Be,unitsPerEm:He,lineGap:Qe,capHeight:et,xHeight:Xe}=Ie;let je=xe.get(Ie);if(!je){const he=_/He,Ae=E==="normal"?(Oe-Be+Qe)*he:E*_,Fe=(Ae-(Oe-Be)*he)/2,qe=Math.min(Ae,(Oe-Be)*he),Ze=(Oe+Be)/2*he+qe/2;je={index:xe.size,src:Ie.src,fontObj:Ie,fontSizeMult:he,unitsPerEm:He,ascender:Oe*he,descender:Be*he,capHeight:et*he,xHeight:Xe*he,lineHeight:Ae,baseline:-Fe-Oe*he,caretTop:Ze,caretBottom:Ze-qe},xe.set(Ie,je)}const{fontSizeMult:we}=je,V=m.slice(Te.start,Te.end+1);let j,pe;Ie.forEachGlyph(V,_,A,(he,Ae,Fe,qe)=>{Ae+=$,qe+=Te.start,j=Ae,pe=he;const Ze=m.charAt(qe),it=he.advanceWidth*we,ot=B.count;let tt;if("isEmpty"in he||(he.isWhitespace=!!Ze&&new RegExp(a).test(Ze),he.canBreakAfter=!!Ze&&s.test(Ze),he.isEmpty=he.xMin===he.xMax||he.yMin===he.yMax||r.test(Ze)),!he.isWhitespace&&!he.isEmpty&&ne++,se&&ie&&!he.isWhitespace&&Ae+it+te>N&&ot){if(B.glyphAt(ot-1).glyphObj.canBreakAfter)tt=new d,te=-Ae;else for(let Xt=ot;Xt--;)if(Xt===0&&I==="break-word"){tt=new d,te=-Ae;break}else if(B.glyphAt(Xt).glyphObj.canBreakAfter){tt=B.splitAt(Xt+1);const Ln=tt.glyphAt(0).x;te-=Ln;for(let Hn=tt.count;Hn--;)tt.glyphAt(Hn).x-=Ln;break}tt&&(B.isSoftWrapped=!0,B=tt,ae.push(B),Ee=N)}let Nt=B.glyphAt(B.count);Nt.glyphObj=he,Nt.x=Ae+te,Nt.y=Fe,Nt.width=it,Nt.charIndex=qe,Nt.fontData=je,Ze===`
`&&(B=new d,ae.push(B),te=-(Ae+it+A*_)+T)}),$=j+pe.advanceWidth*we+A*_});let ue=0;ae.forEach(Te=>{let Ie=!0;for(let Oe=Te.count;Oe--;){const Be=Te.glyphAt(Oe);Ie&&!Be.glyphObj.isWhitespace&&(Te.width=Be.x+Be.width,Te.width>Ee&&(Ee=Te.width),Ie=!1);let{lineHeight:He,capHeight:Qe,xHeight:et,baseline:Xe}=Be.fontData;He>Te.lineHeight&&(Te.lineHeight=He);const je=Xe-Te.baseline;je<0&&(Te.baseline+=je,Te.cap+=je,Te.ex+=je),Te.cap=Math.max(Te.cap,Te.baseline+Qe),Te.ex=Math.max(Te.ex,Te.baseline+et)}Te.baseline-=ue,Te.cap-=ue,Te.ex-=ue,ue+=Te.lineHeight});let _e=0,be=0;if(U&&(typeof U=="number"?_e=-U:typeof U=="string"&&(_e=-Ee*(U==="left"?0:U==="center"?.5:U==="right"?1:f(U)))),q&&(typeof q=="number"?be=-q:typeof q=="string"&&(be=q==="top"?0:q==="top-baseline"?-ae[0].baseline:q==="top-cap"?-ae[0].cap:q==="top-ex"?-ae[0].ex:q==="middle"?ue/2:q==="bottom"?ue:q==="bottom-baseline"?-ae[ae.length-1].baseline:f(q)*ue)),!z){const Te=e.getEmbeddingLevels(m,D);K=new Uint16Array(ne),re=new Uint8Array(ne),oe=new Float32Array(ne*2),ce={},le=[1/0,1/0,-1/0,-1/0],Q=[],k&&(Se=new Float32Array(m.length*4)),W&&(me=new Uint8Array(ne*3));let Ie=0,Oe=-1,Be=-1,He,Qe;if(ae.forEach((et,Xe)=>{let{count:je,width:we}=et;if(je>0){let V=0;for(let qe=je;qe--&&et.glyphAt(qe).glyphObj.isWhitespace;)V++;let j=0,pe=0;if(C==="center")j=(Ee-we)/2;else if(C==="right")j=Ee-we;else if(C==="justify"&&et.isSoftWrapped){let qe=0;for(let Ze=je-V;Ze--;)et.glyphAt(Ze).glyphObj.isWhitespace&&qe++;pe=(Ee-we)/qe}if(pe||j){let qe=0;for(let Ze=0;Ze<je;Ze++){let it=et.glyphAt(Ze);const ot=it.glyphObj;it.x+=j+qe,pe!==0&&ot.isWhitespace&&Ze<je-V&&(qe+=pe,it.width+=pe)}}const he=e.getReorderSegments(m,Te,et.glyphAt(0).charIndex,et.glyphAt(et.count-1).charIndex);for(let qe=0;qe<he.length;qe++){const[Ze,it]=he[qe];let ot=1/0,tt=-1/0;for(let Nt=0;Nt<je;Nt++)if(et.glyphAt(Nt).charIndex>=Ze){let Xt=Nt,Ln=Nt;for(;Ln<je;Ln++){let Hn=et.glyphAt(Ln);if(Hn.charIndex>it)break;Ln<je-V&&(ot=Math.min(ot,Hn.x),tt=Math.max(tt,Hn.x+Hn.width))}for(let Hn=Xt;Hn<Ln;Hn++){const br=et.glyphAt(Hn);br.x=tt-(br.x+br.width-ot)}break}}let Ae;const Fe=qe=>Ae=qe;for(let qe=0;qe<je;qe++){const Ze=et.glyphAt(qe);Ae=Ze.glyphObj;const it=Ae.index,ot=Te.levels[Ze.charIndex]&1;if(ot){const tt=e.getMirroredCharacter(m[Ze.charIndex]);tt&&Ze.fontData.fontObj.forEachGlyph(tt,0,0,Fe)}if(k){const{charIndex:tt,fontData:Nt}=Ze,Xt=Ze.x+_e,Ln=Ze.x+Ze.width+_e;Se[tt*4]=ot?Ln:Xt,Se[tt*4+1]=ot?Xt:Ln,Se[tt*4+2]=et.baseline+Nt.caretBottom+be,Se[tt*4+3]=et.baseline+Nt.caretTop+be;const Hn=tt-Oe;Hn>1&&c(Se,Oe,Hn),Oe=tt}if(W){const{charIndex:tt}=Ze;for(;tt>Be;)Be++,W.hasOwnProperty(Be)&&(Qe=W[Be])}if(!Ae.isWhitespace&&!Ae.isEmpty){const tt=Ie++,{fontSizeMult:Nt,src:Xt,index:Ln}=Ze.fontData,Hn=ce[Xt]||(ce[Xt]={});Hn[it]||(Hn[it]={path:Ae.path,pathBounds:[Ae.xMin,Ae.yMin,Ae.xMax,Ae.yMax]});const br=Ze.x+_e,Un=Ze.y+et.baseline+be;oe[tt*2]=br,oe[tt*2+1]=Un;const Rr=br+Ae.xMin*Nt,ar=Un+Ae.yMin*Nt,Xr=br+Ae.xMax*Nt,Fn=Un+Ae.yMax*Nt;Rr<le[0]&&(le[0]=Rr),ar<le[1]&&(le[1]=ar),Xr>le[2]&&(le[2]=Xr),Fn>le[3]&&(le[3]=Fn),tt%O===0&&(He={start:tt,end:tt,rect:[1/0,1/0,-1/0,-1/0]},Q.push(He)),He.end++;const sr=He.rect;if(Rr<sr[0]&&(sr[0]=Rr),ar<sr[1]&&(sr[1]=ar),Xr>sr[2]&&(sr[2]=Xr),Fn>sr[3]&&(sr[3]=Fn),K[tt]=it,re[tt]=Ln,W){const Ir=tt*3;me[Ir]=Qe>>16&255,me[Ir+1]=Qe>>8&255,me[Ir+2]=Qe&255}}}}}),Se){const et=m.length-Oe;et>1&&c(Se,Oe,et)}}const Pe=[];xe.forEach(({index:Te,src:Ie,unitsPerEm:Oe,ascender:Be,descender:He,lineHeight:Qe,capHeight:et,xHeight:Xe})=>{Pe[Te]={src:Ie,unitsPerEm:Oe,ascender:Be,descender:He,lineHeight:Qe,capHeight:et,xHeight:Xe}}),J.typesetting=p()-ve,X({glyphIds:K,glyphFontIndices:re,glyphPositions:oe,glyphData:ce,fontData:Pe,caretPositions:Se,glyphColors:me,chunkedBounds:Q,fontSize:_,topBaseline:be+ae[0].baseline,blockBounds:[_e,be-ue,_e+Ee,be],visibleBounds:le,timings:J})})}function l(m,v){u({...m,metricsOnly:!0},g=>{const[y,_,x,M]=g.blockBounds;v({width:x-y,height:M-_})})}function f(m){let v=m.match(/^([\d.]+)%$/),g=v?parseFloat(v[1]):NaN;return isNaN(g)?0:g/100}function c(m,v,g){const y=m[v*4],_=m[v*4+1],x=m[v*4+2],M=m[v*4+3],A=(_-y)/g;for(let E=0;E<g;E++){const N=(v+E)*4;m[N]=y+A*E,m[N+1]=y+A*(E+1),m[N+2]=x,m[N+3]=M}}function p(){return(self.performance||Date).now()}function d(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(m){let v=d.flyweight;return v.data=this.data,v.index=m,v},splitAt(m){let v=new d;return v.data=this.data.splice(m*h.length),v}},d.flyweight=h.reduce((m,v,g,y)=>(Object.defineProperty(m,v,{get(){return this.data[this.index*h.length+g]},set(_){this.data[this.index*h.length+g]=_}}),m),{data:null,index:0}),{typeset:u,measure:l}}const Hd=()=>(self.performance||Date).now(),$D=gte();let CH;function NOe(t,e,n,r,a,s,o,u,l,f,c=!0){return c?DOe(t,e,n,r,a,s,o,u,l,f).then(null,p=>(CH||(console.warn("WebGL SDF generation failed, falling back to JS",p),CH=!0),RH(t,e,n,r,a,s,o,u,l,f))):RH(t,e,n,r,a,s,o,u,l,f)}const M2=[],COe=5;let UL=0;function xte(){const t=Hd();for(;M2.length&&Hd()-t<COe;)M2.shift()();UL=M2.length?setTimeout(xte,0):0}const DOe=(...t)=>new Promise((e,n)=>{M2.push(()=>{const r=Hd();try{$D.webgl.generateIntoCanvas(...t),e({timing:Hd()-r})}catch(a){n(a)}}),UL||(UL=setTimeout(xte,0))}),ROe=4,IOe=2e3,DH={};let POe=0;function RH(t,e,n,r,a,s,o,u,l,f){const c="TroikaTextSDFGenerator_JS_"+POe++%ROe;let p=DH[c];return p||(p=DH[c]={workerModule:bv({name:c,workerId:c,dependencies:[gte,Hd],init(d,h){const m=d().javascript.generate;return function(...v){const g=h();return{textureData:m(...v),timing:h()-g}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),p.requests++,clearTimeout(p.idleTimer),p.workerModule(t,e,n,r,a,s).then(({textureData:d,timing:h})=>{const m=Hd(),v=new Uint8Array(d.length*4);for(let g=0;g<d.length;g++)v[g*4+f]=d[g];return $D.webglUtils.renderImageData(o,v,u,l,t,e,1<<3-f),h+=Hd()-m,--p.requests===0&&(p.idleTimer=setTimeout(()=>{cOe(c)},IOe)),{timing:h}})}function OOe(t){t._warm||($D.webgl.isSupported(t),t._warm=!0)}const LOe=$D.webglUtils.resizeWebGLCanvasWithoutClearing,k0={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},kOe=new gt;function D0(){return(self.performance||Date).now()}const IH=Object.create(null);function bte(t,e){t=BOe({},t);const n=D0(),{defaultFontURL:r}=k0,a=[];if(r&&a.push({label:"default",src:PH(r)}),t.font&&a.push({label:"user",src:PH(t.font)}),t.font=a,t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||k0.sdfGlyphSize,t.unicodeFontsURL=t.unicodeFontsURL||k0.unicodeFontsURL,t.colorRanges!=null){let d={};for(let h in t.colorRanges)if(t.colorRanges.hasOwnProperty(h)){let m=t.colorRanges[h];typeof m!="number"&&(m=kOe.set(m).getHex()),d[h]=m}t.colorRanges=d}Object.freeze(t);const{textureWidth:s,sdfExponent:o}=k0,{sdfGlyphSize:u}=t,l=s/u*4;let f=IH[u];if(!f){const d=document.createElement("canvas");d.width=s,d.height=u*256/l,f=IH[u]={glyphCount:0,sdfGlyphSize:u,sdfCanvas:d,sdfTexture:new Ur(d,void 0,void 0,void 0,ni,ni),contextLost:!1,glyphsByFont:new Map},f.sdfTexture.generateMipmaps=!1,UOe(f)}const{sdfTexture:c,sdfCanvas:p}=f;qOe(t).then(d=>{const{glyphIds:h,glyphFontIndices:m,fontData:v,glyphPositions:g,fontSize:y,timings:_}=d,x=[],M=new Float32Array(h.length*4);let A=0,E=0;const N=D0(),D=v.map(U=>{let q=f.glyphsByFont.get(U.src);return q||f.glyphsByFont.set(U.src,q=new Map),q});h.forEach((U,q)=>{const z=m[q],{src:G,unitsPerEm:F}=v[z];let k=D[z].get(U);if(!k){const{path:J,pathBounds:Y}=d.glyphData[G][U],ie=Math.max(Y[2]-Y[0],Y[3]-Y[1])/u*(k0.sdfMargin*u+.5),K=f.glyphCount++,re=[Y[0]-ie,Y[1]-ie,Y[2]+ie,Y[3]+ie];D[z].set(U,k={path:J,atlasIndex:K,sdfViewBox:re}),x.push(k)}const{sdfViewBox:O}=k,W=g[E++],X=g[E++],ee=y/F;M[A++]=W+O[0]*ee,M[A++]=X+O[1]*ee,M[A++]=W+O[2]*ee,M[A++]=X+O[3]*ee,h[q]=k.atlasIndex}),_.quads=(_.quads||0)+(D0()-N);const C=D0();_.sdf={};const T=p.height,P=Math.ceil(f.glyphCount/l),I=Math.pow(2,Math.ceil(Math.log2(P*u)));I>T&&(console.info(`Increasing SDF texture size ${T}->${I}`),LOe(p,s,I),c.dispose()),Promise.all(x.map(U=>Ste(U,f,t.gpuAccelerateSDF).then(({timing:q})=>{_.sdf[U.atlasIndex]=q}))).then(()=>{x.length&&!f.contextLost&&(wte(f),c.needsUpdate=!0),_.sdfTotal=D0()-C,_.total=D0()-n,e(Object.freeze({parameters:t,sdfTexture:c,sdfGlyphSize:u,sdfExponent:o,glyphBounds:M,glyphAtlasIndices:h,glyphColors:d.glyphColors,caretPositions:d.caretPositions,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{f.contextLost||OOe(p)})}function Ste({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:a,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:l}=k0,f=Math.max(n[2]-n[0],n[3]-n[1]),c=Math.floor(e/4),p=c%(u/r)*r,d=Math.floor(c/(u/r))*r,h=e%4;return NOe(r,r,t,n,f,l,a,p,d,h,o)}function UOe(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(a=>{a.forEach(s=>{r.push(Ste(s,t,!0))})}),Promise.all(r).then(()=>{wte(t),t.sdfTexture.needsUpdate=!0})})}function FOe({font:t,characters:e,sdfGlyphSize:n},r){let a=Array.isArray(e)?e.join(`
`):""+e;bte({font:t,sdfGlyphSize:n,text:a},r)}function BOe(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let WS;function PH(t){return WS||(WS=typeof document>"u"?{}:document.createElement("a")),WS.href=t,WS.href}function wte(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:a}=e,s=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==r*a*4)&&(o=new Uint8Array(r*a*4),n.image={width:r,height:a,data:o},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,r,a,s.RGBA,s.UNSIGNED_BYTE,o)}}const zOe=bv({name:"Typesetter",dependencies:[AOe,TOe,pOe],init(t,e,n){return t(e,n())}}),qOe=bv({name:"Typesetter",dependencies:[zOe],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[];for(let n in t)t[n]&&t[n].buffer&&e.push(t[n].buffer);return e}}),OH={};function GOe(t){let e=OH[t];if(!e){const n=new Kc(1,1,t,t),r=n.clone(),a=n.attributes,s=r.attributes,o=new fn,u=a.uv.count;for(let l=0;l<u;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Rt([...a[l].array,...s[l].array],a[l].itemSize))}),o.setIndex([...n.index.array,...r.index.array.map(l=>l+u)]),o.translate(.5,.5,0),e=OH[t]=o}return e}const HOe="aTroikaGlyphBounds",LH="aTroikaGlyphIndex",VOe="aTroikaGlyphColor";class WOe extends iF{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new fa,this.boundingBox=new La}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===Pa?n/2:0,e===ko?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=GOe(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,a,s){NP(this,HOe,e,4),NP(this,LH,n,1),NP(this,VOe,s,3),this._blockBounds=r,this._chunkedBounds=a,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:a,floor:s,min:o,max:u,sin:l,cos:f}=Math,c=a/2,p=a*2,d=Math.abs(n),h=e[0]/d,m=e[2]/d,v=s((h+c)/p)!==s((m+c)/p)?-d:o(l(h)*d,l(m)*d),g=s((h-c)/p)!==s((m-c)/p)?d:u(l(h)*d,l(m)*d),y=s((h+a)/p)!==s((m+a)/p)?d*2:u(d-f(h)*d,d-f(m)*d);r.min.set(v,e[1],n<0?-y:0),r.max.set(g,e[3],n<0?0:y)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(LH).count,r=this._chunkedBounds;if(r)for(let a=r.length;a--;){n=r[a].end;let s=r[a].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=n}}function NP(t,e,n,r){const a=t.getAttribute(e);n?a&&a.array.length===n.length?(a.array.set(n),a.needsUpdate=!0):(t.setAttribute(e,new ch(n,r)),delete t._maxInstanceCount,t.dispose()):a&&t.deleteAttribute(e)}const $Oe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,jOe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,XOe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,YOe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function QOe(t){const e=kL(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new nt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new On(0,0,0,0)},uTroikaClipRect:{value:new On(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new nt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new gt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new un},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:$Oe,vertexTransform:jOe,fragmentDefs:XOe,fragmentColorTransform:YOe,customRewriter({vertexShader:n,fragmentShader:r}){let a=/\buniform\s+vec3\s+diffuse\b/;return a.test(r)&&(r=r.replace(a,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),a.test(n)||(n=n.replace(yte,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const dF=new Jc({color:16777215,side:ko,transparent:!0}),kH=8421504,UH=new Ht,$S=new ge,CP=new ge,bg=[],ZOe=new ge,DP="+x+y";function FH(t){return Array.isArray(t)?t[0]:t}let _te=()=>{const t=new Wr(new Kc(1,1),dF);return _te=()=>t,t},Mte=()=>{const t=new Wr(new Kc(1,1,32,1),dF);return Mte=()=>t,t};const JOe={type:"syncstart"},KOe={type:"synccomplete"},Ete=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],eLe=Ete.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Tte=class extends Wr{constructor(){const e=new WOe;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=kH,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=DP,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(JOe),bte({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(a=>a&&a())})),this.dispatchEvent(KOe),e&&e()})))}onBeforeRender(e,n,r,a,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Sl}onAfterRender(e,n,r,a,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=dF.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=QOe(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function a(){e.removeEventListener("dispose",a),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return FH(this.material).getDepthMaterial()}get customDistanceMaterial(){return FH(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,a=this.textRenderInfo;if(a){const{sdfTexture:u,blockBounds:l}=a;r.uTroikaSDFTexture.value=u,r.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),r.uTroikaSDFGlyphSize.value=a.sdfGlyphSize,r.uTroikaSDFExponent.value=a.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!a.glyphColors;let f=0,c=0,p=0,d,h,m,v=0,g=0;if(n){let{outlineWidth:_,outlineOffsetX:x,outlineOffsetY:M,outlineBlur:A,outlineOpacity:E}=this;f=this._parsePercent(_)||0,c=Math.max(0,this._parsePercent(A)||0),d=E,v=this._parsePercent(x)||0,g=this._parsePercent(M)||0}else p=Math.max(0,this._parsePercent(this.strokeWidth)||0),p&&(m=this.strokeColor,r.uTroikaStrokeColor.value.set(m??kH),h=this.strokeOpacity,h==null&&(h=1)),d=this.fillOpacity;r.uTroikaDistanceOffset.value=f,r.uTroikaPositionOffset.value.set(v,g),r.uTroikaBlurRadius.value=c,r.uTroikaStrokeWidth.value=p,r.uTroikaStrokeOpacity.value=h,r.uTroikaFillOpacity.value=d??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let y=this.clipRect;if(y&&Array.isArray(y)&&y.length===4)r.uTroikaClipRect.value.fromArray(y);else{const _=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-_,l[1]-_,l[2]+_,l[3]+_)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=n?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const u=e.hasOwnProperty("color")?e.color:e.color=new gt;(s!==u._input||typeof s=="object")&&u.set(u._input=s)}let o=this.orientation||DP;if(o!==e._orientation){let u=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==DP&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,f,c,p,d]=l;$S.set(0,0,0)[c]=f==="-"?1:-1,CP.set(0,0,0)[d]=p==="-"?-1:1,UH.lookAt(ZOe,$S.cross(CP),CP),u.setFromMatrix4(UH)}else u.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new nt){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new nt){return $S.copy(e),this.localPositionToTextCoords(this.worldToLocal($S),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:a}=this;if(r){const s=r.blockBounds,o=a?Mte():_te(),u=o.geometry,{position:l,uv:f}=u.attributes;for(let c=0;c<f.count;c++){let p=s[0]+f.getX(c)*(s[2]-s[0]);const d=s[1]+f.getY(c)*(s[3]-s[1]);let h=0;a&&(h=a-Math.cos(p/a)*a,p=Math.sin(p/a)*a),l.setXYZ(c,p,d,h)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,bg.length=0,o.raycast(e,bg);for(let c=0;c<bg.length;c++)bg[c].object=this,n.push(bg[c])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,eLe.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};Ete.forEach(t=>{const e="_private_"+t;Object.defineProperty(Tte.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const BH=Ge.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:a=1,children:s,characters:o,onSync:u,...l},f)=>{const c=Yl(({invalidate:m})=>m),[p]=Ge.useState(()=>new Tte),[d,h]=Ge.useMemo(()=>{const m=[];let v="";return Ge.Children.forEach(s,g=>{typeof g=="string"||typeof g=="number"?v+=g:m.push(g)}),[m,v]},[s]);return fPe(()=>new Promise(m=>FOe({font:r,characters:o},m)),["troika-text",r,o]),Ge.useLayoutEffect(()=>void p.sync(()=>{c(),u&&u(p)})),Ge.useEffect(()=>()=>p.dispose(),[p]),Ge.createElement("primitive",wm({object:p,ref:f,font:r,text:h,anchorX:e,anchorY:n,fontSize:a,sdfGlyphSize:t},l),d)}),tLe=Ge.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:a=!0,keyEvents:s=!1,onChange:o,onStart:u,onEnd:l,...f},c)=>{const p=Yl(E=>E.invalidate),d=Yl(E=>E.camera),h=Yl(E=>E.gl),m=Yl(E=>E.events),v=Yl(E=>E.setEvents),g=Yl(E=>E.set),y=Yl(E=>E.get),_=Yl(E=>E.performance),x=e||d,M=r||m.connected||h.domElement,A=Ge.useMemo(()=>new aOe(x),[x]);return PPe(()=>{A.enabled&&A.update()},-1),Ge.useEffect(()=>(s&&A.connect(s===!0?M:s),A.connect(M),()=>void A.dispose()),[s,M,n,A,p]),Ge.useEffect(()=>{const E=C=>{p(),n&&_.regress(),o&&o(C)},N=C=>{u&&u(C)},D=C=>{l&&l(C)};return A.addEventListener("change",E),A.addEventListener("start",N),A.addEventListener("end",D),()=>{A.removeEventListener("start",N),A.removeEventListener("end",D),A.removeEventListener("change",E)}},[o,u,l,A,p,v]),Ge.useEffect(()=>{if(t){const E=y().controls;return g({controls:A}),()=>g({controls:E})}},[t,A]),Ge.createElement("primitive",wm({ref:c,object:A,enableDamping:a},f))});function zH({origin:t,direction:e,length:n,color:r}){const a=Ge.useRef();return Ge.useEffect(()=>{a.current&&(a.current.setDirection(e),a.current.setLength(n))},[e,n]),Mt.jsx("arrowHelper",{ref:a,args:[e,t,n,r]})}const S_=800,qH=["x","y","z"],nLe=()=>{const t=new ge(0,0,0);let e=0,n=[],r=[0,0,0];for(;e<3;)n.push({origin:t,direction:new ge(...r.map((a,s)=>s==e?S_:0)),text:qH[e]}),n.push({origin:t,direction:new ge(...r.map((a,s)=>s==e?-S_:0)),text:`-${qH[e]}`}),e+=1;return n},rLe=({data:t})=>{const[e,n]=Ge.useState(!1),r=t&&t.length?t:[],a=[16711680,16776960,16777215],s=nLe();return Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("div",{style:{position:"relative"},children:!!(r&&r.length)&&Mt.jsx(PO,{variant:"outlined",sx:{position:"absolute",left:"10px"},onClick:()=>n(!e),children:e?"Show Gates":"Show Indices"})}),r.map((o,u)=>Mt.jsxs(Mt.Fragment,{children:[Mt.jsx("br",{}),Mt.jsxs("div",{children:["Visualizing Qubit ",u,":"]}),Mt.jsxs(tOe,{camera:{position:[-8,10,10],fov:5},children:[Mt.jsx(tLe,{enableZoom:!0}),Mt.jsx("ambientLight",{intensity:.5}),s.map(l=>Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(zH,{origin:l.origin,direction:l.direction,length:S_,color:15856113}),Mt.jsx(BH,{position:l.origin.clone().add(l.direction.clone().multiplyScalar(1/(S_*2))),fontSize:.1,color:15856113,anchorX:"left",anchorY:"bottom",children:l.text})]})),o.map((l,f)=>{if(f===0)return null;let c=new ge(r[u][f-1].coord[0],r[u][f-1].coord[1],r[u][f-1].coord[2]),p=new ge(r[u][f].coord[0],r[u][f].coord[1],r[u][f].coord[2]);const d=new ge().subVectors(p,c);let h=new ge(0,0,0);const m=a[u%a.length],v=c.clone().add(h);return f!==0?Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(zH,{origin:c,direction:d,length:1,color:m},f),Mt.jsx(BH,{position:v.clone().add(p.clone().multiplyScalar(1/2)),fontSize:.1,color:m,anchorX:"center",anchorY:"middle",children:e?f:r[u][f].gate})]}):null})]},u)]}))]})};function iLe(){const[t,e]=Ge.useState(`OPENQASM 2.0;
import "qelib1.inc";
qreg q[2];
h q[0];
y q[1];
`),[n,r]=Ge.useState(!1),[a,s]=Ge.useState(!1),o=f=>{e(f.target.value)},u=()=>{e("")},l=()=>{r(!0);const f=YEe(t);s(f),r(!1)};return n?Mt.jsx(Oue,{sx:f=>({color:"#fff",zIndex:f.zIndex.drawer+1}),open:n,children:Mt.jsx(Jue,{color:"inherit"})}):Mt.jsx(Mt.Fragment,{children:Mt.jsxs("div",{children:[Mt.jsx(cle,{}),Mt.jsx(gI,{variant:"h1",color:"primary",children:"Bloch Trace"}),Mt.jsxs(gI,{variant:"p",children:["Blochsphere(",Mt.jsx("a",{href:"https://bloch.kherb.io/",children:"https://bloch.kherb.io/"}),") allows you to visualize current state of the qubit. But, what if you wanted to visualize what happened to the qubit before reaching that state ? BlochTrace allows you to trace the path, which is snapshot of states the qubits followed in a given circuit. Each of qubits of the circuit are assumed to be in pure states. Each arrow in the trace represents snapshot of applying an operation on the qubit. View the demo below, every operation starts with pointing in z direction, the sequence of numbers are added as label. ",Mt.jsx("i",{children:"Use mouse to drag and move in 3D space"})]}),Mt.jsx(gI,{my:"20px",children:"Input Program"}),Mt.jsx("textarea",{id:"program",name:"program",rows:"10",cols:"50",style:{width:"100%",maxWidth:"800px",maxHeight:"50%"},value:t,onChange:o}),Mt.jsxs(Uue,{mt:"10px",children:[Mt.jsx(PO,{variant:"contained",onClick:l,children:"Trace"}),Mt.jsx(PO,{onClick:u,children:"Reset"})]}),Mt.jsx("br",{}),Mt.jsx("br",{}),Mt.jsx(rLe,{data:a})]})})}nW(document.getElementById("root")).render(Mt.jsx(Ge.StrictMode,{children:Mt.jsx(iLe,{})}));
